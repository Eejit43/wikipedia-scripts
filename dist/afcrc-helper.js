// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/afcrc-helper/afcrc-helper.ts

"use strict";(()=>{var ae=Object.defineProperty;var E=(f,e)=>()=>(f&&(e=f(f=0)),e);var _=(f,e)=>{for(var t in e)ae(f,t,{get:e[t],enumerable:!0})};var x,G=E(()=>{"use strict";x=class f extends OO.ui.Dialog{contentLayout;logOutput;closeButton;constructor(){super({size:"large"}),f.static.name="ActionsDialog",f.static.title="Actions"}initialize=()=>(OO.ui.Dialog.prototype.initialize.apply(this),this.contentLayout=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.$body.append(this.contentLayout.$element),this.logOutput=document.createElement("div"),this.logOutput.classList.add("afcrc-helper-actions-container"),this.closeButton=new OO.ui.ButtonWidget({label:"Close",flags:["safe","close"]}),this.closeButton.on("click",()=>this.close()),this.contentLayout.$element.append(this.logOutput,this.closeButton.$element),this);addLogEntry(e,t="notice"){let n=new OO.ui.MessageWidget({type:t,inline:!0,label:new OO.ui.HtmlSnippet(e)});this.logOutput.append(n.$element[0]),this.updateSize(),this.closeButton.scrollElementIntoView()}showReload(){this.closeButton.$element.remove();let e=new OO.ui.ButtonWidget({label:"Reload",flags:["primary"]});e.on("click",()=>{window.location.reload()}),this.contentLayout.$element.append(e.$element)}};Object.assign(x.prototype,OO.ui.Dialog.prototype)});var C,Q=E(()=>{"use strict";G();C=class f extends OO.ui.ProcessDialog{api=new mw.Api;scriptMessage=" ([[User:Eejit43/scripts/afcrc-helper|afcrc-helper]])";requestPageType;pageTitle;createdPageWatchMethod;beforeText;pageContent;parsedRequests;editsCreationsToMake=[];constructor(e,t,n){super({size:"large"}),f.static.name="AfcrcHelperDialog",f.static.title="afcrc-helper",f.static.actions=[{action:"cancel",label:"Close",flags:["safe","close"]},{action:"save",label:"Run",flags:["primary","progressive"]}],this.pageTitle=t,this.requestPageType=e,this.createdPageWatchMethod=n&&["nochange","preferences","unwatch","watch"].includes(n)?n:"preferences",document.body.classList.add("afcrc-helper-open")}getActionProcess=e=>!e||e==="cancel"?new OO.ui.Process(()=>{this.parsedRequests.length>0?OO.ui.confirm("Are you sure you want to close? All changes will be discarded.").then(t=>t?this.close():null):this.close()}):e==="save"?new OO.ui.Process(()=>{this.performActions()}):f.super.prototype.getActionProcess.call(this,e);getTeardownProcess=()=>f.super.prototype.getTeardownProcess.call(this).next(()=>{this.$body.empty(),document.body.classList.remove("afcrc-helper-open")});async load(){let e=await this.api.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:this.pageTitle});this.pageContent=e.query.pages[0].revisions[0].slots.main.content.trim(),this.parseRequests(),this.loadInputElements()}parseRequests(){this.beforeText=/^(.*?)==/s.exec(this.pageContent)[1],this.pageContent=this.pageContent.replace(/^.*?==/s,"==");let e=[...this.pageContent.matchAll(/^==.*?==$(\s*(?!==[^=]).*)*/gim)].map(t=>t[0]);for(let t of e){if(/{{afc-c\|/i.test(t))continue;let a=/^==(.*?)==$/m.exec(t)[1].trim();this.parseSubtypeRequests(t,a)}}loadInputElements(){if(this.parsedRequests.length>0){let e=0,t=()=>{let a=Math.min(e+5,this.parsedRequests.length);this.title.setLabel(`afcrc-helper (loading ${e+1}-${a}/${this.parsedRequests.length} requests)`);for(let i=e;i<a;i++)this.loadSubtypeElements(i);a<this.parsedRequests.length?(e=a,setTimeout(t,0)):this.title.setLabel(`afcrc-helper (${this.parsedRequests.length} requests loaded)`)};t()}else{let e=new OO.ui.MessageWidget({type:"notice",label:"No valid requests to handle!"}),t=new OO.ui.PanelLayout({padded:!0,expanded:!1});t.$element.append(e.$element),this.$body.append(t.$element),this.updateSize()}}async performActions(){let e=new OO.ui.WindowManager;document.body.append(e.$element[0]);let t=new x;e.addWindows([t]),t.open();let n={accepted:0,denied:0,"commented on":0,closed:0},a=(await this.api.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:this.pageTitle})).query.pages[0].revisions[0].slots.main.content.trim();this.performSubtypeActions(t,n,a)}formatDeniedReason(e){let t=e.startsWith("autofill:")?/autofill:(\w+)/.exec(e)[1]:`decline|2=${e}`,n=e.startsWith("autofill:")&&e.includes(",")?" "+e.slice(e.indexOf(",")+1).trim():"";return`{{subst:AfC ${this.requestPageType}|${t}}}${n}`}mapDeniedReasons(e,t,n){if(t)return`* ${this.formatDeniedReason(e[0][1])} ~~~~`;let a={};for(let[o,s]of e)s in a||(a[s]=[]),a[s].push(o);let i=Object.entries(a);return i.map(([o,s])=>`* ${this.formatDeniedReason(o)}${i.length>1||!n?` (${s.map(l=>`[[${l}]]`).join(", ")})`:""} ~~~~`).join(`
`)}mapComments(e,t,n){if(t)return`* {{AfC comment|1=${e[0][1]}}} ~~~~`;let a={};for(let[o,s]of e)s in a||(a[s]=[]),a[s].push(o);let i=Object.entries(a);return i.map(([o,s])=>`* {{AfC comment|1=${o}}}${i.length>1||!n?` (${s.map(l=>`[[${l}]]`).join(", ")})`:""} ~~~~`).join(`
`)}modifySectionData(e,{prepend:t,append:n}){let{fullSectionText:a,sectionText:i}=e;return t&&(e.sectionText=t+`
`+e.sectionText),n&&(e.sectionText+=`
`+n),e.fullSectionText=e.fullSectionText.replace(i,e.sectionText),e.pageText=e.pageText.replace(a,e.fullSectionText),e}async makeAllEditsCreations(e){for(let t of this.editsCreationsToMake){let n=t.type==="edit"?this.api.edit(t.title,t.transform):this.api.create(t.title,{summary:t.summary,watchlist:this.createdPageWatchMethod},t.text),a=document.createElement("a");a.target="_blank",a.href=mw.util.getUrl(t.title,"isRedirect"in t&&t.isRedirect?{redirect:"no"}:void 0),a.textContent=t.title,e.addLogEntry(`${t.type==="edit"?"Editing":"Creating"} ${a.outerHTML}...`),await n.catch(async(i,o)=>{i==="ratelimited"?(e.addLogEntry(`Rate limited. Waiting for 70 seconds... (resuming at ${new Date(Date.now()+7e4).toLocaleTimeString()})`,"warning"),await new Promise(s=>setTimeout(s,7e4)),e.addLogEntry("Continuing...","success"),await n.catch((s,l)=>{e.addLogEntry(`Error ${t.type==="edit"?"editing":"creating"} ${a.outerHTML}: ${l?.error.info??"Unknown error"} (${s}).`,"error")})):e.addLogEntry(`Error ${t.type==="edit"?"editing":"creating"} ${a.outerHTML}: ${o?.error.info??"Unknown error"} (${i}).`,"error")})}}parseSubtypeRequests(e,t){throw new Error("Not implemented.")}loadSubtypeElements(e){throw new Error("Not implemented.")}updateRequestColor(e,t){throw new Error("Not implemented.")}async performSubtypeActions(e,t,n){throw new Error("Not implemented.")}};Object.assign(C.prototype,OO.ui.ProcessDialog.prototype)});var W,Y=E(()=>{"use strict";W=class{titleIndex;title;detailsElement;responderElement;dialog;templateParametersEditor;templateEditorsInfo=[];commentInput;tagSelectLayout;denyReasonLayout;closingReasonLayout;commentLayout;constructor(e,t,n,a,i){this.titleIndex=e,this.title=t,this.detailsElement=n,this.responderElement=a,this.dialog=i}setUp(){let e=document.createElement("div"),t=document.createElement("b");t.textContent=this.title,e.append(t);let n=new OO.ui.RadioSelectWidget({classes:["afcrc-helper-action-radio"],items:["Accept","Deny","Comment","Close","None"].map(a=>new OO.ui.RadioOptionWidget({data:a,label:a}))});n.selectItemByLabel("None"),n.on("choose",a=>{this.handleActionChange(a)}),this.loadCommentLayout(),e.append(n.$element[0],this.commentLayout.$element[0]),this.responderElement.append(e)}handleActionChange(e){setTimeout(()=>this.dialog.updateSize(),0);let t=e.getData().toLowerCase();switch(this.updateActionsToTake({action:t}),this.dialog.updateRequestColor(this.detailsElement,this.titleIndex),this.tagSelectLayout&&this.tagSelectLayout.$element.hide(),this.templateParametersEditor&&(this.templateParametersEditor.style.display="none"),this.denyReasonLayout&&this.denyReasonLayout.$element.hide(),this.closingReasonLayout&&this.closingReasonLayout.$element.hide(),t){case"accept":{(!this.tagSelectLayout||!this.templateParametersEditor)&&this.loadTagSelectAndParametersEditor(),this.tagSelectLayout.$element.show(),this.templateParametersEditor.style.display="block";break}case"deny":{this.denyReasonLayout||this.loadDenyReasonLayout(),this.denyReasonLayout.$element.show();break}case"close":{this.closingReasonLayout||this.loadClosingReasonLayout(),this.closingReasonLayout.$element.show();break}}if(["accept","comment","close"].includes(t)){this.commentLayout.$element.show();let n=this.commentInput.getValue().trim();n?this.updateActionsToTake({comment:n}):this.updateActionsToTake({comment:void 0})}else this.commentLayout.$element.hide(),this.updateActionsToTake({comment:void 0})}loadTagSelectAndParametersEditor(){let e=new OO.ui.MenuTagMultiselectWidget({allowArbitrary:!1,allowReordering:!1,options:Object.entries(this.dialog.redirectTemplates).map(([a,{redirect:i}])=>{if(!i)return{data:a,label:a};let o=new OO.ui.HtmlSnippet(`<span class="afcrc-helper-redirect-possibilities">${a}</span>`);return{data:a,label:o}})});e.getMenu().filterMode="substring",e.on("change",()=>{let a=e.getValue(),i=a.sort((s,l)=>s.toLowerCase().localeCompare(l.toLowerCase()));a.join(";")!==i.join(";")&&e.setValue(i),this.updateActionsToTake({redirectTemplates:i});let o=0;for(let s of this.templateEditorsInfo){let l=i.includes(s.name);s.details.style.display=l?"block":"none",l&&o++}t.textContent=`Template parameters (${o>0?`for ${o} template${o>1?"s":""}`:"none to show"})`,n.style.display=o>0?"none":"block"}),this.tagSelectLayout=new OO.ui.FieldLayout(e,{classes:["afcrc-helper-tag-select-layout"],align:"inline",label:"Redirect templates:"}),this.commentLayout.$element[0].before(this.tagSelectLayout.$element[0]),this.templateParametersEditor=document.createElement("details"),this.templateParametersEditor.classList.add("afcrc-helper-template-parameters-container");let t=document.createElement("summary");t.textContent="Template parameters (none to show)",this.templateParametersEditor.append(t);for(let[a,i]of Object.entries(this.dialog.redirectTemplates)){let o=Object.entries(i.parameters);if(o.length===0)continue;let s=document.createElement("details");s.style.display="none";let l=document.createElement("summary");l.textContent=a,s.append(l);let m={name:a,details:s,parameters:[]};for(let[p,u]of o){let g=new OO.ui.TextInputWidget({placeholder:u.default?.toString(),required:u.required}),T=new OO.ui.FieldLayout(g,{label:new OO.ui.HtmlSnippet(`${p}${!u.label||p.toLowerCase()===u.label.toLowerCase()?"":` (${u.label})`}${u.description?` (${u.description})`:""} (type: ${u.type}) ${u.suggested?" (suggested)":""}${u.example?` (example: "${u.example}")`:""}`),align:"inline"});s.append(T.$element[0]),m.parameters.push({name:p,aliases:u.aliases,editor:g})}this.templateParametersEditor.append(s),this.templateEditorsInfo.push(m)}this.updateActionsToTake({redirectTemplateParameters:this.templateEditorsInfo});let n=document.createElement("div");n.id="afcrc-helper-no-templates-message",n.textContent="No templates with parameters to display!",this.templateParametersEditor.append(n),this.commentLayout.$element[0].before(this.templateParametersEditor)}loadDenyReasonLayout(){let e=new OO.ui.ComboBoxInputWidget({classes:["afcrc-closing-reason-input"],placeholder:"autofill:unlikely",options:[["exists","existing pages"],["empty","empty submissions"],["notarget","nonexistent or no provided target"],["notitle","no title provided"],["unlikely","unlikely redirects"],["unrelated","apparently unrelated titles"],["notredirect","article creation requests"],["externallink","external link redirects"],["editrequest","edit requests"],["notenglish","requests not in English"]].map(([t,n])=>({data:`autofill:${t}`,label:`Autofilled text for ${n}`}))});e.on("change",t=>{this.updateActionsToTake({denyReason:t||"autofill:unlikely"})}),e.setValue("autofill:unlikely"),e.getMenu().selectItemByData("autofill:unlikely"),this.denyReasonLayout=new OO.ui.FieldLayout(e,{align:"inline",label:"Deny reason:",help:'Supports automatic reasoning, custom reasoning, or a combination of the two with "autofill:REASON, CUSTOM" format'}),this.denyReasonLayout.$element.hide(),this.commentLayout.$element[0].before(this.denyReasonLayout.$element[0])}loadClosingReasonLayout(){let e=new OO.ui.DropdownWidget({classes:["afcrc-closing-reason-input"],menu:{items:[["No response","r"],["Succeeded","s"],["Withdrawn","w"]].map(([t,n])=>new OO.ui.MenuOptionWidget({data:n,label:t}))}});e.getMenu().selectItemByData("r"),e.getMenu().on("choose",t=>{this.updateActionsToTake({closingReason:{name:t.getLabel(),id:t.getData()}}),this.dialog.updateRequestColor(this.detailsElement,this.titleIndex)}),this.closingReasonLayout=new OO.ui.FieldLayout(e,{align:"inline",label:"Closing reason:"}),this.closingReasonLayout.$element.hide(),this.commentLayout.$element[0].before(this.closingReasonLayout.$element[0])}loadCommentLayout(){this.commentInput=new OO.ui.TextInputWidget,this.commentInput.on("change",e=>{let t=e.trim();t?this.updateActionsToTake({comment:t}):this.updateActionsToTake({comment:void 0})}),this.commentLayout=new OO.ui.FieldLayout(this.commentInput,{classes:["afcrc-comment-input"],align:"inline",label:"Comment:"}),this.commentLayout.$element.hide()}updateActionsToTake(e){Object.assign(this.dialog.actionsToTake[this.titleIndex].requests[this.title],e)}}});var K={};_(K,{default:()=>z});var z,X=E(()=>{"use strict";Q();Y();z=class extends C{redirectTemplates;parsedRequests=[];actionsToTake=[];async load(){let e=await this.api.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:"User:Eejit43/scripts/redirect-helper.json"});this.redirectTemplates=JSON.parse(e.query.pages[0]?.revisions?.[0]?.slots?.main?.content||"{}"),super.load()}parseSubtypeRequests(e,t){let n={},a=t.matchAll(/\[\[(.*?)]]/g).toArray().map(l=>l[1].trim().replace(/^:/,"").replaceAll("_"," ")).filter(Boolean);if(a.length===0)return;n.pages=a;let i=/Target of redirect: ?\[\[(.*?)]]/.exec(e)?.[1].trim().replace(/^:/,"").replaceAll("_"," ");if(!i)return;n.target=i,n.reason=/reason: ?(.*?)\*source(?: \(if applicable\))?:/is.exec(e)?.[1].trim()??"",n.source=/source(?: \(if applicable\))?: ?(.*?)(?:<references \/>|\n\n)/is.exec(e)?.[1].trim()??"";let o=e.match(e.includes("<references />")?/<references \/>\n+(.*)/:new RegExp(`(?:<references \\/>${n.source?`|${n.source.replaceAll(/[\s#$()*+,.?[\\\]^{|}-]/g,"\\$&")}`:""})
+(.*)`))?.[1].trim(),s=o?/(?:Special:Contributions\/|User(?: talk)?:)(.*?)\|/.exec(o)?.[1].trim():null;n.requester=o&&s?{type:/\[\[User( talk)?:/.test(o)?"user":"ip",name:s}:null,this.parsedRequests.push(n),this.actionsToTake.push({target:n.target,requests:Object.fromEntries(a.map(l=>[l,{originalText:{fullSectionText:e,sectionText:e.replace(/^==.*?==$/m,"").trim()},action:"none"}]))})}loadSubtypeElements(e){let t=this.parsedRequests[e],n=document.createElement("details");n.classList.add("afcrc-helper-request"),n.addEventListener("click",()=>setTimeout(()=>this.updateSize(),0));let a=document.createElement("summary");a.innerHTML=t.pages.map(c=>`<b>${c}</b>`).join(", ")+" \u2192 ",a.addEventListener("keyup",c=>{document.activeElement?.tagName==="INPUT"&&c.key===" "&&c.preventDefault()});let i=document.createElement("input");i.classList.add("afcrc-helper-target-editor"),i.style.width=`${t.target.length}ch`,i.value=t.target,i.addEventListener("input",()=>{i.value=i.value.replaceAll("_"," "),i.style.width=`${i.value.length}ch`,this.actionsToTake[e].target=i.value,o.href=mw.util.getUrl(i.value)}),a.append(i);let o=document.createElement("a");o.classList.add("afcrc-helper-external-link"),o.target="_blank",o.href=mw.util.getUrl(t.target),o.innerHTML=`
<svg viewbox="0 0 48 48">
<path d="M36 24c-1.2 0-2 0.8-2 2v12c0 1.2-0.8 2-2 2h-22c-1.2
    0-2-0.8-2-2v-22c0-1.2 0.8-2 2-2h12c1.2 0 2-0.8 2-2s-0.8-2-2-2h-12c-3.4
    0-6 2.6-6 6v22c0 3.4 2.6 6 6 6h22c3.4 0 6-2.6
    6-6v-12c0-1.2-0.8-2-2-2z"></path>
<path d="M43.8 5.2c-0.2-0.4-0.6-0.8-1-1-0.2-0.2-0.6-0.2-0.8-0.2h-12c-1.2
    0-2 0.8-2 2s0.8 2 2 2h7.2l-18.6 18.6c-0.8 0.8-0.8 2 0 2.8 0.4 0.4 0.8
    0.6 1.4 0.6s1-0.2 1.4-0.6l18.6-18.6v7.2c0 1.2 0.8 2 2 2s2-0.8
    2-2v-12c0-0.2 0-0.6-0.2-0.8z"></path>
</svg>`,a.append(o),n.append(a);let s=document.createElement("div");s.classList.add("afcrc-helper-request-info");let l=document.createElement("span");l.style.color="dimgray",l.textContent="None";let m=document.createElement("span");m.style.color="dimgray",m.textContent="Unknown";let p=document.createElement("div"),u=document.createElement("b");u.textContent="Reason: ",p.append(u),t.reason?p.append(t.reason):p.append(l.cloneNode(!0)),s.append(p);let g=document.createElement("div"),T=document.createElement("b");T.textContent="Source: ",g.append(T),t.source?g.append(t.source):g.append(l.cloneNode(!0)),s.append(g);let b=document.createElement("div"),R=document.createElement("b");if(R.textContent="Requester: ",b.append(R),t.requester){let c=document.createElement("a");c.target="_blank",c.href=t.requester.type==="user"?mw.util.getUrl(`User:${t.requester.name}`):mw.util.getUrl(`Special:Contributions/${t.requester.name}`),c.textContent=t.requester.name,b.append(c)}else b.append(m.cloneNode(!0));s.append(b),n.append(s),n.append(document.createElement("hr"));let h=document.createElement("div");h.classList.add("afcrc-helper-request-responder");for(let c of t.pages)new W(e,c,n,h,this).setUp();n.append(h),this.$body.append(n),this.updateSize()}updateRequestColor(e,t){let n=Object.values(this.actionsToTake[t].requests),a=n.every(l=>l.action==="accept"||l.action==="deny"),i=n.find(l=>l.action==="close")?.closingReason?.id,o=n.every(l=>l.action==="close"&&l.closingReason?.id===i),s="";if(a){let l=n.filter(p=>p.action==="accept").length,m=n.filter(p=>p.action==="deny").length;l>0&&m>0?s="#fff17e":l>0?s="#a0ffa0":s="#ffcece"}else o&&(i==="r"?s="#ffcece":i==="s"?s="#90c090":s="#b8b8b8");e.style.backgroundColor=s}async performSubtypeActions(e,t,n){if(this.actionsToTake.some(i=>Object.values(i.requests).some(o=>o.action!=="none"))){for(let{target:o,requests:s}of this.actionsToTake){let l=Object.values(s).some(c=>c.action==="accept"||c.action==="deny"),m=Object.values(s).every(c=>c.action==="accept"||c.action==="deny"),p=Object.values(s).find(c=>c.action==="close")?.closingReason?.id,u=Object.values(s).every(c=>c.action==="close"&&c.closingReason?.id===p),g=[],T=[],b=[],R=Object.keys(s).length;for(let[c,y]of Object.entries(s))switch(y.action){case"accept":{l&&!m?e.addLogEntry(`Not all requests to "${o}" were accepted or denied, the handling of "${c}" will be ignored.`,"warning"):(g.push(c),y.comment&&b.push([c,y.comment]),t.accepted++);break}case"deny":{l&&!m?e.addLogEntry(`Not all requests to "${o}" were accepted or denied, the handling of "${c}" is being ignored.`,"warning"):(T.push([c,y.denyReason]),t.denied++);break}case"comment":{y.comment?(b.push([c,y.comment]),t["commented on"]++):e.addLogEntry(`The request to create "${c}" \u2192 "${o}" was marked to be commented on, but no comment was provided so it will be skipped.`,"warning");break}case"close":{u?(y.comment&&b.push([c,y.comment]),t.closed++):e.addLogEntry(`Not all requests to "${o}" were closed with the same reason, the handling of "${c}" is being ignored.`,"warning");break}}let h={pageText:n,...Object.values(s)[0].originalText};if(b.length>0&&(h=this.modifySectionData(h,{append:this.mapComments(b,R===1,b.length===R)})),m){let c;if(g.length>0&&T.length>0){c="p";let y=`* {{subst:AfC redirect}} (${g.map(O=>`[[${O}]]`).join(", ")}) ~~~~`,v=this.mapDeniedReasons(T,!1,!1);for(let O of g)this.handleAcceptedRedirect(O,s[O],o);h=this.modifySectionData(h,{append:`${y}
${v}`})}else if(g.length>0){c="a";for(let y of g)this.handleAcceptedRedirect(y,s[y],o);h=this.modifySectionData(h,{append:`* {{subst:AfC redirect${g.length>1?"|all":""}}} ~~~~`})}else c="d",h=this.modifySectionData(h,{append:this.mapDeniedReasons(T,R===1,!0)});h=this.modifySectionData(h,{prepend:`{{AfC-c|${c}}}`,append:"{{AfC-c|b}}"})}else u&&(h=this.modifySectionData(h,{prepend:`{{AfC-c|${p}}}`,append:"{{AfC-c|b}}"}));n=h.pageText}if(this.beforeText+this.pageContent===n){e.addLogEntry("No requests have been handled (page content identical)!");return}let i=Object.entries(t).filter(([,o])=>o>0).map(([o,s])=>`${o} ${s}`).join(", ");this.editsCreationsToMake.push({type:"edit",title:this.pageTitle,transform:()=>({text:n,summary:`Handling AfC redirect requests (${i})${this.scriptMessage}`})}),await this.makeAllEditsCreations(e),e.addLogEntry("All changes made, click below to reload!","success"),e.showReload()}else e.addLogEntry("No requests have been handled!")}handleAcceptedRedirect(e,t,n){let a=t.redirectTemplates&&t.redirectTemplates.length>0?t.redirectTemplates.map(o=>{let s=t.redirectTemplateParameters?.find(p=>p.name===o);if(!s)return`{{${o}}}`;let l=s.parameters.findLastIndex((p,u)=>p.name===(u+1).toString()&&p.editor.getValue().trim()),m=s.parameters.map((p,u)=>{let g=p.editor.getValue().trim();return!g&&u>l?null:`|${p.name===(u+1).toString()?"":`${p.name}=`}${g}`}).filter(Boolean).join("");return`{{${o}${m}}}`}):null,i=mw.Title.newFromText(e);this.editsCreationsToMake.push({type:"create",isRedirect:!0,title:i.getPrefixedText(),text:`#REDIRECT [[${n}]]${a?`

{{Redirect category shell|
${a.join(`
`)}
}}`:""}`,summary:`Creating redirect to [[${n}]] as requested at [[WP:AFC/R]]${this.scriptMessage}`},{type:"create",isRedirect:!1,title:i.getTalkPage().getPrefixedText(),text:`{{WikiProject banner shell|
{{WikiProject Articles for creation|ts={{subst:LOCALTIMESTAMP}}|reviewer=${mw.config.get("wgUserName")}}}
}}`,summary:`Adding [[Wikipedia:WikiProject Articles for creation|WikiProject Articles for creation]] banner${this.scriptMessage}`})}}});var L,Z=E(()=>{"use strict";L=class extends OO.ui.TextInputWidget{api=new mw.Api;constructor(e){super(e),OO.ui.mixin.LookupElement.call(this,e)}getLookupRequest=()=>{let e=this.getValue(),t=$.Deferred();e||t.resolve([]);let n=mw.Title.newFromText(e);return this.api.get({action:"query",formatversion:"2",gaplimit:20,gapnamespace:14,gapprefix:n?.getMainText()??e,generator:"allpages",prop:"categories"}).catch(()=>null).then(a=>{if(a?.query?.pages){let i=a.query.pages.filter(o=>!o.categories?.some(s=>s.title==="Category:Wikipedia soft redirected categories")).map(o=>{let s=o.title.split(":")[1];return{data:s,label:s}});this.emit("showing-values",i),t.resolve(i)}else t.resolve([])}),t.promise({abort(){}})};getLookupCacheDataFromResponse=e=>e??[];getLookupMenuOptionsFromData=e=>e.map(({data:t,label:n})=>new OO.ui.MenuOptionWidget({data:t,label:n}))};Object.assign(L.prototype,OO.ui.mixin.LookupElement.prototype)});var A,ee=E(()=>{"use strict";A=class extends OO.ui.TextInputWidget{api=new mw.Api;constructor(e){super(e),OO.ui.mixin.LookupElement.call(this,e)}getLookupRequest=()=>{let e=this.getValue(),t=$.Deferred();e||t.resolve([]);let n=mw.Title.newFromText(e);return this.api.get({action:"query",formatversion:"2",gaplimit:20,gapnamespace:n?.getNamespaceId()??0,gapprefix:n?.getMainText()??e,generator:"allpages"}).catch(()=>null).then(a=>{if(a?.query?.pages){let i=a.query.pages.map(o=>({data:o.title,label:o.title}));this.emit("showing-values",i),t.resolve(i)}else t.resolve([])}),t.promise({abort(){}})};getLookupCacheDataFromResponse=e=>e??[];getLookupMenuOptionsFromData=e=>e.map(({data:t,label:n})=>new OO.ui.MenuOptionWidget({data:t,label:n}))};Object.assign(A.prototype,OO.ui.mixin.LookupElement.prototype)});var te={};_(te,{default:()=>B});var B,ne=E(()=>{"use strict";Z();Q();ee();B=class extends C{parsedRequests=[];actionsToTake=[];parseSubtypeRequests(e,t){let n={},a=/:?Category:(.*?)(]]|$)/.exec(t)?.[1].trim();if(!a)return;n.category=a.replaceAll("_"," "),n.examples=[...(/example pages which belong to this category:(.*?)(parent category\/categories:|\n\[\[(special:contributions\/|user:))/is.exec(e)?.[1]??"").matchAll(/\*\s*(?:\[\[)?(.*?)(\||]]|\s*?\n)/g)].map(m=>m[1].trim().replace(/^:/,"").replaceAll("_"," ")).filter(Boolean),n.parents=[...(/parent category\/categories:(.*?)(\n\n|\n\[\[(special:contributions\/|user:))/is.exec(e)?.[1]??"").matchAll(/(?<!\|)#?:?Category:(.*?)(\||]]|\s*?\n)/g)].map(m=>m[1].trim().replace(/^:/,"").replaceAll("_"," ")).filter(Boolean);let i=e.indexOf("[[User:"),o=e.indexOf("[[User talk:"),s=e.indexOf("[[Special:Contributions/"),l=Math.min(...[i,o,s].filter(m=>m!==-1));n.requester=l===Number.POSITIVE_INFINITY?null:l===s?{type:"ip",name:/\[\[Special:Contributions\/(.*?)(\||]])/.exec(e)[1].trim()}:{type:"user",name:/\[\[User(?: talk)?:(.*?)(\||]])/.exec(e)[1].trim()},n.requester?.name||(n.requester=null),this.parsedRequests.push(n),this.actionsToTake.push({category:n.category,categorizedPages:n.examples,parents:n.parents,categoriesToRemove:n.parents,originalText:{fullSectionText:e,sectionText:e.replace(/^==.*?==$/m,"").trim()},action:"none"})}loadSubtypeElements(e){let t=this.parsedRequests[e],n=document.createElement("details");n.classList.add("afcrc-helper-request"),n.addEventListener("click",()=>setTimeout(()=>this.updateSize(),0));let a=document.createElement("summary");a.innerHTML=`<b>Category:${t.category}</b>`,n.append(a);let i=document.createElement("div");i.classList.add("afcrc-helper-request-info");let o=document.createElement("span");o.style.color="dimgray",o.textContent="None";let s=document.createElement("span");s.style.color="dimgray",s.textContent="Unknown";let l=document.createElement("div"),m=document.createElement("b");if(m.textContent="Examples: ",l.append(m),t.examples.length>0)for(let[r,d]of t.examples.entries()){let w=document.createElement("a");w.target="_blank",w.href=mw.util.getUrl(d),w.textContent=d,l.append(w),r!==t.examples.length-1&&l.append(", ")}else l.append(o.cloneNode(!0));i.append(l);let p=document.createElement("div"),u=document.createElement("b");if(u.textContent="Parents: ",p.append(u),t.parents.length>0)for(let[r,d]of t.parents.entries()){let w=document.createElement("a");w.target="_blank",w.href=mw.util.getUrl(`Category:${d}`),w.textContent=d,p.append(w),r!==t.parents.length-1&&p.append(", ")}else p.append(o.cloneNode(!0));i.append(p);let g=document.createElement("div"),T=document.createElement("b");if(T.textContent="Requester: ",g.append(T),t.requester){let r=document.createElement("a");r.target="_blank",r.href=t.requester.type==="user"?mw.util.getUrl(`User:${t.requester.name}`):mw.util.getUrl(`Special:Contributions/${t.requester.name}`),r.textContent=t.requester.name,g.append(r)}else g.append(s.cloneNode(!0));i.append(g),n.append(i),n.append(document.createElement("hr"));let b=document.createElement("div");b.classList.add("afcrc-helper-request-responder");let R=new OO.ui.RadioSelectWidget({classes:["afcrc-helper-action-radio"],items:["Accept","Deny","Comment","Close","None"].map(r=>new OO.ui.RadioOptionWidget({data:r,label:r}))});R.selectItemByLabel("None"),R.on("choose",()=>{setTimeout(()=>this.updateSize(),0);let r=R.findSelectedItem().getData().toLowerCase();if(this.actionsToTake[e].action=r,["comment","close"].includes(r)){F.$element.show();let d=H.getValue().trim();d?this.actionsToTake[e].comment=d:delete this.actionsToTake[e].comment}else F.$element.hide(),delete this.actionsToTake[e].comment;switch(this.updateRequestColor(n,e),v.$element.hide(),I.$element.hide(),j.$element.hide(),N.$element.hide(),U.$element.hide(),r){case"accept":{v.$element.show(),I.$element.show(),j.$element.show();break}case"deny":{N.$element.show();break}case"close":{U.$element.show();break}}});let h=new A({placeholder:"Add pages here"});h.on("change",()=>{let r=h.getValue();r=r.replace(new RegExp(`^(https?:)?/{2}?${mw.config.get("wgServer").replace(/^\/{2}/,"")}/wiki/`),""),r=r.replace(/^:/,""),r.length>0&&h.setValue(r[0].toUpperCase()+r.slice(1).replaceAll("_"," "))}),h.on("showing-values",r=>{for(let d of r)c.addAllowedValue(d.data)});let c=new OO.ui.TagMultiselectWidget({allowReordering:!1,inputPosition:"outline",inputWidget:h});c.on("change",()=>{let r=c.getValue(),d=r.sort((w,M)=>w.toLowerCase().localeCompare(M.toLowerCase()));r.join(";")!==d.join(";")&&c.setValue(d),this.actionsToTake[e].categorizedPages=d});let{categorizedPages:y}=this.actionsToTake[e];for(let r of y)c.addAllowedValue(r);c.setValue(y);let v=new OO.ui.FieldLayout(c,{align:"inline",label:"Pages to categorize:"});v.$element.hide();let O=new L({placeholder:"Add categories here"});O.on("change",()=>{let r=O.getValue();r=r.replace(new RegExp(`^(https?:)?/{2}?${mw.config.get("wgServer").replace(/^\/{2}/,"")}/wiki/`),""),r=r.replace(/^Category:/,""),r.length>0&&O.setValue(r[0].toUpperCase()+r.slice(1).replaceAll("_"," "))}),O.on("showing-values",r=>{for(let d of r)k.addAllowedValue(d.data)});let q=new OO.ui.TagMultiselectWidget({allowReordering:!1,inputPosition:"outline",inputWidget:O});q.on("change",()=>{let r=q.getValue(),d=r.sort((w,M)=>w.toLowerCase().localeCompare(M.toLowerCase()));r.join(";")!==d.join(";")&&q.setValue(d),this.actionsToTake[e].categoriesToRemove=d});let{parents:D}=this.actionsToTake[e];for(let r of D)q.addAllowedValue(r);q.setValue(D);let I=new OO.ui.FieldLayout(q,{align:"inline",label:"Categories to remove from pages to categorize:"});I.$element.hide();let P=new L({placeholder:"Add categories here"});P.on("change",()=>{let r=P.getValue();r=r.replace(new RegExp(`^(https?:)?/{2}?${mw.config.get("wgServer").replace(/^\/{2}/,"")}/wiki/`),""),r=r.replace(/^Category:/,""),r.length>0&&P.setValue(r[0].toUpperCase()+r.slice(1).replaceAll("_"," "))}),P.on("showing-values",r=>{for(let d of r)k.addAllowedValue(d.data)});let k=new OO.ui.TagMultiselectWidget({allowReordering:!1,inputPosition:"outline",inputWidget:P});k.on("change",()=>{let r=k.getValue(),d=r.sort((w,M)=>w.toLowerCase().localeCompare(M.toLowerCase()));r.join(";")!==d.join(";")&&k.setValue(d),this.actionsToTake[e].parents=d});for(let r of D)k.addAllowedValue(r);k.setValue(D);let j=new OO.ui.FieldLayout(k,{align:"inline",label:"Parent categories:"});j.$element.hide();let S=new OO.ui.ComboBoxInputWidget({classes:["afcrc-closing-reason-input"],placeholder:"autofill:unlikely",options:[["exists","existing categories"],["empty","empty submissions"],["unlikely","categories that are unlikely to have enough pages"],["notcategory","page creation requests"],["notenglish","requests not in English"]].map(([r,d])=>({data:`autofill:${r}`,label:`Autofilled text for ${d}`}))});S.on("change",()=>{this.actionsToTake[e].denyReason=S.getValue()||"autofill:unlikely"}),S.setValue("autofill:unlikely"),S.getMenu().selectItemByData("autofill:unlikely");let N=new OO.ui.FieldLayout(S,{align:"inline",label:"Deny reason:",help:'Supports automatic reasoning, custom reasoning, or a combination of the two with "autofill:REASON, CUSTOM" format'});N.$element.hide();let V=new OO.ui.DropdownWidget({classes:["afcrc-closing-reason-input"],menu:{items:[["No response","r"],["Succeeded","s"],["Withdrawn","w"]].map(([r,d])=>new OO.ui.MenuOptionWidget({data:d,label:r}))}});V.getMenu().on("choose",()=>{let r=V.getMenu().findSelectedItem();this.actionsToTake[e].closingReason={name:r.getLabel(),id:r.getData()},this.updateRequestColor(n,e)}),V.getMenu().selectItemByData("r"),this.actionsToTake[e].closingReason={name:"No response",id:"r"};let U=new OO.ui.FieldLayout(V,{align:"inline",label:"Closing reason:"});U.$element.hide();let H=new OO.ui.TextInputWidget;H.on("change",()=>{let r=H.getValue().trim();r?this.actionsToTake[e].comment=r:delete this.actionsToTake[e].comment});let F=new OO.ui.FieldLayout(H,{classes:["afcrc-comment-input"],align:"inline",label:"Comment:"});F.$element.hide(),b.append(R.$element[0],v.$element[0],I.$element[0],j.$element[0],N.$element[0],U.$element[0],F.$element[0]),n.append(b),this.$body.append(n),this.updateSize()}updateRequestColor(e,t){let{action:n}=this.actionsToTake[t],a="";n==="accept"?a="#a0ffa0":n==="deny"?a="#ffcece":n==="close"&&(this.actionsToTake[t].closingReason?.id==="r"?a="#ffcece":this.actionsToTake[t].closingReason?.id==="s"?a="#90c090":a="#b8b8b8"),e.style.backgroundColor=a}async performSubtypeActions(e,t,n){if(this.actionsToTake.some(i=>i.action!=="none")){for(let o of this.actionsToTake){let s={pageText:n,...o.originalText};switch(o.action){case"accept":{s=this.modifySectionData(s,{prepend:"{{AfC-c|a}}",append:`* {{subst:AfC category}} ~~~~
{{AfC-c|b}}`}),this.handleAcceptedCategory(o),t.accepted++;break}case"deny":{s=this.modifySectionData(s,{prepend:"{{AfC-c|d}}",append:`* ${this.formatDeniedReason(o.denyReason)} ~~~~
{{AfC-c|b}}`}),t.denied++;break}case"comment":{o.comment?(s=this.modifySectionData(s,{append:`* {{AfC comment|1=${o.comment}}} ~~~~`}),t["commented on"]++):e.addLogEntry(`The request to create "${o.category}" was marked to be commented on, but no comment was provided so it will be skipped.`,"warning");break}case"close":{s=this.modifySectionData(s,{prepend:`{{AfC-c|${o.closingReason.id}}}`,append:(o.comment?`* {{AfC comment|1=${o.comment}}} ~~~~`:"")+`
{{AfC-c|b}}`}),t.closed++;break}}n=s.pageText}if(this.beforeText+this.pageContent===n){e.addLogEntry("No requests have been handled (page content identical)!");return}let i=Object.entries(t).filter(([,o])=>o>0).map(([o,s])=>`${o} ${s}`).join(", ");this.editsCreationsToMake.push({type:"edit",title:this.pageTitle,transform:()=>({text:n,summary:`Handling AfC category requests (${i})${this.scriptMessage}`})}),await this.makeAllEditsCreations(e),e.addLogEntry("All changes made, click below to reload!","success"),e.showReload()}else e.addLogEntry("No requests have been handled!")}handleAcceptedCategory(e){this.editsCreationsToMake.push({type:"create",isRedirect:!1,title:`Category:${e.category}`,text:e.parents.map(t=>`[[Category:${t}]]`).join(`
`),summary:`Creating category as requested at [[WP:AFC/C]]${this.scriptMessage}`},{type:"create",isRedirect:!1,title:`Category talk:${e.category}`,text:`{{WikiProject banner shell|
{{WikiProject Articles for creation|ts={{subst:LOCALTIMESTAMP}}|reviewer=${mw.config.get("wgUserName")}}}
}}`,summary:`Adding [[Wikipedia:WikiProject Articles for creation|WikiProject Articles for creation]] banner${this.scriptMessage}`},...e.categorizedPages.map(t=>({type:"edit",title:t,transform:({content:n})=>{for(let a of e.categoriesToRemove)n=n.replaceAll(new RegExp(`\\[\\[:?[Cc]ategory:${a}\\]\\]
?`,"gi"),"");return n=n.replace(/((\[\[:?[Cc]ategory:.+?]]\n?)+)/,a=>{let i=a.endsWith(`
`);return`${a}${i?"":`
`}[[Category:${e.category}]]${i?`
`:""}`}),{text:n,summary:`Adding page to [[:Category:${e.category}]] as requested at [[WP:AFC/C]]${this.scriptMessage}`}}})))}}});var J=`body.afcrc-helper-open #mw-teleport-target{z-index:500}.afcrc-helper-request{margin:10px;border-radius:5px;background-color:#eee;padding:5px;color:#202122}.afcrc-helper-request summary{cursor:pointer}.afcrc-helper-target-editor{min-width:1ch;max-width:calc(100% - 4ch);font-family:monospace}.afcrc-helper-external-link{-webkit-text-decoration:none!important;text-decoration:none!important}.afcrc-helper-external-link svg{display:inline-block;width:1em;height:1em;fill:currentcolor}.afcrc-helper-request-info,.afcrc-helper-request-responder{margin:5px}.afcrc-helper-request-info>div,.afcrc-helper-request-responder>div{margin-top:8px;margin-bottom:8px}.afcrc-helper-request-responder>div:last-of-type{margin-bottom:0}.afcrc-helper-request-responder .oo-ui-fieldLayout{margin-left:8px}.afcrc-helper-request-responder .oo-ui-fieldLayout-header{width:-moz-max-content;width:max-content}.afcrc-helper-action-radio{margin-top:8px}.afcrc-helper-action-radio .oo-ui-radioOptionWidget{display:inline;padding:8px}.afcrc-closing-reason-input,.afcrc-comment-input{max-width:50%}.afcrc-helper-redirect-possibilities:after{content:" (redirect with possibilities)";font-style:italic}.afcrc-helper-template-parameters-container,.afcrc-helper-template-parameters-container details{margin-top:10px;margin-bottom:10px;border:1px solid #a2a9b1;border-radius:2px;background-color:#fff;padding:5px}.afcrc-helper-template-parameters-container{margin-left:8px}.afcrc-helper-template-parameters-container summary{cursor:pointer;font-weight:700}.afcrc-helper-template-parameters-container details{margin-top:5px;margin-bottom:5px;background-color:#e2e2e2}#afcrc-helper-no-templates-message{padding:5px}.afcrc-helper-actions-container div{margin-top:8px;margin-bottom:8px}
`;mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui-widgets","oojs-ui-windows"],async()=>{let{default:f}=await Promise.resolve().then(()=>(X(),K)),{default:e}=await Promise.resolve().then(()=>(ne(),te)),t=mw.config.get("wgPageName").replaceAll("_"," "),n=t==="Wikipedia:Articles for creation/Redirects";if(!n&&!(t==="Wikipedia:Articles for creation/Categories"))return;let i=n?"redirect":"category";mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-tb":"p-cactions","#",`Handle ${i} creation requests`,"afcrc-helper").addEventListener("click",s=>{s.preventDefault(),mw.util.addCSS(J);let l=new OO.ui.WindowManager;document.body.append(l.$element[0]);let m=i==="redirect"?f:e,p=new m(i,t,window.afcrcConfiguration?.createdPageWatchMethod);l.addWindows([p]),p.open(),p.load()})});})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9hZmNyYy1oZWxwZXIvc2hvdy1hY3Rpb25zLWRpYWxvZy50cyIsICIuLi9zY3JpcHRzL2FmY3JjLWhlbHBlci9oZWxwZXItZGlhbG9nLnRzIiwgIi4uL3NjcmlwdHMvYWZjcmMtaGVscGVyL3JlZGlyZWN0LXJlcXVlc3QtaGFuZGxlci50cyIsICIuLi9zY3JpcHRzL2FmY3JjLWhlbHBlci9yZWRpcmVjdHMtZGlhbG9nLnRzIiwgIi4uL3NjcmlwdHMvYWZjcmMtaGVscGVyL2NhdGVnb3J5LWlucHV0LXdpZGdldC50cyIsICIuLi9zY3JpcHRzL2FmY3JjLWhlbHBlci9wYWdlLWlucHV0LXdpZGdldC50cyIsICIuLi9zY3JpcHRzL2FmY3JjLWhlbHBlci9jYXRlZ29yaWVzLWRpYWxvZy50cyIsICIuLi9zdHlsZXMvYWZjcmMtaGVscGVyLmNzcyIsICIuLi9zY3JpcHRzL2FmY3JjLWhlbHBlci9hZmNyYy1oZWxwZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBhbiBhY3Rpb24gZGlhbG9nLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBY3Rpb25zRGlhbG9nIGV4dGVuZHMgT08udWkuRGlhbG9nIHtcbiAgICBwcml2YXRlIGNvbnRlbnRMYXlvdXQhOiBPTy51aS5QYW5lbExheW91dDtcbiAgICBwcml2YXRlIGxvZ091dHB1dCE6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgY2xvc2VCdXR0b24hOiBPTy51aS5CdXR0b25XaWRnZXQ7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoeyBzaXplOiAnbGFyZ2UnIH0pO1xuXG4gICAgICAgIEFjdGlvbnNEaWFsb2cuc3RhdGljLm5hbWUgPSAnQWN0aW9uc0RpYWxvZyc7XG4gICAgICAgIEFjdGlvbnNEaWFsb2cuc3RhdGljLnRpdGxlID0gJ0FjdGlvbnMnO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUgPSAoKSA9PiB7XG4gICAgICAgIE9PLnVpLkRpYWxvZy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzKTtcblxuICAgICAgICB0aGlzLmNvbnRlbnRMYXlvdXQgPSBuZXcgT08udWkuUGFuZWxMYXlvdXQoeyBwYWRkZWQ6IHRydWUsIGV4cGFuZGVkOiBmYWxzZSB9KTtcbiAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7ICRib2R5OiBKUXVlcnkgfSkuJGJvZHkuYXBwZW5kKHRoaXMuY29udGVudExheW91dC4kZWxlbWVudCk7XG5cbiAgICAgICAgdGhpcy5sb2dPdXRwdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5sb2dPdXRwdXQuY2xhc3NMaXN0LmFkZCgnYWZjcmMtaGVscGVyLWFjdGlvbnMtY29udGFpbmVyJyk7XG5cbiAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbiA9IG5ldyBPTy51aS5CdXR0b25XaWRnZXQoeyBsYWJlbDogJ0Nsb3NlJywgZmxhZ3M6IFsnc2FmZScsICdjbG9zZSddIH0pO1xuICAgICAgICB0aGlzLmNsb3NlQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICAgICAgdGhpcy5jb250ZW50TGF5b3V0LiRlbGVtZW50LmFwcGVuZCh0aGlzLmxvZ091dHB1dCwgdGhpcy5jbG9zZUJ1dHRvbi4kZWxlbWVudCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBsb2cgZW50cnkgdG8gdGhlIGRpYWxvZy5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBhZGQuXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIG1lc3NhZ2UgdHlwZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkTG9nRW50cnkobWVzc2FnZTogc3RyaW5nLCB0eXBlOiBPTy51aS5NZXNzYWdlV2lkZ2V0LlR5cGUgPSAnbm90aWNlJykge1xuICAgICAgICBjb25zdCBtZXNzYWdlV2lkZ2V0ID0gbmV3IE9PLnVpLk1lc3NhZ2VXaWRnZXQoeyB0eXBlLCBpbmxpbmU6IHRydWUsIGxhYmVsOiBuZXcgT08udWkuSHRtbFNuaXBwZXQobWVzc2FnZSkgfSk7XG5cbiAgICAgICAgdGhpcy5sb2dPdXRwdXQuYXBwZW5kKG1lc3NhZ2VXaWRnZXQuJGVsZW1lbnRbMF0pO1xuXG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuXG4gICAgICAgIHRoaXMuY2xvc2VCdXR0b24uc2Nyb2xsRWxlbWVudEludG9WaWV3KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgY2xvc2UgYnV0dG9uIGFuZCBhZGRzIGEgcmVsb2FkIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2hvd1JlbG9hZCgpIHtcbiAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbi4kZWxlbWVudC5yZW1vdmUoKTtcblxuICAgICAgICBjb25zdCByZWxvYWRCdXR0b24gPSBuZXcgT08udWkuQnV0dG9uV2lkZ2V0KHsgbGFiZWw6ICdSZWxvYWQnLCBmbGFnczogWydwcmltYXJ5J10gfSk7XG4gICAgICAgIHJlbG9hZEJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY29udGVudExheW91dC4kZWxlbWVudC5hcHBlbmQocmVsb2FkQnV0dG9uLiRlbGVtZW50KTtcbiAgICB9XG59XG5cbk9iamVjdC5hc3NpZ24oQWN0aW9uc0RpYWxvZy5wcm90b3R5cGUsIE9PLnVpLkRpYWxvZy5wcm90b3R5cGUpO1xuIiwgImltcG9ydCB0eXBlIHsgQXBpRWRpdFBhZ2VQYXJhbXMsIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zIH0gZnJvbSAndHlwZXMtbWVkaWF3aWtpL2FwaV9wYXJhbXMnO1xuaW1wb3J0IHR5cGUgeyBNZWRpYVdpa2lEYXRhRXJyb3IsIFBhZ2VSZXZpc2lvbnNSZXN1bHQgfSBmcm9tICcuLi8uLi9nbG9iYWwtdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBXYXRjaE1ldGhvZCB9IGZyb20gJy4vYWZjcmMtaGVscGVyJztcbmltcG9ydCBBY3Rpb25zRGlhbG9nIGZyb20gJy4vc2hvdy1hY3Rpb25zLWRpYWxvZyc7XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RSZXF1ZXN0ZXIgPSB7IHR5cGU6ICd1c2VyJyB8ICdpcCc7IG5hbWU6IHN0cmluZyB9IHwgbnVsbDtcblxuZXhwb3J0IHR5cGUgUmVxdWVzdEFjdGlvblR5cGUgPSAnYWNjZXB0JyB8ICdkZW55JyB8ICdjb21tZW50JyB8ICdjbG9zZScgfCAnbm9uZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdEFjdGlvbiB7XG4gICAgb3JpZ2luYWxUZXh0OiB7IGZ1bGxTZWN0aW9uVGV4dDogc3RyaW5nOyBzZWN0aW9uVGV4dDogc3RyaW5nIH07XG4gICAgYWN0aW9uOiBSZXF1ZXN0QWN0aW9uVHlwZTtcbiAgICBjb21tZW50Pzogc3RyaW5nO1xuICAgIGRlbnlSZWFzb24/OiBzdHJpbmc7XG4gICAgY2xvc2luZ1JlYXNvbj86IHsgbmFtZTogc3RyaW5nOyBpZDogc3RyaW5nIH07XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBhIGRpYWxvZyB0aGF0IGhhbmRsZXMgcmVkaXJlY3QgYW5kIGNhdGVnb3J5IHJlcXVlc3RzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWxwZXJEaWFsb2cgZXh0ZW5kcyBPTy51aS5Qcm9jZXNzRGlhbG9nIHtcbiAgICBwcm90ZWN0ZWQgYXBpID0gbmV3IG13LkFwaSgpO1xuXG4gICAgcHJvdGVjdGVkIHNjcmlwdE1lc3NhZ2UgPSAnIChbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL2FmY3JjLWhlbHBlcnxhZmNyYy1oZWxwZXJdXSknO1xuXG4gICAgcHJpdmF0ZSByZXF1ZXN0UGFnZVR5cGU6ICdyZWRpcmVjdCcgfCAnY2F0ZWdvcnknO1xuICAgIHByb3RlY3RlZCBwYWdlVGl0bGU6IHN0cmluZztcblxuICAgIHByaXZhdGUgY3JlYXRlZFBhZ2VXYXRjaE1ldGhvZDogV2F0Y2hNZXRob2Q7XG5cbiAgICBwcm90ZWN0ZWQgYmVmb3JlVGV4dCE6IHN0cmluZztcbiAgICBwcm90ZWN0ZWQgcGFnZUNvbnRlbnQhOiBzdHJpbmc7XG5cbiAgICBwcm90ZWN0ZWQgcGFyc2VkUmVxdWVzdHMhOiB1bmtub3duW107XG4gICAgcHJvdGVjdGVkIGVkaXRzQ3JlYXRpb25zVG9NYWtlOiAoXG4gICAgICAgIHwgeyB0eXBlOiAnZWRpdCc7IHRpdGxlOiBzdHJpbmc7IHRyYW5zZm9ybTogKGRhdGE6IHsgY29udGVudDogc3RyaW5nIH0pID0+IEFwaUVkaXRQYWdlUGFyYW1zIH1cbiAgICAgICAgfCB7IHR5cGU6ICdjcmVhdGUnOyBpc1JlZGlyZWN0OiBib29sZWFuOyB0aXRsZTogc3RyaW5nOyB0ZXh0OiBzdHJpbmc7IHN1bW1hcnk6IHN0cmluZyB9XG4gICAgKVtdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0UGFnZVR5cGU6ICdyZWRpcmVjdCcgfCAnY2F0ZWdvcnknLCBwYWdlVGl0bGU6IHN0cmluZywgY3JlYXRlZFdhdGNoTWV0aG9kOiBXYXRjaE1ldGhvZCB8IHVuZGVmaW5lZCkge1xuICAgICAgICBzdXBlcih7IHNpemU6ICdsYXJnZScgfSk7XG5cbiAgICAgICAgSGVscGVyRGlhbG9nLnN0YXRpYy5uYW1lID0gJ0FmY3JjSGVscGVyRGlhbG9nJztcbiAgICAgICAgSGVscGVyRGlhbG9nLnN0YXRpYy50aXRsZSA9ICdhZmNyYy1oZWxwZXInO1xuICAgICAgICBIZWxwZXJEaWFsb2cuc3RhdGljLmFjdGlvbnMgPSBbXG4gICAgICAgICAgICB7IGFjdGlvbjogJ2NhbmNlbCcsIGxhYmVsOiAnQ2xvc2UnLCBmbGFnczogWydzYWZlJywgJ2Nsb3NlJ10gfSxcbiAgICAgICAgICAgIHsgYWN0aW9uOiAnc2F2ZScsIGxhYmVsOiAnUnVuJywgZmxhZ3M6IFsncHJpbWFyeScsICdwcm9ncmVzc2l2ZSddIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5wYWdlVGl0bGUgPSBwYWdlVGl0bGU7XG4gICAgICAgIHRoaXMucmVxdWVzdFBhZ2VUeXBlID0gcmVxdWVzdFBhZ2VUeXBlO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlZFBhZ2VXYXRjaE1ldGhvZCA9XG4gICAgICAgICAgICBjcmVhdGVkV2F0Y2hNZXRob2QgJiYgWydub2NoYW5nZScsICdwcmVmZXJlbmNlcycsICd1bndhdGNoJywgJ3dhdGNoJ10uaW5jbHVkZXMoY3JlYXRlZFdhdGNoTWV0aG9kKVxuICAgICAgICAgICAgICAgID8gY3JlYXRlZFdhdGNoTWV0aG9kXG4gICAgICAgICAgICAgICAgOiAncHJlZmVyZW5jZXMnO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnYWZjcmMtaGVscGVyLW9wZW4nKTtcbiAgICB9XG5cbiAgICBnZXRBY3Rpb25Qcm9jZXNzID0gKGFjdGlvbjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICghYWN0aW9uIHx8IGFjdGlvbiA9PT0gJ2NhbmNlbCcpXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9PLnVpLlByb2Nlc3MoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlZFJlcXVlc3RzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAgICAgICAgIE9PLnVpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29uZmlybSgnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNsb3NlPyBBbGwgY2hhbmdlcyB3aWxsIGJlIGRpc2NhcmRlZC4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGNvbmZpcm1lZCkgPT4gKGNvbmZpcm1lZCA/IHRoaXMuY2xvc2UoKSA6IG51bGwpKTtcbiAgICAgICAgICAgICAgICBlbHNlIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdzYXZlJylcbiAgICAgICAgICAgIHJldHVybiBuZXcgT08udWkuUHJvY2VzcygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLnBlcmZvcm1BY3Rpb25zKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgZWxzZSByZXR1cm4gSGVscGVyRGlhbG9nLnN1cGVyLnByb3RvdHlwZS5nZXRBY3Rpb25Qcm9jZXNzLmNhbGwodGhpcywgYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgZ2V0VGVhcmRvd25Qcm9jZXNzID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gSGVscGVyRGlhbG9nLnN1cGVyLnByb3RvdHlwZS5nZXRUZWFyZG93blByb2Nlc3MuY2FsbCh0aGlzKS5uZXh0KCgpID0+IHtcbiAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmVtcHR5KCk7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYWZjcmMtaGVscGVyLW9wZW4nKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIExvYWQgZWxlbWVudHMgaW4gdGhlIHdpbmRvdy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgbG9hZCgpIHtcbiAgICAgICAgY29uc3QgcGFnZVJldmlzaW9uID0gKGF3YWl0IHRoaXMuYXBpLmdldCh7XG4gICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICBmb3JtYXR2ZXJzaW9uOiAnMicsXG4gICAgICAgICAgICBwcm9wOiAncmV2aXNpb25zJyxcbiAgICAgICAgICAgIHJ2cHJvcDogJ2NvbnRlbnQnLFxuICAgICAgICAgICAgcnZzbG90czogJ21haW4nLFxuICAgICAgICAgICAgdGl0bGVzOiB0aGlzLnBhZ2VUaXRsZSxcbiAgICAgICAgfSBzYXRpc2ZpZXMgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMpKSBhcyBQYWdlUmV2aXNpb25zUmVzdWx0O1xuXG4gICAgICAgIHRoaXMucGFnZUNvbnRlbnQgPSBwYWdlUmV2aXNpb24ucXVlcnkhLnBhZ2VzWzBdLnJldmlzaW9uc1swXS5zbG90cy5tYWluLmNvbnRlbnQudHJpbSgpO1xuXG4gICAgICAgIHRoaXMucGFyc2VSZXF1ZXN0cygpO1xuICAgICAgICB0aGlzLmxvYWRJbnB1dEVsZW1lbnRzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHJlcXVlc3RzIGZyb20gdGhlIHBhZ2UgY29udGVudC5cbiAgICAgKi9cbiAgICBwcml2YXRlIHBhcnNlUmVxdWVzdHMoKSB7XG4gICAgICAgIHRoaXMuYmVmb3JlVGV4dCA9IC9eKC4qPyk9PS9zLmV4ZWModGhpcy5wYWdlQ29udGVudCkhWzFdO1xuXG4gICAgICAgIHRoaXMucGFnZUNvbnRlbnQgPSB0aGlzLnBhZ2VDb250ZW50LnJlcGxhY2UoL14uKj89PS9zLCAnPT0nKTtcblxuICAgICAgICBjb25zdCBzZWN0aW9ucyA9IFsuLi50aGlzLnBhZ2VDb250ZW50Lm1hdGNoQWxsKC9ePT0uKj89PSQoXFxzKig/IT09W149XSkuKikqL2dpbSldLm1hcCgobWF0Y2gpID0+IG1hdGNoWzBdKTtcblxuICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25UZXh0IG9mIHNlY3Rpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBpc0Nsb3NlZCA9IC97e2FmYy1jXFx8L2kudGVzdChzZWN0aW9uVGV4dCk7XG4gICAgICAgICAgICBpZiAoaXNDbG9zZWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0gL149PSguKj8pPT0kL20uZXhlYyhzZWN0aW9uVGV4dCkhWzFdLnRyaW0oKTtcblxuICAgICAgICAgICAgdGhpcy5wYXJzZVN1YnR5cGVSZXF1ZXN0cyhzZWN0aW9uVGV4dCwgc2VjdGlvbkhlYWRlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgaW5wdXQgZWxlbWVudHMgaW4gdGhlIGRpYWxvZy5cbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRJbnB1dEVsZW1lbnRzKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJzZWRSZXF1ZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgICAgICAgICBjb25zdCBoYW5kbGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmF0Y2hTaXplID0gNTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRJbmRleCA9IE1hdGgubWluKGluZGV4ICsgYmF0Y2hTaXplLCB0aGlzLnBhcnNlZFJlcXVlc3RzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7IHRpdGxlOiBPTy51aS5MYWJlbFdpZGdldCB9KS50aXRsZS5zZXRMYWJlbChcbiAgICAgICAgICAgICAgICAgICAgYGFmY3JjLWhlbHBlciAobG9hZGluZyAke2luZGV4ICsgMX0tJHtlbmRJbmRleH0vJHt0aGlzLnBhcnNlZFJlcXVlc3RzLmxlbmd0aH0gcmVxdWVzdHMpYCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc3ViSW5kZXggPSBpbmRleDsgc3ViSW5kZXggPCBlbmRJbmRleDsgc3ViSW5kZXgrKykgdGhpcy5sb2FkU3VidHlwZUVsZW1lbnRzKHN1YkluZGV4KTtcblxuICAgICAgICAgICAgICAgIGlmIChlbmRJbmRleCA8IHRoaXMucGFyc2VkUmVxdWVzdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoaGFuZGxlLCAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7IHRpdGxlOiBPTy51aS5MYWJlbFdpZGdldCB9KS50aXRsZS5zZXRMYWJlbChcbiAgICAgICAgICAgICAgICAgICAgICAgIGBhZmNyYy1oZWxwZXIgKCR7dGhpcy5wYXJzZWRSZXF1ZXN0cy5sZW5ndGh9IHJlcXVlc3RzIGxvYWRlZClgLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaGFuZGxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlV2lkZ2V0ID0gbmV3IE9PLnVpLk1lc3NhZ2VXaWRnZXQoeyB0eXBlOiAnbm90aWNlJywgbGFiZWw6ICdObyB2YWxpZCByZXF1ZXN0cyB0byBoYW5kbGUhJyB9KTtcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZVdpZGdldExheW91dCA9IG5ldyBPTy51aS5QYW5lbExheW91dCh7IHBhZGRlZDogdHJ1ZSwgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgbWVzc2FnZVdpZGdldExheW91dC4kZWxlbWVudC5hcHBlbmQobWVzc2FnZVdpZGdldC4kZWxlbWVudCk7XG5cbiAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmFwcGVuZChtZXNzYWdlV2lkZ2V0TGF5b3V0LiRlbGVtZW50KTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhbGwgYWN0aW9ucyBhbmQgbG9ncyB0aGVpciByZXN1bHRzLlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcGVyZm9ybUFjdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IHdpbmRvd01hbmFnZXIgPSBuZXcgT08udWkuV2luZG93TWFuYWdlcigpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh3aW5kb3dNYW5hZ2VyLiRlbGVtZW50WzBdKTtcblxuICAgICAgICBjb25zdCBzaG93QWN0aW9uc0RpYWxvZyA9IG5ldyBBY3Rpb25zRGlhbG9nKCk7XG4gICAgICAgIHdpbmRvd01hbmFnZXIuYWRkV2luZG93cyhbc2hvd0FjdGlvbnNEaWFsb2ddKTtcbiAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cub3BlbigpO1xuXG4gICAgICAgIGNvbnN0IGNvdW50cyA9IHsgJ2FjY2VwdGVkJzogMCwgJ2RlbmllZCc6IDAsICdjb21tZW50ZWQgb24nOiAwLCAnY2xvc2VkJzogMCB9OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuXG4gICAgICAgIGNvbnN0IG5ld1BhZ2VUZXh0ID0gKFxuICAgICAgICAgICAgKGF3YWl0IHRoaXMuYXBpLmdldCh7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgICAgICBwcm9wOiAncmV2aXNpb25zJyxcbiAgICAgICAgICAgICAgICBydnByb3A6ICdjb250ZW50JyxcbiAgICAgICAgICAgICAgICBydnNsb3RzOiAnbWFpbicsXG4gICAgICAgICAgICAgICAgdGl0bGVzOiB0aGlzLnBhZ2VUaXRsZSxcbiAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKSkgYXMgUGFnZVJldmlzaW9uc1Jlc3VsdFxuICAgICAgICApLnF1ZXJ5IS5wYWdlc1swXS5yZXZpc2lvbnNbMF0uc2xvdHMubWFpbi5jb250ZW50LnRyaW0oKTtcblxuICAgICAgICB2b2lkIHRoaXMucGVyZm9ybVN1YnR5cGVBY3Rpb25zKHNob3dBY3Rpb25zRGlhbG9nLCBjb3VudHMsIG5ld1BhZ2VUZXh0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIGEgcmVxdWVzdCBkZW5pYWwgcmVhc29uIHRvIGEge3tzdWJzdDpBZkMgcmVkaXJlY3QvY2F0ZWdvcnl9fSBjYWxsLlxuICAgICAqIEBwYXJhbSByZWFzb24gVGhlIHJlYXNvbiB0byBmb3JtYXQuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGZvcm1hdERlbmllZFJlYXNvbihyZWFzb246IHN0cmluZykge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZVBhcmFtZXRlcnMgPSByZWFzb24uc3RhcnRzV2l0aCgnYXV0b2ZpbGw6JykgPyAvYXV0b2ZpbGw6KFxcdyspLy5leGVjKHJlYXNvbikhWzFdIDogYGRlY2xpbmV8Mj0ke3JlYXNvbn1gO1xuXG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxSZWFzb25pbmcgPVxuICAgICAgICAgICAgcmVhc29uLnN0YXJ0c1dpdGgoJ2F1dG9maWxsOicpICYmIHJlYXNvbi5pbmNsdWRlcygnLCcpID8gJyAnICsgcmVhc29uLnNsaWNlKHJlYXNvbi5pbmRleE9mKCcsJykgKyAxKS50cmltKCkgOiAnJztcblxuICAgICAgICByZXR1cm4gYHt7c3Vic3Q6QWZDICR7dGhpcy5yZXF1ZXN0UGFnZVR5cGV9fCR7dGVtcGxhdGVQYXJhbWV0ZXJzfX19JHthZGRpdGlvbmFsUmVhc29uaW5nfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFwcyBhIGdyb3VwIG9mIGRlbmllZCByZWFzb25zLlxuICAgICAqIEBwYXJhbSBkZW5pZWRQYWdlcyBUaGUgcGFnZXMgdG8gbWFwLlxuICAgICAqIEBwYXJhbSBzaW5ndWxhclJlcXVlc3QgV2hldGhlciB0aGUgcmVxdWVzdCBpcyB0aGUgb25seSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSBhbGxSZXF1ZXN0cyBXaGV0aGVyIGFsbCByZXF1ZXN0cyBhcmUgYmVpbmcgbWFwcGVkLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBtYXBEZW5pZWRSZWFzb25zKGRlbmllZFBhZ2VzOiBzdHJpbmdbXVtdLCBzaW5ndWxhclJlcXVlc3Q6IGJvb2xlYW4sIGFsbFJlcXVlc3RzOiBib29sZWFuKSB7XG4gICAgICAgIGlmIChzaW5ndWxhclJlcXVlc3QpIHJldHVybiBgKiAke3RoaXMuZm9ybWF0RGVuaWVkUmVhc29uKGRlbmllZFBhZ2VzWzBdWzFdKX0gfn5+fmA7XG5cbiAgICAgICAgY29uc3QgcmVhc29uczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge307XG5cbiAgICAgICAgZm9yIChjb25zdCBbcGFnZSwgcmVhc29uXSBvZiBkZW5pZWRQYWdlcykge1xuICAgICAgICAgICAgaWYgKCEocmVhc29uIGluIHJlYXNvbnMpKSByZWFzb25zW3JlYXNvbl0gPSBbXTtcbiAgICAgICAgICAgIHJlYXNvbnNbcmVhc29uXS5wdXNoKHBhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVhc29uc0FycmF5ID0gT2JqZWN0LmVudHJpZXMocmVhc29ucyk7XG5cbiAgICAgICAgcmV0dXJuIHJlYXNvbnNBcnJheVxuICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAoW3JlYXNvbiwgcGFnZXNdKSA9PlxuICAgICAgICAgICAgICAgICAgICBgKiAke3RoaXMuZm9ybWF0RGVuaWVkUmVhc29uKHJlYXNvbil9JHtyZWFzb25zQXJyYXkubGVuZ3RoID4gMSB8fCAhYWxsUmVxdWVzdHMgPyBgICgke3BhZ2VzLm1hcCgocGFnZSkgPT4gYFtbJHtwYWdlfV1dYCkuam9pbignLCAnKX0pYCA6ICcnfSB+fn5+YCxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXBzIGEgZ3JvdXAgb2YgY29tbWVudHMuXG4gICAgICogQHBhcmFtIGNvbW1lbnRzIFRoZSBjb21tZW50cyB0byBtYXAuXG4gICAgICogQHBhcmFtIHNpbmd1bGFyUmVxdWVzdCBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIHRoZSBvbmx5IHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGFsbFJlcXVlc3RzIFdoZXRoZXIgYWxsIHJlcXVlc3RzIGFyZSBiZWluZyBtYXBwZWQuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIG1hcENvbW1lbnRzKGNvbW1lbnRzOiBzdHJpbmdbXVtdLCBzaW5ndWxhclJlcXVlc3Q6IGJvb2xlYW4sIGFsbFJlcXVlc3RzOiBib29sZWFuKSB7XG4gICAgICAgIGlmIChzaW5ndWxhclJlcXVlc3QpIHJldHVybiBgKiB7e0FmQyBjb21tZW50fDE9JHtjb21tZW50c1swXVsxXX19fSB+fn5+YDtcblxuICAgICAgICBjb25zdCBjb21tZW50TWVzc2FnZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHt9O1xuXG4gICAgICAgIGZvciAoY29uc3QgW3BhZ2UsIGNvbW1lbnRdIG9mIGNvbW1lbnRzKSB7XG4gICAgICAgICAgICBpZiAoIShjb21tZW50IGluIGNvbW1lbnRNZXNzYWdlcykpIGNvbW1lbnRNZXNzYWdlc1tjb21tZW50XSA9IFtdO1xuICAgICAgICAgICAgY29tbWVudE1lc3NhZ2VzW2NvbW1lbnRdLnB1c2gocGFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb21tZW50c0FycmF5ID0gT2JqZWN0LmVudHJpZXMoY29tbWVudE1lc3NhZ2VzKTtcblxuICAgICAgICByZXR1cm4gY29tbWVudHNBcnJheVxuICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAoW2NvbW1lbnQsIHBhZ2VzXSkgPT5cbiAgICAgICAgICAgICAgICAgICAgYCoge3tBZkMgY29tbWVudHwxPSR7Y29tbWVudH19fSR7Y29tbWVudHNBcnJheS5sZW5ndGggPiAxIHx8ICFhbGxSZXF1ZXN0cyA/IGAgKCR7cGFnZXMubWFwKChwYWdlKSA9PiBgW1ske3BhZ2V9XV1gKS5qb2luKCcsICcpfSlgIDogJyd9IH5+fn5gLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIGEgZ2l2ZW4gc2VjdGlvbiB0ZXh0IHdpdGggcHJlcGVuZGVkIGFuZCBhcHBlbmRlZCB0ZXh0LlxuICAgICAqIEBwYXJhbSBzZWN0aW9uRGF0YSBUaGUgc2VjdGlvbiBkYXRhLlxuICAgICAqIEBwYXJhbSBjaGFuZ2VzIFRoZSBwcmVwZW5kaW5nIGFuZCBhcHBlbmRpbmcgdGV4dC5cbiAgICAgKiBAcGFyYW0gY2hhbmdlcy5wcmVwZW5kIFRoZSB0ZXh0IHRvIHByZXBlbmQgdG8gdGhlIHNlY3Rpb24gdGV4dC5cbiAgICAgKiBAcGFyYW0gY2hhbmdlcy5hcHBlbmQgVGhlIHRleHQgdG8gYXBwZW5kIHRvIHRoZSBzZWN0aW9uIHRleHQuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIG1vZGlmeVNlY3Rpb25EYXRhKFxuICAgICAgICBzZWN0aW9uRGF0YTogeyBwYWdlVGV4dDogc3RyaW5nIH0gJiBSZXF1ZXN0QWN0aW9uWydvcmlnaW5hbFRleHQnXSxcbiAgICAgICAgeyBwcmVwZW5kLCBhcHBlbmQgfTogeyBwcmVwZW5kPzogc3RyaW5nOyBhcHBlbmQ/OiBzdHJpbmcgfSxcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyBmdWxsU2VjdGlvblRleHQ6IG9sZEZ1bGxTZWN0aW9uVGV4dCwgc2VjdGlvblRleHQ6IG9sZFNlY3Rpb25UZXh0IH0gPSBzZWN0aW9uRGF0YTtcblxuICAgICAgICBpZiAocHJlcGVuZCkgc2VjdGlvbkRhdGEuc2VjdGlvblRleHQgPSBwcmVwZW5kICsgJ1xcbicgKyBzZWN0aW9uRGF0YS5zZWN0aW9uVGV4dDtcbiAgICAgICAgaWYgKGFwcGVuZCkgc2VjdGlvbkRhdGEuc2VjdGlvblRleHQgKz0gJ1xcbicgKyBhcHBlbmQ7XG5cbiAgICAgICAgc2VjdGlvbkRhdGEuZnVsbFNlY3Rpb25UZXh0ID0gc2VjdGlvbkRhdGEuZnVsbFNlY3Rpb25UZXh0LnJlcGxhY2Uob2xkU2VjdGlvblRleHQsIHNlY3Rpb25EYXRhLnNlY3Rpb25UZXh0KTtcblxuICAgICAgICBzZWN0aW9uRGF0YS5wYWdlVGV4dCA9IHNlY3Rpb25EYXRhLnBhZ2VUZXh0LnJlcGxhY2Uob2xkRnVsbFNlY3Rpb25UZXh0LCBzZWN0aW9uRGF0YS5mdWxsU2VjdGlvblRleHQpO1xuXG4gICAgICAgIHJldHVybiBzZWN0aW9uRGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhbGwgZWRpdHMgYW5kIGNyZWF0aW9ucyB0aGF0IG5lZWQgdG8gYmUgbWFkZS5cbiAgICAgKiBAcGFyYW0gc2hvd0FjdGlvbnNEaWFsb2cgVGhlIGRpYWxvZyB0byBsb2cgdGhlIHJlc3VsdHMgdG8uXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFzeW5jIG1ha2VBbGxFZGl0c0NyZWF0aW9ucyhzaG93QWN0aW9uc0RpYWxvZzogQWN0aW9uc0RpYWxvZykge1xuICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiB0aGlzLmVkaXRzQ3JlYXRpb25zVG9NYWtlKSB7XG4gICAgICAgICAgICBjb25zdCBhcGlGdW5jdGlvbiA9XG4gICAgICAgICAgICAgICAgYWN0aW9uLnR5cGUgPT09ICdlZGl0J1xuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuYXBpLmVkaXQoYWN0aW9uLnRpdGxlLCBhY3Rpb24udHJhbnNmb3JtKVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuYXBpLmNyZWF0ZShhY3Rpb24udGl0bGUsIHsgc3VtbWFyeTogYWN0aW9uLnN1bW1hcnksIHdhdGNobGlzdDogdGhpcy5jcmVhdGVkUGFnZVdhdGNoTWV0aG9kIH0sIGFjdGlvbi50ZXh0KTtcblxuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICBsaW5rRWxlbWVudC50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LmhyZWYgPSBtdy51dGlsLmdldFVybChhY3Rpb24udGl0bGUsICdpc1JlZGlyZWN0JyBpbiBhY3Rpb24gJiYgYWN0aW9uLmlzUmVkaXJlY3QgPyB7IHJlZGlyZWN0OiAnbm8nIH0gOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgbGlua0VsZW1lbnQudGV4dENvbnRlbnQgPSBhY3Rpb24udGl0bGU7XG5cbiAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KGAke2FjdGlvbi50eXBlID09PSAnZWRpdCcgPyAnRWRpdGluZycgOiAnQ3JlYXRpbmcnfSAke2xpbmtFbGVtZW50Lm91dGVySFRNTH0uLi5gKTtcblxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWF3YWl0LWluLWxvb3BcbiAgICAgICAgICAgIGF3YWl0IGFwaUZ1bmN0aW9uLmNhdGNoKGFzeW5jIChlcnJvckNvZGUsIGVycm9ySW5mbykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvckNvZGUgPT09ICdyYXRlbGltaXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoXG4gICAgICAgICAgICAgICAgICAgICAgICBgUmF0ZSBsaW1pdGVkLiBXYWl0aW5nIGZvciA3MCBzZWNvbmRzLi4uIChyZXN1bWluZyBhdCAke25ldyBEYXRlKERhdGUubm93KCkgKyA3MF8wMDApLnRvTG9jYWxlVGltZVN0cmluZygpfSlgLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCA3MF8wMDApKTtcblxuICAgICAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeSgnQ29udGludWluZy4uLicsICdzdWNjZXNzJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBpRnVuY3Rpb24uY2F0Y2goKGVycm9yQ29kZSwgZXJyb3JJbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgJHthY3Rpb24udHlwZSA9PT0gJ2VkaXQnID8gJ2VkaXRpbmcnIDogJ2NyZWF0aW5nJ30gJHtsaW5rRWxlbWVudC5vdXRlckhUTUx9OiAkeyhlcnJvckluZm8gYXMgTWVkaWFXaWtpRGF0YUVycm9yKT8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeShcbiAgICAgICAgICAgICAgICAgICAgICAgIGBFcnJvciAke2FjdGlvbi50eXBlID09PSAnZWRpdCcgPyAnZWRpdGluZycgOiAnY3JlYXRpbmcnfSAke2xpbmtFbGVtZW50Lm91dGVySFRNTH06ICR7KGVycm9ySW5mbyBhcyBNZWRpYVdpa2lEYXRhRXJyb3IpPy5lcnJvci5pbmZvID8/ICdVbmtub3duIGVycm9yJ30gKCR7ZXJyb3JDb2RlfSkuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBwcm90ZWN0ZWQgcGFyc2VTdWJ0eXBlUmVxdWVzdHMoc2VjdGlvblRleHQ6IHN0cmluZywgc2VjdGlvbkhlYWRlcjogc3RyaW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkLicpO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBwcm90ZWN0ZWQgbG9hZFN1YnR5cGVFbGVtZW50cyhpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkLicpO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBwcm90ZWN0ZWQgdXBkYXRlUmVxdWVzdENvbG9yKGRldGFpbHNFbGVtZW50OiBIVE1MRGV0YWlsc0VsZW1lbnQsIGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFycywgQHR5cGVzY3JpcHQtZXNsaW50L3JlcXVpcmUtYXdhaXRcbiAgICBwcm90ZWN0ZWQgYXN5bmMgcGVyZm9ybVN1YnR5cGVBY3Rpb25zKGRpYWxvZzogQWN0aW9uc0RpYWxvZywgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+LCBuZXdQYWdlVGV4dDogc3RyaW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkLicpO1xuICAgIH1cbn1cblxuT2JqZWN0LmFzc2lnbihIZWxwZXJEaWFsb2cucHJvdG90eXBlLCBPTy51aS5Qcm9jZXNzRGlhbG9nLnByb3RvdHlwZSk7XG4iLCAiaW1wb3J0IHR5cGUgeyBUZW1wbGF0ZUVkaXRvckVsZW1lbnRJbmZvIH0gZnJvbSAnLi4vcmVkaXJlY3QtaGVscGVyL3JlZGlyZWN0LWhlbHBlci1kaWFsb2cnO1xuaW1wb3J0IHR5cGUgeyBSZXF1ZXN0QWN0aW9uVHlwZSB9IGZyb20gJy4vaGVscGVyLWRpYWxvZyc7XG5pbXBvcnQgdHlwZSBSZWRpcmVjdHNEaWFsb2cgZnJvbSAnLi9yZWRpcmVjdHMtZGlhbG9nJztcbmltcG9ydCB0eXBlIHsgUmVkaXJlY3RBY3Rpb24gfSBmcm9tICcuL3JlZGlyZWN0cy1kaWFsb2cnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWRpcmVjdFJlcXVlc3RIYW5kbGVyIHtcbiAgICBwcml2YXRlIHRpdGxlSW5kZXg6IG51bWJlcjtcbiAgICBwcml2YXRlIHRpdGxlOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBkZXRhaWxzRWxlbWVudDogSFRNTERldGFpbHNFbGVtZW50O1xuICAgIHByaXZhdGUgcmVzcG9uZGVyRWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBkaWFsb2c6IFJlZGlyZWN0c0RpYWxvZztcblxuICAgIHByaXZhdGUgdGVtcGxhdGVQYXJhbWV0ZXJzRWRpdG9yPzogSFRNTERldGFpbHNFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZUVkaXRvcnNJbmZvOiBUZW1wbGF0ZUVkaXRvckVsZW1lbnRJbmZvW10gPSBbXTtcblxuICAgIHByaXZhdGUgY29tbWVudElucHV0ITogT08udWkuVGV4dElucHV0V2lkZ2V0O1xuXG4gICAgcHJpdmF0ZSB0YWdTZWxlY3RMYXlvdXQ/OiBPTy51aS5GaWVsZExheW91dDtcbiAgICBwcml2YXRlIGRlbnlSZWFzb25MYXlvdXQ/OiBPTy51aS5GaWVsZExheW91dDtcbiAgICBwcml2YXRlIGNsb3NpbmdSZWFzb25MYXlvdXQ/OiBPTy51aS5GaWVsZExheW91dDtcbiAgICBwcml2YXRlIGNvbW1lbnRMYXlvdXQhOiBPTy51aS5GaWVsZExheW91dDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICB0aXRsZUluZGV4OiBudW1iZXIsXG4gICAgICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgICAgIGRldGFpbHNFbGVtZW50OiBIVE1MRGV0YWlsc0VsZW1lbnQsXG4gICAgICAgIHJlc3BvbmRlckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICAgICAgICBkaWFsb2c6IFJlZGlyZWN0c0RpYWxvZyxcbiAgICApIHtcbiAgICAgICAgdGhpcy50aXRsZUluZGV4ID0gdGl0bGVJbmRleDtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRldGFpbHNFbGVtZW50ID0gZGV0YWlsc0VsZW1lbnQ7XG4gICAgICAgIHRoaXMucmVzcG9uZGVyRWxlbWVudCA9IHJlc3BvbmRlckVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZGlhbG9nID0gZGlhbG9nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIHJlcXVlc3QgaGFuZGxlciwgbG9hZGluZyBlbGVtZW50cyBpbnRvIHRoZSBET00uXG4gICAgICovXG4gICAgcHVibGljIHNldFVwKCkge1xuICAgICAgICBjb25zdCByZXF1ZXN0ZWRUaXRsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IHRoaXMudGl0bGU7XG4gICAgICAgIHJlcXVlc3RlZFRpdGxlRGl2LmFwcGVuZChsYWJlbCk7XG5cbiAgICAgICAgY29uc3QgYWN0aW9uUmFkaW9JbnB1dCA9IG5ldyBPTy51aS5SYWRpb1NlbGVjdFdpZGdldCh7XG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2FmY3JjLWhlbHBlci1hY3Rpb24tcmFkaW8nXSxcbiAgICAgICAgICAgIGl0ZW1zOiBbJ0FjY2VwdCcsICdEZW55JywgJ0NvbW1lbnQnLCAnQ2xvc2UnLCAnTm9uZSddLm1hcCgobGFiZWwpID0+IG5ldyBPTy51aS5SYWRpb09wdGlvbldpZGdldCh7IGRhdGE6IGxhYmVsLCBsYWJlbCB9KSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFjdGlvblJhZGlvSW5wdXQuc2VsZWN0SXRlbUJ5TGFiZWwoJ05vbmUnKTtcblxuICAgICAgICBhY3Rpb25SYWRpb0lucHV0Lm9uKCdjaG9vc2UnLCAoc2VsZWN0ZWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQWN0aW9uQ2hhbmdlKHNlbGVjdGVkKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5sb2FkQ29tbWVudExheW91dCgpO1xuXG4gICAgICAgIHJlcXVlc3RlZFRpdGxlRGl2LmFwcGVuZChhY3Rpb25SYWRpb0lucHV0LiRlbGVtZW50WzBdLCB0aGlzLmNvbW1lbnRMYXlvdXQuJGVsZW1lbnRbMF0pO1xuXG4gICAgICAgIHRoaXMucmVzcG9uZGVyRWxlbWVudC5hcHBlbmQocmVxdWVzdGVkVGl0bGVEaXYpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXIgZm9yIHNlbGVjdGVkIGFjdGlvbiBjaGFuZ2VzLlxuICAgICAqIEBwYXJhbSBzZWxlY3RlZCBUaGUgbmV3IHNlbGVjdGVkIG9wdGlvbi5cbiAgICAgKi9cbiAgICBwcml2YXRlIGhhbmRsZUFjdGlvbkNoYW5nZShzZWxlY3RlZDogT08udWkuT3B0aW9uV2lkZ2V0KSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5kaWFsb2cudXBkYXRlU2l6ZSgpLCAwKTtcblxuICAgICAgICBjb25zdCBvcHRpb24gPSAoc2VsZWN0ZWQuZ2V0RGF0YSgpIGFzIHN0cmluZykudG9Mb3dlckNhc2UoKSBhcyBSZXF1ZXN0QWN0aW9uVHlwZTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUFjdGlvbnNUb1Rha2UoeyBhY3Rpb246IG9wdGlvbiB9KTtcblxuICAgICAgICB0aGlzLmRpYWxvZy51cGRhdGVSZXF1ZXN0Q29sb3IodGhpcy5kZXRhaWxzRWxlbWVudCwgdGhpcy50aXRsZUluZGV4KTtcblxuICAgICAgICBpZiAodGhpcy50YWdTZWxlY3RMYXlvdXQpIHRoaXMudGFnU2VsZWN0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcbiAgICAgICAgaWYgKHRoaXMudGVtcGxhdGVQYXJhbWV0ZXJzRWRpdG9yKSB0aGlzLnRlbXBsYXRlUGFyYW1ldGVyc0VkaXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgIGlmICh0aGlzLmRlbnlSZWFzb25MYXlvdXQpIHRoaXMuZGVueVJlYXNvbkxheW91dC4kZWxlbWVudC5oaWRlKCk7XG4gICAgICAgIGlmICh0aGlzLmNsb3NpbmdSZWFzb25MYXlvdXQpIHRoaXMuY2xvc2luZ1JlYXNvbkxheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgc3dpdGNoIChvcHRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2FjY2VwdCc6IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGFnU2VsZWN0TGF5b3V0IHx8ICF0aGlzLnRlbXBsYXRlUGFyYW1ldGVyc0VkaXRvcikgdGhpcy5sb2FkVGFnU2VsZWN0QW5kUGFyYW1ldGVyc0VkaXRvcigpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy50YWdTZWxlY3RMYXlvdXQhLiRlbGVtZW50LnNob3coKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlUGFyYW1ldGVyc0VkaXRvciEuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgJ2RlbnknOiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRlbnlSZWFzb25MYXlvdXQpIHRoaXMubG9hZERlbnlSZWFzb25MYXlvdXQoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGVueVJlYXNvbkxheW91dCEuJGVsZW1lbnQuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdjbG9zZSc6IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2xvc2luZ1JlYXNvbkxheW91dCkgdGhpcy5sb2FkQ2xvc2luZ1JlYXNvbkxheW91dCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zaW5nUmVhc29uTGF5b3V0IS4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChbJ2FjY2VwdCcsICdjb21tZW50JywgJ2Nsb3NlJ10uaW5jbHVkZXMob3B0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy5jb21tZW50TGF5b3V0LiRlbGVtZW50LnNob3coKTtcblxuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IHRoaXMuY29tbWVudElucHV0LmdldFZhbHVlKCkudHJpbSgpO1xuXG4gICAgICAgICAgICBpZiAoY29tbWVudCkgdGhpcy51cGRhdGVBY3Rpb25zVG9UYWtlKHsgY29tbWVudCB9KTtcbiAgICAgICAgICAgIGVsc2UgdGhpcy51cGRhdGVBY3Rpb25zVG9UYWtlKHsgY29tbWVudDogdW5kZWZpbmVkIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb21tZW50TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVBY3Rpb25zVG9UYWtlKHsgY29tbWVudDogdW5kZWZpbmVkIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgdGhlIHRhZyBzZWxlY3QgYW5kIHRlbXBsYXRlIHBhcmFtZXRlcnMgZWRpdG9ycy5cbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRUYWdTZWxlY3RBbmRQYXJhbWV0ZXJzRWRpdG9yKCkge1xuICAgICAgICBjb25zdCB0YWdTZWxlY3QgPSBuZXcgT08udWkuTWVudVRhZ011bHRpc2VsZWN0V2lkZ2V0KHtcbiAgICAgICAgICAgIGFsbG93QXJiaXRyYXJ5OiBmYWxzZSxcbiAgICAgICAgICAgIGFsbG93UmVvcmRlcmluZzogZmFsc2UsXG4gICAgICAgICAgICBvcHRpb25zOiBPYmplY3QuZW50cmllcyh0aGlzLmRpYWxvZy5yZWRpcmVjdFRlbXBsYXRlcykubWFwKChbdGFnLCB7IHJlZGlyZWN0IH1dKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWRpcmVjdCkgcmV0dXJuIHsgZGF0YTogdGFnLCBsYWJlbDogdGFnIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IG5ldyBPTy51aS5IdG1sU25pcHBldChgPHNwYW4gY2xhc3M9XCJhZmNyYy1oZWxwZXItcmVkaXJlY3QtcG9zc2liaWxpdGllc1wiPiR7dGFnfTwvc3Bhbj5gKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHRhZywgbGFiZWwgfTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgICAgKHRhZ1NlbGVjdC5nZXRNZW51KCkgYXMgT08udWkuTWVudVNlbGVjdFdpZGdldC5Db25maWdPcHRpb25zKS5maWx0ZXJNb2RlID0gJ3N1YnN0cmluZyc7XG4gICAgICAgIHRhZ1NlbGVjdC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRUYWdzID0gdGFnU2VsZWN0LmdldFZhbHVlKCkgYXMgc3RyaW5nW107XG5cbiAgICAgICAgICAgIGNvbnN0IHNvcnRlZFRhZ3MgPSBzZWxlY3RlZFRhZ3Muc29ydCgoYSwgYikgPT4gYS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoYi50b0xvd2VyQ2FzZSgpKSk7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZFRhZ3Muam9pbignOycpICE9PSBzb3J0ZWRUYWdzLmpvaW4oJzsnKSkgdGFnU2VsZWN0LnNldFZhbHVlKHNvcnRlZFRhZ3MpO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGlvbnNUb1Rha2UoeyByZWRpcmVjdFRlbXBsYXRlczogc29ydGVkVGFncyB9KTtcblxuICAgICAgICAgICAgbGV0IHNob3duVGVtcGxhdGVFZGl0b3JzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWRpdG9ySW5mbyBvZiB0aGlzLnRlbXBsYXRlRWRpdG9yc0luZm8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc1RhZ1NlbGVjdGVkID0gc29ydGVkVGFncy5pbmNsdWRlcyhlZGl0b3JJbmZvLm5hbWUpO1xuXG4gICAgICAgICAgICAgICAgZWRpdG9ySW5mby5kZXRhaWxzLnN0eWxlLmRpc3BsYXkgPSBpc1RhZ1NlbGVjdGVkID8gJ2Jsb2NrJyA6ICdub25lJztcblxuICAgICAgICAgICAgICAgIGlmIChpc1RhZ1NlbGVjdGVkKSBzaG93blRlbXBsYXRlRWRpdG9ycysrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdW1tYXJ5RWxlbWVudC50ZXh0Q29udGVudCA9IGBUZW1wbGF0ZSBwYXJhbWV0ZXJzICgke3Nob3duVGVtcGxhdGVFZGl0b3JzID4gMCA/IGBmb3IgJHtzaG93blRlbXBsYXRlRWRpdG9yc30gdGVtcGxhdGUke3Nob3duVGVtcGxhdGVFZGl0b3JzID4gMSA/ICdzJyA6ICcnfWAgOiAnbm9uZSB0byBzaG93J30pYDtcblxuICAgICAgICAgICAgbm9UZW1wbGF0ZXNNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSBzaG93blRlbXBsYXRlRWRpdG9ycyA+IDAgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRhZ1NlbGVjdExheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dCh0YWdTZWxlY3QsIHtcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnYWZjcmMtaGVscGVyLXRhZy1zZWxlY3QtbGF5b3V0J10sXG4gICAgICAgICAgICBhbGlnbjogJ2lubGluZScsXG4gICAgICAgICAgICBsYWJlbDogJ1JlZGlyZWN0IHRlbXBsYXRlczonLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb21tZW50TGF5b3V0LiRlbGVtZW50WzBdLmJlZm9yZSh0aGlzLnRhZ1NlbGVjdExheW91dC4kZWxlbWVudFswXSk7XG5cbiAgICAgICAgdGhpcy50ZW1wbGF0ZVBhcmFtZXRlcnNFZGl0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZXRhaWxzJyk7XG4gICAgICAgIHRoaXMudGVtcGxhdGVQYXJhbWV0ZXJzRWRpdG9yLmNsYXNzTGlzdC5hZGQoJ2FmY3JjLWhlbHBlci10ZW1wbGF0ZS1wYXJhbWV0ZXJzLWNvbnRhaW5lcicpO1xuXG4gICAgICAgIGNvbnN0IHN1bW1hcnlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3VtbWFyeScpO1xuICAgICAgICBzdW1tYXJ5RWxlbWVudC50ZXh0Q29udGVudCA9ICdUZW1wbGF0ZSBwYXJhbWV0ZXJzIChub25lIHRvIHNob3cpJztcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVBhcmFtZXRlcnNFZGl0b3IuYXBwZW5kKHN1bW1hcnlFbGVtZW50KTtcblxuICAgICAgICBmb3IgKGNvbnN0IFt0ZW1wbGF0ZU5hbWUsIHRlbXBsYXRlRGF0YV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5kaWFsb2cucmVkaXJlY3RUZW1wbGF0ZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gT2JqZWN0LmVudHJpZXModGVtcGxhdGVEYXRhLnBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29uc3QgZGV0YWlscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RldGFpbHMnKTtcbiAgICAgICAgICAgIGRldGFpbHMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N1bW1hcnknKTtcbiAgICAgICAgICAgIHN1bW1hcnkudGV4dENvbnRlbnQgPSB0ZW1wbGF0ZU5hbWU7XG4gICAgICAgICAgICBkZXRhaWxzLmFwcGVuZChzdW1tYXJ5KTtcblxuICAgICAgICAgICAgY29uc3QgZWxlbWVudERhdGE6IFRlbXBsYXRlRWRpdG9yRWxlbWVudEluZm8gPSB7IG5hbWU6IHRlbXBsYXRlTmFtZSwgZGV0YWlscywgcGFyYW1ldGVyczogW10gfTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBbcGFyYW1ldGVyTmFtZSwgcGFyYW1ldGVyRGF0YV0gb2YgcGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gbmV3IE9PLnVpLlRleHRJbnB1dFdpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBwYXJhbWV0ZXJEYXRhLmRlZmF1bHQ/LnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBwYXJhbWV0ZXJEYXRhLnJlcXVpcmVkLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG5ldyBPTy51aS5IdG1sU25pcHBldChcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke3BhcmFtZXRlck5hbWV9JHshcGFyYW1ldGVyRGF0YS5sYWJlbCB8fCBwYXJhbWV0ZXJOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHBhcmFtZXRlckRhdGEubGFiZWwudG9Mb3dlckNhc2UoKSA/ICcnIDogYCAoJHtwYXJhbWV0ZXJEYXRhLmxhYmVsfSlgfSR7cGFyYW1ldGVyRGF0YS5kZXNjcmlwdGlvbiA/IGAgKCR7cGFyYW1ldGVyRGF0YS5kZXNjcmlwdGlvbn0pYCA6ICcnfSAodHlwZTogJHtwYXJhbWV0ZXJEYXRhLnR5cGV9KSAke3BhcmFtZXRlckRhdGEuc3VnZ2VzdGVkID8gJyAoc3VnZ2VzdGVkKScgOiAnJ30ke3BhcmFtZXRlckRhdGEuZXhhbXBsZSA/IGAgKGV4YW1wbGU6IFwiJHtwYXJhbWV0ZXJEYXRhLmV4YW1wbGV9XCIpYCA6ICcnfWAsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsaWduOiAnaW5saW5lJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkZXRhaWxzLmFwcGVuZChpbnB1dExheW91dC4kZWxlbWVudFswXSk7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50RGF0YS5wYXJhbWV0ZXJzLnB1c2goeyBuYW1lOiBwYXJhbWV0ZXJOYW1lLCBhbGlhc2VzOiBwYXJhbWV0ZXJEYXRhLmFsaWFzZXMsIGVkaXRvcjogaW5wdXQgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVQYXJhbWV0ZXJzRWRpdG9yLmFwcGVuZChkZXRhaWxzKTtcblxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVkaXRvcnNJbmZvLnB1c2goZWxlbWVudERhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVBY3Rpb25zVG9UYWtlKHsgcmVkaXJlY3RUZW1wbGF0ZVBhcmFtZXRlcnM6IHRoaXMudGVtcGxhdGVFZGl0b3JzSW5mbyB9KTtcblxuICAgICAgICBjb25zdCBub1RlbXBsYXRlc01lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbm9UZW1wbGF0ZXNNZXNzYWdlLmlkID0gJ2FmY3JjLWhlbHBlci1uby10ZW1wbGF0ZXMtbWVzc2FnZSc7XG4gICAgICAgIG5vVGVtcGxhdGVzTWVzc2FnZS50ZXh0Q29udGVudCA9ICdObyB0ZW1wbGF0ZXMgd2l0aCBwYXJhbWV0ZXJzIHRvIGRpc3BsYXkhJztcblxuICAgICAgICB0aGlzLnRlbXBsYXRlUGFyYW1ldGVyc0VkaXRvci5hcHBlbmQobm9UZW1wbGF0ZXNNZXNzYWdlKTtcblxuICAgICAgICB0aGlzLmNvbW1lbnRMYXlvdXQuJGVsZW1lbnRbMF0uYmVmb3JlKHRoaXMudGVtcGxhdGVQYXJhbWV0ZXJzRWRpdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgZGVueSByZWFzb24gbGF5b3V0LlxuICAgICAqL1xuICAgIHByaXZhdGUgbG9hZERlbnlSZWFzb25MYXlvdXQoKSB7XG4gICAgICAgIGNvbnN0IGRlbnlSZWFzb25JbnB1dCA9IG5ldyBPTy51aS5Db21ib0JveElucHV0V2lkZ2V0KHtcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnYWZjcmMtY2xvc2luZy1yZWFzb24taW5wdXQnXSxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnYXV0b2ZpbGw6dW5saWtlbHknLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIFsnZXhpc3RzJywgJ2V4aXN0aW5nIHBhZ2VzJ10sXG4gICAgICAgICAgICAgICAgWydlbXB0eScsICdlbXB0eSBzdWJtaXNzaW9ucyddLFxuICAgICAgICAgICAgICAgIFsnbm90YXJnZXQnLCAnbm9uZXhpc3RlbnQgb3Igbm8gcHJvdmlkZWQgdGFyZ2V0J10sXG4gICAgICAgICAgICAgICAgWydub3RpdGxlJywgJ25vIHRpdGxlIHByb3ZpZGVkJ10sXG4gICAgICAgICAgICAgICAgWyd1bmxpa2VseScsICd1bmxpa2VseSByZWRpcmVjdHMnXSxcbiAgICAgICAgICAgICAgICBbJ3VucmVsYXRlZCcsICdhcHBhcmVudGx5IHVucmVsYXRlZCB0aXRsZXMnXSxcbiAgICAgICAgICAgICAgICBbJ25vdHJlZGlyZWN0JywgJ2FydGljbGUgY3JlYXRpb24gcmVxdWVzdHMnXSxcbiAgICAgICAgICAgICAgICBbJ2V4dGVybmFsbGluaycsICdleHRlcm5hbCBsaW5rIHJlZGlyZWN0cyddLFxuICAgICAgICAgICAgICAgIFsnZWRpdHJlcXVlc3QnLCAnZWRpdCByZXF1ZXN0cyddLFxuICAgICAgICAgICAgICAgIFsnbm90ZW5nbGlzaCcsICdyZXF1ZXN0cyBub3QgaW4gRW5nbGlzaCddLFxuICAgICAgICAgICAgXS5tYXAoKFt2YWx1ZSwgbGFiZWxdKSA9PiAoeyBkYXRhOiBgYXV0b2ZpbGw6JHt2YWx1ZX1gLCBsYWJlbDogYEF1dG9maWxsZWQgdGV4dCBmb3IgJHtsYWJlbH1gIH0pKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVueVJlYXNvbklucHV0Lm9uKCdjaGFuZ2UnLCAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWN0aW9uc1RvVGFrZSh7IGRlbnlSZWFzb246IHZhbHVlIHx8ICdhdXRvZmlsbDp1bmxpa2VseScgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlbnlSZWFzb25JbnB1dC5zZXRWYWx1ZSgnYXV0b2ZpbGw6dW5saWtlbHknKTtcbiAgICAgICAgZGVueVJlYXNvbklucHV0LmdldE1lbnUoKS5zZWxlY3RJdGVtQnlEYXRhKCdhdXRvZmlsbDp1bmxpa2VseScpO1xuXG4gICAgICAgIHRoaXMuZGVueVJlYXNvbkxheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dChkZW55UmVhc29uSW5wdXQsIHtcbiAgICAgICAgICAgIGFsaWduOiAnaW5saW5lJyxcbiAgICAgICAgICAgIGxhYmVsOiAnRGVueSByZWFzb246JyxcbiAgICAgICAgICAgIGhlbHA6ICdTdXBwb3J0cyBhdXRvbWF0aWMgcmVhc29uaW5nLCBjdXN0b20gcmVhc29uaW5nLCBvciBhIGNvbWJpbmF0aW9uIG9mIHRoZSB0d28gd2l0aCBcImF1dG9maWxsOlJFQVNPTiwgQ1VTVE9NXCIgZm9ybWF0JyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGVueVJlYXNvbkxheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgdGhpcy5jb21tZW50TGF5b3V0LiRlbGVtZW50WzBdLmJlZm9yZSh0aGlzLmRlbnlSZWFzb25MYXlvdXQuJGVsZW1lbnRbMF0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBjbG9zaW5nIHJlYXNvbiBsYXlvdXQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBsb2FkQ2xvc2luZ1JlYXNvbkxheW91dCgpIHtcbiAgICAgICAgY29uc3QgY2xvc2luZ1JlYXNvbkRyb3Bkb3duID0gbmV3IE9PLnVpLkRyb3Bkb3duV2lkZ2V0KHtcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnYWZjcmMtY2xvc2luZy1yZWFzb24taW5wdXQnXSxcbiAgICAgICAgICAgIG1lbnU6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgICAgICBbJ05vIHJlc3BvbnNlJywgJ3InXSxcbiAgICAgICAgICAgICAgICAgICAgWydTdWNjZWVkZWQnLCAncyddLFxuICAgICAgICAgICAgICAgICAgICBbJ1dpdGhkcmF3bicsICd3J10sXG4gICAgICAgICAgICAgICAgXS5tYXAoKFt0aXRsZSwgaWRdKSA9PiBuZXcgT08udWkuTWVudU9wdGlvbldpZGdldCh7IGRhdGE6IGlkLCBsYWJlbDogdGl0bGUgfSkpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNsb3NpbmdSZWFzb25Ecm9wZG93bi5nZXRNZW51KCkuc2VsZWN0SXRlbUJ5RGF0YSgncicpO1xuXG4gICAgICAgIGNsb3NpbmdSZWFzb25Ecm9wZG93bi5nZXRNZW51KCkub24oJ2Nob29zZScsIChzZWxlY3RlZCkgPT4ge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBY3Rpb25zVG9UYWtlKHsgY2xvc2luZ1JlYXNvbjogeyBuYW1lOiBzZWxlY3RlZC5nZXRMYWJlbCgpIGFzIHN0cmluZywgaWQ6IHNlbGVjdGVkLmdldERhdGEoKSBhcyBzdHJpbmcgfSB9KTtcblxuICAgICAgICAgICAgdGhpcy5kaWFsb2cudXBkYXRlUmVxdWVzdENvbG9yKHRoaXMuZGV0YWlsc0VsZW1lbnQsIHRoaXMudGl0bGVJbmRleCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY2xvc2luZ1JlYXNvbkxheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dChjbG9zaW5nUmVhc29uRHJvcGRvd24sIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogJ0Nsb3NpbmcgcmVhc29uOicgfSk7XG4gICAgICAgIHRoaXMuY2xvc2luZ1JlYXNvbkxheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgdGhpcy5jb21tZW50TGF5b3V0LiRlbGVtZW50WzBdLmJlZm9yZSh0aGlzLmNsb3NpbmdSZWFzb25MYXlvdXQuJGVsZW1lbnRbMF0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBjb21tZW50IGxheW91dC5cbiAgICAgKi9cbiAgICBwcml2YXRlIGxvYWRDb21tZW50TGF5b3V0KCkge1xuICAgICAgICB0aGlzLmNvbW1lbnRJbnB1dCA9IG5ldyBPTy51aS5UZXh0SW5wdXRXaWRnZXQoKTtcblxuICAgICAgICB0aGlzLmNvbW1lbnRJbnB1dC5vbignY2hhbmdlJywgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb21tZW50ID0gdmFsdWUudHJpbSgpO1xuXG4gICAgICAgICAgICBpZiAoY29tbWVudCkgdGhpcy51cGRhdGVBY3Rpb25zVG9UYWtlKHsgY29tbWVudCB9KTtcbiAgICAgICAgICAgIGVsc2UgdGhpcy51cGRhdGVBY3Rpb25zVG9UYWtlKHsgY29tbWVudDogdW5kZWZpbmVkIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbW1lbnRMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQodGhpcy5jb21tZW50SW5wdXQsIHtcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnYWZjcmMtY29tbWVudC1pbnB1dCddLFxuICAgICAgICAgICAgYWxpZ246ICdpbmxpbmUnLFxuICAgICAgICAgICAgbGFiZWw6ICdDb21tZW50OicsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbW1lbnRMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgYSByZXF1ZXN0J3MgYWN0aW9ucyBkYXRhLlxuICAgICAqIEBwYXJhbSB1cGRhdGUgVGhlIHVwZGF0ZXMgdG8gbWFrZS5cbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZUFjdGlvbnNUb1Rha2UodXBkYXRlOiBQYXJ0aWFsPFJlZGlyZWN0QWN0aW9uPikge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZGlhbG9nLmFjdGlvbnNUb1Rha2VbdGhpcy50aXRsZUluZGV4XS5yZXF1ZXN0c1t0aGlzLnRpdGxlXSwgdXBkYXRlKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcyB9IGZyb20gJ3R5cGVzLW1lZGlhd2lraS9hcGlfcGFyYW1zJztcbmltcG9ydCB0eXBlIHsgUGFnZVJldmlzaW9uc1Jlc3VsdCB9IGZyb20gJy4uLy4uL2dsb2JhbC10eXBlcyc7XG5pbXBvcnQgdHlwZSB7IFJlZGlyZWN0VGVtcGxhdGVEYXRhLCBUZW1wbGF0ZUVkaXRvckVsZW1lbnRJbmZvIH0gZnJvbSAnLi4vcmVkaXJlY3QtaGVscGVyL3JlZGlyZWN0LWhlbHBlci1kaWFsb2cnO1xuaW1wb3J0IEhlbHBlckRpYWxvZywgeyB0eXBlIFJlcXVlc3RBY3Rpb24sIHR5cGUgUmVxdWVzdFJlcXVlc3RlciB9IGZyb20gJy4vaGVscGVyLWRpYWxvZyc7XG5pbXBvcnQgUmVkaXJlY3RSZXF1ZXN0SGFuZGxlciBmcm9tICcuL3JlZGlyZWN0LXJlcXVlc3QtaGFuZGxlcic7XG5pbXBvcnQgdHlwZSBBY3Rpb25zRGlhbG9nIGZyb20gJy4vc2hvdy1hY3Rpb25zLWRpYWxvZyc7XG5cbmludGVyZmFjZSBSZWRpcmVjdFJlcXVlc3REYXRhIHtcbiAgICBwYWdlczogc3RyaW5nW107XG4gICAgdGFyZ2V0OiBzdHJpbmc7XG4gICAgcmVhc29uOiBzdHJpbmc7XG4gICAgc291cmNlOiBzdHJpbmc7XG4gICAgcmVxdWVzdGVyOiBSZXF1ZXN0UmVxdWVzdGVyO1xufVxuXG5leHBvcnQgdHlwZSBSZWRpcmVjdEFjdGlvbiA9IFJlcXVlc3RBY3Rpb24gJiB7IHJlZGlyZWN0VGVtcGxhdGVzPzogc3RyaW5nW107IHJlZGlyZWN0VGVtcGxhdGVQYXJhbWV0ZXJzPzogVGVtcGxhdGVFZGl0b3JFbGVtZW50SW5mb1tdIH07XG5cbnR5cGUgUmVkaXJlY3RBY3Rpb25zID0geyB0YXJnZXQ6IHN0cmluZzsgcmVxdWVzdHM6IFJlY29yZDxzdHJpbmcsIFJlZGlyZWN0QWN0aW9uPiB9W107XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlZGlyZWN0c0RpYWxvZyBleHRlbmRzIEhlbHBlckRpYWxvZyB7XG4gICAgcHVibGljIHJlZGlyZWN0VGVtcGxhdGVzITogUmVkaXJlY3RUZW1wbGF0ZURhdGE7XG5cbiAgICBwcm90ZWN0ZWQgcGFyc2VkUmVxdWVzdHM6IFJlZGlyZWN0UmVxdWVzdERhdGFbXSA9IFtdO1xuICAgIHB1YmxpYyBhY3Rpb25zVG9UYWtlOiBSZWRpcmVjdEFjdGlvbnMgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIExvYWQgZWxlbWVudHMgaW4gdGhlIHdpbmRvdy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgbG9hZCgpIHtcbiAgICAgICAgY29uc3QgcmVkaXJlY3RUZW1wbGF0ZVJlc3BvbnNlID0gKGF3YWl0IHRoaXMuYXBpLmdldCh7XG4gICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICBmb3JtYXR2ZXJzaW9uOiAnMicsXG4gICAgICAgICAgICBwcm9wOiAncmV2aXNpb25zJyxcbiAgICAgICAgICAgIHJ2cHJvcDogJ2NvbnRlbnQnLFxuICAgICAgICAgICAgcnZzbG90czogJ21haW4nLFxuICAgICAgICAgICAgdGl0bGVzOiAnVXNlcjpFZWppdDQzL3NjcmlwdHMvcmVkaXJlY3QtaGVscGVyLmpzb24nLFxuICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcykpIGFzIFBhZ2VSZXZpc2lvbnNSZXN1bHQ7XG5cbiAgICAgICAgdGhpcy5yZWRpcmVjdFRlbXBsYXRlcyA9IEpTT04ucGFyc2UoXG4gICAgICAgICAgICByZWRpcmVjdFRlbXBsYXRlUmVzcG9uc2UucXVlcnkhLnBhZ2VzWzBdPy5yZXZpc2lvbnM/LlswXT8uc2xvdHM/Lm1haW4/LmNvbnRlbnQgfHwgJ3t9JyxcbiAgICAgICAgKSBhcyBSZWRpcmVjdFRlbXBsYXRlRGF0YTtcblxuICAgICAgICB2b2lkIHN1cGVyLmxvYWQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgcmVkaXJlY3QgcmVxdWVzdHMgZnJvbSBzZWN0aW9uIHRleHQuXG4gICAgICogQHBhcmFtIHNlY3Rpb25UZXh0IFRoZSBzZWN0aW9uIHRleHQuXG4gICAgICogQHBhcmFtIHNlY3Rpb25IZWFkZXIgVGhlIHNlY3Rpb24gaGVhZGVyLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBwYXJzZVN1YnR5cGVSZXF1ZXN0cyhzZWN0aW9uVGV4dDogc3RyaW5nLCBzZWN0aW9uSGVhZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IHt9IGFzIFJlZGlyZWN0UmVxdWVzdERhdGE7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdGVkUGFnZXMgPSBzZWN0aW9uSGVhZGVyXG4gICAgICAgICAgICAubWF0Y2hBbGwoL1xcW1xcWyguKj8pXV0vZylcbiAgICAgICAgICAgIC50b0FycmF5KClcbiAgICAgICAgICAgIC5tYXAoKG1hdGNoKSA9PiBtYXRjaFsxXS50cmltKCkucmVwbGFjZSgvXjovLCAnJykucmVwbGFjZUFsbCgnXycsICcgJykpXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBpZiAocmVxdWVzdGVkUGFnZXMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgcGFyc2VkRGF0YS5wYWdlcyA9IHJlcXVlc3RlZFBhZ2VzO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZFRhcmdldCA9IC9UYXJnZXQgb2YgcmVkaXJlY3Q6ID9cXFtcXFsoLio/KV1dLy5leGVjKHNlY3Rpb25UZXh0KT8uWzFdLnRyaW0oKS5yZXBsYWNlKC9eOi8sICcnKS5yZXBsYWNlQWxsKCdfJywgJyAnKTtcbiAgICAgICAgaWYgKCFwYXJzZWRUYXJnZXQpIHJldHVybjtcblxuICAgICAgICBwYXJzZWREYXRhLnRhcmdldCA9IHBhcnNlZFRhcmdldDtcblxuICAgICAgICBwYXJzZWREYXRhLnJlYXNvbiA9IC9yZWFzb246ID8oLio/KVxcKnNvdXJjZSg/OiBcXChpZiBhcHBsaWNhYmxlXFwpKT86L2lzLmV4ZWMoc2VjdGlvblRleHQpPy5bMV0udHJpbSgpID8/ICcnO1xuXG4gICAgICAgIHBhcnNlZERhdGEuc291cmNlID0gL3NvdXJjZSg/OiBcXChpZiBhcHBsaWNhYmxlXFwpKT86ID8oLio/KSg/OjxyZWZlcmVuY2VzIFxcLz58XFxuXFxuKS9pcy5leGVjKHNlY3Rpb25UZXh0KT8uWzFdLnRyaW0oKSA/PyAnJztcblxuICAgICAgICBjb25zdCByZXF1ZXN0ZXIgPSBzZWN0aW9uVGV4dFxuICAgICAgICAgICAgLm1hdGNoKFxuICAgICAgICAgICAgICAgIHNlY3Rpb25UZXh0LmluY2x1ZGVzKCc8cmVmZXJlbmNlcyAvPicpXG4gICAgICAgICAgICAgICAgICAgID8gLzxyZWZlcmVuY2VzIFxcLz5cXG4rKC4qKS9cbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgKD86PHJlZmVyZW5jZXMgXFxcXC8+JHtwYXJzZWREYXRhLnNvdXJjZSA/IGB8JHtwYXJzZWREYXRhLnNvdXJjZS5yZXBsYWNlQWxsKC9bXFxzIyQoKSorLC4/W1xcXFxcXF1ee3x9LV0vZywgJ1xcXFwkJicpfWAgOiAnJ30pXFxuKyguKilgLFxuICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICApPy5bMV1cbiAgICAgICAgICAgIC50cmltKCk7XG5cbiAgICAgICAgY29uc3QgbmFtZSA9IHJlcXVlc3RlciA/IC8oPzpTcGVjaWFsOkNvbnRyaWJ1dGlvbnNcXC98VXNlcig/OiB0YWxrKT86KSguKj8pXFx8Ly5leGVjKHJlcXVlc3Rlcik/LlsxXS50cmltKCkgOiBudWxsO1xuXG4gICAgICAgIHBhcnNlZERhdGEucmVxdWVzdGVyID0gcmVxdWVzdGVyICYmIG5hbWUgPyB7IHR5cGU6IC9cXFtcXFtVc2VyKCB0YWxrKT86Ly50ZXN0KHJlcXVlc3RlcikgPyAndXNlcicgOiAnaXAnLCBuYW1lIH0gOiBudWxsO1xuXG4gICAgICAgIHRoaXMucGFyc2VkUmVxdWVzdHMucHVzaChwYXJzZWREYXRhKTtcblxuICAgICAgICB0aGlzLmFjdGlvbnNUb1Rha2UucHVzaCh7XG4gICAgICAgICAgICB0YXJnZXQ6IHBhcnNlZERhdGEudGFyZ2V0LFxuICAgICAgICAgICAgcmVxdWVzdHM6IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRQYWdlcy5tYXAoKHBhZ2UpID0+IFtcbiAgICAgICAgICAgICAgICAgICAgcGFnZSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxUZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbFNlY3Rpb25UZXh0OiBzZWN0aW9uVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uVGV4dDogc2VjdGlvblRleHQucmVwbGFjZSgvXj09Lio/PT0kL20sICcnKS50cmltKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICApLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2FkcyBhIGdpdmVuIHJlZGlyZWN0IHJlcXVlc3QgaW50byB0aGUgZGlhbG9nLlxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHJlcXVlc3QgdG8gbG9hZC5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgbG9hZFN1YnR5cGVFbGVtZW50cyhpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLnBhcnNlZFJlcXVlc3RzW2luZGV4XTtcblxuICAgICAgICBjb25zdCBkZXRhaWxzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RldGFpbHMnKTtcbiAgICAgICAgZGV0YWlsc0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWZjcmMtaGVscGVyLXJlcXVlc3QnKTtcbiAgICAgICAgZGV0YWlsc0VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHRoaXMudXBkYXRlU2l6ZSgpLCAwKSk7XG5cbiAgICAgICAgY29uc3Qgc3VtbWFyeUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdW1tYXJ5Jyk7XG4gICAgICAgIHN1bW1hcnlFbGVtZW50LmlubmVySFRNTCA9IHJlcXVlc3QucGFnZXMubWFwKChwYWdlKSA9PiBgPGI+JHtwYWdlfTwvYj5gKS5qb2luKCcsICcpICsgJyBcdTIxOTIgJztcbiAgICAgICAgc3VtbWFyeUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50Py50YWdOYW1lID09PSAnSU5QVVQnICYmIGV2ZW50LmtleSA9PT0gJyAnKSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0YXJnZXRFZGl0b3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgdGFyZ2V0RWRpdG9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhZmNyYy1oZWxwZXItdGFyZ2V0LWVkaXRvcicpO1xuICAgICAgICB0YXJnZXRFZGl0b3JFbGVtZW50LnN0eWxlLndpZHRoID0gYCR7cmVxdWVzdC50YXJnZXQubGVuZ3RofWNoYDtcbiAgICAgICAgdGFyZ2V0RWRpdG9yRWxlbWVudC52YWx1ZSA9IHJlcXVlc3QudGFyZ2V0O1xuICAgICAgICB0YXJnZXRFZGl0b3JFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgdGFyZ2V0RWRpdG9yRWxlbWVudC52YWx1ZSA9IHRhcmdldEVkaXRvckVsZW1lbnQudmFsdWUucmVwbGFjZUFsbCgnXycsICcgJyk7XG5cbiAgICAgICAgICAgIHRhcmdldEVkaXRvckVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0YXJnZXRFZGl0b3JFbGVtZW50LnZhbHVlLmxlbmd0aH1jaGA7XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1RvVGFrZVtpbmRleF0udGFyZ2V0ID0gdGFyZ2V0RWRpdG9yRWxlbWVudC52YWx1ZTtcblxuICAgICAgICAgICAgbGlua0VsZW1lbnQuaHJlZiA9IG13LnV0aWwuZ2V0VXJsKHRhcmdldEVkaXRvckVsZW1lbnQudmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdW1tYXJ5RWxlbWVudC5hcHBlbmQodGFyZ2V0RWRpdG9yRWxlbWVudCk7XG5cbiAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGxpbmtFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FmY3JjLWhlbHBlci1leHRlcm5hbC1saW5rJyk7XG4gICAgICAgIGxpbmtFbGVtZW50LnRhcmdldCA9ICdfYmxhbmsnO1xuICAgICAgICBsaW5rRWxlbWVudC5ocmVmID0gbXcudXRpbC5nZXRVcmwocmVxdWVzdC50YXJnZXQpO1xuICAgICAgICBsaW5rRWxlbWVudC5pbm5lckhUTUwgPSBgXG48c3ZnIHZpZXdib3g9XCIwIDAgNDggNDhcIj5cbjxwYXRoIGQ9XCJNMzYgMjRjLTEuMiAwLTIgMC44LTIgMnYxMmMwIDEuMi0wLjggMi0yIDJoLTIyYy0xLjJcbiAgICAwLTItMC44LTItMnYtMjJjMC0xLjIgMC44LTIgMi0yaDEyYzEuMiAwIDItMC44IDItMnMtMC44LTItMi0yaC0xMmMtMy40XG4gICAgMC02IDIuNi02IDZ2MjJjMCAzLjQgMi42IDYgNiA2aDIyYzMuNCAwIDYtMi42XG4gICAgNi02di0xMmMwLTEuMi0wLjgtMi0yLTJ6XCI+PC9wYXRoPlxuPHBhdGggZD1cIk00My44IDUuMmMtMC4yLTAuNC0wLjYtMC44LTEtMS0wLjItMC4yLTAuNi0wLjItMC44LTAuMmgtMTJjLTEuMlxuICAgIDAtMiAwLjgtMiAyczAuOCAyIDIgMmg3LjJsLTE4LjYgMTguNmMtMC44IDAuOC0wLjggMiAwIDIuOCAwLjQgMC40IDAuOFxuICAgIDAuNiAxLjQgMC42czEtMC4yIDEuNC0wLjZsMTguNi0xOC42djcuMmMwIDEuMiAwLjggMiAyIDJzMi0wLjhcbiAgICAyLTJ2LTEyYzAtMC4yIDAtMC42LTAuMi0wLjh6XCI+PC9wYXRoPlxuPC9zdmc+YDtcblxuICAgICAgICBzdW1tYXJ5RWxlbWVudC5hcHBlbmQobGlua0VsZW1lbnQpO1xuXG4gICAgICAgIGRldGFpbHNFbGVtZW50LmFwcGVuZChzdW1tYXJ5RWxlbWVudCk7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdEluZm9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHJlcXVlc3RJbmZvRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhZmNyYy1oZWxwZXItcmVxdWVzdC1pbmZvJyk7XG5cbiAgICAgICAgY29uc3Qgbm9uZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIG5vbmVFbGVtZW50LnN0eWxlLmNvbG9yID0gJ2RpbWdyYXknO1xuICAgICAgICBub25lRWxlbWVudC50ZXh0Q29udGVudCA9ICdOb25lJztcblxuICAgICAgICBjb25zdCB1bmtub3duRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgdW5rbm93bkVsZW1lbnQuc3R5bGUuY29sb3IgPSAnZGltZ3JheSc7XG4gICAgICAgIHVua25vd25FbGVtZW50LnRleHRDb250ZW50ID0gJ1Vua25vd24nO1xuXG4gICAgICAgIGNvbnN0IHJlYXNvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IHJlYXNvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICByZWFzb25MYWJlbC50ZXh0Q29udGVudCA9ICdSZWFzb246ICc7XG4gICAgICAgIHJlYXNvbkRpdi5hcHBlbmQocmVhc29uTGFiZWwpO1xuXG4gICAgICAgIGlmIChyZXF1ZXN0LnJlYXNvbikgcmVhc29uRGl2LmFwcGVuZChyZXF1ZXN0LnJlYXNvbik7XG4gICAgICAgIGVsc2UgcmVhc29uRGl2LmFwcGVuZChub25lRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgICAgIHJlcXVlc3RJbmZvRWxlbWVudC5hcHBlbmQocmVhc29uRGl2KTtcblxuICAgICAgICBjb25zdCBzb3VyY2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCBzb3VyY2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2InKTtcbiAgICAgICAgc291cmNlTGFiZWwudGV4dENvbnRlbnQgPSAnU291cmNlOiAnO1xuICAgICAgICBzb3VyY2VEaXYuYXBwZW5kKHNvdXJjZUxhYmVsKTtcblxuICAgICAgICBpZiAocmVxdWVzdC5zb3VyY2UpIHNvdXJjZURpdi5hcHBlbmQocmVxdWVzdC5zb3VyY2UpO1xuICAgICAgICBlbHNlIHNvdXJjZURpdi5hcHBlbmQobm9uZUVsZW1lbnQuY2xvbmVOb2RlKHRydWUpKTtcblxuICAgICAgICByZXF1ZXN0SW5mb0VsZW1lbnQuYXBwZW5kKHNvdXJjZURpdik7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdGVyTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJyk7XG4gICAgICAgIHJlcXVlc3RlckxhYmVsLnRleHRDb250ZW50ID0gJ1JlcXVlc3RlcjogJztcbiAgICAgICAgcmVxdWVzdGVyRGl2LmFwcGVuZChyZXF1ZXN0ZXJMYWJlbCk7XG5cbiAgICAgICAgaWYgKHJlcXVlc3QucmVxdWVzdGVyKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZXJMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgcmVxdWVzdGVyTGluay50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgICAgIHJlcXVlc3RlckxpbmsuaHJlZiA9XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXF1ZXN0ZXIudHlwZSA9PT0gJ3VzZXInXG4gICAgICAgICAgICAgICAgICAgID8gbXcudXRpbC5nZXRVcmwoYFVzZXI6JHtyZXF1ZXN0LnJlcXVlc3Rlci5uYW1lfWApXG4gICAgICAgICAgICAgICAgICAgIDogbXcudXRpbC5nZXRVcmwoYFNwZWNpYWw6Q29udHJpYnV0aW9ucy8ke3JlcXVlc3QucmVxdWVzdGVyLm5hbWV9YCk7XG4gICAgICAgICAgICByZXF1ZXN0ZXJMaW5rLnRleHRDb250ZW50ID0gcmVxdWVzdC5yZXF1ZXN0ZXIubmFtZTtcbiAgICAgICAgICAgIHJlcXVlc3RlckRpdi5hcHBlbmQocmVxdWVzdGVyTGluayk7XG4gICAgICAgIH0gZWxzZSByZXF1ZXN0ZXJEaXYuYXBwZW5kKHVua25vd25FbGVtZW50LmNsb25lTm9kZSh0cnVlKSk7XG5cbiAgICAgICAgcmVxdWVzdEluZm9FbGVtZW50LmFwcGVuZChyZXF1ZXN0ZXJEaXYpO1xuXG4gICAgICAgIGRldGFpbHNFbGVtZW50LmFwcGVuZChyZXF1ZXN0SW5mb0VsZW1lbnQpO1xuXG4gICAgICAgIGRldGFpbHNFbGVtZW50LmFwcGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdocicpKTtcblxuICAgICAgICBjb25zdCByZXF1ZXN0UmVzcG9uZGVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICByZXF1ZXN0UmVzcG9uZGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhZmNyYy1oZWxwZXItcmVxdWVzdC1yZXNwb25kZXInKTtcblxuICAgICAgICBmb3IgKGNvbnN0IHJlcXVlc3RlZFRpdGxlIG9mIHJlcXVlc3QucGFnZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgUmVkaXJlY3RSZXF1ZXN0SGFuZGxlcihpbmRleCwgcmVxdWVzdGVkVGl0bGUsIGRldGFpbHNFbGVtZW50LCByZXF1ZXN0UmVzcG9uZGVyRWxlbWVudCwgdGhpcyk7XG5cbiAgICAgICAgICAgIGhhbmRsZXIuc2V0VXAoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRldGFpbHNFbGVtZW50LmFwcGVuZChyZXF1ZXN0UmVzcG9uZGVyRWxlbWVudCk7XG5cbiAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7ICRib2R5OiBKUXVlcnkgfSkuJGJvZHkuYXBwZW5kKGRldGFpbHNFbGVtZW50KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjb2xvciBvZiBhIGRldGFpbHMgZWxlbWVudCBiYXNlZCBvbiB0aGUgaGFuZGxpbmcgb2YgdGhlIHJlcXVlc3RzIGluc2lkZS5cbiAgICAgKiBAcGFyYW0gZGV0YWlsc0VsZW1lbnQgVGhlIGRldGFpbHMgZWxlbWVudCB0byB1cGRhdGUuXG4gICAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgcmVkaXJlY3QgdGFyZ2V0LlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVSZXF1ZXN0Q29sb3IoZGV0YWlsc0VsZW1lbnQ6IEhUTUxEZXRhaWxzRWxlbWVudCwgaW5kZXg6IG51bWJlcikge1xuICAgICAgICBjb25zdCBhY3Rpb25zVG9UYWtlID0gT2JqZWN0LnZhbHVlcyh0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdLnJlcXVlc3RzKTtcblxuICAgICAgICBjb25zdCBhbGxSZXF1ZXN0c0FjY2VwdGVkRGVuaWVkID0gYWN0aW9uc1RvVGFrZS5ldmVyeSgoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnYWNjZXB0JyB8fCBhY3Rpb24uYWN0aW9uID09PSAnZGVueScpO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0Q2xvc2VSZWFzb24gPSBhY3Rpb25zVG9UYWtlLmZpbmQoKGFjdGlvbikgPT4gYWN0aW9uLmFjdGlvbiA9PT0gJ2Nsb3NlJyk/LmNsb3NpbmdSZWFzb24/LmlkO1xuICAgICAgICBjb25zdCBhbGxSZXF1ZXN0c0Nsb3NlZCA9IGFjdGlvbnNUb1Rha2UuZXZlcnkoXG4gICAgICAgICAgICAoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnY2xvc2UnICYmIGFjdGlvbi5jbG9zaW5nUmVhc29uPy5pZCA9PT0gZmlyc3RDbG9zZVJlYXNvbixcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgYmFja2dyb3VuZENvbG9yID0gJyc7XG5cbiAgICAgICAgaWYgKGFsbFJlcXVlc3RzQWNjZXB0ZWREZW5pZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjY2VwdGVkQ291bnQgPSBhY3Rpb25zVG9UYWtlLmZpbHRlcigoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnYWNjZXB0JykubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgZGVuaWVkQ291bnQgPSBhY3Rpb25zVG9UYWtlLmZpbHRlcigoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnZGVueScpLmxlbmd0aDtcblxuICAgICAgICAgICAgaWYgKGFjY2VwdGVkQ291bnQgPiAwICYmIGRlbmllZENvdW50ID4gMCkgYmFja2dyb3VuZENvbG9yID0gJyNmZmYxN2UnO1xuICAgICAgICAgICAgZWxzZSBpZiAoYWNjZXB0ZWRDb3VudCA+IDApIGJhY2tncm91bmRDb2xvciA9ICcjYTBmZmEwJztcbiAgICAgICAgICAgIGVsc2UgYmFja2dyb3VuZENvbG9yID0gJyNmZmNlY2UnO1xuICAgICAgICB9IGVsc2UgaWYgKGFsbFJlcXVlc3RzQ2xvc2VkKVxuICAgICAgICAgICAgaWYgKGZpcnN0Q2xvc2VSZWFzb24gPT09ICdyJykgYmFja2dyb3VuZENvbG9yID0gJyNmZmNlY2UnO1xuICAgICAgICAgICAgZWxzZSBpZiAoZmlyc3RDbG9zZVJlYXNvbiA9PT0gJ3MnKSBiYWNrZ3JvdW5kQ29sb3IgPSAnIzkwYzA5MCc7XG4gICAgICAgICAgICBlbHNlIGJhY2tncm91bmRDb2xvciA9ICcjYjhiOGI4JztcblxuICAgICAgICBkZXRhaWxzRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYWN0aW9ucyBvbiBhIGdpdmVuIGNhdGVnb3J5IHJlcXVlc3QuXG4gICAgICogQHBhcmFtIHNob3dBY3Rpb25zRGlhbG9nIFRoZSBkaWFsb2cgdG8gYWRkIG1lc3NhZ2VzIHRvLlxuICAgICAqIEBwYXJhbSBjb3VudHMgVGhlIGNvdW50IG9iamVjdCB1c2VkIHRvIHRyYWNrIHJlcXVlc3RzIGZvciB0aGUgZWRpdCBzdW1tYXJ5LlxuICAgICAqIEBwYXJhbSBuZXdQYWdlVGV4dCBUaGUgbmV3IHBhZ2UgdGV4dC5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgYXN5bmMgcGVyZm9ybVN1YnR5cGVBY3Rpb25zKHNob3dBY3Rpb25zRGlhbG9nOiBBY3Rpb25zRGlhbG9nLCBjb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4sIG5ld1BhZ2VUZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYW55UmVxdWVzdEhhbmRsZWQgPSB0aGlzLmFjdGlvbnNUb1Rha2Uuc29tZSgoYWN0aW9uRGF0YSkgPT5cbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoYWN0aW9uRGF0YS5yZXF1ZXN0cykuc29tZSgoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uICE9PSAnbm9uZScpLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChhbnlSZXF1ZXN0SGFuZGxlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB7IHRhcmdldCwgcmVxdWVzdHMgfSBvZiB0aGlzLmFjdGlvbnNUb1Rha2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb21lUmVxdWVzdEFjY2VwdGVkRGVuaWVkID0gT2JqZWN0LnZhbHVlcyhyZXF1ZXN0cykuc29tZShcbiAgICAgICAgICAgICAgICAgICAgKGFjdGlvbikgPT4gYWN0aW9uLmFjdGlvbiA9PT0gJ2FjY2VwdCcgfHwgYWN0aW9uLmFjdGlvbiA9PT0gJ2RlbnknLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVxdWVzdHNBY2NlcHRlZERlbmllZCA9IE9iamVjdC52YWx1ZXMocmVxdWVzdHMpLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnYWNjZXB0JyB8fCBhY3Rpb24uYWN0aW9uID09PSAnZGVueScsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2xvc2VSZWFzb24gPSBPYmplY3QudmFsdWVzKHJlcXVlc3RzKS5maW5kKChhY3Rpb24pID0+IGFjdGlvbi5hY3Rpb24gPT09ICdjbG9zZScpPy5jbG9zaW5nUmVhc29uPy5pZDtcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxSZXF1ZXN0c0Nsb3NlZCA9IE9iamVjdC52YWx1ZXMocmVxdWVzdHMpLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnY2xvc2UnICYmIGFjdGlvbi5jbG9zaW5nUmVhc29uPy5pZCA9PT0gZmlyc3RDbG9zZVJlYXNvbixcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgYWNjZXB0ZWRQYWdlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbmllZFBhZ2VzID0gW107XG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWVudHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudE9mUGFnZXMgPSBPYmplY3Qua2V5cyhyZXF1ZXN0cykubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbcmVxdWVzdGVkVGl0bGUsIGFjdGlvbl0gb2YgT2JqZWN0LmVudHJpZXMocmVxdWVzdHMpKVxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbi5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FjY2VwdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29tZVJlcXVlc3RBY2NlcHRlZERlbmllZCAmJiAhYWxsUmVxdWVzdHNBY2NlcHRlZERlbmllZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgTm90IGFsbCByZXF1ZXN0cyB0byBcIiR7dGFyZ2V0fVwiIHdlcmUgYWNjZXB0ZWQgb3IgZGVuaWVkLCB0aGUgaGFuZGxpbmcgb2YgXCIke3JlcXVlc3RlZFRpdGxlfVwiIHdpbGwgYmUgaWdub3JlZC5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHRlZFBhZ2VzLnB1c2gocmVxdWVzdGVkVGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uLmNvbW1lbnQpIGNvbW1lbnRzLnB1c2goW3JlcXVlc3RlZFRpdGxlLCBhY3Rpb24uY29tbWVudF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHMuYWNjZXB0ZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvbWVSZXF1ZXN0QWNjZXB0ZWREZW5pZWQgJiYgIWFsbFJlcXVlc3RzQWNjZXB0ZWREZW5pZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYE5vdCBhbGwgcmVxdWVzdHMgdG8gXCIke3RhcmdldH1cIiB3ZXJlIGFjY2VwdGVkIG9yIGRlbmllZCwgdGhlIGhhbmRsaW5nIG9mIFwiJHtyZXF1ZXN0ZWRUaXRsZX1cIiBpcyBiZWluZyBpZ25vcmVkLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnd2FybmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbmllZFBhZ2VzLnB1c2goW3JlcXVlc3RlZFRpdGxlLCBhY3Rpb24uZGVueVJlYXNvbiFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmRlbmllZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29tbWVudCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uLmNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudHMucHVzaChbcmVxdWVzdGVkVGl0bGUsIGFjdGlvbi5jb21tZW50XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50c1snY29tbWVudGVkIG9uJ10rKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgVGhlIHJlcXVlc3QgdG8gY3JlYXRlIFwiJHtyZXF1ZXN0ZWRUaXRsZX1cIiBcdTIxOTIgXCIke3RhcmdldH1cIiB3YXMgbWFya2VkIHRvIGJlIGNvbW1lbnRlZCBvbiwgYnV0IG5vIGNvbW1lbnQgd2FzIHByb3ZpZGVkIHNvIGl0IHdpbGwgYmUgc2tpcHBlZC5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjbG9zZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWxsUmVxdWVzdHNDbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5jb21tZW50KSBjb21tZW50cy5wdXNoKFtyZXF1ZXN0ZWRUaXRsZSwgYWN0aW9uLmNvbW1lbnRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmNsb3NlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBOb3QgYWxsIHJlcXVlc3RzIHRvIFwiJHt0YXJnZXR9XCIgd2VyZSBjbG9zZWQgd2l0aCB0aGUgc2FtZSByZWFzb24sIHRoZSBoYW5kbGluZyBvZiBcIiR7cmVxdWVzdGVkVGl0bGV9XCIgaXMgYmVpbmcgaWdub3JlZC5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgc2VjdGlvbkRhdGEgPSB7IHBhZ2VUZXh0OiBuZXdQYWdlVGV4dCwgLi4uT2JqZWN0LnZhbHVlcyhyZXF1ZXN0cylbMF0ub3JpZ2luYWxUZXh0IH07XG5cbiAgICAgICAgICAgICAgICBpZiAoY29tbWVudHMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkRhdGEgPSB0aGlzLm1vZGlmeVNlY3Rpb25EYXRhKHNlY3Rpb25EYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQ6IHRoaXMubWFwQ29tbWVudHMoY29tbWVudHMsIGFtb3VudE9mUGFnZXMgPT09IDEsIGNvbW1lbnRzLmxlbmd0aCA9PT0gYW1vdW50T2ZQYWdlcyksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFsbFJlcXVlc3RzQWNjZXB0ZWREZW5pZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NpbmdJZDogc3RyaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2NlcHRlZFBhZ2VzLmxlbmd0aCA+IDAgJiYgZGVuaWVkUGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ0lkID0gJ3AnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2NlcHRlZFBhZ2VzTWVzc2FnZSA9IGAqIHt7c3Vic3Q6QWZDIHJlZGlyZWN0fX0gKCR7YWNjZXB0ZWRQYWdlcy5tYXAoKHBhZ2UpID0+IGBbWyR7cGFnZX1dXWApLmpvaW4oJywgJyl9KSB+fn5+YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbmllZFBhZ2VzTWVzc2FnZSA9IHRoaXMubWFwRGVuaWVkUmVhc29ucyhkZW5pZWRQYWdlcywgZmFsc2UsIGZhbHNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIGFjY2VwdGVkUGFnZXMpIHRoaXMuaGFuZGxlQWNjZXB0ZWRSZWRpcmVjdChwYWdlLCByZXF1ZXN0c1twYWdlXSwgdGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkRhdGEgPSB0aGlzLm1vZGlmeVNlY3Rpb25EYXRhKHNlY3Rpb25EYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kOiBgJHthY2NlcHRlZFBhZ2VzTWVzc2FnZX1cXG4ke2RlbmllZFBhZ2VzTWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWNjZXB0ZWRQYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nSWQgPSAnYSc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBhY2NlcHRlZFBhZ2VzKSB0aGlzLmhhbmRsZUFjY2VwdGVkUmVkaXJlY3QocGFnZSwgcmVxdWVzdHNbcGFnZV0sIHRhcmdldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25EYXRhID0gdGhpcy5tb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogYCoge3tzdWJzdDpBZkMgcmVkaXJlY3Qke2FjY2VwdGVkUGFnZXMubGVuZ3RoID4gMSA/ICd8YWxsJyA6ICcnfX19IH5+fn5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nSWQgPSAnZCc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25EYXRhID0gdGhpcy5tb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogdGhpcy5tYXBEZW5pZWRSZWFzb25zKGRlbmllZFBhZ2VzLCBhbW91bnRPZlBhZ2VzID09PSAxLCB0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkRhdGEgPSB0aGlzLm1vZGlmeVNlY3Rpb25EYXRhKHNlY3Rpb25EYXRhLCB7IHByZXBlbmQ6IGB7e0FmQy1jfCR7Y2xvc2luZ0lkfX19YCwgYXBwZW5kOiAne3tBZkMtY3xifX0nIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxsUmVxdWVzdHNDbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25EYXRhID0gdGhpcy5tb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlcGVuZDogYHt7QWZDLWN8JHtmaXJzdENsb3NlUmVhc29ufX19YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogJ3t7QWZDLWN8Yn19JyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBuZXdQYWdlVGV4dCA9IHNlY3Rpb25EYXRhLnBhZ2VUZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5iZWZvcmVUZXh0ICsgdGhpcy5wYWdlQ29udGVudCA9PT0gbmV3UGFnZVRleHQpIHtcbiAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeSgnTm8gcmVxdWVzdHMgaGF2ZSBiZWVuIGhhbmRsZWQgKHBhZ2UgY29udGVudCBpZGVudGljYWwpIScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBtYXBwZWRDb3VudHMgPSBPYmplY3QuZW50cmllcyhjb3VudHMpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoWywgY291bnRdKSA9PiBjb3VudCA+IDApXG4gICAgICAgICAgICAgICAgLm1hcCgoW2FjdGlvbiwgY291bnRdKSA9PiBgJHthY3Rpb259ICR7Y291bnR9YClcbiAgICAgICAgICAgICAgICAuam9pbignLCAnKTtcblxuICAgICAgICAgICAgdGhpcy5lZGl0c0NyZWF0aW9uc1RvTWFrZS5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZWRpdCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZVRpdGxlLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbmV3UGFnZVRleHQsXG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6IGBIYW5kbGluZyBBZkMgcmVkaXJlY3QgcmVxdWVzdHMgKCR7bWFwcGVkQ291bnRzfSkke3RoaXMuc2NyaXB0TWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWFrZUFsbEVkaXRzQ3JlYXRpb25zKHNob3dBY3Rpb25zRGlhbG9nKTtcblxuICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoJ0FsbCBjaGFuZ2VzIG1hZGUsIGNsaWNrIGJlbG93IHRvIHJlbG9hZCEnLCAnc3VjY2VzcycpO1xuXG4gICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5zaG93UmVsb2FkKCk7XG4gICAgICAgIH0gZWxzZSBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeSgnTm8gcmVxdWVzdHMgaGF2ZSBiZWVuIGhhbmRsZWQhJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgY3JlYXRpb24gb2YgcGFnZXMgcmVsYXRlZCB0byBhbiBhY2NlcHRlZCByZWRpcmVjdCByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSBwYWdlIFRoZSByZXF1ZXN0ZWQgcGFnZS5cbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSBvZiB0aGUgcmVxdWVzdGVkIHBhZ2UuXG4gICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9mIHRoZSByZXF1ZXN0ZWQgcGFnZS5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgaGFuZGxlQWNjZXB0ZWRSZWRpcmVjdChwYWdlOiBzdHJpbmcsIGRhdGE6IFJlZGlyZWN0QWN0aW9uLCB0YXJnZXQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCB0YWdzV2l0aEFyZ3VtZW50cyA9XG4gICAgICAgICAgICBkYXRhLnJlZGlyZWN0VGVtcGxhdGVzICYmIGRhdGEucmVkaXJlY3RUZW1wbGF0ZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgID8gZGF0YS5yZWRpcmVjdFRlbXBsYXRlcy5tYXAoKHRhZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kQXJndW1lbnRFZGl0b3IgPSBkYXRhLnJlZGlyZWN0VGVtcGxhdGVQYXJhbWV0ZXJzPy5maW5kKChlZGl0b3JJbmZvKSA9PiBlZGl0b3JJbmZvLm5hbWUgPT09IHRhZyk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZEFyZ3VtZW50RWRpdG9yKSByZXR1cm4gYHt7JHt0YWd9fX1gO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdE51bWJlclBhcmFtZXRlckluZGV4ID0gZm91bmRBcmd1bWVudEVkaXRvci5wYXJhbWV0ZXJzLmZpbmRMYXN0SW5kZXgoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIChwYXJhbWV0ZXIsIGluZGV4KSA9PiBwYXJhbWV0ZXIubmFtZSA9PT0gKGluZGV4ICsgMSkudG9TdHJpbmcoKSAmJiBwYXJhbWV0ZXIuZWRpdG9yLmdldFZhbHVlKCkudHJpbSgpLFxuICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWRBcmd1bWVudHMgPSBmb3VuZEFyZ3VtZW50RWRpdG9yLnBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocGFyYW1ldGVyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbWV0ZXIuZWRpdG9yLmdldFZhbHVlKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSAmJiBpbmRleCA+IGxhc3ROdW1iZXJQYXJhbWV0ZXJJbmRleCkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgfCR7cGFyYW1ldGVyLm5hbWUgPT09IChpbmRleCArIDEpLnRvU3RyaW5nKCkgPyAnJyA6IGAke3BhcmFtZXRlci5uYW1lfT1gfSR7dmFsdWV9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYHt7JHt0YWd9JHttYXBwZWRBcmd1bWVudHN9fX1gO1xuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgY29uc3QgdGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dChwYWdlKSE7XG5cbiAgICAgICAgdGhpcy5lZGl0c0NyZWF0aW9uc1RvTWFrZS5wdXNoKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgIGlzUmVkaXJlY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLmdldFByZWZpeGVkVGV4dCgpLFxuICAgICAgICAgICAgICAgIHRleHQ6IGAjUkVESVJFQ1QgW1ske3RhcmdldH1dXSR7dGFnc1dpdGhBcmd1bWVudHMgPyBgXFxuXFxue3tSZWRpcmVjdCBjYXRlZ29yeSBzaGVsbHxcXG4ke3RhZ3NXaXRoQXJndW1lbnRzLmpvaW4oJ1xcbicpfVxcbn19YCA6ICcnfWAsXG4gICAgICAgICAgICAgICAgc3VtbWFyeTogYENyZWF0aW5nIHJlZGlyZWN0IHRvIFtbJHt0YXJnZXR9XV0gYXMgcmVxdWVzdGVkIGF0IFtbV1A6QUZDL1JdXSR7dGhpcy5zY3JpcHRNZXNzYWdlfWAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgIGlzUmVkaXJlY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZS5nZXRUYWxrUGFnZSgpIS5nZXRQcmVmaXhlZFRleHQoKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBge3tXaWtpUHJvamVjdCBiYW5uZXIgc2hlbGx8XFxue3tXaWtpUHJvamVjdCBBcnRpY2xlcyBmb3IgY3JlYXRpb258dHM9e3tzdWJzdDpMT0NBTFRJTUVTVEFNUH19fHJldmlld2VyPSR7bXcuY29uZmlnLmdldCgnd2dVc2VyTmFtZScpfX19XFxufX1gLFxuICAgICAgICAgICAgICAgIHN1bW1hcnk6IGBBZGRpbmcgW1tXaWtpcGVkaWE6V2lraVByb2plY3QgQXJ0aWNsZXMgZm9yIGNyZWF0aW9ufFdpa2lQcm9qZWN0IEFydGljbGVzIGZvciBjcmVhdGlvbl1dIGJhbm5lciR7dGhpcy5zY3JpcHRNZXNzYWdlfWAsXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7IEFwaVF1ZXJ5QWxsUGFnZXNHZW5lcmF0b3JQYXJhbWV0ZXJzLCBDYXRlZ29yaWVzUmVzdWx0IH0gZnJvbSAnLi4vLi4vZ2xvYmFsLXR5cGVzJztcbmltcG9ydCB0eXBlIHsgTG9va3VwRWxlbWVudENvbmZpZyB9IGZyb20gJy4uL3JlZGlyZWN0LWhlbHBlci9yZWRpcmVjdC10YXJnZXQtaW5wdXQtd2lkZ2V0JztcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGEgY2F0ZWdvcnkgbG9va3VwIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhdGVnb3J5SW5wdXRXaWRnZXQgZXh0ZW5kcyBPTy51aS5UZXh0SW5wdXRXaWRnZXQge1xuICAgIC8vIFV0aWxpdHkgdmFyaWFibGVzXG4gICAgcHJpdmF0ZSBhcGkgPSBuZXcgbXcuQXBpKCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IExvb2t1cEVsZW1lbnRDb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgT08udWkubWl4aW4uTG9va3VwRWxlbWVudC5jYWxsKHRoaXMgYXMgdW5rbm93biBhcyBPTy51aS5taXhpbi5Mb29rdXBFbGVtZW50LCBjb25maWcpO1xuICAgIH1cblxuICAgIGdldExvb2t1cFJlcXVlc3QgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xuICAgICAgICBjb25zdCBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcblxuICAgICAgICBpZiAoIXZhbHVlKSBkZWZlcnJlZC5yZXNvbHZlKFtdKTtcblxuICAgICAgICBjb25zdCBwYXJzZWRUaXRsZSA9IG13LlRpdGxlLm5ld0Zyb21UZXh0KHZhbHVlKTtcblxuICAgICAgICB0aGlzLmFwaVxuICAgICAgICAgICAgLmdldCh7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgICAgICBnYXBsaW1pdDogMjAsXG4gICAgICAgICAgICAgICAgZ2FwbmFtZXNwYWNlOiAxNCxcbiAgICAgICAgICAgICAgICBnYXBwcmVmaXg6IHBhcnNlZFRpdGxlPy5nZXRNYWluVGV4dCgpID8/IHZhbHVlLFxuICAgICAgICAgICAgICAgIGdlbmVyYXRvcjogJ2FsbHBhZ2VzJyxcbiAgICAgICAgICAgICAgICBwcm9wOiAnY2F0ZWdvcmllcycsXG4gICAgICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeUFsbFBhZ2VzR2VuZXJhdG9yUGFyYW1ldGVycylcbiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBudWxsKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogQ2F0ZWdvcmllc1Jlc3VsdCB8IG51bGwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Py5xdWVyeT8ucGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZXMgPSByZXN1bHQucXVlcnkucGFnZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBhZ2UpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFwYWdlLmNhdGVnb3JpZXM/LnNvbWUoKGNhdGVnb3J5KSA9PiBjYXRlZ29yeS50aXRsZSA9PT0gJ0NhdGVnb3J5Oldpa2lwZWRpYSBzb2Z0IHJlZGlyZWN0ZWQgY2F0ZWdvcmllcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocGFnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlV2l0aG91dE5hbWVzcGFjZSA9IHBhZ2UudGl0bGUuc3BsaXQoJzonKVsxXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IHRpdGxlV2l0aG91dE5hbWVzcGFjZSwgbGFiZWw6IHRpdGxlV2l0aG91dE5hbWVzcGFjZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdzaG93aW5nLXZhbHVlcycsIHBhZ2VzKTtcblxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHBhZ2VzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgZGVmZXJyZWQucmVzb2x2ZShbXSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSh7IGFib3J0KCkge30gfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gICAgfTtcblxuICAgIGdldExvb2t1cENhY2hlRGF0YUZyb21SZXNwb25zZSA9IDxUPihyZXNwb25zZTogVFtdIHwgbnVsbCB8IHVuZGVmaW5lZCkgPT4gcmVzcG9uc2UgPz8gW107XG5cbiAgICBnZXRMb29rdXBNZW51T3B0aW9uc0Zyb21EYXRhID0gKGRhdGE6IHsgZGF0YTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH1bXSkgPT5cbiAgICAgICAgZGF0YS5tYXAoKHsgZGF0YSwgbGFiZWwgfSkgPT4gbmV3IE9PLnVpLk1lbnVPcHRpb25XaWRnZXQoeyBkYXRhLCBsYWJlbCB9KSk7XG59XG5cbk9iamVjdC5hc3NpZ24oQ2F0ZWdvcnlJbnB1dFdpZGdldC5wcm90b3R5cGUsIE9PLnVpLm1peGluLkxvb2t1cEVsZW1lbnQucHJvdG90eXBlKTtcbiIsICJpbXBvcnQgdHlwZSB7IEFwaVF1ZXJ5QWxsUGFnZXNHZW5lcmF0b3JQYXJhbWV0ZXJzIH0gZnJvbSAnLi4vLi4vZ2xvYmFsLXR5cGVzJztcbmltcG9ydCB0eXBlIHsgTG9va3VwRWxlbWVudENvbmZpZyB9IGZyb20gJy4uL3JlZGlyZWN0LWhlbHBlci9yZWRpcmVjdC10YXJnZXQtaW5wdXQtd2lkZ2V0JztcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGEgcGFnZSBsb29rdXAgZWxlbWVudC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFnZUlucHV0V2lkZ2V0IGV4dGVuZHMgT08udWkuVGV4dElucHV0V2lkZ2V0IHtcbiAgICAvLyBVdGlsaXR5IHZhcmlhYmxlc1xuICAgIHByaXZhdGUgYXBpID0gbmV3IG13LkFwaSgpO1xuXG4gICAgY29uc3RydWN0b3IoY29uZmlnOiBMb29rdXBFbGVtZW50Q29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgICAgIE9PLnVpLm1peGluLkxvb2t1cEVsZW1lbnQuY2FsbCh0aGlzIGFzIHVua25vd24gYXMgT08udWkubWl4aW4uTG9va3VwRWxlbWVudCwgY29uZmlnKTtcbiAgICB9XG5cbiAgICBnZXRMb29rdXBSZXF1ZXN0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgY29uc3QgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG5cbiAgICAgICAgaWYgKCF2YWx1ZSkgZGVmZXJyZWQucmVzb2x2ZShbXSk7XG5cbiAgICAgICAgY29uc3QgcGFyc2VkVGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dCh2YWx1ZSk7XG5cbiAgICAgICAgdGhpcy5hcGlcbiAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgICAgICBmb3JtYXR2ZXJzaW9uOiAnMicsXG4gICAgICAgICAgICAgICAgZ2FwbGltaXQ6IDIwLFxuICAgICAgICAgICAgICAgIGdhcG5hbWVzcGFjZTogcGFyc2VkVGl0bGU/LmdldE5hbWVzcGFjZUlkKCkgPz8gMCxcbiAgICAgICAgICAgICAgICBnYXBwcmVmaXg6IHBhcnNlZFRpdGxlPy5nZXRNYWluVGV4dCgpID8/IHZhbHVlLFxuICAgICAgICAgICAgICAgIGdlbmVyYXRvcjogJ2FsbHBhZ2VzJyxcbiAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5QWxsUGFnZXNHZW5lcmF0b3JQYXJhbWV0ZXJzKVxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IG51bGwpXG4gICAgICAgICAgICAudGhlbigocmVzdWx0OiB7IHF1ZXJ5PzogeyBwYWdlczogeyB0aXRsZTogc3RyaW5nIH1bXSB9IH0gfCBudWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdD8ucXVlcnk/LnBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VzID0gcmVzdWx0LnF1ZXJ5LnBhZ2VzLm1hcCgocGFnZSkgPT4gKHsgZGF0YTogcGFnZS50aXRsZSwgbGFiZWw6IHBhZ2UudGl0bGUgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnc2hvd2luZy12YWx1ZXMnLCBwYWdlcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShwYWdlcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGRlZmVycmVkLnJlc29sdmUoW10pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoeyBhYm9ydCgpIHt9IH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvblxuICAgIH07XG5cbiAgICBnZXRMb29rdXBDYWNoZURhdGFGcm9tUmVzcG9uc2UgPSA8VD4ocmVzcG9uc2U6IFRbXSB8IG51bGwgfCB1bmRlZmluZWQpID0+IHJlc3BvbnNlID8/IFtdO1xuXG4gICAgZ2V0TG9va3VwTWVudU9wdGlvbnNGcm9tRGF0YSA9IChkYXRhOiB7IGRhdGE6IHN0cmluZzsgbGFiZWw6IHN0cmluZyB9W10pID0+XG4gICAgICAgIGRhdGEubWFwKCh7IGRhdGEsIGxhYmVsIH0pID0+IG5ldyBPTy51aS5NZW51T3B0aW9uV2lkZ2V0KHsgZGF0YSwgbGFiZWwgfSkpO1xufVxuXG5PYmplY3QuYXNzaWduKFBhZ2VJbnB1dFdpZGdldC5wcm90b3R5cGUsIE9PLnVpLm1peGluLkxvb2t1cEVsZW1lbnQucHJvdG90eXBlKTtcbiIsICJpbXBvcnQgQ2F0ZWdvcnlJbnB1dFdpZGdldCBmcm9tICcuL2NhdGVnb3J5LWlucHV0LXdpZGdldCc7XG5pbXBvcnQgSGVscGVyRGlhbG9nLCB7IHR5cGUgUmVxdWVzdEFjdGlvbiwgdHlwZSBSZXF1ZXN0QWN0aW9uVHlwZSwgdHlwZSBSZXF1ZXN0UmVxdWVzdGVyIH0gZnJvbSAnLi9oZWxwZXItZGlhbG9nJztcbmltcG9ydCBQYWdlSW5wdXRXaWRnZXQgZnJvbSAnLi9wYWdlLWlucHV0LXdpZGdldCc7XG5pbXBvcnQgdHlwZSBBY3Rpb25zRGlhbG9nIGZyb20gJy4vc2hvdy1hY3Rpb25zLWRpYWxvZyc7XG5cbmludGVyZmFjZSBDYXRlZ29yeVJlcXVlc3REYXRhIHtcbiAgICBjYXRlZ29yeTogc3RyaW5nO1xuICAgIGV4YW1wbGVzOiBzdHJpbmdbXTtcbiAgICBwYXJlbnRzOiBzdHJpbmdbXTtcbiAgICByZXF1ZXN0ZXI6IFJlcXVlc3RSZXF1ZXN0ZXI7XG59XG5cbnR5cGUgQ2F0ZWdvcnlBY3Rpb24gPSBSZXF1ZXN0QWN0aW9uICYgeyBjYXRlZ29yeTogc3RyaW5nOyBjYXRlZ29yaXplZFBhZ2VzOiBzdHJpbmdbXTsgcGFyZW50czogc3RyaW5nW107IGNhdGVnb3JpZXNUb1JlbW92ZTogc3RyaW5nW10gfTtcblxudHlwZSBDYXRlZ29yeUFjdGlvbnMgPSBDYXRlZ29yeUFjdGlvbltdO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXRlZ29yaWVzRGlhbG9nIGV4dGVuZHMgSGVscGVyRGlhbG9nIHtcbiAgICBwcm90ZWN0ZWQgcGFyc2VkUmVxdWVzdHM6IENhdGVnb3J5UmVxdWVzdERhdGFbXSA9IFtdO1xuICAgIHByaXZhdGUgYWN0aW9uc1RvVGFrZTogQ2F0ZWdvcnlBY3Rpb25zID0gW107XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgcmVkaXJlY3QgcmVxdWVzdHMgZnJvbSBzZWN0aW9uIHRleHQuXG4gICAgICogQHBhcmFtIHNlY3Rpb25UZXh0IFRoZSBzZWN0aW9uIHRleHQuXG4gICAgICogQHBhcmFtIHNlY3Rpb25IZWFkZXIgVGhlIHNlY3Rpb24gaGVhZGVyLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBwYXJzZVN1YnR5cGVSZXF1ZXN0cyhzZWN0aW9uVGV4dDogc3RyaW5nLCBzZWN0aW9uSGVhZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IHt9IGFzIENhdGVnb3J5UmVxdWVzdERhdGE7XG5cbiAgICAgICAgY29uc3QgZm91bmRDYXRlZ29yeSA9IC86P0NhdGVnb3J5OiguKj8pKF1dfCQpLy5leGVjKHNlY3Rpb25IZWFkZXIpPy5bMV0udHJpbSgpO1xuICAgICAgICBpZiAoIWZvdW5kQ2F0ZWdvcnkpIHJldHVybjtcblxuICAgICAgICBwYXJzZWREYXRhLmNhdGVnb3J5ID0gZm91bmRDYXRlZ29yeS5yZXBsYWNlQWxsKCdfJywgJyAnKTtcblxuICAgICAgICBwYXJzZWREYXRhLmV4YW1wbGVzID0gW1xuICAgICAgICAgICAgLi4uKFxuICAgICAgICAgICAgICAgIC9leGFtcGxlIHBhZ2VzIHdoaWNoIGJlbG9uZyB0byB0aGlzIGNhdGVnb3J5OiguKj8pKHBhcmVudCBjYXRlZ29yeVxcL2NhdGVnb3JpZXM6fFxcblxcW1xcWyhzcGVjaWFsOmNvbnRyaWJ1dGlvbnNcXC98dXNlcjopKS9pcy5leGVjKFxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uVGV4dCxcbiAgICAgICAgICAgICAgICApPy5bMV0gPz8gJydcbiAgICAgICAgICAgICkubWF0Y2hBbGwoL1xcKlxccyooPzpcXFtcXFspPyguKj8pKFxcfHxdXXxcXHMqP1xcbikvZyksXG4gICAgICAgIF1cbiAgICAgICAgICAgIC5tYXAoKG1hdGNoKSA9PiBtYXRjaFsxXS50cmltKCkucmVwbGFjZSgvXjovLCAnJykucmVwbGFjZUFsbCgnXycsICcgJykpXG4gICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgICAgIHBhcnNlZERhdGEucGFyZW50cyA9IFtcbiAgICAgICAgICAgIC4uLigvcGFyZW50IGNhdGVnb3J5XFwvY2F0ZWdvcmllczooLio/KShcXG5cXG58XFxuXFxbXFxbKHNwZWNpYWw6Y29udHJpYnV0aW9uc1xcL3x1c2VyOikpL2lzLmV4ZWMoc2VjdGlvblRleHQpPy5bMV0gPz8gJycpLm1hdGNoQWxsKFxuICAgICAgICAgICAgICAgIC8oPzwhXFx8KSM/Oj9DYXRlZ29yeTooLio/KShcXHx8XV18XFxzKj9cXG4pL2csXG4gICAgICAgICAgICApLFxuICAgICAgICBdXG4gICAgICAgICAgICAubWFwKChtYXRjaCkgPT4gbWF0Y2hbMV0udHJpbSgpLnJlcGxhY2UoL146LywgJycpLnJlcGxhY2VBbGwoJ18nLCAnICcpKVxuICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgICAgICBjb25zdCBmaXJzdFVzZXJJbmRleCA9IHNlY3Rpb25UZXh0LmluZGV4T2YoJ1tbVXNlcjonKTtcbiAgICAgICAgY29uc3QgZmlyc3RVc2VyVGFsa0luZGV4ID0gc2VjdGlvblRleHQuaW5kZXhPZignW1tVc2VyIHRhbGs6Jyk7XG4gICAgICAgIGNvbnN0IGZpcnN0SXBJbmRleCA9IHNlY3Rpb25UZXh0LmluZGV4T2YoJ1tbU3BlY2lhbDpDb250cmlidXRpb25zLycpO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0SW5kZXggPSBNYXRoLm1pbiguLi5bZmlyc3RVc2VySW5kZXgsIGZpcnN0VXNlclRhbGtJbmRleCwgZmlyc3RJcEluZGV4XS5maWx0ZXIoKGluZGV4KSA9PiBpbmRleCAhPT0gLTEpKTtcblxuICAgICAgICBwYXJzZWREYXRhLnJlcXVlc3RlciA9XG4gICAgICAgICAgICBmaXJzdEluZGV4ID09PSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFlcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IGZpcnN0SW5kZXggPT09IGZpcnN0SXBJbmRleFxuICAgICAgICAgICAgICAgICAgPyB7IHR5cGU6ICdpcCcsIG5hbWU6IC9cXFtcXFtTcGVjaWFsOkNvbnRyaWJ1dGlvbnNcXC8oLio/KShcXHx8XV0pLy5leGVjKHNlY3Rpb25UZXh0KSFbMV0udHJpbSgpIH1cbiAgICAgICAgICAgICAgICAgIDogeyB0eXBlOiAndXNlcicsIG5hbWU6IC9cXFtcXFtVc2VyKD86IHRhbGspPzooLio/KShcXHx8XV0pLy5leGVjKHNlY3Rpb25UZXh0KSFbMV0udHJpbSgpIH07XG4gICAgICAgIGlmICghcGFyc2VkRGF0YS5yZXF1ZXN0ZXI/Lm5hbWUpIHBhcnNlZERhdGEucmVxdWVzdGVyID0gbnVsbDtcblxuICAgICAgICB0aGlzLnBhcnNlZFJlcXVlc3RzLnB1c2gocGFyc2VkRGF0YSk7XG5cbiAgICAgICAgdGhpcy5hY3Rpb25zVG9UYWtlLnB1c2goe1xuICAgICAgICAgICAgY2F0ZWdvcnk6IHBhcnNlZERhdGEuY2F0ZWdvcnksXG4gICAgICAgICAgICBjYXRlZ29yaXplZFBhZ2VzOiBwYXJzZWREYXRhLmV4YW1wbGVzLFxuICAgICAgICAgICAgcGFyZW50czogcGFyc2VkRGF0YS5wYXJlbnRzLFxuICAgICAgICAgICAgY2F0ZWdvcmllc1RvUmVtb3ZlOiBwYXJzZWREYXRhLnBhcmVudHMsXG4gICAgICAgICAgICBvcmlnaW5hbFRleHQ6IHsgZnVsbFNlY3Rpb25UZXh0OiBzZWN0aW9uVGV4dCwgc2VjdGlvblRleHQ6IHNlY3Rpb25UZXh0LnJlcGxhY2UoL149PS4qPz09JC9tLCAnJykudHJpbSgpIH0sXG4gICAgICAgICAgICBhY3Rpb246ICdub25lJyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZHMgYSBnaXZlbiBjYXRlZ29yeSByZXF1ZXN0IGludG8gdGhlIGRpYWxvZy5cbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSByZXF1ZXN0IHRvIGxvYWQuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGxvYWRTdWJ0eXBlRWxlbWVudHMoaW5kZXg6IG51bWJlcikge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5wYXJzZWRSZXF1ZXN0c1tpbmRleF07XG5cbiAgICAgICAgY29uc3QgZGV0YWlsc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZXRhaWxzJyk7XG4gICAgICAgIGRldGFpbHNFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FmY3JjLWhlbHBlci1yZXF1ZXN0Jyk7XG4gICAgICAgIGRldGFpbHNFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZVNpemUoKSwgMCkpO1xuXG4gICAgICAgIGNvbnN0IHN1bW1hcnlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3VtbWFyeScpO1xuICAgICAgICBzdW1tYXJ5RWxlbWVudC5pbm5lckhUTUwgPSBgPGI+Q2F0ZWdvcnk6JHtyZXF1ZXN0LmNhdGVnb3J5fTwvYj5gO1xuICAgICAgICBkZXRhaWxzRWxlbWVudC5hcHBlbmQoc3VtbWFyeUVsZW1lbnQpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RJbmZvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICByZXF1ZXN0SW5mb0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWZjcmMtaGVscGVyLXJlcXVlc3QtaW5mbycpO1xuXG4gICAgICAgIGNvbnN0IG5vbmVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBub25lRWxlbWVudC5zdHlsZS5jb2xvciA9ICdkaW1ncmF5JztcbiAgICAgICAgbm9uZUVsZW1lbnQudGV4dENvbnRlbnQgPSAnTm9uZSc7XG5cbiAgICAgICAgY29uc3QgdW5rbm93bkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHVua25vd25FbGVtZW50LnN0eWxlLmNvbG9yID0gJ2RpbWdyYXknO1xuICAgICAgICB1bmtub3duRWxlbWVudC50ZXh0Q29udGVudCA9ICdVbmtub3duJztcblxuICAgICAgICBjb25zdCBleGFtcGxlc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IGV4YW1wbGVzTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJyk7XG4gICAgICAgIGV4YW1wbGVzTGFiZWwudGV4dENvbnRlbnQgPSAnRXhhbXBsZXM6ICc7XG4gICAgICAgIGV4YW1wbGVzRGl2LmFwcGVuZChleGFtcGxlc0xhYmVsKTtcblxuICAgICAgICBpZiAocmVxdWVzdC5leGFtcGxlcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIGV4YW1wbGVdIG9mIHJlcXVlc3QuZXhhbXBsZXMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgbGlua0VsZW1lbnQudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICAgICAgICAgICAgbGlua0VsZW1lbnQuaHJlZiA9IG13LnV0aWwuZ2V0VXJsKGV4YW1wbGUpO1xuICAgICAgICAgICAgICAgIGxpbmtFbGVtZW50LnRleHRDb250ZW50ID0gZXhhbXBsZTtcblxuICAgICAgICAgICAgICAgIGV4YW1wbGVzRGl2LmFwcGVuZChsaW5rRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IHJlcXVlc3QuZXhhbXBsZXMubGVuZ3RoIC0gMSkgZXhhbXBsZXNEaXYuYXBwZW5kKCcsICcpO1xuICAgICAgICAgICAgfVxuICAgICAgICBlbHNlIGV4YW1wbGVzRGl2LmFwcGVuZChub25lRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgICAgIHJlcXVlc3RJbmZvRWxlbWVudC5hcHBlbmQoZXhhbXBsZXNEaXYpO1xuXG4gICAgICAgIGNvbnN0IHBhcmVudHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCBwYXJlbnRzTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJyk7XG4gICAgICAgIHBhcmVudHNMYWJlbC50ZXh0Q29udGVudCA9ICdQYXJlbnRzOiAnO1xuICAgICAgICBwYXJlbnRzRGl2LmFwcGVuZChwYXJlbnRzTGFiZWwpO1xuXG4gICAgICAgIGlmIChyZXF1ZXN0LnBhcmVudHMubGVuZ3RoID4gMClcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBwYXJlbnRdIG9mIHJlcXVlc3QucGFyZW50cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICBsaW5rRWxlbWVudC50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgICAgICAgICBsaW5rRWxlbWVudC5ocmVmID0gbXcudXRpbC5nZXRVcmwoYENhdGVnb3J5OiR7cGFyZW50fWApO1xuICAgICAgICAgICAgICAgIGxpbmtFbGVtZW50LnRleHRDb250ZW50ID0gcGFyZW50O1xuXG4gICAgICAgICAgICAgICAgcGFyZW50c0Rpdi5hcHBlbmQobGlua0VsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSByZXF1ZXN0LnBhcmVudHMubGVuZ3RoIC0gMSkgcGFyZW50c0Rpdi5hcHBlbmQoJywgJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIGVsc2UgcGFyZW50c0Rpdi5hcHBlbmQobm9uZUVsZW1lbnQuY2xvbmVOb2RlKHRydWUpKTtcblxuICAgICAgICByZXF1ZXN0SW5mb0VsZW1lbnQuYXBwZW5kKHBhcmVudHNEaXYpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RlckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICByZXF1ZXN0ZXJMYWJlbC50ZXh0Q29udGVudCA9ICdSZXF1ZXN0ZXI6ICc7XG4gICAgICAgIHJlcXVlc3RlckRpdi5hcHBlbmQocmVxdWVzdGVyTGFiZWwpO1xuXG4gICAgICAgIGlmIChyZXF1ZXN0LnJlcXVlc3Rlcikge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVyTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIHJlcXVlc3RlckxpbmsudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICAgICAgICByZXF1ZXN0ZXJMaW5rLmhyZWYgPVxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVxdWVzdGVyLnR5cGUgPT09ICd1c2VyJ1xuICAgICAgICAgICAgICAgICAgICA/IG13LnV0aWwuZ2V0VXJsKGBVc2VyOiR7cmVxdWVzdC5yZXF1ZXN0ZXIubmFtZX1gKVxuICAgICAgICAgICAgICAgICAgICA6IG13LnV0aWwuZ2V0VXJsKGBTcGVjaWFsOkNvbnRyaWJ1dGlvbnMvJHtyZXF1ZXN0LnJlcXVlc3Rlci5uYW1lfWApO1xuICAgICAgICAgICAgcmVxdWVzdGVyTGluay50ZXh0Q29udGVudCA9IHJlcXVlc3QucmVxdWVzdGVyLm5hbWU7XG4gICAgICAgICAgICByZXF1ZXN0ZXJEaXYuYXBwZW5kKHJlcXVlc3RlckxpbmspO1xuICAgICAgICB9IGVsc2UgcmVxdWVzdGVyRGl2LmFwcGVuZCh1bmtub3duRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgICAgIHJlcXVlc3RJbmZvRWxlbWVudC5hcHBlbmQocmVxdWVzdGVyRGl2KTtcblxuICAgICAgICBkZXRhaWxzRWxlbWVudC5hcHBlbmQocmVxdWVzdEluZm9FbGVtZW50KTtcblxuICAgICAgICBkZXRhaWxzRWxlbWVudC5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKSk7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdFJlc3BvbmRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgcmVxdWVzdFJlc3BvbmRlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWZjcmMtaGVscGVyLXJlcXVlc3QtcmVzcG9uZGVyJyk7XG5cbiAgICAgICAgY29uc3QgYWN0aW9uUmFkaW9JbnB1dCA9IG5ldyBPTy51aS5SYWRpb1NlbGVjdFdpZGdldCh7XG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2FmY3JjLWhlbHBlci1hY3Rpb24tcmFkaW8nXSxcbiAgICAgICAgICAgIGl0ZW1zOiBbJ0FjY2VwdCcsICdEZW55JywgJ0NvbW1lbnQnLCAnQ2xvc2UnLCAnTm9uZSddLm1hcCgobGFiZWwpID0+IG5ldyBPTy51aS5SYWRpb09wdGlvbldpZGdldCh7IGRhdGE6IGxhYmVsLCBsYWJlbCB9KSksXG4gICAgICAgIH0pO1xuICAgICAgICBhY3Rpb25SYWRpb0lucHV0LnNlbGVjdEl0ZW1CeUxhYmVsKCdOb25lJyk7XG4gICAgICAgIGFjdGlvblJhZGlvSW5wdXQub24oJ2Nob29zZScsICgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVTaXplKCksIDApO1xuXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgKGFjdGlvblJhZGlvSW5wdXQuZmluZFNlbGVjdGVkSXRlbSgpIGFzIE9PLnVpLlJhZGlvT3B0aW9uV2lkZ2V0KS5nZXREYXRhKCkgYXMgc3RyaW5nXG4gICAgICAgICAgICApLnRvTG93ZXJDYXNlKCkgYXMgUmVxdWVzdEFjdGlvblR5cGU7XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1RvVGFrZVtpbmRleF0uYWN0aW9uID0gb3B0aW9uO1xuXG4gICAgICAgICAgICBpZiAoWydjb21tZW50JywgJ2Nsb3NlJ10uaW5jbHVkZXMob3B0aW9uKSkge1xuICAgICAgICAgICAgICAgIGNvbW1lbnRJbnB1dExheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50ID0gY29tbWVudElucHV0LmdldFZhbHVlKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb21tZW50KSB0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdLmNvbW1lbnQgPSBjb21tZW50O1xuICAgICAgICAgICAgICAgIGVsc2UgZGVsZXRlIHRoaXMuYWN0aW9uc1RvVGFrZVtpbmRleF0uY29tbWVudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29tbWVudElucHV0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdLmNvbW1lbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVxdWVzdENvbG9yKGRldGFpbHNFbGVtZW50LCBpbmRleCk7XG5cbiAgICAgICAgICAgIHBhZ2VTZWxlY3RMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuICAgICAgICAgICAgY2F0ZWdvcnlSZW1vdmVTZWxlY3RMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuICAgICAgICAgICAgcGFyZW50Q2F0ZWdvcnlTZWxlY3RMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuICAgICAgICAgICAgZGVueVJlYXNvbkxheW91dC4kZWxlbWVudC5oaWRlKCk7XG4gICAgICAgICAgICBjbG9zaW5nUmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgc3dpdGNoIChvcHRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhY2NlcHQnOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTZWxlY3RMYXlvdXQuJGVsZW1lbnQuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeVJlbW92ZVNlbGVjdExheW91dC4kZWxlbWVudC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudENhdGVnb3J5U2VsZWN0TGF5b3V0LiRlbGVtZW50LnNob3coKTtcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVueSc6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVueVJlYXNvbkxheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Nsb3NlJzoge1xuICAgICAgICAgICAgICAgICAgICBjbG9zaW5nUmVhc29uTGF5b3V0LiRlbGVtZW50LnNob3coKTtcblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHBhZ2VTZWxlY3RJbnB1dCA9IG5ldyBQYWdlSW5wdXRXaWRnZXQoeyBwbGFjZWhvbGRlcjogJ0FkZCBwYWdlcyBoZXJlJyB9KTtcbiAgICAgICAgcGFnZVNlbGVjdElucHV0Lm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBwYWdlU2VsZWN0SW5wdXQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKGBeKGh0dHBzPzopPy97Mn0/JHttdy5jb25maWcuZ2V0KCd3Z1NlcnZlcicpLnJlcGxhY2UoL15cXC97Mn0vLCAnJyl9L3dpa2kvYCksICcnKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXjovLCAnJyk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSBwYWdlU2VsZWN0SW5wdXQuc2V0VmFsdWUodmFsdWVbMF0udG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpLnJlcGxhY2VBbGwoJ18nLCAnICcpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHBhZ2VTZWxlY3RJbnB1dC5vbignc2hvd2luZy12YWx1ZXMnLCAocGFnZXM6IHsgZGF0YTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH1bXSkgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSBwYWdlU2VsZWN0LmFkZEFsbG93ZWRWYWx1ZShwYWdlLmRhdGEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBwYWdlU2VsZWN0ID0gbmV3IE9PLnVpLlRhZ011bHRpc2VsZWN0V2lkZ2V0KHtcbiAgICAgICAgICAgIGFsbG93UmVvcmRlcmluZzogZmFsc2UsXG4gICAgICAgICAgICBpbnB1dFBvc2l0aW9uOiAnb3V0bGluZScsXG4gICAgICAgICAgICBpbnB1dFdpZGdldDogcGFnZVNlbGVjdElucHV0LFxuICAgICAgICB9KTtcbiAgICAgICAgcGFnZVNlbGVjdC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRUYWdzID0gcGFnZVNlbGVjdC5nZXRWYWx1ZSgpIGFzIHN0cmluZ1tdO1xuXG4gICAgICAgICAgICBjb25zdCBzb3J0ZWRUYWdzID0gc2VsZWN0ZWRUYWdzLnNvcnQoKGEsIGIpID0+IGEudG9Mb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKGIudG9Mb3dlckNhc2UoKSkpO1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUYWdzLmpvaW4oJzsnKSAhPT0gc29ydGVkVGFncy5qb2luKCc7JykpIHBhZ2VTZWxlY3Quc2V0VmFsdWUoc29ydGVkVGFncyk7XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1RvVGFrZVtpbmRleF0uY2F0ZWdvcml6ZWRQYWdlcyA9IHNvcnRlZFRhZ3M7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHsgY2F0ZWdvcml6ZWRQYWdlcyB9ID0gdGhpcy5hY3Rpb25zVG9UYWtlW2luZGV4XTtcblxuICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgY2F0ZWdvcml6ZWRQYWdlcykgcGFnZVNlbGVjdC5hZGRBbGxvd2VkVmFsdWUocGFnZSk7XG4gICAgICAgIHBhZ2VTZWxlY3Quc2V0VmFsdWUoY2F0ZWdvcml6ZWRQYWdlcyk7XG5cbiAgICAgICAgY29uc3QgcGFnZVNlbGVjdExheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dChwYWdlU2VsZWN0LCB7IGFsaWduOiAnaW5saW5lJywgbGFiZWw6ICdQYWdlcyB0byBjYXRlZ29yaXplOicgfSk7XG4gICAgICAgIHBhZ2VTZWxlY3RMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5UmVtb3ZlU2VsZWN0SW5wdXQgPSBuZXcgQ2F0ZWdvcnlJbnB1dFdpZGdldCh7IHBsYWNlaG9sZGVyOiAnQWRkIGNhdGVnb3JpZXMgaGVyZScgfSk7XG4gICAgICAgIGNhdGVnb3J5UmVtb3ZlU2VsZWN0SW5wdXQub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGNhdGVnb3J5UmVtb3ZlU2VsZWN0SW5wdXQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKGBeKGh0dHBzPzopPy97Mn0/JHttdy5jb25maWcuZ2V0KCd3Z1NlcnZlcicpLnJlcGxhY2UoL15cXC97Mn0vLCAnJyl9L3dpa2kvYCksICcnKTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXkNhdGVnb3J5Oi8sICcnKTtcblxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDApIGNhdGVnb3J5UmVtb3ZlU2VsZWN0SW5wdXQuc2V0VmFsdWUodmFsdWVbMF0udG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpLnJlcGxhY2VBbGwoJ18nLCAnICcpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNhdGVnb3J5UmVtb3ZlU2VsZWN0SW5wdXQub24oJ3Nob3dpbmctdmFsdWVzJywgKHBhZ2VzOiB7IGRhdGE6IHN0cmluZzsgbGFiZWw6IHN0cmluZyB9W10pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBwYWdlcykgcGFyZW50Q2F0ZWdvcnlTZWxlY3QuYWRkQWxsb3dlZFZhbHVlKHBhZ2UuZGF0YSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNhdGVnb3J5UmVtb3ZlU2VsZWN0ID0gbmV3IE9PLnVpLlRhZ011bHRpc2VsZWN0V2lkZ2V0KHtcbiAgICAgICAgICAgIGFsbG93UmVvcmRlcmluZzogZmFsc2UsXG4gICAgICAgICAgICBpbnB1dFBvc2l0aW9uOiAnb3V0bGluZScsXG4gICAgICAgICAgICBpbnB1dFdpZGdldDogY2F0ZWdvcnlSZW1vdmVTZWxlY3RJbnB1dCxcbiAgICAgICAgfSk7XG4gICAgICAgIGNhdGVnb3J5UmVtb3ZlU2VsZWN0Lm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFRhZ3MgPSBjYXRlZ29yeVJlbW92ZVNlbGVjdC5nZXRWYWx1ZSgpIGFzIHN0cmluZ1tdO1xuXG4gICAgICAgICAgICBjb25zdCBzb3J0ZWRUYWdzID0gc2VsZWN0ZWRUYWdzLnNvcnQoKGEsIGIpID0+IGEudG9Mb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKGIudG9Mb3dlckNhc2UoKSkpO1xuXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRUYWdzLmpvaW4oJzsnKSAhPT0gc29ydGVkVGFncy5qb2luKCc7JykpIGNhdGVnb3J5UmVtb3ZlU2VsZWN0LnNldFZhbHVlKHNvcnRlZFRhZ3MpO1xuXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdLmNhdGVnb3JpZXNUb1JlbW92ZSA9IHNvcnRlZFRhZ3M7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHsgcGFyZW50czogcGFyZW50Q2F0ZWdvcmllcyB9ID0gdGhpcy5hY3Rpb25zVG9UYWtlW2luZGV4XTtcblxuICAgICAgICBmb3IgKGNvbnN0IHBhcmVudCBvZiBwYXJlbnRDYXRlZ29yaWVzKSBjYXRlZ29yeVJlbW92ZVNlbGVjdC5hZGRBbGxvd2VkVmFsdWUocGFyZW50KTtcbiAgICAgICAgY2F0ZWdvcnlSZW1vdmVTZWxlY3Quc2V0VmFsdWUocGFyZW50Q2F0ZWdvcmllcyk7XG5cbiAgICAgICAgY29uc3QgY2F0ZWdvcnlSZW1vdmVTZWxlY3RMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoY2F0ZWdvcnlSZW1vdmVTZWxlY3QsIHtcbiAgICAgICAgICAgIGFsaWduOiAnaW5saW5lJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ2F0ZWdvcmllcyB0byByZW1vdmUgZnJvbSBwYWdlcyB0byBjYXRlZ29yaXplOicsXG4gICAgICAgIH0pO1xuICAgICAgICBjYXRlZ29yeVJlbW92ZVNlbGVjdExheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgY29uc3QgcGFyZW50Q2F0ZWdvcnlTZWxlY3RJbnB1dCA9IG5ldyBDYXRlZ29yeUlucHV0V2lkZ2V0KHsgcGxhY2Vob2xkZXI6ICdBZGQgY2F0ZWdvcmllcyBoZXJlJyB9KTtcbiAgICAgICAgcGFyZW50Q2F0ZWdvcnlTZWxlY3RJbnB1dC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gcGFyZW50Q2F0ZWdvcnlTZWxlY3RJbnB1dC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoYF4oaHR0cHM/Oik/L3syfT8ke213LmNvbmZpZy5nZXQoJ3dnU2VydmVyJykucmVwbGFjZSgvXlxcL3syfS8sICcnKX0vd2lraS9gKSwgJycpO1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eQ2F0ZWdvcnk6LywgJycpO1xuXG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCkgcGFyZW50Q2F0ZWdvcnlTZWxlY3RJbnB1dC5zZXRWYWx1ZSh2YWx1ZVswXS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSkucmVwbGFjZUFsbCgnXycsICcgJykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcGFyZW50Q2F0ZWdvcnlTZWxlY3RJbnB1dC5vbignc2hvd2luZy12YWx1ZXMnLCAocGFnZXM6IHsgZGF0YTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH1bXSkgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHBhZ2VzKSBwYXJlbnRDYXRlZ29yeVNlbGVjdC5hZGRBbGxvd2VkVmFsdWUocGFnZS5kYXRhKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcGFyZW50Q2F0ZWdvcnlTZWxlY3QgPSBuZXcgT08udWkuVGFnTXVsdGlzZWxlY3RXaWRnZXQoe1xuICAgICAgICAgICAgYWxsb3dSZW9yZGVyaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGlucHV0UG9zaXRpb246ICdvdXRsaW5lJyxcbiAgICAgICAgICAgIGlucHV0V2lkZ2V0OiBwYXJlbnRDYXRlZ29yeVNlbGVjdElucHV0LFxuICAgICAgICB9KTtcbiAgICAgICAgcGFyZW50Q2F0ZWdvcnlTZWxlY3Qub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVGFncyA9IHBhcmVudENhdGVnb3J5U2VsZWN0LmdldFZhbHVlKCkgYXMgc3RyaW5nW107XG5cbiAgICAgICAgICAgIGNvbnN0IHNvcnRlZFRhZ3MgPSBzZWxlY3RlZFRhZ3Muc29ydCgoYSwgYikgPT4gYS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoYi50b0xvd2VyQ2FzZSgpKSk7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZFRhZ3Muam9pbignOycpICE9PSBzb3J0ZWRUYWdzLmpvaW4oJzsnKSkgcGFyZW50Q2F0ZWdvcnlTZWxlY3Quc2V0VmFsdWUoc29ydGVkVGFncyk7XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc1RvVGFrZVtpbmRleF0ucGFyZW50cyA9IHNvcnRlZFRhZ3M7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAoY29uc3QgcGFyZW50Q2F0ZWdvcnkgb2YgcGFyZW50Q2F0ZWdvcmllcykgcGFyZW50Q2F0ZWdvcnlTZWxlY3QuYWRkQWxsb3dlZFZhbHVlKHBhcmVudENhdGVnb3J5KTtcbiAgICAgICAgcGFyZW50Q2F0ZWdvcnlTZWxlY3Quc2V0VmFsdWUocGFyZW50Q2F0ZWdvcmllcyk7XG5cbiAgICAgICAgY29uc3QgcGFyZW50Q2F0ZWdvcnlTZWxlY3RMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQocGFyZW50Q2F0ZWdvcnlTZWxlY3QsIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogJ1BhcmVudCBjYXRlZ29yaWVzOicgfSk7XG4gICAgICAgIHBhcmVudENhdGVnb3J5U2VsZWN0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICBjb25zdCBkZW55UmVhc29uID0gbmV3IE9PLnVpLkNvbWJvQm94SW5wdXRXaWRnZXQoe1xuICAgICAgICAgICAgY2xhc3NlczogWydhZmNyYy1jbG9zaW5nLXJlYXNvbi1pbnB1dCddLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdhdXRvZmlsbDp1bmxpa2VseScsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgWydleGlzdHMnLCAnZXhpc3RpbmcgY2F0ZWdvcmllcyddLFxuICAgICAgICAgICAgICAgIFsnZW1wdHknLCAnZW1wdHkgc3VibWlzc2lvbnMnXSxcbiAgICAgICAgICAgICAgICBbJ3VubGlrZWx5JywgJ2NhdGVnb3JpZXMgdGhhdCBhcmUgdW5saWtlbHkgdG8gaGF2ZSBlbm91Z2ggcGFnZXMnXSxcbiAgICAgICAgICAgICAgICBbJ25vdGNhdGVnb3J5JywgJ3BhZ2UgY3JlYXRpb24gcmVxdWVzdHMnXSxcbiAgICAgICAgICAgICAgICBbJ25vdGVuZ2xpc2gnLCAncmVxdWVzdHMgbm90IGluIEVuZ2xpc2gnXSxcbiAgICAgICAgICAgIF0ubWFwKChbdmFsdWUsIGxhYmVsXSkgPT4gKHsgZGF0YTogYGF1dG9maWxsOiR7dmFsdWV9YCwgbGFiZWw6IGBBdXRvZmlsbGVkIHRleHQgZm9yICR7bGFiZWx9YCB9KSksXG4gICAgICAgIH0pO1xuICAgICAgICBkZW55UmVhc29uLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdLmRlbnlSZWFzb24gPSBkZW55UmVhc29uLmdldFZhbHVlKCkgfHwgJ2F1dG9maWxsOnVubGlrZWx5JztcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbnlSZWFzb24uc2V0VmFsdWUoJ2F1dG9maWxsOnVubGlrZWx5Jyk7XG4gICAgICAgIGRlbnlSZWFzb24uZ2V0TWVudSgpLnNlbGVjdEl0ZW1CeURhdGEoJ2F1dG9maWxsOnVubGlrZWx5Jyk7XG5cbiAgICAgICAgY29uc3QgZGVueVJlYXNvbkxheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dChkZW55UmVhc29uLCB7XG4gICAgICAgICAgICBhbGlnbjogJ2lubGluZScsXG4gICAgICAgICAgICBsYWJlbDogJ0RlbnkgcmVhc29uOicsXG4gICAgICAgICAgICBoZWxwOiAnU3VwcG9ydHMgYXV0b21hdGljIHJlYXNvbmluZywgY3VzdG9tIHJlYXNvbmluZywgb3IgYSBjb21iaW5hdGlvbiBvZiB0aGUgdHdvIHdpdGggXCJhdXRvZmlsbDpSRUFTT04sIENVU1RPTVwiIGZvcm1hdCcsXG4gICAgICAgIH0pO1xuICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICBjb25zdCBjbG9zaW5nUmVhc29uID0gbmV3IE9PLnVpLkRyb3Bkb3duV2lkZ2V0KHtcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnYWZjcmMtY2xvc2luZy1yZWFzb24taW5wdXQnXSxcbiAgICAgICAgICAgIG1lbnU6IHtcbiAgICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgICAgICBbJ05vIHJlc3BvbnNlJywgJ3InXSxcbiAgICAgICAgICAgICAgICAgICAgWydTdWNjZWVkZWQnLCAncyddLFxuICAgICAgICAgICAgICAgICAgICBbJ1dpdGhkcmF3bicsICd3J10sXG4gICAgICAgICAgICAgICAgXS5tYXAoKFt0aXRsZSwgaWRdKSA9PiBuZXcgT08udWkuTWVudU9wdGlvbldpZGdldCh7IGRhdGE6IGlkLCBsYWJlbDogdGl0bGUgfSkpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNsb3NpbmdSZWFzb24uZ2V0TWVudSgpLm9uKCdjaG9vc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGNsb3NpbmdSZWFzb24uZ2V0TWVudSgpLmZpbmRTZWxlY3RlZEl0ZW0oKSBhcyBPTy51aS5NZW51T3B0aW9uV2lkZ2V0O1xuXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdLmNsb3NpbmdSZWFzb24gPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogc2VsZWN0ZWQuZ2V0TGFiZWwoKSBhcyBzdHJpbmcsXG4gICAgICAgICAgICAgICAgaWQ6IHNlbGVjdGVkLmdldERhdGEoKSBhcyBzdHJpbmcsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlcXVlc3RDb2xvcihkZXRhaWxzRWxlbWVudCwgaW5kZXgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2xvc2luZ1JlYXNvbi5nZXRNZW51KCkuc2VsZWN0SXRlbUJ5RGF0YSgncicpO1xuICAgICAgICB0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdLmNsb3NpbmdSZWFzb24gPSB7IG5hbWU6ICdObyByZXNwb25zZScsIGlkOiAncicgfTtcblxuICAgICAgICBjb25zdCBjbG9zaW5nUmVhc29uTGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KGNsb3NpbmdSZWFzb24sIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogJ0Nsb3NpbmcgcmVhc29uOicgfSk7XG4gICAgICAgIGNsb3NpbmdSZWFzb25MYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuXG4gICAgICAgIGNvbnN0IGNvbW1lbnRJbnB1dCA9IG5ldyBPTy51aS5UZXh0SW5wdXRXaWRnZXQoKTtcbiAgICAgICAgY29tbWVudElucHV0Lm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb21tZW50ID0gY29tbWVudElucHV0LmdldFZhbHVlKCkudHJpbSgpO1xuXG4gICAgICAgICAgICBpZiAoY29tbWVudCkgdGhpcy5hY3Rpb25zVG9UYWtlW2luZGV4XS5jb21tZW50ID0gY29tbWVudDtcbiAgICAgICAgICAgIGVsc2UgZGVsZXRlIHRoaXMuYWN0aW9uc1RvVGFrZVtpbmRleF0uY29tbWVudDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY29tbWVudElucHV0TGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KGNvbW1lbnRJbnB1dCwge1xuICAgICAgICAgICAgY2xhc3NlczogWydhZmNyYy1jb21tZW50LWlucHV0J10sXG4gICAgICAgICAgICBhbGlnbjogJ2lubGluZScsXG4gICAgICAgICAgICBsYWJlbDogJ0NvbW1lbnQ6JyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbW1lbnRJbnB1dExheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgcmVxdWVzdFJlc3BvbmRlckVsZW1lbnQuYXBwZW5kKFxuICAgICAgICAgICAgYWN0aW9uUmFkaW9JbnB1dC4kZWxlbWVudFswXSxcbiAgICAgICAgICAgIHBhZ2VTZWxlY3RMYXlvdXQuJGVsZW1lbnRbMF0sXG4gICAgICAgICAgICBjYXRlZ29yeVJlbW92ZVNlbGVjdExheW91dC4kZWxlbWVudFswXSxcbiAgICAgICAgICAgIHBhcmVudENhdGVnb3J5U2VsZWN0TGF5b3V0LiRlbGVtZW50WzBdLFxuICAgICAgICAgICAgZGVueVJlYXNvbkxheW91dC4kZWxlbWVudFswXSxcbiAgICAgICAgICAgIGNsb3NpbmdSZWFzb25MYXlvdXQuJGVsZW1lbnRbMF0sXG4gICAgICAgICAgICBjb21tZW50SW5wdXRMYXlvdXQuJGVsZW1lbnRbMF0sXG4gICAgICAgICk7XG5cbiAgICAgICAgZGV0YWlsc0VsZW1lbnQuYXBwZW5kKHJlcXVlc3RSZXNwb25kZXJFbGVtZW50KTtcblxuICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIHsgJGJvZHk6IEpRdWVyeSB9KS4kYm9keS5hcHBlbmQoZGV0YWlsc0VsZW1lbnQpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNvbG9yIG9mIGEgZGV0YWlscyBlbGVtZW50IGJhc2VkIG9uIHRoZSBoYW5kbGluZyBvZiB0aGUgcmVxdWVzdHMgaW5zaWRlLlxuICAgICAqIEBwYXJhbSBkZXRhaWxzRWxlbWVudCBUaGUgZGV0YWlscyBlbGVtZW50IHRvIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSByZWRpcmVjdCB0YXJnZXQuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHVwZGF0ZVJlcXVlc3RDb2xvcihkZXRhaWxzRWxlbWVudDogSFRNTERldGFpbHNFbGVtZW50LCBpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHsgYWN0aW9uIH0gPSB0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdO1xuXG4gICAgICAgIGxldCBiYWNrZ3JvdW5kQ29sb3IgPSAnJztcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItc3dpdGNoXG4gICAgICAgIGlmIChhY3Rpb24gPT09ICdhY2NlcHQnKSBiYWNrZ3JvdW5kQ29sb3IgPSAnI2EwZmZhMCc7XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2RlbnknKSBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmY2VjZSc7XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ2Nsb3NlJylcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGlvbnNUb1Rha2VbaW5kZXhdLmNsb3NpbmdSZWFzb24/LmlkID09PSAncicpIGJhY2tncm91bmRDb2xvciA9ICcjZmZjZWNlJztcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aW9uc1RvVGFrZVtpbmRleF0uY2xvc2luZ1JlYXNvbj8uaWQgPT09ICdzJykgYmFja2dyb3VuZENvbG9yID0gJyM5MGMwOTAnO1xuICAgICAgICAgICAgZWxzZSBiYWNrZ3JvdW5kQ29sb3IgPSAnI2I4YjhiOCc7XG5cbiAgICAgICAgZGV0YWlsc0VsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGFjdGlvbnMgb24gYSBnaXZlbiBjYXRlZ29yeSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSBzaG93QWN0aW9uc0RpYWxvZyBUaGUgZGlhbG9nIHRvIGFkZCBtZXNzYWdlcyB0by5cbiAgICAgKiBAcGFyYW0gY291bnRzIFRoZSBjb3VudCBvYmplY3QgdXNlZCB0byB0cmFjayByZXF1ZXN0cyBmb3IgdGhlIGVkaXQgc3VtbWFyeS5cbiAgICAgKiBAcGFyYW0gbmV3UGFnZVRleHQgVGhlIG5ldyBwYWdlIHRleHQuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGFzeW5jIHBlcmZvcm1TdWJ0eXBlQWN0aW9ucyhzaG93QWN0aW9uc0RpYWxvZzogQWN0aW9uc0RpYWxvZywgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+LCBuZXdQYWdlVGV4dDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGFueVJlcXVlc3RIYW5kbGVkID0gdGhpcy5hY3Rpb25zVG9UYWtlLnNvbWUoKGFjdGlvbkRhdGEpID0+IGFjdGlvbkRhdGEuYWN0aW9uICE9PSAnbm9uZScpO1xuXG4gICAgICAgIGlmIChhbnlSZXF1ZXN0SGFuZGxlZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBhY3Rpb25EYXRhIG9mIHRoaXMuYWN0aW9uc1RvVGFrZSkge1xuICAgICAgICAgICAgICAgIGxldCBzZWN0aW9uRGF0YSA9IHsgcGFnZVRleHQ6IG5ld1BhZ2VUZXh0LCAuLi5hY3Rpb25EYXRhLm9yaWdpbmFsVGV4dCB9O1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChhY3Rpb25EYXRhLmFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhY2NlcHQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uRGF0YSA9IHRoaXMubW9kaWZ5U2VjdGlvbkRhdGEoc2VjdGlvbkRhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVwZW5kOiAne3tBZkMtY3xhfX0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogJyoge3tzdWJzdDpBZkMgY2F0ZWdvcnl9fSB+fn5+XFxue3tBZkMtY3xifX0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQWNjZXB0ZWRDYXRlZ29yeShhY3Rpb25EYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmFjY2VwdGVkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uRGF0YSA9IHRoaXMubW9kaWZ5U2VjdGlvbkRhdGEoc2VjdGlvbkRhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVwZW5kOiAne3tBZkMtY3xkfX0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogYCogJHt0aGlzLmZvcm1hdERlbmllZFJlYXNvbihhY3Rpb25EYXRhLmRlbnlSZWFzb24hKX0gfn5+flxcbnt7QWZDLWN8Yn19YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudHMuZGVuaWVkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uRGF0YS5jb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkRhdGEgPSB0aGlzLm1vZGlmeVNlY3Rpb25EYXRhKHNlY3Rpb25EYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogYCoge3tBZkMgY29tbWVudHwxPSR7YWN0aW9uRGF0YS5jb21tZW50fX19IH5+fn5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzWydjb21tZW50ZWQgb24nXSsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBUaGUgcmVxdWVzdCB0byBjcmVhdGUgXCIke2FjdGlvbkRhdGEuY2F0ZWdvcnl9XCIgd2FzIG1hcmtlZCB0byBiZSBjb21tZW50ZWQgb24sIGJ1dCBubyBjb21tZW50IHdhcyBwcm92aWRlZCBzbyBpdCB3aWxsIGJlIHNraXBwZWQuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nsb3NlJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkRhdGEgPSB0aGlzLm1vZGlmeVNlY3Rpb25EYXRhKHNlY3Rpb25EYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlcGVuZDogYHt7QWZDLWN8JHthY3Rpb25EYXRhLmNsb3NpbmdSZWFzb24hLmlkfX19YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmQ6IChhY3Rpb25EYXRhLmNvbW1lbnQgPyBgKiB7e0FmQyBjb21tZW50fDE9JHthY3Rpb25EYXRhLmNvbW1lbnR9fX0gfn5+fmAgOiAnJykgKyAnXFxue3tBZkMtY3xifX0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cy5jbG9zZWQrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBuZXdQYWdlVGV4dCA9IHNlY3Rpb25EYXRhLnBhZ2VUZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5iZWZvcmVUZXh0ICsgdGhpcy5wYWdlQ29udGVudCA9PT0gbmV3UGFnZVRleHQpIHtcbiAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeSgnTm8gcmVxdWVzdHMgaGF2ZSBiZWVuIGhhbmRsZWQgKHBhZ2UgY29udGVudCBpZGVudGljYWwpIScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBtYXBwZWRDb3VudHMgPSBPYmplY3QuZW50cmllcyhjb3VudHMpXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoWywgY291bnRdKSA9PiBjb3VudCA+IDApXG4gICAgICAgICAgICAgICAgLm1hcCgoW2FjdGlvbiwgY291bnRdKSA9PiBgJHthY3Rpb259ICR7Y291bnR9YClcbiAgICAgICAgICAgICAgICAuam9pbignLCAnKTtcblxuICAgICAgICAgICAgdGhpcy5lZGl0c0NyZWF0aW9uc1RvTWFrZS5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZWRpdCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMucGFnZVRpdGxlLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbmV3UGFnZVRleHQsXG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6IGBIYW5kbGluZyBBZkMgY2F0ZWdvcnkgcmVxdWVzdHMgKCR7bWFwcGVkQ291bnRzfSkke3RoaXMuc2NyaXB0TWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWFrZUFsbEVkaXRzQ3JlYXRpb25zKHNob3dBY3Rpb25zRGlhbG9nKTtcblxuICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoJ0FsbCBjaGFuZ2VzIG1hZGUsIGNsaWNrIGJlbG93IHRvIHJlbG9hZCEnLCAnc3VjY2VzcycpO1xuXG4gICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5zaG93UmVsb2FkKCk7XG4gICAgICAgIH0gZWxzZSBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeSgnTm8gcmVxdWVzdHMgaGF2ZSBiZWVuIGhhbmRsZWQhJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgY3JlYXRpb24gb2YgcGFnZXMgcmVsYXRlZCB0byBhbiBhY2NlcHRlZCBjYXRlZ29yeSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIG9mIHRoZSByZXF1ZXN0ZWQgY2F0ZWdvcnkuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGhhbmRsZUFjY2VwdGVkQ2F0ZWdvcnkoZGF0YTogQ2F0ZWdvcnlBY3Rpb24pIHtcbiAgICAgICAgdGhpcy5lZGl0c0NyZWF0aW9uc1RvTWFrZS5wdXNoKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgIGlzUmVkaXJlY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBgQ2F0ZWdvcnk6JHtkYXRhLmNhdGVnb3J5fWAsXG4gICAgICAgICAgICAgICAgdGV4dDogZGF0YS5wYXJlbnRzLm1hcCgocGFyZW50KSA9PiBgW1tDYXRlZ29yeToke3BhcmVudH1dXWApLmpvaW4oJ1xcbicpLFxuICAgICAgICAgICAgICAgIHN1bW1hcnk6IGBDcmVhdGluZyBjYXRlZ29yeSBhcyByZXF1ZXN0ZWQgYXQgW1tXUDpBRkMvQ11dJHt0aGlzLnNjcmlwdE1lc3NhZ2V9YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NyZWF0ZScsXG4gICAgICAgICAgICAgICAgaXNSZWRpcmVjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGBDYXRlZ29yeSB0YWxrOiR7ZGF0YS5jYXRlZ29yeX1gLFxuICAgICAgICAgICAgICAgIHRleHQ6IGB7e1dpa2lQcm9qZWN0IGJhbm5lciBzaGVsbHxcXG57e1dpa2lQcm9qZWN0IEFydGljbGVzIGZvciBjcmVhdGlvbnx0cz17e3N1YnN0OkxPQ0FMVElNRVNUQU1QfX18cmV2aWV3ZXI9JHttdy5jb25maWcuZ2V0KCd3Z1VzZXJOYW1lJyl9fX1cXG59fWAsXG4gICAgICAgICAgICAgICAgc3VtbWFyeTogYEFkZGluZyBbW1dpa2lwZWRpYTpXaWtpUHJvamVjdCBBcnRpY2xlcyBmb3IgY3JlYXRpb258V2lraVByb2plY3QgQXJ0aWNsZXMgZm9yIGNyZWF0aW9uXV0gYmFubmVyJHt0aGlzLnNjcmlwdE1lc3NhZ2V9YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5kYXRhLmNhdGVnb3JpemVkUGFnZXMubWFwKChleGFtcGxlKSA9PiAoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdlZGl0JyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICB0aXRsZTogZXhhbXBsZSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICh7IGNvbnRlbnQgfTogeyBjb250ZW50OiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGRhdGEuY2F0ZWdvcmllc1RvUmVtb3ZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChuZXcgUmVnRXhwKGBcXFxcW1xcXFxbOj9bQ2NdYXRlZ29yeToke2NhdGVnb3J5fVxcXFxdXFxcXF1cXG4/YCwgJ2dpJyksICcnKTtcblxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8oKFxcW1xcWzo/W0NjXWF0ZWdvcnk6Lis/XV1cXG4/KSspLywgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaEVuZHNXaXRoTmV3bGluZSA9IG1hdGNoLmVuZHNXaXRoKCdcXG4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke21hdGNofSR7bWF0Y2hFbmRzV2l0aE5ld2xpbmUgPyAnJyA6ICdcXG4nfVtbQ2F0ZWdvcnk6JHtkYXRhLmNhdGVnb3J5fV1dJHttYXRjaEVuZHNXaXRoTmV3bGluZSA/ICdcXG4nIDogJyd9YDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiBgQWRkaW5nIHBhZ2UgdG8gW1s6Q2F0ZWdvcnk6JHtkYXRhLmNhdGVnb3J5fV1dIGFzIHJlcXVlc3RlZCBhdCBbW1dQOkFGQy9DXV0ke3RoaXMuc2NyaXB0TWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwgImJvZHkuYWZjcmMtaGVscGVyLW9wZW4gI213LXRlbGVwb3J0LXRhcmdldHt6LWluZGV4OjUwMH0uYWZjcmMtaGVscGVyLXJlcXVlc3R7bWFyZ2luOjEwcHg7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZC1jb2xvcjojZWVlO3BhZGRpbmc6NXB4O2NvbG9yOiMyMDIxMjJ9LmFmY3JjLWhlbHBlci1yZXF1ZXN0IHN1bW1hcnl7Y3Vyc29yOnBvaW50ZXJ9LmFmY3JjLWhlbHBlci10YXJnZXQtZWRpdG9ye21pbi13aWR0aDoxY2g7bWF4LXdpZHRoOmNhbGMoMTAwJSAtIDRjaCk7Zm9udC1mYW1pbHk6bW9ub3NwYWNlfS5hZmNyYy1oZWxwZXItZXh0ZXJuYWwtbGlua3std2Via2l0LXRleHQtZGVjb3JhdGlvbjpub25lIWltcG9ydGFudDt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnR9LmFmY3JjLWhlbHBlci1leHRlcm5hbC1saW5rIHN2Z3tkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoxZW07aGVpZ2h0OjFlbTtmaWxsOmN1cnJlbnRjb2xvcn0uYWZjcmMtaGVscGVyLXJlcXVlc3QtaW5mbywuYWZjcmMtaGVscGVyLXJlcXVlc3QtcmVzcG9uZGVye21hcmdpbjo1cHh9LmFmY3JjLWhlbHBlci1yZXF1ZXN0LWluZm8+ZGl2LC5hZmNyYy1oZWxwZXItcmVxdWVzdC1yZXNwb25kZXI+ZGl2e21hcmdpbi10b3A6OHB4O21hcmdpbi1ib3R0b206OHB4fS5hZmNyYy1oZWxwZXItcmVxdWVzdC1yZXNwb25kZXI+ZGl2Omxhc3Qtb2YtdHlwZXttYXJnaW4tYm90dG9tOjB9LmFmY3JjLWhlbHBlci1yZXF1ZXN0LXJlc3BvbmRlciAub28tdWktZmllbGRMYXlvdXR7bWFyZ2luLWxlZnQ6OHB4fS5hZmNyYy1oZWxwZXItcmVxdWVzdC1yZXNwb25kZXIgLm9vLXVpLWZpZWxkTGF5b3V0LWhlYWRlcnt3aWR0aDotbW96LW1heC1jb250ZW50O3dpZHRoOm1heC1jb250ZW50fS5hZmNyYy1oZWxwZXItYWN0aW9uLXJhZGlve21hcmdpbi10b3A6OHB4fS5hZmNyYy1oZWxwZXItYWN0aW9uLXJhZGlvIC5vby11aS1yYWRpb09wdGlvbldpZGdldHtkaXNwbGF5OmlubGluZTtwYWRkaW5nOjhweH0uYWZjcmMtY2xvc2luZy1yZWFzb24taW5wdXQsLmFmY3JjLWNvbW1lbnQtaW5wdXR7bWF4LXdpZHRoOjUwJX0uYWZjcmMtaGVscGVyLXJlZGlyZWN0LXBvc3NpYmlsaXRpZXM6YWZ0ZXJ7Y29udGVudDpcIiAocmVkaXJlY3Qgd2l0aCBwb3NzaWJpbGl0aWVzKVwiO2ZvbnQtc3R5bGU6aXRhbGljfS5hZmNyYy1oZWxwZXItdGVtcGxhdGUtcGFyYW1ldGVycy1jb250YWluZXIsLmFmY3JjLWhlbHBlci10ZW1wbGF0ZS1wYXJhbWV0ZXJzLWNvbnRhaW5lciBkZXRhaWxze21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjEwcHg7Ym9yZGVyOjFweCBzb2xpZCAjYTJhOWIxO2JvcmRlci1yYWRpdXM6MnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtwYWRkaW5nOjVweH0uYWZjcmMtaGVscGVyLXRlbXBsYXRlLXBhcmFtZXRlcnMtY29udGFpbmVye21hcmdpbi1sZWZ0OjhweH0uYWZjcmMtaGVscGVyLXRlbXBsYXRlLXBhcmFtZXRlcnMtY29udGFpbmVyIHN1bW1hcnl7Y3Vyc29yOnBvaW50ZXI7Zm9udC13ZWlnaHQ6NzAwfS5hZmNyYy1oZWxwZXItdGVtcGxhdGUtcGFyYW1ldGVycy1jb250YWluZXIgZGV0YWlsc3ttYXJnaW4tdG9wOjVweDttYXJnaW4tYm90dG9tOjVweDtiYWNrZ3JvdW5kLWNvbG9yOiNlMmUyZTJ9I2FmY3JjLWhlbHBlci1uby10ZW1wbGF0ZXMtbWVzc2FnZXtwYWRkaW5nOjVweH0uYWZjcmMtaGVscGVyLWFjdGlvbnMtY29udGFpbmVyIGRpdnttYXJnaW4tdG9wOjhweDttYXJnaW4tYm90dG9tOjhweH1cbiIsICJpbXBvcnQgY3NzQ29udGVudCBmcm9tICcuLi8uLi9zdHlsZXMvYWZjcmMtaGVscGVyLmNzcycgd2l0aCB7IHR5cGU6ICdjc3MnIH07XG5cbmV4cG9ydCB0eXBlIFdhdGNoTWV0aG9kID0gJ25vY2hhbmdlJyB8ICdwcmVmZXJlbmNlcycgfCAndW53YXRjaCcgfCAnd2F0Y2gnO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gICAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgICAgIGFmY3JjQ29uZmlndXJhdGlvbj86IHsgY3JlYXRlZFBhZ2VXYXRjaE1ldGhvZD86IFdhdGNoTWV0aG9kIH07XG4gICAgfVxufVxuXG5tdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdvb2pzLXVpLWNvcmUnLCAnb29qcy11aS13aWRnZXRzJywgJ29vanMtdWktd2luZG93cyddLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBkZWZhdWx0OiBSZWRpcmVjdHNEaWFsb2cgfSA9IGF3YWl0IGltcG9ydCgnLi9yZWRpcmVjdHMtZGlhbG9nJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgY29uc3QgeyBkZWZhdWx0OiBDYXRlZ29yaWVzRGlhbG9nIH0gPSBhd2FpdCBpbXBvcnQoJy4vY2F0ZWdvcmllcy1kaWFsb2cnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cblxuICAgIGNvbnN0IHBhZ2VOYW1lID0gbXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpLnJlcGxhY2VBbGwoJ18nLCAnICcpO1xuXG4gICAgY29uc3QgaXNSZWRpcmVjdFJlcXVlc3RQYWdlID0gcGFnZU5hbWUgPT09ICdXaWtpcGVkaWE6QXJ0aWNsZXMgZm9yIGNyZWF0aW9uL1JlZGlyZWN0cyc7XG4gICAgY29uc3QgaXNDYXRlZ29yeVJlcXVlc3RQYWdlID0gcGFnZU5hbWUgPT09ICdXaWtpcGVkaWE6QXJ0aWNsZXMgZm9yIGNyZWF0aW9uL0NhdGVnb3JpZXMnO1xuXG4gICAgaWYgKCFpc1JlZGlyZWN0UmVxdWVzdFBhZ2UgJiYgIWlzQ2F0ZWdvcnlSZXF1ZXN0UGFnZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgcmVxdWVzdFBhZ2VUeXBlID0gaXNSZWRpcmVjdFJlcXVlc3RQYWdlID8gJ3JlZGlyZWN0JyA6ICdjYXRlZ29yeSc7XG5cbiAgICBjb25zdCBsaW5rID0gbXcudXRpbC5hZGRQb3J0bGV0TGluayhcbiAgICAgICAgbXcuY29uZmlnLmdldCgnc2tpbicpID09PSAnbWluZXJ2YScgPyAncC10YicgOiAncC1jYWN0aW9ucycsXG4gICAgICAgICcjJyxcbiAgICAgICAgYEhhbmRsZSAke3JlcXVlc3RQYWdlVHlwZX0gY3JlYXRpb24gcmVxdWVzdHNgLFxuICAgICAgICAnYWZjcmMtaGVscGVyJyxcbiAgICApITtcblxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBtdy51dGlsLmFkZENTUyhjc3NDb250ZW50KTtcblxuICAgICAgICBjb25zdCB3aW5kb3dNYW5hZ2VyID0gbmV3IE9PLnVpLldpbmRvd01hbmFnZXIoKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQod2luZG93TWFuYWdlci4kZWxlbWVudFswXSk7XG5cbiAgICAgICAgY29uc3QgaGVscGVyID0gcmVxdWVzdFBhZ2VUeXBlID09PSAncmVkaXJlY3QnID8gUmVkaXJlY3RzRGlhbG9nIDogQ2F0ZWdvcmllc0RpYWxvZztcblxuICAgICAgICBjb25zdCBhZmNyY0hlbHBlckRpYWxvZyA9IG5ldyBoZWxwZXIocmVxdWVzdFBhZ2VUeXBlLCBwYWdlTmFtZSwgd2luZG93LmFmY3JjQ29uZmlndXJhdGlvbj8uY3JlYXRlZFBhZ2VXYXRjaE1ldGhvZCk7XG5cbiAgICAgICAgd2luZG93TWFuYWdlci5hZGRXaW5kb3dzKFthZmNyY0hlbHBlckRpYWxvZ10pO1xuXG4gICAgICAgIGFmY3JjSGVscGVyRGlhbG9nLm9wZW4oKTtcbiAgICAgICAgdm9pZCBh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QUFNLElBQU0sVUFBWSxPQUFTLGFBQy9DLElBQ0EsVUFBVUMsQ0FBZSxxQkFDekIsY0FDSixFQUVLLGlCQUFpQixRQUFVQyxHQUFVLENBQ3RDQSxFQUFNLGVBQWUsRUFFckIsR0FBRyxLQUFLLE9BQU9DLENBQVUsRUFFekIsSUFBTUMsRUFBZ0IsSUFBSSxHQUFHLEdBQUcsY0FDaEMsU0FBUyxLQUFLLE9BQU9BLEVBQWMsU0FBUyxDQUFDLENBQUMsRUFFOUMsSUFBTUMsRUFBU0osSUFBb0IsV0FBYUosRUFBa0JDLEVBRTVEUSxFQUFvQixJQUFJRCxFQUFPSixFQUFpQkYsRUFBVSxPQUFPLG9CQUFvQixzQkFBc0IsRUFFakhLLEVBQWMsV0FBVyxDQUFDRSxDQUFpQixDQUFDLEVBRTVDQSxFQUFrQixLQUFLLEVBQ2xCQSxFQUFrQixLQUFLLENBQ2hDLENBQUMsQ0FDTCxDQUFDIiwKICAibmFtZXMiOiBbIkFjdGlvbnNEaWFsb2ciLCAiaW5pdF9zaG93X2FjdGlvbnNfZGlhbG9nIiwgIl9fZXNtTWluIiwgIl9BY3Rpb25zRGlhbG9nIiwgIm1lc3NhZ2UiLCAidHlwZSIsICJtZXNzYWdlV2lkZ2V0IiwgInJlbG9hZEJ1dHRvbiIsICJIZWxwZXJEaWFsb2ciLCAiaW5pdF9oZWxwZXJfZGlhbG9nIiwgIl9fZXNtTWluIiwgImluaXRfc2hvd19hY3Rpb25zX2RpYWxvZyIsICJfSGVscGVyRGlhbG9nIiwgInJlcXVlc3RQYWdlVHlwZSIsICJwYWdlVGl0bGUiLCAiY3JlYXRlZFdhdGNoTWV0aG9kIiwgImFjdGlvbiIsICJjb25maXJtZWQiLCAicGFnZVJldmlzaW9uIiwgInNlY3Rpb25zIiwgIm1hdGNoIiwgInNlY3Rpb25UZXh0IiwgInNlY3Rpb25IZWFkZXIiLCAiaW5kZXgiLCAiaGFuZGxlIiwgImVuZEluZGV4IiwgInN1YkluZGV4IiwgIm1lc3NhZ2VXaWRnZXQiLCAibWVzc2FnZVdpZGdldExheW91dCIsICJ3aW5kb3dNYW5hZ2VyIiwgInNob3dBY3Rpb25zRGlhbG9nIiwgIkFjdGlvbnNEaWFsb2ciLCAiY291bnRzIiwgIm5ld1BhZ2VUZXh0IiwgInJlYXNvbiIsICJ0ZW1wbGF0ZVBhcmFtZXRlcnMiLCAiYWRkaXRpb25hbFJlYXNvbmluZyIsICJkZW5pZWRQYWdlcyIsICJzaW5ndWxhclJlcXVlc3QiLCAiYWxsUmVxdWVzdHMiLCAicmVhc29ucyIsICJwYWdlIiwgInJlYXNvbnNBcnJheSIsICJwYWdlcyIsICJjb21tZW50cyIsICJjb21tZW50TWVzc2FnZXMiLCAiY29tbWVudCIsICJjb21tZW50c0FycmF5IiwgInNlY3Rpb25EYXRhIiwgInByZXBlbmQiLCAiYXBwZW5kIiwgIm9sZEZ1bGxTZWN0aW9uVGV4dCIsICJvbGRTZWN0aW9uVGV4dCIsICJhcGlGdW5jdGlvbiIsICJsaW5rRWxlbWVudCIsICJlcnJvckNvZGUiLCAiZXJyb3JJbmZvIiwgInJlc29sdmUiLCAiZGV0YWlsc0VsZW1lbnQiLCAiZGlhbG9nIiwgIlJlZGlyZWN0UmVxdWVzdEhhbmRsZXIiLCAiaW5pdF9yZWRpcmVjdF9yZXF1ZXN0X2hhbmRsZXIiLCAiX19lc21NaW4iLCAidGl0bGVJbmRleCIsICJ0aXRsZSIsICJkZXRhaWxzRWxlbWVudCIsICJyZXNwb25kZXJFbGVtZW50IiwgImRpYWxvZyIsICJyZXF1ZXN0ZWRUaXRsZURpdiIsICJsYWJlbCIsICJhY3Rpb25SYWRpb0lucHV0IiwgInNlbGVjdGVkIiwgIm9wdGlvbiIsICJjb21tZW50IiwgInRhZ1NlbGVjdCIsICJ0YWciLCAicmVkaXJlY3QiLCAic2VsZWN0ZWRUYWdzIiwgInNvcnRlZFRhZ3MiLCAiYSIsICJiIiwgInNob3duVGVtcGxhdGVFZGl0b3JzIiwgImVkaXRvckluZm8iLCAiaXNUYWdTZWxlY3RlZCIsICJzdW1tYXJ5RWxlbWVudCIsICJub1RlbXBsYXRlc01lc3NhZ2UiLCAidGVtcGxhdGVOYW1lIiwgInRlbXBsYXRlRGF0YSIsICJwYXJhbWV0ZXJzIiwgImRldGFpbHMiLCAic3VtbWFyeSIsICJlbGVtZW50RGF0YSIsICJwYXJhbWV0ZXJOYW1lIiwgInBhcmFtZXRlckRhdGEiLCAiaW5wdXQiLCAiaW5wdXRMYXlvdXQiLCAiZGVueVJlYXNvbklucHV0IiwgInZhbHVlIiwgImNsb3NpbmdSZWFzb25Ecm9wZG93biIsICJpZCIsICJ1cGRhdGUiLCAicmVkaXJlY3RzX2RpYWxvZ19leHBvcnRzIiwgIl9fZXhwb3J0IiwgIlJlZGlyZWN0c0RpYWxvZyIsICJpbml0X3JlZGlyZWN0c19kaWFsb2ciLCAiX19lc21NaW4iLCAiaW5pdF9oZWxwZXJfZGlhbG9nIiwgImluaXRfcmVkaXJlY3RfcmVxdWVzdF9oYW5kbGVyIiwgIkhlbHBlckRpYWxvZyIsICJyZWRpcmVjdFRlbXBsYXRlUmVzcG9uc2UiLCAic2VjdGlvblRleHQiLCAic2VjdGlvbkhlYWRlciIsICJwYXJzZWREYXRhIiwgInJlcXVlc3RlZFBhZ2VzIiwgIm1hdGNoIiwgInBhcnNlZFRhcmdldCIsICJyZXF1ZXN0ZXIiLCAibmFtZSIsICJwYWdlIiwgImluZGV4IiwgInJlcXVlc3QiLCAiZGV0YWlsc0VsZW1lbnQiLCAic3VtbWFyeUVsZW1lbnQiLCAiZXZlbnQiLCAidGFyZ2V0RWRpdG9yRWxlbWVudCIsICJsaW5rRWxlbWVudCIsICJyZXF1ZXN0SW5mb0VsZW1lbnQiLCAibm9uZUVsZW1lbnQiLCAidW5rbm93bkVsZW1lbnQiLCAicmVhc29uRGl2IiwgInJlYXNvbkxhYmVsIiwgInNvdXJjZURpdiIsICJzb3VyY2VMYWJlbCIsICJyZXF1ZXN0ZXJEaXYiLCAicmVxdWVzdGVyTGFiZWwiLCAicmVxdWVzdGVyTGluayIsICJyZXF1ZXN0UmVzcG9uZGVyRWxlbWVudCIsICJyZXF1ZXN0ZWRUaXRsZSIsICJSZWRpcmVjdFJlcXVlc3RIYW5kbGVyIiwgImFjdGlvbnNUb1Rha2UiLCAiYWxsUmVxdWVzdHNBY2NlcHRlZERlbmllZCIsICJhY3Rpb24iLCAiZmlyc3RDbG9zZVJlYXNvbiIsICJhbGxSZXF1ZXN0c0Nsb3NlZCIsICJiYWNrZ3JvdW5kQ29sb3IiLCAiYWNjZXB0ZWRDb3VudCIsICJkZW5pZWRDb3VudCIsICJzaG93QWN0aW9uc0RpYWxvZyIsICJjb3VudHMiLCAibmV3UGFnZVRleHQiLCAiYWN0aW9uRGF0YSIsICJ0YXJnZXQiLCAicmVxdWVzdHMiLCAic29tZVJlcXVlc3RBY2NlcHRlZERlbmllZCIsICJhY2NlcHRlZFBhZ2VzIiwgImRlbmllZFBhZ2VzIiwgImNvbW1lbnRzIiwgImFtb3VudE9mUGFnZXMiLCAic2VjdGlvbkRhdGEiLCAiY2xvc2luZ0lkIiwgImFjY2VwdGVkUGFnZXNNZXNzYWdlIiwgImRlbmllZFBhZ2VzTWVzc2FnZSIsICJtYXBwZWRDb3VudHMiLCAiY291bnQiLCAiZGF0YSIsICJ0YWdzV2l0aEFyZ3VtZW50cyIsICJ0YWciLCAiZm91bmRBcmd1bWVudEVkaXRvciIsICJlZGl0b3JJbmZvIiwgImxhc3ROdW1iZXJQYXJhbWV0ZXJJbmRleCIsICJwYXJhbWV0ZXIiLCAibWFwcGVkQXJndW1lbnRzIiwgInZhbHVlIiwgInRpdGxlIiwgIkNhdGVnb3J5SW5wdXRXaWRnZXQiLCAiaW5pdF9jYXRlZ29yeV9pbnB1dF93aWRnZXQiLCAiX19lc21NaW4iLCAiY29uZmlnIiwgInZhbHVlIiwgImRlZmVycmVkIiwgInBhcnNlZFRpdGxlIiwgInJlc3VsdCIsICJwYWdlcyIsICJwYWdlIiwgImNhdGVnb3J5IiwgInRpdGxlV2l0aG91dE5hbWVzcGFjZSIsICJyZXNwb25zZSIsICJkYXRhIiwgImxhYmVsIiwgIlBhZ2VJbnB1dFdpZGdldCIsICJpbml0X3BhZ2VfaW5wdXRfd2lkZ2V0IiwgIl9fZXNtTWluIiwgImNvbmZpZyIsICJ2YWx1ZSIsICJkZWZlcnJlZCIsICJwYXJzZWRUaXRsZSIsICJyZXN1bHQiLCAicGFnZXMiLCAicGFnZSIsICJyZXNwb25zZSIsICJkYXRhIiwgImxhYmVsIiwgImNhdGVnb3JpZXNfZGlhbG9nX2V4cG9ydHMiLCAiX19leHBvcnQiLCAiQ2F0ZWdvcmllc0RpYWxvZyIsICJpbml0X2NhdGVnb3JpZXNfZGlhbG9nIiwgIl9fZXNtTWluIiwgImluaXRfY2F0ZWdvcnlfaW5wdXRfd2lkZ2V0IiwgImluaXRfaGVscGVyX2RpYWxvZyIsICJpbml0X3BhZ2VfaW5wdXRfd2lkZ2V0IiwgIkhlbHBlckRpYWxvZyIsICJzZWN0aW9uVGV4dCIsICJzZWN0aW9uSGVhZGVyIiwgInBhcnNlZERhdGEiLCAiZm91bmRDYXRlZ29yeSIsICJtYXRjaCIsICJmaXJzdFVzZXJJbmRleCIsICJmaXJzdFVzZXJUYWxrSW5kZXgiLCAiZmlyc3RJcEluZGV4IiwgImZpcnN0SW5kZXgiLCAiaW5kZXgiLCAicmVxdWVzdCIsICJkZXRhaWxzRWxlbWVudCIsICJzdW1tYXJ5RWxlbWVudCIsICJyZXF1ZXN0SW5mb0VsZW1lbnQiLCAibm9uZUVsZW1lbnQiLCAidW5rbm93bkVsZW1lbnQiLCAiZXhhbXBsZXNEaXYiLCAiZXhhbXBsZXNMYWJlbCIsICJleGFtcGxlIiwgImxpbmtFbGVtZW50IiwgInBhcmVudHNEaXYiLCAicGFyZW50c0xhYmVsIiwgInBhcmVudCIsICJyZXF1ZXN0ZXJEaXYiLCAicmVxdWVzdGVyTGFiZWwiLCAicmVxdWVzdGVyTGluayIsICJyZXF1ZXN0UmVzcG9uZGVyRWxlbWVudCIsICJhY3Rpb25SYWRpb0lucHV0IiwgImxhYmVsIiwgIm9wdGlvbiIsICJjb21tZW50SW5wdXRMYXlvdXQiLCAiY29tbWVudCIsICJjb21tZW50SW5wdXQiLCAicGFnZVNlbGVjdExheW91dCIsICJjYXRlZ29yeVJlbW92ZVNlbGVjdExheW91dCIsICJwYXJlbnRDYXRlZ29yeVNlbGVjdExheW91dCIsICJkZW55UmVhc29uTGF5b3V0IiwgImNsb3NpbmdSZWFzb25MYXlvdXQiLCAicGFnZVNlbGVjdElucHV0IiwgIlBhZ2VJbnB1dFdpZGdldCIsICJ2YWx1ZSIsICJwYWdlcyIsICJwYWdlIiwgInBhZ2VTZWxlY3QiLCAic2VsZWN0ZWRUYWdzIiwgInNvcnRlZFRhZ3MiLCAiYSIsICJiIiwgImNhdGVnb3JpemVkUGFnZXMiLCAiY2F0ZWdvcnlSZW1vdmVTZWxlY3RJbnB1dCIsICJDYXRlZ29yeUlucHV0V2lkZ2V0IiwgInBhcmVudENhdGVnb3J5U2VsZWN0IiwgImNhdGVnb3J5UmVtb3ZlU2VsZWN0IiwgInBhcmVudENhdGVnb3JpZXMiLCAicGFyZW50Q2F0ZWdvcnlTZWxlY3RJbnB1dCIsICJwYXJlbnRDYXRlZ29yeSIsICJkZW55UmVhc29uIiwgImNsb3NpbmdSZWFzb24iLCAidGl0bGUiLCAiaWQiLCAic2VsZWN0ZWQiLCAiYWN0aW9uIiwgImJhY2tncm91bmRDb2xvciIsICJzaG93QWN0aW9uc0RpYWxvZyIsICJjb3VudHMiLCAibmV3UGFnZVRleHQiLCAiYWN0aW9uRGF0YSIsICJzZWN0aW9uRGF0YSIsICJtYXBwZWRDb3VudHMiLCAiY291bnQiLCAiZGF0YSIsICJjb250ZW50IiwgImNhdGVnb3J5IiwgIm1hdGNoRW5kc1dpdGhOZXdsaW5lIiwgImFmY3JjX2hlbHBlcl9kZWZhdWx0IiwgIlJlZGlyZWN0c0RpYWxvZyIsICJDYXRlZ29yaWVzRGlhbG9nIiwgInBhZ2VOYW1lIiwgImlzUmVkaXJlY3RSZXF1ZXN0UGFnZSIsICJyZXF1ZXN0UGFnZVR5cGUiLCAiZXZlbnQiLCAiYWZjcmNfaGVscGVyX2RlZmF1bHQiLCAid2luZG93TWFuYWdlciIsICJoZWxwZXIiLCAiYWZjcmNIZWxwZXJEaWFsb2ciXQp9Cg==
