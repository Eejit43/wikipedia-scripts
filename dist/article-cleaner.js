// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/article-cleaner.ts

"use strict";(()=>{mw.config.get("wgNamespaceNumber")<0||mw.config.get("wgIsProbablyEditable")&&mw.loader.using(["mediawiki.util","jquery.textSelection"],()=>{mw.util.addCSS(`
#article-cleaner {
    display: none;
}

#content:has(#wpTextbox1) #article-cleaner {
    display: unset;
}`),mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-navigation":"p-cactions","#","Perform article cleanup","article-cleaner").addEventListener("click",d=>{d.preventDefault();let p=$("#wpTextbox1");if(p.length===0)return mw.notify("Edit box not found!",{type:"error",autoHideSeconds:"short"});let s=p.textSelection("getContents");if(!s)return mw.notify("Edit box value not found!",{type:"error",autoHideSeconds:"short"});s=T(s),s=k(s),s=b(s),s=w(s),s=S(s),s=y(s),s=E(s),p.textSelection("setContents",s),p.textSelection("setSelection",{start:0}),mw.notify("Article cleanup complete!",{type:"success",autoHideSeconds:"short"})})});function T(t){let d;(i=>(i[i.Expanded=0]="Expanded",i[i.ExpandedAligned=1]="ExpandedAligned",i[i.Minimized=2]="Minimized",i[i.MinimizedSpaced=3]="MinimizedSpaced"))(d||={});class p{location;isNested=!1;fullText;fullTextEscaped;name;parameters=[];subTemplates=[];placeholderStrings=["\u{F0000}","\u{10FFFF}"];pipeEscapeRegexes=[/(\[\[[^\]]*?)\|(.*?]])/g,/(<!--.*?)\|(.*?-->)/g,/(<nowiki>.*?)\|(.*?<\/nowiki>)/g];defaultTemplateStyles={1:["infobox","speciesbox","taxobox","automatic taxobox","osm location map","motorsport season"],2:["coord","start date","end date"]};constructor(o){this.location={start:o}}parse(){this.fullText=t.slice(this.location.start,this.location.end),this.fullTextEscaped=this.fullText;for(let i of this.subTemplates)i.parse(),this.fullTextEscaped=this.fullTextEscaped.replace(i.fullText,this.placeholderStrings[0]);let o=this.fullTextEscaped.slice(2,-2).trim();for(let i of this.pipeEscapeRegexes)for(;i.test(o);)o=o.replaceAll(i,`$1${this.placeholderStrings[1]}$2`);let c=o.split("|").map(i=>i.replaceAll(this.placeholderStrings[1],"|").trim());this.name=c.shift();let g=c.map(i=>{let h=i.indexOf("=");return h===-1?{key:null,value:i.trim()}:{key:i.slice(0,h).trim(),value:i.slice(h+1).trim()}});this.parameters=g}getStyle(){for(let[o,c]of Object.entries(this.defaultTemplateStyles))for(let g of c)if(this.name.toLowerCase().startsWith(g))return Number.parseInt(o)}format(){this.fullText||this.parse();let o=this.getStyle();if(o===void 0)return this.fullText;let c=[`{{${this.name}`];if(o===0||o===1){let i=0;o===1&&(i=Math.max(...this.parameters.map(h=>h.key?.length??0)));for(let h of this.parameters)c.push(`| ${h.key?`${h.key.padEnd(i)} = `:""}${h.value}`)}else for(let i of this.parameters)i.value&&c.push(`|${i.key?`${i.key}=`:""}${i.value}`);c.push("}}"),c.length===2?(c[0]+="}}",c.pop()):o===3&&(c[c.length-2]+="}}",c.pop());let g=c.join(o===0||o===1?`
`:o===3?" ":"");for(let i of this.subTemplates)g=g.replace(this.placeholderStrings[0],i.format());return g}}let s=[],u=[],m=!1,e=!1,r=!1,l=0;function f(a,o=!0){let c=t.slice(l,l+a.length)===a;return c&&o&&(l+=a.length),c}for(;l<t.length;)if(f("<nowiki>"))e=!0;else if(f("</nowiki>"))e=!1;else if(f("<!--"))r=!0;else if(f("-->"))r=!1;else if(!e&&!r)if(f("[["))m=!0;else if(m&&f("]]"))m=!1;else if(f("{{")){let a=new p(l-2);u.length>0&&(a.isNested=!0,u.at(-1)?.subTemplates.push(a)),u.push(a)}else if(f("}}")){let a=u.pop();if(!a)continue;a.location.end=l,s.push(a)}else l++;else l++;let n=t;for(let a of s)a.isNested||(a.parse(),n=n.replace(a.fullText,a.format()));return n}function k(t){let d={"See also":["also see"],References:["reference","source","sources","citation","citations"],"Further reading":["further reading"],"External links":["external link","weblink","weblinks"]},p=["life","career"],s=Object.fromEntries(Object.entries(d).flatMap(([e,r])=>r.map(l=>[l,e]))),m=[...t.matchAll(/(?<=\n)(?<startMarkup>=+) *(?<name>.*?) *(?<endMarkup>=+)(?=\n)/g)].map(e=>{let{startMarkup:r,name:l,endMarkup:f}=e.groups,n=l.replaceAll(/'{3}| {2,}/g,""),a=Math.max(r.length,f.length,2);return{name:n,depth:a,original:e[0]}});for(let e of m){let l=e.name.toLowerCase()in s?s[e.name.toLowerCase()]:e.name;for(let n of p)l=l.replaceAll(new RegExp(`\\b${n}\\b`,"gi"),n);l=l.charAt(0).toUpperCase()+l.slice(1);let f=`${"=".repeat(e.depth)} ${l} ${"=".repeat(e.depth)}`;e.original!==f&&(t=t.replace(e.original,f))}return t}function b(t){return t.replaceAll(/__(INDEX|NOINDEX|NEWSECTIONLINK|NONEWSECTIONLINK|NOEDITSECTION|DISAMBIG|STATICREDIRECT|FORCETOC)__\n*/g,"")}function w(t){let p=[...t.matchAll(/{{(displaytitle|defaultsort)[:|](.*?)}}/gi)].map(u=>{let[m,e,r]=u;return{type:e.toUpperCase(),value:r,original:m}}),s=mw.Title.newFromText(mw.config.get("wgPageName"));for(let u of p){let m=new RegExp(`${u.original.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}
*`,"g"),e=mw.Title.makeTitle(s.getNamespaceId(),u.value.includes(":")?u.value.split(":")[1]:u.value);if(s.toText()===e.toText()){t=t.replace(m,"");continue}let r=`{{${u.type}:${e.toText()}}}
`;t=t.replace(m,r)}return t}function S(t){return t.replaceAll(/(\[\[|}}):?category:(.*?)(]]|}})/gi,"[[Category:$2]]")}function y(t){let d=[],p=[],s=0;function u(e,r=!0){let l=t.slice(s,s+e.length)===e;return l&&r&&(s+=e.length),l}for(;s<t.length;)if(u("[["))p.push({start:s-2,end:-1,isNested:p.length>0});else if(u("]]")){let e=p.pop();if(!e)continue;e.end=s,d.push(e)}else s++;let m=[];for(let e of d){let r=t.slice(e.start+2,e.end-2),[l,...f]=r.split("|"),n=l.replaceAll("_"," ").trim(),a=f.join("|").trim(),o=n.startsWith(":");o&&(n=n.slice(1));let c=!1,g=n.charAt(0).toUpperCase()+n.slice(1),i=n.charAt(0).toLowerCase()+n.slice(1);n.includes(":")&&(g.startsWith("Image:")&&(n=`${n.startsWith("Image:")?"F":"f"}ile:${n.slice(6)}`),o&&["Image","File","Category"].includes(g.split(":")[0])&&(c=!0)),n===a&&(a="");for(let x of[g,i])x===a&&(a="",n=x);(a&&n.includes(":")||n.startsWith("file:")||n.startsWith("category:"))&&(n=n.charAt(0).toUpperCase()+n.slice(1));let h=`[[${c?":":""}${n}${a?`|${a}`:""}]]`;m.push([e,h])}for(let e=0;e<2;e++)for(let[r,l]of m)e===0&&r.isNested||e===1&&!r.isNested||(t=t.slice(0,r.start)+l.padStart(r.end-r.start,"\0")+t.slice(r.end));return t.replaceAll("\0","")}function E(t){let d=[/'+(Bold|Italic)( text)?'+\s*/g,/(<big>)+Big( text)?(<\/big>)+\s*/g,/(<small>)+Small( text)?(<\/small>)+\s*/g,/(<sup>)+Superscript( text)?(<\/sup>)+\s*/g,/(<sub>)+Subscript( text)?(<\/sub>)+\s*/g,/(<s>)+Strikethrough(<\/s>)+\s*/g,/(<u>)+Underline(<\/u>)+\s*/g,/(<code>)+Computer code(<\/code>)+\s*/g,/(<nowiki>)+Insert non-formatted text here(<\/nowiki>)+\s*/g,/=+ Heading text =+\s*/g,/\* Bulleted list item\s*/g,/# Numbered list item\s*/g,/<gallery>\nExample.jpg\|Caption1\nExample.jpg\|Caption2\n<\/gallery>\s*/g,/#REDIRECT \[\[Target page name]]\s*/g,/<!-- Invisible comment -->\s*/g,/<noinclude>\s*<\/noinclude>\s*/g];for(let p of d)for(;p.test(t);)t=t.replace(p,"");return t}})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9hcnRpY2xlLWNsZWFuZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIigoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgPCAwKSByZXR1cm47IC8vIERvbid0IHJ1biBpbiB2aXJ0dWFsIG5hbWVzcGFjZXNcbiAgICBpZiAoIW13LmNvbmZpZy5nZXQoJ3dnSXNQcm9iYWJseUVkaXRhYmxlJykpIHJldHVybjsgLy8gRG9uJ3QgcnVuIGlmIHVzZXIgY2FuJ3QgZWRpdCBwYWdlXG5cbiAgICBtdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdqcXVlcnkudGV4dFNlbGVjdGlvbiddLCAoKSA9PiB7XG4gICAgICAgIG13LnV0aWwuYWRkQ1NTKGBcbiNhcnRpY2xlLWNsZWFuZXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjb250ZW50Omhhcygjd3BUZXh0Ym94MSkgI2FydGljbGUtY2xlYW5lciB7XG4gICAgZGlzcGxheTogdW5zZXQ7XG59YCk7XG5cbiAgICAgICAgY29uc3QgbGluayA9IG13LnV0aWwuYWRkUG9ydGxldExpbmsoXG4gICAgICAgICAgICBtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtaW5lcnZhJyA/ICdwLW5hdmlnYXRpb24nIDogJ3AtY2FjdGlvbnMnLFxuICAgICAgICAgICAgJyMnLFxuICAgICAgICAgICAgJ1BlcmZvcm0gYXJ0aWNsZSBjbGVhbnVwJyxcbiAgICAgICAgICAgICdhcnRpY2xlLWNsZWFuZXInLFxuICAgICAgICApITtcblxuICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBlZGl0Qm94ID0gJCgnI3dwVGV4dGJveDEnKTtcbiAgICAgICAgICAgIGlmIChlZGl0Qm94Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIG13Lm5vdGlmeSgnRWRpdCBib3ggbm90IGZvdW5kIScsIHsgdHlwZTogJ2Vycm9yJywgYXV0b0hpZGVTZWNvbmRzOiAnc2hvcnQnIH0pO1xuXG4gICAgICAgICAgICBsZXQgdGV4dCA9IGVkaXRCb3gudGV4dFNlbGVjdGlvbignZ2V0Q29udGVudHMnKTtcbiAgICAgICAgICAgIGlmICghdGV4dCkgcmV0dXJuIG13Lm5vdGlmeSgnRWRpdCBib3ggdmFsdWUgbm90IGZvdW5kIScsIHsgdHlwZTogJ2Vycm9yJywgYXV0b0hpZGVTZWNvbmRzOiAnc2hvcnQnIH0pO1xuXG4gICAgICAgICAgICB0ZXh0ID0gZm9ybWF0VGVtcGxhdGVzKHRleHQpO1xuICAgICAgICAgICAgdGV4dCA9IGNsZWFudXBTZWN0aW9uSGVhZGVycyh0ZXh0KTtcbiAgICAgICAgICAgIHRleHQgPSBjbGVhbnVwTWFnaWNXb3Jkcyh0ZXh0KTtcbiAgICAgICAgICAgIHRleHQgPSBjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyh0ZXh0KTtcbiAgICAgICAgICAgIHRleHQgPSBjbGVhbnVwQ2F0ZWdvcmllcyh0ZXh0KTtcbiAgICAgICAgICAgIHRleHQgPSBjbGVhbnVwTGlua3ModGV4dCk7XG4gICAgICAgICAgICB0ZXh0ID0gY2xlYW51cFN0cmF5TWFya3VwKHRleHQpO1xuXG4gICAgICAgICAgICBlZGl0Qm94LnRleHRTZWxlY3Rpb24oJ3NldENvbnRlbnRzJywgdGV4dCk7XG5cbiAgICAgICAgICAgIGVkaXRCb3gudGV4dFNlbGVjdGlvbignc2V0U2VsZWN0aW9uJywgeyBzdGFydDogMCB9KTtcblxuICAgICAgICAgICAgbXcubm90aWZ5KCdBcnRpY2xlIGNsZWFudXAgY29tcGxldGUhJywgeyB0eXBlOiAnc3VjY2VzcycsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KSgpO1xuXG4vKipcbiAqIEZvcm1hdHMgdGVtcGxhdGUgc3BhY2luZyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gZm9ybWF0LlxuICovXG5mdW5jdGlvbiBmb3JtYXRUZW1wbGF0ZXMoY29udGVudDogc3RyaW5nKSB7XG4gICAgZW51bSBGb3JtYXRTdHlsZSB7XG4gICAgICAgIEV4cGFuZGVkLFxuICAgICAgICBFeHBhbmRlZEFsaWduZWQsXG4gICAgICAgIE1pbmltaXplZCxcbiAgICAgICAgTWluaW1pemVkU3BhY2VkLFxuICAgIH1cblxuICAgIGNsYXNzIFRlbXBsYXRlIHtcbiAgICAgICAgcHVibGljIGxvY2F0aW9uOiB7IHN0YXJ0OiBudW1iZXI7IGVuZD86IG51bWJlciB9O1xuICAgICAgICBwdWJsaWMgaXNOZXN0ZWQgPSBmYWxzZTtcblxuICAgICAgICBwdWJsaWMgZnVsbFRleHQ/OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgZnVsbFRleHRFc2NhcGVkPzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIG5hbWU/OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcGFyYW1ldGVyczogeyBrZXk6IHN0cmluZyB8IG51bGw7IHZhbHVlOiBzdHJpbmcgfVtdID0gW107XG4gICAgICAgIHB1YmxpYyBzdWJUZW1wbGF0ZXM6IFRlbXBsYXRlW10gPSBbXTtcblxuICAgICAgICBwcml2YXRlIHBsYWNlaG9sZGVyU3RyaW5ncyA9IFsnXFx1e0YwMDAwfScsICdcXHV7MTBGRkZGfSddO1xuXG4gICAgICAgIHByaXZhdGUgcGlwZUVzY2FwZVJlZ2V4ZXMgPSBbLyhcXFtcXFtbXlxcXV0qPylcXHwoLio/XV0pL2csIC8oPCEtLS4qPylcXHwoLio/LS0+KS9nLCAvKDxub3dpa2k+Lio/KVxcfCguKj88XFwvbm93aWtpPikvZ107XG5cbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0VGVtcGxhdGVTdHlsZXMgPSB7XG4gICAgICAgICAgICBbRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkXTogW1xuICAgICAgICAgICAgICAgICdpbmZvYm94JyxcbiAgICAgICAgICAgICAgICAnc3BlY2llc2JveCcsXG4gICAgICAgICAgICAgICAgJ3RheG9ib3gnLFxuICAgICAgICAgICAgICAgICdhdXRvbWF0aWMgdGF4b2JveCcsXG4gICAgICAgICAgICAgICAgJ29zbSBsb2NhdGlvbiBtYXAnLFxuICAgICAgICAgICAgICAgICdtb3RvcnNwb3J0IHNlYXNvbicsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW0Zvcm1hdFN0eWxlLk1pbmltaXplZF06IFsnY29vcmQnLCAnc3RhcnQgZGF0ZScsICdlbmQgZGF0ZSddLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHN0YXJ0TG9jYXRpb246IG51bWJlcikge1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbiA9IHsgc3RhcnQ6IHN0YXJ0TG9jYXRpb24gfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBwYXJzZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZnVsbFRleHQgPSBjb250ZW50LnNsaWNlKHRoaXMubG9jYXRpb24uc3RhcnQsIHRoaXMubG9jYXRpb24uZW5kKTtcbiAgICAgICAgICAgIHRoaXMuZnVsbFRleHRFc2NhcGVkID0gdGhpcy5mdWxsVGV4dDtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBzdWJUZW1wbGF0ZSBvZiB0aGlzLnN1YlRlbXBsYXRlcykge1xuICAgICAgICAgICAgICAgIHN1YlRlbXBsYXRlLnBhcnNlKCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmZ1bGxUZXh0RXNjYXBlZCA9IHRoaXMuZnVsbFRleHRFc2NhcGVkLnJlcGxhY2Uoc3ViVGVtcGxhdGUuZnVsbFRleHQhLCB0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1swXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB0cmltbWVkSW5uZXJUZXh0ID0gdGhpcy5mdWxsVGV4dEVzY2FwZWQuc2xpY2UoMiwgLTIpLnRyaW0oKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBwaXBlRXNjYXBlUmVnZXggb2YgdGhpcy5waXBlRXNjYXBlUmVnZXhlcylcbiAgICAgICAgICAgICAgICB3aGlsZSAocGlwZUVzY2FwZVJlZ2V4LnRlc3QodHJpbW1lZElubmVyVGV4dCkpXG4gICAgICAgICAgICAgICAgICAgIHRyaW1tZWRJbm5lclRleHQgPSB0cmltbWVkSW5uZXJUZXh0LnJlcGxhY2VBbGwocGlwZUVzY2FwZVJlZ2V4LCBgJDEke3RoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzFdfSQyYCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB0cmltbWVkSW5uZXJUZXh0LnNwbGl0KCd8JykubWFwKChwYXJhbWV0ZXIpID0+IHBhcmFtZXRlci5yZXBsYWNlQWxsKHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzFdLCAnfCcpLnRyaW0oKSk7XG5cbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHBhcmFtZXRlcnMuc2hpZnQoKTtcblxuICAgICAgICAgICAgY29uc3Qgc3BsaXRQYXJhbWV0ZXJzID0gcGFyYW1ldGVycy5tYXAoKHBhcmFtZXRlcnMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcXVhbHNMb2NhdGlvbiA9IHBhcmFtZXRlcnMuaW5kZXhPZignPScpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVxdWFsc0xvY2F0aW9uID09PSAtMSkgcmV0dXJuIHsga2V5OiBudWxsLCB2YWx1ZTogcGFyYW1ldGVycy50cmltKCkgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogcGFyYW1ldGVycy5zbGljZSgwLCBlcXVhbHNMb2NhdGlvbikudHJpbSgpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcGFyYW1ldGVycy5zbGljZShlcXVhbHNMb2NhdGlvbiArIDEpLnRyaW0oKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHNwbGl0UGFyYW1ldGVycztcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZ2V0U3R5bGUoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtmb3JtYXRTdHlsZSwgdGVtcGxhdGVQcmVmaXhlc10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5kZWZhdWx0VGVtcGxhdGVTdHlsZXMpKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGVtcGxhdGVQcmVmaXggb2YgdGVtcGxhdGVQcmVmaXhlcylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubmFtZSEudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHRlbXBsYXRlUHJlZml4KSkgcmV0dXJuIE51bWJlci5wYXJzZUludChmb3JtYXRTdHlsZSkgYXMgRm9ybWF0U3R5bGU7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgZm9ybWF0KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZ1bGxUZXh0KSB0aGlzLnBhcnNlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nZXRTdHlsZSgpO1xuICAgICAgICAgICAgaWYgKHN0eWxlID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzLmZ1bGxUZXh0ITtcblxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gW2B7eyR7dGhpcy5uYW1lfWBdO1xuXG4gICAgICAgICAgICBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkIHx8IHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWlyZWRLZXlMZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWQpXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkS2V5TGVuZ3RoID0gTWF0aC5tYXgoLi4udGhpcy5wYXJhbWV0ZXJzLm1hcCgocGFyYW1ldGVyKSA9PiBwYXJhbWV0ZXIua2V5Py5sZW5ndGggPz8gMCkpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJhbWV0ZXIgb2YgdGhpcy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChgfCAke3BhcmFtZXRlci5rZXkgPyBgJHtwYXJhbWV0ZXIua2V5LnBhZEVuZChyZXF1aXJlZEtleUxlbmd0aCl9ID0gYCA6ICcnfSR7cGFyYW1ldGVyLnZhbHVlfWApO1xuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJhbWV0ZXIgb2YgdGhpcy5wYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVyLnZhbHVlKSBvdXRwdXQucHVzaChgfCR7cGFyYW1ldGVyLmtleSA/IGAke3BhcmFtZXRlci5rZXl9PWAgOiAnJ30ke3BhcmFtZXRlci52YWx1ZX1gKTtcblxuICAgICAgICAgICAgb3V0cHV0LnB1c2goJ319Jyk7XG5cbiAgICAgICAgICAgIGlmIChvdXRwdXQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0WzBdICs9ICd9fSc7XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQucG9wKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0eWxlID09PSBGb3JtYXRTdHlsZS5NaW5pbWl6ZWRTcGFjZWQpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbb3V0cHV0Lmxlbmd0aCAtIDJdICs9ICd9fSc7XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQucG9wKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBqb2luZWRPdXRwdXQgPSBvdXRwdXQuam9pbihcbiAgICAgICAgICAgICAgICBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWQgfHwgc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZFxuICAgICAgICAgICAgICAgICAgICA/ICdcXG4nXG4gICAgICAgICAgICAgICAgICAgIDogc3R5bGUgPT09IEZvcm1hdFN0eWxlLk1pbmltaXplZFNwYWNlZFxuICAgICAgICAgICAgICAgICAgICAgID8gJyAnXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViVGVtcGxhdGUgb2YgdGhpcy5zdWJUZW1wbGF0ZXMpXG4gICAgICAgICAgICAgICAgam9pbmVkT3V0cHV0ID0gam9pbmVkT3V0cHV0LnJlcGxhY2UodGhpcy5wbGFjZWhvbGRlclN0cmluZ3NbMF0sIHN1YlRlbXBsYXRlLmZvcm1hdCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIGpvaW5lZE91dHB1dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFsbFRlbXBsYXRlczogVGVtcGxhdGVbXSA9IFtdO1xuXG4gICAgY29uc3QgaW5zaWRlVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG4gICAgbGV0IGlzSW5zaWRlTGluayA9IGZhbHNlO1xuICAgIGxldCBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgIGxldCBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcblxuICAgIGxldCBjdXJyZW50TG9jYXRpb24gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBjb250ZW50IGZvbGxvd2luZyB0aGUgY3VycmVudCBsb2NhdGlvbiBtYXRjaGVzIHRoZSBkZXNpcmVkIHN0cmluZy5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFN0cmluZyBUaGUgc3RyaW5nIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHNob3VsZEluY3JlbWVudCBXaGV0aGVyIHRvIGluY3JlbWVudCB0aGUgY3VycmVudCBsb2NhdGlvbiBpZiB0aGUgc3RyaW5nIGlzIGZvdW5kLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXRTdHJpbmcoZGVzaXJlZFN0cmluZzogc3RyaW5nLCBzaG91bGRJbmNyZW1lbnQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IGlzQXRTdHJpbmcgPSBjb250ZW50LnNsaWNlKGN1cnJlbnRMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uICsgZGVzaXJlZFN0cmluZy5sZW5ndGgpID09PSBkZXNpcmVkU3RyaW5nO1xuXG4gICAgICAgIGlmIChpc0F0U3RyaW5nICYmIHNob3VsZEluY3JlbWVudCkgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgaWYgKGlzQXRTdHJpbmcoJzxub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPC9ub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwhLS0nKSkgaXNJbnNpZGVDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnLS0+JykpIGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmICghaXNJbnNpZGVOb3dpa2kgJiYgIWlzSW5zaWRlQ29tbWVudClcbiAgICAgICAgICAgIGlmIChpc0F0U3RyaW5nKCdbWycpKSBpc0luc2lkZUxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnNpZGVMaW5rICYmIGlzQXRTdHJpbmcoJ11dJykpIGlzSW5zaWRlTGluayA9IGZhbHNlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygne3snKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKGN1cnJlbnRMb2NhdGlvbiAtIDIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluc2lkZVRlbXBsYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmlzTmVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5zaWRlVGVtcGxhdGVzLmF0KC0xKT8uc3ViVGVtcGxhdGVzLnB1c2godGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGluc2lkZVRlbXBsYXRlcy5wdXNoKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBdFN0cmluZygnfX0nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RUZW1wbGF0ZSA9IGluc2lkZVRlbXBsYXRlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3RUZW1wbGF0ZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBsYXN0VGVtcGxhdGUubG9jYXRpb24uZW5kID0gY3VycmVudExvY2F0aW9uO1xuXG4gICAgICAgICAgICAgICAgYWxsVGVtcGxhdGVzLnB1c2gobGFzdFRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBjdXJyZW50TG9jYXRpb24rKztcbiAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGxldCBuZXdDb250ZW50ID0gY29udGVudDtcblxuICAgIGZvciAoY29uc3QgdGVtcGxhdGUgb2YgYWxsVGVtcGxhdGVzKVxuICAgICAgICBpZiAoIXRlbXBsYXRlLmlzTmVzdGVkKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5wYXJzZSgpO1xuXG4gICAgICAgICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKHRlbXBsYXRlLmZ1bGxUZXh0ISwgdGVtcGxhdGUuZm9ybWF0KCkpO1xuICAgICAgICB9XG5cbiAgICByZXR1cm4gbmV3Q29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgc2VjdGlvbiBoZWFkZXJzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFNlY3Rpb25IZWFkZXJzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IGNvbW1vblJlcGxhY2VtZW50cyA9IHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4gICAgICAgICdTZWUgYWxzbyc6IFsnYWxzbyBzZWUnXSxcbiAgICAgICAgJ1JlZmVyZW5jZXMnOiBbJ3JlZmVyZW5jZScsICdzb3VyY2UnLCAnc291cmNlcycsICdjaXRhdGlvbicsICdjaXRhdGlvbnMnXSxcbiAgICAgICAgJ0Z1cnRoZXIgcmVhZGluZyc6IFsnZnVydGhlciByZWFkaW5nJ10sXG4gICAgICAgICdFeHRlcm5hbCBsaW5rcyc6IFsnZXh0ZXJuYWwgbGluaycsICd3ZWJsaW5rJywgJ3dlYmxpbmtzJ10sXG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4gICAgfTtcblxuICAgIGNvbnN0IGNvbW1vbk1pc2NhcGl0YWxpemVkV29yZHMgPSBbJ2xpZmUnLCAnY2FyZWVyJ107XG5cbiAgICBjb25zdCByZXZlcnNlQ29tbW9uUmVwbGFjZW1lbnRzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3QuZW50cmllcyhjb21tb25SZXBsYWNlbWVudHMpLmZsYXRNYXAoKFtrZXksIHZhbHVlc10pID0+IHZhbHVlcy5tYXAoKHZhbHVlKSA9PiBbdmFsdWUsIGtleV0pKSxcbiAgICApO1xuXG4gICAgY29uc3QgaGVhZGVycyA9IGNvbnRlbnQubWF0Y2hBbGwoLyg/PD1cXG4pKD88c3RhcnRNYXJrdXA+PSspICooPzxuYW1lPi4qPykgKig/PGVuZE1hcmt1cD49KykoPz1cXG4pL2cpO1xuXG4gICAgY29uc3QgcGFyc2VkSGVhZGVycyA9IFsuLi5oZWFkZXJzXS5tYXAoKGhlYWRlcikgPT4ge1xuICAgICAgICBjb25zdCB7IHN0YXJ0TWFya3VwLCBuYW1lLCBlbmRNYXJrdXAgfSA9IGhlYWRlci5ncm91cHMhO1xuXG4gICAgICAgIGNvbnN0IGNsZWFuZWROYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8nezN9fCB7Mix9L2csICcnKTtcblxuICAgICAgICBjb25zdCBkZXB0aCA9IE1hdGgubWF4KHN0YXJ0TWFya3VwLmxlbmd0aCwgZW5kTWFya3VwLmxlbmd0aCwgMik7XG5cbiAgICAgICAgcmV0dXJuIHsgbmFtZTogY2xlYW5lZE5hbWUsIGRlcHRoLCBvcmlnaW5hbDogaGVhZGVyWzBdIH07XG4gICAgfSk7XG5cbiAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBwYXJzZWRIZWFkZXJzKSB7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VkTmFtZSA9XG4gICAgICAgICAgICBoZWFkZXIubmFtZS50b0xvd2VyQ2FzZSgpIGluIHJldmVyc2VDb21tb25SZXBsYWNlbWVudHMgPyByZXZlcnNlQ29tbW9uUmVwbGFjZW1lbnRzW2hlYWRlci5uYW1lLnRvTG93ZXJDYXNlKCldIDogaGVhZGVyLm5hbWU7XG5cbiAgICAgICAgbGV0IGNhcGl0YWxpemVkTmFtZSA9IHJlcGxhY2VkTmFtZTtcblxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgY29tbW9uTWlzY2FwaXRhbGl6ZWRXb3JkcykgY2FwaXRhbGl6ZWROYW1lID0gY2FwaXRhbGl6ZWROYW1lLnJlcGxhY2VBbGwobmV3IFJlZ0V4cChgXFxcXGIke3dvcmR9XFxcXGJgLCAnZ2knKSwgd29yZCk7XG5cbiAgICAgICAgY2FwaXRhbGl6ZWROYW1lID0gY2FwaXRhbGl6ZWROYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FwaXRhbGl6ZWROYW1lLnNsaWNlKDEpO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGAkeyc9Jy5yZXBlYXQoaGVhZGVyLmRlcHRoKX0gJHtjYXBpdGFsaXplZE5hbWV9ICR7Jz0nLnJlcGVhdChoZWFkZXIuZGVwdGgpfWA7XG5cbiAgICAgICAgaWYgKGhlYWRlci5vcmlnaW5hbCAhPT0gb3V0cHV0KSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKGhlYWRlci5vcmlnaW5hbCwgb3V0cHV0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHVubmVjZXNzYXJ5IG1hZ2ljIHdvcmRzIGZyb20gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwTWFnaWNXb3Jkcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKC9fXyhJTkRFWHxOT0lOREVYfE5FV1NFQ1RJT05MSU5LfE5PTkVXU0VDVElPTkxJTkt8Tk9FRElUU0VDVElPTnxESVNBTUJJR3xTVEFUSUNSRURJUkVDVHxGT1JDRVRPQylfX1xcbiovZywgJycpO1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBESVNQTEFZVElUTEVzIGFuZCBERUZBVUxUU09SVHMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCB0YWdzID0gY29udGVudC5tYXRjaEFsbCgve3soZGlzcGxheXRpdGxlfGRlZmF1bHRzb3J0KVs6fF0oLio/KX19L2dpKTtcblxuICAgIGNvbnN0IHBhcnNlZFRhZ3MgPSBbLi4udGFnc10ubWFwKCh0YWcpID0+IHtcbiAgICAgICAgY29uc3QgW2Z1bGxUYWcsIHR5cGUsIHZhbHVlXSA9IHRhZztcblxuICAgICAgICByZXR1cm4geyB0eXBlOiB0eXBlLnRvVXBwZXJDYXNlKCksIHZhbHVlLCBvcmlnaW5hbDogZnVsbFRhZyB9O1xuICAgIH0pO1xuXG4gICAgY29uc3QgY3VycmVudFRpdGxlID0gbXcuVGl0bGUubmV3RnJvbVRleHQobXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpKSE7XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBwYXJzZWRUYWdzKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVGFnUmVnZXggPSBuZXcgUmVnRXhwKGAke3RhZy5vcmlnaW5hbC5yZXBsYWNlQWxsKC9bJCgpKisuP1tcXFxcXFxdXnt8fV0vZywgJ1xcXFwkJicpfVxcbipgLCAnZycpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gbXcuVGl0bGUubWFrZVRpdGxlKGN1cnJlbnRUaXRsZS5nZXROYW1lc3BhY2VJZCgpLCB0YWcudmFsdWUuaW5jbHVkZXMoJzonKSA/IHRhZy52YWx1ZS5zcGxpdCgnOicpWzFdIDogdGFnLnZhbHVlKSE7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRUaXRsZS50b1RleHQoKSA9PT0gdGl0bGUudG9UZXh0KCkpIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUYWdSZWdleCwgJycpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdUZXh0ID0gYHt7JHt0YWcudHlwZX06JHt0aXRsZS50b1RleHQoKX19fVxcbmA7XG5cbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShvcmlnaW5hbFRhZ1JlZ2V4LCBuZXdUZXh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgY2F0ZWdvcmllcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBDYXRlZ29yaWVzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHJldHVybiBjb250ZW50LnJlcGxhY2VBbGwoLyhcXFtcXFt8fX0pOj9jYXRlZ29yeTooLio/KShdXXx9fSkvZ2ksICdbW0NhdGVnb3J5OiQyXV0nKTtcbn1cblxuaW50ZXJmYWNlIExpbmtJbmZvcm1hdGlvbiB7XG4gICAgc3RhcnQ6IG51bWJlcjtcbiAgICBlbmQ6IG51bWJlcjtcbiAgICBpc05lc3RlZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgbGlua3MgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwTGlua3MoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgY2xvc2VkTGlua3M6IExpbmtJbmZvcm1hdGlvbltdID0gW107XG4gICAgY29uc3QgbGlua3M6IExpbmtJbmZvcm1hdGlvbltdID0gW107XG5cbiAgICBsZXQgY3VycmVudExvY2F0aW9uID0gMDtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY29udGVudCBmb2xsb3dpbmcgdGhlIGN1cnJlbnQgbG9jYXRpb24gbWF0Y2hlcyB0aGUgZGVzaXJlZCBzdHJpbmcuXG4gICAgICogQHBhcmFtIGRlc2lyZWRTdHJpbmcgVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSBzaG91bGRJbmNyZW1lbnQgV2hldGhlciB0byBpbmNyZW1lbnQgdGhlIGN1cnJlbnQgbG9jYXRpb24gaWYgdGhlIHN0cmluZyBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZywgc2hvdWxkSW5jcmVtZW50ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZyAmJiBzaG91bGRJbmNyZW1lbnQpIGN1cnJlbnRMb2NhdGlvbiArPSBkZXNpcmVkU3RyaW5nLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gaXNBdFN0cmluZztcbiAgICB9XG5cbiAgICB3aGlsZSAoY3VycmVudExvY2F0aW9uIDwgY29udGVudC5sZW5ndGgpXG4gICAgICAgIGlmIChpc0F0U3RyaW5nKCdbWycpKSBsaW5rcy5wdXNoKHsgc3RhcnQ6IGN1cnJlbnRMb2NhdGlvbiAtIDIsIGVuZDogLTEsIGlzTmVzdGVkOiBsaW5rcy5sZW5ndGggPiAwIH0pO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCddXScpKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0TGluayA9IGxpbmtzLnBvcCgpO1xuICAgICAgICAgICAgaWYgKCFsYXN0TGluaykgY29udGludWU7XG5cbiAgICAgICAgICAgIGxhc3RMaW5rLmVuZCA9IGN1cnJlbnRMb2NhdGlvbjtcblxuICAgICAgICAgICAgY2xvc2VkTGlua3MucHVzaChsYXN0TGluayk7XG4gICAgICAgIH0gZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGNvbnN0IG5ld0xpbmtDb250ZW50OiBbTGlua0luZm9ybWF0aW9uLCBzdHJpbmddW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgbGlua0xvY2F0aW9uIG9mIGNsb3NlZExpbmtzKSB7XG4gICAgICAgIGNvbnN0IGlubmVyTGluayA9IGNvbnRlbnQuc2xpY2UobGlua0xvY2F0aW9uLnN0YXJ0ICsgMiwgbGlua0xvY2F0aW9uLmVuZCAtIDIpO1xuXG4gICAgICAgIGNvbnN0IFt1bnBhcnNlZExpbmssIC4uLnBhcmFtZXRlcnNdID0gaW5uZXJMaW5rLnNwbGl0KCd8Jyk7XG5cbiAgICAgICAgbGV0IGxpbmsgPSB1bnBhcnNlZExpbmsucmVwbGFjZUFsbCgnXycsICcgJykudHJpbSgpO1xuICAgICAgICBsZXQgYWx0VGV4dCA9IHBhcmFtZXRlcnMuam9pbignfCcpLnRyaW0oKTtcblxuICAgICAgICBjb25zdCBpc0ZpcnN0Q2hhcmFjdGVyQ29sb24gPSBsaW5rLnN0YXJ0c1dpdGgoJzonKTtcbiAgICAgICAgaWYgKGlzRmlyc3RDaGFyYWN0ZXJDb2xvbikgbGluayA9IGxpbmsuc2xpY2UoMSk7XG5cbiAgICAgICAgbGV0IHNob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGxpbmtVcHBlcmNhc2VTdGFydCA9IGxpbmsuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBsaW5rLnNsaWNlKDEpO1xuICAgICAgICBjb25zdCBsaW5rTG93ZXJjYXNlU3RhcnQgPSBsaW5rLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgbGluay5zbGljZSgxKTtcblxuICAgICAgICBpZiAobGluay5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgICBpZiAobGlua1VwcGVyY2FzZVN0YXJ0LnN0YXJ0c1dpdGgoJ0ltYWdlOicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3RhcnRVcHBlcmNhc2UgPSBsaW5rLnN0YXJ0c1dpdGgoJ0ltYWdlOicpO1xuXG4gICAgICAgICAgICAgICAgbGluayA9IGAke3Nob3VsZFN0YXJ0VXBwZXJjYXNlID8gJ0YnIDogJ2YnfWlsZToke2xpbmsuc2xpY2UoNil9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzRmlyc3RDaGFyYWN0ZXJDb2xvbiAmJiBbJ0ltYWdlJywgJ0ZpbGUnLCAnQ2F0ZWdvcnknXS5pbmNsdWRlcyhsaW5rVXBwZXJjYXNlU3RhcnQuc3BsaXQoJzonKVswXSkpXG4gICAgICAgICAgICAgICAgc2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaW5rID09PSBhbHRUZXh0KSBhbHRUZXh0ID0gJyc7XG4gICAgICAgIGZvciAoY29uc3QgbmV3TGluayBvZiBbbGlua1VwcGVyY2FzZVN0YXJ0LCBsaW5rTG93ZXJjYXNlU3RhcnRdKVxuICAgICAgICAgICAgaWYgKG5ld0xpbmsgPT09IGFsdFRleHQpIHtcbiAgICAgICAgICAgICAgICBhbHRUZXh0ID0gJyc7XG4gICAgICAgICAgICAgICAgbGluayA9IG5ld0xpbms7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgaWYgKChhbHRUZXh0ICYmIGxpbmsuaW5jbHVkZXMoJzonKSkgfHwgbGluay5zdGFydHNXaXRoKCdmaWxlOicpIHx8IGxpbmsuc3RhcnRzV2l0aCgnY2F0ZWdvcnk6JykpXG4gICAgICAgICAgICBsaW5rID0gbGluay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGxpbmsuc2xpY2UoMSk7XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYFtbJHtzaG91bGRGaXJzdENoYXJhY3RlckJlQ29sb24gPyAnOicgOiAnJ30ke2xpbmt9JHthbHRUZXh0ID8gYHwke2FsdFRleHR9YCA6ICcnfV1dYDtcblxuICAgICAgICBuZXdMaW5rQ29udGVudC5wdXNoKFtsaW5rTG9jYXRpb24sIG91dHB1dF0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGxvb3BDb3VudGVyID0gMDsgbG9vcENvdW50ZXIgPCAyOyBsb29wQ291bnRlcisrKVxuICAgICAgICBmb3IgKGNvbnN0IFtsaW5rRGF0YSwgbGlua0NvbnRlbnRdIG9mIG5ld0xpbmtDb250ZW50KSB7XG4gICAgICAgICAgICBpZiAobG9vcENvdW50ZXIgPT09IDAgJiYgbGlua0RhdGEuaXNOZXN0ZWQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAobG9vcENvdW50ZXIgPT09IDEgJiYgIWxpbmtEYXRhLmlzTmVzdGVkKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgICAgY29udGVudC5zbGljZSgwLCBsaW5rRGF0YS5zdGFydCkgKyBsaW5rQ29udGVudC5wYWRTdGFydChsaW5rRGF0YS5lbmQgLSBsaW5rRGF0YS5zdGFydCwgJ1xcMCcpICsgY29udGVudC5zbGljZShsaW5rRGF0YS5lbmQpO1xuICAgICAgICB9XG5cbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKCdcXDAnLCAnJyk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBzdHJheSBtYXJrdXAgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU3RyYXlNYXJrdXAoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RyYXlNYXJrdXBSZWdleGVzID0gW1xuICAgICAgICAvJysoQm9sZHxJdGFsaWMpKCB0ZXh0KT8nK1xccyovZyxcbiAgICAgICAgLyg8YmlnPikrQmlnKCB0ZXh0KT8oPFxcL2JpZz4pK1xccyovZyxcbiAgICAgICAgLyg8c21hbGw+KStTbWFsbCggdGV4dCk/KDxcXC9zbWFsbD4pK1xccyovZyxcbiAgICAgICAgLyg8c3VwPikrU3VwZXJzY3JpcHQoIHRleHQpPyg8XFwvc3VwPikrXFxzKi9nLFxuICAgICAgICAvKDxzdWI+KStTdWJzY3JpcHQoIHRleHQpPyg8XFwvc3ViPikrXFxzKi9nLFxuICAgICAgICAvKDxzPikrU3RyaWtldGhyb3VnaCg8XFwvcz4pK1xccyovZyxcbiAgICAgICAgLyg8dT4pK1VuZGVybGluZSg8XFwvdT4pK1xccyovZyxcbiAgICAgICAgLyg8Y29kZT4pK0NvbXB1dGVyIGNvZGUoPFxcL2NvZGU+KStcXHMqL2csXG4gICAgICAgIC8oPG5vd2lraT4pK0luc2VydCBub24tZm9ybWF0dGVkIHRleHQgaGVyZSg8XFwvbm93aWtpPikrXFxzKi9nLFxuICAgICAgICAvPSsgSGVhZGluZyB0ZXh0ID0rXFxzKi9nLFxuICAgICAgICAvXFwqIEJ1bGxldGVkIGxpc3QgaXRlbVxccyovZyxcbiAgICAgICAgLyMgTnVtYmVyZWQgbGlzdCBpdGVtXFxzKi9nLFxuICAgICAgICAvPGdhbGxlcnk+XFxuRXhhbXBsZS5qcGdcXHxDYXB0aW9uMVxcbkV4YW1wbGUuanBnXFx8Q2FwdGlvbjJcXG48XFwvZ2FsbGVyeT5cXHMqL2csXG4gICAgICAgIC8jUkVESVJFQ1QgXFxbXFxbVGFyZ2V0IHBhZ2UgbmFtZV1dXFxzKi9nLFxuICAgICAgICAvPCEtLSBJbnZpc2libGUgY29tbWVudCAtLT5cXHMqL2csXG4gICAgICAgIC88bm9pbmNsdWRlPlxccyo8XFwvbm9pbmNsdWRlPlxccyovZyxcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCByZWdleCBvZiBzdHJheU1hcmt1cFJlZ2V4ZXMpIHdoaWxlIChyZWdleC50ZXN0KGNvbnRlbnQpKSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZ2V4LCAnJyk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkFDUSxHQUFHLE9BQU8sSUFBSSxtQkFBbUIsRUFBSSxHQUNwQyxHQUFHLE9BQU8sSUFBSSxzQkFBc0IsR0FFekMsR0FBRyxPQUFPLE1BQU0sQ0FBQyxpQkFBa0Isc0JBQXNCLEVBQUcsSUFBTSxDQUM5RCxHQUFHLEtBQUssT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT3JCLEVBRW1CLEdBQUcsS0FBSyxlQUNqQixHQUFHLE9BQU8sSUFBSSxNQUFNLElBQU0sVUFBWSxlQUFpQixhQUN2RCxJQUNBLDBCQUNBLGlCQUNKLEVBRUssaUJBQWlCLFFBQVVBLEdBQVUsQ0FDdENBLEVBQU0sZUFBZSxFQUVyQixJQUFNQyxFQUFVLEVBQUUsYUFBYSxFQUMvQixHQUFJQSxFQUFRLFNBQVcsRUFBRyxPQUFPLEdBQUcsT0FBTyxzQkFBdUIsQ0FBRSxLQUFNLFFBQVMsZ0JBQWlCLE9BQVEsQ0FBQyxFQUU3RyxJQUFJQyxFQUFPRCxFQUFRLGNBQWMsYUFBYSxFQUM5QyxHQUFJLENBQUNDLEVBQU0sT0FBTyxHQUFHLE9BQU8sNEJBQTZCLENBQUUsS0FBTSxRQUFTLGdCQUFpQixPQUFRLENBQUMsRUFFcEdBLEVBQU9DLEVBQWdCRCxDQUFJLEVBQzNCQSxFQUFPRSxF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OiBbImV2ZW50IiwgImVkaXRCb3giLCAidGV4dCIsICJmb3JtYXRUZW1wbGF0ZXMiLCAiY2xlYW51cFNlY3Rpb25IZWFkZXJzIiwgImNsZWFudXBNYWdpY1dvcmRzIiwgImNsZWFudXBEaXNwbGF5dGl0bGVzQW5kRGVmYXVsdHNvcnRzIiwgImNsZWFudXBDYXRlZ29yaWVzIiwgImNsZWFudXBMaW5rcyIsICJjbGVhbnVwU3RyYXlNYXJrdXAiLCAiY29udGVudCIsICJGb3JtYXRTdHlsZSIsICJUZW1wbGF0ZSIsICJzdGFydExvY2F0aW9uIiwgInN1YlRlbXBsYXRlIiwgInRyaW1tZWRJbm5lclRleHQiLCAicGlwZUVzY2FwZVJlZ2V4IiwgInBhcmFtZXRlcnMiLCAicGFyYW1ldGVyIiwgInNwbGl0UGFyYW1ldGVycyIsICJlcXVhbHNMb2NhdGlvbiIsICJmb3JtYXRTdHlsZSIsICJ0ZW1wbGF0ZVByZWZpeGVzIiwgInRlbXBsYXRlUHJlZml4IiwgInN0eWxlIiwgIm91dHB1dCIsICJyZXF1aXJlZEtleUxlbmd0aCIsICJqb2luZWRPdXRwdXQiLCAiYWxsVGVtcGxhdGVzIiwgImluc2lkZVRlbXBsYXRlcyIsICJpc0luc2lkZUxpbmsiLCAiaXNJbnNpZGVOb3dpa2kiLCAiaXNJbnNpZGVDb21tZW50IiwgImN1cnJlbnRMb2NhdGlvbiIsICJpc0F0U3RyaW5nIiwgImRlc2lyZWRTdHJpbmciLCAic2hvdWxkSW5jcmVtZW50IiwgInRlbXBsYXRlIiwgImxhc3RUZW1wbGF0ZSIsICJuZXdDb250ZW50IiwgImNvbW1vblJlcGxhY2VtZW50cyIsICJjb21tb25NaXNjYXBpdGFsaXplZFdvcmRzIiwgInJldmVyc2VDb21tb25SZXBsYWNlbWVudHMiLCAia2V5IiwgInZhbHVlcyIsICJ2YWx1ZSIsICJwYXJzZWRIZWFkZXJzIiwgImhlYWRlciIsICJzdGFydE1hcmt1cCIsICJuYW1lIiwgImVuZE1hcmt1cCIsICJjbGVhbmVkTmFtZSIsICJkZXB0aCIsICJjYXBpdGFsaXplZE5hbWUiLCAid29yZCIsICJwYXJzZWRUYWdzIiwgInRhZyIsICJmdWxsVGFnIiwgInR5cGUiLCAiY3VycmVudFRpdGxlIiwgIm9yaWdpbmFsVGFnUmVnZXgiLCAidGl0bGUiLCAibmV3VGV4dCIsICJjbG9zZWRMaW5rcyIsICJsaW5rcyIsICJsYXN0TGluayIsICJuZXdMaW5rQ29udGVudCIsICJsaW5rTG9jYXRpb24iLCAiaW5uZXJMaW5rIiwgInVucGFyc2VkTGluayIsICJsaW5rIiwgImFsdFRleHQiLCAiaXNGaXJzdENoYXJhY3RlckNvbG9uIiwgInNob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiIsICJsaW5rVXBwZXJjYXNlU3RhcnQiLCAibGlua0xvd2VyY2FzZVN0YXJ0IiwgIm5ld0xpbmsiLCAibG9vcENvdW50ZXIiLCAibGlua0RhdGEiLCAibGlua0NvbnRlbnQiLCAic3RyYXlNYXJrdXBSZWdleGVzIiwgInJlZ2V4Il0KfQo=
