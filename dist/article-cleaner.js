// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/article-cleaner.ts

"use strict";(()=>{mw.config.get("wgNamespaceNumber")<0||mw.config.get("wgIsProbablyEditable")&&mw.loader.using(["mediawiki.util","jquery.textSelection"],()=>{mw.util.addCSS(`
#article-cleaner {
    display: none;
}

#content:has(#wpTextbox1) #article-cleaner {
    display: unset;
}`);let e=mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-navigation":"p-cactions","#","Perform article cleanup","article-cleaner"),h=!1,u="Cleaned up article content (via [[User:Eejit43/scripts/article-cleaner|article-cleaner]])";mw.hook("ve.saveDialog.stateChanged").add(()=>{if(h){let g=document.querySelector(".ve-ui-mwSaveDialog-summary textarea");g.value.includes(u.slice(1))||(g.value?g.value+=`; ${u.charAt(0).toLowerCase()+u.slice(1)}`:g.value=u),h=!1}}),e.addEventListener("click",g=>{g.preventDefault();let o=$("#wpTextbox1");if(o.length===0)return mw.notify("Edit box not found!",{type:"error",autoHideSeconds:"short"});let p=o.textSelection("getContents"),t=p;if(t=C(t),t=E(t),t=v(t),t=L(t),t=I(t,[N,F]),t=R(t),t=M(t),t=O(t),t=D(t),p===t)mw.notify("No changes to be made to the article!",{type:"warn",autoHideSeconds:"short"});else{if(ve.init){let c=ve.init.target.getSurface().getModel();c.getLinearFragment(c.getRangeFromSourceOffsets(0,p.length)).insertContent(t),c.setSelection(new ve.dm.LinearSelection(new ve.Range(0,0)))}else o.textSelection("setContents",t),o.textSelection("setSelection",{start:0});mw.notify("Article cleanup complete!",{type:"success",autoHideSeconds:"short"});let d=document.querySelector("#wpSummary");d?d.value.includes(u.slice(1))||(d.value?d.value+=`; ${u.charAt(0).toLowerCase()+u.slice(1)}`:d.value=u):h=!0}})});function y(e){return e.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}function C(e){let h={"See also":["also see"],References:["reference","source","sources","citation","citations"],"Further reading":["further reading"],"External links":["external link","weblink","weblinks"]},u=["and","birth","career","death","education","life","or"],g=Object.fromEntries(Object.entries(h).flatMap(([c,i])=>i.map(s=>[s,c]))),p=[...e.matchAll(/(?<=^|\n)\n*(?<startMarkup>=+) *(?<name>.*?) *(?<endMarkup>=+)(\n+|$)/g)].map(c=>{let{name:i}=c.groups,{startMarkup:s,endMarkup:a}=c.groups;i=i.replaceAll(/'{3}/g,"");let r=i.matchAll(/\[\[(.+?)]]/g).toArray();for(let l of r)i=i.replace(l[0],l[1].split("|").at(-1));let f=Math.max(s.length,a.length,2);return{name:i,depth:f,original:c[0]}}),t=new Set(p.map(c=>c.name.toLowerCase())),d=p.length>0&&/^\n*=+ | =+\n+$/.test(p[0].original)?" ":"";for(let c of p){let i=c.name.toLowerCase(),a=i in g&&!t.has(g[i].toLowerCase())?g[i]:c.name;for(let f of u)a=a.replaceAll(new RegExp(`\\b${f}\\b`,"gi"),f);a=a.charAt(0).toUpperCase()+a.slice(1);let r=`${"=".repeat(c.depth)}${d}${a}${d}${"=".repeat(c.depth)}`;c.original!==r&&(e=e.replace(c.original,`

${r}
`))}return e}function E(e){return e.replaceAll(/__(INDEX|NOINDEX|NEWSECTIONLINK|NONEWSECTIONLINK|NOEDITSECTION|DISAMBIG|STATICREDIRECT|FORCETOC)__\n*/g,"")}function v(e){let u=[...e.matchAll(/{{(displaytitle|defaultsort)[:|](.*?)}}/gi)].map(o=>{let[p,t,d]=o;return{type:t.toUpperCase(),value:d,original:p}}),g=mw.Title.newFromText(mw.config.get("wgPageName"));for(let o of u){let p=new RegExp(`${y(o.original)}
*`,"g"),t=mw.Title.makeTitle(g.getNamespaceId(),o.value.includes(":")?o.value.split(":")[1]:o.value);if(!t)continue;if(g.toText()===t.toText()){e=e.replace(p,"");continue}let d=`{{${o.type}:${t.toText()}}}
`;e=e.replace(p,d)}return e}function L(e){return e.replaceAll(/(\[\[|}}):?category:(.*?)(]]|}})/gi,`[[${mw.config.get("wgCanonicalNamespace")==="Draft"?":":""}Category:$2]]`)}function I(e,h){let u=[],g=[],o=!1,p=!1,t=0;function d(s,a=!0){let r=e.slice(t,t+s.length)===s;return r&&a&&(t+=s.length),r}for(;t<e.length;)if(d("<nowiki>"))o=!0;else if(d("</nowiki>"))o=!1;else if(d("<!--"))p=!0;else if(d("-->"))p=!1;else if(!o&&!p)if(d("[["))g.push({start:t-2,end:-1,isNested:g.length>0});else if(d("]]")){let s=g.pop();if(!s)continue;s.end=t,u.push(s)}else t++;else t++;let c=[],i=Object.values(mw.config.get("wgFormattedNamespaces"));for(let s of u){let a=e.slice(s.start+2,s.end-2),[r,...f]=a.split("|");e=e.slice(0,s.start+2)+"\0".repeat(r.length)+e.slice(s.start+2+r.length);let l=r.replaceAll("_"," ").trim(),n=f.join("|");n=n===" "?" ":n.trim();let m=l.startsWith(":");m&&(l=l.slice(1));let x=!1,S=l.charAt(0).toUpperCase()+l.slice(1),T=l.charAt(0).toLowerCase()+l.slice(1),b=l.split(":")[0];b=b.charAt(0).toUpperCase()+b.slice(1),l.includes(":")&&(S.startsWith("Image:")&&(l=`${l.startsWith("Image:")?"F":"f"}ile:${l.slice(6)}`),m&&(["Image","File","Category"].includes(S.split(":")[0])||!i.includes(b))&&(x=!0));let k="";l===n?n="":new RegExp(`^${y(l)}[a-z]+$`).test(n)&&(k=n.slice(l.length),n="");for(let w of[S,T])w===n?(l=w,n=""):new RegExp(`^${y(w)}[a-z]+$`).test(n)&&(l=w,k=n.slice(w.length),n="");(n&&l.includes(":")&&i.includes(b)||l.startsWith("file:")||l.startsWith("category:"))&&(l=l.charAt(0).toUpperCase()+l.slice(1)),l=`${x?":":""}${l}`,l=l.padStart(r.length,"\0");let A=`[[${l}${n?`|${n}`:""}]]${k}`;c.push([s,A])}for(let s of h)e=s(e,1);for(let s=0;s<2;s++)for(let[a,r]of c)s===0&&a.isNested||s===1&&!a.isNested||(e=e.slice(0,a.start)+r.padEnd(a.end-a.start,"\0")+e.slice(a.end));for(let s of h)e=s(e,2);return e.replaceAll("\0","")}function N(e,h){let u="\x7F",g="\x9F";return h===1?(e=e.replaceAll(/[“”„‟]/g,'"'),e=e.replaceAll(/[‘’‚‛]/g,"'"),e=e.replaceAll("\u2026",u),e=e.replaceAll("\xA0",g)):(e=e.replaceAll(u,"..."),e=e.replaceAll(g,"&nbsp;")),e}function F(e,h){return h===1&&(e=e.replaceAll(/(\(\d{3,4}) ?[‒–−-] ?(\d{3,4}\))/g,(u,g,o)=>`${g}\u2013${o}`.padEnd(u.length,"\0"))),e}function R(e){let h=[/'+(Bold|Italic)( text)?'+ */g,/(<big>)+Big( text)?(<\/big>)+ */g,/(<small>)+Small( text)?(<\/small>)+ */g,/(<sup>)+Superscript( text)?(<\/sup>)+ */g,/(<sub>)+Subscript( text)?(<\/sub>)+ */g,/(<s>)+Strikethrough(<\/s>)+ */g,/(<u>)+Underline(<\/u>)+ */g,/(<code>)+Computer code(<\/code>)+ */g,/(<nowiki>)+Insert non-formatted text here(<\/nowiki>)+ */g,/=+ Heading text =+ */g,/\* Bulleted list item */g,/# Numbered list item */g,/<gallery>\nExample.jpg\|Caption1\nExample.jpg\|Caption2\n<\/gallery> */g,/#REDIRECT \[\[Target page name]] */g,/<!-- Invisible comment --> */g,/<\s*(big|small|sup|sub|s|u|code|nowiki|noinclude|onlyinclude|includeonly|center|blockquote|gallery)\s*(\s+[^<>]*)?>\s*<\s*\/\s*\1\s*>/gi];for(let u of h)for(;u.test(e);)e=e.replace(u,"");return e}function M(e){return e=e.replaceAll(/(\b|\p{Punctuation}|\]\]|\}\}) {2,}(\b|\p{Punctuation}|\[\[|\{\{)/gu,"$1 $2"),e=e.replaceAll(/^ +| +$/gm,""),e=e.replaceAll(/\n{3,}/g,`

`),e=e.replace(/\s*({{[^}]*stub}})/i,`


$1`),e=e.replaceAll(/\s+$/g,""),e=e.replaceAll(/^([#*]+) */gm,"$1 "),e=e.replaceAll(/^([#*] .*)\n+(?=[#*] )/gm,`$1
`),e=e.replaceAll(/\s+(?=<ref(?!erences))/g,""),e=e.replaceAll(/^(=+.*?=+)$\n{2,}(?=^=+.*?=+$)/gm,`$1
`),e=e.trim(),e}function O(e){e=e.replaceAll(/((?:<ref(?!erences).*?>.*?<\/ref>)+)([!,.;?])/g,"$2$1");let h=[],u=!1,g=!1,o=0;function p(i){let s=e.slice(o,o+i.length)===i;return s&&(o+=i.length),s}function t(i){for(;o<e.length&&!p(i);)o++}for(;o<e.length;)if(p("<nowiki>"))u=!0;else if(p("</nowiki>"))u=!1;else if(p("<!--"))g=!0;else if(p("-->"))g=!1;else if(!u&&!g)if(!p("<references")&&p("<ref")){let i=o-4;t(">");let s=e.slice(i,o-1).trim().endsWith("/");h.push(s?{start:i,end:o,isSelfClosing:s}:{start:i,end:-1})}else p("</ref>")?h.at(-1).end=o:o++;else o++;let d=new DOMParser,c=[];for(let i of h){let s=e.slice(i.start,i.end),a=/<ref(?!erences).*?>/is.exec(s)[0],f=d.parseFromString(i.isSelfClosing?a.replace(/ *\/ *>/," />"):a+"</ref>","text/html").body.firstChild.outerHTML.replaceAll("&amp;","&"),l=s.slice(a.length,-6).trim();f=i.isSelfClosing||l.length===0?f.replace(/>\s*<\/ref>/," />"):`${f.slice(0,-6)}${l}</ref>`,s!==f&&c.push([s,f])}for(let[i,s]of c)e=e.replace(i,s);return e}function D(e){let h;(n=>(n[n.Expanded=0]="Expanded",n[n.ExpandedAligned=1]="ExpandedAligned",n[n.Minimized=2]="Minimized",n[n.MinimizedSpaced=3]="MinimizedSpaced"))(h||={});class u{location;isNested=!1;fullText;fullTextEscaped;name;parameters=[];subTemplates=[];placeholderStrings=["\u{F0000}","\u{10FFFF}","\u{FFFFE}"];pipeEscapeRegexes=[/(\[\[[^\]]*?)\|(.*?]])/g,/(<!--.*?)\|(.*?-->)/g,/(<nowiki>.*?)\|(.*?<\/nowiki>)/g];defaultTemplateStyles={1:["automatic taxobox","blockquote","hybridbox","ichnobox","infobox","infraspeciesbox","listen","location map many","motorsport season","multiple image","mycomorphbox","navbox","oobox","osm location map","quote box","speciesbox","succession box","taxobox","virusbox"],2:["coord","end date","lang","langx","start date"],3:["infobox mapframe"]};constructor(r){this.location={start:r}}parse(){this.fullText=e.slice(this.location.start,this.location.end),this.fullTextEscaped=this.fullText;for(let m of this.subTemplates)m.parse(),this.fullTextEscaped=this.fullTextEscaped.replace(m.fullText,this.placeholderStrings[0]);let r=this.fullTextEscaped.slice(2,-2).trim();for(let m of this.pipeEscapeRegexes)for(;m.test(r);)r=r.replaceAll(m,`$1${this.placeholderStrings[1]}$2`);let f=[/<(\w+)( [^<>]+?)(?<!\/)>.*?<\/\1>/g,/<(\w+)( [^<>]+?)\/>/g];for(let m of f)r=r.replaceAll(m,(x,S,T)=>x.replace(T,T.replaceAll("=",this.placeholderStrings[2])));let l=r.split("|").map(m=>m.replaceAll(this.placeholderStrings[1],"|").trim());this.name=l.shift();let n=l.map(m=>{let x=m.indexOf("=");if(x===-1)return{key:null,value:m.replaceAll(this.placeholderStrings[2],"=").trim()};let S=m.slice(x+1).replaceAll(this.placeholderStrings[2],"=");return{key:m.slice(0,x).trim(),value:`${S.startsWith(`
`)?`
`:""}${S.trim()}`}});this.parameters=n}getStyle(){let r=0,f;for(let[l,n]of Object.entries(this.defaultTemplateStyles))for(let m of n)this.name.toLowerCase().startsWith(m)&&m.length>=r&&(r=m.length,f=Number.parseInt(l));return f}format(){this.fullText||this.parse();let r=this.getStyle();if(r===void 0)return this.fullText;let f=[`{{${this.name}`];if(r===0||r===1){let n=0;r===1&&(n=Math.max(...this.parameters.map(m=>m.key?.length??0)));for(let m of this.parameters)f.push(`| ${m.key?`${m.key.padEnd(n)} = `:""}${m.value}`)}else for(let n of this.parameters)n.value&&f.push(`|${n.key?`${n.key}=`:""}${n.value}`);f.push("}}"),f.length===2?(f[0]+="}}",f.pop()):r===3&&(f[f.length-2]+="}}",f.pop());let l=f.join(r===0||r===1?`
`:r===3?" ":"");for(let n of this.subTemplates)l=l.replace(this.placeholderStrings[0],n.format());return l}}let g=[],o=[],p=!1,t=!1,d=!1,c=0;function i(a){let r=e.slice(c,c+a.length)===a;return r&&(c+=a.length),r}for(;c<e.length;)if(i("<nowiki>"))t=!0;else if(i("</nowiki>"))t=!1;else if(i("<!--"))d=!0;else if(i("-->"))d=!1;else if(!t&&!d)if(i("[["))p=!0;else if(p&&i("]]"))p=!1;else if(i("{{")){let a=new u(c-2);o.length>0&&(a.isNested=!0,o.at(-1)?.subTemplates.push(a)),o.push(a)}else if(i("}}")){let a=o.pop();if(!a)continue;a.location.end=c,g.push(a)}else c++;else c++;let s=e;for(let a of g)a.isNested||(a.parse(),s=s.replace(a.fullText,a.format()));return s}})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9hcnRpY2xlLWNsZWFuZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImRlY2xhcmUgZ2xvYmFsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhbmVvdXMtY2xhc3NcbiAgICBjbGFzcyBWZVJhbmdlIHtcbiAgICAgICAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpO1xuICAgIH1cblxuICAgIGNsYXNzIFZlRnJhZ21lbnQge1xuICAgICAgICBpbnNlcnRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgfVxuXG4gICAgY2xhc3MgVmVTdXJmYWNlTW9kZWwge1xuICAgICAgICBnZXRMaW5lYXJGcmFnbWVudChyYW5nZTogVmVSYW5nZSk6IFZlRnJhZ21lbnQ7XG4gICAgICAgIGdldFJhbmdlRnJvbVNvdXJjZU9mZnNldHMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBWZVJhbmdlO1xuICAgICAgICBzZXRTZWxlY3Rpb24oc2VsZWN0aW9uOiBWZUxpbmVhclNlbGVjdGlvbik6IHZvaWQ7XG4gICAgfVxuXG4gICAgY2xhc3MgVmVUYXJnZXQge1xuICAgICAgICBnZXRTdXJmYWNlKCk6IHsgZ2V0TW9kZWwoKTogVmVTdXJmYWNlTW9kZWwgfTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhbmVvdXMtY2xhc3NcbiAgICBjbGFzcyBWZUxpbmVhclNlbGVjdGlvbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHJhbmdlOiBWZVJhbmdlKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZToge1xuICAgICAgICBSYW5nZTogdHlwZW9mIFZlUmFuZ2U7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgIGRtOiB7IExpbmVhclNlbGVjdGlvbjogdHlwZW9mIFZlTGluZWFyU2VsZWN0aW9uIH07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgIGluaXQ/OiB7IHRhcmdldDogVmVUYXJnZXQgfTtcbiAgICB9O1xufVxuXG5leHBvcnQge307XG5cbigoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgPCAwKSByZXR1cm47IC8vIERvbid0IHJ1biBpbiB2aXJ0dWFsIG5hbWVzcGFjZXNcbiAgICBpZiAoIW13LmNvbmZpZy5nZXQoJ3dnSXNQcm9iYWJseUVkaXRhYmxlJykpIHJldHVybjsgLy8gRG9uJ3QgcnVuIGlmIHVzZXIgY2FuJ3QgZWRpdCBwYWdlXG5cbiAgICBtdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdqcXVlcnkudGV4dFNlbGVjdGlvbiddLCAoKSA9PiB7XG4gICAgICAgIG13LnV0aWwuYWRkQ1NTKGBcbiNhcnRpY2xlLWNsZWFuZXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjb250ZW50Omhhcygjd3BUZXh0Ym94MSkgI2FydGljbGUtY2xlYW5lciB7XG4gICAgZGlzcGxheTogdW5zZXQ7XG59YCk7XG5cbiAgICAgICAgY29uc3QgbGluayA9IG13LnV0aWwuYWRkUG9ydGxldExpbmsoXG4gICAgICAgICAgICBtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtaW5lcnZhJyA/ICdwLW5hdmlnYXRpb24nIDogJ3AtY2FjdGlvbnMnLFxuICAgICAgICAgICAgJyMnLFxuICAgICAgICAgICAgJ1BlcmZvcm0gYXJ0aWNsZSBjbGVhbnVwJyxcbiAgICAgICAgICAgICdhcnRpY2xlLWNsZWFuZXInLFxuICAgICAgICApITtcblxuICAgICAgICBsZXQgc2hvdWxkQWRkU2NyaXB0TWVzc2FnZSA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IHNjcmlwdE1lc3NhZ2UgPSAnQ2xlYW5lZCB1cCBhcnRpY2xlIGNvbnRlbnQgKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL2FydGljbGUtY2xlYW5lcnxhcnRpY2xlLWNsZWFuZXJdXSknO1xuXG4gICAgICAgIG13Lmhvb2soJ3ZlLnNhdmVEaWFsb2cuc3RhdGVDaGFuZ2VkJykuYWRkKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzaG91bGRBZGRTY3JpcHRNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MVGV4dEFyZWFFbGVtZW50PignLnZlLXVpLW13U2F2ZURpYWxvZy1zdW1tYXJ5IHRleHRhcmVhJykhO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5SW5wdXQudmFsdWUuaW5jbHVkZXMoc2NyaXB0TWVzc2FnZS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQudmFsdWUpIHN1bW1hcnlJbnB1dC52YWx1ZSArPSBgOyAke3NjcmlwdE1lc3NhZ2UuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBzY3JpcHRNZXNzYWdlLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc3VtbWFyeUlucHV0LnZhbHVlID0gc2NyaXB0TWVzc2FnZTtcblxuICAgICAgICAgICAgICAgIHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgZWRpdEJveCA9ICQoJyN3cFRleHRib3gxJyk7XG4gICAgICAgICAgICBpZiAoZWRpdEJveC5sZW5ndGggPT09IDApIHJldHVybiBtdy5ub3RpZnkoJ0VkaXQgYm94IG5vdCBmb3VuZCEnLCB7IHR5cGU6ICdlcnJvcicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcblxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdnZXRDb250ZW50cycpO1xuXG4gICAgICAgICAgICBsZXQgZmluYWxUZXh0ID0gb3JpZ2luYWxUZXh0O1xuXG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU2VjdGlvbkhlYWRlcnMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBNYWdpY1dvcmRzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cENhdGVnb3JpZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBMaW5rcyhmaW5hbFRleHQsIFtjbGVhbnVwSW1wcm9wZXJDaGFyYWN0ZXJzLCBjbGVhbnVwWWVhclJhbmdlc10pO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFN0cmF5TWFya3VwKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU3BhY2luZyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFJlZmVyZW5jZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGZvcm1hdFRlbXBsYXRlcyhmaW5hbFRleHQpO1xuXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxUZXh0ID09PSBmaW5hbFRleHQpIG13Lm5vdGlmeSgnTm8gY2hhbmdlcyB0byBiZSBtYWRlIHRvIHRoZSBhcnRpY2xlIScsIHsgdHlwZTogJ3dhcm4nLCBhdXRvSGlkZVNlY29uZHM6ICdzaG9ydCcgfSk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodmUuaW5pdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdXJmYWNlTW9kZWwgPSB2ZS5pbml0LnRhcmdldC5nZXRTdXJmYWNlKCkuZ2V0TW9kZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBzdXJmYWNlTW9kZWwuZ2V0TGluZWFyRnJhZ21lbnQoc3VyZmFjZU1vZGVsLmdldFJhbmdlRnJvbVNvdXJjZU9mZnNldHMoMCwgb3JpZ2luYWxUZXh0Lmxlbmd0aCkpO1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5pbnNlcnRDb250ZW50KGZpbmFsVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHN1cmZhY2VNb2RlbC5zZXRTZWxlY3Rpb24obmV3IHZlLmRtLkxpbmVhclNlbGVjdGlvbihuZXcgdmUuUmFuZ2UoMCwgMCkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlZGl0Qm94LnRleHRTZWxlY3Rpb24oJ3NldENvbnRlbnRzJywgZmluYWxUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICBlZGl0Qm94LnRleHRTZWxlY3Rpb24oJ3NldFNlbGVjdGlvbicsIHsgc3RhcnQ6IDAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbXcubm90aWZ5KCdBcnRpY2xlIGNsZWFudXAgY29tcGxldGUhJywgeyB0eXBlOiAnc3VjY2VzcycsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oJyN3cFN1bW1hcnknKTtcbiAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeUlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3VtbWFyeUlucHV0LnZhbHVlLmluY2x1ZGVzKHNjcmlwdE1lc3NhZ2Uuc2xpY2UoMSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1bW1hcnlJbnB1dC52YWx1ZSkgc3VtbWFyeUlucHV0LnZhbHVlICs9IGA7ICR7c2NyaXB0TWVzc2FnZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHNjcmlwdE1lc3NhZ2Uuc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugc3VtbWFyeUlucHV0LnZhbHVlID0gc2NyaXB0TWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugc2hvdWxkQWRkU2NyaXB0TWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoKTtcblxuLyoqXG4gKiBFc2NhcGVzIHJlZ2V4IGNoYXJhY3RlcnMgaW4gYSBzdHJpbmcuXG4gKiBAcGFyYW0gc3RyaW5nIFRoZSBzdHJpbmcgdG8gZXNjYXBlIHJlZ2V4IGNoYXJhY3RlcnMgaW4uXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZVJlZ2V4Q2hhcmFjdGVycyhzdHJpbmc6IHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZUFsbCgvWyQoKSorLj9bXFxcXFxcXV57fH1dL2csICdcXFxcJCYnKTtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgc2VjdGlvbiBoZWFkZXJzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFNlY3Rpb25IZWFkZXJzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IGNvbW1vblJlcGxhY2VtZW50cyA9IHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4gICAgICAgICdTZWUgYWxzbyc6IFsnYWxzbyBzZWUnXSxcbiAgICAgICAgJ1JlZmVyZW5jZXMnOiBbJ3JlZmVyZW5jZScsICdzb3VyY2UnLCAnc291cmNlcycsICdjaXRhdGlvbicsICdjaXRhdGlvbnMnXSxcbiAgICAgICAgJ0Z1cnRoZXIgcmVhZGluZyc6IFsnZnVydGhlciByZWFkaW5nJ10sXG4gICAgICAgICdFeHRlcm5hbCBsaW5rcyc6IFsnZXh0ZXJuYWwgbGluaycsICd3ZWJsaW5rJywgJ3dlYmxpbmtzJ10sXG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4gICAgfTtcblxuICAgIGNvbnN0IGNvbW1vbk1pc2NhcGl0YWxpemVkV29yZHMgPSBbJ2FuZCcsICdiaXJ0aCcsICdjYXJlZXInLCAnZGVhdGgnLCAnZWR1Y2F0aW9uJywgJ2xpZmUnLCAnb3InXTtcblxuICAgIGNvbnN0IHJldmVyc2VDb21tb25SZXBsYWNlbWVudHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGNvbW1vblJlcGxhY2VtZW50cykuZmxhdE1hcCgoW2tleSwgdmFsdWVzXSkgPT4gdmFsdWVzLm1hcCgodmFsdWUpID0+IFt2YWx1ZSwga2V5XSkpLFxuICAgICk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gY29udGVudC5tYXRjaEFsbCgvKD88PV58XFxuKVxcbiooPzxzdGFydE1hcmt1cD49KykgKig/PG5hbWU+Lio/KSAqKD88ZW5kTWFya3VwPj0rKShcXG4rfCQpL2cpO1xuXG4gICAgY29uc3QgcGFyc2VkSGVhZGVycyA9IFsuLi5oZWFkZXJzXS5tYXAoKGhlYWRlcikgPT4ge1xuICAgICAgICBsZXQgeyBuYW1lIH0gPSBoZWFkZXIuZ3JvdXBzITtcbiAgICAgICAgY29uc3QgeyBzdGFydE1hcmt1cCwgZW5kTWFya3VwIH0gPSBoZWFkZXIuZ3JvdXBzITtcblxuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8nezN9L2csICcnKTtcblxuICAgICAgICBjb25zdCBsaW5rcyA9IG5hbWUubWF0Y2hBbGwoL1xcW1xcWyguKz8pXV0vZykudG9BcnJheSgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgbGluayBvZiBsaW5rcykgbmFtZSA9IG5hbWUucmVwbGFjZShsaW5rWzBdLCBsaW5rWzFdLnNwbGl0KCd8JykuYXQoLTEpISk7XG5cbiAgICAgICAgY29uc3QgZGVwdGggPSBNYXRoLm1heChzdGFydE1hcmt1cC5sZW5ndGgsIGVuZE1hcmt1cC5sZW5ndGgsIDIpO1xuXG4gICAgICAgIHJldHVybiB7IG5hbWUsIGRlcHRoLCBvcmlnaW5hbDogaGVhZGVyWzBdIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBoZWFkZXJzU2V0ID0gbmV3IFNldChwYXJzZWRIZWFkZXJzLm1hcCgoaGVhZGVyKSA9PiBoZWFkZXIubmFtZS50b0xvd2VyQ2FzZSgpKSk7XG5cbiAgICBjb25zdCB0aXRsZVNwYWNlciA9IHBhcnNlZEhlYWRlcnMubGVuZ3RoID4gMCA/ICgvXlxcbio9KyB8ID0rXFxuKyQvLnRlc3QocGFyc2VkSGVhZGVyc1swXS5vcmlnaW5hbCkgPyAnICcgOiAnJykgOiAnJztcblxuICAgIGZvciAoY29uc3QgaGVhZGVyIG9mIHBhcnNlZEhlYWRlcnMpIHtcbiAgICAgICAgY29uc3QgbG93ZXJjYXNlTmFtZSA9IGhlYWRlci5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgY29uc3QgcmVwbGFjZWROYW1lID1cbiAgICAgICAgICAgIGxvd2VyY2FzZU5hbWUgaW4gcmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50cyAmJiAhaGVhZGVyc1NldC5oYXMocmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50c1tsb3dlcmNhc2VOYW1lXS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgID8gcmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50c1tsb3dlcmNhc2VOYW1lXVxuICAgICAgICAgICAgICAgIDogaGVhZGVyLm5hbWU7XG5cbiAgICAgICAgbGV0IGNhcGl0YWxpemVkTmFtZSA9IHJlcGxhY2VkTmFtZTtcblxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgY29tbW9uTWlzY2FwaXRhbGl6ZWRXb3JkcykgY2FwaXRhbGl6ZWROYW1lID0gY2FwaXRhbGl6ZWROYW1lLnJlcGxhY2VBbGwobmV3IFJlZ0V4cChgXFxcXGIke3dvcmR9XFxcXGJgLCAnZ2knKSwgd29yZCk7XG5cbiAgICAgICAgY2FwaXRhbGl6ZWROYW1lID0gY2FwaXRhbGl6ZWROYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FwaXRhbGl6ZWROYW1lLnNsaWNlKDEpO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGAkeyc9Jy5yZXBlYXQoaGVhZGVyLmRlcHRoKX0ke3RpdGxlU3BhY2VyfSR7Y2FwaXRhbGl6ZWROYW1lfSR7dGl0bGVTcGFjZXJ9JHsnPScucmVwZWF0KGhlYWRlci5kZXB0aCl9YDtcblxuICAgICAgICBpZiAoaGVhZGVyLm9yaWdpbmFsICE9PSBvdXRwdXQpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoaGVhZGVyLm9yaWdpbmFsLCBgXFxuXFxuJHtvdXRwdXR9XFxuYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB1bm5lY2Vzc2FyeSBtYWdpYyB3b3JkcyBmcm9tIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cE1hZ2ljV29yZHMoY29udGVudDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZUFsbCgvX18oSU5ERVh8Tk9JTkRFWHxORVdTRUNUSU9OTElOS3xOT05FV1NFQ1RJT05MSU5LfE5PRURJVFNFQ1RJT058RElTQU1CSUd8U1RBVElDUkVESVJFQ1R8Rk9SQ0VUT0MpX19cXG4qL2csICcnKTtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgRElTUExBWVRJVExFcyBhbmQgREVGQVVMVFNPUlRzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cERpc3BsYXl0aXRsZXNBbmREZWZhdWx0c29ydHMoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgdGFncyA9IGNvbnRlbnQubWF0Y2hBbGwoL3t7KGRpc3BsYXl0aXRsZXxkZWZhdWx0c29ydClbOnxdKC4qPyl9fS9naSk7XG5cbiAgICBjb25zdCBwYXJzZWRUYWdzID0gWy4uLnRhZ3NdLm1hcCgodGFnKSA9PiB7XG4gICAgICAgIGNvbnN0IFtmdWxsVGFnLCB0eXBlLCB2YWx1ZV0gPSB0YWc7XG5cbiAgICAgICAgcmV0dXJuIHsgdHlwZTogdHlwZS50b1VwcGVyQ2FzZSgpLCB2YWx1ZSwgb3JpZ2luYWw6IGZ1bGxUYWcgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGN1cnJlbnRUaXRsZSA9IG13LlRpdGxlLm5ld0Zyb21UZXh0KG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSkhO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgcGFyc2VkVGFncykge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFRhZ1JlZ2V4ID0gbmV3IFJlZ0V4cChgJHtlc2NhcGVSZWdleENoYXJhY3RlcnModGFnLm9yaWdpbmFsKX1cXG4qYCwgJ2cnKTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IG13LlRpdGxlLm1ha2VUaXRsZShjdXJyZW50VGl0bGUuZ2V0TmFtZXNwYWNlSWQoKSwgdGFnLnZhbHVlLmluY2x1ZGVzKCc6JykgPyB0YWcudmFsdWUuc3BsaXQoJzonKVsxXSA6IHRhZy52YWx1ZSk7XG5cbiAgICAgICAgaWYgKCF0aXRsZSkgY29udGludWU7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRUaXRsZS50b1RleHQoKSA9PT0gdGl0bGUudG9UZXh0KCkpIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUYWdSZWdleCwgJycpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdUZXh0ID0gYHt7JHt0YWcudHlwZX06JHt0aXRsZS50b1RleHQoKX19fVxcbmA7XG5cbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShvcmlnaW5hbFRhZ1JlZ2V4LCBuZXdUZXh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgY2F0ZWdvcmllcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBDYXRlZ29yaWVzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHJldHVybiBjb250ZW50LnJlcGxhY2VBbGwoXG4gICAgICAgIC8oXFxbXFxbfH19KTo/Y2F0ZWdvcnk6KC4qPykoXV18fX0pL2dpLFxuICAgICAgICBgW1ske213LmNvbmZpZy5nZXQoJ3dnQ2Fub25pY2FsTmFtZXNwYWNlJykgPT09ICdEcmFmdCcgPyAnOicgOiAnJ31DYXRlZ29yeTokMl1dYCxcbiAgICApO1xufVxuXG5pbnRlcmZhY2UgTGlua0luZm9ybWF0aW9uIHtcbiAgICBzdGFydDogbnVtYmVyO1xuICAgIGVuZDogbnVtYmVyO1xuICAgIGlzTmVzdGVkOiBib29sZWFuO1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBsaW5rcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKiBAcGFyYW0gZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkIFRoZSBmdW5jdGlvbnMgY2FsbGVkIHdoaWxlIHRoZSBsaW5rcyBhcmUgZXNjYXBlZC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cExpbmtzKGNvbnRlbnQ6IHN0cmluZywgZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkOiAoKGNvbnRlbnQ6IHN0cmluZywgcnVuOiAxIHwgMikgPT4gc3RyaW5nKVtdKSB7XG4gICAgY29uc3QgY2xvc2VkTGlua3M6IExpbmtJbmZvcm1hdGlvbltdID0gW107XG4gICAgY29uc3QgbGlua3M6IExpbmtJbmZvcm1hdGlvbltdID0gW107XG5cbiAgICBsZXQgaXNJbnNpZGVOb3dpa2kgPSBmYWxzZTtcbiAgICBsZXQgaXNJbnNpZGVDb21tZW50ID0gZmFsc2U7XG5cbiAgICBsZXQgY3VycmVudExvY2F0aW9uID0gMDtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY29udGVudCBmb2xsb3dpbmcgdGhlIGN1cnJlbnQgbG9jYXRpb24gbWF0Y2hlcyB0aGUgZGVzaXJlZCBzdHJpbmcuXG4gICAgICogQHBhcmFtIGRlc2lyZWRTdHJpbmcgVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSBzaG91bGRJbmNyZW1lbnQgV2hldGhlciB0byBpbmNyZW1lbnQgdGhlIGN1cnJlbnQgbG9jYXRpb24gaWYgdGhlIHN0cmluZyBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZywgc2hvdWxkSW5jcmVtZW50ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZyAmJiBzaG91bGRJbmNyZW1lbnQpIGN1cnJlbnRMb2NhdGlvbiArPSBkZXNpcmVkU3RyaW5nLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gaXNBdFN0cmluZztcbiAgICB9XG5cbiAgICB3aGlsZSAoY3VycmVudExvY2F0aW9uIDwgY29udGVudC5sZW5ndGgpXG4gICAgICAgIGlmIChpc0F0U3RyaW5nKCc8bm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwvbm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8IS0tJykpIGlzSW5zaWRlQ29tbWVudCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJy0tPicpKSBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoIWlzSW5zaWRlTm93aWtpICYmICFpc0luc2lkZUNvbW1lbnQpXG4gICAgICAgICAgICBpZiAoaXNBdFN0cmluZygnW1snKSkgbGlua3MucHVzaCh7IHN0YXJ0OiBjdXJyZW50TG9jYXRpb24gLSAyLCBlbmQ6IC0xLCBpc05lc3RlZDogbGlua3MubGVuZ3RoID4gMCB9KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJ11dJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0TGluayA9IGxpbmtzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGlmICghbGFzdExpbmspIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgbGFzdExpbmsuZW5kID0gY3VycmVudExvY2F0aW9uO1xuXG4gICAgICAgICAgICAgICAgY2xvc2VkTGlua3MucHVzaChsYXN0TGluayk7XG4gICAgICAgICAgICB9IGVsc2UgY3VycmVudExvY2F0aW9uKys7XG4gICAgICAgIGVsc2UgY3VycmVudExvY2F0aW9uKys7XG5cbiAgICBjb25zdCBuZXdMaW5rQ29udGVudDogW0xpbmtJbmZvcm1hdGlvbiwgc3RyaW5nXVtdID0gW107XG5cbiAgICBjb25zdCBuYW1lc3BhY2VOYW1lcyA9IE9iamVjdC52YWx1ZXMobXcuY29uZmlnLmdldCgnd2dGb3JtYXR0ZWROYW1lc3BhY2VzJykpO1xuXG4gICAgZm9yIChjb25zdCBsaW5rTG9jYXRpb24gb2YgY2xvc2VkTGlua3MpIHtcbiAgICAgICAgY29uc3QgaW5uZXJMaW5rID0gY29udGVudC5zbGljZShsaW5rTG9jYXRpb24uc3RhcnQgKyAyLCBsaW5rTG9jYXRpb24uZW5kIC0gMik7XG5cbiAgICAgICAgY29uc3QgW3VucGFyc2VkTGluaywgLi4ucGFyYW1ldGVyc10gPSBpbm5lckxpbmsuc3BsaXQoJ3wnKTtcblxuICAgICAgICAvLyBSZXBsYWNlIGxpbmsgbmFtZXMgc28gdGhlc2Ugd29uJ3QgYmUgYWZmZWN0ZWQgYnkgZnVuY3Rpb25zIGNhbGxlZCB3aGlsZSBlc2NhcGVkXG4gICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgY29udGVudC5zbGljZSgwLCBsaW5rTG9jYXRpb24uc3RhcnQgKyAyKSArXG4gICAgICAgICAgICAnXFwwJy5yZXBlYXQodW5wYXJzZWRMaW5rLmxlbmd0aCkgK1xuICAgICAgICAgICAgY29udGVudC5zbGljZShsaW5rTG9jYXRpb24uc3RhcnQgKyAyICsgdW5wYXJzZWRMaW5rLmxlbmd0aCk7XG5cbiAgICAgICAgbGV0IGxpbmsgPSB1bnBhcnNlZExpbmsucmVwbGFjZUFsbCgnXycsICcgJykudHJpbSgpO1xuICAgICAgICBsZXQgYWx0VGV4dCA9IHBhcmFtZXRlcnMuam9pbignfCcpO1xuICAgICAgICBhbHRUZXh0ID0gYWx0VGV4dCA9PT0gJyAnID8gJyAnIDogYWx0VGV4dC50cmltKCk7XG5cbiAgICAgICAgY29uc3QgaXNGaXJzdENoYXJhY3RlckNvbG9uID0gbGluay5zdGFydHNXaXRoKCc6Jyk7XG4gICAgICAgIGlmIChpc0ZpcnN0Q2hhcmFjdGVyQ29sb24pIGxpbmsgPSBsaW5rLnNsaWNlKDEpO1xuXG4gICAgICAgIGxldCBzaG91bGRGaXJzdENoYXJhY3RlckJlQ29sb24gPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBsaW5rVXBwZXJjYXNlU3RhcnQgPSBsaW5rLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbGluay5zbGljZSgxKTtcbiAgICAgICAgY29uc3QgbGlua0xvd2VyY2FzZVN0YXJ0ID0gbGluay5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIGxpbmsuc2xpY2UoMSk7XG5cbiAgICAgICAgbGV0IG5hbWVzcGFjZSA9IGxpbmsuc3BsaXQoJzonKVswXTtcbiAgICAgICAgbmFtZXNwYWNlID0gbmFtZXNwYWNlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZXNwYWNlLnNsaWNlKDEpO1xuXG4gICAgICAgIGlmIChsaW5rLmluY2x1ZGVzKCc6JykpIHtcbiAgICAgICAgICAgIGlmIChsaW5rVXBwZXJjYXNlU3RhcnQuc3RhcnRzV2l0aCgnSW1hZ2U6JykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRTdGFydFVwcGVyY2FzZSA9IGxpbmsuc3RhcnRzV2l0aCgnSW1hZ2U6Jyk7XG5cbiAgICAgICAgICAgICAgICBsaW5rID0gYCR7c2hvdWxkU3RhcnRVcHBlcmNhc2UgPyAnRicgOiAnZid9aWxlOiR7bGluay5zbGljZSg2KX1gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaXNGaXJzdENoYXJhY3RlckNvbG9uICYmXG4gICAgICAgICAgICAgICAgKFsnSW1hZ2UnLCAnRmlsZScsICdDYXRlZ29yeSddLmluY2x1ZGVzKGxpbmtVcHBlcmNhc2VTdGFydC5zcGxpdCgnOicpWzBdKSB8fCAhbmFtZXNwYWNlTmFtZXMuaW5jbHVkZXMobmFtZXNwYWNlKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBzaG91bGRGaXJzdENoYXJhY3RlckJlQ29sb24gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGFmdGVyTGlua1RleHQgPSAnJztcblxuICAgICAgICBpZiAobGluayA9PT0gYWx0VGV4dCkgYWx0VGV4dCA9ICcnO1xuICAgICAgICBlbHNlIGlmIChuZXcgUmVnRXhwKGBeJHtlc2NhcGVSZWdleENoYXJhY3RlcnMobGluayl9W2Etel0rJGApLnRlc3QoYWx0VGV4dCkpIHtcbiAgICAgICAgICAgIGFmdGVyTGlua1RleHQgPSBhbHRUZXh0LnNsaWNlKGxpbmsubGVuZ3RoKTtcbiAgICAgICAgICAgIGFsdFRleHQgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgbmV3TGluayBvZiBbbGlua1VwcGVyY2FzZVN0YXJ0LCBsaW5rTG93ZXJjYXNlU3RhcnRdKVxuICAgICAgICAgICAgaWYgKG5ld0xpbmsgPT09IGFsdFRleHQpIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gbmV3TGluaztcbiAgICAgICAgICAgICAgICBhbHRUZXh0ID0gJyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ldyBSZWdFeHAoYF4ke2VzY2FwZVJlZ2V4Q2hhcmFjdGVycyhuZXdMaW5rKX1bYS16XSskYCkudGVzdChhbHRUZXh0KSkge1xuICAgICAgICAgICAgICAgIGxpbmsgPSBuZXdMaW5rO1xuICAgICAgICAgICAgICAgIGFmdGVyTGlua1RleHQgPSBhbHRUZXh0LnNsaWNlKG5ld0xpbmsubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhbHRUZXh0ID0gJyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKGFsdFRleHQgJiYgbGluay5pbmNsdWRlcygnOicpICYmIG5hbWVzcGFjZU5hbWVzLmluY2x1ZGVzKG5hbWVzcGFjZSkpIHx8XG4gICAgICAgICAgICBsaW5rLnN0YXJ0c1dpdGgoJ2ZpbGU6JykgfHxcbiAgICAgICAgICAgIGxpbmsuc3RhcnRzV2l0aCgnY2F0ZWdvcnk6JylcbiAgICAgICAgKVxuICAgICAgICAgICAgbGluayA9IGxpbmsuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBsaW5rLnNsaWNlKDEpO1xuXG4gICAgICAgIGxpbmsgPSBgJHtzaG91bGRGaXJzdENoYXJhY3RlckJlQ29sb24gPyAnOicgOiAnJ30ke2xpbmt9YDtcblxuICAgICAgICBsaW5rID0gbGluay5wYWRTdGFydCh1bnBhcnNlZExpbmsubGVuZ3RoLCAnXFwwJyk7XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYFtbJHtsaW5rfSR7YWx0VGV4dCA/IGB8JHthbHRUZXh0fWAgOiAnJ31dXSR7YWZ0ZXJMaW5rVGV4dH1gO1xuXG4gICAgICAgIG5ld0xpbmtDb250ZW50LnB1c2goW2xpbmtMb2NhdGlvbiwgb3V0cHV0XSk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBmdW5jdGlvblRvQ2FsbCBvZiBmdW5jdGlvbnNDYWxsZWRXaGlsZUVzY2FwZWQpIGNvbnRlbnQgPSBmdW5jdGlvblRvQ2FsbChjb250ZW50LCAxKTtcblxuICAgIGZvciAobGV0IGxvb3BDb3VudGVyID0gMDsgbG9vcENvdW50ZXIgPCAyOyBsb29wQ291bnRlcisrKVxuICAgICAgICBmb3IgKGNvbnN0IFtsaW5rRGF0YSwgbGlua0NvbnRlbnRdIG9mIG5ld0xpbmtDb250ZW50KSB7XG4gICAgICAgICAgICBpZiAobG9vcENvdW50ZXIgPT09IDAgJiYgbGlua0RhdGEuaXNOZXN0ZWQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAobG9vcENvdW50ZXIgPT09IDEgJiYgIWxpbmtEYXRhLmlzTmVzdGVkKSBjb250aW51ZTtcblxuICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgICAgY29udGVudC5zbGljZSgwLCBsaW5rRGF0YS5zdGFydCkgKyBsaW5rQ29udGVudC5wYWRFbmQobGlua0RhdGEuZW5kIC0gbGlua0RhdGEuc3RhcnQsICdcXDAnKSArIGNvbnRlbnQuc2xpY2UobGlua0RhdGEuZW5kKTtcbiAgICAgICAgfVxuXG4gICAgZm9yIChjb25zdCBmdW5jdGlvblRvQ2FsbCBvZiBmdW5jdGlvbnNDYWxsZWRXaGlsZUVzY2FwZWQpIGNvbnRlbnQgPSBmdW5jdGlvblRvQ2FsbChjb250ZW50LCAyKTtcblxuICAgIHJldHVybiBjb250ZW50LnJlcGxhY2VBbGwoJ1xcMCcsICcnKTtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgaW1wcm9wZXIgY2hhcmFjdGVycyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKiBAcGFyYW0gcnVuIFRoZSBydW4gbnVtYmVyIG9mIHRoZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cEltcHJvcGVyQ2hhcmFjdGVycyhjb250ZW50OiBzdHJpbmcsIHJ1bjogMSB8IDIpIHtcbiAgICBjb25zdCBlbGlwc2lzUGxhY2Vob2xkZXIgPSAnXFx1MDA3Ric7XG4gICAgY29uc3QgbmJzcFBsYWNlaG9sZGVyID0gJ1xcdTAwOUYnO1xuXG4gICAgaWYgKHJ1biA9PT0gMSkge1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9bXHUyMDFDXHUyMDFEXHUyMDFFXHUyMDFGXS9nLCAnXCInKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvW1x1MjAxOFx1MjAxOVx1MjAxQVx1MjAxQl0vZywgXCInXCIpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCdcdTIwMjYnLCBlbGlwc2lzUGxhY2Vob2xkZXIpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKCdcdTAwQTAnLCBuYnNwUGxhY2Vob2xkZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoZWxpcHNpc1BsYWNlaG9sZGVyLCAnLi4uJyk7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwobmJzcFBsYWNlaG9sZGVyLCAnJm5ic3A7Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIHllYXIgcmFuZ2VzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqIEBwYXJhbSBydW4gVGhlIHJ1biBudW1iZXIgb2YgdGhlIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwWWVhclJhbmdlcyhjb250ZW50OiBzdHJpbmcsIHJ1bjogMSB8IDIpIHtcbiAgICBpZiAocnVuID09PSAxKVxuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXFwoXFxkezMsNH0pID9bXHUyMDEyXHUyMDEzXHUyMjEyLV0gPyhcXGR7Myw0fVxcKSkvZywgKG9yaWdpbmFsLCBzdGFydCwgZW5kKSA9PlxuICAgICAgICAgICAgYCR7c3RhcnR9XHUyMDEzJHtlbmR9YC5wYWRFbmQob3JpZ2luYWwubGVuZ3RoLCAnXFwwJyksXG4gICAgICAgICk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHN0cmF5IG1hcmt1cCBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBTdHJheU1hcmt1cChjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdHJheU1hcmt1cFJlZ2V4ZXMgPSBbXG4gICAgICAgIC8nKyhCb2xkfEl0YWxpYykoIHRleHQpPycrICovZyxcbiAgICAgICAgLyg8YmlnPikrQmlnKCB0ZXh0KT8oPFxcL2JpZz4pKyAqL2csXG4gICAgICAgIC8oPHNtYWxsPikrU21hbGwoIHRleHQpPyg8XFwvc21hbGw+KSsgKi9nLFxuICAgICAgICAvKDxzdXA+KStTdXBlcnNjcmlwdCggdGV4dCk/KDxcXC9zdXA+KSsgKi9nLFxuICAgICAgICAvKDxzdWI+KStTdWJzY3JpcHQoIHRleHQpPyg8XFwvc3ViPikrICovZyxcbiAgICAgICAgLyg8cz4pK1N0cmlrZXRocm91Z2goPFxcL3M+KSsgKi9nLFxuICAgICAgICAvKDx1PikrVW5kZXJsaW5lKDxcXC91PikrICovZyxcbiAgICAgICAgLyg8Y29kZT4pK0NvbXB1dGVyIGNvZGUoPFxcL2NvZGU+KSsgKi9nLFxuICAgICAgICAvKDxub3dpa2k+KStJbnNlcnQgbm9uLWZvcm1hdHRlZCB0ZXh0IGhlcmUoPFxcL25vd2lraT4pKyAqL2csXG4gICAgICAgIC89KyBIZWFkaW5nIHRleHQgPSsgKi9nLFxuICAgICAgICAvXFwqIEJ1bGxldGVkIGxpc3QgaXRlbSAqL2csXG4gICAgICAgIC8jIE51bWJlcmVkIGxpc3QgaXRlbSAqL2csXG4gICAgICAgIC88Z2FsbGVyeT5cXG5FeGFtcGxlLmpwZ1xcfENhcHRpb24xXFxuRXhhbXBsZS5qcGdcXHxDYXB0aW9uMlxcbjxcXC9nYWxsZXJ5PiAqL2csXG4gICAgICAgIC8jUkVESVJFQ1QgXFxbXFxbVGFyZ2V0IHBhZ2UgbmFtZV1dICovZyxcbiAgICAgICAgLzwhLS0gSW52aXNpYmxlIGNvbW1lbnQgLS0+ICovZyxcbiAgICAgICAgLzxcXHMqKGJpZ3xzbWFsbHxzdXB8c3VifHN8dXxjb2RlfG5vd2lraXxub2luY2x1ZGV8b25seWluY2x1ZGV8aW5jbHVkZW9ubHl8Y2VudGVyfGJsb2NrcXVvdGV8Z2FsbGVyeSlcXHMqKFxccytbXjw+XSopPz5cXHMqPFxccypcXC9cXHMqXFwxXFxzKj4vZ2ksXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgcmVnZXggb2Ygc3RyYXlNYXJrdXBSZWdleGVzKSB3aGlsZSAocmVnZXgudGVzdChjb250ZW50KSkgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWdleCwgJycpO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIHNwYWNpbmcgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU3BhY2luZyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXFxifFxccHtQdW5jdHVhdGlvbn18XFxdXFxdfFxcfVxcfSkgezIsfShcXGJ8XFxwe1B1bmN0dWF0aW9ufXxcXFtcXFt8XFx7XFx7KS9ndSwgJyQxICQyJyk7IC8vIFJlbW92ZSBleHRyYSBzcGFjZXMgYmV0d2VlbiB3b3JkcyBhbmQgc2VudGVuY2VzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXiArfCArJC9nbSwgJycpOyAvLyBSZW1vdmUgZXh0cmEgc3BhY2VzIGF0IHRoZSBzdGFydCBvciBlbmQgb2YgbGluZXNcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9cXG57Myx9L2csICdcXG5cXG4nKTsgLy8gUmVtb3ZlIGV4dHJhIG5ld2xpbmVzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzKih7e1tefV0qc3R1Yn19KS9pLCAnXFxuXFxuXFxuJDEnKTsgLy8gRW5zdXJlIHRoZXJlIGFyZSB0aHJlZSBuZXdsaW5lcyBiZWZvcmUgdGhlIGZpcnN0IHN0dWIgdGVtcGxhdGVcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9cXHMrJC9nLCAnJyk7IC8vIFJlbW92ZSB0cmFpbGluZyBzcGFjZXNcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9eKFsjKl0rKSAqL2dtLCAnJDEgJyk7IC8vIEVuc3VyZSB0aGVyZSBpcyBhIHNwYWNlIGFmdGVyIGEgYnVsbGV0IG9yIGhhc2ggaW4gYSBsaXN0IGl0ZW1cbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9eKFsjKl0gLiopXFxuKyg/PVsjKl0gKS9nbSwgJyQxXFxuJyk7IC8vIFJlbW92ZSBuZXdsaW5lcyBiZXR3ZWVuIGxpc3QgaXRlbXNcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9cXHMrKD89PHJlZig/IWVyZW5jZXMpKS9nLCAnJyk7IC8vIFJlbW92ZSBzcGFjZXMgYmVmb3JlIHJlZmVyZW5jZXNcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9eKD0rLio/PSspJFxcbnsyLH0oPz1ePSsuKj89KyQpL2dtLCAnJDFcXG4nKTsgLy8gUmVtb3ZlIGV4dHJhIG5ld2xpbmVzIGJldHdlZW4gZW1wdHkgc2VjdGlvbiBhbmQgZm9sbG93aW5nIHNlY3Rpb25cbiAgICBjb250ZW50ID0gY29udGVudC50cmltKCk7IC8vIFJlbW92ZSBleHRyYSBuZXdsaW5lcyBhdCB0aGUgc3RhcnQgb3IgZW5kIG9mIHRoZSBjb250ZW50XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgcmVmZXJlbmNlcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBSZWZlcmVuY2VzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLygoPzo8cmVmKD8hZXJlbmNlcykuKj8+Lio/PFxcL3JlZj4pKykoWyEsLjs/XSkvZywgJyQyJDEnKTsgLy8gRml4IHB1bmN0dWF0aW9uIGZvbGxvd2luZyByZWZlcmVuY2VzXG5cbiAgICBjb25zdCByZWZlcmVuY2VzOiB7IHN0YXJ0OiBudW1iZXI7IGVuZDogbnVtYmVyOyBpc1NlbGZDbG9zaW5nPzogdHJ1ZSB9W10gPSBbXTtcblxuICAgIGxldCBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgIGxldCBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcblxuICAgIGxldCBjdXJyZW50TG9jYXRpb24gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBjb250ZW50IGZvbGxvd2luZyB0aGUgY3VycmVudCBsb2NhdGlvbiBtYXRjaGVzIHRoZSBkZXNpcmVkIHN0cmluZy5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFN0cmluZyBUaGUgc3RyaW5nIHRvIHNlYXJjaCBmb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBdFN0cmluZyhkZXNpcmVkU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgaXNBdFN0cmluZyA9IGNvbnRlbnQuc2xpY2UoY3VycmVudExvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gKyBkZXNpcmVkU3RyaW5nLmxlbmd0aCkgPT09IGRlc2lyZWRTdHJpbmc7XG5cbiAgICAgICAgaWYgKGlzQXRTdHJpbmcpIGN1cnJlbnRMb2NhdGlvbiArPSBkZXNpcmVkU3RyaW5nLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gaXNBdFN0cmluZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZWVkcyB0aHJvdWdoIHRoZSBjb250ZW50IHVudGlsIHRoZSBkZXNpcmVkIHN0cmluZyBpcyBmb3VuZC5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFN0cmluZyBUaGUgc3RyaW5nIHRvIHNlYXJjaCBmb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJvY2VlZFVudGlsU3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZykge1xuICAgICAgICB3aGlsZSAoY3VycmVudExvY2F0aW9uIDwgY29udGVudC5sZW5ndGggJiYgIWlzQXRTdHJpbmcoZGVzaXJlZFN0cmluZykpIGN1cnJlbnRMb2NhdGlvbisrO1xuICAgIH1cblxuICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgaWYgKGlzQXRTdHJpbmcoJzxub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPC9ub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwhLS0nKSkgaXNJbnNpZGVDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnLS0+JykpIGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmICghaXNJbnNpZGVOb3dpa2kgJiYgIWlzSW5zaWRlQ29tbWVudClcbiAgICAgICAgICAgIGlmICghaXNBdFN0cmluZygnPHJlZmVyZW5jZXMnKSAmJiBpc0F0U3RyaW5nKCc8cmVmJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IGN1cnJlbnRMb2NhdGlvbiAtIDQ7XG5cbiAgICAgICAgICAgICAgICBwcm9jZWVkVW50aWxTdHJpbmcoJz4nKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGlzU2VsZkNsb3NpbmcgPSBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgIC5zbGljZShzdGFydCwgY3VycmVudExvY2F0aW9uIC0gMSlcbiAgICAgICAgICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgICAgICAgICAuZW5kc1dpdGgoJy8nKTtcblxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZXMucHVzaChpc1NlbGZDbG9zaW5nID8geyBzdGFydCwgZW5kOiBjdXJyZW50TG9jYXRpb24sIGlzU2VsZkNsb3NpbmcgfSA6IHsgc3RhcnQsIGVuZDogLTEgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwvcmVmPicpKSByZWZlcmVuY2VzLmF0KC0xKSEuZW5kID0gY3VycmVudExvY2F0aW9uO1xuICAgICAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcbiAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcblxuICAgIGNvbnN0IHJlcGxhY2VtZW50czogW3N0cmluZywgc3RyaW5nXVtdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHJlZmVyZW5jZSBvZiByZWZlcmVuY2VzKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGNvbnRlbnQuc2xpY2UocmVmZXJlbmNlLnN0YXJ0LCByZWZlcmVuY2UuZW5kKTtcblxuICAgICAgICBjb25zdCBzdGFydFRhZyA9IC88cmVmKD8hZXJlbmNlcykuKj8+L2lzLmV4ZWMob3JpZ2luYWxUZXh0KSFbMF07XG5cbiAgICAgICAgY29uc3QgcGFyc2VkVGFnID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhcbiAgICAgICAgICAgIHJlZmVyZW5jZS5pc1NlbGZDbG9zaW5nID8gc3RhcnRUYWcucmVwbGFjZSgvICpcXC8gKj4vLCAnIC8+JykgOiBzdGFydFRhZyArICc8L3JlZj4nLFxuICAgICAgICAgICAgJ3RleHQvaHRtbCcsXG4gICAgICAgICkuYm9keS5maXJzdENoaWxkIGFzIEhUTUxVbmtub3duRWxlbWVudDtcblxuICAgICAgICBsZXQgb3V0cHV0ID0gcGFyc2VkVGFnLm91dGVySFRNTC5yZXBsYWNlQWxsKCcmYW1wOycsICcmJyk7XG5cbiAgICAgICAgY29uc3QgdGFnQ29udGVudCA9IG9yaWdpbmFsVGV4dC5zbGljZShzdGFydFRhZy5sZW5ndGgsIC02KS50cmltKCk7XG5cbiAgICAgICAgb3V0cHV0ID1cbiAgICAgICAgICAgIHJlZmVyZW5jZS5pc1NlbGZDbG9zaW5nIHx8IHRhZ0NvbnRlbnQubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgPyBvdXRwdXQucmVwbGFjZSgvPlxccyo8XFwvcmVmPi8sICcgLz4nKVxuICAgICAgICAgICAgICAgIDogYCR7b3V0cHV0LnNsaWNlKDAsIC02KX0ke3RhZ0NvbnRlbnR9PC9yZWY+YDtcblxuICAgICAgICBpZiAob3JpZ2luYWxUZXh0ICE9PSBvdXRwdXQpIHJlcGxhY2VtZW50cy5wdXNoKFtvcmlnaW5hbFRleHQsIG91dHB1dF0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgW29yaWdpbmFsVGV4dCwgb3V0cHV0XSBvZiByZXBsYWNlbWVudHMpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUZXh0LCBvdXRwdXQpO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogRm9ybWF0cyB0ZW1wbGF0ZSBzcGFjaW5nIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBmb3JtYXQuXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFRlbXBsYXRlcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBlbnVtIEZvcm1hdFN0eWxlIHtcbiAgICAgICAgRXhwYW5kZWQsXG4gICAgICAgIEV4cGFuZGVkQWxpZ25lZCxcbiAgICAgICAgTWluaW1pemVkLFxuICAgICAgICBNaW5pbWl6ZWRTcGFjZWQsXG4gICAgfVxuXG4gICAgY2xhc3MgVGVtcGxhdGUge1xuICAgICAgICBwdWJsaWMgbG9jYXRpb246IHsgc3RhcnQ6IG51bWJlcjsgZW5kPzogbnVtYmVyIH07XG4gICAgICAgIHB1YmxpYyBpc05lc3RlZCA9IGZhbHNlO1xuXG4gICAgICAgIHB1YmxpYyBmdWxsVGV4dD86IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSBmdWxsVGV4dEVzY2FwZWQ/OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgbmFtZT86IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSBwYXJhbWV0ZXJzOiB7IGtleTogc3RyaW5nIHwgbnVsbDsgdmFsdWU6IHN0cmluZyB9W10gPSBbXTtcbiAgICAgICAgcHVibGljIHN1YlRlbXBsYXRlczogVGVtcGxhdGVbXSA9IFtdO1xuXG4gICAgICAgIHByaXZhdGUgcGxhY2Vob2xkZXJTdHJpbmdzID0gWydcXHV7RjAwMDB9JywgJ1xcdXsxMEZGRkZ9JywgJ1xcdXtGRkZGRX0nXTtcblxuICAgICAgICBwcml2YXRlIHBpcGVFc2NhcGVSZWdleGVzID0gWy8oXFxbXFxbW15cXF1dKj8pXFx8KC4qP11dKS9nLCAvKDwhLS0uKj8pXFx8KC4qPy0tPikvZywgLyg8bm93aWtpPi4qPylcXHwoLio/PFxcL25vd2lraT4pL2ddO1xuXG4gICAgICAgIHByaXZhdGUgZGVmYXVsdFRlbXBsYXRlU3R5bGVzID0ge1xuICAgICAgICAgICAgW0Zvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZF06IFtcbiAgICAgICAgICAgICAgICAnYXV0b21hdGljIHRheG9ib3gnLFxuICAgICAgICAgICAgICAgICdibG9ja3F1b3RlJyxcbiAgICAgICAgICAgICAgICAnaHlicmlkYm94JyxcbiAgICAgICAgICAgICAgICAnaWNobm9ib3gnLFxuICAgICAgICAgICAgICAgICdpbmZvYm94JyxcbiAgICAgICAgICAgICAgICAnaW5mcmFzcGVjaWVzYm94JyxcbiAgICAgICAgICAgICAgICAnbGlzdGVuJyxcbiAgICAgICAgICAgICAgICAnbG9jYXRpb24gbWFwIG1hbnknLFxuICAgICAgICAgICAgICAgICdtb3RvcnNwb3J0IHNlYXNvbicsXG4gICAgICAgICAgICAgICAgJ211bHRpcGxlIGltYWdlJyxcbiAgICAgICAgICAgICAgICAnbXljb21vcnBoYm94JyxcbiAgICAgICAgICAgICAgICAnbmF2Ym94JyxcbiAgICAgICAgICAgICAgICAnb29ib3gnLFxuICAgICAgICAgICAgICAgICdvc20gbG9jYXRpb24gbWFwJyxcbiAgICAgICAgICAgICAgICAncXVvdGUgYm94JyxcbiAgICAgICAgICAgICAgICAnc3BlY2llc2JveCcsXG4gICAgICAgICAgICAgICAgJ3N1Y2Nlc3Npb24gYm94JyxcbiAgICAgICAgICAgICAgICAndGF4b2JveCcsXG4gICAgICAgICAgICAgICAgJ3ZpcnVzYm94JyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbRm9ybWF0U3R5bGUuTWluaW1pemVkXTogWydjb29yZCcsICdlbmQgZGF0ZScsICdsYW5nJywgJ2xhbmd4JywgJ3N0YXJ0IGRhdGUnXSxcbiAgICAgICAgICAgIFtGb3JtYXRTdHlsZS5NaW5pbWl6ZWRTcGFjZWRdOiBbJ2luZm9ib3ggbWFwZnJhbWUnXSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzdGFydExvY2F0aW9uOiBudW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSB7IHN0YXJ0OiBzdGFydExvY2F0aW9uIH07XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgcGFyc2UoKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUZXh0ID0gY29udGVudC5zbGljZSh0aGlzLmxvY2F0aW9uLnN0YXJ0LCB0aGlzLmxvY2F0aW9uLmVuZCk7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUZXh0RXNjYXBlZCA9IHRoaXMuZnVsbFRleHQ7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViVGVtcGxhdGUgb2YgdGhpcy5zdWJUZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgICAgICBzdWJUZW1wbGF0ZS5wYXJzZSgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5mdWxsVGV4dEVzY2FwZWQgPSB0aGlzLmZ1bGxUZXh0RXNjYXBlZC5yZXBsYWNlKHN1YlRlbXBsYXRlLmZ1bGxUZXh0ISwgdGhpcy5wbGFjZWhvbGRlclN0cmluZ3NbMF0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdHJpbW1lZElubmVyVGV4dCA9IHRoaXMuZnVsbFRleHRFc2NhcGVkLnNsaWNlKDIsIC0yKS50cmltKCk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgcGlwZUVzY2FwZVJlZ2V4IG9mIHRoaXMucGlwZUVzY2FwZVJlZ2V4ZXMpXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBpcGVFc2NhcGVSZWdleC50ZXN0KHRyaW1tZWRJbm5lclRleHQpKVxuICAgICAgICAgICAgICAgICAgICB0cmltbWVkSW5uZXJUZXh0ID0gdHJpbW1lZElubmVyVGV4dC5yZXBsYWNlQWxsKHBpcGVFc2NhcGVSZWdleCwgYCQxJHt0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1sxXX0kMmApO1xuXG4gICAgICAgICAgICBjb25zdCB0YWdFcXVhbHNFc2NhcGVSZWdleGVzID0gWy88KFxcdyspKCBbXjw+XSs/KSg/PCFcXC8pPi4qPzxcXC9cXDE+L2csIC88KFxcdyspKCBbXjw+XSs/KVxcLz4vZ107XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFnRXF1YWxzRXNjYXBlUmVnZXggb2YgdGFnRXF1YWxzRXNjYXBlUmVnZXhlcylcbiAgICAgICAgICAgICAgICB0cmltbWVkSW5uZXJUZXh0ID0gdHJpbW1lZElubmVyVGV4dC5yZXBsYWNlQWxsKHRhZ0VxdWFsc0VzY2FwZVJlZ2V4LCAoZnVsbFRleHQsIHRhZ05hbWU6IHN0cmluZywgYXR0cmlidXRlczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdWxsVGV4dC5yZXBsYWNlKGF0dHJpYnV0ZXMsIGF0dHJpYnV0ZXMucmVwbGFjZUFsbCgnPScsIHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzJdKSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB0cmltbWVkSW5uZXJUZXh0LnNwbGl0KCd8JykubWFwKChwYXJhbWV0ZXIpID0+IHBhcmFtZXRlci5yZXBsYWNlQWxsKHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzFdLCAnfCcpLnRyaW0oKSk7XG5cbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHBhcmFtZXRlcnMuc2hpZnQoKTtcblxuICAgICAgICAgICAgY29uc3Qgc3BsaXRQYXJhbWV0ZXJzID0gcGFyYW1ldGVycy5tYXAoKHBhcmFtZXRlcnMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcXVhbHNMb2NhdGlvbiA9IHBhcmFtZXRlcnMuaW5kZXhPZignPScpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVxdWFsc0xvY2F0aW9uID09PSAtMSkgcmV0dXJuIHsga2V5OiBudWxsLCB2YWx1ZTogcGFyYW1ldGVycy5yZXBsYWNlQWxsKHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzJdLCAnPScpLnRyaW0oKSB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbWV0ZXJzLnNsaWNlKGVxdWFsc0xvY2F0aW9uICsgMSkucmVwbGFjZUFsbCh0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1syXSwgJz0nKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogcGFyYW1ldGVycy5zbGljZSgwLCBlcXVhbHNMb2NhdGlvbikudHJpbSgpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYCR7dmFsdWUuc3RhcnRzV2l0aCgnXFxuJykgPyAnXFxuJyA6ICcnfSR7dmFsdWUudHJpbSgpfWAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBzcGxpdFBhcmFtZXRlcnM7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdldFN0eWxlKCkge1xuICAgICAgICAgICAgbGV0IG1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZVByZWZpeExlbmd0aCA9IDA7XG4gICAgICAgICAgICBsZXQgbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlRm9ybWF0U3R5bGU6IEZvcm1hdFN0eWxlIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtmb3JtYXRTdHlsZSwgdGVtcGxhdGVQcmVmaXhlc10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5kZWZhdWx0VGVtcGxhdGVTdHlsZXMpKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGVtcGxhdGVQcmVmaXggb2YgdGVtcGxhdGVQcmVmaXhlcylcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lIS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgodGVtcGxhdGVQcmVmaXgpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByZWZpeC5sZW5ndGggPj0gbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlUHJlZml4TGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlUHJlZml4TGVuZ3RoID0gdGVtcGxhdGVQcmVmaXgubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlRm9ybWF0U3R5bGUgPSBOdW1iZXIucGFyc2VJbnQoZm9ybWF0U3R5bGUpIGFzIEZvcm1hdFN0eWxlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBmb3JtYXQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZnVsbFRleHQpIHRoaXMucGFyc2UoKTtcblxuICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmdldFN0eWxlKCk7XG4gICAgICAgICAgICBpZiAoc3R5bGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHRoaXMuZnVsbFRleHQhO1xuXG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBbYHt7JHt0aGlzLm5hbWV9YF07XG5cbiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWQgfHwgc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZCkge1xuICAgICAgICAgICAgICAgIGxldCByZXF1aXJlZEtleUxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZClcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRLZXlMZW5ndGggPSBNYXRoLm1heCguLi50aGlzLnBhcmFtZXRlcnMubWFwKChwYXJhbWV0ZXIpID0+IHBhcmFtZXRlci5rZXk/Lmxlbmd0aCA/PyAwKSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtZXRlciBvZiB0aGlzLnBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGB8ICR7cGFyYW1ldGVyLmtleSA/IGAke3BhcmFtZXRlci5rZXkucGFkRW5kKHJlcXVpcmVkS2V5TGVuZ3RoKX0gPSBgIDogJyd9JHtwYXJhbWV0ZXIudmFsdWV9YCk7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtZXRlciBvZiB0aGlzLnBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbWV0ZXIudmFsdWUpIG91dHB1dC5wdXNoKGB8JHtwYXJhbWV0ZXIua2V5ID8gYCR7cGFyYW1ldGVyLmtleX09YCA6ICcnfSR7cGFyYW1ldGVyLnZhbHVlfWApO1xuXG4gICAgICAgICAgICBvdXRwdXQucHVzaCgnfX0nKTtcblxuICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbMF0gKz0gJ319JztcblxuICAgICAgICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLk1pbmltaXplZFNwYWNlZCkge1xuICAgICAgICAgICAgICAgIG91dHB1dFtvdXRwdXQubGVuZ3RoIC0gMl0gKz0gJ319JztcblxuICAgICAgICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGpvaW5lZE91dHB1dCA9IG91dHB1dC5qb2luKFxuICAgICAgICAgICAgICAgIHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZCB8fCBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkXG4gICAgICAgICAgICAgICAgICAgID8gJ1xcbidcbiAgICAgICAgICAgICAgICAgICAgOiBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuTWluaW1pemVkU3BhY2VkXG4gICAgICAgICAgICAgICAgICAgICAgPyAnICdcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBzdWJUZW1wbGF0ZSBvZiB0aGlzLnN1YlRlbXBsYXRlcylcbiAgICAgICAgICAgICAgICBqb2luZWRPdXRwdXQgPSBqb2luZWRPdXRwdXQucmVwbGFjZSh0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1swXSwgc3ViVGVtcGxhdGUuZm9ybWF0KCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gam9pbmVkT3V0cHV0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWxsVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG5cbiAgICBjb25zdCBpbnNpZGVUZW1wbGF0ZXM6IFRlbXBsYXRlW10gPSBbXTtcbiAgICBsZXQgaXNJbnNpZGVMaW5rID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZykgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgaWYgKGlzQXRTdHJpbmcoJzxub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPC9ub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwhLS0nKSkgaXNJbnNpZGVDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnLS0+JykpIGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmICghaXNJbnNpZGVOb3dpa2kgJiYgIWlzSW5zaWRlQ29tbWVudClcbiAgICAgICAgICAgIGlmIChpc0F0U3RyaW5nKCdbWycpKSBpc0luc2lkZUxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnNpZGVMaW5rICYmIGlzQXRTdHJpbmcoJ11dJykpIGlzSW5zaWRlTGluayA9IGZhbHNlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygne3snKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKGN1cnJlbnRMb2NhdGlvbiAtIDIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluc2lkZVRlbXBsYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmlzTmVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5zaWRlVGVtcGxhdGVzLmF0KC0xKT8uc3ViVGVtcGxhdGVzLnB1c2godGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGluc2lkZVRlbXBsYXRlcy5wdXNoKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBdFN0cmluZygnfX0nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RUZW1wbGF0ZSA9IGluc2lkZVRlbXBsYXRlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3RUZW1wbGF0ZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBsYXN0VGVtcGxhdGUubG9jYXRpb24uZW5kID0gY3VycmVudExvY2F0aW9uO1xuXG4gICAgICAgICAgICAgICAgYWxsVGVtcGxhdGVzLnB1c2gobGFzdFRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBjdXJyZW50TG9jYXRpb24rKztcbiAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGxldCBuZXdDb250ZW50ID0gY29udGVudDtcblxuICAgIGZvciAoY29uc3QgdGVtcGxhdGUgb2YgYWxsVGVtcGxhdGVzKVxuICAgICAgICBpZiAoIXRlbXBsYXRlLmlzTmVzdGVkKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5wYXJzZSgpO1xuXG4gICAgICAgICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKHRlbXBsYXRlLmZ1bGxUZXh0ISwgdGVtcGxhdGUuZm9ybWF0KCkpO1xuICAgICAgICB9XG5cbiAgICByZXR1cm4gbmV3Q29udGVudDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkFtQ1EsR0FBRyxPQUFPLElBQUksbUJBQW1CLEVBQUksR0FDcEMsR0FBRyxPQUFPLElBQUksc0JBQXNCLEdBRXpDLEdBQUcsT0FBTyxNQUFNLENBQUMsaUJBQWtCLHNCQUFzQixFQUFHLElBQU0sQ0FDOUQsR0FBRyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9yQixFQUVNLElBQU1BLEVBQU8sR0FBRyxLQUFLLGVBQ2pCLEdBQUcsT0FBTyxJQUFJLE1BQU0sSUFBTSxVQUFZLGVBQWlCLGFBQ3ZELElBQ0EsMEJBQ0EsaUJBQ0osRUFFSUMsRUFBeUIsR0FFdkJDLEVBQWdCLDRGQUV0QixHQUFHLEtBQUssNEJBQTRCLEVBQUUsSUFBSSxJQUFNLENBQzVDLEdBQUlELEVBQXdCLENBQ3hCLElBQU1FLEVBQWUsU0FBUyxjQUFtQyxzQ0FBc0MsRUFFbEdBLEVBQWEsTUFBTSxTQUFTRCxFQUFjLE1BQU0sQ0FBQyxDQUFDLElBQy9DQyxFQUFhLE1BQU9BLEVBQWEsT0FBUyxLQUFLRCxFQUFjLE9BQU8sQ0FBQyxFQUFFLFlB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RUFBYWpDLEVBQVEsTUFBTWdDLEVBQWlCQSxFQUFrQkUsRUFBYyxNQUFNLElBQU1BLEVBRTlGLE9BQUlELElBQVlELEdBQW1CRSxFQUFjLFFBRTFDRCxDQUNYLENBRUEsS0FBT0QsRUFBa0JoQyxFQUFRLFFBQzdCLEdBQUlpQyxFQUFXLFVBQVUsRUFBR0gsRUFBaUIsV0FDcENHLEVBQVcsV0FBVyxFQUFHSCxFQUFpQixXQUMxQ0csRUFBVyxNQUFNLEVBQUdGLEVBQWtCLFdBQ3RDRSxFQUFXLEtBQUssRUFBR0YsRUFBa0IsV0FDckMsQ0FBQ0QsR0FBa0IsQ0FBQ0MsRUFDekIsR0FBSUUsRUFBVyxJQUFJLEVBQUc4RCxFQUFlLFdBQzVCQSxHQUFnQjlELEVBQVcsSUFBSSxFQUFHOEQsRUFBZSxXQUNqRDlELEVBQVcsSUFBSSxFQUFHLENBQ3ZCLElBQU0rRCxFQUFXLElBQUl4QixFQUFTeEMsRUFBa0IsQ0FBQyxFQUU3QzhELEVBQWdCLE9BQVMsSUFDekJFLEVBQVMsU0FBVyxHQUNwQkYsRUFBZ0IsR0FBRyxFQUFFLEdBQUcsYUFBYSxLQUFLRSxDQUFRLEdBR3RERixFQUFnQixLQUFLRSxDQUFRLENBQ2pDLFNBQVcvRCxFQUFXLElBQUksRUFBRyxDQUN6QixJQUFNZ0UsRUFBZUgsRUFBZ0IsSUFBSSxFQUN6QyxHQUFJLENBQUNHLEVBQWMsU0FFbkJBLEVBQWEsU0FBUyxJQUFNakUsRUFFNUI2RCxFQUFhLEtBQUtJLENBQVksQ0FDbEMsTUFBT2pFLFNBQ05BLElBRVQsSUFBSWtFLEVBQWFsRyxFQUVqQixRQUFXZ0csS0FBWUgsRUFDZEcsRUFBUyxXQUNWQSxFQUFTLE1BQU0sRUFFZkUsRUFBYUEsRUFBVyxRQUFRRixFQUFTLFNBQVdBLEVBQVMsT0FBTyxDQUFDLEdBRzdFLE9BQU9FLENBQ1giLAogICJuYW1lcyI6IFsibGluayIsICJzaG91bGRBZGRTY3JpcHRNZXNzYWdlIiwgInNjcmlwdE1lc3NhZ2UiLCAic3VtbWFyeUlucHV0IiwgImV2ZW50IiwgImVkaXRCb3giLCAib3JpZ2luYWxUZXh0IiwgImZpbmFsVGV4dCIsICJjbGVhbnVwU2VjdGlvbkhlYWRlcnMiLCAiY2xlYW51cE1hZ2ljV29yZHMiLCAiY2xlYW51cERpc3BsYXl0aXRsZXNBbmREZWZhdWx0c29ydHMiLCAiY2xlYW51cENhdGVnb3JpZXMiLCAiY2xlYW51cExpbmtzIiwgImNsZWFudXBJbXByb3BlckNoYXJhY3RlcnMiLCAiY2xlYW51cFllYXJSYW5nZXMiLCAiY2xlYW51cFN0cmF5TWFya3VwIiwgImNsZWFudXBTcGFjaW5nIiwgImNsZWFudXBSZWZlcmVuY2VzIiwgImZvcm1hdFRlbXBsYXRlcyIsICJzdXJmYWNlTW9kZWwiLCAiZXNjYXBlUmVnZXhDaGFyYWN0ZXJzIiwgInN0cmluZyIsICJjb250ZW50IiwgImNvbW1vblJlcGxhY2VtZW50cyIsICJjb21tb25NaXNjYXBpdGFsaXplZFdvcmRzIiwgInJldmVyc2VDb21tb25SZXBsYWNlbWVudHMiLCAia2V5IiwgInZhbHVlcyIsICJ2YWx1ZSIsICJwYXJzZWRIZWFkZXJzIiwgImhlYWRlciIsICJuYW1lIiwgInN0YXJ0TWFya3VwIiwgImVuZE1hcmt1cCIsICJsaW5rcyIsICJkZXB0aCIsICJoZWFkZXJzU2V0IiwgInRpdGxlU3BhY2VyIiwgImxvd2VyY2FzZU5hbWUiLCAiY2FwaXRhbGl6ZWROYW1lIiwgIndvcmQiLCAib3V0cHV0IiwgInBhcnNlZFRhZ3MiLCAidGFnIiwgImZ1bGxUYWciLCAidHlwZSIsICJjdXJyZW50VGl0bGUiLCAib3JpZ2luYWxUYWdSZWdleCIsICJ0aXRsZSIsICJuZXdUZXh0IiwgImZ1bmN0aW9uc0NhbGxlZFdoaWxlRXNjYXBlZCIsICJjbG9zZWRMaW5rcyIsICJpc0luc2lkZU5vd2lraSIsICJpc0luc2lkZUNvbW1lbnQiLCAiY3VycmVudExvY2F0aW9uIiwgImlzQXRTdHJpbmciLCAiZGVzaXJlZFN0cmluZyIsICJzaG91bGRJbmNyZW1lbnQiLCAibGFzdExpbmsiLCAibmV3TGlua0NvbnRlbnQiLCAibmFtZXNwYWNlTmFtZXMiLCAibGlua0xvY2F0aW9uIiwgImlubmVyTGluayIsICJ1bnBhcnNlZExpbmsiLCAicGFyYW1ldGVycyIsICJhbHRUZXh0IiwgImlzRmlyc3RDaGFyYWN0ZXJDb2xvbiIsICJzaG91bGRGaXJzdENoYXJhY3RlckJlQ29sb24iLCAibGlua1VwcGVyY2FzZVN0YXJ0IiwgImxpbmtMb3dlcmNhc2VTdGFydCIsICJuYW1lc3BhY2UiLCAiYWZ0ZXJMaW5rVGV4dCIsICJuZXdMaW5rIiwgImZ1bmN0aW9uVG9DYWxsIiwgImxvb3BDb3VudGVyIiwgImxpbmtEYXRhIiwgImxpbmtDb250ZW50IiwgInJ1biIsICJlbGlwc2lzUGxhY2Vob2xkZXIiLCAibmJzcFBsYWNlaG9sZGVyIiwgIm9yaWdpbmFsIiwgInN0YXJ0IiwgImVuZCIsICJzdHJheU1hcmt1cFJlZ2V4ZXMiLCAicmVnZXgiLCAicmVmZXJlbmNlcyIsICJwcm9jZWVkVW50aWxTdHJpbmciLCAiaXNTZWxmQ2xvc2luZyIsICJwYXJzZXIiLCAicmVwbGFjZW1lbnRzIiwgInJlZmVyZW5jZSIsICJzdGFydFRhZyIsICJ0YWdDb250ZW50IiwgIkZvcm1hdFN0eWxlIiwgIlRlbXBsYXRlIiwgInN0YXJ0TG9jYXRpb24iLCAic3ViVGVtcGxhdGUiLCAidHJpbW1lZElubmVyVGV4dCIsICJwaXBlRXNjYXBlUmVnZXgiLCAidGFnRXF1YWxzRXNjYXBlUmVnZXhlcyIsICJ0YWdFcXVhbHNFc2NhcGVSZWdleCIsICJmdWxsVGV4dCIsICJ0YWdOYW1lIiwgImF0dHJpYnV0ZXMiLCAicGFyYW1ldGVyIiwgInNwbGl0UGFyYW1ldGVycyIsICJlcXVhbHNMb2NhdGlvbiIsICJtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVQcmVmaXhMZW5ndGgiLCAibW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlRm9ybWF0U3R5bGUiLCAiZm9ybWF0U3R5bGUiLCAidGVtcGxhdGVQcmVmaXhlcyIsICJ0ZW1wbGF0ZVByZWZpeCIsICJzdHlsZSIsICJyZXF1aXJlZEtleUxlbmd0aCIsICJqb2luZWRPdXRwdXQiLCAiYWxsVGVtcGxhdGVzIiwgImluc2lkZVRlbXBsYXRlcyIsICJpc0luc2lkZUxpbmsiLCAidGVtcGxhdGUiLCAibGFzdFRlbXBsYXRlIiwgIm5ld0NvbnRlbnQiXQp9Cg==
