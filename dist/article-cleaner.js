// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/article-cleaner.ts

"use strict";(()=>{mw.config.get("wgNamespaceNumber")<0||mw.config.get("wgIsProbablyEditable")&&mw.loader.using(["mediawiki.util","jquery.textSelection"],()=>{mw.util.addCSS(`
#article-cleaner {
    display: none;
}

#content:has(#wpTextbox1) #article-cleaner {
    display: unset;
}`);let e=mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-navigation":"p-cactions","#","Perform article cleanup","article-cleaner"),p=!1,f="Cleaned up article content (via [[User:Eejit43/scripts/article-cleaner|article-cleaner]])";mw.hook("ve.saveDialog.stateChanged").add(()=>{if(p){let m=document.querySelector(".ve-ui-mwSaveDialog-summary textarea");m.value.includes(f.slice(1))||(m.value&&!m.value.startsWith("/* ")&&!m.value.endsWith(" */ ")?m.value+=`; ${f.charAt(0).toLowerCase()+f.slice(1)}`:m.value=`${m.value}${f}`),p=!1}}),e.addEventListener("click",async m=>{m.preventDefault();let o=$("#wpTextbox1");if(o.length===0)return mw.notify("Edit box not found!",{type:"error",autoHideSeconds:"short"});let g=o.textSelection("getContents"),a=g;if(a=C(a),a=v(a),a=L(a),a=R(a),a=N(a),a=I(a,[P,F]),a=M(a),a=y(a),a=O(a),a=await D(a),a=_(a),a=y(a,!0),a=U(a),g===a)mw.notify("No changes to be made to the article!",{type:"warn",autoHideSeconds:"short"});else{if(ve.init){let u=ve.init.target.getSurface().getModel();u.getLinearFragment(u.getRangeFromSourceOffsets(0,g.length)).insertContent(a),u.setSelection(new ve.dm.LinearSelection(new ve.Range(0,0)))}else o.textSelection("setContents",a),o.textSelection("setSelection",{start:0});mw.notify("Article cleanup complete!",{type:"success",autoHideSeconds:"short"});let d=document.querySelector("#wpSummary");d?d.value.includes(f.slice(1))||(d.value?d.value+=`; ${f.charAt(0).toLowerCase()+f.slice(1)}`:d.value=f):p=!0}})});function A(e){return e.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}function C(e){let p=/[\u0000-\u0009\u000B\u000C\u000E-\u001F\u007F\u00AD\u200B-\u200F\u202A-\u202E\u2060\u2063\uFEFF]/g;return p.test(e)&&(e=e.replaceAll(p,"")),e}function v(e){let p={"See also":["also see"],References:["reference","source","sources","citation","citations"],"Further reading":["further reading"],"External links":["external link","weblink","weblinks"]},f=["and","birth","career","death","education","life","of","or"],m=Object.fromEntries(Object.entries(p).flatMap(([u,r])=>[[u.toLowerCase(),u],...r.map(s=>[s,u])])),g=[...e.matchAll(/(?<=^|\n)\n*(?<startMarkup>=+) *(?<name>.*?) *(?<endMarkup>=+)(\n+|$)/g)].map(u=>{let{name:r}=u.groups,{startMarkup:s,endMarkup:c}=u.groups;r=r.replaceAll(/'{3}/g,"");let b=r.matchAll(/\[\[(.+?)]]/g).toArray();for(let t of b)r=r.replace(t[0],t[1].split("|").at(-1));let E=Math.max(s.length,c.length,2);return{name:r,depth:E,original:u[0]}}),a=new Set(g.map(u=>u.name)),d=g.length>0&&/^\n*=+ | =+\n+$/.test(g[0].original)?" ":"";for(let u of g){let r=u.name.toLowerCase(),c=r in m&&!a.has(m[r])?m[r]:u.name;for(let E of f)c=c.replaceAll(new RegExp(`\\b${E}\\b`,"gi"),E);c=c.charAt(0).toUpperCase()+c.slice(1);let b=`${"=".repeat(u.depth)}${d}${c}${d}${"=".repeat(u.depth)}`;u.original!==b&&(e=e.replace(u.original,`

${b}
`))}return e}function L(e){return e.replaceAll(/__(INDEX|NOINDEX|NEWSECTIONLINK|NONEWSECTIONLINK|NOEDITSECTION|DISAMBIG|STATICREDIRECT|FORCETOC)__\n*/g,"")}function R(e){let f=[...e.matchAll(/{{(displaytitle|defaultsort)[:|](.*?)}}/gi)].map(o=>{let[g,a,d]=o;return{type:a.toUpperCase(),value:d,original:g}}),m=mw.Title.newFromText(mw.config.get("wgPageName"));for(let o of f){let g=new RegExp(`${A(o.original)}
*`,"g"),a=mw.Title.newFromText(o.value);if(!a)continue;let d=mw.Title.makeTitle(m.getNamespaceId(),a.getMainText());if(!d)continue;let u=o.type==="DISPLAYTITLE"?m.toText():m.getMainText(),r=o.type==="DISPLAYTITLE"?d.toText():d.getMainText();if(u===r){e=e.replace(g,"");continue}let s=`{{${o.type}:${r}}}
`;e=e.replace(g,s)}return e}function N(e){return e.replaceAll(/(\[\[|}}):?category:(.*?)(]]|}})/gi,`[[${mw.config.get("wgCanonicalNamespace")==="Draft"?":":""}Category:$2]]`)}function I(e,p){let f=[],m=[],o=!1,g=!1,a=0;function d(s,c=!0){let b=e.slice(a,a+s.length)===s;return b&&c&&(a+=s.length),b}for(;a<e.length;)if(d("<nowiki>"))o=!0;else if(d("</nowiki>"))o=!1;else if(d("<!--"))g=!0;else if(d("-->"))g=!1;else if(!o&&!g)if(d("[["))m.push({start:a-2,end:-1,isNested:m.length>0});else if(d("]]")){let s=m.pop();if(!s)continue;s.end=a,f.push(s)}else a++;else a++;let u=[],r=Object.values(mw.config.get("wgFormattedNamespaces"));for(let s of f){let c=e.slice(s.start+2,s.end-2),[b,...E]=c.split("|");e=e.slice(0,s.start+2)+"\0".repeat(b.length)+e.slice(s.start+2+b.length);let t=b.replaceAll("_"," ").trim(),i=E.join("|");i=i===" "?" ":i.trim();let h=t.startsWith(":");h&&(t=t.slice(1));let n=!1,S=t.charAt(0).toUpperCase()+t.slice(1),l=t.charAt(0).toLowerCase()+t.slice(1),T=t.split(":")[0];T=T.charAt(0).toUpperCase()+T.slice(1),t.includes(":")&&(S.startsWith("Image:")&&(t=`${t.startsWith("Image:")?"F":"f"}ile:${t.slice(6)}`),h&&(["Image","File","Category"].includes(S.split(":")[0])||!r.includes(T))&&(n=!0));let x="";if(/[!',.:;?]$/.test(i)){let w=i.slice(-1);t.endsWith(w)||(x=w,i=i.slice(0,-1))}t===i?i="":new RegExp(`^${A(t)}[a-z]+$`).test(i)&&(x=i.slice(t.length)+x,i="");for(let w of[S,l])w===i?(t=w,i=""):new RegExp(`^${A(w)}[a-z]+$`).test(i)&&(t=w,x=i.slice(w.length)+x,i="");(i&&t.includes(":")&&r.includes(T)||t.startsWith("file:")||t.startsWith("category:"))&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t=`${n?":":""}${t}`,t=t.padStart(b.length,"\0");let k=`[[${t}${i?`|${i}`:""}]]${x}`;u.push([s,k])}for(let s of p)e=s(e,1);for(let s=0;s<2;s++)for(let[c,b]of u)s===0&&c.isNested||s===1&&!c.isNested||(e=e.slice(0,c.start)+b.padEnd(c.end-c.start,"\0")+e.slice(c.end));for(let s of p)e=s(e,2);return e.replaceAll("\0","")}function P(e,p){let f="\x7F",m="\x9F";return p===1?(e=e.replaceAll(/[“”„‟]/g,'"'),e=e.replaceAll(/[‘’‚‛]/g,"'"),e=e.replaceAll("\u2026",f),e=e.replaceAll("\xA0",m)):(e=e.replaceAll(f,"..."),e=e.replaceAll(m,"&nbsp;")),e}function F(e,p){return p===1&&(e=e.replaceAll(/(\(\d{3,4}) ?[‒–−-] ?(\d{3,4}\))/g,(f,m,o)=>`${m}\u2013${o}`.padEnd(f.length,"\0"))),e}function M(e){let p=[/'+(Bold|Italic)( text)?'+ */g,/(<big>)+Big( text)?(<\/big>)+ */g,/(<small>)+Small( text)?(<\/small>)+ */g,/(<sup>)+Superscript( text)?(<\/sup>)+ */g,/(<sub>)+Subscript( text)?(<\/sub>)+ */g,/(<s>)+Strikethrough(<\/s>)+ */g,/(<u>)+Underline(<\/u>)+ */g,/(<code>)+Computer code(<\/code>)+ */g,/(<nowiki>)+Insert non-formatted text here(<\/nowiki>)+ */g,/=+ Heading text =+ */g,/\* Bulleted list item */g,/# Numbered list item */g,/<gallery>\nExample.jpg\|Caption1\nExample.jpg\|Caption2\n<\/gallery> */g,/#REDIRECT \[\[Target page name]] */g,/<!-- Invisible comment --> */g,/<\s*(big|small|sup|sub|s|u|code|nowiki|noinclude|onlyinclude|includeonly|center|blockquote|gallery)\s*(\s+[^<>]*)?>\s*<\s*\/\s*\1\s*>/gi];for(let f of p)for(;f.test(e);)e=e.replace(f,"");return e}function y(e,p=!1){return e=e.replaceAll(/(\b|\p{Punctuation}|\]\]|\}\}|\w>) {2,}(\b|\p{Punctuation}|\[\[|\{\{|<\w)/gu,"$1 $2"),p||(e=e.replaceAll(/^ +| +$/gm,"")),e=e.replaceAll(/\n{3,}/g,`

`),e=e.replace(/\s*({{[^}]*stub}})/i,`

$1`),e=e.replaceAll(/\s+$/g,""),e=e.replaceAll(/^([#*]+) */gm,"$1 "),e=e.replaceAll(/^([#*]+ .*)\n+(?=[#*]+ )/gm,`$1
`),p||(e=e.replaceAll(/(?<!\|)\s+(?=<ref(?!erences))/g,"")),e=e.replaceAll(/<\/([A-Za-z]+) +>/g,"</$1>"),e=e.replaceAll(/^(=+.*?=+)$\n{2,}(?=^=+.*?=+$)/gm,`$1
`),e=e.trim(),e}function O(e){e=e.replaceAll(/((?:<ref(?!erences)[^/]*?>.*?<\/ref>|<ref(?!erences).*?\/>)+)([!,.;?])?/g,(r,s,c)=>(c??"")+s);let p=[],f=!1,m=!1,o=0;function g(r){let s=e.slice(o,o+r.length)===r;return s&&(o+=r.length),s}function a(r){for(;o<e.length&&!g(r);)o++}for(;o<e.length;)if(g("<nowiki>"))f=!0;else if(g("</nowiki>"))f=!1;else if(g("<!--"))m=!0;else if(g("-->"))m=!1;else if(!f&&!m)if(!g("<references")&&g("<ref")){let r=o-4;a(">");let s=e.slice(r,o-1).trim().endsWith("/");p.push(s?{start:r,end:o,isSelfClosing:s}:{start:r,end:-1})}else g("</ref>")?p.at(-1).end=o:o++;else o++;let d=new DOMParser,u=[];for(let r of p){let s=e.slice(r.start,r.end),c=/<ref(?!erences).*?>/is.exec(s)[0],E=d.parseFromString(r.isSelfClosing?c.replace(/ *\/ *>/," />"):c+"</ref>","text/html").body.firstChild.outerHTML.replaceAll("&amp;","&"),t=s.slice(c.length,-6).trim().replaceAll(/^\[ *([^ \]]*) *]$/gm,"$1").trim();E=r.isSelfClosing||t.length===0?E.replace(/>\s*<\/ref>/," />"):`${E.slice(0,-6)}${t}</ref>`,s!==E&&u.push([s,E])}for(let[r,s]of u)e=e.replace(r,s);return e}async function D(e){let p;(S=>(S[S.Expanded=0]="Expanded",S[S.ExpandedAligned=1]="ExpandedAligned",S[S.Minimized=2]="Minimized",S[S.MinimizedSpaced=3]="MinimizedSpaced"))(p||={});let f;(n=>(n[n.User=2]="User",n[n.Template=10]="Template",n[n.Draft=118]="Draft"))(f||={});let m=JSON.parse((await new mw.Api().get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:"User:Eejit43/scripts/article-cleaner.json"})).query.pages[0]?.revisions?.[0]?.slots?.main?.content||"[]"),o=Object.fromEntries(m.flatMap(t=>t.from.map(i=>[i.charAt(0).toLowerCase()+i.slice(1),t.to])));class g{location;isNested=!1;fullText;fullTextEscaped;rawName;name;parameters=[];subTemplates=[];PLACEHOLDER_STRINGS=["\u{F0000}","\u{10FFFF}","\u{FFFFE}"];PIPE_ESCAPE_REGEXES=[/(\[\[[^\]]*?)\|(.*?]])/g,/(<!--.*?)\|(.*?-->)/g,/(<nowiki>.*?)\|(.*?<\/nowiki>)/g];TAG_EQUALS_ESCAPE_REGEXES=[/<(\w+)( [^<>]+?)(?<!\/)>.*?<\/\1>/g,/<(\w+)( [^<>]+?)\/>/g];templateAliases=o;defaultTemplateStyles={1:["album rating","album reviews","american football uniform","australian rules football kit","automatic taxobox","baseball uniform","basketball kit","beachhandball kit","blockquote","chembox","cricket uniform","election box","episode list","external music video","extra album cover","field hockey kit","football box","football kit","footballbox","handball kit","hybridbox","icehockey kit","ichnobox","infobox","infraspeciesbox","judo bracket","judo repechage","listen","location map","medical resources","motorsport season","multiple image","music ratings","mycomorphbox","navbox","oobox","orbitbox","osm location map","quote box","repechage","rugbybox","sidebar","single ratings","singles","song ratings","speciesbox","starbox","succession box","taxobox","team bracket","track listing","tweet","virusbox","volleyball kit","nteambracket","2nteam-nteambracket","2teambracket","3teambracket","3teamrr","4teambracket","4teamrr","5teambracket","5teamrr","6teambracket","6teamrr","7teambracket","7teamrr","8teambracket","8teamroundrobin","8teamrr","9teambracket","10teambracket","11teambracket","12teambracket","13teambracket","14teambracket","15teambracket","16teambracket","18teambracket","20teambracket","24teambracket","27teambracket","32teambracket","40teambracket","48teambracket","64teambracket","128teambracket"],2:["birth date","coord","death date","end date","lang","start date"],3:["infobox mapframe"]};namespaceSpecificTemplates={118:["afc comment","afc submission","afc submission/draft","afc topic","draft article","draft categories","draft topics","draft","drafts moved from mainspace","preloaddraft submit"],2:["dashboard.wikiedu.org sandbox","user sandbox","userspace draft"]};templatesToKeepContent=["draft categories"];templatesToSubst=["articlepagename","articlespace","basepagename","fullpagename","namespace","namespacenumber","pagename","rootpagename","subjectpagename","subjectspace","subpagename","talkpagename","talkspace","pagenamebase"];constructor(i){this.location={start:i}}parse(){this.fullText=e.slice(this.location.start,this.location.end),this.fullTextEscaped=this.fullText;for(let l of this.subTemplates)l.parse(),this.fullTextEscaped=this.fullTextEscaped.replace(l.fullText,this.PLACEHOLDER_STRINGS[0]);let i=this.fullTextEscaped.slice(2,-2).trim();for(let l of this.PIPE_ESCAPE_REGEXES)for(;l.test(i);)i=i.replaceAll(l,`$1${this.PLACEHOLDER_STRINGS[1]}$2`);for(let l of this.TAG_EQUALS_ESCAPE_REGEXES)i=i.replaceAll(l,(T,x,k)=>T.replace(k,k.replaceAll("=",this.PLACEHOLDER_STRINGS[2])));let h=i.split("|").map(l=>l.replaceAll(this.PLACEHOLDER_STRINGS[1],"|").trim());this.rawName=h.shift(),this.name=this.rawName.replaceAll("_"," "),this.name.toLowerCase().startsWith("template:")&&(this.name=this.name.slice(9));let n=this.name.charAt(0).toLowerCase()+this.name.slice(1);this.name=n in this.templateAliases?this.templateAliases[n]:this.name;let S=h.map(l=>{let T=l.indexOf("=");if(T===-1)return{key:null,value:l.replaceAll(this.PLACEHOLDER_STRINGS[2],"=").trim()};let x=l.slice(T+1).replaceAll(this.PLACEHOLDER_STRINGS[2],"=");return{key:l.slice(0,T).trim(),value:`${x.startsWith(`
`)?`
`:""}${x.trim()}`}});this.parameters=S}shouldBeRemoved(){for(let[i,h]of Object.entries(this.namespaceSpecificTemplates))if(mw.config.get("wgNamespaceNumber")!==Number.parseInt(i)&&h.includes(this.name.toLowerCase()))return!0;return!1}getStyle(){let i=0,h;for(let[n,S]of Object.entries(this.defaultTemplateStyles))for(let l of S)this.name.toLowerCase().startsWith(l)&&l.length>=i&&(i=l.length,h=Number.parseInt(n));return h}cleanupParameters(){let i=new Set(["cover","image_flag","image","logo","map_image"]);for(let h=1;h<=10;h++)i.add(`image${h}`);this.parameters=this.parameters.map(({key:h,value:n})=>(h&&i.has(h)&&(n=n.trim(),n.startsWith("[[")&&n.endsWith("]]")&&(n=/\[\[(.*?)]]/g.exec(n)[1].split("|")[0]),n=n.replace(/^(File|Image):/,"").replaceAll("_"," ")),{key:h,value:n}))}format(){if(this.fullText||this.parse(),this.shouldBeRemoved())return this.templatesToKeepContent.includes(this.name.toLowerCase())?this.parameters[0].value:"";let i=mw.config.get("wgNamespaceNumber")!==10&&this.templatesToSubst.some(l=>l===this.name.toLowerCase()||this.name.toLowerCase().startsWith(`${l}:`)),h=this.getStyle();if(h===void 0){let l=this.name;this.name.toLowerCase().startsWith("template:")&&(l=this.name.slice(9)),i&&(l=`subst:${l}`),l!==this.rawName&&(this.fullTextEscaped=this.fullTextEscaped.replace(this.rawName,l));for(let T of this.subTemplates)this.fullTextEscaped=this.fullTextEscaped.replace(this.PLACEHOLDER_STRINGS[0],T.format());return this.fullTextEscaped}let n=[`{{${i?"subst:":""}${this.name}`];if(this.cleanupParameters(),h===0||h===1){let l=0;h===1&&(l=Math.max(...this.parameters.map(T=>T.key?.length??0)));for(let[T,x]of this.parameters.entries())!x.key&&!x.value&&this.parameters.slice(T+1).every(k=>k.key??!k.value)||n.push(`| ${x.key?`${x.key.padEnd(l)} = `:""}${x.value}`)}else for(let[l,T]of this.parameters.entries())!T.value&&(T.key||this.parameters.slice(l+1).every(x=>x.key??!x.value))||n.push(`|${T.key?`${T.key}=`:""}${T.value}`);n.push("}}"),n.length===2?(n[0]+="}}",n.pop()):h===3&&(n[n.length-2]+="}}",n.pop());let S=n.join(h===0||h===1?`
`:h===3?" ":"");for(let l of this.subTemplates)S=S.replace(this.PLACEHOLDER_STRINGS[0],l.format());return S}}let a=[],d=[],u=!1,r=!1,s=!1,c=0;function b(t){let i=e.slice(c,c+t.length)===t;return i&&(c+=t.length),i}for(;c<e.length;)if(b("<nowiki>"))r=!0;else if(b("</nowiki>"))r=!1;else if(b("<!--"))s=!0;else if(b("-->"))s=!1;else if(!r&&!s)if(b("[["))u=!0;else if(u&&b("]]"))u=!1;else if(b("{{")){let t=new g(c-2);d.length>0&&(t.isNested=!0,d.at(-1)?.subTemplates.push(t)),d.push(t)}else if(b("}}")){let t=d.pop();if(!t)continue;t.location.end=c,a.push(t)}else c++;else c++;let E=e;for(let t of a)t.isNested||(t.parse(),E=E.replace(t.fullText,t.format()));return E}function _(e){if(mw.config.get("wgNamespaceNumber")!==0)return e;let p=["Do not remove this line","EDIT BELOW THIS LINE","Important, do not remove anything above this line before article has been created","Important, do not remove this line before article has been created","Inline citations added to your article will automatically display here","Note: The following pages were redirects to "];for(let f of p)e=e.replaceAll(new RegExp(` *<!-- ?${A(f)}.*?--> *
?`,"gs"),"");return e}function U(e){let p=[...e.matchAll(/\[\[Category:/g)].length;return e=e.replaceAll(/\n*{{(uncategorized|improve categories)(\|.+?)?}}\n*/gi,""),p===0&&!/{{uncategorized/i.test(e)?e+=`

{{Uncategorized|{{subst:CURRENTMONTHNAME}} {{subst:CURRENTYEAR}}}}`:p===1&&!/{{improve categories/i.test(e)&&(e+=`

{{Improve categories|{{subst:CURRENTMONTHNAME}} {{subst:CURRENTYEAR}}}}`),e}})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9hcnRpY2xlLWNsZWFuZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMgfSBmcm9tICd0eXBlcy1tZWRpYXdpa2kvYXBpX3BhcmFtcyc7XG5pbXBvcnQgdHlwZSB7IFBhZ2VSZXZpc2lvbnNSZXN1bHQgfSBmcm9tICcuLi9nbG9iYWwtdHlwZXMnO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHRyYW5lb3VzLWNsYXNzXG4gICAgY2xhc3MgVmVSYW5nZSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTtcbiAgICB9XG5cbiAgICBjbGFzcyBWZUZyYWdtZW50IHtcbiAgICAgICAgaW5zZXJ0Q29udGVudChjb250ZW50OiBzdHJpbmcpOiB2b2lkO1xuICAgIH1cblxuICAgIGNsYXNzIFZlU3VyZmFjZU1vZGVsIHtcbiAgICAgICAgZ2V0TGluZWFyRnJhZ21lbnQocmFuZ2U6IFZlUmFuZ2UpOiBWZUZyYWdtZW50O1xuICAgICAgICBnZXRSYW5nZUZyb21Tb3VyY2VPZmZzZXRzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogVmVSYW5nZTtcbiAgICAgICAgc2V0U2VsZWN0aW9uKHNlbGVjdGlvbjogVmVMaW5lYXJTZWxlY3Rpb24pOiB2b2lkO1xuICAgIH1cblxuICAgIGNsYXNzIFZlVGFyZ2V0IHtcbiAgICAgICAgZ2V0U3VyZmFjZSgpOiB7IGdldE1vZGVsKCk6IFZlU3VyZmFjZU1vZGVsIH07XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHRyYW5lb3VzLWNsYXNzXG4gICAgY2xhc3MgVmVMaW5lYXJTZWxlY3Rpb24ge1xuICAgICAgICBjb25zdHJ1Y3RvcihyYW5nZTogVmVSYW5nZSk7XG4gICAgfVxuXG4gICAgY29uc3QgdmU6IHtcbiAgICAgICAgUmFuZ2U6IHR5cGVvZiBWZVJhbmdlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgICAgICBkbTogeyBMaW5lYXJTZWxlY3Rpb246IHR5cGVvZiBWZUxpbmVhclNlbGVjdGlvbiB9OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgICAgICBpbml0PzogeyB0YXJnZXQ6IFZlVGFyZ2V0IH07XG4gICAgfTtcbn1cblxuZXhwb3J0IHt9O1xuXG4oKCkgPT4ge1xuICAgIGlmIChtdy5jb25maWcuZ2V0KCd3Z05hbWVzcGFjZU51bWJlcicpIDwgMCkgcmV0dXJuOyAvLyBEb24ndCBydW4gaW4gdmlydHVhbCBuYW1lc3BhY2VzXG4gICAgaWYgKCFtdy5jb25maWcuZ2V0KCd3Z0lzUHJvYmFibHlFZGl0YWJsZScpKSByZXR1cm47IC8vIERvbid0IHJ1biBpZiB1c2VyIGNhbid0IGVkaXQgcGFnZVxuXG4gICAgbXcubG9hZGVyLnVzaW5nKFsnbWVkaWF3aWtpLnV0aWwnLCAnanF1ZXJ5LnRleHRTZWxlY3Rpb24nXSwgKCkgPT4ge1xuICAgICAgICBtdy51dGlsLmFkZENTUyhgXG4jYXJ0aWNsZS1jbGVhbmVyIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4jY29udGVudDpoYXMoI3dwVGV4dGJveDEpICNhcnRpY2xlLWNsZWFuZXIge1xuICAgIGRpc3BsYXk6IHVuc2V0O1xufWApO1xuXG4gICAgICAgIGNvbnN0IGxpbmsgPSBtdy51dGlsLmFkZFBvcnRsZXRMaW5rKFxuICAgICAgICAgICAgbXcuY29uZmlnLmdldCgnc2tpbicpID09PSAnbWluZXJ2YScgPyAncC1uYXZpZ2F0aW9uJyA6ICdwLWNhY3Rpb25zJyxcbiAgICAgICAgICAgICcjJyxcbiAgICAgICAgICAgICdQZXJmb3JtIGFydGljbGUgY2xlYW51cCcsXG4gICAgICAgICAgICAnYXJ0aWNsZS1jbGVhbmVyJyxcbiAgICAgICAgKSE7XG5cbiAgICAgICAgbGV0IHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBTQ1JJUFRfTUVTU0FHRSA9ICdDbGVhbmVkIHVwIGFydGljbGUgY29udGVudCAodmlhIFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvYXJ0aWNsZS1jbGVhbmVyfGFydGljbGUtY2xlYW5lcl1dKSc7XG5cbiAgICAgICAgbXcuaG9vaygndmUuc2F2ZURpYWxvZy5zdGF0ZUNoYW5nZWQnKS5hZGQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KCcudmUtdWktbXdTYXZlRGlhbG9nLXN1bW1hcnkgdGV4dGFyZWEnKSE7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXN1bW1hcnlJbnB1dC52YWx1ZS5pbmNsdWRlcyhTQ1JJUFRfTUVTU0FHRS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQudmFsdWUgJiYgIXN1bW1hcnlJbnB1dC52YWx1ZS5zdGFydHNXaXRoKCcvKiAnKSAmJiAhc3VtbWFyeUlucHV0LnZhbHVlLmVuZHNXaXRoKCcgKi8gJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5SW5wdXQudmFsdWUgKz0gYDsgJHtTQ1JJUFRfTUVTU0FHRS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIFNDUklQVF9NRVNTQUdFLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc3VtbWFyeUlucHV0LnZhbHVlID0gYCR7c3VtbWFyeUlucHV0LnZhbHVlfSR7U0NSSVBUX01FU1NBR0V9YDtcblxuICAgICAgICAgICAgICAgIHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgZWRpdEJveCA9ICQoJyN3cFRleHRib3gxJyk7XG4gICAgICAgICAgICBpZiAoZWRpdEJveC5sZW5ndGggPT09IDApIHJldHVybiBtdy5ub3RpZnkoJ0VkaXQgYm94IG5vdCBmb3VuZCEnLCB7IHR5cGU6ICdlcnJvcicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcblxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdnZXRDb250ZW50cycpO1xuXG4gICAgICAgICAgICBsZXQgZmluYWxUZXh0ID0gb3JpZ2luYWxUZXh0O1xuXG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU3RyYXlVbmljb2RlQ2hhcmFjdGVycyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFNlY3Rpb25IZWFkZXJzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwTWFnaWNXb3JkcyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cERpc3BsYXl0aXRsZXNBbmREZWZhdWx0c29ydHMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBDYXRlZ29yaWVzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwTGlua3MoZmluYWxUZXh0LCBbY2xlYW51cEltcHJvcGVyQ2hhcmFjdGVycywgY2xlYW51cFllYXJSYW5nZXNdKTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBTdHJheU1hcmt1cChmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFNwYWNpbmcoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBSZWZlcmVuY2VzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBhd2FpdCBmb3JtYXRUZW1wbGF0ZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IHJlbW92ZUNvbW1lbnRzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU3BhY2luZyhmaW5hbFRleHQsIHRydWUpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gYXV0b1RhZ1BhZ2UoZmluYWxUZXh0KTtcblxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsVGV4dCA9PT0gZmluYWxUZXh0KSBtdy5ub3RpZnkoJ05vIGNoYW5nZXMgdG8gYmUgbWFkZSB0byB0aGUgYXJ0aWNsZSEnLCB7IHR5cGU6ICd3YXJuJywgYXV0b0hpZGVTZWNvbmRzOiAnc2hvcnQnIH0pO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHZlLmluaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VyZmFjZU1vZGVsID0gdmUuaW5pdC50YXJnZXQuZ2V0U3VyZmFjZSgpLmdldE1vZGVsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gc3VyZmFjZU1vZGVsLmdldExpbmVhckZyYWdtZW50KHN1cmZhY2VNb2RlbC5nZXRSYW5nZUZyb21Tb3VyY2VPZmZzZXRzKDAsIG9yaWdpbmFsVGV4dC5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQuaW5zZXJ0Q29udGVudChmaW5hbFRleHQpO1xuICAgICAgICAgICAgICAgICAgICBzdXJmYWNlTW9kZWwuc2V0U2VsZWN0aW9uKG5ldyB2ZS5kbS5MaW5lYXJTZWxlY3Rpb24obmV3IHZlLlJhbmdlKDAsIDApKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdzZXRDb250ZW50cycsIGZpbmFsVGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdzZXRTZWxlY3Rpb24nLCB7IHN0YXJ0OiAwIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG13Lm5vdGlmeSgnQXJ0aWNsZSBjbGVhbnVwIGNvbXBsZXRlIScsIHsgdHlwZTogJ3N1Y2Nlc3MnLCBhdXRvSGlkZVNlY29uZHM6ICdzaG9ydCcgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KCcjd3BTdW1tYXJ5Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHN1bW1hcnlJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1bW1hcnlJbnB1dC52YWx1ZS5pbmNsdWRlcyhTQ1JJUFRfTUVTU0FHRS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeUlucHV0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnlJbnB1dC52YWx1ZSArPSBgOyAke1NDUklQVF9NRVNTQUdFLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgU0NSSVBUX01FU1NBR0Uuc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugc3VtbWFyeUlucHV0LnZhbHVlID0gU0NSSVBUX01FU1NBR0U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKCk7XG5cbi8qKlxuICogRXNjYXBlcyByZWdleCBjaGFyYWN0ZXJzIGluIGEgc3RyaW5nLlxuICogQHBhcmFtIHN0cmluZyBUaGUgc3RyaW5nIHRvIGVzY2FwZSByZWdleCBjaGFyYWN0ZXJzIGluLlxuICovXG5mdW5jdGlvbiBlc2NhcGVSZWdleENoYXJhY3RlcnMoc3RyaW5nOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2VBbGwoL1skKCkqKy4/W1xcXFxcXF1ee3x9XS9nLCAnXFxcXCQmJyk7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIHN0cmF5IFVuaWNvZGUgY2hhcmFjdGVycyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBTdHJheVVuaWNvZGVDaGFyYWN0ZXJzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIC8vIFRoaXMgcmVnZXggcmVtb3ZlczpcbiAgICAvLyAgIC0gQVNDSUkgY29udHJvbCBjaGFyYWN0ZXJzIChcXHUwMDAwLVxcdTAwMDksIFxcdTAwMEItXFx1MDAwQywgXFx1MDAwRS1cXHUwMDFGKVxuICAgIC8vICAgLSBERUwgKFxcdTAwN0YpXG4gICAgLy8gICAtIFNvZnQgaHlwaGVuIChcXHUwMEFEKVxuICAgIC8vICAgLSBaZXJvLXdpZHRoIGNoYXJhY3RlcnMgYW5kIGRpcmVjdGlvbmFsaXR5IG1hcmtzIChcXHUyMDBCLVxcdTIwMEYpXG4gICAgLy8gICAtIEJpZGkgb3ZlcnJpZGUgYW5kIGZvcm1hdHRpbmcgY2hhcmFjdGVycyAoXFx1MjAyQS1cXHUyMDJFKVxuICAgIC8vICAgLSBXb3JkIGpvaW5lciBhbmQgaW52aXNpYmxlIHNlcGFyYXRvciAoXFx1MjA2MCwgXFx1MjA2MylcbiAgICAvLyAgIC0gQnl0ZSBvcmRlciBtYXJrIChCT00pIChcXHVGRUZGKVxuICAgIGNvbnN0IHN0cmF5VW5pY29kZVJlZ2V4ID0gL1tcXHUwMDAwLVxcdTAwMDlcXHUwMDBCXFx1MDAwQ1xcdTAwMEUtXFx1MDAxRlxcdTAwN0ZcXHUwMEFEXFx1MjAwQi1cXHUyMDBGXFx1MjAyQS1cXHUyMDJFXFx1MjA2MFxcdTIwNjNcXHVGRUZGXS9nOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnRyb2wtcmVnZXhcblxuICAgIGlmIChzdHJheVVuaWNvZGVSZWdleC50ZXN0KGNvbnRlbnQpKSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKHN0cmF5VW5pY29kZVJlZ2V4LCAnJyk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgc2VjdGlvbiBoZWFkZXJzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFNlY3Rpb25IZWFkZXJzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IGNvbW1vblJlcGxhY2VtZW50cyA9IHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4gICAgICAgICdTZWUgYWxzbyc6IFsnYWxzbyBzZWUnXSxcbiAgICAgICAgJ1JlZmVyZW5jZXMnOiBbJ3JlZmVyZW5jZScsICdzb3VyY2UnLCAnc291cmNlcycsICdjaXRhdGlvbicsICdjaXRhdGlvbnMnXSxcbiAgICAgICAgJ0Z1cnRoZXIgcmVhZGluZyc6IFsnZnVydGhlciByZWFkaW5nJ10sXG4gICAgICAgICdFeHRlcm5hbCBsaW5rcyc6IFsnZXh0ZXJuYWwgbGluaycsICd3ZWJsaW5rJywgJ3dlYmxpbmtzJ10sXG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4gICAgfTtcblxuICAgIGNvbnN0IGNvbW1vbk1pc2NhcGl0YWxpemVkV29yZHMgPSBbJ2FuZCcsICdiaXJ0aCcsICdjYXJlZXInLCAnZGVhdGgnLCAnZWR1Y2F0aW9uJywgJ2xpZmUnLCAnb2YnLCAnb3InXTtcblxuICAgIGNvbnN0IHJldmVyc2VDb21tb25SZXBsYWNlbWVudHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGNvbW1vblJlcGxhY2VtZW50cykuZmxhdE1hcCgoW2tleSwgdmFsdWVzXSkgPT4gW1xuICAgICAgICAgICAgW2tleS50b0xvd2VyQ2FzZSgpLCBrZXldLFxuICAgICAgICAgICAgLi4uKHZhbHVlcy5tYXAoKHZhbHVlKSA9PiBbdmFsdWUsIGtleV0pIGFzIFtzdHJpbmcsIHN0cmluZ11bXSksIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LXR5cGUtYXNzZXJ0aW9uXG4gICAgICAgIF0pLFxuICAgICk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gY29udGVudC5tYXRjaEFsbCgvKD88PV58XFxuKVxcbiooPzxzdGFydE1hcmt1cD49KykgKig/PG5hbWU+Lio/KSAqKD88ZW5kTWFya3VwPj0rKShcXG4rfCQpL2cpO1xuXG4gICAgY29uc3QgcGFyc2VkSGVhZGVycyA9IFsuLi5oZWFkZXJzXS5tYXAoKGhlYWRlcikgPT4ge1xuICAgICAgICBsZXQgeyBuYW1lIH0gPSBoZWFkZXIuZ3JvdXBzITtcbiAgICAgICAgY29uc3QgeyBzdGFydE1hcmt1cCwgZW5kTWFya3VwIH0gPSBoZWFkZXIuZ3JvdXBzITtcblxuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8nezN9L2csICcnKTtcblxuICAgICAgICBjb25zdCBsaW5rcyA9IG5hbWUubWF0Y2hBbGwoL1xcW1xcWyguKz8pXV0vZykudG9BcnJheSgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgbGluayBvZiBsaW5rcykgbmFtZSA9IG5hbWUucmVwbGFjZShsaW5rWzBdLCBsaW5rWzFdLnNwbGl0KCd8JykuYXQoLTEpISk7XG5cbiAgICAgICAgY29uc3QgZGVwdGggPSBNYXRoLm1heChzdGFydE1hcmt1cC5sZW5ndGgsIGVuZE1hcmt1cC5sZW5ndGgsIDIpO1xuXG4gICAgICAgIHJldHVybiB7IG5hbWUsIGRlcHRoLCBvcmlnaW5hbDogaGVhZGVyWzBdIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBoZWFkZXJzU2V0ID0gbmV3IFNldChwYXJzZWRIZWFkZXJzLm1hcCgoaGVhZGVyKSA9PiBoZWFkZXIubmFtZSkpO1xuXG4gICAgY29uc3QgdGl0bGVTcGFjZXIgPSBwYXJzZWRIZWFkZXJzLmxlbmd0aCA+IDAgPyAoL15cXG4qPSsgfCA9K1xcbiskLy50ZXN0KHBhcnNlZEhlYWRlcnNbMF0ub3JpZ2luYWwpID8gJyAnIDogJycpIDogJyc7XG5cbiAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBwYXJzZWRIZWFkZXJzKSB7XG4gICAgICAgIGNvbnN0IGxvd2VyY2FzZU5hbWUgPSBoZWFkZXIubmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGNvbnN0IHJlcGxhY2VkTmFtZSA9XG4gICAgICAgICAgICBsb3dlcmNhc2VOYW1lIGluIHJldmVyc2VDb21tb25SZXBsYWNlbWVudHMgJiYgIWhlYWRlcnNTZXQuaGFzKHJldmVyc2VDb21tb25SZXBsYWNlbWVudHNbbG93ZXJjYXNlTmFtZV0pXG4gICAgICAgICAgICAgICAgPyByZXZlcnNlQ29tbW9uUmVwbGFjZW1lbnRzW2xvd2VyY2FzZU5hbWVdXG4gICAgICAgICAgICAgICAgOiBoZWFkZXIubmFtZTtcblxuICAgICAgICBsZXQgY2FwaXRhbGl6ZWROYW1lID0gcmVwbGFjZWROYW1lO1xuXG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiBjb21tb25NaXNjYXBpdGFsaXplZFdvcmRzKSBjYXBpdGFsaXplZE5hbWUgPSBjYXBpdGFsaXplZE5hbWUucmVwbGFjZUFsbChuZXcgUmVnRXhwKGBcXFxcYiR7d29yZH1cXFxcYmAsICdnaScpLCB3b3JkKTtcblxuICAgICAgICBjYXBpdGFsaXplZE5hbWUgPSBjYXBpdGFsaXplZE5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYXBpdGFsaXplZE5hbWUuc2xpY2UoMSk7XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYCR7Jz0nLnJlcGVhdChoZWFkZXIuZGVwdGgpfSR7dGl0bGVTcGFjZXJ9JHtjYXBpdGFsaXplZE5hbWV9JHt0aXRsZVNwYWNlcn0keyc9Jy5yZXBlYXQoaGVhZGVyLmRlcHRoKX1gO1xuXG4gICAgICAgIGlmIChoZWFkZXIub3JpZ2luYWwgIT09IG91dHB1dCkgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShoZWFkZXIub3JpZ2luYWwsIGBcXG5cXG4ke291dHB1dH1cXG5gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHVubmVjZXNzYXJ5IG1hZ2ljIHdvcmRzIGZyb20gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwTWFnaWNXb3Jkcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKC9fXyhJTkRFWHxOT0lOREVYfE5FV1NFQ1RJT05MSU5LfE5PTkVXU0VDVElPTkxJTkt8Tk9FRElUU0VDVElPTnxESVNBTUJJR3xTVEFUSUNSRURJUkVDVHxGT1JDRVRPQylfX1xcbiovZywgJycpO1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBESVNQTEFZVElUTEVzIGFuZCBERUZBVUxUU09SVHMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCB0YWdzID0gY29udGVudC5tYXRjaEFsbCgve3soZGlzcGxheXRpdGxlfGRlZmF1bHRzb3J0KVs6fF0oLio/KX19L2dpKTtcblxuICAgIGNvbnN0IHBhcnNlZFRhZ3MgPSBbLi4udGFnc10ubWFwKCh0YWcpID0+IHtcbiAgICAgICAgY29uc3QgW2Z1bGxUYWcsIHR5cGUsIHZhbHVlXSA9IHRhZztcblxuICAgICAgICByZXR1cm4geyB0eXBlOiB0eXBlLnRvVXBwZXJDYXNlKCksIHZhbHVlLCBvcmlnaW5hbDogZnVsbFRhZyB9O1xuICAgIH0pO1xuXG4gICAgY29uc3QgY3VycmVudFRpdGxlID0gbXcuVGl0bGUubmV3RnJvbVRleHQobXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpKSE7XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBwYXJzZWRUYWdzKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVGFnUmVnZXggPSBuZXcgUmVnRXhwKGAke2VzY2FwZVJlZ2V4Q2hhcmFjdGVycyh0YWcub3JpZ2luYWwpfVxcbipgLCAnZycpO1xuXG4gICAgICAgIGNvbnN0IHVucHJlZml4ZWRUaXRsZSA9IG13LlRpdGxlLm5ld0Zyb21UZXh0KHRhZy52YWx1ZSk7XG5cbiAgICAgICAgaWYgKCF1bnByZWZpeGVkVGl0bGUpIGNvbnRpbnVlO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gbXcuVGl0bGUubWFrZVRpdGxlKGN1cnJlbnRUaXRsZS5nZXROYW1lc3BhY2VJZCgpLCB1bnByZWZpeGVkVGl0bGUuZ2V0TWFpblRleHQoKSk7XG5cbiAgICAgICAgaWYgKCF0aXRsZSkgY29udGludWU7XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdEtleSA9IHRhZy50eXBlID09PSAnRElTUExBWVRJVExFJyA/IGN1cnJlbnRUaXRsZS50b1RleHQoKSA6IGN1cnJlbnRUaXRsZS5nZXRNYWluVGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGN1c3RvbUtleSA9IHRhZy50eXBlID09PSAnRElTUExBWVRJVExFJyA/IHRpdGxlLnRvVGV4dCgpIDogdGl0bGUuZ2V0TWFpblRleHQoKTtcblxuICAgICAgICBpZiAoZGVmYXVsdEtleSA9PT0gY3VzdG9tS2V5KSB7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG9yaWdpbmFsVGFnUmVnZXgsICcnKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IGB7eyR7dGFnLnR5cGV9OiR7Y3VzdG9tS2V5fX19XFxuYDtcblxuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG9yaWdpbmFsVGFnUmVnZXgsIG5ld1RleHQpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBjYXRlZ29yaWVzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cENhdGVnb3JpZXMoY29udGVudDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZUFsbChcbiAgICAgICAgLyhcXFtcXFt8fX0pOj9jYXRlZ29yeTooLio/KShdXXx9fSkvZ2ksXG4gICAgICAgIGBbWyR7bXcuY29uZmlnLmdldCgnd2dDYW5vbmljYWxOYW1lc3BhY2UnKSA9PT0gJ0RyYWZ0JyA/ICc6JyA6ICcnfUNhdGVnb3J5OiQyXV1gLFxuICAgICk7XG59XG5cbmludGVyZmFjZSBMaW5rSW5mb3JtYXRpb24ge1xuICAgIHN0YXJ0OiBudW1iZXI7XG4gICAgZW5kOiBudW1iZXI7XG4gICAgaXNOZXN0ZWQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGxpbmtzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqIEBwYXJhbSBmdW5jdGlvbnNDYWxsZWRXaGlsZUVzY2FwZWQgVGhlIGZ1bmN0aW9ucyBjYWxsZWQgd2hpbGUgdGhlIGxpbmtzIGFyZSBlc2NhcGVkLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwTGlua3MoY29udGVudDogc3RyaW5nLCBmdW5jdGlvbnNDYWxsZWRXaGlsZUVzY2FwZWQ6ICgoY29udGVudDogc3RyaW5nLCBydW46IDEgfCAyKSA9PiBzdHJpbmcpW10pIHtcbiAgICBjb25zdCBjbG9zZWRMaW5rczogTGlua0luZm9ybWF0aW9uW10gPSBbXTtcbiAgICBjb25zdCBsaW5rczogTGlua0luZm9ybWF0aW9uW10gPSBbXTtcblxuICAgIGxldCBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgIGxldCBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcblxuICAgIGxldCBjdXJyZW50TG9jYXRpb24gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBjb250ZW50IGZvbGxvd2luZyB0aGUgY3VycmVudCBsb2NhdGlvbiBtYXRjaGVzIHRoZSBkZXNpcmVkIHN0cmluZy5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFN0cmluZyBUaGUgc3RyaW5nIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHNob3VsZEluY3JlbWVudCBXaGV0aGVyIHRvIGluY3JlbWVudCB0aGUgY3VycmVudCBsb2NhdGlvbiBpZiB0aGUgc3RyaW5nIGlzIGZvdW5kLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXRTdHJpbmcoZGVzaXJlZFN0cmluZzogc3RyaW5nLCBzaG91bGRJbmNyZW1lbnQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IGlzQXRTdHJpbmcgPSBjb250ZW50LnNsaWNlKGN1cnJlbnRMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uICsgZGVzaXJlZFN0cmluZy5sZW5ndGgpID09PSBkZXNpcmVkU3RyaW5nO1xuXG4gICAgICAgIGlmIChpc0F0U3RyaW5nICYmIHNob3VsZEluY3JlbWVudCkgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgaWYgKGlzQXRTdHJpbmcoJzxub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPC9ub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwhLS0nKSkgaXNJbnNpZGVDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnLS0+JykpIGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmICghaXNJbnNpZGVOb3dpa2kgJiYgIWlzSW5zaWRlQ29tbWVudClcbiAgICAgICAgICAgIGlmIChpc0F0U3RyaW5nKCdbWycpKSBsaW5rcy5wdXNoKHsgc3RhcnQ6IGN1cnJlbnRMb2NhdGlvbiAtIDIsIGVuZDogLTEsIGlzTmVzdGVkOiBsaW5rcy5sZW5ndGggPiAwIH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnXV0nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RMaW5rID0gbGlua3MucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXN0TGluaykgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBsYXN0TGluay5lbmQgPSBjdXJyZW50TG9jYXRpb247XG5cbiAgICAgICAgICAgICAgICBjbG9zZWRMaW5rcy5wdXNoKGxhc3RMaW5rKTtcbiAgICAgICAgICAgIH0gZWxzZSBjdXJyZW50TG9jYXRpb24rKztcbiAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGNvbnN0IG5ld0xpbmtDb250ZW50OiBbTGlua0luZm9ybWF0aW9uLCBzdHJpbmddW10gPSBbXTtcblxuICAgIGNvbnN0IG5hbWVzcGFjZU5hbWVzID0gT2JqZWN0LnZhbHVlcyhtdy5jb25maWcuZ2V0KCd3Z0Zvcm1hdHRlZE5hbWVzcGFjZXMnKSk7XG5cbiAgICBmb3IgKGNvbnN0IGxpbmtMb2NhdGlvbiBvZiBjbG9zZWRMaW5rcykge1xuICAgICAgICBjb25zdCBpbm5lckxpbmsgPSBjb250ZW50LnNsaWNlKGxpbmtMb2NhdGlvbi5zdGFydCArIDIsIGxpbmtMb2NhdGlvbi5lbmQgLSAyKTtcblxuICAgICAgICBjb25zdCBbdW5wYXJzZWRMaW5rLCAuLi5wYXJhbWV0ZXJzXSA9IGlubmVyTGluay5zcGxpdCgnfCcpO1xuXG4gICAgICAgIC8vIFJlcGxhY2UgbGluayBuYW1lcyBzbyB0aGVzZSB3b24ndCBiZSBhZmZlY3RlZCBieSBmdW5jdGlvbnMgY2FsbGVkIHdoaWxlIGVzY2FwZWRcbiAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICBjb250ZW50LnNsaWNlKDAsIGxpbmtMb2NhdGlvbi5zdGFydCArIDIpICtcbiAgICAgICAgICAgICdcXDAnLnJlcGVhdCh1bnBhcnNlZExpbmsubGVuZ3RoKSArXG4gICAgICAgICAgICBjb250ZW50LnNsaWNlKGxpbmtMb2NhdGlvbi5zdGFydCArIDIgKyB1bnBhcnNlZExpbmsubGVuZ3RoKTtcblxuICAgICAgICBsZXQgbGluayA9IHVucGFyc2VkTGluay5yZXBsYWNlQWxsKCdfJywgJyAnKS50cmltKCk7XG4gICAgICAgIGxldCBhbHRUZXh0ID0gcGFyYW1ldGVycy5qb2luKCd8Jyk7XG4gICAgICAgIGFsdFRleHQgPSBhbHRUZXh0ID09PSAnICcgPyAnICcgOiBhbHRUZXh0LnRyaW0oKTtcblxuICAgICAgICBjb25zdCBpc0ZpcnN0Q2hhcmFjdGVyQ29sb24gPSBsaW5rLnN0YXJ0c1dpdGgoJzonKTtcbiAgICAgICAgaWYgKGlzRmlyc3RDaGFyYWN0ZXJDb2xvbikgbGluayA9IGxpbmsuc2xpY2UoMSk7XG5cbiAgICAgICAgbGV0IHNob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGxpbmtVcHBlcmNhc2VTdGFydCA9IGxpbmsuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBsaW5rLnNsaWNlKDEpO1xuICAgICAgICBjb25zdCBsaW5rTG93ZXJjYXNlU3RhcnQgPSBsaW5rLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgbGluay5zbGljZSgxKTtcblxuICAgICAgICBsZXQgbmFtZXNwYWNlID0gbGluay5zcGxpdCgnOicpWzBdO1xuICAgICAgICBuYW1lc3BhY2UgPSBuYW1lc3BhY2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lc3BhY2Uuc2xpY2UoMSk7XG5cbiAgICAgICAgaWYgKGxpbmsuaW5jbHVkZXMoJzonKSkge1xuICAgICAgICAgICAgaWYgKGxpbmtVcHBlcmNhc2VTdGFydC5zdGFydHNXaXRoKCdJbWFnZTonKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZFN0YXJ0VXBwZXJjYXNlID0gbGluay5zdGFydHNXaXRoKCdJbWFnZTonKTtcblxuICAgICAgICAgICAgICAgIGxpbmsgPSBgJHtzaG91bGRTdGFydFVwcGVyY2FzZSA/ICdGJyA6ICdmJ31pbGU6JHtsaW5rLnNsaWNlKDYpfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpc0ZpcnN0Q2hhcmFjdGVyQ29sb24gJiZcbiAgICAgICAgICAgICAgICAoWydJbWFnZScsICdGaWxlJywgJ0NhdGVnb3J5J10uaW5jbHVkZXMobGlua1VwcGVyY2FzZVN0YXJ0LnNwbGl0KCc6JylbMF0pIHx8ICFuYW1lc3BhY2VOYW1lcy5pbmNsdWRlcyhuYW1lc3BhY2UpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHNob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWZ0ZXJMaW5rVGV4dCA9ICcnO1xuXG4gICAgICAgIGlmICgvWyEnLC46Oz9dJC8udGVzdChhbHRUZXh0KSkge1xuICAgICAgICAgICAgY29uc3QgYWRkZWRQdW5jdHVhdGlvbiA9IGFsdFRleHQuc2xpY2UoLTEpO1xuXG4gICAgICAgICAgICBpZiAoIWxpbmsuZW5kc1dpdGgoYWRkZWRQdW5jdHVhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBhZnRlckxpbmtUZXh0ID0gYWRkZWRQdW5jdHVhdGlvbjtcbiAgICAgICAgICAgICAgICBhbHRUZXh0ID0gYWx0VGV4dC5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGluayA9PT0gYWx0VGV4dCkgYWx0VGV4dCA9ICcnO1xuICAgICAgICBlbHNlIGlmIChuZXcgUmVnRXhwKGBeJHtlc2NhcGVSZWdleENoYXJhY3RlcnMobGluayl9W2Etel0rJGApLnRlc3QoYWx0VGV4dCkpIHtcbiAgICAgICAgICAgIGFmdGVyTGlua1RleHQgPSBhbHRUZXh0LnNsaWNlKGxpbmsubGVuZ3RoKSArIGFmdGVyTGlua1RleHQ7XG4gICAgICAgICAgICBhbHRUZXh0ID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IG5ld0xpbmsgb2YgW2xpbmtVcHBlcmNhc2VTdGFydCwgbGlua0xvd2VyY2FzZVN0YXJ0XSlcbiAgICAgICAgICAgIGlmIChuZXdMaW5rID09PSBhbHRUZXh0KSB7XG4gICAgICAgICAgICAgICAgbGluayA9IG5ld0xpbms7XG4gICAgICAgICAgICAgICAgYWx0VGV4dCA9ICcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXcgUmVnRXhwKGBeJHtlc2NhcGVSZWdleENoYXJhY3RlcnMobmV3TGluayl9W2Etel0rJGApLnRlc3QoYWx0VGV4dCkpIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gbmV3TGluaztcbiAgICAgICAgICAgICAgICBhZnRlckxpbmtUZXh0ID0gYWx0VGV4dC5zbGljZShuZXdMaW5rLmxlbmd0aCkgKyBhZnRlckxpbmtUZXh0O1xuICAgICAgICAgICAgICAgIGFsdFRleHQgPSAnJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoYWx0VGV4dCAmJiBsaW5rLmluY2x1ZGVzKCc6JykgJiYgbmFtZXNwYWNlTmFtZXMuaW5jbHVkZXMobmFtZXNwYWNlKSkgfHxcbiAgICAgICAgICAgIGxpbmsuc3RhcnRzV2l0aCgnZmlsZTonKSB8fFxuICAgICAgICAgICAgbGluay5zdGFydHNXaXRoKCdjYXRlZ29yeTonKVxuICAgICAgICApXG4gICAgICAgICAgICBsaW5rID0gbGluay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGxpbmsuc2xpY2UoMSk7XG5cbiAgICAgICAgbGluayA9IGAke3Nob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiA/ICc6JyA6ICcnfSR7bGlua31gO1xuXG4gICAgICAgIGxpbmsgPSBsaW5rLnBhZFN0YXJ0KHVucGFyc2VkTGluay5sZW5ndGgsICdcXDAnKTtcblxuICAgICAgICBjb25zdCBvdXRwdXQgPSBgW1ske2xpbmt9JHthbHRUZXh0ID8gYHwke2FsdFRleHR9YCA6ICcnfV1dJHthZnRlckxpbmtUZXh0fWA7XG5cbiAgICAgICAgbmV3TGlua0NvbnRlbnQucHVzaChbbGlua0xvY2F0aW9uLCBvdXRwdXRdKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGZ1bmN0aW9uVG9DYWxsIG9mIGZ1bmN0aW9uc0NhbGxlZFdoaWxlRXNjYXBlZCkgY29udGVudCA9IGZ1bmN0aW9uVG9DYWxsKGNvbnRlbnQsIDEpO1xuXG4gICAgZm9yIChsZXQgbG9vcENvdW50ZXIgPSAwOyBsb29wQ291bnRlciA8IDI7IGxvb3BDb3VudGVyKyspXG4gICAgICAgIGZvciAoY29uc3QgW2xpbmtEYXRhLCBsaW5rQ29udGVudF0gb2YgbmV3TGlua0NvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChsb29wQ291bnRlciA9PT0gMCAmJiBsaW5rRGF0YS5pc05lc3RlZCkgY29udGludWU7XG4gICAgICAgICAgICBlbHNlIGlmIChsb29wQ291bnRlciA9PT0gMSAmJiAhbGlua0RhdGEuaXNOZXN0ZWQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBjb250ZW50ID1cbiAgICAgICAgICAgICAgICBjb250ZW50LnNsaWNlKDAsIGxpbmtEYXRhLnN0YXJ0KSArIGxpbmtDb250ZW50LnBhZEVuZChsaW5rRGF0YS5lbmQgLSBsaW5rRGF0YS5zdGFydCwgJ1xcMCcpICsgY29udGVudC5zbGljZShsaW5rRGF0YS5lbmQpO1xuICAgICAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGZ1bmN0aW9uVG9DYWxsIG9mIGZ1bmN0aW9uc0NhbGxlZFdoaWxlRXNjYXBlZCkgY29udGVudCA9IGZ1bmN0aW9uVG9DYWxsKGNvbnRlbnQsIDIpO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZUFsbCgnXFwwJywgJycpO1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBpbXByb3BlciBjaGFyYWN0ZXJzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqIEBwYXJhbSBydW4gVGhlIHJ1biBudW1iZXIgb2YgdGhlIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwSW1wcm9wZXJDaGFyYWN0ZXJzKGNvbnRlbnQ6IHN0cmluZywgcnVuOiAxIHwgMikge1xuICAgIGNvbnN0IGVsaXBzaXNQbGFjZWhvbGRlciA9ICdcXHUwMDdGJztcbiAgICBjb25zdCBuYnNwUGxhY2Vob2xkZXIgPSAnXFx1MDA5Ric7XG5cbiAgICBpZiAocnVuID09PSAxKSB7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1tcdTIwMUNcdTIwMURcdTIwMUVcdTIwMUZdL2csICdcIicpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9bXHUyMDE4XHUyMDE5XHUyMDFBXHUyMDFCXS9nLCBcIidcIik7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoJ1x1MjAyNicsIGVsaXBzaXNQbGFjZWhvbGRlcik7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoJ1x1MDBBMCcsIG5ic3BQbGFjZWhvbGRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChlbGlwc2lzUGxhY2Vob2xkZXIsICcuLi4nKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChuYnNwUGxhY2Vob2xkZXIsICcmbmJzcDsnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgeWVhciByYW5nZXMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICogQHBhcmFtIHJ1biBUaGUgcnVuIG51bWJlciBvZiB0aGUgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBZZWFyUmFuZ2VzKGNvbnRlbnQ6IHN0cmluZywgcnVuOiAxIHwgMikge1xuICAgIGlmIChydW4gPT09IDEpXG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcXChcXGR7Myw0fSkgP1tcdTIwMTJcdTIwMTNcdTIyMTItXSA/KFxcZHszLDR9XFwpKS9nLCAob3JpZ2luYWwsIHN0YXJ0LCBlbmQpID0+XG4gICAgICAgICAgICBgJHtzdGFydH1cdTIwMTMke2VuZH1gLnBhZEVuZChvcmlnaW5hbC5sZW5ndGgsICdcXDAnKSxcbiAgICAgICAgKTtcblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIFJlbW92ZXMgc3RyYXkgbWFya3VwIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFN0cmF5TWFya3VwKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IHN0cmF5TWFya3VwUmVnZXhlcyA9IFtcbiAgICAgICAgLycrKEJvbGR8SXRhbGljKSggdGV4dCk/JysgKi9nLFxuICAgICAgICAvKDxiaWc+KStCaWcoIHRleHQpPyg8XFwvYmlnPikrICovZyxcbiAgICAgICAgLyg8c21hbGw+KStTbWFsbCggdGV4dCk/KDxcXC9zbWFsbD4pKyAqL2csXG4gICAgICAgIC8oPHN1cD4pK1N1cGVyc2NyaXB0KCB0ZXh0KT8oPFxcL3N1cD4pKyAqL2csXG4gICAgICAgIC8oPHN1Yj4pK1N1YnNjcmlwdCggdGV4dCk/KDxcXC9zdWI+KSsgKi9nLFxuICAgICAgICAvKDxzPikrU3RyaWtldGhyb3VnaCg8XFwvcz4pKyAqL2csXG4gICAgICAgIC8oPHU+KStVbmRlcmxpbmUoPFxcL3U+KSsgKi9nLFxuICAgICAgICAvKDxjb2RlPikrQ29tcHV0ZXIgY29kZSg8XFwvY29kZT4pKyAqL2csXG4gICAgICAgIC8oPG5vd2lraT4pK0luc2VydCBub24tZm9ybWF0dGVkIHRleHQgaGVyZSg8XFwvbm93aWtpPikrICovZyxcbiAgICAgICAgLz0rIEhlYWRpbmcgdGV4dCA9KyAqL2csXG4gICAgICAgIC9cXCogQnVsbGV0ZWQgbGlzdCBpdGVtICovZyxcbiAgICAgICAgLyMgTnVtYmVyZWQgbGlzdCBpdGVtICovZyxcbiAgICAgICAgLzxnYWxsZXJ5PlxcbkV4YW1wbGUuanBnXFx8Q2FwdGlvbjFcXG5FeGFtcGxlLmpwZ1xcfENhcHRpb24yXFxuPFxcL2dhbGxlcnk+ICovZyxcbiAgICAgICAgLyNSRURJUkVDVCBcXFtcXFtUYXJnZXQgcGFnZSBuYW1lXV0gKi9nLFxuICAgICAgICAvPCEtLSBJbnZpc2libGUgY29tbWVudCAtLT4gKi9nLFxuICAgICAgICAvPFxccyooYmlnfHNtYWxsfHN1cHxzdWJ8c3x1fGNvZGV8bm93aWtpfG5vaW5jbHVkZXxvbmx5aW5jbHVkZXxpbmNsdWRlb25seXxjZW50ZXJ8YmxvY2txdW90ZXxnYWxsZXJ5KVxccyooXFxzK1tePD5dKik/Plxccyo8XFxzKlxcL1xccypcXDFcXHMqPi9naSxcbiAgICBdO1xuXG4gICAgZm9yIChjb25zdCByZWdleCBvZiBzdHJheU1hcmt1cFJlZ2V4ZXMpIHdoaWxlIChyZWdleC50ZXN0KGNvbnRlbnQpKSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKHJlZ2V4LCAnJyk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgc3BhY2luZyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKiBAcGFyYW0gc2Vjb25kUnVuIFdoZXRoZXIgdGhlIGZ1bmN0aW9uIGlzIGJlaW5nIHJ1biBmb3IgdGhlIHNlY29uZCB0aW1lLCBhZnRlciBvdGhlciBwcm9jZXNzaW5nLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU3BhY2luZyhjb250ZW50OiBzdHJpbmcsIHNlY29uZFJ1biA9IGZhbHNlKSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxcYnxcXHB7UHVuY3R1YXRpb259fFxcXVxcXXxcXH1cXH18XFx3PikgezIsfShcXGJ8XFxwe1B1bmN0dWF0aW9ufXxcXFtcXFt8XFx7XFx7fDxcXHcpL2d1LCAnJDEgJDInKTsgLy8gUmVtb3ZlIGV4dHJhIHNwYWNlcyBiZXR3ZWVuIHdvcmRzIGFuZCBzZW50ZW5jZXNcbiAgICBpZiAoIXNlY29uZFJ1bikgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXiArfCArJC9nbSwgJycpOyAvLyBSZW1vdmUgZXh0cmEgc3BhY2VzIGF0IHRoZSBzdGFydCBvciBlbmQgb2YgbGluZXNcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9cXG57Myx9L2csICdcXG5cXG4nKTsgLy8gUmVtb3ZlIGV4dHJhIG5ld2xpbmVzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzKih7e1tefV0qc3R1Yn19KS9pLCAnXFxuXFxuJDEnKTsgLy8gRW5zdXJlIHRoZXJlIGlzIG9uZSBibGFuayBsaW5lIGJlZm9yZSB0aGUgZmlyc3Qgc3R1YiB0ZW1wbGF0ZVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1xccyskL2csICcnKTsgLy8gUmVtb3ZlIHRyYWlsaW5nIHNwYWNlc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL14oWyMqXSspICovZ20sICckMSAnKTsgLy8gRW5zdXJlIHRoZXJlIGlzIGEgc3BhY2UgYWZ0ZXIgYSBidWxsZXQgb3IgaGFzaCBpbiBhIGxpc3QgaXRlbVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL14oWyMqXSsgLiopXFxuKyg/PVsjKl0rICkvZ20sICckMVxcbicpOyAvLyBSZW1vdmUgbmV3bGluZXMgYmV0d2VlbiBsaXN0IGl0ZW1zXG4gICAgaWYgKCFzZWNvbmRSdW4pIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyg/PCFcXHwpXFxzKyg/PTxyZWYoPyFlcmVuY2VzKSkvZywgJycpOyAvLyBSZW1vdmUgc3BhY2VzIGJlZm9yZSByZWZlcmVuY2VzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvPFxcLyhbQS1aYS16XSspICs+L2csICc8LyQxPicpOyAvLyBSZW1vdmUgZXhjZXNzIHNwYWNlIGluIGNsb3NpbmcgdGFnc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL14oPSsuKj89KykkXFxuezIsfSg/PV49Ky4qPz0rJCkvZ20sICckMVxcbicpOyAvLyBSZW1vdmUgZXh0cmEgbmV3bGluZXMgYmV0d2VlbiBlbXB0eSBzZWN0aW9uIGFuZCBmb2xsb3dpbmcgc2VjdGlvblxuICAgIGNvbnRlbnQgPSBjb250ZW50LnRyaW0oKTsgLy8gUmVtb3ZlIHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiB0aGUgY29udGVudFxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIHJlZmVyZW5jZXMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwUmVmZXJlbmNlcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKFxuICAgICAgICAvKCg/OjxyZWYoPyFlcmVuY2VzKVteL10qPz4uKj88XFwvcmVmPnw8cmVmKD8hZXJlbmNlcykuKj9cXC8+KSspKFshLC47P10pPy9nLFxuICAgICAgICAoZnVsbE1hdGNoLCByZWZlcmVuY2VUYWc6IHN0cmluZywgcHVuY3R1YXRpb246IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4gKHB1bmN0dWF0aW9uID8/ICcnKSArIHJlZmVyZW5jZVRhZyxcbiAgICApOyAvLyBGaXggcHVuY3R1YXRpb24gZm9sbG93aW5nIHJlZmVyZW5jZXNcblxuICAgIGNvbnN0IHJlZmVyZW5jZXM6IHsgc3RhcnQ6IG51bWJlcjsgZW5kOiBudW1iZXI7IGlzU2VsZkNsb3Npbmc/OiB0cnVlIH1bXSA9IFtdO1xuXG4gICAgbGV0IGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZykgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2NlZWRzIHRocm91Z2ggdGhlIGNvbnRlbnQgdW50aWwgdGhlIGRlc2lyZWQgc3RyaW5nIGlzIGZvdW5kLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcm9jZWVkVW50aWxTdHJpbmcoZGVzaXJlZFN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aCAmJiAhaXNBdFN0cmluZyhkZXNpcmVkU3RyaW5nKSkgY3VycmVudExvY2F0aW9uKys7XG4gICAgfVxuXG4gICAgd2hpbGUgKGN1cnJlbnRMb2NhdGlvbiA8IGNvbnRlbnQubGVuZ3RoKVxuICAgICAgICBpZiAoaXNBdFN0cmluZygnPG5vd2lraT4nKSkgaXNJbnNpZGVOb3dpa2kgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8L25vd2lraT4nKSkgaXNJbnNpZGVOb3dpa2kgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPCEtLScpKSBpc0luc2lkZUNvbW1lbnQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCctLT4nKSkgaXNJbnNpZGVDb21tZW50ID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKCFpc0luc2lkZU5vd2lraSAmJiAhaXNJbnNpZGVDb21tZW50KVxuICAgICAgICAgICAgaWYgKCFpc0F0U3RyaW5nKCc8cmVmZXJlbmNlcycpICYmIGlzQXRTdHJpbmcoJzxyZWYnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gY3VycmVudExvY2F0aW9uIC0gNDtcblxuICAgICAgICAgICAgICAgIHByb2NlZWRVbnRpbFN0cmluZygnPicpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaXNTZWxmQ2xvc2luZyA9IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKHN0YXJ0LCBjdXJyZW50TG9jYXRpb24gLSAxKVxuICAgICAgICAgICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAgICAgICAgIC5lbmRzV2l0aCgnLycpO1xuXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlcy5wdXNoKGlzU2VsZkNsb3NpbmcgPyB7IHN0YXJ0LCBlbmQ6IGN1cnJlbnRMb2NhdGlvbiwgaXNTZWxmQ2xvc2luZyB9IDogeyBzdGFydCwgZW5kOiAtMSB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBdFN0cmluZygnPC9yZWY+JykpIHJlZmVyZW5jZXMuYXQoLTEpIS5lbmQgPSBjdXJyZW50TG9jYXRpb247XG4gICAgICAgICAgICBlbHNlIGN1cnJlbnRMb2NhdGlvbisrO1xuICAgICAgICBlbHNlIGN1cnJlbnRMb2NhdGlvbisrO1xuXG4gICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuXG4gICAgY29uc3QgcmVwbGFjZW1lbnRzOiBbc3RyaW5nLCBzdHJpbmddW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgcmVmZXJlbmNlIG9mIHJlZmVyZW5jZXMpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gY29udGVudC5zbGljZShyZWZlcmVuY2Uuc3RhcnQsIHJlZmVyZW5jZS5lbmQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXJ0VGFnID0gLzxyZWYoPyFlcmVuY2VzKS4qPz4vaXMuZXhlYyhvcmlnaW5hbFRleHQpIVswXTtcblxuICAgICAgICBjb25zdCBwYXJzZWRUYWcgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKFxuICAgICAgICAgICAgcmVmZXJlbmNlLmlzU2VsZkNsb3NpbmcgPyBzdGFydFRhZy5yZXBsYWNlKC8gKlxcLyAqPi8sICcgLz4nKSA6IHN0YXJ0VGFnICsgJzwvcmVmPicsXG4gICAgICAgICAgICAndGV4dC9odG1sJyxcbiAgICAgICAgKS5ib2R5LmZpcnN0Q2hpbGQgYXMgSFRNTFVua25vd25FbGVtZW50O1xuXG4gICAgICAgIGxldCBvdXRwdXQgPSBwYXJzZWRUYWcub3V0ZXJIVE1MLnJlcGxhY2VBbGwoJyZhbXA7JywgJyYnKTtcblxuICAgICAgICBjb25zdCB0YWdDb250ZW50ID0gb3JpZ2luYWxUZXh0XG4gICAgICAgICAgICAuc2xpY2Uoc3RhcnRUYWcubGVuZ3RoLCAtNilcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgIC5yZXBsYWNlQWxsKC9eXFxbICooW14gXFxdXSopICpdJC9nbSwgJyQxJylcbiAgICAgICAgICAgIC50cmltKCk7XG5cbiAgICAgICAgb3V0cHV0ID1cbiAgICAgICAgICAgIHJlZmVyZW5jZS5pc1NlbGZDbG9zaW5nIHx8IHRhZ0NvbnRlbnQubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgPyBvdXRwdXQucmVwbGFjZSgvPlxccyo8XFwvcmVmPi8sICcgLz4nKVxuICAgICAgICAgICAgICAgIDogYCR7b3V0cHV0LnNsaWNlKDAsIC02KX0ke3RhZ0NvbnRlbnR9PC9yZWY+YDtcblxuICAgICAgICBpZiAob3JpZ2luYWxUZXh0ICE9PSBvdXRwdXQpIHJlcGxhY2VtZW50cy5wdXNoKFtvcmlnaW5hbFRleHQsIG91dHB1dF0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgW29yaWdpbmFsVGV4dCwgb3V0cHV0XSBvZiByZXBsYWNlbWVudHMpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUZXh0LCBvdXRwdXQpO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbmludGVyZmFjZSBUZW1wbGF0ZVJlZGlyZWN0IHtcbiAgICBmcm9tOiBzdHJpbmdbXTtcbiAgICB0bzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEZvcm1hdHMgdGVtcGxhdGUgc3BhY2luZyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gZm9ybWF0LlxuICovXG5hc3luYyBmdW5jdGlvbiBmb3JtYXRUZW1wbGF0ZXMoY29udGVudDogc3RyaW5nKSB7XG4gICAgZW51bSBGb3JtYXRTdHlsZSB7XG4gICAgICAgIEV4cGFuZGVkLFxuICAgICAgICBFeHBhbmRlZEFsaWduZWQsXG4gICAgICAgIE1pbmltaXplZCxcbiAgICAgICAgTWluaW1pemVkU3BhY2VkLFxuICAgIH1cblxuICAgIGVudW0gTmFtZXNwYWNlIHtcbiAgICAgICAgVXNlciA9IDIsXG4gICAgICAgIFRlbXBsYXRlID0gMTAsXG4gICAgICAgIERyYWZ0ID0gMTE4LFxuICAgIH1cblxuICAgIGNvbnN0IHRlbXBsYXRlQWxpYXNlcyA9IEpTT04ucGFyc2UoXG4gICAgICAgIChcbiAgICAgICAgICAgIChhd2FpdCBuZXcgbXcuQXBpKCkuZ2V0KHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgICAgIHByb3A6ICdyZXZpc2lvbnMnLFxuICAgICAgICAgICAgICAgIHJ2cHJvcDogJ2NvbnRlbnQnLFxuICAgICAgICAgICAgICAgIHJ2c2xvdHM6ICdtYWluJyxcbiAgICAgICAgICAgICAgICB0aXRsZXM6ICdVc2VyOkVlaml0NDMvc2NyaXB0cy9hcnRpY2xlLWNsZWFuZXIuanNvbicsXG4gICAgICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcykpIGFzIFBhZ2VSZXZpc2lvbnNSZXN1bHRcbiAgICAgICAgKS5xdWVyeSEucGFnZXNbMF0/LnJldmlzaW9ucz8uWzBdPy5zbG90cz8ubWFpbj8uY29udGVudCB8fCAnW10nLFxuICAgICkgYXMgVGVtcGxhdGVSZWRpcmVjdFtdO1xuXG4gICAgY29uc3QgbWFwcGVkVGVtcGxhdGVBbGlhc2VzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICB0ZW1wbGF0ZUFsaWFzZXMuZmxhdE1hcCgoYWxpYXMpID0+IGFsaWFzLmZyb20ubWFwKChmcm9tKSA9PiBbZnJvbS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIGZyb20uc2xpY2UoMSksIGFsaWFzLnRvXSkpLFxuICAgICk7XG5cbiAgICBjbGFzcyBUZW1wbGF0ZSB7XG4gICAgICAgIHB1YmxpYyBsb2NhdGlvbjogeyBzdGFydDogbnVtYmVyOyBlbmQ/OiBudW1iZXIgfTtcbiAgICAgICAgcHVibGljIGlzTmVzdGVkID0gZmFsc2U7XG5cbiAgICAgICAgcHVibGljIGZ1bGxUZXh0Pzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIGZ1bGxUZXh0RXNjYXBlZD86IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSByYXdOYW1lPzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIG5hbWU/OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcGFyYW1ldGVyczogeyBrZXk6IHN0cmluZyB8IG51bGw7IHZhbHVlOiBzdHJpbmcgfVtdID0gW107XG4gICAgICAgIHB1YmxpYyBzdWJUZW1wbGF0ZXM6IFRlbXBsYXRlW10gPSBbXTtcblxuICAgICAgICBwcml2YXRlIFBMQUNFSE9MREVSX1NUUklOR1MgPSBbJ1xcdXtGMDAwMH0nLCAnXFx1ezEwRkZGRn0nLCAnXFx1e0ZGRkZFfSddO1xuXG4gICAgICAgIHByaXZhdGUgUElQRV9FU0NBUEVfUkVHRVhFUyA9IFsvKFxcW1xcW1teXFxdXSo/KVxcfCguKj9dXSkvZywgLyg8IS0tLio/KVxcfCguKj8tLT4pL2csIC8oPG5vd2lraT4uKj8pXFx8KC4qPzxcXC9ub3dpa2k+KS9nXTtcblxuICAgICAgICBwcml2YXRlIFRBR19FUVVBTFNfRVNDQVBFX1JFR0VYRVMgPSBbLzwoXFx3KykoIFtePD5dKz8pKD88IVxcLyk+Lio/PFxcL1xcMT4vZywgLzwoXFx3KykoIFtePD5dKz8pXFwvPi9nXTtcblxuICAgICAgICBwcml2YXRlIHRlbXBsYXRlQWxpYXNlcyA9IG1hcHBlZFRlbXBsYXRlQWxpYXNlcztcblxuICAgICAgICBwcml2YXRlIGRlZmF1bHRUZW1wbGF0ZVN0eWxlcyA9IHtcbiAgICAgICAgICAgIFtGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWRdOiBbXG4gICAgICAgICAgICAgICAgJ2FsYnVtIHJhdGluZycsXG4gICAgICAgICAgICAgICAgJ2FsYnVtIHJldmlld3MnLFxuICAgICAgICAgICAgICAgICdhbWVyaWNhbiBmb290YmFsbCB1bmlmb3JtJyxcbiAgICAgICAgICAgICAgICAnYXVzdHJhbGlhbiBydWxlcyBmb290YmFsbCBraXQnLFxuICAgICAgICAgICAgICAgICdhdXRvbWF0aWMgdGF4b2JveCcsXG4gICAgICAgICAgICAgICAgJ2Jhc2ViYWxsIHVuaWZvcm0nLFxuICAgICAgICAgICAgICAgICdiYXNrZXRiYWxsIGtpdCcsXG4gICAgICAgICAgICAgICAgJ2JlYWNoaGFuZGJhbGwga2l0JyxcbiAgICAgICAgICAgICAgICAnYmxvY2txdW90ZScsXG4gICAgICAgICAgICAgICAgJ2NoZW1ib3gnLFxuICAgICAgICAgICAgICAgICdjcmlja2V0IHVuaWZvcm0nLFxuICAgICAgICAgICAgICAgICdlbGVjdGlvbiBib3gnLFxuICAgICAgICAgICAgICAgICdlcGlzb2RlIGxpc3QnLFxuICAgICAgICAgICAgICAgICdleHRlcm5hbCBtdXNpYyB2aWRlbycsXG4gICAgICAgICAgICAgICAgJ2V4dHJhIGFsYnVtIGNvdmVyJyxcbiAgICAgICAgICAgICAgICAnZmllbGQgaG9ja2V5IGtpdCcsXG4gICAgICAgICAgICAgICAgJ2Zvb3RiYWxsIGJveCcsXG4gICAgICAgICAgICAgICAgJ2Zvb3RiYWxsIGtpdCcsXG4gICAgICAgICAgICAgICAgJ2Zvb3RiYWxsYm94JyxcbiAgICAgICAgICAgICAgICAnaGFuZGJhbGwga2l0JyxcbiAgICAgICAgICAgICAgICAnaHlicmlkYm94JyxcbiAgICAgICAgICAgICAgICAnaWNlaG9ja2V5IGtpdCcsXG4gICAgICAgICAgICAgICAgJ2ljaG5vYm94JyxcbiAgICAgICAgICAgICAgICAnaW5mb2JveCcsXG4gICAgICAgICAgICAgICAgJ2luZnJhc3BlY2llc2JveCcsXG4gICAgICAgICAgICAgICAgJ2p1ZG8gYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJ2p1ZG8gcmVwZWNoYWdlJyxcbiAgICAgICAgICAgICAgICAnbGlzdGVuJyxcbiAgICAgICAgICAgICAgICAnbG9jYXRpb24gbWFwJyxcbiAgICAgICAgICAgICAgICAnbWVkaWNhbCByZXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICdtb3RvcnNwb3J0IHNlYXNvbicsXG4gICAgICAgICAgICAgICAgJ211bHRpcGxlIGltYWdlJyxcbiAgICAgICAgICAgICAgICAnbXVzaWMgcmF0aW5ncycsXG4gICAgICAgICAgICAgICAgJ215Y29tb3JwaGJveCcsXG4gICAgICAgICAgICAgICAgJ25hdmJveCcsXG4gICAgICAgICAgICAgICAgJ29vYm94JyxcbiAgICAgICAgICAgICAgICAnb3JiaXRib3gnLFxuICAgICAgICAgICAgICAgICdvc20gbG9jYXRpb24gbWFwJyxcbiAgICAgICAgICAgICAgICAncXVvdGUgYm94JyxcbiAgICAgICAgICAgICAgICAncmVwZWNoYWdlJyxcbiAgICAgICAgICAgICAgICAncnVnYnlib3gnLFxuICAgICAgICAgICAgICAgICdzaWRlYmFyJyxcbiAgICAgICAgICAgICAgICAnc2luZ2xlIHJhdGluZ3MnLFxuICAgICAgICAgICAgICAgICdzaW5nbGVzJyxcbiAgICAgICAgICAgICAgICAnc29uZyByYXRpbmdzJyxcbiAgICAgICAgICAgICAgICAnc3BlY2llc2JveCcsXG4gICAgICAgICAgICAgICAgJ3N0YXJib3gnLFxuICAgICAgICAgICAgICAgICdzdWNjZXNzaW9uIGJveCcsXG4gICAgICAgICAgICAgICAgJ3RheG9ib3gnLFxuICAgICAgICAgICAgICAgICd0ZWFtIGJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICd0cmFjayBsaXN0aW5nJyxcbiAgICAgICAgICAgICAgICAndHdlZXQnLFxuICAgICAgICAgICAgICAgICd2aXJ1c2JveCcsXG4gICAgICAgICAgICAgICAgJ3ZvbGxleWJhbGwga2l0JyxcblxuICAgICAgICAgICAgICAgIC8vIE51bWJlcmVkIGJyYWNrZXRzXG4gICAgICAgICAgICAgICAgJ250ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzJudGVhbS1udGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcydGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICczdGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICczdGVhbXJyJyxcbiAgICAgICAgICAgICAgICAnNHRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnNHRlYW1ycicsXG4gICAgICAgICAgICAgICAgJzV0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzV0ZWFtcnInLFxuICAgICAgICAgICAgICAgICc2dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICc2dGVhbXJyJyxcbiAgICAgICAgICAgICAgICAnN3RlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnN3RlYW1ycicsXG4gICAgICAgICAgICAgICAgJzh0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzh0ZWFtcm91bmRyb2JpbicsXG4gICAgICAgICAgICAgICAgJzh0ZWFtcnInLFxuICAgICAgICAgICAgICAgICc5dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcxMHRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMTF0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzEydGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcxM3RlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMTR0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzE1dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcxNnRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMTh0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzIwdGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcyNHRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMjd0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzMydGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICc0MHRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnNDh0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzY0dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcxMjh0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW0Zvcm1hdFN0eWxlLk1pbmltaXplZF06IFsnYmlydGggZGF0ZScsICdjb29yZCcsICdkZWF0aCBkYXRlJywgJ2VuZCBkYXRlJywgJ2xhbmcnLCAnc3RhcnQgZGF0ZSddLFxuICAgICAgICAgICAgW0Zvcm1hdFN0eWxlLk1pbmltaXplZFNwYWNlZF06IFsnaW5mb2JveCBtYXBmcmFtZSddLFxuICAgICAgICB9O1xuXG4gICAgICAgIHByaXZhdGUgbmFtZXNwYWNlU3BlY2lmaWNUZW1wbGF0ZXMgPSB7XG4gICAgICAgICAgICBbTmFtZXNwYWNlLkRyYWZ0XTogW1xuICAgICAgICAgICAgICAgICdhZmMgY29tbWVudCcsXG4gICAgICAgICAgICAgICAgJ2FmYyBzdWJtaXNzaW9uJyxcbiAgICAgICAgICAgICAgICAnYWZjIHN1Ym1pc3Npb24vZHJhZnQnLFxuICAgICAgICAgICAgICAgICdhZmMgdG9waWMnLFxuICAgICAgICAgICAgICAgICdkcmFmdCBhcnRpY2xlJyxcbiAgICAgICAgICAgICAgICAnZHJhZnQgY2F0ZWdvcmllcycsXG4gICAgICAgICAgICAgICAgJ2RyYWZ0IHRvcGljcycsXG4gICAgICAgICAgICAgICAgJ2RyYWZ0JyxcbiAgICAgICAgICAgICAgICAnZHJhZnRzIG1vdmVkIGZyb20gbWFpbnNwYWNlJyxcbiAgICAgICAgICAgICAgICAncHJlbG9hZGRyYWZ0IHN1Ym1pdCcsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW05hbWVzcGFjZS5Vc2VyXTogWydkYXNoYm9hcmQud2lraWVkdS5vcmcgc2FuZGJveCcsICd1c2VyIHNhbmRib3gnLCAndXNlcnNwYWNlIGRyYWZ0J10sXG4gICAgICAgIH07XG5cbiAgICAgICAgcHJpdmF0ZSB0ZW1wbGF0ZXNUb0tlZXBDb250ZW50ID0gWydkcmFmdCBjYXRlZ29yaWVzJ107XG5cbiAgICAgICAgcHJpdmF0ZSB0ZW1wbGF0ZXNUb1N1YnN0ID0gW1xuICAgICAgICAgICAgLy8gTWFnaWMgd29yZHNcbiAgICAgICAgICAgICdhcnRpY2xlcGFnZW5hbWUnLFxuICAgICAgICAgICAgJ2FydGljbGVzcGFjZScsXG4gICAgICAgICAgICAnYmFzZXBhZ2VuYW1lJyxcbiAgICAgICAgICAgICdmdWxscGFnZW5hbWUnLFxuICAgICAgICAgICAgJ25hbWVzcGFjZScsXG4gICAgICAgICAgICAnbmFtZXNwYWNlbnVtYmVyJyxcbiAgICAgICAgICAgICdwYWdlbmFtZScsXG4gICAgICAgICAgICAncm9vdHBhZ2VuYW1lJyxcbiAgICAgICAgICAgICdzdWJqZWN0cGFnZW5hbWUnLFxuICAgICAgICAgICAgJ3N1YmplY3RzcGFjZScsXG4gICAgICAgICAgICAnc3VicGFnZW5hbWUnLFxuICAgICAgICAgICAgJ3RhbGtwYWdlbmFtZScsXG4gICAgICAgICAgICAndGFsa3NwYWNlJyxcblxuICAgICAgICAgICAgLy8gVGVtcGxhdGVzXG4gICAgICAgICAgICAncGFnZW5hbWViYXNlJyxcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzdGFydExvY2F0aW9uOiBudW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSB7IHN0YXJ0OiBzdGFydExvY2F0aW9uIH07XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgcGFyc2UoKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUZXh0ID0gY29udGVudC5zbGljZSh0aGlzLmxvY2F0aW9uLnN0YXJ0LCB0aGlzLmxvY2F0aW9uLmVuZCk7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUZXh0RXNjYXBlZCA9IHRoaXMuZnVsbFRleHQ7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViVGVtcGxhdGUgb2YgdGhpcy5zdWJUZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgICAgICBzdWJUZW1wbGF0ZS5wYXJzZSgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5mdWxsVGV4dEVzY2FwZWQgPSB0aGlzLmZ1bGxUZXh0RXNjYXBlZC5yZXBsYWNlKHN1YlRlbXBsYXRlLmZ1bGxUZXh0ISwgdGhpcy5QTEFDRUhPTERFUl9TVFJJTkdTWzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHRyaW1tZWRJbm5lclRleHQgPSB0aGlzLmZ1bGxUZXh0RXNjYXBlZC5zbGljZSgyLCAtMikudHJpbSgpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBpcGVFc2NhcGVSZWdleCBvZiB0aGlzLlBJUEVfRVNDQVBFX1JFR0VYRVMpXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBpcGVFc2NhcGVSZWdleC50ZXN0KHRyaW1tZWRJbm5lclRleHQpKVxuICAgICAgICAgICAgICAgICAgICB0cmltbWVkSW5uZXJUZXh0ID0gdHJpbW1lZElubmVyVGV4dC5yZXBsYWNlQWxsKHBpcGVFc2NhcGVSZWdleCwgYCQxJHt0aGlzLlBMQUNFSE9MREVSX1NUUklOR1NbMV19JDJgKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCByZWdleCBvZiB0aGlzLlRBR19FUVVBTFNfRVNDQVBFX1JFR0VYRVMpXG4gICAgICAgICAgICAgICAgdHJpbW1lZElubmVyVGV4dCA9IHRyaW1tZWRJbm5lclRleHQucmVwbGFjZUFsbChyZWdleCwgKGZ1bGxUZXh0LCB0YWdOYW1lOiBzdHJpbmcsIGF0dHJpYnV0ZXM6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVsbFRleHQucmVwbGFjZShhdHRyaWJ1dGVzLCBhdHRyaWJ1dGVzLnJlcGxhY2VBbGwoJz0nLCB0aGlzLlBMQUNFSE9MREVSX1NUUklOR1NbMl0pKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IHRyaW1tZWRJbm5lclRleHRcbiAgICAgICAgICAgICAgICAuc3BsaXQoJ3wnKVxuICAgICAgICAgICAgICAgIC5tYXAoKHBhcmFtZXRlcikgPT4gcGFyYW1ldGVyLnJlcGxhY2VBbGwodGhpcy5QTEFDRUhPTERFUl9TVFJJTkdTWzFdLCAnfCcpLnRyaW0oKSk7XG5cbiAgICAgICAgICAgIHRoaXMucmF3TmFtZSA9IHBhcmFtZXRlcnMuc2hpZnQoKSE7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLnJhd05hbWUucmVwbGFjZUFsbCgnXycsICcgJyk7XG5cbiAgICAgICAgICAgIC8vIFN0cmlwIG5hbWVzcGFjZSBwcmVmaXggZnJvbSBuYW1lXG4gICAgICAgICAgICBpZiAodGhpcy5uYW1lLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgndGVtcGxhdGU6JykpIHRoaXMubmFtZSA9IHRoaXMubmFtZS5zbGljZSg5KTtcblxuICAgICAgICAgICAgY29uc3QgbmFtZUxvd2VyY2FzZUZpcnN0ID0gdGhpcy5uYW1lLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgdGhpcy5uYW1lLnNsaWNlKDEpO1xuXG4gICAgICAgICAgICAvLyBSZXNvbHZlIHRlbXBsYXRlIGFsaWFzIGluIG5hbWVcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWVMb3dlcmNhc2VGaXJzdCBpbiB0aGlzLnRlbXBsYXRlQWxpYXNlcyA/IHRoaXMudGVtcGxhdGVBbGlhc2VzW25hbWVMb3dlcmNhc2VGaXJzdF0gOiB0aGlzLm5hbWU7XG5cbiAgICAgICAgICAgIGNvbnN0IHNwbGl0UGFyYW1ldGVycyA9IHBhcmFtZXRlcnMubWFwKChwYXJhbWV0ZXJzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXF1YWxzTG9jYXRpb24gPSBwYXJhbWV0ZXJzLmluZGV4T2YoJz0nKTtcblxuICAgICAgICAgICAgICAgIGlmIChlcXVhbHNMb2NhdGlvbiA9PT0gLTEpIHJldHVybiB7IGtleTogbnVsbCwgdmFsdWU6IHBhcmFtZXRlcnMucmVwbGFjZUFsbCh0aGlzLlBMQUNFSE9MREVSX1NUUklOR1NbMl0sICc9JykudHJpbSgpIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtZXRlcnMuc2xpY2UoZXF1YWxzTG9jYXRpb24gKyAxKS5yZXBsYWNlQWxsKHRoaXMuUExBQ0VIT0xERVJfU1RSSU5HU1syXSwgJz0nKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogcGFyYW1ldGVycy5zbGljZSgwLCBlcXVhbHNMb2NhdGlvbikudHJpbSgpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYCR7dmFsdWUuc3RhcnRzV2l0aCgnXFxuJykgPyAnXFxuJyA6ICcnfSR7dmFsdWUudHJpbSgpfWAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBzcGxpdFBhcmFtZXRlcnM7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHNob3VsZEJlUmVtb3ZlZCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWVzcGFjZSwgdGVtcGxhdGVzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLm5hbWVzcGFjZVNwZWNpZmljVGVtcGxhdGVzKSkge1xuICAgICAgICAgICAgICAgIGlmIChtdy5jb25maWcuZ2V0KCd3Z05hbWVzcGFjZU51bWJlcicpID09PSBOdW1iZXIucGFyc2VJbnQobmFtZXNwYWNlKSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBpZiAodGVtcGxhdGVzLmluY2x1ZGVzKHRoaXMubmFtZSEudG9Mb3dlckNhc2UoKSkpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdldFN0eWxlKCkge1xuICAgICAgICAgICAgbGV0IG1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZVByZWZpeExlbmd0aCA9IDA7XG4gICAgICAgICAgICBsZXQgbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlRm9ybWF0U3R5bGU6IEZvcm1hdFN0eWxlIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtmb3JtYXRTdHlsZSwgdGVtcGxhdGVQcmVmaXhlc10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5kZWZhdWx0VGVtcGxhdGVTdHlsZXMpKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGVtcGxhdGVQcmVmaXggb2YgdGVtcGxhdGVQcmVmaXhlcylcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lIS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgodGVtcGxhdGVQcmVmaXgpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByZWZpeC5sZW5ndGggPj0gbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlUHJlZml4TGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlUHJlZml4TGVuZ3RoID0gdGVtcGxhdGVQcmVmaXgubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlRm9ybWF0U3R5bGUgPSBOdW1iZXIucGFyc2VJbnQoZm9ybWF0U3R5bGUpIGFzIEZvcm1hdFN0eWxlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgY2xlYW51cFBhcmFtZXRlcnMoKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZVBhcmFtZXRlcnMgPSBuZXcgU2V0KFsnY292ZXInLCAnaW1hZ2VfZmxhZycsICdpbWFnZScsICdsb2dvJywgJ21hcF9pbWFnZSddKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgbnVtYmVyID0gMTsgbnVtYmVyIDw9IDEwOyBudW1iZXIrKykgaW1hZ2VQYXJhbWV0ZXJzLmFkZChgaW1hZ2Uke251bWJlcn1gKTtcblxuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gdGhpcy5wYXJhbWV0ZXJzLm1hcCgoeyBrZXksIHZhbHVlIH0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICYmIGltYWdlUGFyYW1ldGVycy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnW1snKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXV0nKSkgdmFsdWUgPSAvXFxbXFxbKC4qPyldXS9nLmV4ZWModmFsdWUpIVsxXS5zcGxpdCgnfCcpWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXihGaWxlfEltYWdlKTovLCAnJykucmVwbGFjZUFsbCgnXycsICcgJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsga2V5LCB2YWx1ZSB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgZm9ybWF0KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZ1bGxUZXh0KSB0aGlzLnBhcnNlKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZEJlUmVtb3ZlZCgpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlc1RvS2VlcENvbnRlbnQuaW5jbHVkZXModGhpcy5uYW1lIS50b0xvd2VyQ2FzZSgpKSA/IHRoaXMucGFyYW1ldGVyc1swXS52YWx1ZSA6ICcnO1xuXG4gICAgICAgICAgICBjb25zdCBzaG91bGRTdWJzdCA9XG4gICAgICAgICAgICAgICAgbXcuY29uZmlnLmdldCgnd2dOYW1lc3BhY2VOdW1iZXInKSAhPT0gKE5hbWVzcGFjZS5UZW1wbGF0ZSBhcyBudW1iZXIpICYmXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZXNUb1N1YnN0LnNvbWUoKG5hbWUpID0+IG5hbWUgPT09IHRoaXMubmFtZSEudG9Mb3dlckNhc2UoKSB8fCB0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChgJHtuYW1lfTpgKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nZXRTdHlsZSgpO1xuICAgICAgICAgICAgaWYgKHN0eWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TmFtZSA9IHRoaXMubmFtZSE7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmFtZSEudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCd0ZW1wbGF0ZTonKSkgbmV3TmFtZSA9IHRoaXMubmFtZSEuc2xpY2UoOSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU3Vic3QpIG5ld05hbWUgPSBgc3Vic3Q6JHtuZXdOYW1lfWA7XG5cbiAgICAgICAgICAgICAgICBpZiAobmV3TmFtZSAhPT0gdGhpcy5yYXdOYW1lISkgdGhpcy5mdWxsVGV4dEVzY2FwZWQgPSB0aGlzLmZ1bGxUZXh0RXNjYXBlZCEucmVwbGFjZSh0aGlzLnJhd05hbWUhLCBuZXdOYW1lKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViVGVtcGxhdGUgb2YgdGhpcy5zdWJUZW1wbGF0ZXMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnVsbFRleHRFc2NhcGVkID0gdGhpcy5mdWxsVGV4dEVzY2FwZWQhLnJlcGxhY2UodGhpcy5QTEFDRUhPTERFUl9TVFJJTkdTWzBdLCBzdWJUZW1wbGF0ZS5mb3JtYXQoKSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mdWxsVGV4dEVzY2FwZWQhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBbYHt7JHtzaG91bGRTdWJzdCA/ICdzdWJzdDonIDogJyd9JHt0aGlzLm5hbWUhfWBdO1xuXG4gICAgICAgICAgICB0aGlzLmNsZWFudXBQYXJhbWV0ZXJzKCk7XG5cbiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWQgfHwgc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZCkge1xuICAgICAgICAgICAgICAgIGxldCByZXF1aXJlZEtleUxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZClcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRLZXlMZW5ndGggPSBNYXRoLm1heCguLi50aGlzLnBhcmFtZXRlcnMubWFwKChwYXJhbWV0ZXIpID0+IHBhcmFtZXRlci5rZXk/Lmxlbmd0aCA/PyAwKSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgcGFyYW1ldGVyXSBvZiB0aGlzLnBhcmFtZXRlcnMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICFwYXJhbWV0ZXIua2V5ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhcGFyYW1ldGVyLnZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2xpY2UoaW5kZXggKyAxKS5ldmVyeSgocGFyYW1ldGVyKSA9PiBwYXJhbWV0ZXIua2V5ID8/ICFwYXJhbWV0ZXIudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGB8ICR7cGFyYW1ldGVyLmtleSA/IGAke3BhcmFtZXRlci5rZXkucGFkRW5kKHJlcXVpcmVkS2V5TGVuZ3RoKX0gPSBgIDogJyd9JHtwYXJhbWV0ZXIudmFsdWV9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIHBhcmFtZXRlcl0gb2YgdGhpcy5wYXJhbWV0ZXJzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAhcGFyYW1ldGVyLnZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAocGFyYW1ldGVyLmtleSB8fCB0aGlzLnBhcmFtZXRlcnMuc2xpY2UoaW5kZXggKyAxKS5ldmVyeSgocGFyYW1ldGVyKSA9PiBwYXJhbWV0ZXIua2V5ID8/ICFwYXJhbWV0ZXIudmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChgfCR7cGFyYW1ldGVyLmtleSA/IGAke3BhcmFtZXRlci5rZXl9PWAgOiAnJ30ke3BhcmFtZXRlci52YWx1ZX1gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG91dHB1dC5wdXNoKCd9fScpO1xuXG4gICAgICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIG91dHB1dFswXSArPSAnfX0nO1xuXG4gICAgICAgICAgICAgICAgb3V0cHV0LnBvcCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHlsZSA9PT0gRm9ybWF0U3R5bGUuTWluaW1pemVkU3BhY2VkKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGggLSAyXSArPSAnfX0nO1xuXG4gICAgICAgICAgICAgICAgb3V0cHV0LnBvcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgam9pbmVkT3V0cHV0ID0gb3V0cHV0LmpvaW4oXG4gICAgICAgICAgICAgICAgc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkIHx8IHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWRcbiAgICAgICAgICAgICAgICAgICAgPyAnXFxuJ1xuICAgICAgICAgICAgICAgICAgICA6IHN0eWxlID09PSBGb3JtYXRTdHlsZS5NaW5pbWl6ZWRTcGFjZWRcbiAgICAgICAgICAgICAgICAgICAgICA/ICcgJ1xuICAgICAgICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YlRlbXBsYXRlIG9mIHRoaXMuc3ViVGVtcGxhdGVzKVxuICAgICAgICAgICAgICAgIGpvaW5lZE91dHB1dCA9IGpvaW5lZE91dHB1dC5yZXBsYWNlKHRoaXMuUExBQ0VIT0xERVJfU1RSSU5HU1swXSwgc3ViVGVtcGxhdGUuZm9ybWF0KCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gam9pbmVkT3V0cHV0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWxsVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG5cbiAgICBjb25zdCBpbnNpZGVUZW1wbGF0ZXM6IFRlbXBsYXRlW10gPSBbXTtcbiAgICBsZXQgaXNJbnNpZGVMaW5rID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZykgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgaWYgKGlzQXRTdHJpbmcoJzxub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPC9ub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwhLS0nKSkgaXNJbnNpZGVDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnLS0+JykpIGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmICghaXNJbnNpZGVOb3dpa2kgJiYgIWlzSW5zaWRlQ29tbWVudClcbiAgICAgICAgICAgIGlmIChpc0F0U3RyaW5nKCdbWycpKSBpc0luc2lkZUxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnNpZGVMaW5rICYmIGlzQXRTdHJpbmcoJ11dJykpIGlzSW5zaWRlTGluayA9IGZhbHNlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygne3snKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKGN1cnJlbnRMb2NhdGlvbiAtIDIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluc2lkZVRlbXBsYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmlzTmVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5zaWRlVGVtcGxhdGVzLmF0KC0xKT8uc3ViVGVtcGxhdGVzLnB1c2godGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGluc2lkZVRlbXBsYXRlcy5wdXNoKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBdFN0cmluZygnfX0nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RUZW1wbGF0ZSA9IGluc2lkZVRlbXBsYXRlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3RUZW1wbGF0ZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBsYXN0VGVtcGxhdGUubG9jYXRpb24uZW5kID0gY3VycmVudExvY2F0aW9uO1xuXG4gICAgICAgICAgICAgICAgYWxsVGVtcGxhdGVzLnB1c2gobGFzdFRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBjdXJyZW50TG9jYXRpb24rKztcbiAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGxldCBuZXdDb250ZW50ID0gY29udGVudDtcblxuICAgIGZvciAoY29uc3QgdGVtcGxhdGUgb2YgYWxsVGVtcGxhdGVzKVxuICAgICAgICBpZiAoIXRlbXBsYXRlLmlzTmVzdGVkKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5wYXJzZSgpO1xuXG4gICAgICAgICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKHRlbXBsYXRlLmZ1bGxUZXh0ISwgdGVtcGxhdGUuZm9ybWF0KCkpO1xuICAgICAgICB9XG5cbiAgICByZXR1cm4gbmV3Q29udGVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHVubmVjZXNzYXJ5IGNvbW1lbnRzIGZyb20gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiByZW1vdmVDb21tZW50cyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBpZiAobXcuY29uZmlnLmdldCgnd2dOYW1lc3BhY2VOdW1iZXInKSAhPT0gMCkgcmV0dXJuIGNvbnRlbnQ7XG5cbiAgICBjb25zdCBjb21tZW50cyA9IFtcbiAgICAgICAgJ0RvIG5vdCByZW1vdmUgdGhpcyBsaW5lJyxcbiAgICAgICAgJ0VESVQgQkVMT1cgVEhJUyBMSU5FJyxcbiAgICAgICAgJ0ltcG9ydGFudCwgZG8gbm90IHJlbW92ZSBhbnl0aGluZyBhYm92ZSB0aGlzIGxpbmUgYmVmb3JlIGFydGljbGUgaGFzIGJlZW4gY3JlYXRlZCcsXG4gICAgICAgICdJbXBvcnRhbnQsIGRvIG5vdCByZW1vdmUgdGhpcyBsaW5lIGJlZm9yZSBhcnRpY2xlIGhhcyBiZWVuIGNyZWF0ZWQnLFxuICAgICAgICAnSW5saW5lIGNpdGF0aW9ucyBhZGRlZCB0byB5b3VyIGFydGljbGUgd2lsbCBhdXRvbWF0aWNhbGx5IGRpc3BsYXkgaGVyZScsXG4gICAgICAgICdOb3RlOiBUaGUgZm9sbG93aW5nIHBhZ2VzIHdlcmUgcmVkaXJlY3RzIHRvICcsXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgY29tbWVudCBvZiBjb21tZW50cylcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChuZXcgUmVnRXhwKGAgKjwhLS0gPyR7ZXNjYXBlUmVnZXhDaGFyYWN0ZXJzKGNvbW1lbnQpfS4qPy0tPiAqXFxuP2AsICdncycpLCAnJyk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBBZGRzIHJlbGV2YW50IHRhZ3MgdG8gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGFkZCB0YWdzIHRvLlxuICovXG5mdW5jdGlvbiBhdXRvVGFnUGFnZShjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCBudW1iZXJPZkNhdGVnb3JpZXMgPSBbLi4uY29udGVudC5tYXRjaEFsbCgvXFxbXFxbQ2F0ZWdvcnk6L2cpXS5sZW5ndGg7XG5cbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9cXG4qe3sodW5jYXRlZ29yaXplZHxpbXByb3ZlIGNhdGVnb3JpZXMpKFxcfC4rPyk/fX1cXG4qL2dpLCAnJyk7XG5cbiAgICBpZiAobnVtYmVyT2ZDYXRlZ29yaWVzID09PSAwICYmICEve3t1bmNhdGVnb3JpemVkL2kudGVzdChjb250ZW50KSlcbiAgICAgICAgY29udGVudCArPSAnXFxuXFxue3tVbmNhdGVnb3JpemVkfHt7c3Vic3Q6Q1VSUkVOVE1PTlRITkFNRX19IHt7c3Vic3Q6Q1VSUkVOVFlFQVJ9fX19JztcbiAgICBlbHNlIGlmIChudW1iZXJPZkNhdGVnb3JpZXMgPT09IDEgJiYgIS97e2ltcHJvdmUgY2F0ZWdvcmllcy9pLnRlc3QoY29udGVudCkpXG4gICAgICAgIGNvbnRlbnQgKz0gJ1xcblxcbnt7SW1wcm92ZSBjYXRlZ29yaWVzfHt7c3Vic3Q6Q1VSUkVOVE1PTlRITkFNRX19IHt7c3Vic3Q6Q1VSUkVOVFlFQVJ9fX19JztcblxuICAgIHJldHVybiBjb250ZW50O1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7O21CQXNDUSxHQUFHLE9BQU8sSUFBSSxtQkFBbUIsRUFBSSxHQUNwQyxHQUFHLE9BQU8sSUFBSSxzQkFBc0IsR0FFekMsR0FBRyxPQUFPLE1BQU0sQ0FBQyxpQkFBa0Isc0JBQXNCLEVBQUcsSUFBTSxDQUM5RCxHQUFHLEtBQUssT0FBTztBQUFBO0FBQUE7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S0FBS0ksQ0FBWSxDQUNsQyxNQUFPaEYsU0FDTkEsSUFFVCxJQUFJaUYsRUFBYXJILEVBRWpCLFFBQVdtSCxLQUFZSCxFQUNkRyxFQUFTLFdBQ1ZBLEVBQVMsTUFBTSxFQUVmRSxFQUFhQSxFQUFXLFFBQVFGLEVBQVMsU0FBV0EsRUFBUyxPQUFPLENBQUMsR0FHN0UsT0FBT0UsQ0FDWCxDQU1BLFNBQVMxSCxFQUFlSyxFQUFpQixDQUNyQyxHQUFJLEdBQUcsT0FBTyxJQUFJLG1CQUFtQixJQUFNLEVBQUcsT0FBT0EsRUFFckQsSUFBTXNILEVBQVcsQ0FDYiwwQkFDQSx1QkFDQSxvRkFDQSxxRUFDQSx5RUFDQSw4Q0FDSixFQUVBLFFBQVdDLEtBQVdELEVBQ2xCdEgsRUFBVUEsRUFBUSxXQUFXLElBQUksT0FBTyxXQUFXRixFQUFzQnlILENBQU8sQ0FBQztBQUFBLEdBQWUsSUFBSSxFQUFHLEVBQUUsRUFFN0csT0FBT3ZILENBQ1gsQ0FNQSxTQUFTSixFQUFZSSxFQUFpQixDQUNsQyxJQUFNd0gsRUFBcUIsQ0FBQyxHQUFHeEgsRUFBUSxTQUFTLGdCQUFnQixDQUFDLEVBQUUsT0FFbkUsT0FBQUEsRUFBVUEsRUFBUSxXQUFXLHlEQUEwRCxFQUFFLEVBRXJGd0gsSUFBdUIsR0FBSyxDQUFDLG1CQUFtQixLQUFLeEgsQ0FBTyxFQUM1REEsR0FBVztBQUFBO0FBQUEsb0VBQ053SCxJQUF1QixHQUFLLENBQUMsd0JBQXdCLEtBQUt4SCxDQUFPLElBQ3RFQSxHQUFXO0FBQUE7QUFBQSwwRUFFUkEsQ0FDWCIsCiAgIm5hbWVzIjogWyJsaW5rIiwgInNob3VsZEFkZFNjcmlwdE1lc3NhZ2UiLCAiU0NSSVBUX01FU1NBR0UiLCAic3VtbWFyeUlucHV0IiwgImV2ZW50IiwgImVkaXRCb3giLCAib3JpZ2luYWxUZXh0IiwgImZpbmFsVGV4dCIsICJjbGVhbnVwU3RyYXlVbmljb2RlQ2hhcmFjdGVycyIsICJjbGVhbnVwU2VjdGlvbkhlYWRlcnMiLCAiY2xlYW51cE1hZ2ljV29yZHMiLCAiY2xlYW51cERpc3BsYXl0aXRsZXNBbmREZWZhdWx0c29ydHMiLCAiY2xlYW51cENhdGVnb3JpZXMiLCAiY2xlYW51cExpbmtzIiwgImNsZWFudXBJbXByb3BlckNoYXJhY3RlcnMiLCAiY2xlYW51cFllYXJSYW5nZXMiLCAiY2xlYW51cFN0cmF5TWFya3VwIiwgImNsZWFudXBTcGFjaW5nIiwgImNsZWFudXBSZWZlcmVuY2VzIiwgImZvcm1hdFRlbXBsYXRlcyIsICJyZW1vdmVDb21tZW50cyIsICJhdXRvVGFnUGFnZSIsICJzdXJmYWNlTW9kZWwiLCAiZXNjYXBlUmVnZXhDaGFyYWN0ZXJzIiwgInN0cmluZyIsICJjb250ZW50IiwgInN0cmF5VW5pY29kZVJlZ2V4IiwgImNvbW1vblJlcGxhY2VtZW50cyIsICJjb21tb25NaXNjYXBpdGFsaXplZFdvcmRzIiwgInJldmVyc2VDb21tb25SZXBsYWNlbWVudHMiLCAia2V5IiwgInZhbHVlcyIsICJ2YWx1ZSIsICJwYXJzZWRIZWFkZXJzIiwgImhlYWRlciIsICJuYW1lIiwgInN0YXJ0TWFya3VwIiwgImVuZE1hcmt1cCIsICJsaW5rcyIsICJkZXB0aCIsICJoZWFkZXJzU2V0IiwgInRpdGxlU3BhY2VyIiwgImxvd2VyY2FzZU5hbWUiLCAiY2FwaXRhbGl6ZWROYW1lIiwgIndvcmQiLCAib3V0cHV0IiwgInBhcnNlZFRhZ3MiLCAidGFnIiwgImZ1bGxUYWciLCAidHlwZSIsICJjdXJyZW50VGl0bGUiLCAib3JpZ2luYWxUYWdSZWdleCIsICJ1bnByZWZpeGVkVGl0bGUiLCAidGl0bGUiLCAiZGVmYXVsdEtleSIsICJjdXN0b21LZXkiLCAibmV3VGV4dCIsICJmdW5jdGlvbnNDYWxsZWRXaGlsZUVzY2FwZWQiLCAiY2xvc2VkTGlua3MiLCAiaXNJbnNpZGVOb3dpa2kiLCAiaXNJbnNpZGVDb21tZW50IiwgImN1cnJlbnRMb2NhdGlvbiIsICJpc0F0U3RyaW5nIiwgImRlc2lyZWRTdHJpbmciLCAic2hvdWxkSW5jcmVtZW50IiwgImxhc3RMaW5rIiwgIm5ld0xpbmtDb250ZW50IiwgIm5hbWVzcGFjZU5hbWVzIiwgImxpbmtMb2NhdGlvbiIsICJpbm5lckxpbmsiLCAidW5wYXJzZWRMaW5rIiwgInBhcmFtZXRlcnMiLCAiYWx0VGV4dCIsICJpc0ZpcnN0Q2hhcmFjdGVyQ29sb24iLCAic2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uIiwgImxpbmtVcHBlcmNhc2VTdGFydCIsICJsaW5rTG93ZXJjYXNlU3RhcnQiLCAibmFtZXNwYWNlIiwgImFmdGVyTGlua1RleHQiLCAiYWRkZWRQdW5jdHVhdGlvbiIsICJuZXdMaW5rIiwgImZ1bmN0aW9uVG9DYWxsIiwgImxvb3BDb3VudGVyIiwgImxpbmtEYXRhIiwgImxpbmtDb250ZW50IiwgInJ1biIsICJlbGlwc2lzUGxhY2Vob2xkZXIiLCAibmJzcFBsYWNlaG9sZGVyIiwgIm9yaWdpbmFsIiwgInN0YXJ0IiwgImVuZCIsICJzdHJheU1hcmt1cFJlZ2V4ZXMiLCAicmVnZXgiLCAic2Vjb25kUnVuIiwgImZ1bGxNYXRjaCIsICJyZWZlcmVuY2VUYWciLCAicHVuY3R1YXRpb24iLCAicmVmZXJlbmNlcyIsICJwcm9jZWVkVW50aWxTdHJpbmciLCAiaXNTZWxmQ2xvc2luZyIsICJwYXJzZXIiLCAicmVwbGFjZW1lbnRzIiwgInJlZmVyZW5jZSIsICJzdGFydFRhZyIsICJ0YWdDb250ZW50IiwgIkZvcm1hdFN0eWxlIiwgIk5hbWVzcGFjZSIsICJ0ZW1wbGF0ZUFsaWFzZXMiLCAibWFwcGVkVGVtcGxhdGVBbGlhc2VzIiwgImFsaWFzIiwgImZyb20iLCAiVGVtcGxhdGUiLCAic3RhcnRMb2NhdGlvbiIsICJzdWJUZW1wbGF0ZSIsICJ0cmltbWVkSW5uZXJUZXh0IiwgInBpcGVFc2NhcGVSZWdleCIsICJmdWxsVGV4dCIsICJ0YWdOYW1lIiwgImF0dHJpYnV0ZXMiLCAicGFyYW1ldGVyIiwgIm5hbWVMb3dlcmNhc2VGaXJzdCIsICJzcGxpdFBhcmFtZXRlcnMiLCAiZXF1YWxzTG9jYXRpb24iLCAidGVtcGxhdGVzIiwgIm1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZVByZWZpeExlbmd0aCIsICJtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZSIsICJmb3JtYXRTdHlsZSIsICJ0ZW1wbGF0ZVByZWZpeGVzIiwgInRlbXBsYXRlUHJlZml4IiwgImltYWdlUGFyYW1ldGVycyIsICJudW1iZXIiLCAic2hvdWxkU3Vic3QiLCAic3R5bGUiLCAibmV3TmFtZSIsICJyZXF1aXJlZEtleUxlbmd0aCIsICJpbmRleCIsICJqb2luZWRPdXRwdXQiLCAiYWxsVGVtcGxhdGVzIiwgImluc2lkZVRlbXBsYXRlcyIsICJpc0luc2lkZUxpbmsiLCAidGVtcGxhdGUiLCAibGFzdFRlbXBsYXRlIiwgIm5ld0NvbnRlbnQiLCAiY29tbWVudHMiLCAiY29tbWVudCIsICJudW1iZXJPZkNhdGVnb3JpZXMiXQp9Cg==
