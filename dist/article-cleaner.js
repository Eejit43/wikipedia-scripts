// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/article-cleaner.ts

"use strict";(()=>{mw.config.get("wgNamespaceNumber")<0||mw.config.get("wgIsProbablyEditable")&&mw.loader.using(["mediawiki.util","jquery.textSelection"],()=>{mw.util.addCSS(`
#article-cleaner {
    display: none;
}

#content:has(#wpTextbox1) #article-cleaner {
    display: unset;
}`);let e=mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-navigation":"p-cactions","#","Perform article cleanup","article-cleaner"),d=!1,c="Cleaned up article content (via [[User:Eejit43/scripts/article-cleaner|article-cleaner]])";mw.hook("ve.saveDialog.stateChanged").add(()=>{if(d){let f=document.querySelector(".ve-ui-mwSaveDialog-summary textarea");f.value.includes(c.slice(1))||(f.value?f.value+=`; ${c.charAt(0).toLowerCase()+c.slice(1)}`:f.value=c),d=!1}}),e.addEventListener("click",f=>{f.preventDefault();let r=$("#wpTextbox1");if(r.length===0)return mw.notify("Edit box not found!",{type:"error",autoHideSeconds:"short"});let p=r.textSelection("getContents"),i=p;if(i=E(i),i=v(i),i=L(i),i=I(i),i=N(i,[R,F]),i=M(i),i=y(i),i=D(i),i=O(i),i=P(i),i=y(i,!0),p===i)mw.notify("No changes to be made to the article!",{type:"warn",autoHideSeconds:"short"});else{if(ve.init){let u=ve.init.target.getSurface().getModel();u.getLinearFragment(u.getRangeFromSourceOffsets(0,p.length)).insertContent(i),u.setSelection(new ve.dm.LinearSelection(new ve.Range(0,0)))}else r.textSelection("setContents",i),r.textSelection("setSelection",{start:0});mw.notify("Article cleanup complete!",{type:"success",autoHideSeconds:"short"});let h=document.querySelector("#wpSummary");h?h.value.includes(c.slice(1))||(h.value?h.value+=`; ${c.charAt(0).toLowerCase()+c.slice(1)}`:h.value=c):d=!0}})});function k(e){return e.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}function E(e){let d={"See also":["also see"],References:["reference","source","sources","citation","citations"],"Further reading":["further reading"],"External links":["external link","weblink","weblinks"]},c=["and","birth","career","death","education","life","of","or"],f=Object.fromEntries(Object.entries(d).flatMap(([u,a])=>[[u.toLowerCase(),u],...a.map(s=>[s,u])])),p=[...e.matchAll(/(?<=^|\n)\n*(?<startMarkup>=+) *(?<name>.*?) *(?<endMarkup>=+)(\n+|$)/g)].map(u=>{let{name:a}=u.groups,{startMarkup:s,endMarkup:g}=u.groups;a=a.replaceAll(/'{3}/g,"");let o=a.matchAll(/\[\[(.+?)]]/g).toArray();for(let t of o)a=a.replace(t[0],t[1].split("|").at(-1));let l=Math.max(s.length,g.length,2);return{name:a,depth:l,original:u[0]}}),i=new Set(p.map(u=>u.name)),h=p.length>0&&/^\n*=+ | =+\n+$/.test(p[0].original)?" ":"";for(let u of p){let a=u.name.toLowerCase(),g=a in f&&!i.has(f[a])?f[a]:u.name;for(let l of c)g=g.replaceAll(new RegExp(`\\b${l}\\b`,"gi"),l);g=g.charAt(0).toUpperCase()+g.slice(1);let o=`${"=".repeat(u.depth)}${h}${g}${h}${"=".repeat(u.depth)}`;u.original!==o&&(e=e.replace(u.original,`

${o}
`))}return e}function v(e){return e.replaceAll(/__(INDEX|NOINDEX|NEWSECTIONLINK|NONEWSECTIONLINK|NOEDITSECTION|DISAMBIG|STATICREDIRECT|FORCETOC)__\n*/g,"")}function L(e){let c=[...e.matchAll(/{{(displaytitle|defaultsort)[:|](.*?)}}/gi)].map(r=>{let[p,i,h]=r;return{type:i.toUpperCase(),value:h,original:p}}),f=mw.Title.newFromText(mw.config.get("wgPageName"));for(let r of c){let p=new RegExp(`${k(r.original)}
*`,"g"),i=mw.Title.makeTitle(f.getNamespaceId(),r.value.includes(":")?r.value.split(":")[1]:r.value);if(!i)continue;if(f.toText()===i.toText()){e=e.replace(p,"");continue}let h=`{{${r.type}:${i.toText()}}}
`;e=e.replace(p,h)}return e}function I(e){return e.replaceAll(/(\[\[|}}):?category:(.*?)(]]|}})/gi,`[[${mw.config.get("wgCanonicalNamespace")==="Draft"?":":""}Category:$2]]`)}function N(e,d){let c=[],f=[],r=!1,p=!1,i=0;function h(s,g=!0){let o=e.slice(i,i+s.length)===s;return o&&g&&(i+=s.length),o}for(;i<e.length;)if(h("<nowiki>"))r=!0;else if(h("</nowiki>"))r=!1;else if(h("<!--"))p=!0;else if(h("-->"))p=!1;else if(!r&&!p)if(h("[["))f.push({start:i-2,end:-1,isNested:f.length>0});else if(h("]]")){let s=f.pop();if(!s)continue;s.end=i,c.push(s)}else i++;else i++;let u=[],a=Object.values(mw.config.get("wgFormattedNamespaces"));for(let s of c){let g=e.slice(s.start+2,s.end-2),[o,...l]=g.split("|");e=e.slice(0,s.start+2)+"\0".repeat(o.length)+e.slice(s.start+2+o.length);let t=o.replaceAll("_"," ").trim(),n=l.join("|");n=n===" "?" ":n.trim();let x=t.startsWith(":");x&&(t=t.slice(1));let m=!1,b=t.charAt(0).toUpperCase()+t.slice(1),T=t.charAt(0).toLowerCase()+t.slice(1),w=t.split(":")[0];w=w.charAt(0).toUpperCase()+w.slice(1),t.includes(":")&&(b.startsWith("Image:")&&(t=`${t.startsWith("Image:")?"F":"f"}ile:${t.slice(6)}`),x&&(["Image","File","Category"].includes(b.split(":")[0])||!a.includes(w))&&(m=!0));let A="";t===n?n="":new RegExp(`^${k(t)}[a-z]+$`).test(n)&&(A=n.slice(t.length),n="");for(let S of[b,T])S===n?(t=S,n=""):new RegExp(`^${k(S)}[a-z]+$`).test(n)&&(t=S,A=n.slice(S.length),n="");(n&&t.includes(":")&&a.includes(w)||t.startsWith("file:")||t.startsWith("category:"))&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t=`${m?":":""}${t}`,t=t.padStart(o.length,"\0");let C=`[[${t}${n?`|${n}`:""}]]${A}`;u.push([s,C])}for(let s of d)e=s(e,1);for(let s=0;s<2;s++)for(let[g,o]of u)s===0&&g.isNested||s===1&&!g.isNested||(e=e.slice(0,g.start)+o.padEnd(g.end-g.start,"\0")+e.slice(g.end));for(let s of d)e=s(e,2);return e.replaceAll("\0","")}function R(e,d){let c="\x7F",f="\x9F";return d===1?(e=e.replaceAll(/[“”„‟]/g,'"'),e=e.replaceAll(/[‘’‚‛]/g,"'"),e=e.replaceAll("\u2026",c),e=e.replaceAll("\xA0",f)):(e=e.replaceAll(c,"..."),e=e.replaceAll(f,"&nbsp;")),e}function F(e,d){return d===1&&(e=e.replaceAll(/(\(\d{3,4}) ?[‒–−-] ?(\d{3,4}\))/g,(c,f,r)=>`${f}\u2013${r}`.padEnd(c.length,"\0"))),e}function M(e){let d=[/'+(Bold|Italic)( text)?'+ */g,/(<big>)+Big( text)?(<\/big>)+ */g,/(<small>)+Small( text)?(<\/small>)+ */g,/(<sup>)+Superscript( text)?(<\/sup>)+ */g,/(<sub>)+Subscript( text)?(<\/sub>)+ */g,/(<s>)+Strikethrough(<\/s>)+ */g,/(<u>)+Underline(<\/u>)+ */g,/(<code>)+Computer code(<\/code>)+ */g,/(<nowiki>)+Insert non-formatted text here(<\/nowiki>)+ */g,/=+ Heading text =+ */g,/\* Bulleted list item */g,/# Numbered list item */g,/<gallery>\nExample.jpg\|Caption1\nExample.jpg\|Caption2\n<\/gallery> */g,/#REDIRECT \[\[Target page name]] */g,/<!-- Invisible comment --> */g,/<\s*(big|small|sup|sub|s|u|code|nowiki|noinclude|onlyinclude|includeonly|center|blockquote|gallery)\s*(\s+[^<>]*)?>\s*<\s*\/\s*\1\s*>/gi];for(let c of d)for(;c.test(e);)e=e.replace(c,"");return e}function y(e,d=!1){return e=e.replaceAll(/(\b|\p{Punctuation}|\]\]|\}\}|\w>) {2,}(\b|\p{Punctuation}|\[\[|\{\{|<\w)/gu,"$1 $2"),e=e.replaceAll(/^ +| +$/gm,""),e=e.replaceAll(/\n{3,}/g,`

`),e=e.replace(/\s*({{[^}]*stub}})/i,`


$1`),e=e.replaceAll(/\s+$/g,""),e=e.replaceAll(/^([#*]+) */gm,"$1 "),e=e.replaceAll(/^([#*]+ .*)\n+(?=[#*]+ )/gm,`$1
`),d||(e=e.replaceAll(/\s+(?=<ref(?!erences))/g,"")),e=e.replaceAll(/^(=+.*?=+)$\n{2,}(?=^=+.*?=+$)/gm,`$1
`),e=e.trim(),e}function D(e){e=e.replaceAll(/((?:<ref(?!erences).*?>.*?<\/ref>)+)([!,.;?])/g,"$2$1");let d=[],c=!1,f=!1,r=0;function p(a){let s=e.slice(r,r+a.length)===a;return s&&(r+=a.length),s}function i(a){for(;r<e.length&&!p(a);)r++}for(;r<e.length;)if(p("<nowiki>"))c=!0;else if(p("</nowiki>"))c=!1;else if(p("<!--"))f=!0;else if(p("-->"))f=!1;else if(!c&&!f)if(!p("<references")&&p("<ref")){let a=r-4;i(">");let s=e.slice(a,r-1).trim().endsWith("/");d.push(s?{start:a,end:r,isSelfClosing:s}:{start:a,end:-1})}else p("</ref>")?d.at(-1).end=r:r++;else r++;let h=new DOMParser,u=[];for(let a of d){let s=e.slice(a.start,a.end),g=/<ref(?!erences).*?>/is.exec(s)[0],l=h.parseFromString(a.isSelfClosing?g.replace(/ *\/ *>/," />"):g+"</ref>","text/html").body.firstChild.outerHTML.replaceAll("&amp;","&"),t=s.slice(g.length,-6).trim().replaceAll(/^\[ *([^\]]*) *]$/gm,"$1").trim();l=a.isSelfClosing||t.length===0?l.replace(/>\s*<\/ref>/," />"):`${l.slice(0,-6)}${t}</ref>`,s!==l&&u.push([s,l])}for(let[a,s]of u)e=e.replace(a,s);return e}function O(e){let d;(x=>(x[x.Expanded=0]="Expanded",x[x.ExpandedAligned=1]="ExpandedAligned",x[x.Minimized=2]="Minimized",x[x.MinimizedSpaced=3]="MinimizedSpaced"))(d||={});let c;(t=>(t[t.User=2]="User",t[t.Draft=118]="Draft"))(c||={});class f{location;isNested=!1;fullText;fullTextEscaped;name;parameters=[];subTemplates=[];placeholderStrings=["\u{F0000}","\u{10FFFF}","\u{FFFFE}"];pipeEscapeRegexes=[/(\[\[[^\]]*?)\|(.*?]])/g,/(<!--.*?)\|(.*?-->)/g,/(<nowiki>.*?)\|(.*?<\/nowiki>)/g];defaultTemplateStyles={1:["automatic taxobox","blockquote","hybridbox","ichnobox","infobox","infraspeciesbox","listen","location map many","motorsport season","multiple image","mycomorphbox","navbox","oobox","orbitbox","osm location map","quote box","sidebar","speciesbox","starbox","succession box","taxobox","virusbox"],2:["coord","end date","lang","langx","start date"],3:["infobox mapframe"]};namespaceSpecificTemplates={118:["afc comment","afc submission","afc submission/draft","afc topic","draft article","draft categories","draft topics","draft","drafts moved from mainspace","preloaddraft submit"],2:["dashboard.wikiedu.org sandbox","user sandbox","userspace draft"]};templatesToKeepContent=["draft categories"];constructor(l){this.location={start:l}}parse(){this.fullText=e.slice(this.location.start,this.location.end),this.fullTextEscaped=this.fullText;for(let m of this.subTemplates)m.parse(),this.fullTextEscaped=this.fullTextEscaped.replace(m.fullText,this.placeholderStrings[0]);let l=this.fullTextEscaped.slice(2,-2).trim();for(let m of this.pipeEscapeRegexes)for(;m.test(l);)l=l.replaceAll(m,`$1${this.placeholderStrings[1]}$2`);let t=[/<(\w+)( [^<>]+?)(?<!\/)>.*?<\/\1>/g,/<(\w+)( [^<>]+?)\/>/g];for(let m of t)l=l.replaceAll(m,(b,T,w)=>b.replace(w,w.replaceAll("=",this.placeholderStrings[2])));let n=l.split("|").map(m=>m.replaceAll(this.placeholderStrings[1],"|").trim());this.name=n.shift()?.replaceAll("_"," ");let x=n.map(m=>{let b=m.indexOf("=");if(b===-1)return{key:null,value:m.replaceAll(this.placeholderStrings[2],"=").trim()};let T=m.slice(b+1).replaceAll(this.placeholderStrings[2],"=");return{key:m.slice(0,b).trim(),value:`${T.startsWith(`
`)?`
`:""}${T.trim()}`}});this.parameters=x}shouldBeRemoved(){for(let[l,t]of Object.entries(this.namespaceSpecificTemplates))if(mw.config.get("wgNamespaceNumber")!==Number.parseInt(l)&&t.includes(this.name.toLowerCase()))return!0;return!1}getStyle(){let l=0,t;for(let[n,x]of Object.entries(this.defaultTemplateStyles))for(let m of x)this.name.toLowerCase().startsWith(m)&&m.length>=l&&(l=m.length,t=Number.parseInt(n));return t}cleanupParameters(){let l=new Set(["image","logo","cover"]);for(let t=1;t<=10;t++)l.add(`image${t}`);this.parameters=this.parameters.map(({key:t,value:n})=>(t&&l.has(t)&&(n=n.trim(),n.startsWith("[[")&&n.endsWith("]]")&&(n=/\[\[(.*?)]]/g.exec(n)[1].split("|")[0]),n=n.replace(/^(File|Image):/,"").replaceAll("_"," ")),{key:t,value:n}))}format(){if(this.fullText||this.parse(),this.shouldBeRemoved())return this.templatesToKeepContent.includes(this.name.toLowerCase())?this.parameters[0].value:"";let l=this.getStyle();if(l===void 0)return this.fullText;let t=[`{{${this.name}`];if(this.cleanupParameters(),l===0||l===1){let x=0;l===1&&(x=Math.max(...this.parameters.map(m=>m.key?.length??0)));for(let m of this.parameters)t.push(`| ${m.key?`${m.key.padEnd(x)} = `:""}${m.value}`)}else for(let x of this.parameters)x.value&&t.push(`|${x.key?`${x.key}=`:""}${x.value}`);t.push("}}"),t.length===2?(t[0]+="}}",t.pop()):l===3&&(t[t.length-2]+="}}",t.pop());let n=t.join(l===0||l===1?`
`:l===3?" ":"");for(let x of this.subTemplates)n=n.replace(this.placeholderStrings[0],x.format());return n}}let r=[],p=[],i=!1,h=!1,u=!1,a=0;function s(o){let l=e.slice(a,a+o.length)===o;return l&&(a+=o.length),l}for(;a<e.length;)if(s("<nowiki>"))h=!0;else if(s("</nowiki>"))h=!1;else if(s("<!--"))u=!0;else if(s("-->"))u=!1;else if(!h&&!u)if(s("[["))i=!0;else if(i&&s("]]"))i=!1;else if(s("{{")){let o=new f(a-2);p.length>0&&(o.isNested=!0,p.at(-1)?.subTemplates.push(o)),p.push(o)}else if(s("}}")){let o=p.pop();if(!o)continue;o.location.end=a,r.push(o)}else a++;else a++;let g=e;for(let o of r)o.isNested||(o.parse(),g=g.replace(o.fullText,o.format()));return g}function P(e){if(mw.config.get("wgNamespaceNumber")!==0)return e;let d=["EDIT BELOW THIS LINE","Important, do not remove anything above this line before article has been created.","Inline citations added to your article will automatically display here.","Note: The following pages were redirects to "];for(let c of d)e=e.replaceAll(new RegExp(`<!-- ?${k(c)}.*?-->
?`,"gs"),"");return e}})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9hcnRpY2xlLWNsZWFuZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImRlY2xhcmUgZ2xvYmFsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhbmVvdXMtY2xhc3NcbiAgICBjbGFzcyBWZVJhbmdlIHtcbiAgICAgICAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpO1xuICAgIH1cblxuICAgIGNsYXNzIFZlRnJhZ21lbnQge1xuICAgICAgICBpbnNlcnRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgfVxuXG4gICAgY2xhc3MgVmVTdXJmYWNlTW9kZWwge1xuICAgICAgICBnZXRMaW5lYXJGcmFnbWVudChyYW5nZTogVmVSYW5nZSk6IFZlRnJhZ21lbnQ7XG4gICAgICAgIGdldFJhbmdlRnJvbVNvdXJjZU9mZnNldHMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBWZVJhbmdlO1xuICAgICAgICBzZXRTZWxlY3Rpb24oc2VsZWN0aW9uOiBWZUxpbmVhclNlbGVjdGlvbik6IHZvaWQ7XG4gICAgfVxuXG4gICAgY2xhc3MgVmVUYXJnZXQge1xuICAgICAgICBnZXRTdXJmYWNlKCk6IHsgZ2V0TW9kZWwoKTogVmVTdXJmYWNlTW9kZWwgfTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhbmVvdXMtY2xhc3NcbiAgICBjbGFzcyBWZUxpbmVhclNlbGVjdGlvbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHJhbmdlOiBWZVJhbmdlKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZToge1xuICAgICAgICBSYW5nZTogdHlwZW9mIFZlUmFuZ2U7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgIGRtOiB7IExpbmVhclNlbGVjdGlvbjogdHlwZW9mIFZlTGluZWFyU2VsZWN0aW9uIH07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgIGluaXQ/OiB7IHRhcmdldDogVmVUYXJnZXQgfTtcbiAgICB9O1xufVxuXG5leHBvcnQge307XG5cbigoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgPCAwKSByZXR1cm47IC8vIERvbid0IHJ1biBpbiB2aXJ0dWFsIG5hbWVzcGFjZXNcbiAgICBpZiAoIW13LmNvbmZpZy5nZXQoJ3dnSXNQcm9iYWJseUVkaXRhYmxlJykpIHJldHVybjsgLy8gRG9uJ3QgcnVuIGlmIHVzZXIgY2FuJ3QgZWRpdCBwYWdlXG5cbiAgICBtdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdqcXVlcnkudGV4dFNlbGVjdGlvbiddLCAoKSA9PiB7XG4gICAgICAgIG13LnV0aWwuYWRkQ1NTKGBcbiNhcnRpY2xlLWNsZWFuZXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjb250ZW50Omhhcygjd3BUZXh0Ym94MSkgI2FydGljbGUtY2xlYW5lciB7XG4gICAgZGlzcGxheTogdW5zZXQ7XG59YCk7XG5cbiAgICAgICAgY29uc3QgbGluayA9IG13LnV0aWwuYWRkUG9ydGxldExpbmsoXG4gICAgICAgICAgICBtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtaW5lcnZhJyA/ICdwLW5hdmlnYXRpb24nIDogJ3AtY2FjdGlvbnMnLFxuICAgICAgICAgICAgJyMnLFxuICAgICAgICAgICAgJ1BlcmZvcm0gYXJ0aWNsZSBjbGVhbnVwJyxcbiAgICAgICAgICAgICdhcnRpY2xlLWNsZWFuZXInLFxuICAgICAgICApITtcblxuICAgICAgICBsZXQgc2hvdWxkQWRkU2NyaXB0TWVzc2FnZSA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IHNjcmlwdE1lc3NhZ2UgPSAnQ2xlYW5lZCB1cCBhcnRpY2xlIGNvbnRlbnQgKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL2FydGljbGUtY2xlYW5lcnxhcnRpY2xlLWNsZWFuZXJdXSknO1xuXG4gICAgICAgIG13Lmhvb2soJ3ZlLnNhdmVEaWFsb2cuc3RhdGVDaGFuZ2VkJykuYWRkKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzaG91bGRBZGRTY3JpcHRNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MVGV4dEFyZWFFbGVtZW50PignLnZlLXVpLW13U2F2ZURpYWxvZy1zdW1tYXJ5IHRleHRhcmVhJykhO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5SW5wdXQudmFsdWUuaW5jbHVkZXMoc2NyaXB0TWVzc2FnZS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQudmFsdWUpIHN1bW1hcnlJbnB1dC52YWx1ZSArPSBgOyAke3NjcmlwdE1lc3NhZ2UuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBzY3JpcHRNZXNzYWdlLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc3VtbWFyeUlucHV0LnZhbHVlID0gc2NyaXB0TWVzc2FnZTtcblxuICAgICAgICAgICAgICAgIHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgZWRpdEJveCA9ICQoJyN3cFRleHRib3gxJyk7XG4gICAgICAgICAgICBpZiAoZWRpdEJveC5sZW5ndGggPT09IDApIHJldHVybiBtdy5ub3RpZnkoJ0VkaXQgYm94IG5vdCBmb3VuZCEnLCB7IHR5cGU6ICdlcnJvcicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcblxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdnZXRDb250ZW50cycpO1xuXG4gICAgICAgICAgICBsZXQgZmluYWxUZXh0ID0gb3JpZ2luYWxUZXh0O1xuXG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU2VjdGlvbkhlYWRlcnMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBNYWdpY1dvcmRzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cENhdGVnb3JpZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBMaW5rcyhmaW5hbFRleHQsIFtjbGVhbnVwSW1wcm9wZXJDaGFyYWN0ZXJzLCBjbGVhbnVwWWVhclJhbmdlc10pO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFN0cmF5TWFya3VwKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU3BhY2luZyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFJlZmVyZW5jZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGZvcm1hdFRlbXBsYXRlcyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gcmVtb3ZlQ29tbWVudHMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBTcGFjaW5nKGZpbmFsVGV4dCwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIGlmIChvcmlnaW5hbFRleHQgPT09IGZpbmFsVGV4dCkgbXcubm90aWZ5KCdObyBjaGFuZ2VzIHRvIGJlIG1hZGUgdG8gdGhlIGFydGljbGUhJywgeyB0eXBlOiAnd2FybicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2ZS5pbml0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1cmZhY2VNb2RlbCA9IHZlLmluaXQudGFyZ2V0LmdldFN1cmZhY2UoKS5nZXRNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IHN1cmZhY2VNb2RlbC5nZXRMaW5lYXJGcmFnbWVudChzdXJmYWNlTW9kZWwuZ2V0UmFuZ2VGcm9tU291cmNlT2Zmc2V0cygwLCBvcmlnaW5hbFRleHQubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50Lmluc2VydENvbnRlbnQoZmluYWxUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgc3VyZmFjZU1vZGVsLnNldFNlbGVjdGlvbihuZXcgdmUuZG0uTGluZWFyU2VsZWN0aW9uKG5ldyB2ZS5SYW5nZSgwLCAwKSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRCb3gudGV4dFNlbGVjdGlvbignc2V0Q29udGVudHMnLCBmaW5hbFRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGVkaXRCb3gudGV4dFNlbGVjdGlvbignc2V0U2VsZWN0aW9uJywgeyBzdGFydDogMCB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtdy5ub3RpZnkoJ0FydGljbGUgY2xlYW51cCBjb21wbGV0ZSEnLCB7IHR5cGU6ICdzdWNjZXNzJywgYXV0b0hpZGVTZWNvbmRzOiAnc2hvcnQnIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PignI3dwU3VtbWFyeScpO1xuICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5SW5wdXQudmFsdWUuaW5jbHVkZXMoc2NyaXB0TWVzc2FnZS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeUlucHV0LnZhbHVlKSBzdW1tYXJ5SW5wdXQudmFsdWUgKz0gYDsgJHtzY3JpcHRNZXNzYWdlLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc2NyaXB0TWVzc2FnZS5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzdW1tYXJ5SW5wdXQudmFsdWUgPSBzY3JpcHRNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBzaG91bGRBZGRTY3JpcHRNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59KSgpO1xuXG4vKipcbiAqIEVzY2FwZXMgcmVnZXggY2hhcmFjdGVycyBpbiBhIHN0cmluZy5cbiAqIEBwYXJhbSBzdHJpbmcgVGhlIHN0cmluZyB0byBlc2NhcGUgcmVnZXggY2hhcmFjdGVycyBpbi5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlUmVnZXhDaGFyYWN0ZXJzKHN0cmluZzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlQWxsKC9bJCgpKisuP1tcXFxcXFxdXnt8fV0vZywgJ1xcXFwkJicpO1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBzZWN0aW9uIGhlYWRlcnMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU2VjdGlvbkhlYWRlcnMoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgY29tbW9uUmVwbGFjZW1lbnRzID0ge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbiAgICAgICAgJ1NlZSBhbHNvJzogWydhbHNvIHNlZSddLFxuICAgICAgICAnUmVmZXJlbmNlcyc6IFsncmVmZXJlbmNlJywgJ3NvdXJjZScsICdzb3VyY2VzJywgJ2NpdGF0aW9uJywgJ2NpdGF0aW9ucyddLFxuICAgICAgICAnRnVydGhlciByZWFkaW5nJzogWydmdXJ0aGVyIHJlYWRpbmcnXSxcbiAgICAgICAgJ0V4dGVybmFsIGxpbmtzJzogWydleHRlcm5hbCBsaW5rJywgJ3dlYmxpbmsnLCAnd2VibGlua3MnXSxcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbiAgICB9O1xuXG4gICAgY29uc3QgY29tbW9uTWlzY2FwaXRhbGl6ZWRXb3JkcyA9IFsnYW5kJywgJ2JpcnRoJywgJ2NhcmVlcicsICdkZWF0aCcsICdlZHVjYXRpb24nLCAnbGlmZScsICdvZicsICdvciddO1xuXG4gICAgY29uc3QgcmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50cyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoY29tbW9uUmVwbGFjZW1lbnRzKS5mbGF0TWFwKChba2V5LCB2YWx1ZXNdKSA9PiBbXG4gICAgICAgICAgICBba2V5LnRvTG93ZXJDYXNlKCksIGtleV0sXG4gICAgICAgICAgICAuLi4odmFsdWVzLm1hcCgodmFsdWUpID0+IFt2YWx1ZSwga2V5XSkgYXMgW3N0cmluZywgc3RyaW5nXVtdKSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgXSksXG4gICAgKTtcblxuICAgIGNvbnN0IGhlYWRlcnMgPSBjb250ZW50Lm1hdGNoQWxsKC8oPzw9XnxcXG4pXFxuKig/PHN0YXJ0TWFya3VwPj0rKSAqKD88bmFtZT4uKj8pICooPzxlbmRNYXJrdXA+PSspKFxcbit8JCkvZyk7XG5cbiAgICBjb25zdCBwYXJzZWRIZWFkZXJzID0gWy4uLmhlYWRlcnNdLm1hcCgoaGVhZGVyKSA9PiB7XG4gICAgICAgIGxldCB7IG5hbWUgfSA9IGhlYWRlci5ncm91cHMhO1xuICAgICAgICBjb25zdCB7IHN0YXJ0TWFya3VwLCBlbmRNYXJrdXAgfSA9IGhlYWRlci5ncm91cHMhO1xuXG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoLyd7M30vZywgJycpO1xuXG4gICAgICAgIGNvbnN0IGxpbmtzID0gbmFtZS5tYXRjaEFsbCgvXFxbXFxbKC4rPyldXS9nKS50b0FycmF5KCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBsaW5rIG9mIGxpbmtzKSBuYW1lID0gbmFtZS5yZXBsYWNlKGxpbmtbMF0sIGxpbmtbMV0uc3BsaXQoJ3wnKS5hdCgtMSkhKTtcblxuICAgICAgICBjb25zdCBkZXB0aCA9IE1hdGgubWF4KHN0YXJ0TWFya3VwLmxlbmd0aCwgZW5kTWFya3VwLmxlbmd0aCwgMik7XG5cbiAgICAgICAgcmV0dXJuIHsgbmFtZSwgZGVwdGgsIG9yaWdpbmFsOiBoZWFkZXJbMF0gfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGhlYWRlcnNTZXQgPSBuZXcgU2V0KHBhcnNlZEhlYWRlcnMubWFwKChoZWFkZXIpID0+IGhlYWRlci5uYW1lKSk7XG5cbiAgICBjb25zdCB0aXRsZVNwYWNlciA9IHBhcnNlZEhlYWRlcnMubGVuZ3RoID4gMCA/ICgvXlxcbio9KyB8ID0rXFxuKyQvLnRlc3QocGFyc2VkSGVhZGVyc1swXS5vcmlnaW5hbCkgPyAnICcgOiAnJykgOiAnJztcblxuICAgIGZvciAoY29uc3QgaGVhZGVyIG9mIHBhcnNlZEhlYWRlcnMpIHtcbiAgICAgICAgY29uc3QgbG93ZXJjYXNlTmFtZSA9IGhlYWRlci5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgY29uc3QgcmVwbGFjZWROYW1lID1cbiAgICAgICAgICAgIGxvd2VyY2FzZU5hbWUgaW4gcmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50cyAmJiAhaGVhZGVyc1NldC5oYXMocmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50c1tsb3dlcmNhc2VOYW1lXSlcbiAgICAgICAgICAgICAgICA/IHJldmVyc2VDb21tb25SZXBsYWNlbWVudHNbbG93ZXJjYXNlTmFtZV1cbiAgICAgICAgICAgICAgICA6IGhlYWRlci5uYW1lO1xuXG4gICAgICAgIGxldCBjYXBpdGFsaXplZE5hbWUgPSByZXBsYWNlZE5hbWU7XG5cbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIGNvbW1vbk1pc2NhcGl0YWxpemVkV29yZHMpIGNhcGl0YWxpemVkTmFtZSA9IGNhcGl0YWxpemVkTmFtZS5yZXBsYWNlQWxsKG5ldyBSZWdFeHAoYFxcXFxiJHt3b3JkfVxcXFxiYCwgJ2dpJyksIHdvcmQpO1xuXG4gICAgICAgIGNhcGl0YWxpemVkTmFtZSA9IGNhcGl0YWxpemVkTmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhcGl0YWxpemVkTmFtZS5zbGljZSgxKTtcblxuICAgICAgICBjb25zdCBvdXRwdXQgPSBgJHsnPScucmVwZWF0KGhlYWRlci5kZXB0aCl9JHt0aXRsZVNwYWNlcn0ke2NhcGl0YWxpemVkTmFtZX0ke3RpdGxlU3BhY2VyfSR7Jz0nLnJlcGVhdChoZWFkZXIuZGVwdGgpfWA7XG5cbiAgICAgICAgaWYgKGhlYWRlci5vcmlnaW5hbCAhPT0gb3V0cHV0KSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKGhlYWRlci5vcmlnaW5hbCwgYFxcblxcbiR7b3V0cHV0fVxcbmApO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdW5uZWNlc3NhcnkgbWFnaWMgd29yZHMgZnJvbSBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBNYWdpY1dvcmRzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHJldHVybiBjb250ZW50LnJlcGxhY2VBbGwoL19fKElOREVYfE5PSU5ERVh8TkVXU0VDVElPTkxJTkt8Tk9ORVdTRUNUSU9OTElOS3xOT0VESVRTRUNUSU9OfERJU0FNQklHfFNUQVRJQ1JFRElSRUNUfEZPUkNFVE9DKV9fXFxuKi9nLCAnJyk7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIERJU1BMQVlUSVRMRXMgYW5kIERFRkFVTFRTT1JUcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBEaXNwbGF5dGl0bGVzQW5kRGVmYXVsdHNvcnRzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IHRhZ3MgPSBjb250ZW50Lm1hdGNoQWxsKC97eyhkaXNwbGF5dGl0bGV8ZGVmYXVsdHNvcnQpWzp8XSguKj8pfX0vZ2kpO1xuXG4gICAgY29uc3QgcGFyc2VkVGFncyA9IFsuLi50YWdzXS5tYXAoKHRhZykgPT4ge1xuICAgICAgICBjb25zdCBbZnVsbFRhZywgdHlwZSwgdmFsdWVdID0gdGFnO1xuXG4gICAgICAgIHJldHVybiB7IHR5cGU6IHR5cGUudG9VcHBlckNhc2UoKSwgdmFsdWUsIG9yaWdpbmFsOiBmdWxsVGFnIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBjdXJyZW50VGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dChtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJykpITtcblxuICAgIGZvciAoY29uc3QgdGFnIG9mIHBhcnNlZFRhZ3MpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxUYWdSZWdleCA9IG5ldyBSZWdFeHAoYCR7ZXNjYXBlUmVnZXhDaGFyYWN0ZXJzKHRhZy5vcmlnaW5hbCl9XFxuKmAsICdnJyk7XG5cbiAgICAgICAgY29uc3QgdGl0bGUgPSBtdy5UaXRsZS5tYWtlVGl0bGUoY3VycmVudFRpdGxlLmdldE5hbWVzcGFjZUlkKCksIHRhZy52YWx1ZS5pbmNsdWRlcygnOicpID8gdGFnLnZhbHVlLnNwbGl0KCc6JylbMV0gOiB0YWcudmFsdWUpO1xuXG4gICAgICAgIGlmICghdGl0bGUpIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmIChjdXJyZW50VGl0bGUudG9UZXh0KCkgPT09IHRpdGxlLnRvVGV4dCgpKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG9yaWdpbmFsVGFnUmVnZXgsICcnKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IGB7eyR7dGFnLnR5cGV9OiR7dGl0bGUudG9UZXh0KCl9fX1cXG5gO1xuXG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUYWdSZWdleCwgbmV3VGV4dCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGNhdGVnb3JpZXMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwQ2F0ZWdvcmllcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKFxuICAgICAgICAvKFxcW1xcW3x9fSk6P2NhdGVnb3J5OiguKj8pKF1dfH19KS9naSxcbiAgICAgICAgYFtbJHttdy5jb25maWcuZ2V0KCd3Z0Nhbm9uaWNhbE5hbWVzcGFjZScpID09PSAnRHJhZnQnID8gJzonIDogJyd9Q2F0ZWdvcnk6JDJdXWAsXG4gICAgKTtcbn1cblxuaW50ZXJmYWNlIExpbmtJbmZvcm1hdGlvbiB7XG4gICAgc3RhcnQ6IG51bWJlcjtcbiAgICBlbmQ6IG51bWJlcjtcbiAgICBpc05lc3RlZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgbGlua3MgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICogQHBhcmFtIGZ1bmN0aW9uc0NhbGxlZFdoaWxlRXNjYXBlZCBUaGUgZnVuY3Rpb25zIGNhbGxlZCB3aGlsZSB0aGUgbGlua3MgYXJlIGVzY2FwZWQuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBMaW5rcyhjb250ZW50OiBzdHJpbmcsIGZ1bmN0aW9uc0NhbGxlZFdoaWxlRXNjYXBlZDogKChjb250ZW50OiBzdHJpbmcsIHJ1bjogMSB8IDIpID0+IHN0cmluZylbXSkge1xuICAgIGNvbnN0IGNsb3NlZExpbmtzOiBMaW5rSW5mb3JtYXRpb25bXSA9IFtdO1xuICAgIGNvbnN0IGxpbmtzOiBMaW5rSW5mb3JtYXRpb25bXSA9IFtdO1xuXG4gICAgbGV0IGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0gc2hvdWxkSW5jcmVtZW50IFdoZXRoZXIgdG8gaW5jcmVtZW50IHRoZSBjdXJyZW50IGxvY2F0aW9uIGlmIHRoZSBzdHJpbmcgaXMgZm91bmQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBdFN0cmluZyhkZXNpcmVkU3RyaW5nOiBzdHJpbmcsIHNob3VsZEluY3JlbWVudCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgaXNBdFN0cmluZyA9IGNvbnRlbnQuc2xpY2UoY3VycmVudExvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gKyBkZXNpcmVkU3RyaW5nLmxlbmd0aCkgPT09IGRlc2lyZWRTdHJpbmc7XG5cbiAgICAgICAgaWYgKGlzQXRTdHJpbmcgJiYgc2hvdWxkSW5jcmVtZW50KSBjdXJyZW50TG9jYXRpb24gKz0gZGVzaXJlZFN0cmluZy5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIGlzQXRTdHJpbmc7XG4gICAgfVxuXG4gICAgd2hpbGUgKGN1cnJlbnRMb2NhdGlvbiA8IGNvbnRlbnQubGVuZ3RoKVxuICAgICAgICBpZiAoaXNBdFN0cmluZygnPG5vd2lraT4nKSkgaXNJbnNpZGVOb3dpa2kgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8L25vd2lraT4nKSkgaXNJbnNpZGVOb3dpa2kgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPCEtLScpKSBpc0luc2lkZUNvbW1lbnQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCctLT4nKSkgaXNJbnNpZGVDb21tZW50ID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKCFpc0luc2lkZU5vd2lraSAmJiAhaXNJbnNpZGVDb21tZW50KVxuICAgICAgICAgICAgaWYgKGlzQXRTdHJpbmcoJ1tbJykpIGxpbmtzLnB1c2goeyBzdGFydDogY3VycmVudExvY2F0aW9uIC0gMiwgZW5kOiAtMSwgaXNOZXN0ZWQ6IGxpbmtzLmxlbmd0aCA+IDAgfSk7XG4gICAgICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCddXScpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdExpbmsgPSBsaW5rcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3RMaW5rKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGxhc3RMaW5rLmVuZCA9IGN1cnJlbnRMb2NhdGlvbjtcblxuICAgICAgICAgICAgICAgIGNsb3NlZExpbmtzLnB1c2gobGFzdExpbmspO1xuICAgICAgICAgICAgfSBlbHNlIGN1cnJlbnRMb2NhdGlvbisrO1xuICAgICAgICBlbHNlIGN1cnJlbnRMb2NhdGlvbisrO1xuXG4gICAgY29uc3QgbmV3TGlua0NvbnRlbnQ6IFtMaW5rSW5mb3JtYXRpb24sIHN0cmluZ11bXSA9IFtdO1xuXG4gICAgY29uc3QgbmFtZXNwYWNlTmFtZXMgPSBPYmplY3QudmFsdWVzKG13LmNvbmZpZy5nZXQoJ3dnRm9ybWF0dGVkTmFtZXNwYWNlcycpKTtcblxuICAgIGZvciAoY29uc3QgbGlua0xvY2F0aW9uIG9mIGNsb3NlZExpbmtzKSB7XG4gICAgICAgIGNvbnN0IGlubmVyTGluayA9IGNvbnRlbnQuc2xpY2UobGlua0xvY2F0aW9uLnN0YXJ0ICsgMiwgbGlua0xvY2F0aW9uLmVuZCAtIDIpO1xuXG4gICAgICAgIGNvbnN0IFt1bnBhcnNlZExpbmssIC4uLnBhcmFtZXRlcnNdID0gaW5uZXJMaW5rLnNwbGl0KCd8Jyk7XG5cbiAgICAgICAgLy8gUmVwbGFjZSBsaW5rIG5hbWVzIHNvIHRoZXNlIHdvbid0IGJlIGFmZmVjdGVkIGJ5IGZ1bmN0aW9ucyBjYWxsZWQgd2hpbGUgZXNjYXBlZFxuICAgICAgICBjb250ZW50ID1cbiAgICAgICAgICAgIGNvbnRlbnQuc2xpY2UoMCwgbGlua0xvY2F0aW9uLnN0YXJ0ICsgMikgK1xuICAgICAgICAgICAgJ1xcMCcucmVwZWF0KHVucGFyc2VkTGluay5sZW5ndGgpICtcbiAgICAgICAgICAgIGNvbnRlbnQuc2xpY2UobGlua0xvY2F0aW9uLnN0YXJ0ICsgMiArIHVucGFyc2VkTGluay5sZW5ndGgpO1xuXG4gICAgICAgIGxldCBsaW5rID0gdW5wYXJzZWRMaW5rLnJlcGxhY2VBbGwoJ18nLCAnICcpLnRyaW0oKTtcbiAgICAgICAgbGV0IGFsdFRleHQgPSBwYXJhbWV0ZXJzLmpvaW4oJ3wnKTtcbiAgICAgICAgYWx0VGV4dCA9IGFsdFRleHQgPT09ICcgJyA/ICcgJyA6IGFsdFRleHQudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IGlzRmlyc3RDaGFyYWN0ZXJDb2xvbiA9IGxpbmsuc3RhcnRzV2l0aCgnOicpO1xuICAgICAgICBpZiAoaXNGaXJzdENoYXJhY3RlckNvbG9uKSBsaW5rID0gbGluay5zbGljZSgxKTtcblxuICAgICAgICBsZXQgc2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgbGlua1VwcGVyY2FzZVN0YXJ0ID0gbGluay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGxpbmsuc2xpY2UoMSk7XG4gICAgICAgIGNvbnN0IGxpbmtMb3dlcmNhc2VTdGFydCA9IGxpbmsuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBsaW5rLnNsaWNlKDEpO1xuXG4gICAgICAgIGxldCBuYW1lc3BhY2UgPSBsaW5rLnNwbGl0KCc6JylbMF07XG4gICAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWVzcGFjZS5zbGljZSgxKTtcblxuICAgICAgICBpZiAobGluay5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgICBpZiAobGlua1VwcGVyY2FzZVN0YXJ0LnN0YXJ0c1dpdGgoJ0ltYWdlOicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3RhcnRVcHBlcmNhc2UgPSBsaW5rLnN0YXJ0c1dpdGgoJ0ltYWdlOicpO1xuXG4gICAgICAgICAgICAgICAgbGluayA9IGAke3Nob3VsZFN0YXJ0VXBwZXJjYXNlID8gJ0YnIDogJ2YnfWlsZToke2xpbmsuc2xpY2UoNil9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzRmlyc3RDaGFyYWN0ZXJDb2xvbiAmJlxuICAgICAgICAgICAgICAgIChbJ0ltYWdlJywgJ0ZpbGUnLCAnQ2F0ZWdvcnknXS5pbmNsdWRlcyhsaW5rVXBwZXJjYXNlU3RhcnQuc3BsaXQoJzonKVswXSkgfHwgIW5hbWVzcGFjZU5hbWVzLmluY2x1ZGVzKG5hbWVzcGFjZSkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgc2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhZnRlckxpbmtUZXh0ID0gJyc7XG5cbiAgICAgICAgaWYgKGxpbmsgPT09IGFsdFRleHQpIGFsdFRleHQgPSAnJztcbiAgICAgICAgZWxzZSBpZiAobmV3IFJlZ0V4cChgXiR7ZXNjYXBlUmVnZXhDaGFyYWN0ZXJzKGxpbmspfVthLXpdKyRgKS50ZXN0KGFsdFRleHQpKSB7XG4gICAgICAgICAgICBhZnRlckxpbmtUZXh0ID0gYWx0VGV4dC5zbGljZShsaW5rLmxlbmd0aCk7XG4gICAgICAgICAgICBhbHRUZXh0ID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IG5ld0xpbmsgb2YgW2xpbmtVcHBlcmNhc2VTdGFydCwgbGlua0xvd2VyY2FzZVN0YXJ0XSlcbiAgICAgICAgICAgIGlmIChuZXdMaW5rID09PSBhbHRUZXh0KSB7XG4gICAgICAgICAgICAgICAgbGluayA9IG5ld0xpbms7XG4gICAgICAgICAgICAgICAgYWx0VGV4dCA9ICcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXcgUmVnRXhwKGBeJHtlc2NhcGVSZWdleENoYXJhY3RlcnMobmV3TGluayl9W2Etel0rJGApLnRlc3QoYWx0VGV4dCkpIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gbmV3TGluaztcbiAgICAgICAgICAgICAgICBhZnRlckxpbmtUZXh0ID0gYWx0VGV4dC5zbGljZShuZXdMaW5rLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYWx0VGV4dCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChhbHRUZXh0ICYmIGxpbmsuaW5jbHVkZXMoJzonKSAmJiBuYW1lc3BhY2VOYW1lcy5pbmNsdWRlcyhuYW1lc3BhY2UpKSB8fFxuICAgICAgICAgICAgbGluay5zdGFydHNXaXRoKCdmaWxlOicpIHx8XG4gICAgICAgICAgICBsaW5rLnN0YXJ0c1dpdGgoJ2NhdGVnb3J5OicpXG4gICAgICAgIClcbiAgICAgICAgICAgIGxpbmsgPSBsaW5rLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbGluay5zbGljZSgxKTtcblxuICAgICAgICBsaW5rID0gYCR7c2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID8gJzonIDogJyd9JHtsaW5rfWA7XG5cbiAgICAgICAgbGluayA9IGxpbmsucGFkU3RhcnQodW5wYXJzZWRMaW5rLmxlbmd0aCwgJ1xcMCcpO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGBbWyR7bGlua30ke2FsdFRleHQgPyBgfCR7YWx0VGV4dH1gIDogJyd9XV0ke2FmdGVyTGlua1RleHR9YDtcblxuICAgICAgICBuZXdMaW5rQ29udGVudC5wdXNoKFtsaW5rTG9jYXRpb24sIG91dHB1dF0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZnVuY3Rpb25Ub0NhbGwgb2YgZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkKSBjb250ZW50ID0gZnVuY3Rpb25Ub0NhbGwoY29udGVudCwgMSk7XG5cbiAgICBmb3IgKGxldCBsb29wQ291bnRlciA9IDA7IGxvb3BDb3VudGVyIDwgMjsgbG9vcENvdW50ZXIrKylcbiAgICAgICAgZm9yIChjb25zdCBbbGlua0RhdGEsIGxpbmtDb250ZW50XSBvZiBuZXdMaW5rQ29udGVudCkge1xuICAgICAgICAgICAgaWYgKGxvb3BDb3VudGVyID09PSAwICYmIGxpbmtEYXRhLmlzTmVzdGVkKSBjb250aW51ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGxvb3BDb3VudGVyID09PSAxICYmICFsaW5rRGF0YS5pc05lc3RlZCkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpY2UoMCwgbGlua0RhdGEuc3RhcnQpICsgbGlua0NvbnRlbnQucGFkRW5kKGxpbmtEYXRhLmVuZCAtIGxpbmtEYXRhLnN0YXJ0LCAnXFwwJykgKyBjb250ZW50LnNsaWNlKGxpbmtEYXRhLmVuZCk7XG4gICAgICAgIH1cblxuICAgIGZvciAoY29uc3QgZnVuY3Rpb25Ub0NhbGwgb2YgZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkKSBjb250ZW50ID0gZnVuY3Rpb25Ub0NhbGwoY29udGVudCwgMik7XG5cbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKCdcXDAnLCAnJyk7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGltcHJvcGVyIGNoYXJhY3RlcnMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICogQHBhcmFtIHJ1biBUaGUgcnVuIG51bWJlciBvZiB0aGUgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBJbXByb3BlckNoYXJhY3RlcnMoY29udGVudDogc3RyaW5nLCBydW46IDEgfCAyKSB7XG4gICAgY29uc3QgZWxpcHNpc1BsYWNlaG9sZGVyID0gJ1xcdTAwN0YnO1xuICAgIGNvbnN0IG5ic3BQbGFjZWhvbGRlciA9ICdcXHUwMDlGJztcblxuICAgIGlmIChydW4gPT09IDEpIHtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvW1x1MjAxQ1x1MjAxRFx1MjAxRVx1MjAxRl0vZywgJ1wiJyk7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1tcdTIwMThcdTIwMTlcdTIwMUFcdTIwMUJdL2csIFwiJ1wiKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgnXHUyMDI2JywgZWxpcHNpc1BsYWNlaG9sZGVyKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgnXHUwMEEwJywgbmJzcFBsYWNlaG9sZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKGVsaXBzaXNQbGFjZWhvbGRlciwgJy4uLicpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKG5ic3BQbGFjZWhvbGRlciwgJyZuYnNwOycpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCB5ZWFyIHJhbmdlcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKiBAcGFyYW0gcnVuIFRoZSBydW4gbnVtYmVyIG9mIHRoZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFllYXJSYW5nZXMoY29udGVudDogc3RyaW5nLCBydW46IDEgfCAyKSB7XG4gICAgaWYgKHJ1biA9PT0gMSlcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxcKFxcZHszLDR9KSA/W1x1MjAxMlx1MjAxM1x1MjIxMi1dID8oXFxkezMsNH1cXCkpL2csIChvcmlnaW5hbCwgc3RhcnQsIGVuZCkgPT5cbiAgICAgICAgICAgIGAke3N0YXJ0fVx1MjAxMyR7ZW5kfWAucGFkRW5kKG9yaWdpbmFsLmxlbmd0aCwgJ1xcMCcpLFxuICAgICAgICApO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBzdHJheSBtYXJrdXAgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU3RyYXlNYXJrdXAoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RyYXlNYXJrdXBSZWdleGVzID0gW1xuICAgICAgICAvJysoQm9sZHxJdGFsaWMpKCB0ZXh0KT8nKyAqL2csXG4gICAgICAgIC8oPGJpZz4pK0JpZyggdGV4dCk/KDxcXC9iaWc+KSsgKi9nLFxuICAgICAgICAvKDxzbWFsbD4pK1NtYWxsKCB0ZXh0KT8oPFxcL3NtYWxsPikrICovZyxcbiAgICAgICAgLyg8c3VwPikrU3VwZXJzY3JpcHQoIHRleHQpPyg8XFwvc3VwPikrICovZyxcbiAgICAgICAgLyg8c3ViPikrU3Vic2NyaXB0KCB0ZXh0KT8oPFxcL3N1Yj4pKyAqL2csXG4gICAgICAgIC8oPHM+KStTdHJpa2V0aHJvdWdoKDxcXC9zPikrICovZyxcbiAgICAgICAgLyg8dT4pK1VuZGVybGluZSg8XFwvdT4pKyAqL2csXG4gICAgICAgIC8oPGNvZGU+KStDb21wdXRlciBjb2RlKDxcXC9jb2RlPikrICovZyxcbiAgICAgICAgLyg8bm93aWtpPikrSW5zZXJ0IG5vbi1mb3JtYXR0ZWQgdGV4dCBoZXJlKDxcXC9ub3dpa2k+KSsgKi9nLFxuICAgICAgICAvPSsgSGVhZGluZyB0ZXh0ID0rICovZyxcbiAgICAgICAgL1xcKiBCdWxsZXRlZCBsaXN0IGl0ZW0gKi9nLFxuICAgICAgICAvIyBOdW1iZXJlZCBsaXN0IGl0ZW0gKi9nLFxuICAgICAgICAvPGdhbGxlcnk+XFxuRXhhbXBsZS5qcGdcXHxDYXB0aW9uMVxcbkV4YW1wbGUuanBnXFx8Q2FwdGlvbjJcXG48XFwvZ2FsbGVyeT4gKi9nLFxuICAgICAgICAvI1JFRElSRUNUIFxcW1xcW1RhcmdldCBwYWdlIG5hbWVdXSAqL2csXG4gICAgICAgIC88IS0tIEludmlzaWJsZSBjb21tZW50IC0tPiAqL2csXG4gICAgICAgIC88XFxzKihiaWd8c21hbGx8c3VwfHN1YnxzfHV8Y29kZXxub3dpa2l8bm9pbmNsdWRlfG9ubHlpbmNsdWRlfGluY2x1ZGVvbmx5fGNlbnRlcnxibG9ja3F1b3RlfGdhbGxlcnkpXFxzKihcXHMrW148Pl0qKT8+XFxzKjxcXHMqXFwvXFxzKlxcMVxccyo+L2dpLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHJlZ2V4IG9mIHN0cmF5TWFya3VwUmVnZXhlcykgd2hpbGUgKHJlZ2V4LnRlc3QoY29udGVudCkpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnZXgsICcnKTtcblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBzcGFjaW5nIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqIEBwYXJhbSBzZWNvbmRSdW4gV2hldGhlciB0aGUgZnVuY3Rpb24gaXMgYmVpbmcgcnVuIGZvciB0aGUgc2Vjb25kIHRpbWUsIGFmdGVyIG90aGVyIHByb2Nlc3NpbmcuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBTcGFjaW5nKGNvbnRlbnQ6IHN0cmluZywgc2Vjb25kUnVuID0gZmFsc2UpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXFxifFxccHtQdW5jdHVhdGlvbn18XFxdXFxdfFxcfVxcfXxcXHc+KSB7Mix9KFxcYnxcXHB7UHVuY3R1YXRpb259fFxcW1xcW3xcXHtcXHt8PFxcdykvZ3UsICckMSAkMicpOyAvLyBSZW1vdmUgZXh0cmEgc3BhY2VzIGJldHdlZW4gd29yZHMgYW5kIHNlbnRlbmNlc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL14gK3wgKyQvZ20sICcnKTsgLy8gUmVtb3ZlIGV4dHJhIHNwYWNlcyBhdCB0aGUgc3RhcnQgb3IgZW5kIG9mIGxpbmVzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXFxuezMsfS9nLCAnXFxuXFxuJyk7IC8vIFJlbW92ZSBleHRyYSBuZXdsaW5lc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xccyooe3tbXn1dKnN0dWJ9fSkvaSwgJ1xcblxcblxcbiQxJyk7IC8vIEVuc3VyZSB0aGVyZSBhcmUgdGhyZWUgbmV3bGluZXMgYmVmb3JlIHRoZSBmaXJzdCBzdHViIHRlbXBsYXRlXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXFxzKyQvZywgJycpOyAvLyBSZW1vdmUgdHJhaWxpbmcgc3BhY2VzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXihbIypdKykgKi9nbSwgJyQxICcpOyAvLyBFbnN1cmUgdGhlcmUgaXMgYSBzcGFjZSBhZnRlciBhIGJ1bGxldCBvciBoYXNoIGluIGEgbGlzdCBpdGVtXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXihbIypdKyAuKilcXG4rKD89WyMqXSsgKS9nbSwgJyQxXFxuJyk7IC8vIFJlbW92ZSBuZXdsaW5lcyBiZXR3ZWVuIGxpc3QgaXRlbXNcbiAgICBpZiAoIXNlY29uZFJ1bikgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXFxzKyg/PTxyZWYoPyFlcmVuY2VzKSkvZywgJycpOyAvLyBSZW1vdmUgc3BhY2VzIGJlZm9yZSByZWZlcmVuY2VzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXig9Ky4qPz0rKSRcXG57Mix9KD89Xj0rLio/PSskKS9nbSwgJyQxXFxuJyk7IC8vIFJlbW92ZSBleHRyYSBuZXdsaW5lcyBiZXR3ZWVuIGVtcHR5IHNlY3Rpb24gYW5kIGZvbGxvd2luZyBzZWN0aW9uXG4gICAgY29udGVudCA9IGNvbnRlbnQudHJpbSgpOyAvLyBSZW1vdmUgZXh0cmEgbmV3bGluZXMgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiB0aGUgY29udGVudFxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIHJlZmVyZW5jZXMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwUmVmZXJlbmNlcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oKD86PHJlZig/IWVyZW5jZXMpLio/Pi4qPzxcXC9yZWY+KSspKFshLC47P10pL2csICckMiQxJyk7IC8vIEZpeCBwdW5jdHVhdGlvbiBmb2xsb3dpbmcgcmVmZXJlbmNlc1xuXG4gICAgY29uc3QgcmVmZXJlbmNlczogeyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlcjsgaXNTZWxmQ2xvc2luZz86IHRydWUgfVtdID0gW107XG5cbiAgICBsZXQgaXNJbnNpZGVOb3dpa2kgPSBmYWxzZTtcbiAgICBsZXQgaXNJbnNpZGVDb21tZW50ID0gZmFsc2U7XG5cbiAgICBsZXQgY3VycmVudExvY2F0aW9uID0gMDtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY29udGVudCBmb2xsb3dpbmcgdGhlIGN1cnJlbnQgbG9jYXRpb24gbWF0Y2hlcyB0aGUgZGVzaXJlZCBzdHJpbmcuXG4gICAgICogQHBhcmFtIGRlc2lyZWRTdHJpbmcgVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXRTdHJpbmcoZGVzaXJlZFN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGlzQXRTdHJpbmcgPSBjb250ZW50LnNsaWNlKGN1cnJlbnRMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uICsgZGVzaXJlZFN0cmluZy5sZW5ndGgpID09PSBkZXNpcmVkU3RyaW5nO1xuXG4gICAgICAgIGlmIChpc0F0U3RyaW5nKSBjdXJyZW50TG9jYXRpb24gKz0gZGVzaXJlZFN0cmluZy5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIGlzQXRTdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VlZHMgdGhyb3VnaCB0aGUgY29udGVudCB1bnRpbCB0aGUgZGVzaXJlZCBzdHJpbmcgaXMgZm91bmQuXG4gICAgICogQHBhcmFtIGRlc2lyZWRTdHJpbmcgVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByb2NlZWRVbnRpbFN0cmluZyhkZXNpcmVkU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRMb2NhdGlvbiA8IGNvbnRlbnQubGVuZ3RoICYmICFpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmcpKSBjdXJyZW50TG9jYXRpb24rKztcbiAgICB9XG5cbiAgICB3aGlsZSAoY3VycmVudExvY2F0aW9uIDwgY29udGVudC5sZW5ndGgpXG4gICAgICAgIGlmIChpc0F0U3RyaW5nKCc8bm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwvbm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8IS0tJykpIGlzSW5zaWRlQ29tbWVudCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJy0tPicpKSBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoIWlzSW5zaWRlTm93aWtpICYmICFpc0luc2lkZUNvbW1lbnQpXG4gICAgICAgICAgICBpZiAoIWlzQXRTdHJpbmcoJzxyZWZlcmVuY2VzJykgJiYgaXNBdFN0cmluZygnPHJlZicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBjdXJyZW50TG9jYXRpb24gLSA0O1xuXG4gICAgICAgICAgICAgICAgcHJvY2VlZFVudGlsU3RyaW5nKCc+Jyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGZDbG9zaW5nID0gY29udGVudFxuICAgICAgICAgICAgICAgICAgICAuc2xpY2Uoc3RhcnQsIGN1cnJlbnRMb2NhdGlvbiAtIDEpXG4gICAgICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAgICAgLmVuZHNXaXRoKCcvJyk7XG5cbiAgICAgICAgICAgICAgICByZWZlcmVuY2VzLnB1c2goaXNTZWxmQ2xvc2luZyA/IHsgc3RhcnQsIGVuZDogY3VycmVudExvY2F0aW9uLCBpc1NlbGZDbG9zaW5nIH0gOiB7IHN0YXJ0LCBlbmQ6IC0xIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0F0U3RyaW5nKCc8L3JlZj4nKSkgcmVmZXJlbmNlcy5hdCgtMSkhLmVuZCA9IGN1cnJlbnRMb2NhdGlvbjtcbiAgICAgICAgICAgIGVsc2UgY3VycmVudExvY2F0aW9uKys7XG4gICAgICAgIGVsc2UgY3VycmVudExvY2F0aW9uKys7XG5cbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG5cbiAgICBjb25zdCByZXBsYWNlbWVudHM6IFtzdHJpbmcsIHN0cmluZ11bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCByZWZlcmVuY2Ugb2YgcmVmZXJlbmNlcykge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBjb250ZW50LnNsaWNlKHJlZmVyZW5jZS5zdGFydCwgcmVmZXJlbmNlLmVuZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhcnRUYWcgPSAvPHJlZig/IWVyZW5jZXMpLio/Pi9pcy5leGVjKG9yaWdpbmFsVGV4dCkhWzBdO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZFRhZyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoXG4gICAgICAgICAgICByZWZlcmVuY2UuaXNTZWxmQ2xvc2luZyA/IHN0YXJ0VGFnLnJlcGxhY2UoLyAqXFwvICo+LywgJyAvPicpIDogc3RhcnRUYWcgKyAnPC9yZWY+JyxcbiAgICAgICAgICAgICd0ZXh0L2h0bWwnLFxuICAgICAgICApLmJvZHkuZmlyc3RDaGlsZCBhcyBIVE1MVW5rbm93bkVsZW1lbnQ7XG5cbiAgICAgICAgbGV0IG91dHB1dCA9IHBhcnNlZFRhZy5vdXRlckhUTUwucmVwbGFjZUFsbCgnJmFtcDsnLCAnJicpO1xuXG4gICAgICAgIGNvbnN0IHRhZ0NvbnRlbnQgPSBvcmlnaW5hbFRleHRcbiAgICAgICAgICAgIC5zbGljZShzdGFydFRhZy5sZW5ndGgsIC02KVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgLnJlcGxhY2VBbGwoL15cXFsgKihbXlxcXV0qKSAqXSQvZ20sICckMScpXG4gICAgICAgICAgICAudHJpbSgpO1xuXG4gICAgICAgIG91dHB1dCA9XG4gICAgICAgICAgICByZWZlcmVuY2UuaXNTZWxmQ2xvc2luZyB8fCB0YWdDb250ZW50Lmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICAgID8gb3V0cHV0LnJlcGxhY2UoLz5cXHMqPFxcL3JlZj4vLCAnIC8+JylcbiAgICAgICAgICAgICAgICA6IGAke291dHB1dC5zbGljZSgwLCAtNil9JHt0YWdDb250ZW50fTwvcmVmPmA7XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsVGV4dCAhPT0gb3V0cHV0KSByZXBsYWNlbWVudHMucHVzaChbb3JpZ2luYWxUZXh0LCBvdXRwdXRdKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtvcmlnaW5hbFRleHQsIG91dHB1dF0gb2YgcmVwbGFjZW1lbnRzKSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG9yaWdpbmFsVGV4dCwgb3V0cHV0KTtcblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIEZvcm1hdHMgdGVtcGxhdGUgc3BhY2luZyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gZm9ybWF0LlxuICovXG5mdW5jdGlvbiBmb3JtYXRUZW1wbGF0ZXMoY29udGVudDogc3RyaW5nKSB7XG4gICAgZW51bSBGb3JtYXRTdHlsZSB7XG4gICAgICAgIEV4cGFuZGVkLFxuICAgICAgICBFeHBhbmRlZEFsaWduZWQsXG4gICAgICAgIE1pbmltaXplZCxcbiAgICAgICAgTWluaW1pemVkU3BhY2VkLFxuICAgIH1cblxuICAgIGVudW0gTmFtZXNwYWNlIHtcbiAgICAgICAgVXNlciA9IDIsXG4gICAgICAgIERyYWZ0ID0gMTE4LFxuICAgIH1cblxuICAgIGNsYXNzIFRlbXBsYXRlIHtcbiAgICAgICAgcHVibGljIGxvY2F0aW9uOiB7IHN0YXJ0OiBudW1iZXI7IGVuZD86IG51bWJlciB9O1xuICAgICAgICBwdWJsaWMgaXNOZXN0ZWQgPSBmYWxzZTtcblxuICAgICAgICBwdWJsaWMgZnVsbFRleHQ/OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgZnVsbFRleHRFc2NhcGVkPzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIG5hbWU/OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcGFyYW1ldGVyczogeyBrZXk6IHN0cmluZyB8IG51bGw7IHZhbHVlOiBzdHJpbmcgfVtdID0gW107XG4gICAgICAgIHB1YmxpYyBzdWJUZW1wbGF0ZXM6IFRlbXBsYXRlW10gPSBbXTtcblxuICAgICAgICBwcml2YXRlIHBsYWNlaG9sZGVyU3RyaW5ncyA9IFsnXFx1e0YwMDAwfScsICdcXHV7MTBGRkZGfScsICdcXHV7RkZGRkV9J107XG5cbiAgICAgICAgcHJpdmF0ZSBwaXBlRXNjYXBlUmVnZXhlcyA9IFsvKFxcW1xcW1teXFxdXSo/KVxcfCguKj9dXSkvZywgLyg8IS0tLio/KVxcfCguKj8tLT4pL2csIC8oPG5vd2lraT4uKj8pXFx8KC4qPzxcXC9ub3dpa2k+KS9nXTtcblxuICAgICAgICBwcml2YXRlIGRlZmF1bHRUZW1wbGF0ZVN0eWxlcyA9IHtcbiAgICAgICAgICAgIFtGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWRdOiBbXG4gICAgICAgICAgICAgICAgJ2F1dG9tYXRpYyB0YXhvYm94JyxcbiAgICAgICAgICAgICAgICAnYmxvY2txdW90ZScsXG4gICAgICAgICAgICAgICAgJ2h5YnJpZGJveCcsXG4gICAgICAgICAgICAgICAgJ2ljaG5vYm94JyxcbiAgICAgICAgICAgICAgICAnaW5mb2JveCcsXG4gICAgICAgICAgICAgICAgJ2luZnJhc3BlY2llc2JveCcsXG4gICAgICAgICAgICAgICAgJ2xpc3RlbicsXG4gICAgICAgICAgICAgICAgJ2xvY2F0aW9uIG1hcCBtYW55JyxcbiAgICAgICAgICAgICAgICAnbW90b3JzcG9ydCBzZWFzb24nLFxuICAgICAgICAgICAgICAgICdtdWx0aXBsZSBpbWFnZScsXG4gICAgICAgICAgICAgICAgJ215Y29tb3JwaGJveCcsXG4gICAgICAgICAgICAgICAgJ25hdmJveCcsXG4gICAgICAgICAgICAgICAgJ29vYm94JyxcbiAgICAgICAgICAgICAgICAnb3JiaXRib3gnLFxuICAgICAgICAgICAgICAgICdvc20gbG9jYXRpb24gbWFwJyxcbiAgICAgICAgICAgICAgICAncXVvdGUgYm94JyxcbiAgICAgICAgICAgICAgICAnc2lkZWJhcicsXG4gICAgICAgICAgICAgICAgJ3NwZWNpZXNib3gnLFxuICAgICAgICAgICAgICAgICdzdGFyYm94JyxcbiAgICAgICAgICAgICAgICAnc3VjY2Vzc2lvbiBib3gnLFxuICAgICAgICAgICAgICAgICd0YXhvYm94JyxcbiAgICAgICAgICAgICAgICAndmlydXNib3gnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtGb3JtYXRTdHlsZS5NaW5pbWl6ZWRdOiBbJ2Nvb3JkJywgJ2VuZCBkYXRlJywgJ2xhbmcnLCAnbGFuZ3gnLCAnc3RhcnQgZGF0ZSddLFxuICAgICAgICAgICAgW0Zvcm1hdFN0eWxlLk1pbmltaXplZFNwYWNlZF06IFsnaW5mb2JveCBtYXBmcmFtZSddLFxuICAgICAgICB9O1xuXG4gICAgICAgIHByaXZhdGUgbmFtZXNwYWNlU3BlY2lmaWNUZW1wbGF0ZXMgPSB7XG4gICAgICAgICAgICBbTmFtZXNwYWNlLkRyYWZ0XTogW1xuICAgICAgICAgICAgICAgICdhZmMgY29tbWVudCcsXG4gICAgICAgICAgICAgICAgJ2FmYyBzdWJtaXNzaW9uJyxcbiAgICAgICAgICAgICAgICAnYWZjIHN1Ym1pc3Npb24vZHJhZnQnLFxuICAgICAgICAgICAgICAgICdhZmMgdG9waWMnLFxuICAgICAgICAgICAgICAgICdkcmFmdCBhcnRpY2xlJyxcbiAgICAgICAgICAgICAgICAnZHJhZnQgY2F0ZWdvcmllcycsXG4gICAgICAgICAgICAgICAgJ2RyYWZ0IHRvcGljcycsXG4gICAgICAgICAgICAgICAgJ2RyYWZ0JyxcbiAgICAgICAgICAgICAgICAnZHJhZnRzIG1vdmVkIGZyb20gbWFpbnNwYWNlJyxcbiAgICAgICAgICAgICAgICAncHJlbG9hZGRyYWZ0IHN1Ym1pdCcsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW05hbWVzcGFjZS5Vc2VyXTogWydkYXNoYm9hcmQud2lraWVkdS5vcmcgc2FuZGJveCcsICd1c2VyIHNhbmRib3gnLCAndXNlcnNwYWNlIGRyYWZ0J10sXG4gICAgICAgIH07XG5cbiAgICAgICAgcHJpdmF0ZSB0ZW1wbGF0ZXNUb0tlZXBDb250ZW50ID0gWydkcmFmdCBjYXRlZ29yaWVzJ107XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc3RhcnRMb2NhdGlvbjogbnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0geyBzdGFydDogc3RhcnRMb2NhdGlvbiB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHBhcnNlKCkge1xuICAgICAgICAgICAgdGhpcy5mdWxsVGV4dCA9IGNvbnRlbnQuc2xpY2UodGhpcy5sb2NhdGlvbi5zdGFydCwgdGhpcy5sb2NhdGlvbi5lbmQpO1xuICAgICAgICAgICAgdGhpcy5mdWxsVGV4dEVzY2FwZWQgPSB0aGlzLmZ1bGxUZXh0O1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YlRlbXBsYXRlIG9mIHRoaXMuc3ViVGVtcGxhdGVzKSB7XG4gICAgICAgICAgICAgICAgc3ViVGVtcGxhdGUucGFyc2UoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZnVsbFRleHRFc2NhcGVkID0gdGhpcy5mdWxsVGV4dEVzY2FwZWQucmVwbGFjZShzdWJUZW1wbGF0ZS5mdWxsVGV4dCEsIHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHRyaW1tZWRJbm5lclRleHQgPSB0aGlzLmZ1bGxUZXh0RXNjYXBlZC5zbGljZSgyLCAtMikudHJpbSgpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBpcGVFc2NhcGVSZWdleCBvZiB0aGlzLnBpcGVFc2NhcGVSZWdleGVzKVxuICAgICAgICAgICAgICAgIHdoaWxlIChwaXBlRXNjYXBlUmVnZXgudGVzdCh0cmltbWVkSW5uZXJUZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgdHJpbW1lZElubmVyVGV4dCA9IHRyaW1tZWRJbm5lclRleHQucmVwbGFjZUFsbChwaXBlRXNjYXBlUmVnZXgsIGAkMSR7dGhpcy5wbGFjZWhvbGRlclN0cmluZ3NbMV19JDJgKTtcblxuICAgICAgICAgICAgY29uc3QgdGFnRXF1YWxzRXNjYXBlUmVnZXhlcyA9IFsvPChcXHcrKSggW148Pl0rPykoPzwhXFwvKT4uKj88XFwvXFwxPi9nLCAvPChcXHcrKSggW148Pl0rPylcXC8+L2ddO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhZ0VxdWFsc0VzY2FwZVJlZ2V4IG9mIHRhZ0VxdWFsc0VzY2FwZVJlZ2V4ZXMpXG4gICAgICAgICAgICAgICAgdHJpbW1lZElubmVyVGV4dCA9IHRyaW1tZWRJbm5lclRleHQucmVwbGFjZUFsbCh0YWdFcXVhbHNFc2NhcGVSZWdleCwgKGZ1bGxUZXh0LCB0YWdOYW1lOiBzdHJpbmcsIGF0dHJpYnV0ZXM6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVsbFRleHQucmVwbGFjZShhdHRyaWJ1dGVzLCBhdHRyaWJ1dGVzLnJlcGxhY2VBbGwoJz0nLCB0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1syXSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gdHJpbW1lZElubmVyVGV4dC5zcGxpdCgnfCcpLm1hcCgocGFyYW1ldGVyKSA9PiBwYXJhbWV0ZXIucmVwbGFjZUFsbCh0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1sxXSwgJ3wnKS50cmltKCkpO1xuXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBwYXJhbWV0ZXJzLnNoaWZ0KCk/LnJlcGxhY2VBbGwoJ18nLCAnICcpO1xuXG4gICAgICAgICAgICBjb25zdCBzcGxpdFBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzLm1hcCgocGFyYW1ldGVycykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVxdWFsc0xvY2F0aW9uID0gcGFyYW1ldGVycy5pbmRleE9mKCc9Jyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXF1YWxzTG9jYXRpb24gPT09IC0xKSByZXR1cm4geyBrZXk6IG51bGwsIHZhbHVlOiBwYXJhbWV0ZXJzLnJlcGxhY2VBbGwodGhpcy5wbGFjZWhvbGRlclN0cmluZ3NbMl0sICc9JykudHJpbSgpIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtZXRlcnMuc2xpY2UoZXF1YWxzTG9jYXRpb24gKyAxKS5yZXBsYWNlQWxsKHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzJdLCAnPScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBwYXJhbWV0ZXJzLnNsaWNlKDAsIGVxdWFsc0xvY2F0aW9uKS50cmltKCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBgJHt2YWx1ZS5zdGFydHNXaXRoKCdcXG4nKSA/ICdcXG4nIDogJyd9JHt2YWx1ZS50cmltKCl9YCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHNwbGl0UGFyYW1ldGVycztcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc2hvdWxkQmVSZW1vdmVkKCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZXNwYWNlLCB0ZW1wbGF0ZXNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubmFtZXNwYWNlU3BlY2lmaWNUZW1wbGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgPT09IE51bWJlci5wYXJzZUludChuYW1lc3BhY2UpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGlmICh0ZW1wbGF0ZXMuaW5jbHVkZXModGhpcy5uYW1lIS50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZ2V0U3R5bGUoKSB7XG4gICAgICAgICAgICBsZXQgbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlUHJlZml4TGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGxldCBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZTogRm9ybWF0U3R5bGUgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2Zvcm1hdFN0eWxlLCB0ZW1wbGF0ZVByZWZpeGVzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRlZmF1bHRUZW1wbGF0ZVN0eWxlcykpXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0ZW1wbGF0ZVByZWZpeCBvZiB0ZW1wbGF0ZVByZWZpeGVzKVxuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCh0ZW1wbGF0ZVByZWZpeCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJlZml4Lmxlbmd0aCA+PSBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVQcmVmaXhMZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVQcmVmaXhMZW5ndGggPSB0ZW1wbGF0ZVByZWZpeC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZSA9IE51bWJlci5wYXJzZUludChmb3JtYXRTdHlsZSkgYXMgRm9ybWF0U3R5bGU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZUZvcm1hdFN0eWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBjbGVhbnVwUGFyYW1ldGVycygpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlUGFyYW1ldGVycyA9IG5ldyBTZXQoWydpbWFnZScsICdsb2dvJywgJ2NvdmVyJ10pO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBudW1iZXIgPSAxOyBudW1iZXIgPD0gMTA7IG51bWJlcisrKSBpbWFnZVBhcmFtZXRlcnMuYWRkKGBpbWFnZSR7bnVtYmVyfWApO1xuXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnMubWFwKCh7IGtleSwgdmFsdWUgfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgJiYgaW1hZ2VQYXJhbWV0ZXJzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdbWycpICYmIHZhbHVlLmVuZHNXaXRoKCddXScpKSB2YWx1ZSA9IC9cXFtcXFsoLio/KV1dL2cuZXhlYyh2YWx1ZSkhWzFdLnNwbGl0KCd8JylbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eKEZpbGV8SW1hZ2UpOi8sICcnKS5yZXBsYWNlQWxsKCdfJywgJyAnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4geyBrZXksIHZhbHVlIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBmb3JtYXQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZnVsbFRleHQpIHRoaXMucGFyc2UoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkQmVSZW1vdmVkKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVzVG9LZWVwQ29udGVudC5pbmNsdWRlcyh0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkpID8gdGhpcy5wYXJhbWV0ZXJzWzBdLnZhbHVlIDogJyc7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nZXRTdHlsZSgpO1xuICAgICAgICAgICAgaWYgKHN0eWxlID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzLmZ1bGxUZXh0ITtcblxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gW2B7eyR7dGhpcy5uYW1lfWBdO1xuXG4gICAgICAgICAgICB0aGlzLmNsZWFudXBQYXJhbWV0ZXJzKCk7XG5cbiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWQgfHwgc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZCkge1xuICAgICAgICAgICAgICAgIGxldCByZXF1aXJlZEtleUxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZClcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWRLZXlMZW5ndGggPSBNYXRoLm1heCguLi50aGlzLnBhcmFtZXRlcnMubWFwKChwYXJhbWV0ZXIpID0+IHBhcmFtZXRlci5rZXk/Lmxlbmd0aCA/PyAwKSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtZXRlciBvZiB0aGlzLnBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKGB8ICR7cGFyYW1ldGVyLmtleSA/IGAke3BhcmFtZXRlci5rZXkucGFkRW5kKHJlcXVpcmVkS2V5TGVuZ3RoKX0gPSBgIDogJyd9JHtwYXJhbWV0ZXIudmFsdWV9YCk7XG4gICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtZXRlciBvZiB0aGlzLnBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbWV0ZXIudmFsdWUpIG91dHB1dC5wdXNoKGB8JHtwYXJhbWV0ZXIua2V5ID8gYCR7cGFyYW1ldGVyLmtleX09YCA6ICcnfSR7cGFyYW1ldGVyLnZhbHVlfWApO1xuXG4gICAgICAgICAgICBvdXRwdXQucHVzaCgnfX0nKTtcblxuICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbMF0gKz0gJ319JztcblxuICAgICAgICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLk1pbmltaXplZFNwYWNlZCkge1xuICAgICAgICAgICAgICAgIG91dHB1dFtvdXRwdXQubGVuZ3RoIC0gMl0gKz0gJ319JztcblxuICAgICAgICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGpvaW5lZE91dHB1dCA9IG91dHB1dC5qb2luKFxuICAgICAgICAgICAgICAgIHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZCB8fCBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkXG4gICAgICAgICAgICAgICAgICAgID8gJ1xcbidcbiAgICAgICAgICAgICAgICAgICAgOiBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuTWluaW1pemVkU3BhY2VkXG4gICAgICAgICAgICAgICAgICAgICAgPyAnICdcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBzdWJUZW1wbGF0ZSBvZiB0aGlzLnN1YlRlbXBsYXRlcylcbiAgICAgICAgICAgICAgICBqb2luZWRPdXRwdXQgPSBqb2luZWRPdXRwdXQucmVwbGFjZSh0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1swXSwgc3ViVGVtcGxhdGUuZm9ybWF0KCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gam9pbmVkT3V0cHV0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWxsVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG5cbiAgICBjb25zdCBpbnNpZGVUZW1wbGF0ZXM6IFRlbXBsYXRlW10gPSBbXTtcbiAgICBsZXQgaXNJbnNpZGVMaW5rID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZykgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgaWYgKGlzQXRTdHJpbmcoJzxub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPC9ub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwhLS0nKSkgaXNJbnNpZGVDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnLS0+JykpIGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmICghaXNJbnNpZGVOb3dpa2kgJiYgIWlzSW5zaWRlQ29tbWVudClcbiAgICAgICAgICAgIGlmIChpc0F0U3RyaW5nKCdbWycpKSBpc0luc2lkZUxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnNpZGVMaW5rICYmIGlzQXRTdHJpbmcoJ11dJykpIGlzSW5zaWRlTGluayA9IGZhbHNlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygne3snKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKGN1cnJlbnRMb2NhdGlvbiAtIDIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluc2lkZVRlbXBsYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmlzTmVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5zaWRlVGVtcGxhdGVzLmF0KC0xKT8uc3ViVGVtcGxhdGVzLnB1c2godGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGluc2lkZVRlbXBsYXRlcy5wdXNoKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBdFN0cmluZygnfX0nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RUZW1wbGF0ZSA9IGluc2lkZVRlbXBsYXRlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3RUZW1wbGF0ZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBsYXN0VGVtcGxhdGUubG9jYXRpb24uZW5kID0gY3VycmVudExvY2F0aW9uO1xuXG4gICAgICAgICAgICAgICAgYWxsVGVtcGxhdGVzLnB1c2gobGFzdFRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBjdXJyZW50TG9jYXRpb24rKztcbiAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGxldCBuZXdDb250ZW50ID0gY29udGVudDtcblxuICAgIGZvciAoY29uc3QgdGVtcGxhdGUgb2YgYWxsVGVtcGxhdGVzKVxuICAgICAgICBpZiAoIXRlbXBsYXRlLmlzTmVzdGVkKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5wYXJzZSgpO1xuXG4gICAgICAgICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKHRlbXBsYXRlLmZ1bGxUZXh0ISwgdGVtcGxhdGUuZm9ybWF0KCkpO1xuICAgICAgICB9XG5cbiAgICByZXR1cm4gbmV3Q29udGVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHVubmVjZXNzYXJ5IGNvbW1lbnRzIGZyb20gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiByZW1vdmVDb21tZW50cyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBpZiAobXcuY29uZmlnLmdldCgnd2dOYW1lc3BhY2VOdW1iZXInKSAhPT0gMCkgcmV0dXJuIGNvbnRlbnQ7XG5cbiAgICBjb25zdCBjb21tZW50cyA9IFtcbiAgICAgICAgJ0VESVQgQkVMT1cgVEhJUyBMSU5FJyxcbiAgICAgICAgJ0ltcG9ydGFudCwgZG8gbm90IHJlbW92ZSBhbnl0aGluZyBhYm92ZSB0aGlzIGxpbmUgYmVmb3JlIGFydGljbGUgaGFzIGJlZW4gY3JlYXRlZC4nLFxuICAgICAgICAnSW5saW5lIGNpdGF0aW9ucyBhZGRlZCB0byB5b3VyIGFydGljbGUgd2lsbCBhdXRvbWF0aWNhbGx5IGRpc3BsYXkgaGVyZS4nLFxuICAgICAgICAnTm90ZTogVGhlIGZvbGxvd2luZyBwYWdlcyB3ZXJlIHJlZGlyZWN0cyB0byAnLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IGNvbW1lbnQgb2YgY29tbWVudHMpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwobmV3IFJlZ0V4cChgPCEtLSA/JHtlc2NhcGVSZWdleENoYXJhY3RlcnMoY29tbWVudCl9Lio/LS0+XFxuP2AsICdncycpLCAnJyk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkFtQ1EsR0FBRyxPQUFPLElBQUksbUJBQW1CLEVBQUksR0FDcEMsR0FBRyxPQUFPLElBQUksc0JBQXNCLEdBRXpDLEdBQUcsT0FBTyxNQUFNLENBQUMsaUJBQWtCLHNCQUFzQixFQUFHLElBQU0sQ0FDOUQsR0FBRyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9yQixFQUVNLElBQU1BLEVBQU8sR0FBRyxLQUFLLGVBQ2pCLEdBQUcsT0FBTyxJQUFJLE1BQU0sSUFBTSxVQUFZLGVBQWlCLGFBQ3ZELElBQ0EsMEJBQ0EsaUJBQ0osRUFFSUMsRUFBeUIsR0FFdkJDLEVBQWdCLDRGQUV0QixHQUFHLEtBQUssNEJBQTRCLEVBQUUsSUFBSSxJQUFNLENBQzVDLEdBQUlELEVBQXdCLENBQ3hCLElBQU1FLEVBQWUsU0FBUyxjQUFtQyxzQ0FBc0MsRUFFbEdBLEVBQWEsTUFBTSxTQUFTRCxFQUFjLE1BQU0sQ0FBQyxDQUFDLElBQy9DQyxFQUFhLE1BQU9BLEVBQWEsT0FBUyxLQUFLRCxFQUFjLE9BQU8sQ0FBQyxFQUFFLFlBQVksRUFBSUEsRUFBYyxNQUFNLENBQUMsQ0FBQyxHQUM1R0MsRUFBYSxNQUFRRCxHQUU5QkQsRUFBeUIsRUFDN0IsQ0FDSixDQUFDLEVBRURELEVBQUssaUJBQWlCLFFBQVVJLEdBQVUsQ0FDdENBLEVBQU0sZUFBZSxFQUVyQixJQUFNQyxFQUFVLEVBQUUsYUFBYSxFQUMvQixHQUFJQSxFQUFRLFNBQVcsRUFBRyxPQUFPLEdBQUcsT0FBTyxzQkFBdUIsQ0FBRSxLQUFNLFFBQVMsZ0JBQWlCLE9BQVEsQ0FBQyxFQUU3RyxJQUFNQyxFQUFlRCxFQUFRLGNBQWMsYUFBYSxFQUVwREUsRUFBWUQsRUFjaEIsR0FaQUMsRUFBWUMsRUFB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SSxPQUFPLFNBQVNGLEVBQXNCMkcsQ0FBTyxDQUFDO0FBQUEsR0FBYSxJQUFJLEVBQUcsRUFBRSxFQUVySSxPQUFPekcsQ0FDWCIsCiAgIm5hbWVzIjogWyJsaW5rIiwgInNob3VsZEFkZFNjcmlwdE1lc3NhZ2UiLCAic2NyaXB0TWVzc2FnZSIsICJzdW1tYXJ5SW5wdXQiLCAiZXZlbnQiLCAiZWRpdEJveCIsICJvcmlnaW5hbFRleHQiLCAiZmluYWxUZXh0IiwgImNsZWFudXBTZWN0aW9uSGVhZGVycyIsICJjbGVhbnVwTWFnaWNXb3JkcyIsICJjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyIsICJjbGVhbnVwQ2F0ZWdvcmllcyIsICJjbGVhbnVwTGlua3MiLCAiY2xlYW51cEltcHJvcGVyQ2hhcmFjdGVycyIsICJjbGVhbnVwWWVhclJhbmdlcyIsICJjbGVhbnVwU3RyYXlNYXJrdXAiLCAiY2xlYW51cFNwYWNpbmciLCAiY2xlYW51cFJlZmVyZW5jZXMiLCAiZm9ybWF0VGVtcGxhdGVzIiwgInJlbW92ZUNvbW1lbnRzIiwgInN1cmZhY2VNb2RlbCIsICJlc2NhcGVSZWdleENoYXJhY3RlcnMiLCAic3RyaW5nIiwgImNvbnRlbnQiLCAiY29tbW9uUmVwbGFjZW1lbnRzIiwgImNvbW1vbk1pc2NhcGl0YWxpemVkV29yZHMiLCAicmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50cyIsICJrZXkiLCAidmFsdWVzIiwgInZhbHVlIiwgInBhcnNlZEhlYWRlcnMiLCAiaGVhZGVyIiwgIm5hbWUiLCAic3RhcnRNYXJrdXAiLCAiZW5kTWFya3VwIiwgImxpbmtzIiwgImRlcHRoIiwgImhlYWRlcnNTZXQiLCAidGl0bGVTcGFjZXIiLCAibG93ZXJjYXNlTmFtZSIsICJjYXBpdGFsaXplZE5hbWUiLCAid29yZCIsICJvdXRwdXQiLCAicGFyc2VkVGFncyIsICJ0YWciLCAiZnVsbFRhZyIsICJ0eXBlIiwgImN1cnJlbnRUaXRsZSIsICJvcmlnaW5hbFRhZ1JlZ2V4IiwgInRpdGxlIiwgIm5ld1RleHQiLCAiZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkIiwgImNsb3NlZExpbmtzIiwgImlzSW5zaWRlTm93aWtpIiwgImlzSW5zaWRlQ29tbWVudCIsICJjdXJyZW50TG9jYXRpb24iLCAiaXNBdFN0cmluZyIsICJkZXNpcmVkU3RyaW5nIiwgInNob3VsZEluY3JlbWVudCIsICJsYXN0TGluayIsICJuZXdMaW5rQ29udGVudCIsICJuYW1lc3BhY2VOYW1lcyIsICJsaW5rTG9jYXRpb24iLCAiaW5uZXJMaW5rIiwgInVucGFyc2VkTGluayIsICJwYXJhbWV0ZXJzIiwgImFsdFRleHQiLCAiaXNGaXJzdENoYXJhY3RlckNvbG9uIiwgInNob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiIsICJsaW5rVXBwZXJjYXNlU3RhcnQiLCAibGlua0xvd2VyY2FzZVN0YXJ0IiwgIm5hbWVzcGFjZSIsICJhZnRlckxpbmtUZXh0IiwgIm5ld0xpbmsiLCAiZnVuY3Rpb25Ub0NhbGwiLCAibG9vcENvdW50ZXIiLCAibGlua0RhdGEiLCAibGlua0NvbnRlbnQiLCAicnVuIiwgImVsaXBzaXNQbGFjZWhvbGRlciIsICJuYnNwUGxhY2Vob2xkZXIiLCAib3JpZ2luYWwiLCAic3RhcnQiLCAiZW5kIiwgInN0cmF5TWFya3VwUmVnZXhlcyIsICJyZWdleCIsICJzZWNvbmRSdW4iLCAicmVmZXJlbmNlcyIsICJwcm9jZWVkVW50aWxTdHJpbmciLCAiaXNTZWxmQ2xvc2luZyIsICJwYXJzZXIiLCAicmVwbGFjZW1lbnRzIiwgInJlZmVyZW5jZSIsICJzdGFydFRhZyIsICJ0YWdDb250ZW50IiwgIkZvcm1hdFN0eWxlIiwgIk5hbWVzcGFjZSIsICJUZW1wbGF0ZSIsICJzdGFydExvY2F0aW9uIiwgInN1YlRlbXBsYXRlIiwgInRyaW1tZWRJbm5lclRleHQiLCAicGlwZUVzY2FwZVJlZ2V4IiwgInRhZ0VxdWFsc0VzY2FwZVJlZ2V4ZXMiLCAidGFnRXF1YWxzRXNjYXBlUmVnZXgiLCAiZnVsbFRleHQiLCAidGFnTmFtZSIsICJhdHRyaWJ1dGVzIiwgInBhcmFtZXRlciIsICJzcGxpdFBhcmFtZXRlcnMiLCAiZXF1YWxzTG9jYXRpb24iLCAidGVtcGxhdGVzIiwgIm1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZVByZWZpeExlbmd0aCIsICJtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZSIsICJmb3JtYXRTdHlsZSIsICJ0ZW1wbGF0ZVByZWZpeGVzIiwgInRlbXBsYXRlUHJlZml4IiwgImltYWdlUGFyYW1ldGVycyIsICJudW1iZXIiLCAic3R5bGUiLCAicmVxdWlyZWRLZXlMZW5ndGgiLCAiam9pbmVkT3V0cHV0IiwgImFsbFRlbXBsYXRlcyIsICJpbnNpZGVUZW1wbGF0ZXMiLCAiaXNJbnNpZGVMaW5rIiwgInRlbXBsYXRlIiwgImxhc3RUZW1wbGF0ZSIsICJuZXdDb250ZW50IiwgImNvbW1lbnRzIiwgImNvbW1lbnQiXQp9Cg==
