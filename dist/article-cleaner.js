// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/article-cleaner.ts

"use strict";(()=>{mw.config.get("wgNamespaceNumber")<0||mw.config.get("wgIsProbablyEditable")&&mw.loader.using(["mediawiki.util","jquery.textSelection"],()=>{mw.util.addCSS(`
#article-cleaner {
    display: none;
}

#content:has(#wpTextbox1) #article-cleaner {
    display: unset;
}`);let e=mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-navigation":"p-cactions","#","Perform article cleanup","article-cleaner"),f=!1,p="Cleaned up article content (via [[User:Eejit43/scripts/article-cleaner|article-cleaner]])";mw.hook("ve.saveDialog.stateChanged").add(()=>{if(f){let c=document.querySelector(".ve-ui-mwSaveDialog-summary textarea");c.value.includes(p.slice(1))||(c.value?c.value+=`; ${p.charAt(0).toLowerCase()+p.slice(1)}`:c.value=p),f=!1}}),e.addEventListener("click",c=>{c.preventDefault();let u=$("#wpTextbox1");if(u.length===0)return mw.notify("Edit box not found!",{type:"error",autoHideSeconds:"short"});let g=u.textSelection("getContents"),l=g;if(l=b(l),l=k(l),l=y(l),l=v(l),l=E(l),l=A(l),l=C(l),l=L(l),g===l)mw.notify("No changes to be made to the article!",{type:"warn",autoHideSeconds:"short"});else{if(ve.init){let n=ve.init.target.getSurface().getModel();n.getLinearFragment(n.getRangeFromSourceOffsets(0,g.length)).insertContent(l),n.setSelection(new ve.dm.LinearSelection(new ve.Range(0,0)))}else u.textSelection("setContents",l),u.textSelection("setSelection",{start:0});mw.notify("Article cleanup complete!",{type:"success",autoHideSeconds:"short"});let a=document.querySelector("#wpSummary");a?a.value.includes(p.slice(1))||(a.value?a.value+=`; ${p.charAt(0).toLowerCase()+p.slice(1)}`:a.value=p):f=!0}})});function b(e){let f={"See also":["also see"],References:["reference","source","sources","citation","citations"],"Further reading":["further reading"],"External links":["external link","weblink","weblinks"]},p=["life","career"],c=Object.fromEntries(Object.entries(f).flatMap(([a,n])=>n.map(r=>[r,a]))),g=[...e.matchAll(/\n+(?<startMarkup>=+) *(?<name>.*?) *(?<endMarkup>=+)\n+/g)].map(a=>{let{name:n}=a.groups,{startMarkup:r,endMarkup:d}=a.groups;n=n.replaceAll(/'{3}/g,"");let t=n.matchAll(/\[\[(.+?)]]/g).toArray();for(let o of t)n=n.replace(o[0],o[1].split("|").at(-1));let s=Math.max(r.length,d.length,2);return{name:n,depth:s,original:a[0]}}),l=/^=+ | =+$/.test(g[0].original)?" ":"";for(let a of g){let r=a.name.toLowerCase()in c?c[a.name.toLowerCase()]:a.name;for(let t of p)r=r.replaceAll(new RegExp(`\\b${t}\\b`,"gi"),t);r=r.charAt(0).toUpperCase()+r.slice(1);let d=`${"=".repeat(a.depth)}${l}${r}${l}${"=".repeat(a.depth)}`;a.original!==d&&(e=e.replace(a.original,`

${d}
`))}return e}function k(e){return e.replaceAll(/__(INDEX|NOINDEX|NEWSECTIONLINK|NONEWSECTIONLINK|NOEDITSECTION|DISAMBIG|STATICREDIRECT|FORCETOC)__\n*/g,"")}function y(e){let p=[...e.matchAll(/{{(displaytitle|defaultsort)[:|](.*?)}}/gi)].map(u=>{let[g,l,a]=u;return{type:l.toUpperCase(),value:a,original:g}}),c=mw.Title.newFromText(mw.config.get("wgPageName"));for(let u of p){let g=new RegExp(`${u.original.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}
*`,"g"),l=mw.Title.makeTitle(c.getNamespaceId(),u.value.includes(":")?u.value.split(":")[1]:u.value);if(c.toText()===l.toText()){e=e.replace(g,"");continue}let a=`{{${u.type}:${l.toText()}}}
`;e=e.replace(g,a)}return e}function v(e){return e.replaceAll(/(\[\[|}}):?category:(.*?)(]]|}})/gi,"[[Category:$2]]")}function E(e){let f=[],p=[],c=0;function u(a,n=!0){let r=e.slice(c,c+a.length)===a;return r&&n&&(c+=a.length),r}for(;c<e.length;)if(u("[["))p.push({start:c-2,end:-1,isNested:p.length>0});else if(u("]]")){let a=p.pop();if(!a)continue;a.end=c,f.push(a)}else c++;let g=[],l=Object.values(mw.config.get("wgFormattedNamespaces"));for(let a of f){let n=e.slice(a.start+2,a.end-2),[r,...d]=n.split("|"),t=r.replaceAll("_"," ").trim(),s=d.join("|");s=s===" "?" ":s.trim();let o=t.startsWith(":");o&&(t=t.slice(1));let h=!1,i=t.charAt(0).toUpperCase()+t.slice(1),m=t.charAt(0).toLowerCase()+t.slice(1);t.includes(":")&&(i.startsWith("Image:")&&(t=`${t.startsWith("Image:")?"F":"f"}ile:${t.slice(6)}`),o&&["Image","File","Category"].includes(i.split(":")[0])&&(h=!0));let x="";t===s?s="":new RegExp(`^${t.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}[a-z]+$`).test(s)&&(x=s.slice(t.length),s="");for(let S of[i,m])S===s?(t=S,s=""):new RegExp(`^${S.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}[a-z]+$`).test(s)&&(t=S,x=s.slice(S.length),s="");let T=t.split(":")[0];T=T.charAt(0).toUpperCase()+T.slice(1),(s&&t.includes(":")&&l.includes(T)||t.startsWith("file:")||t.startsWith("category:"))&&(t=t.charAt(0).toUpperCase()+t.slice(1));let w=`[[${h?":":""}${t}${s?`|${s}`:""}]]${x}`;g.push([a,w])}for(let a=0;a<2;a++)for(let[n,r]of g)a===0&&n.isNested||a===1&&!n.isNested||(e=e.slice(0,n.start)+r.padStart(n.end-n.start,"\0")+e.slice(n.end));return e.replaceAll("\0","")}function A(e){let f=[/'+(Bold|Italic)( text)?'+ */g,/(<big>)+Big( text)?(<\/big>)+ */g,/(<small>)+Small( text)?(<\/small>)+ */g,/(<sup>)+Superscript( text)?(<\/sup>)+ */g,/(<sub>)+Subscript( text)?(<\/sub>)+ */g,/(<s>)+Strikethrough(<\/s>)+ */g,/(<u>)+Underline(<\/u>)+ */g,/(<code>)+Computer code(<\/code>)+ */g,/(<nowiki>)+Insert non-formatted text here(<\/nowiki>)+ */g,/=+ Heading text =+ */g,/\* Bulleted list item */g,/# Numbered list item */g,/<gallery>\nExample.jpg\|Caption1\nExample.jpg\|Caption2\n<\/gallery> */g,/#REDIRECT \[\[Target page name]] */g,/<!-- Invisible comment --> */g,/<noinclude>\s*<\/noinclude> */g];for(let p of f)for(;p.test(e);)e=e.replace(p,"");return e}function C(e){return e=e.replaceAll(/(\b|\p{Punctuation}) {2,}(\b)/gu,"$1 $2"),e=e.replaceAll(/(\n|^) +| +(\n|$)/g,"$1$2"),e=e.replaceAll(/\n{3,}/g,`

`),e=e.replace(/\s*({{[^}]*stub}})/i,`


$1`),e=e.replaceAll(/\s+$/g,""),e=e.replaceAll(/(\n|^)([#*]) */g,"$1$2 "),e}function L(e){let f;(i=>(i[i.Expanded=0]="Expanded",i[i.ExpandedAligned=1]="ExpandedAligned",i[i.Minimized=2]="Minimized",i[i.MinimizedSpaced=3]="MinimizedSpaced"))(f||={});class p{location;isNested=!1;fullText;fullTextEscaped;name;parameters=[];subTemplates=[];placeholderStrings=["\u{F0000}","\u{10FFFF}"];pipeEscapeRegexes=[/(\[\[[^\]]*?)\|(.*?]])/g,/(<!--.*?)\|(.*?-->)/g,/(<nowiki>.*?)\|(.*?<\/nowiki>)/g];defaultTemplateStyles={1:["infobox","speciesbox","taxobox","automatic taxobox","osm location map","motorsport season","blockquote","quote box"],2:["coord","start date","end date","lang","langx"]};constructor(s){this.location={start:s}}parse(){this.fullText=e.slice(this.location.start,this.location.end),this.fullTextEscaped=this.fullText;for(let i of this.subTemplates)i.parse(),this.fullTextEscaped=this.fullTextEscaped.replace(i.fullText,this.placeholderStrings[0]);let s=this.fullTextEscaped.slice(2,-2).trim();for(let i of this.pipeEscapeRegexes)for(;i.test(s);)s=s.replaceAll(i,`$1${this.placeholderStrings[1]}$2`);let o=s.split("|").map(i=>i.replaceAll(this.placeholderStrings[1],"|").trim());this.name=o.shift();let h=o.map(i=>{let m=i.indexOf("=");if(m===-1)return{key:null,value:i.trim()};let x=i.slice(m+1);return{key:i.slice(0,m).trim(),value:`${x.startsWith(`
`)?`
`:""}${x.trim()}`}});this.parameters=h}getStyle(){for(let[s,o]of Object.entries(this.defaultTemplateStyles))for(let h of o)if(this.name.toLowerCase().startsWith(h))return Number.parseInt(s)}format(){this.fullText||this.parse();let s=this.getStyle();if(s===void 0)return this.fullText;let o=[`{{${this.name}`];if(s===0||s===1){let i=0;s===1&&(i=Math.max(...this.parameters.map(m=>m.key?.length??0)));for(let m of this.parameters)o.push(`| ${m.key?`${m.key.padEnd(i)} = `:""}${m.value}`)}else for(let i of this.parameters)i.value&&o.push(`|${i.key?`${i.key}=`:""}${i.value}`);o.push("}}"),o.length===2?(o[0]+="}}",o.pop()):s===3&&(o[o.length-2]+="}}",o.pop());let h=o.join(s===0||s===1?`
`:s===3?" ":"");for(let i of this.subTemplates)h=h.replace(this.placeholderStrings[0],i.format());return h}}let c=[],u=[],g=!1,l=!1,a=!1,n=0;function r(t,s=!0){let o=e.slice(n,n+t.length)===t;return o&&s&&(n+=t.length),o}for(;n<e.length;)if(r("<nowiki>"))l=!0;else if(r("</nowiki>"))l=!1;else if(r("<!--"))a=!0;else if(r("-->"))a=!1;else if(!l&&!a)if(r("[["))g=!0;else if(g&&r("]]"))g=!1;else if(r("{{")){let t=new p(n-2);u.length>0&&(t.isNested=!0,u.at(-1)?.subTemplates.push(t)),u.push(t)}else if(r("}}")){let t=u.pop();if(!t)continue;t.location.end=n,c.push(t)}else n++;else n++;let d=e;for(let t of c)t.isNested||(t.parse(),d=d.replace(t.fullText,t.format()));return d}})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9hcnRpY2xlLWNsZWFuZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImRlY2xhcmUgZ2xvYmFsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhbmVvdXMtY2xhc3NcbiAgICBjbGFzcyBWZVJhbmdlIHtcbiAgICAgICAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpO1xuICAgIH1cblxuICAgIGNsYXNzIFZlRnJhZ21lbnQge1xuICAgICAgICBpbnNlcnRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgfVxuXG4gICAgY2xhc3MgVmVTdXJmYWNlTW9kZWwge1xuICAgICAgICBnZXRMaW5lYXJGcmFnbWVudChyYW5nZTogVmVSYW5nZSk6IFZlRnJhZ21lbnQ7XG4gICAgICAgIGdldFJhbmdlRnJvbVNvdXJjZU9mZnNldHMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBWZVJhbmdlO1xuICAgICAgICBzZXRTZWxlY3Rpb24oc2VsZWN0aW9uOiBWZUxpbmVhclNlbGVjdGlvbik6IHZvaWQ7XG4gICAgfVxuXG4gICAgY2xhc3MgVmVUYXJnZXQge1xuICAgICAgICBnZXRTdXJmYWNlKCk6IHsgZ2V0TW9kZWwoKTogVmVTdXJmYWNlTW9kZWwgfTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhbmVvdXMtY2xhc3NcbiAgICBjbGFzcyBWZUxpbmVhclNlbGVjdGlvbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHJhbmdlOiBWZVJhbmdlKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZToge1xuICAgICAgICBSYW5nZTogdHlwZW9mIFZlUmFuZ2U7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgIGRtOiB7IExpbmVhclNlbGVjdGlvbjogdHlwZW9mIFZlTGluZWFyU2VsZWN0aW9uIH07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgIGluaXQ/OiB7IHRhcmdldDogVmVUYXJnZXQgfTtcbiAgICB9O1xufVxuXG5leHBvcnQge307XG5cbigoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgPCAwKSByZXR1cm47IC8vIERvbid0IHJ1biBpbiB2aXJ0dWFsIG5hbWVzcGFjZXNcbiAgICBpZiAoIW13LmNvbmZpZy5nZXQoJ3dnSXNQcm9iYWJseUVkaXRhYmxlJykpIHJldHVybjsgLy8gRG9uJ3QgcnVuIGlmIHVzZXIgY2FuJ3QgZWRpdCBwYWdlXG5cbiAgICBtdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdqcXVlcnkudGV4dFNlbGVjdGlvbiddLCAoKSA9PiB7XG4gICAgICAgIG13LnV0aWwuYWRkQ1NTKGBcbiNhcnRpY2xlLWNsZWFuZXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjb250ZW50Omhhcygjd3BUZXh0Ym94MSkgI2FydGljbGUtY2xlYW5lciB7XG4gICAgZGlzcGxheTogdW5zZXQ7XG59YCk7XG5cbiAgICAgICAgY29uc3QgbGluayA9IG13LnV0aWwuYWRkUG9ydGxldExpbmsoXG4gICAgICAgICAgICBtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtaW5lcnZhJyA/ICdwLW5hdmlnYXRpb24nIDogJ3AtY2FjdGlvbnMnLFxuICAgICAgICAgICAgJyMnLFxuICAgICAgICAgICAgJ1BlcmZvcm0gYXJ0aWNsZSBjbGVhbnVwJyxcbiAgICAgICAgICAgICdhcnRpY2xlLWNsZWFuZXInLFxuICAgICAgICApITtcblxuICAgICAgICBsZXQgc2hvdWxkQWRkU2NyaXB0TWVzc2FnZSA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IHNjcmlwdE1lc3NhZ2UgPSAnQ2xlYW5lZCB1cCBhcnRpY2xlIGNvbnRlbnQgKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL2FydGljbGUtY2xlYW5lcnxhcnRpY2xlLWNsZWFuZXJdXSknO1xuXG4gICAgICAgIG13Lmhvb2soJ3ZlLnNhdmVEaWFsb2cuc3RhdGVDaGFuZ2VkJykuYWRkKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzaG91bGRBZGRTY3JpcHRNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MVGV4dEFyZWFFbGVtZW50PignLnZlLXVpLW13U2F2ZURpYWxvZy1zdW1tYXJ5IHRleHRhcmVhJykhO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5SW5wdXQudmFsdWUuaW5jbHVkZXMoc2NyaXB0TWVzc2FnZS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQudmFsdWUpIHN1bW1hcnlJbnB1dC52YWx1ZSArPSBgOyAke3NjcmlwdE1lc3NhZ2UuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBzY3JpcHRNZXNzYWdlLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc3VtbWFyeUlucHV0LnZhbHVlID0gc2NyaXB0TWVzc2FnZTtcblxuICAgICAgICAgICAgICAgIHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgZWRpdEJveCA9ICQoJyN3cFRleHRib3gxJyk7XG4gICAgICAgICAgICBpZiAoZWRpdEJveC5sZW5ndGggPT09IDApIHJldHVybiBtdy5ub3RpZnkoJ0VkaXQgYm94IG5vdCBmb3VuZCEnLCB7IHR5cGU6ICdlcnJvcicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcblxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdnZXRDb250ZW50cycpO1xuXG4gICAgICAgICAgICBsZXQgZmluYWxUZXh0ID0gb3JpZ2luYWxUZXh0O1xuXG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU2VjdGlvbkhlYWRlcnMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBNYWdpY1dvcmRzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cENhdGVnb3JpZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBMaW5rcyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFN0cmF5TWFya3VwKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU3BhY2luZyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gZm9ybWF0VGVtcGxhdGVzKGZpbmFsVGV4dCk7XG5cbiAgICAgICAgICAgIGlmIChvcmlnaW5hbFRleHQgPT09IGZpbmFsVGV4dCkgbXcubm90aWZ5KCdObyBjaGFuZ2VzIHRvIGJlIG1hZGUgdG8gdGhlIGFydGljbGUhJywgeyB0eXBlOiAnd2FybicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2ZS5pbml0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1cmZhY2VNb2RlbCA9IHZlLmluaXQudGFyZ2V0LmdldFN1cmZhY2UoKS5nZXRNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IHN1cmZhY2VNb2RlbC5nZXRMaW5lYXJGcmFnbWVudChzdXJmYWNlTW9kZWwuZ2V0UmFuZ2VGcm9tU291cmNlT2Zmc2V0cygwLCBvcmlnaW5hbFRleHQubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50Lmluc2VydENvbnRlbnQoZmluYWxUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgc3VyZmFjZU1vZGVsLnNldFNlbGVjdGlvbihuZXcgdmUuZG0uTGluZWFyU2VsZWN0aW9uKG5ldyB2ZS5SYW5nZSgwLCAwKSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRCb3gudGV4dFNlbGVjdGlvbignc2V0Q29udGVudHMnLCBmaW5hbFRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGVkaXRCb3gudGV4dFNlbGVjdGlvbignc2V0U2VsZWN0aW9uJywgeyBzdGFydDogMCB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtdy5ub3RpZnkoJ0FydGljbGUgY2xlYW51cCBjb21wbGV0ZSEnLCB7IHR5cGU6ICdzdWNjZXNzJywgYXV0b0hpZGVTZWNvbmRzOiAnc2hvcnQnIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PignI3dwU3VtbWFyeScpO1xuICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5SW5wdXQudmFsdWUuaW5jbHVkZXMoc2NyaXB0TWVzc2FnZS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeUlucHV0LnZhbHVlKSBzdW1tYXJ5SW5wdXQudmFsdWUgKz0gYDsgJHtzY3JpcHRNZXNzYWdlLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc2NyaXB0TWVzc2FnZS5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzdW1tYXJ5SW5wdXQudmFsdWUgPSBzY3JpcHRNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBzaG91bGRBZGRTY3JpcHRNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59KSgpO1xuXG4vKipcbiAqIENsZWFucyB1cCBzZWN0aW9uIGhlYWRlcnMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU2VjdGlvbkhlYWRlcnMoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgY29tbW9uUmVwbGFjZW1lbnRzID0ge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbiAgICAgICAgJ1NlZSBhbHNvJzogWydhbHNvIHNlZSddLFxuICAgICAgICAnUmVmZXJlbmNlcyc6IFsncmVmZXJlbmNlJywgJ3NvdXJjZScsICdzb3VyY2VzJywgJ2NpdGF0aW9uJywgJ2NpdGF0aW9ucyddLFxuICAgICAgICAnRnVydGhlciByZWFkaW5nJzogWydmdXJ0aGVyIHJlYWRpbmcnXSxcbiAgICAgICAgJ0V4dGVybmFsIGxpbmtzJzogWydleHRlcm5hbCBsaW5rJywgJ3dlYmxpbmsnLCAnd2VibGlua3MnXSxcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbiAgICB9O1xuXG4gICAgY29uc3QgY29tbW9uTWlzY2FwaXRhbGl6ZWRXb3JkcyA9IFsnbGlmZScsICdjYXJlZXInXTtcblxuICAgIGNvbnN0IHJldmVyc2VDb21tb25SZXBsYWNlbWVudHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGNvbW1vblJlcGxhY2VtZW50cykuZmxhdE1hcCgoW2tleSwgdmFsdWVzXSkgPT4gdmFsdWVzLm1hcCgodmFsdWUpID0+IFt2YWx1ZSwga2V5XSkpLFxuICAgICk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gY29udGVudC5tYXRjaEFsbCgvXFxuKyg/PHN0YXJ0TWFya3VwPj0rKSAqKD88bmFtZT4uKj8pICooPzxlbmRNYXJrdXA+PSspXFxuKy9nKTtcblxuICAgIGNvbnN0IHBhcnNlZEhlYWRlcnMgPSBbLi4uaGVhZGVyc10ubWFwKChoZWFkZXIpID0+IHtcbiAgICAgICAgbGV0IHsgbmFtZSB9ID0gaGVhZGVyLmdyb3VwcyE7XG4gICAgICAgIGNvbnN0IHsgc3RhcnRNYXJrdXAsIGVuZE1hcmt1cCB9ID0gaGVhZGVyLmdyb3VwcyE7XG5cbiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZUFsbCgvJ3szfS9nLCAnJyk7XG5cbiAgICAgICAgY29uc3QgbGlua3MgPSBuYW1lLm1hdGNoQWxsKC9cXFtcXFsoLis/KV1dL2cpLnRvQXJyYXkoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGxpbmsgb2YgbGlua3MpIG5hbWUgPSBuYW1lLnJlcGxhY2UobGlua1swXSwgbGlua1sxXS5zcGxpdCgnfCcpLmF0KC0xKSEpO1xuXG4gICAgICAgIGNvbnN0IGRlcHRoID0gTWF0aC5tYXgoc3RhcnRNYXJrdXAubGVuZ3RoLCBlbmRNYXJrdXAubGVuZ3RoLCAyKTtcblxuICAgICAgICByZXR1cm4geyBuYW1lLCBkZXB0aCwgb3JpZ2luYWw6IGhlYWRlclswXSB9O1xuICAgIH0pO1xuXG4gICAgY29uc3QgdGl0bGVTcGFjZXIgPSAvXj0rIHwgPSskLy50ZXN0KHBhcnNlZEhlYWRlcnNbMF0ub3JpZ2luYWwpID8gJyAnIDogJyc7XG5cbiAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBwYXJzZWRIZWFkZXJzKSB7XG4gICAgICAgIGNvbnN0IHJlcGxhY2VkTmFtZSA9XG4gICAgICAgICAgICBoZWFkZXIubmFtZS50b0xvd2VyQ2FzZSgpIGluIHJldmVyc2VDb21tb25SZXBsYWNlbWVudHMgPyByZXZlcnNlQ29tbW9uUmVwbGFjZW1lbnRzW2hlYWRlci5uYW1lLnRvTG93ZXJDYXNlKCldIDogaGVhZGVyLm5hbWU7XG5cbiAgICAgICAgbGV0IGNhcGl0YWxpemVkTmFtZSA9IHJlcGxhY2VkTmFtZTtcblxuICAgICAgICBmb3IgKGNvbnN0IHdvcmQgb2YgY29tbW9uTWlzY2FwaXRhbGl6ZWRXb3JkcykgY2FwaXRhbGl6ZWROYW1lID0gY2FwaXRhbGl6ZWROYW1lLnJlcGxhY2VBbGwobmV3IFJlZ0V4cChgXFxcXGIke3dvcmR9XFxcXGJgLCAnZ2knKSwgd29yZCk7XG5cbiAgICAgICAgY2FwaXRhbGl6ZWROYW1lID0gY2FwaXRhbGl6ZWROYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FwaXRhbGl6ZWROYW1lLnNsaWNlKDEpO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGAkeyc9Jy5yZXBlYXQoaGVhZGVyLmRlcHRoKX0ke3RpdGxlU3BhY2VyfSR7Y2FwaXRhbGl6ZWROYW1lfSR7dGl0bGVTcGFjZXJ9JHsnPScucmVwZWF0KGhlYWRlci5kZXB0aCl9YDtcblxuICAgICAgICBpZiAoaGVhZGVyLm9yaWdpbmFsICE9PSBvdXRwdXQpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoaGVhZGVyLm9yaWdpbmFsLCBgXFxuXFxuJHtvdXRwdXR9XFxuYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB1bm5lY2Vzc2FyeSBtYWdpYyB3b3JkcyBmcm9tIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cE1hZ2ljV29yZHMoY29udGVudDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZUFsbCgvX18oSU5ERVh8Tk9JTkRFWHxORVdTRUNUSU9OTElOS3xOT05FV1NFQ1RJT05MSU5LfE5PRURJVFNFQ1RJT058RElTQU1CSUd8U1RBVElDUkVESVJFQ1R8Rk9SQ0VUT0MpX19cXG4qL2csICcnKTtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgRElTUExBWVRJVExFcyBhbmQgREVGQVVMVFNPUlRzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cERpc3BsYXl0aXRsZXNBbmREZWZhdWx0c29ydHMoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgdGFncyA9IGNvbnRlbnQubWF0Y2hBbGwoL3t7KGRpc3BsYXl0aXRsZXxkZWZhdWx0c29ydClbOnxdKC4qPyl9fS9naSk7XG5cbiAgICBjb25zdCBwYXJzZWRUYWdzID0gWy4uLnRhZ3NdLm1hcCgodGFnKSA9PiB7XG4gICAgICAgIGNvbnN0IFtmdWxsVGFnLCB0eXBlLCB2YWx1ZV0gPSB0YWc7XG5cbiAgICAgICAgcmV0dXJuIHsgdHlwZTogdHlwZS50b1VwcGVyQ2FzZSgpLCB2YWx1ZSwgb3JpZ2luYWw6IGZ1bGxUYWcgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGN1cnJlbnRUaXRsZSA9IG13LlRpdGxlLm5ld0Zyb21UZXh0KG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSkhO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgcGFyc2VkVGFncykge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFRhZ1JlZ2V4ID0gbmV3IFJlZ0V4cChgJHt0YWcub3JpZ2luYWwucmVwbGFjZUFsbCgvWyQoKSorLj9bXFxcXFxcXV57fH1dL2csICdcXFxcJCYnKX1cXG4qYCwgJ2cnKTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IG13LlRpdGxlLm1ha2VUaXRsZShjdXJyZW50VGl0bGUuZ2V0TmFtZXNwYWNlSWQoKSwgdGFnLnZhbHVlLmluY2x1ZGVzKCc6JykgPyB0YWcudmFsdWUuc3BsaXQoJzonKVsxXSA6IHRhZy52YWx1ZSkhO1xuXG4gICAgICAgIGlmIChjdXJyZW50VGl0bGUudG9UZXh0KCkgPT09IHRpdGxlLnRvVGV4dCgpKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG9yaWdpbmFsVGFnUmVnZXgsICcnKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IGB7eyR7dGFnLnR5cGV9OiR7dGl0bGUudG9UZXh0KCl9fX1cXG5gO1xuXG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUYWdSZWdleCwgbmV3VGV4dCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGNhdGVnb3JpZXMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwQ2F0ZWdvcmllcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKC8oXFxbXFxbfH19KTo/Y2F0ZWdvcnk6KC4qPykoXV18fX0pL2dpLCAnW1tDYXRlZ29yeTokMl1dJyk7XG59XG5cbmludGVyZmFjZSBMaW5rSW5mb3JtYXRpb24ge1xuICAgIHN0YXJ0OiBudW1iZXI7XG4gICAgZW5kOiBudW1iZXI7XG4gICAgaXNOZXN0ZWQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGxpbmtzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cExpbmtzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IGNsb3NlZExpbmtzOiBMaW5rSW5mb3JtYXRpb25bXSA9IFtdO1xuICAgIGNvbnN0IGxpbmtzOiBMaW5rSW5mb3JtYXRpb25bXSA9IFtdO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0gc2hvdWxkSW5jcmVtZW50IFdoZXRoZXIgdG8gaW5jcmVtZW50IHRoZSBjdXJyZW50IGxvY2F0aW9uIGlmIHRoZSBzdHJpbmcgaXMgZm91bmQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBdFN0cmluZyhkZXNpcmVkU3RyaW5nOiBzdHJpbmcsIHNob3VsZEluY3JlbWVudCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgaXNBdFN0cmluZyA9IGNvbnRlbnQuc2xpY2UoY3VycmVudExvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gKyBkZXNpcmVkU3RyaW5nLmxlbmd0aCkgPT09IGRlc2lyZWRTdHJpbmc7XG5cbiAgICAgICAgaWYgKGlzQXRTdHJpbmcgJiYgc2hvdWxkSW5jcmVtZW50KSBjdXJyZW50TG9jYXRpb24gKz0gZGVzaXJlZFN0cmluZy5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIGlzQXRTdHJpbmc7XG4gICAgfVxuXG4gICAgd2hpbGUgKGN1cnJlbnRMb2NhdGlvbiA8IGNvbnRlbnQubGVuZ3RoKVxuICAgICAgICBpZiAoaXNBdFN0cmluZygnW1snKSkgbGlua3MucHVzaCh7IHN0YXJ0OiBjdXJyZW50TG9jYXRpb24gLSAyLCBlbmQ6IC0xLCBpc05lc3RlZDogbGlua3MubGVuZ3RoID4gMCB9KTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnXV0nKSkge1xuICAgICAgICAgICAgY29uc3QgbGFzdExpbmsgPSBsaW5rcy5wb3AoKTtcbiAgICAgICAgICAgIGlmICghbGFzdExpbmspIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICBsYXN0TGluay5lbmQgPSBjdXJyZW50TG9jYXRpb247XG5cbiAgICAgICAgICAgIGNsb3NlZExpbmtzLnB1c2gobGFzdExpbmspO1xuICAgICAgICB9IGVsc2UgY3VycmVudExvY2F0aW9uKys7XG5cbiAgICBjb25zdCBuZXdMaW5rQ29udGVudDogW0xpbmtJbmZvcm1hdGlvbiwgc3RyaW5nXVtdID0gW107XG5cbiAgICBjb25zdCBuYW1lc3BhY2VOYW1lcyA9IE9iamVjdC52YWx1ZXMobXcuY29uZmlnLmdldCgnd2dGb3JtYXR0ZWROYW1lc3BhY2VzJykpO1xuXG4gICAgZm9yIChjb25zdCBsaW5rTG9jYXRpb24gb2YgY2xvc2VkTGlua3MpIHtcbiAgICAgICAgY29uc3QgaW5uZXJMaW5rID0gY29udGVudC5zbGljZShsaW5rTG9jYXRpb24uc3RhcnQgKyAyLCBsaW5rTG9jYXRpb24uZW5kIC0gMik7XG5cbiAgICAgICAgY29uc3QgW3VucGFyc2VkTGluaywgLi4ucGFyYW1ldGVyc10gPSBpbm5lckxpbmsuc3BsaXQoJ3wnKTtcblxuICAgICAgICBsZXQgbGluayA9IHVucGFyc2VkTGluay5yZXBsYWNlQWxsKCdfJywgJyAnKS50cmltKCk7XG4gICAgICAgIGxldCBhbHRUZXh0ID0gcGFyYW1ldGVycy5qb2luKCd8Jyk7XG4gICAgICAgIGFsdFRleHQgPSBhbHRUZXh0ID09PSAnICcgPyAnICcgOiBhbHRUZXh0LnRyaW0oKTtcblxuICAgICAgICBjb25zdCBpc0ZpcnN0Q2hhcmFjdGVyQ29sb24gPSBsaW5rLnN0YXJ0c1dpdGgoJzonKTtcbiAgICAgICAgaWYgKGlzRmlyc3RDaGFyYWN0ZXJDb2xvbikgbGluayA9IGxpbmsuc2xpY2UoMSk7XG5cbiAgICAgICAgbGV0IHNob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGxpbmtVcHBlcmNhc2VTdGFydCA9IGxpbmsuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBsaW5rLnNsaWNlKDEpO1xuICAgICAgICBjb25zdCBsaW5rTG93ZXJjYXNlU3RhcnQgPSBsaW5rLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgbGluay5zbGljZSgxKTtcblxuICAgICAgICBpZiAobGluay5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgICBpZiAobGlua1VwcGVyY2FzZVN0YXJ0LnN0YXJ0c1dpdGgoJ0ltYWdlOicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3RhcnRVcHBlcmNhc2UgPSBsaW5rLnN0YXJ0c1dpdGgoJ0ltYWdlOicpO1xuXG4gICAgICAgICAgICAgICAgbGluayA9IGAke3Nob3VsZFN0YXJ0VXBwZXJjYXNlID8gJ0YnIDogJ2YnfWlsZToke2xpbmsuc2xpY2UoNil9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzRmlyc3RDaGFyYWN0ZXJDb2xvbiAmJiBbJ0ltYWdlJywgJ0ZpbGUnLCAnQ2F0ZWdvcnknXS5pbmNsdWRlcyhsaW5rVXBwZXJjYXNlU3RhcnQuc3BsaXQoJzonKVswXSkpXG4gICAgICAgICAgICAgICAgc2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhZnRlckxpbmtUZXh0ID0gJyc7XG5cbiAgICAgICAgaWYgKGxpbmsgPT09IGFsdFRleHQpIGFsdFRleHQgPSAnJztcbiAgICAgICAgZWxzZSBpZiAobmV3IFJlZ0V4cChgXiR7bGluay5yZXBsYWNlQWxsKC9bJCgpKisuP1tcXFxcXFxdXnt8fV0vZywgJ1xcXFwkJicpfVthLXpdKyRgKS50ZXN0KGFsdFRleHQpKSB7XG4gICAgICAgICAgICBhZnRlckxpbmtUZXh0ID0gYWx0VGV4dC5zbGljZShsaW5rLmxlbmd0aCk7XG4gICAgICAgICAgICBhbHRUZXh0ID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IG5ld0xpbmsgb2YgW2xpbmtVcHBlcmNhc2VTdGFydCwgbGlua0xvd2VyY2FzZVN0YXJ0XSlcbiAgICAgICAgICAgIGlmIChuZXdMaW5rID09PSBhbHRUZXh0KSB7XG4gICAgICAgICAgICAgICAgbGluayA9IG5ld0xpbms7XG4gICAgICAgICAgICAgICAgYWx0VGV4dCA9ICcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXcgUmVnRXhwKGBeJHtuZXdMaW5rLnJlcGxhY2VBbGwoL1skKCkqKy4/W1xcXFxcXF1ee3x9XS9nLCAnXFxcXCQmJyl9W2Etel0rJGApLnRlc3QoYWx0VGV4dCkpIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gbmV3TGluaztcbiAgICAgICAgICAgICAgICBhZnRlckxpbmtUZXh0ID0gYWx0VGV4dC5zbGljZShuZXdMaW5rLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYWx0VGV4dCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIGxldCBuYW1lc3BhY2UgPSBsaW5rLnNwbGl0KCc6JylbMF07XG4gICAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWVzcGFjZS5zbGljZSgxKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoYWx0VGV4dCAmJiBsaW5rLmluY2x1ZGVzKCc6JykgJiYgbmFtZXNwYWNlTmFtZXMuaW5jbHVkZXMobmFtZXNwYWNlKSkgfHxcbiAgICAgICAgICAgIGxpbmsuc3RhcnRzV2l0aCgnZmlsZTonKSB8fFxuICAgICAgICAgICAgbGluay5zdGFydHNXaXRoKCdjYXRlZ29yeTonKVxuICAgICAgICApXG4gICAgICAgICAgICBsaW5rID0gbGluay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGxpbmsuc2xpY2UoMSk7XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYFtbJHtzaG91bGRGaXJzdENoYXJhY3RlckJlQ29sb24gPyAnOicgOiAnJ30ke2xpbmt9JHthbHRUZXh0ID8gYHwke2FsdFRleHR9YCA6ICcnfV1dJHthZnRlckxpbmtUZXh0fWA7XG5cbiAgICAgICAgbmV3TGlua0NvbnRlbnQucHVzaChbbGlua0xvY2F0aW9uLCBvdXRwdXRdKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBsb29wQ291bnRlciA9IDA7IGxvb3BDb3VudGVyIDwgMjsgbG9vcENvdW50ZXIrKylcbiAgICAgICAgZm9yIChjb25zdCBbbGlua0RhdGEsIGxpbmtDb250ZW50XSBvZiBuZXdMaW5rQ29udGVudCkge1xuICAgICAgICAgICAgaWYgKGxvb3BDb3VudGVyID09PSAwICYmIGxpbmtEYXRhLmlzTmVzdGVkKSBjb250aW51ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGxvb3BDb3VudGVyID09PSAxICYmICFsaW5rRGF0YS5pc05lc3RlZCkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpY2UoMCwgbGlua0RhdGEuc3RhcnQpICsgbGlua0NvbnRlbnQucGFkU3RhcnQobGlua0RhdGEuZW5kIC0gbGlua0RhdGEuc3RhcnQsICdcXDAnKSArIGNvbnRlbnQuc2xpY2UobGlua0RhdGEuZW5kKTtcbiAgICAgICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZUFsbCgnXFwwJywgJycpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgc3RyYXkgbWFya3VwIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFN0cmF5TWFya3VwKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IHN0cmF5TWFya3VwUmVnZXhlcyA9IFtcbiAgICAgICAgLycrKEJvbGR8SXRhbGljKSggdGV4dCk/JysgKi9nLFxuICAgICAgICAvKDxiaWc+KStCaWcoIHRleHQpPyg8XFwvYmlnPikrICovZyxcbiAgICAgICAgLyg8c21hbGw+KStTbWFsbCggdGV4dCk/KDxcXC9zbWFsbD4pKyAqL2csXG4gICAgICAgIC8oPHN1cD4pK1N1cGVyc2NyaXB0KCB0ZXh0KT8oPFxcL3N1cD4pKyAqL2csXG4gICAgICAgIC8oPHN1Yj4pK1N1YnNjcmlwdCggdGV4dCk/KDxcXC9zdWI+KSsgKi9nLFxuICAgICAgICAvKDxzPikrU3RyaWtldGhyb3VnaCg8XFwvcz4pKyAqL2csXG4gICAgICAgIC8oPHU+KStVbmRlcmxpbmUoPFxcL3U+KSsgKi9nLFxuICAgICAgICAvKDxjb2RlPikrQ29tcHV0ZXIgY29kZSg8XFwvY29kZT4pKyAqL2csXG4gICAgICAgIC8oPG5vd2lraT4pK0luc2VydCBub24tZm9ybWF0dGVkIHRleHQgaGVyZSg8XFwvbm93aWtpPikrICovZyxcbiAgICAgICAgLz0rIEhlYWRpbmcgdGV4dCA9KyAqL2csXG4gICAgICAgIC9cXCogQnVsbGV0ZWQgbGlzdCBpdGVtICovZyxcbiAgICAgICAgLyMgTnVtYmVyZWQgbGlzdCBpdGVtICovZyxcbiAgICAgICAgLzxnYWxsZXJ5PlxcbkV4YW1wbGUuanBnXFx8Q2FwdGlvbjFcXG5FeGFtcGxlLmpwZ1xcfENhcHRpb24yXFxuPFxcL2dhbGxlcnk+ICovZyxcbiAgICAgICAgLyNSRURJUkVDVCBcXFtcXFtUYXJnZXQgcGFnZSBuYW1lXV0gKi9nLFxuICAgICAgICAvPCEtLSBJbnZpc2libGUgY29tbWVudCAtLT4gKi9nLFxuICAgICAgICAvPG5vaW5jbHVkZT5cXHMqPFxcL25vaW5jbHVkZT4gKi9nLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHJlZ2V4IG9mIHN0cmF5TWFya3VwUmVnZXhlcykgd2hpbGUgKHJlZ2V4LnRlc3QoY29udGVudCkpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnZXgsICcnKTtcblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBzcGFjaW5nIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFNwYWNpbmcoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxcYnxcXHB7UHVuY3R1YXRpb259KSB7Mix9KFxcYikvZ3UsICckMSAkMicpOyAvLyBSZW1vdmUgZXh0cmEgc3BhY2VzIGJldHdlZW4gd29yZHMgYW5kIHNlbnRlbmNlc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyhcXG58XikgK3wgKyhcXG58JCkvZywgJyQxJDInKTsgLy8gUmVtb3ZlIGV4dHJhIHNwYWNlcyBhdCB0aGUgc3RhcnQgb3IgZW5kIG9mIGxpbmVzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXFxuezMsfS9nLCAnXFxuXFxuJyk7IC8vIFJlbW92ZSBleHRyYSBuZXdsaW5lc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL1xccyooe3tbXn1dKnN0dWJ9fSkvaSwgJ1xcblxcblxcbiQxJyk7IC8vIEVuc3VyZSB0aGVyZSBhcmUgdGhyZWUgbmV3bGluZXMgYmVmb3JlIHRoZSBmaXJzdCBzdHViIHRlbXBsYXRlXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXFxzKyQvZywgJycpOyAvLyBSZW1vdmUgdHJhaWxpbmcgc3BhY2VzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxcbnxeKShbIypdKSAqL2csICckMSQyICcpOyAvLyBFbnN1cmUgdGhlcmUgaXMgYSBzcGFjZSBhZnRlciBhIGJ1bGxldCBvciBoYXNoIGluIGEgbGlzdCBpdGVtXG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBGb3JtYXRzIHRlbXBsYXRlIHNwYWNpbmcgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGZvcm1hdC5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0VGVtcGxhdGVzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGVudW0gRm9ybWF0U3R5bGUge1xuICAgICAgICBFeHBhbmRlZCxcbiAgICAgICAgRXhwYW5kZWRBbGlnbmVkLFxuICAgICAgICBNaW5pbWl6ZWQsXG4gICAgICAgIE1pbmltaXplZFNwYWNlZCxcbiAgICB9XG5cbiAgICBjbGFzcyBUZW1wbGF0ZSB7XG4gICAgICAgIHB1YmxpYyBsb2NhdGlvbjogeyBzdGFydDogbnVtYmVyOyBlbmQ/OiBudW1iZXIgfTtcbiAgICAgICAgcHVibGljIGlzTmVzdGVkID0gZmFsc2U7XG5cbiAgICAgICAgcHVibGljIGZ1bGxUZXh0Pzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIGZ1bGxUZXh0RXNjYXBlZD86IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSBuYW1lPzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIHBhcmFtZXRlcnM6IHsga2V5OiBzdHJpbmcgfCBudWxsOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuICAgICAgICBwdWJsaWMgc3ViVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG5cbiAgICAgICAgcHJpdmF0ZSBwbGFjZWhvbGRlclN0cmluZ3MgPSBbJ1xcdXtGMDAwMH0nLCAnXFx1ezEwRkZGRn0nXTtcblxuICAgICAgICBwcml2YXRlIHBpcGVFc2NhcGVSZWdleGVzID0gWy8oXFxbXFxbW15cXF1dKj8pXFx8KC4qP11dKS9nLCAvKDwhLS0uKj8pXFx8KC4qPy0tPikvZywgLyg8bm93aWtpPi4qPylcXHwoLio/PFxcL25vd2lraT4pL2ddO1xuXG4gICAgICAgIHByaXZhdGUgZGVmYXVsdFRlbXBsYXRlU3R5bGVzID0ge1xuICAgICAgICAgICAgW0Zvcm1hdFN0eWxlLkV4cGFuZGVkQWxpZ25lZF06IFtcbiAgICAgICAgICAgICAgICAnaW5mb2JveCcsXG4gICAgICAgICAgICAgICAgJ3NwZWNpZXNib3gnLFxuICAgICAgICAgICAgICAgICd0YXhvYm94JyxcbiAgICAgICAgICAgICAgICAnYXV0b21hdGljIHRheG9ib3gnLFxuICAgICAgICAgICAgICAgICdvc20gbG9jYXRpb24gbWFwJyxcbiAgICAgICAgICAgICAgICAnbW90b3JzcG9ydCBzZWFzb24nLFxuICAgICAgICAgICAgICAgICdibG9ja3F1b3RlJyxcbiAgICAgICAgICAgICAgICAncXVvdGUgYm94JyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbRm9ybWF0U3R5bGUuTWluaW1pemVkXTogWydjb29yZCcsICdzdGFydCBkYXRlJywgJ2VuZCBkYXRlJywgJ2xhbmcnLCAnbGFuZ3gnXSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzdGFydExvY2F0aW9uOiBudW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSB7IHN0YXJ0OiBzdGFydExvY2F0aW9uIH07XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgcGFyc2UoKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUZXh0ID0gY29udGVudC5zbGljZSh0aGlzLmxvY2F0aW9uLnN0YXJ0LCB0aGlzLmxvY2F0aW9uLmVuZCk7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUZXh0RXNjYXBlZCA9IHRoaXMuZnVsbFRleHQ7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViVGVtcGxhdGUgb2YgdGhpcy5zdWJUZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgICAgICBzdWJUZW1wbGF0ZS5wYXJzZSgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5mdWxsVGV4dEVzY2FwZWQgPSB0aGlzLmZ1bGxUZXh0RXNjYXBlZC5yZXBsYWNlKHN1YlRlbXBsYXRlLmZ1bGxUZXh0ISwgdGhpcy5wbGFjZWhvbGRlclN0cmluZ3NbMF0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdHJpbW1lZElubmVyVGV4dCA9IHRoaXMuZnVsbFRleHRFc2NhcGVkLnNsaWNlKDIsIC0yKS50cmltKCk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgcGlwZUVzY2FwZVJlZ2V4IG9mIHRoaXMucGlwZUVzY2FwZVJlZ2V4ZXMpXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBpcGVFc2NhcGVSZWdleC50ZXN0KHRyaW1tZWRJbm5lclRleHQpKVxuICAgICAgICAgICAgICAgICAgICB0cmltbWVkSW5uZXJUZXh0ID0gdHJpbW1lZElubmVyVGV4dC5yZXBsYWNlQWxsKHBpcGVFc2NhcGVSZWdleCwgYCQxJHt0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1sxXX0kMmApO1xuXG4gICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gdHJpbW1lZElubmVyVGV4dC5zcGxpdCgnfCcpLm1hcCgocGFyYW1ldGVyKSA9PiBwYXJhbWV0ZXIucmVwbGFjZUFsbCh0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1sxXSwgJ3wnKS50cmltKCkpO1xuXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBwYXJhbWV0ZXJzLnNoaWZ0KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNwbGl0UGFyYW1ldGVycyA9IHBhcmFtZXRlcnMubWFwKChwYXJhbWV0ZXJzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXF1YWxzTG9jYXRpb24gPSBwYXJhbWV0ZXJzLmluZGV4T2YoJz0nKTtcblxuICAgICAgICAgICAgICAgIGlmIChlcXVhbHNMb2NhdGlvbiA9PT0gLTEpIHJldHVybiB7IGtleTogbnVsbCwgdmFsdWU6IHBhcmFtZXRlcnMudHJpbSgpIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtZXRlcnMuc2xpY2UoZXF1YWxzTG9jYXRpb24gKyAxKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogcGFyYW1ldGVycy5zbGljZSgwLCBlcXVhbHNMb2NhdGlvbikudHJpbSgpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYCR7dmFsdWUuc3RhcnRzV2l0aCgnXFxuJykgPyAnXFxuJyA6ICcnfSR7dmFsdWUudHJpbSgpfWAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBzcGxpdFBhcmFtZXRlcnM7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdldFN0eWxlKCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZm9ybWF0U3R5bGUsIHRlbXBsYXRlUHJlZml4ZXNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGVmYXVsdFRlbXBsYXRlU3R5bGVzKSlcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRlbXBsYXRlUHJlZml4IG9mIHRlbXBsYXRlUHJlZml4ZXMpXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCh0ZW1wbGF0ZVByZWZpeCkpIHJldHVybiBOdW1iZXIucGFyc2VJbnQoZm9ybWF0U3R5bGUpIGFzIEZvcm1hdFN0eWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGZvcm1hdCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mdWxsVGV4dCkgdGhpcy5wYXJzZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuZ2V0U3R5bGUoKTtcbiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5mdWxsVGV4dCE7XG5cbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IFtge3ske3RoaXMubmFtZX1gXTtcblxuICAgICAgICAgICAgaWYgKHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZCB8fCBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlcXVpcmVkS2V5TGVuZ3RoID0gMDtcblxuICAgICAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZEtleUxlbmd0aCA9IE1hdGgubWF4KC4uLnRoaXMucGFyYW1ldGVycy5tYXAoKHBhcmFtZXRlcikgPT4gcGFyYW1ldGVyLmtleT8ubGVuZ3RoID8/IDApKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFyYW1ldGVyIG9mIHRoaXMucGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goYHwgJHtwYXJhbWV0ZXIua2V5ID8gYCR7cGFyYW1ldGVyLmtleS5wYWRFbmQocmVxdWlyZWRLZXlMZW5ndGgpfSA9IGAgOiAnJ30ke3BhcmFtZXRlci52YWx1ZX1gKTtcbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFyYW1ldGVyIG9mIHRoaXMucGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlci52YWx1ZSkgb3V0cHV0LnB1c2goYHwke3BhcmFtZXRlci5rZXkgPyBgJHtwYXJhbWV0ZXIua2V5fT1gIDogJyd9JHtwYXJhbWV0ZXIudmFsdWV9YCk7XG5cbiAgICAgICAgICAgIG91dHB1dC5wdXNoKCd9fScpO1xuXG4gICAgICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIG91dHB1dFswXSArPSAnfX0nO1xuXG4gICAgICAgICAgICAgICAgb3V0cHV0LnBvcCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdHlsZSA9PT0gRm9ybWF0U3R5bGUuTWluaW1pemVkU3BhY2VkKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGggLSAyXSArPSAnfX0nO1xuXG4gICAgICAgICAgICAgICAgb3V0cHV0LnBvcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgam9pbmVkT3V0cHV0ID0gb3V0cHV0LmpvaW4oXG4gICAgICAgICAgICAgICAgc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkIHx8IHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWRcbiAgICAgICAgICAgICAgICAgICAgPyAnXFxuJ1xuICAgICAgICAgICAgICAgICAgICA6IHN0eWxlID09PSBGb3JtYXRTdHlsZS5NaW5pbWl6ZWRTcGFjZWRcbiAgICAgICAgICAgICAgICAgICAgICA/ICcgJ1xuICAgICAgICAgICAgICAgICAgICAgIDogJycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YlRlbXBsYXRlIG9mIHRoaXMuc3ViVGVtcGxhdGVzKVxuICAgICAgICAgICAgICAgIGpvaW5lZE91dHB1dCA9IGpvaW5lZE91dHB1dC5yZXBsYWNlKHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzBdLCBzdWJUZW1wbGF0ZS5mb3JtYXQoKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBqb2luZWRPdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhbGxUZW1wbGF0ZXM6IFRlbXBsYXRlW10gPSBbXTtcblxuICAgIGNvbnN0IGluc2lkZVRlbXBsYXRlczogVGVtcGxhdGVbXSA9IFtdO1xuICAgIGxldCBpc0luc2lkZUxpbmsgPSBmYWxzZTtcbiAgICBsZXQgaXNJbnNpZGVOb3dpa2kgPSBmYWxzZTtcbiAgICBsZXQgaXNJbnNpZGVDb21tZW50ID0gZmFsc2U7XG5cbiAgICBsZXQgY3VycmVudExvY2F0aW9uID0gMDtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY29udGVudCBmb2xsb3dpbmcgdGhlIGN1cnJlbnQgbG9jYXRpb24gbWF0Y2hlcyB0aGUgZGVzaXJlZCBzdHJpbmcuXG4gICAgICogQHBhcmFtIGRlc2lyZWRTdHJpbmcgVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqIEBwYXJhbSBzaG91bGRJbmNyZW1lbnQgV2hldGhlciB0byBpbmNyZW1lbnQgdGhlIGN1cnJlbnQgbG9jYXRpb24gaWYgdGhlIHN0cmluZyBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZywgc2hvdWxkSW5jcmVtZW50ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZyAmJiBzaG91bGRJbmNyZW1lbnQpIGN1cnJlbnRMb2NhdGlvbiArPSBkZXNpcmVkU3RyaW5nLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gaXNBdFN0cmluZztcbiAgICB9XG5cbiAgICB3aGlsZSAoY3VycmVudExvY2F0aW9uIDwgY29udGVudC5sZW5ndGgpXG4gICAgICAgIGlmIChpc0F0U3RyaW5nKCc8bm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwvbm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8IS0tJykpIGlzSW5zaWRlQ29tbWVudCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJy0tPicpKSBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoIWlzSW5zaWRlTm93aWtpICYmICFpc0luc2lkZUNvbW1lbnQpXG4gICAgICAgICAgICBpZiAoaXNBdFN0cmluZygnW1snKSkgaXNJbnNpZGVMaW5rID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzSW5zaWRlTGluayAmJiBpc0F0U3RyaW5nKCddXScpKSBpc0luc2lkZUxpbmsgPSBmYWxzZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJ3t7JykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShjdXJyZW50TG9jYXRpb24gLSAyKTtcblxuICAgICAgICAgICAgICAgIGlmIChpbnNpZGVUZW1wbGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5pc05lc3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGluc2lkZVRlbXBsYXRlcy5hdCgtMSk/LnN1YlRlbXBsYXRlcy5wdXNoKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbnNpZGVUZW1wbGF0ZXMucHVzaCh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQXRTdHJpbmcoJ319JykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0VGVtcGxhdGUgPSBpbnNpZGVUZW1wbGF0ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXN0VGVtcGxhdGUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgbGFzdFRlbXBsYXRlLmxvY2F0aW9uLmVuZCA9IGN1cnJlbnRMb2NhdGlvbjtcblxuICAgICAgICAgICAgICAgIGFsbFRlbXBsYXRlcy5wdXNoKGxhc3RUZW1wbGF0ZSk7XG4gICAgICAgICAgICB9IGVsc2UgY3VycmVudExvY2F0aW9uKys7XG4gICAgICAgIGVsc2UgY3VycmVudExvY2F0aW9uKys7XG5cbiAgICBsZXQgbmV3Q29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICBmb3IgKGNvbnN0IHRlbXBsYXRlIG9mIGFsbFRlbXBsYXRlcylcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZS5pc05lc3RlZCkge1xuICAgICAgICAgICAgdGVtcGxhdGUucGFyc2UoKTtcblxuICAgICAgICAgICAgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQucmVwbGFjZSh0ZW1wbGF0ZS5mdWxsVGV4dCEsIHRlbXBsYXRlLmZvcm1hdCgpKTtcbiAgICAgICAgfVxuXG4gICAgcmV0dXJuIG5ld0NvbnRlbnQ7XG59XG4iXSwK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QkgsR0FBbUJFLEVBQWMsUUFFN0RELENBQ1gsQ0FFQSxLQUFPRCxFQUFrQjNCLEVBQVEsUUFDN0IsR0FBSTRCLEVBQVcsVUFBVSxFQUFHeUMsRUFBaUIsV0FDcEN6QyxFQUFXLFdBQVcsRUFBR3lDLEVBQWlCLFdBQzFDekMsRUFBVyxNQUFNLEVBQUcwQyxFQUFrQixXQUN0QzFDLEVBQVcsS0FBSyxFQUFHMEMsRUFBa0IsV0FDckMsQ0FBQ0QsR0FBa0IsQ0FBQ0MsRUFDekIsR0FBSTFDLEVBQVcsSUFBSSxFQUFHd0MsRUFBZSxXQUM1QkEsR0FBZ0J4QyxFQUFXLElBQUksRUFBR3dDLEVBQWUsV0FDakR4QyxFQUFXLElBQUksRUFBRyxDQUN2QixJQUFNMkMsRUFBVyxJQUFJbkIsRUFBU3pCLEVBQWtCLENBQUMsRUFFN0N3QyxFQUFnQixPQUFTLElBQ3pCSSxFQUFTLFNBQVcsR0FDcEJKLEVBQWdCLEdBQUcsRUFBRSxHQUFHLGFBQWEsS0FBS0ksQ0FBUSxHQUd0REosRUFBZ0IsS0FBS0ksQ0FBUSxDQUNqQyxTQUFXM0MsRUFBVyxJQUFJLEVBQUcsQ0FDekIsSUFBTTRDLEVBQWVMLEVBQWdCLElBQUksRUFDekMsR0FBSSxDQUFDSyxFQUFjLFNBRW5CQSxFQUFhLFNBQVMsSUFBTTdDLEVBRTVCdUMsRUFBYSxLQUFLTSxDQUFZLENBQ2xDLE1BQU83QyxTQUNOQSxJQUVULElBQUk4QyxFQUFhekUsRUFFakIsUUFBV3VFLEtBQVlMLEVBQ2RLLEVBQVMsV0FDVkEsRUFBUyxNQUFNLEVBRWZFLEVBQWFBLEVBQVcsUUFBUUYsRUFBUyxTQUFXQSxFQUFTLE9BQU8sQ0FBQyxHQUc3RSxPQUFPRSxDQUNYIiwKICAibmFtZXMiOiBbImxpbmsiLCAic2hvdWxkQWRkU2NyaXB0TWVzc2FnZSIsICJzY3JpcHRNZXNzYWdlIiwgInN1bW1hcnlJbnB1dCIsICJldmVudCIsICJlZGl0Qm94IiwgIm9yaWdpbmFsVGV4dCIsICJmaW5hbFRleHQiLCAiY2xlYW51cFNlY3Rpb25IZWFkZXJzIiwgImNsZWFudXBNYWdpY1dvcmRzIiwgImNsZWFudXBEaXNwbGF5dGl0bGVzQW5kRGVmYXVsdHNvcnRzIiwgImNsZWFudXBDYXRlZ29yaWVzIiwgImNsZWFudXBMaW5rcyIsICJjbGVhbnVwU3RyYXlNYXJrdXAiLCAiY2xlYW51cFNwYWNpbmciLCAiZm9ybWF0VGVtcGxhdGVzIiwgInN1cmZhY2VNb2RlbCIsICJjb250ZW50IiwgImNvbW1vblJlcGxhY2VtZW50cyIsICJjb21tb25NaXNjYXBpdGFsaXplZFdvcmRzIiwgInJldmVyc2VDb21tb25SZXBsYWNlbWVudHMiLCAia2V5IiwgInZhbHVlcyIsICJ2YWx1ZSIsICJwYXJzZWRIZWFkZXJzIiwgImhlYWRlciIsICJuYW1lIiwgInN0YXJ0TWFya3VwIiwgImVuZE1hcmt1cCIsICJsaW5rcyIsICJkZXB0aCIsICJ0aXRsZVNwYWNlciIsICJjYXBpdGFsaXplZE5hbWUiLCAid29yZCIsICJvdXRwdXQiLCAicGFyc2VkVGFncyIsICJ0YWciLCAiZnVsbFRhZyIsICJ0eXBlIiwgImN1cnJlbnRUaXRsZSIsICJvcmlnaW5hbFRhZ1JlZ2V4IiwgInRpdGxlIiwgIm5ld1RleHQiLCAiY2xvc2VkTGlua3MiLCAiY3VycmVudExvY2F0aW9uIiwgImlzQXRTdHJpbmciLCAiZGVzaXJlZFN0cmluZyIsICJzaG91bGRJbmNyZW1lbnQiLCAibGFzdExpbmsiLCAibmV3TGlua0NvbnRlbnQiLCAibmFtZXNwYWNlTmFtZXMiLCAibGlua0xvY2F0aW9uIiwgImlubmVyTGluayIsICJ1bnBhcnNlZExpbmsiLCAicGFyYW1ldGVycyIsICJhbHRUZXh0IiwgImlzRmlyc3RDaGFyYWN0ZXJDb2xvbiIsICJzaG91bGRGaXJzdENoYXJhY3RlckJlQ29sb24iLCAibGlua1VwcGVyY2FzZVN0YXJ0IiwgImxpbmtMb3dlcmNhc2VTdGFydCIsICJhZnRlckxpbmtUZXh0IiwgIm5ld0xpbmsiLCAibmFtZXNwYWNlIiwgImxvb3BDb3VudGVyIiwgImxpbmtEYXRhIiwgImxpbmtDb250ZW50IiwgInN0cmF5TWFya3VwUmVnZXhlcyIsICJyZWdleCIsICJGb3JtYXRTdHlsZSIsICJUZW1wbGF0ZSIsICJzdGFydExvY2F0aW9uIiwgInN1YlRlbXBsYXRlIiwgInRyaW1tZWRJbm5lclRleHQiLCAicGlwZUVzY2FwZVJlZ2V4IiwgInBhcmFtZXRlciIsICJzcGxpdFBhcmFtZXRlcnMiLCAiZXF1YWxzTG9jYXRpb24iLCAiZm9ybWF0U3R5bGUiLCAidGVtcGxhdGVQcmVmaXhlcyIsICJ0ZW1wbGF0ZVByZWZpeCIsICJzdHlsZSIsICJyZXF1aXJlZEtleUxlbmd0aCIsICJqb2luZWRPdXRwdXQiLCAiYWxsVGVtcGxhdGVzIiwgImluc2lkZVRlbXBsYXRlcyIsICJpc0luc2lkZUxpbmsiLCAiaXNJbnNpZGVOb3dpa2kiLCAiaXNJbnNpZGVDb21tZW50IiwgInRlbXBsYXRlIiwgImxhc3RUZW1wbGF0ZSIsICJuZXdDb250ZW50Il0KfQo=
