// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/article-cleaner.ts

"use strict";(()=>{mw.config.get("wgNamespaceNumber")<0||mw.config.get("wgIsProbablyEditable")&&mw.loader.using(["mediawiki.util","jquery.textSelection"],()=>{mw.util.addCSS(`
#article-cleaner {
    display: none;
}

#content:has(#wpTextbox1) #article-cleaner {
    display: unset;
}`);let e=mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-navigation":"p-cactions","#","Perform article cleanup","article-cleaner"),h=!1,f="Cleaned up article content (via [[User:Eejit43/scripts/article-cleaner|article-cleaner]])";mw.hook("ve.saveDialog.stateChanged").add(()=>{if(h){let p=document.querySelector(".ve-ui-mwSaveDialog-summary textarea");p.value.includes(f.slice(1))||(p.value&&!p.value.startsWith("/* ")&&!p.value.endsWith(" */ ")?p.value+=`; ${f.charAt(0).toLowerCase()+f.slice(1)}`:p.value=`${p.value}${f}`),h=!1}}),e.addEventListener("click",p=>{p.preventDefault();let n=$("#wpTextbox1");if(n.length===0)return mw.notify("Edit box not found!",{type:"error",autoHideSeconds:"short"});let m=n.textSelection("getContents"),a=m;if(a=C(a),a=E(a),a=L(a),a=I(a),a=N(a,[F,M]),a=R(a),a=A(a),a=D(a),a=O(a),a=P(a),a=A(a,!0),m===a)mw.notify("No changes to be made to the article!",{type:"warn",autoHideSeconds:"short"});else{if(ve.init){let u=ve.init.target.getSurface().getModel();u.getLinearFragment(u.getRangeFromSourceOffsets(0,m.length)).insertContent(a),u.setSelection(new ve.dm.LinearSelection(new ve.Range(0,0)))}else n.textSelection("setContents",a),n.textSelection("setSelection",{start:0});mw.notify("Article cleanup complete!",{type:"success",autoHideSeconds:"short"});let g=document.querySelector("#wpSummary");g?g.value.includes(f.slice(1))||(g.value?g.value+=`; ${f.charAt(0).toLowerCase()+f.slice(1)}`:g.value=f):h=!0}})});function k(e){return e.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}function C(e){let h={"See also":["also see"],References:["reference","source","sources","citation","citations"],"Further reading":["further reading"],"External links":["external link","weblink","weblinks"]},f=["and","birth","career","death","education","life","of","or"],p=Object.fromEntries(Object.entries(h).flatMap(([u,i])=>[[u.toLowerCase(),u],...i.map(s=>[s,u])])),m=[...e.matchAll(/(?<=^|\n)\n*(?<startMarkup>=+) *(?<name>.*?) *(?<endMarkup>=+)(\n+|$)/g)].map(u=>{let{name:i}=u.groups,{startMarkup:s,endMarkup:d}=u.groups;i=i.replaceAll(/'{3}/g,"");let c=i.matchAll(/\[\[(.+?)]]/g).toArray();for(let t of c)i=i.replace(t[0],t[1].split("|").at(-1));let o=Math.max(s.length,d.length,2);return{name:i,depth:o,original:u[0]}}),a=new Set(m.map(u=>u.name)),g=m.length>0&&/^\n*=+ | =+\n+$/.test(m[0].original)?" ":"";for(let u of m){let i=u.name.toLowerCase(),d=i in p&&!a.has(p[i])?p[i]:u.name;for(let o of f)d=d.replaceAll(new RegExp(`\\b${o}\\b`,"gi"),o);d=d.charAt(0).toUpperCase()+d.slice(1);let c=`${"=".repeat(u.depth)}${g}${d}${g}${"=".repeat(u.depth)}`;u.original!==c&&(e=e.replace(u.original,`

${c}
`))}return e}function E(e){return e.replaceAll(/__(INDEX|NOINDEX|NEWSECTIONLINK|NONEWSECTIONLINK|NOEDITSECTION|DISAMBIG|STATICREDIRECT|FORCETOC)__\n*/g,"")}function L(e){let f=[...e.matchAll(/{{(displaytitle|defaultsort)[:|](.*?)}}/gi)].map(n=>{let[m,a,g]=n;return{type:a.toUpperCase(),value:g,original:m}}),p=mw.Title.newFromText(mw.config.get("wgPageName"));for(let n of f){let m=new RegExp(`${k(n.original)}
*`,"g"),a=mw.Title.newFromText(n.value);if(!a)continue;let g=mw.Title.makeTitle(p.getNamespaceId(),a.getMainText());if(!g)continue;let u=n.type==="DISPLAYTITLE"?p.toText():p.getMainText(),i=n.type==="DISPLAYTITLE"?g.toText():g.getMainText();if(u===i){e=e.replace(m,"");continue}let s=`{{${n.type}:${i}}}
`;e=e.replace(m,s)}return e}function I(e){return e.replaceAll(/(\[\[|}}):?category:(.*?)(]]|}})/gi,`[[${mw.config.get("wgCanonicalNamespace")==="Draft"?":":""}Category:$2]]`)}function N(e,h){let f=[],p=[],n=!1,m=!1,a=0;function g(s,d=!0){let c=e.slice(a,a+s.length)===s;return c&&d&&(a+=s.length),c}for(;a<e.length;)if(g("<nowiki>"))n=!0;else if(g("</nowiki>"))n=!1;else if(g("<!--"))m=!0;else if(g("-->"))m=!1;else if(!n&&!m)if(g("[["))p.push({start:a-2,end:-1,isNested:p.length>0});else if(g("]]")){let s=p.pop();if(!s)continue;s.end=a,f.push(s)}else a++;else a++;let u=[],i=Object.values(mw.config.get("wgFormattedNamespaces"));for(let s of f){let d=e.slice(s.start+2,s.end-2),[c,...o]=d.split("|");e=e.slice(0,s.start+2)+"\0".repeat(c.length)+e.slice(s.start+2+c.length);let t=c.replaceAll("_"," ").trim(),l=o.join("|");l=l===" "?" ":l.trim();let x=t.startsWith(":");x&&(t=t.slice(1));let r=!1,b=t.charAt(0).toUpperCase()+t.slice(1),w=t.charAt(0).toLowerCase()+t.slice(1),T=t.split(":")[0];T=T.charAt(0).toUpperCase()+T.slice(1),t.includes(":")&&(b.startsWith("Image:")&&(t=`${t.startsWith("Image:")?"F":"f"}ile:${t.slice(6)}`),x&&(["Image","File","Category"].includes(b.split(":")[0])||!i.includes(T))&&(r=!0));let y="";t===l?l="":new RegExp(`^${k(t)}[a-z]+$`).test(l)&&(y=l.slice(t.length),l="");for(let S of[b,w])S===l?(t=S,l=""):new RegExp(`^${k(S)}[a-z]+$`).test(l)&&(t=S,y=l.slice(S.length),l="");(l&&t.includes(":")&&i.includes(T)||t.startsWith("file:")||t.startsWith("category:"))&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t=`${r?":":""}${t}`,t=t.padStart(c.length,"\0");let v=`[[${t}${l?`|${l}`:""}]]${y}`;u.push([s,v])}for(let s of h)e=s(e,1);for(let s=0;s<2;s++)for(let[d,c]of u)s===0&&d.isNested||s===1&&!d.isNested||(e=e.slice(0,d.start)+c.padEnd(d.end-d.start,"\0")+e.slice(d.end));for(let s of h)e=s(e,2);return e.replaceAll("\0","")}function F(e,h){let f="\x7F",p="\x9F";return h===1?(e=e.replaceAll(/[“”„‟]/g,'"'),e=e.replaceAll(/[‘’‚‛]/g,"'"),e=e.replaceAll("\u2026",f),e=e.replaceAll("\xA0",p)):(e=e.replaceAll(f,"..."),e=e.replaceAll(p,"&nbsp;")),e}function M(e,h){return h===1&&(e=e.replaceAll(/(\(\d{3,4}) ?[‒–−-] ?(\d{3,4}\))/g,(f,p,n)=>`${p}\u2013${n}`.padEnd(f.length,"\0"))),e}function R(e){let h=[/'+(Bold|Italic)( text)?'+ */g,/(<big>)+Big( text)?(<\/big>)+ */g,/(<small>)+Small( text)?(<\/small>)+ */g,/(<sup>)+Superscript( text)?(<\/sup>)+ */g,/(<sub>)+Subscript( text)?(<\/sub>)+ */g,/(<s>)+Strikethrough(<\/s>)+ */g,/(<u>)+Underline(<\/u>)+ */g,/(<code>)+Computer code(<\/code>)+ */g,/(<nowiki>)+Insert non-formatted text here(<\/nowiki>)+ */g,/=+ Heading text =+ */g,/\* Bulleted list item */g,/# Numbered list item */g,/<gallery>\nExample.jpg\|Caption1\nExample.jpg\|Caption2\n<\/gallery> */g,/#REDIRECT \[\[Target page name]] */g,/<!-- Invisible comment --> */g,/<\s*(big|small|sup|sub|s|u|code|nowiki|noinclude|onlyinclude|includeonly|center|blockquote|gallery)\s*(\s+[^<>]*)?>\s*<\s*\/\s*\1\s*>/gi];for(let f of h)for(;f.test(e);)e=e.replace(f,"");return e}function A(e,h=!1){return e=e.replaceAll(/(\b|\p{Punctuation}|\]\]|\}\}|\w>) {2,}(\b|\p{Punctuation}|\[\[|\{\{|<\w)/gu,"$1 $2"),h||(e=e.replaceAll(/^ +| +$/gm,"")),e=e.replaceAll(/\n{3,}/g,`

`),e=e.replace(/\s*({{[^}]*stub}})/i,`


$1`),e=e.replaceAll(/\s+$/g,""),e=e.replaceAll(/^([#*]+) */gm,"$1 "),e=e.replaceAll(/^([#*]+ .*)\n+(?=[#*]+ )/gm,`$1
`),h||(e=e.replaceAll(/(?<!\|)\s+(?=<ref(?!erences))/g,"")),e=e.replaceAll(/<\/([A-Za-z]+) +>/g,"</$1>"),e=e.replaceAll(/^(=+.*?=+)$\n{2,}(?=^=+.*?=+$)/gm,`$1
`),e=e.trim(),e}function D(e){e=e.replaceAll(/((?:<ref(?!erences)[^/]*?>(?:.(?!<\/ref))*?<\/ref>|<ref(?!erences)(?:.(?!<\/ref))*?\/>)+)([!,.;?])/g,"$2$1");let h=[],f=!1,p=!1,n=0;function m(i){let s=e.slice(n,n+i.length)===i;return s&&(n+=i.length),s}function a(i){for(;n<e.length&&!m(i);)n++}for(;n<e.length;)if(m("<nowiki>"))f=!0;else if(m("</nowiki>"))f=!1;else if(m("<!--"))p=!0;else if(m("-->"))p=!1;else if(!f&&!p)if(!m("<references")&&m("<ref")){let i=n-4;a(">");let s=e.slice(i,n-1).trim().endsWith("/");h.push(s?{start:i,end:n,isSelfClosing:s}:{start:i,end:-1})}else m("</ref>")?h.at(-1).end=n:n++;else n++;let g=new DOMParser,u=[];for(let i of h){let s=e.slice(i.start,i.end),d=/<ref(?!erences).*?>/is.exec(s)[0],o=g.parseFromString(i.isSelfClosing?d.replace(/ *\/ *>/," />"):d+"</ref>","text/html").body.firstChild.outerHTML.replaceAll("&amp;","&"),t=s.slice(d.length,-6).trim().replaceAll(/^\[ *([^ \]]*) *]$/gm,"$1").trim();o=i.isSelfClosing||t.length===0?o.replace(/>\s*<\/ref>/," />"):`${o.slice(0,-6)}${t}</ref>`,s!==o&&u.push([s,o])}for(let[i,s]of u)e=e.replace(i,s);return e}function O(e){let h;(x=>(x[x.Expanded=0]="Expanded",x[x.ExpandedAligned=1]="ExpandedAligned",x[x.Minimized=2]="Minimized",x[x.MinimizedSpaced=3]="MinimizedSpaced"))(h||={});let f;(t=>(t[t.User=2]="User",t[t.Draft=118]="Draft"))(f||={});class p{location;isNested=!1;fullText;fullTextEscaped;rawName;name;parameters=[];subTemplates=[];placeholderStrings=["\u{F0000}","\u{10FFFF}","\u{FFFFE}"];pipeEscapeRegexes=[/(\[\[[^\]]*?)\|(.*?]])/g,/(<!--.*?)\|(.*?-->)/g,/(<nowiki>.*?)\|(.*?<\/nowiki>)/g];defaultTemplateStyles={1:["american football uniform","australian rules football kit","automatic taxobox","baseball uniform","basketball kit","beachhandball kit","blockquote","cricket uniform","election box","field hockey kit","football kit","handball kit","hybridbox","icehockey kit","ichnobox","infobox","infraspeciesbox","listen","location map","medical resources","motorsport season","multiple image","mycomorphbox","navbox","oobox","orbitbox","osm location map","quote box","sidebar","speciesbox","starbox","succession box","taxobox","virusbox","volleyball kit"],2:["birth date","coord","death date","end date","lang","start date"],3:["infobox mapframe"]};namespaceSpecificTemplates={118:["afc comment","afc submission","afc submission/draft","afc topic","draft article","draft categories","draft topics","draft","drafts moved from mainspace","preloaddraft submit"],2:["dashboard.wikiedu.org sandbox","user sandbox","userspace draft"]};templatesToKeepContent=["draft categories"];templatesToSubst=["articlepagename","articlespace","basepagename","fullpagename","namespace","namespacenumber","pagename","rootpagename","subjectpagename","subjectspace","subpagename","talkpagename","talkspace"];constructor(o){this.location={start:o}}parse(){this.fullText=e.slice(this.location.start,this.location.end),this.fullTextEscaped=this.fullText;for(let r of this.subTemplates)r.parse(),this.fullTextEscaped=this.fullTextEscaped.replace(r.fullText,this.placeholderStrings[0]);let o=this.fullTextEscaped.slice(2,-2).trim();for(let r of this.pipeEscapeRegexes)for(;r.test(o);)o=o.replaceAll(r,`$1${this.placeholderStrings[1]}$2`);let t=[/<(\w+)( [^<>]+?)(?<!\/)>.*?<\/\1>/g,/<(\w+)( [^<>]+?)\/>/g];for(let r of t)o=o.replaceAll(r,(b,w,T)=>b.replace(T,T.replaceAll("=",this.placeholderStrings[2])));let l=o.split("|").map(r=>r.replaceAll(this.placeholderStrings[1],"|").trim());this.rawName=l.shift(),this.name=this.rawName?.replaceAll("_"," ");let x=l.map(r=>{let b=r.indexOf("=");if(b===-1)return{key:null,value:r.replaceAll(this.placeholderStrings[2],"=").trim()};let w=r.slice(b+1).replaceAll(this.placeholderStrings[2],"=");return{key:r.slice(0,b).trim(),value:`${w.startsWith(`
`)?`
`:""}${w.trim()}`}});this.parameters=x}shouldBeRemoved(){for(let[o,t]of Object.entries(this.namespaceSpecificTemplates))if(mw.config.get("wgNamespaceNumber")!==Number.parseInt(o)&&t.includes(this.name.toLowerCase()))return!0;return!1}getStyle(){let o=0,t;for(let[l,x]of Object.entries(this.defaultTemplateStyles))for(let r of x)this.name.toLowerCase().startsWith(r)&&r.length>=o&&(o=r.length,t=Number.parseInt(l));return t}cleanupParameters(){let o=new Set(["image","logo","cover"]);for(let t=1;t<=10;t++)o.add(`image${t}`);this.parameters=this.parameters.map(({key:t,value:l})=>(t&&o.has(t)&&(l=l.trim(),l.startsWith("[[")&&l.endsWith("]]")&&(l=/\[\[(.*?)]]/g.exec(l)[1].split("|")[0]),l=l.replace(/^(File|Image):/,"").replaceAll("_"," ")),{key:t,value:l}))}format(){if(this.fullText||this.parse(),this.shouldBeRemoved())return this.templatesToKeepContent.includes(this.name.toLowerCase())?this.parameters[0].value:"";let o=this.templatesToSubst.some(r=>r===this.name.toLowerCase()||this.name.toLowerCase().startsWith(`${r}:`)),t=this.getStyle();if(t===void 0){let r=this.name;this.name.toLowerCase().startsWith("template:")&&(r=this.name.slice(9)),o&&(r=`subst:${r}`),r!==this.rawName&&(this.fullTextEscaped=this.fullTextEscaped.replace(this.rawName,r));for(let b of this.subTemplates)this.fullTextEscaped=this.fullTextEscaped.replace(this.placeholderStrings[0],b.format());return this.fullTextEscaped}let l=[`{{${o?"subst:":""}${this.name}`];if(this.cleanupParameters(),t===0||t===1){let r=0;t===1&&(r=Math.max(...this.parameters.map(b=>b.key?.length??0)));for(let[b,w]of this.parameters.entries())!w.key&&!w.value&&this.parameters.slice(b+1).every(T=>T.key??!T.value)||l.push(`| ${w.key?`${w.key.padEnd(r)} = `:""}${w.value}`)}else for(let[r,b]of this.parameters.entries())!b.value&&(b.key||this.parameters.slice(r+1).every(w=>w.key??!w.value))||l.push(`|${b.key?`${b.key}=`:""}${b.value}`);l.push("}}"),l.length===2?(l[0]+="}}",l.pop()):t===3&&(l[l.length-2]+="}}",l.pop());let x=l.join(t===0||t===1?`
`:t===3?" ":"");for(let r of this.subTemplates)x=x.replace(this.placeholderStrings[0],r.format());return x}}let n=[],m=[],a=!1,g=!1,u=!1,i=0;function s(c){let o=e.slice(i,i+c.length)===c;return o&&(i+=c.length),o}for(;i<e.length;)if(s("<nowiki>"))g=!0;else if(s("</nowiki>"))g=!1;else if(s("<!--"))u=!0;else if(s("-->"))u=!1;else if(!g&&!u)if(s("[["))a=!0;else if(a&&s("]]"))a=!1;else if(s("{{")){let c=new p(i-2);m.length>0&&(c.isNested=!0,m.at(-1)?.subTemplates.push(c)),m.push(c)}else if(s("}}")){let c=m.pop();if(!c)continue;c.location.end=i,n.push(c)}else i++;else i++;let d=e;for(let c of n)c.isNested||(c.parse(),d=d.replace(c.fullText,c.format()));return d}function P(e){if(mw.config.get("wgNamespaceNumber")!==0)return e;let h=["Do not remove this line","EDIT BELOW THIS LINE","Important, do not remove anything above this line before article has been created","Important, do not remove this line before article has been created","Inline citations added to your article will automatically display here","Note: The following pages were redirects to "];for(let f of h)e=e.replaceAll(new RegExp(` *<!-- ?${k(f)}.*?--> *
?`,"gs"),"");return e}})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9hcnRpY2xlLWNsZWFuZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImRlY2xhcmUgZ2xvYmFsIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhbmVvdXMtY2xhc3NcbiAgICBjbGFzcyBWZVJhbmdlIHtcbiAgICAgICAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpO1xuICAgIH1cblxuICAgIGNsYXNzIFZlRnJhZ21lbnQge1xuICAgICAgICBpbnNlcnRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgfVxuXG4gICAgY2xhc3MgVmVTdXJmYWNlTW9kZWwge1xuICAgICAgICBnZXRMaW5lYXJGcmFnbWVudChyYW5nZTogVmVSYW5nZSk6IFZlRnJhZ21lbnQ7XG4gICAgICAgIGdldFJhbmdlRnJvbVNvdXJjZU9mZnNldHMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBWZVJhbmdlO1xuICAgICAgICBzZXRTZWxlY3Rpb24oc2VsZWN0aW9uOiBWZUxpbmVhclNlbGVjdGlvbik6IHZvaWQ7XG4gICAgfVxuXG4gICAgY2xhc3MgVmVUYXJnZXQge1xuICAgICAgICBnZXRTdXJmYWNlKCk6IHsgZ2V0TW9kZWwoKTogVmVTdXJmYWNlTW9kZWwgfTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhbmVvdXMtY2xhc3NcbiAgICBjbGFzcyBWZUxpbmVhclNlbGVjdGlvbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHJhbmdlOiBWZVJhbmdlKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZToge1xuICAgICAgICBSYW5nZTogdHlwZW9mIFZlUmFuZ2U7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgIGRtOiB7IExpbmVhclNlbGVjdGlvbjogdHlwZW9mIFZlTGluZWFyU2VsZWN0aW9uIH07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gICAgICAgIGluaXQ/OiB7IHRhcmdldDogVmVUYXJnZXQgfTtcbiAgICB9O1xufVxuXG5leHBvcnQge307XG5cbigoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgPCAwKSByZXR1cm47IC8vIERvbid0IHJ1biBpbiB2aXJ0dWFsIG5hbWVzcGFjZXNcbiAgICBpZiAoIW13LmNvbmZpZy5nZXQoJ3dnSXNQcm9iYWJseUVkaXRhYmxlJykpIHJldHVybjsgLy8gRG9uJ3QgcnVuIGlmIHVzZXIgY2FuJ3QgZWRpdCBwYWdlXG5cbiAgICBtdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdqcXVlcnkudGV4dFNlbGVjdGlvbiddLCAoKSA9PiB7XG4gICAgICAgIG13LnV0aWwuYWRkQ1NTKGBcbiNhcnRpY2xlLWNsZWFuZXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59XG5cbiNjb250ZW50Omhhcygjd3BUZXh0Ym94MSkgI2FydGljbGUtY2xlYW5lciB7XG4gICAgZGlzcGxheTogdW5zZXQ7XG59YCk7XG5cbiAgICAgICAgY29uc3QgbGluayA9IG13LnV0aWwuYWRkUG9ydGxldExpbmsoXG4gICAgICAgICAgICBtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtaW5lcnZhJyA/ICdwLW5hdmlnYXRpb24nIDogJ3AtY2FjdGlvbnMnLFxuICAgICAgICAgICAgJyMnLFxuICAgICAgICAgICAgJ1BlcmZvcm0gYXJ0aWNsZSBjbGVhbnVwJyxcbiAgICAgICAgICAgICdhcnRpY2xlLWNsZWFuZXInLFxuICAgICAgICApITtcblxuICAgICAgICBsZXQgc2hvdWxkQWRkU2NyaXB0TWVzc2FnZSA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IHNjcmlwdE1lc3NhZ2UgPSAnQ2xlYW5lZCB1cCBhcnRpY2xlIGNvbnRlbnQgKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL2FydGljbGUtY2xlYW5lcnxhcnRpY2xlLWNsZWFuZXJdXSknO1xuXG4gICAgICAgIG13Lmhvb2soJ3ZlLnNhdmVEaWFsb2cuc3RhdGVDaGFuZ2VkJykuYWRkKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzaG91bGRBZGRTY3JpcHRNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MVGV4dEFyZWFFbGVtZW50PignLnZlLXVpLW13U2F2ZURpYWxvZy1zdW1tYXJ5IHRleHRhcmVhJykhO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5SW5wdXQudmFsdWUuaW5jbHVkZXMoc2NyaXB0TWVzc2FnZS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQudmFsdWUgJiYgIXN1bW1hcnlJbnB1dC52YWx1ZS5zdGFydHNXaXRoKCcvKiAnKSAmJiAhc3VtbWFyeUlucHV0LnZhbHVlLmVuZHNXaXRoKCcgKi8gJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5SW5wdXQudmFsdWUgKz0gYDsgJHtzY3JpcHRNZXNzYWdlLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc2NyaXB0TWVzc2FnZS5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHN1bW1hcnlJbnB1dC52YWx1ZSA9IGAke3N1bW1hcnlJbnB1dC52YWx1ZX0ke3NjcmlwdE1lc3NhZ2V9YDtcblxuICAgICAgICAgICAgICAgIHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgZWRpdEJveCA9ICQoJyN3cFRleHRib3gxJyk7XG4gICAgICAgICAgICBpZiAoZWRpdEJveC5sZW5ndGggPT09IDApIHJldHVybiBtdy5ub3RpZnkoJ0VkaXQgYm94IG5vdCBmb3VuZCEnLCB7IHR5cGU6ICdlcnJvcicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcblxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdnZXRDb250ZW50cycpO1xuXG4gICAgICAgICAgICBsZXQgZmluYWxUZXh0ID0gb3JpZ2luYWxUZXh0O1xuXG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU2VjdGlvbkhlYWRlcnMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBNYWdpY1dvcmRzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cENhdGVnb3JpZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBMaW5rcyhmaW5hbFRleHQsIFtjbGVhbnVwSW1wcm9wZXJDaGFyYWN0ZXJzLCBjbGVhbnVwWWVhclJhbmdlc10pO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFN0cmF5TWFya3VwKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU3BhY2luZyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFJlZmVyZW5jZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGZvcm1hdFRlbXBsYXRlcyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gcmVtb3ZlQ29tbWVudHMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBTcGFjaW5nKGZpbmFsVGV4dCwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIGlmIChvcmlnaW5hbFRleHQgPT09IGZpbmFsVGV4dCkgbXcubm90aWZ5KCdObyBjaGFuZ2VzIHRvIGJlIG1hZGUgdG8gdGhlIGFydGljbGUhJywgeyB0eXBlOiAnd2FybicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2ZS5pbml0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1cmZhY2VNb2RlbCA9IHZlLmluaXQudGFyZ2V0LmdldFN1cmZhY2UoKS5nZXRNb2RlbCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IHN1cmZhY2VNb2RlbC5nZXRMaW5lYXJGcmFnbWVudChzdXJmYWNlTW9kZWwuZ2V0UmFuZ2VGcm9tU291cmNlT2Zmc2V0cygwLCBvcmlnaW5hbFRleHQubGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50Lmluc2VydENvbnRlbnQoZmluYWxUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgc3VyZmFjZU1vZGVsLnNldFNlbGVjdGlvbihuZXcgdmUuZG0uTGluZWFyU2VsZWN0aW9uKG5ldyB2ZS5SYW5nZSgwLCAwKSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRCb3gudGV4dFNlbGVjdGlvbignc2V0Q29udGVudHMnLCBmaW5hbFRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGVkaXRCb3gudGV4dFNlbGVjdGlvbignc2V0U2VsZWN0aW9uJywgeyBzdGFydDogMCB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtdy5ub3RpZnkoJ0FydGljbGUgY2xlYW51cCBjb21wbGV0ZSEnLCB7IHR5cGU6ICdzdWNjZXNzJywgYXV0b0hpZGVTZWNvbmRzOiAnc2hvcnQnIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PignI3dwU3VtbWFyeScpO1xuICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdW1tYXJ5SW5wdXQudmFsdWUuaW5jbHVkZXMoc2NyaXB0TWVzc2FnZS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeUlucHV0LnZhbHVlKSBzdW1tYXJ5SW5wdXQudmFsdWUgKz0gYDsgJHtzY3JpcHRNZXNzYWdlLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc2NyaXB0TWVzc2FnZS5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzdW1tYXJ5SW5wdXQudmFsdWUgPSBzY3JpcHRNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBzaG91bGRBZGRTY3JpcHRNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59KSgpO1xuXG4vKipcbiAqIEVzY2FwZXMgcmVnZXggY2hhcmFjdGVycyBpbiBhIHN0cmluZy5cbiAqIEBwYXJhbSBzdHJpbmcgVGhlIHN0cmluZyB0byBlc2NhcGUgcmVnZXggY2hhcmFjdGVycyBpbi5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlUmVnZXhDaGFyYWN0ZXJzKHN0cmluZzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlQWxsKC9bJCgpKisuP1tcXFxcXFxdXnt8fV0vZywgJ1xcXFwkJicpO1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBzZWN0aW9uIGhlYWRlcnMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU2VjdGlvbkhlYWRlcnMoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgY29tbW9uUmVwbGFjZW1lbnRzID0ge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbiAgICAgICAgJ1NlZSBhbHNvJzogWydhbHNvIHNlZSddLFxuICAgICAgICAnUmVmZXJlbmNlcyc6IFsncmVmZXJlbmNlJywgJ3NvdXJjZScsICdzb3VyY2VzJywgJ2NpdGF0aW9uJywgJ2NpdGF0aW9ucyddLFxuICAgICAgICAnRnVydGhlciByZWFkaW5nJzogWydmdXJ0aGVyIHJlYWRpbmcnXSxcbiAgICAgICAgJ0V4dGVybmFsIGxpbmtzJzogWydleHRlcm5hbCBsaW5rJywgJ3dlYmxpbmsnLCAnd2VibGlua3MnXSxcbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbiAgICB9O1xuXG4gICAgY29uc3QgY29tbW9uTWlzY2FwaXRhbGl6ZWRXb3JkcyA9IFsnYW5kJywgJ2JpcnRoJywgJ2NhcmVlcicsICdkZWF0aCcsICdlZHVjYXRpb24nLCAnbGlmZScsICdvZicsICdvciddO1xuXG4gICAgY29uc3QgcmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50cyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoY29tbW9uUmVwbGFjZW1lbnRzKS5mbGF0TWFwKChba2V5LCB2YWx1ZXNdKSA9PiBbXG4gICAgICAgICAgICBba2V5LnRvTG93ZXJDYXNlKCksIGtleV0sXG4gICAgICAgICAgICAuLi4odmFsdWVzLm1hcCgodmFsdWUpID0+IFt2YWx1ZSwga2V5XSkgYXMgW3N0cmluZywgc3RyaW5nXVtdKSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgXSksXG4gICAgKTtcblxuICAgIGNvbnN0IGhlYWRlcnMgPSBjb250ZW50Lm1hdGNoQWxsKC8oPzw9XnxcXG4pXFxuKig/PHN0YXJ0TWFya3VwPj0rKSAqKD88bmFtZT4uKj8pICooPzxlbmRNYXJrdXA+PSspKFxcbit8JCkvZyk7XG5cbiAgICBjb25zdCBwYXJzZWRIZWFkZXJzID0gWy4uLmhlYWRlcnNdLm1hcCgoaGVhZGVyKSA9PiB7XG4gICAgICAgIGxldCB7IG5hbWUgfSA9IGhlYWRlci5ncm91cHMhO1xuICAgICAgICBjb25zdCB7IHN0YXJ0TWFya3VwLCBlbmRNYXJrdXAgfSA9IGhlYWRlci5ncm91cHMhO1xuXG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2VBbGwoLyd7M30vZywgJycpO1xuXG4gICAgICAgIGNvbnN0IGxpbmtzID0gbmFtZS5tYXRjaEFsbCgvXFxbXFxbKC4rPyldXS9nKS50b0FycmF5KCk7XG5cbiAgICAgICAgZm9yIChjb25zdCBsaW5rIG9mIGxpbmtzKSBuYW1lID0gbmFtZS5yZXBsYWNlKGxpbmtbMF0sIGxpbmtbMV0uc3BsaXQoJ3wnKS5hdCgtMSkhKTtcblxuICAgICAgICBjb25zdCBkZXB0aCA9IE1hdGgubWF4KHN0YXJ0TWFya3VwLmxlbmd0aCwgZW5kTWFya3VwLmxlbmd0aCwgMik7XG5cbiAgICAgICAgcmV0dXJuIHsgbmFtZSwgZGVwdGgsIG9yaWdpbmFsOiBoZWFkZXJbMF0gfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGhlYWRlcnNTZXQgPSBuZXcgU2V0KHBhcnNlZEhlYWRlcnMubWFwKChoZWFkZXIpID0+IGhlYWRlci5uYW1lKSk7XG5cbiAgICBjb25zdCB0aXRsZVNwYWNlciA9IHBhcnNlZEhlYWRlcnMubGVuZ3RoID4gMCA/ICgvXlxcbio9KyB8ID0rXFxuKyQvLnRlc3QocGFyc2VkSGVhZGVyc1swXS5vcmlnaW5hbCkgPyAnICcgOiAnJykgOiAnJztcblxuICAgIGZvciAoY29uc3QgaGVhZGVyIG9mIHBhcnNlZEhlYWRlcnMpIHtcbiAgICAgICAgY29uc3QgbG93ZXJjYXNlTmFtZSA9IGhlYWRlci5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgY29uc3QgcmVwbGFjZWROYW1lID1cbiAgICAgICAgICAgIGxvd2VyY2FzZU5hbWUgaW4gcmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50cyAmJiAhaGVhZGVyc1NldC5oYXMocmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50c1tsb3dlcmNhc2VOYW1lXSlcbiAgICAgICAgICAgICAgICA/IHJldmVyc2VDb21tb25SZXBsYWNlbWVudHNbbG93ZXJjYXNlTmFtZV1cbiAgICAgICAgICAgICAgICA6IGhlYWRlci5uYW1lO1xuXG4gICAgICAgIGxldCBjYXBpdGFsaXplZE5hbWUgPSByZXBsYWNlZE5hbWU7XG5cbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIGNvbW1vbk1pc2NhcGl0YWxpemVkV29yZHMpIGNhcGl0YWxpemVkTmFtZSA9IGNhcGl0YWxpemVkTmFtZS5yZXBsYWNlQWxsKG5ldyBSZWdFeHAoYFxcXFxiJHt3b3JkfVxcXFxiYCwgJ2dpJyksIHdvcmQpO1xuXG4gICAgICAgIGNhcGl0YWxpemVkTmFtZSA9IGNhcGl0YWxpemVkTmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhcGl0YWxpemVkTmFtZS5zbGljZSgxKTtcblxuICAgICAgICBjb25zdCBvdXRwdXQgPSBgJHsnPScucmVwZWF0KGhlYWRlci5kZXB0aCl9JHt0aXRsZVNwYWNlcn0ke2NhcGl0YWxpemVkTmFtZX0ke3RpdGxlU3BhY2VyfSR7Jz0nLnJlcGVhdChoZWFkZXIuZGVwdGgpfWA7XG5cbiAgICAgICAgaWYgKGhlYWRlci5vcmlnaW5hbCAhPT0gb3V0cHV0KSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKGhlYWRlci5vcmlnaW5hbCwgYFxcblxcbiR7b3V0cHV0fVxcbmApO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdW5uZWNlc3NhcnkgbWFnaWMgd29yZHMgZnJvbSBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBNYWdpY1dvcmRzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHJldHVybiBjb250ZW50LnJlcGxhY2VBbGwoL19fKElOREVYfE5PSU5ERVh8TkVXU0VDVElPTkxJTkt8Tk9ORVdTRUNUSU9OTElOS3xOT0VESVRTRUNUSU9OfERJU0FNQklHfFNUQVRJQ1JFRElSRUNUfEZPUkNFVE9DKV9fXFxuKi9nLCAnJyk7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIERJU1BMQVlUSVRMRXMgYW5kIERFRkFVTFRTT1JUcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBEaXNwbGF5dGl0bGVzQW5kRGVmYXVsdHNvcnRzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IHRhZ3MgPSBjb250ZW50Lm1hdGNoQWxsKC97eyhkaXNwbGF5dGl0bGV8ZGVmYXVsdHNvcnQpWzp8XSguKj8pfX0vZ2kpO1xuXG4gICAgY29uc3QgcGFyc2VkVGFncyA9IFsuLi50YWdzXS5tYXAoKHRhZykgPT4ge1xuICAgICAgICBjb25zdCBbZnVsbFRhZywgdHlwZSwgdmFsdWVdID0gdGFnO1xuXG4gICAgICAgIHJldHVybiB7IHR5cGU6IHR5cGUudG9VcHBlckNhc2UoKSwgdmFsdWUsIG9yaWdpbmFsOiBmdWxsVGFnIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBjdXJyZW50VGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dChtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJykpITtcblxuICAgIGZvciAoY29uc3QgdGFnIG9mIHBhcnNlZFRhZ3MpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxUYWdSZWdleCA9IG5ldyBSZWdFeHAoYCR7ZXNjYXBlUmVnZXhDaGFyYWN0ZXJzKHRhZy5vcmlnaW5hbCl9XFxuKmAsICdnJyk7XG5cbiAgICAgICAgY29uc3QgdW5wcmVmaXhlZFRpdGxlID0gbXcuVGl0bGUubmV3RnJvbVRleHQodGFnLnZhbHVlKTtcblxuICAgICAgICBpZiAoIXVucHJlZml4ZWRUaXRsZSkgY29udGludWU7XG5cbiAgICAgICAgY29uc3QgdGl0bGUgPSBtdy5UaXRsZS5tYWtlVGl0bGUoY3VycmVudFRpdGxlLmdldE5hbWVzcGFjZUlkKCksIHVucHJlZml4ZWRUaXRsZS5nZXRNYWluVGV4dCgpKTtcblxuICAgICAgICBpZiAoIXRpdGxlKSBjb250aW51ZTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0S2V5ID0gdGFnLnR5cGUgPT09ICdESVNQTEFZVElUTEUnID8gY3VycmVudFRpdGxlLnRvVGV4dCgpIDogY3VycmVudFRpdGxlLmdldE1haW5UZXh0KCk7XG5cbiAgICAgICAgY29uc3QgY3VzdG9tS2V5ID0gdGFnLnR5cGUgPT09ICdESVNQTEFZVElUTEUnID8gdGl0bGUudG9UZXh0KCkgOiB0aXRsZS5nZXRNYWluVGV4dCgpO1xuXG4gICAgICAgIGlmIChkZWZhdWx0S2V5ID09PSBjdXN0b21LZXkpIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUYWdSZWdleCwgJycpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuZXdUZXh0ID0gYHt7JHt0YWcudHlwZX06JHtjdXN0b21LZXl9fX1cXG5gO1xuXG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUYWdSZWdleCwgbmV3VGV4dCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGNhdGVnb3JpZXMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwQ2F0ZWdvcmllcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKFxuICAgICAgICAvKFxcW1xcW3x9fSk6P2NhdGVnb3J5OiguKj8pKF1dfH19KS9naSxcbiAgICAgICAgYFtbJHttdy5jb25maWcuZ2V0KCd3Z0Nhbm9uaWNhbE5hbWVzcGFjZScpID09PSAnRHJhZnQnID8gJzonIDogJyd9Q2F0ZWdvcnk6JDJdXWAsXG4gICAgKTtcbn1cblxuaW50ZXJmYWNlIExpbmtJbmZvcm1hdGlvbiB7XG4gICAgc3RhcnQ6IG51bWJlcjtcbiAgICBlbmQ6IG51bWJlcjtcbiAgICBpc05lc3RlZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgbGlua3MgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICogQHBhcmFtIGZ1bmN0aW9uc0NhbGxlZFdoaWxlRXNjYXBlZCBUaGUgZnVuY3Rpb25zIGNhbGxlZCB3aGlsZSB0aGUgbGlua3MgYXJlIGVzY2FwZWQuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBMaW5rcyhjb250ZW50OiBzdHJpbmcsIGZ1bmN0aW9uc0NhbGxlZFdoaWxlRXNjYXBlZDogKChjb250ZW50OiBzdHJpbmcsIHJ1bjogMSB8IDIpID0+IHN0cmluZylbXSkge1xuICAgIGNvbnN0IGNsb3NlZExpbmtzOiBMaW5rSW5mb3JtYXRpb25bXSA9IFtdO1xuICAgIGNvbnN0IGxpbmtzOiBMaW5rSW5mb3JtYXRpb25bXSA9IFtdO1xuXG4gICAgbGV0IGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKiBAcGFyYW0gc2hvdWxkSW5jcmVtZW50IFdoZXRoZXIgdG8gaW5jcmVtZW50IHRoZSBjdXJyZW50IGxvY2F0aW9uIGlmIHRoZSBzdHJpbmcgaXMgZm91bmQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBdFN0cmluZyhkZXNpcmVkU3RyaW5nOiBzdHJpbmcsIHNob3VsZEluY3JlbWVudCA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgaXNBdFN0cmluZyA9IGNvbnRlbnQuc2xpY2UoY3VycmVudExvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gKyBkZXNpcmVkU3RyaW5nLmxlbmd0aCkgPT09IGRlc2lyZWRTdHJpbmc7XG5cbiAgICAgICAgaWYgKGlzQXRTdHJpbmcgJiYgc2hvdWxkSW5jcmVtZW50KSBjdXJyZW50TG9jYXRpb24gKz0gZGVzaXJlZFN0cmluZy5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIGlzQXRTdHJpbmc7XG4gICAgfVxuXG4gICAgd2hpbGUgKGN1cnJlbnRMb2NhdGlvbiA8IGNvbnRlbnQubGVuZ3RoKVxuICAgICAgICBpZiAoaXNBdFN0cmluZygnPG5vd2lraT4nKSkgaXNJbnNpZGVOb3dpa2kgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8L25vd2lraT4nKSkgaXNJbnNpZGVOb3dpa2kgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPCEtLScpKSBpc0luc2lkZUNvbW1lbnQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCctLT4nKSkgaXNJbnNpZGVDb21tZW50ID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKCFpc0luc2lkZU5vd2lraSAmJiAhaXNJbnNpZGVDb21tZW50KVxuICAgICAgICAgICAgaWYgKGlzQXRTdHJpbmcoJ1tbJykpIGxpbmtzLnB1c2goeyBzdGFydDogY3VycmVudExvY2F0aW9uIC0gMiwgZW5kOiAtMSwgaXNOZXN0ZWQ6IGxpbmtzLmxlbmd0aCA+IDAgfSk7XG4gICAgICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCddXScpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdExpbmsgPSBsaW5rcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3RMaW5rKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGxhc3RMaW5rLmVuZCA9IGN1cnJlbnRMb2NhdGlvbjtcblxuICAgICAgICAgICAgICAgIGNsb3NlZExpbmtzLnB1c2gobGFzdExpbmspO1xuICAgICAgICAgICAgfSBlbHNlIGN1cnJlbnRMb2NhdGlvbisrO1xuICAgICAgICBlbHNlIGN1cnJlbnRMb2NhdGlvbisrO1xuXG4gICAgY29uc3QgbmV3TGlua0NvbnRlbnQ6IFtMaW5rSW5mb3JtYXRpb24sIHN0cmluZ11bXSA9IFtdO1xuXG4gICAgY29uc3QgbmFtZXNwYWNlTmFtZXMgPSBPYmplY3QudmFsdWVzKG13LmNvbmZpZy5nZXQoJ3dnRm9ybWF0dGVkTmFtZXNwYWNlcycpKTtcblxuICAgIGZvciAoY29uc3QgbGlua0xvY2F0aW9uIG9mIGNsb3NlZExpbmtzKSB7XG4gICAgICAgIGNvbnN0IGlubmVyTGluayA9IGNvbnRlbnQuc2xpY2UobGlua0xvY2F0aW9uLnN0YXJ0ICsgMiwgbGlua0xvY2F0aW9uLmVuZCAtIDIpO1xuXG4gICAgICAgIGNvbnN0IFt1bnBhcnNlZExpbmssIC4uLnBhcmFtZXRlcnNdID0gaW5uZXJMaW5rLnNwbGl0KCd8Jyk7XG5cbiAgICAgICAgLy8gUmVwbGFjZSBsaW5rIG5hbWVzIHNvIHRoZXNlIHdvbid0IGJlIGFmZmVjdGVkIGJ5IGZ1bmN0aW9ucyBjYWxsZWQgd2hpbGUgZXNjYXBlZFxuICAgICAgICBjb250ZW50ID1cbiAgICAgICAgICAgIGNvbnRlbnQuc2xpY2UoMCwgbGlua0xvY2F0aW9uLnN0YXJ0ICsgMikgK1xuICAgICAgICAgICAgJ1xcMCcucmVwZWF0KHVucGFyc2VkTGluay5sZW5ndGgpICtcbiAgICAgICAgICAgIGNvbnRlbnQuc2xpY2UobGlua0xvY2F0aW9uLnN0YXJ0ICsgMiArIHVucGFyc2VkTGluay5sZW5ndGgpO1xuXG4gICAgICAgIGxldCBsaW5rID0gdW5wYXJzZWRMaW5rLnJlcGxhY2VBbGwoJ18nLCAnICcpLnRyaW0oKTtcbiAgICAgICAgbGV0IGFsdFRleHQgPSBwYXJhbWV0ZXJzLmpvaW4oJ3wnKTtcbiAgICAgICAgYWx0VGV4dCA9IGFsdFRleHQgPT09ICcgJyA/ICcgJyA6IGFsdFRleHQudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IGlzRmlyc3RDaGFyYWN0ZXJDb2xvbiA9IGxpbmsuc3RhcnRzV2l0aCgnOicpO1xuICAgICAgICBpZiAoaXNGaXJzdENoYXJhY3RlckNvbG9uKSBsaW5rID0gbGluay5zbGljZSgxKTtcblxuICAgICAgICBsZXQgc2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgbGlua1VwcGVyY2FzZVN0YXJ0ID0gbGluay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGxpbmsuc2xpY2UoMSk7XG4gICAgICAgIGNvbnN0IGxpbmtMb3dlcmNhc2VTdGFydCA9IGxpbmsuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBsaW5rLnNsaWNlKDEpO1xuXG4gICAgICAgIGxldCBuYW1lc3BhY2UgPSBsaW5rLnNwbGl0KCc6JylbMF07XG4gICAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWVzcGFjZS5zbGljZSgxKTtcblxuICAgICAgICBpZiAobGluay5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgICBpZiAobGlua1VwcGVyY2FzZVN0YXJ0LnN0YXJ0c1dpdGgoJ0ltYWdlOicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3RhcnRVcHBlcmNhc2UgPSBsaW5rLnN0YXJ0c1dpdGgoJ0ltYWdlOicpO1xuXG4gICAgICAgICAgICAgICAgbGluayA9IGAke3Nob3VsZFN0YXJ0VXBwZXJjYXNlID8gJ0YnIDogJ2YnfWlsZToke2xpbmsuc2xpY2UoNil9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzRmlyc3RDaGFyYWN0ZXJDb2xvbiAmJlxuICAgICAgICAgICAgICAgIChbJ0ltYWdlJywgJ0ZpbGUnLCAnQ2F0ZWdvcnknXS5pbmNsdWRlcyhsaW5rVXBwZXJjYXNlU3RhcnQuc3BsaXQoJzonKVswXSkgfHwgIW5hbWVzcGFjZU5hbWVzLmluY2x1ZGVzKG5hbWVzcGFjZSkpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgc2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhZnRlckxpbmtUZXh0ID0gJyc7XG5cbiAgICAgICAgaWYgKGxpbmsgPT09IGFsdFRleHQpIGFsdFRleHQgPSAnJztcbiAgICAgICAgZWxzZSBpZiAobmV3IFJlZ0V4cChgXiR7ZXNjYXBlUmVnZXhDaGFyYWN0ZXJzKGxpbmspfVthLXpdKyRgKS50ZXN0KGFsdFRleHQpKSB7XG4gICAgICAgICAgICBhZnRlckxpbmtUZXh0ID0gYWx0VGV4dC5zbGljZShsaW5rLmxlbmd0aCk7XG4gICAgICAgICAgICBhbHRUZXh0ID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IG5ld0xpbmsgb2YgW2xpbmtVcHBlcmNhc2VTdGFydCwgbGlua0xvd2VyY2FzZVN0YXJ0XSlcbiAgICAgICAgICAgIGlmIChuZXdMaW5rID09PSBhbHRUZXh0KSB7XG4gICAgICAgICAgICAgICAgbGluayA9IG5ld0xpbms7XG4gICAgICAgICAgICAgICAgYWx0VGV4dCA9ICcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXcgUmVnRXhwKGBeJHtlc2NhcGVSZWdleENoYXJhY3RlcnMobmV3TGluayl9W2Etel0rJGApLnRlc3QoYWx0VGV4dCkpIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gbmV3TGluaztcbiAgICAgICAgICAgICAgICBhZnRlckxpbmtUZXh0ID0gYWx0VGV4dC5zbGljZShuZXdMaW5rLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYWx0VGV4dCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChhbHRUZXh0ICYmIGxpbmsuaW5jbHVkZXMoJzonKSAmJiBuYW1lc3BhY2VOYW1lcy5pbmNsdWRlcyhuYW1lc3BhY2UpKSB8fFxuICAgICAgICAgICAgbGluay5zdGFydHNXaXRoKCdmaWxlOicpIHx8XG4gICAgICAgICAgICBsaW5rLnN0YXJ0c1dpdGgoJ2NhdGVnb3J5OicpXG4gICAgICAgIClcbiAgICAgICAgICAgIGxpbmsgPSBsaW5rLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbGluay5zbGljZSgxKTtcblxuICAgICAgICBsaW5rID0gYCR7c2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID8gJzonIDogJyd9JHtsaW5rfWA7XG5cbiAgICAgICAgbGluayA9IGxpbmsucGFkU3RhcnQodW5wYXJzZWRMaW5rLmxlbmd0aCwgJ1xcMCcpO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGBbWyR7bGlua30ke2FsdFRleHQgPyBgfCR7YWx0VGV4dH1gIDogJyd9XV0ke2FmdGVyTGlua1RleHR9YDtcblxuICAgICAgICBuZXdMaW5rQ29udGVudC5wdXNoKFtsaW5rTG9jYXRpb24sIG91dHB1dF0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZnVuY3Rpb25Ub0NhbGwgb2YgZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkKSBjb250ZW50ID0gZnVuY3Rpb25Ub0NhbGwoY29udGVudCwgMSk7XG5cbiAgICBmb3IgKGxldCBsb29wQ291bnRlciA9IDA7IGxvb3BDb3VudGVyIDwgMjsgbG9vcENvdW50ZXIrKylcbiAgICAgICAgZm9yIChjb25zdCBbbGlua0RhdGEsIGxpbmtDb250ZW50XSBvZiBuZXdMaW5rQ29udGVudCkge1xuICAgICAgICAgICAgaWYgKGxvb3BDb3VudGVyID09PSAwICYmIGxpbmtEYXRhLmlzTmVzdGVkKSBjb250aW51ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGxvb3BDb3VudGVyID09PSAxICYmICFsaW5rRGF0YS5pc05lc3RlZCkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpY2UoMCwgbGlua0RhdGEuc3RhcnQpICsgbGlua0NvbnRlbnQucGFkRW5kKGxpbmtEYXRhLmVuZCAtIGxpbmtEYXRhLnN0YXJ0LCAnXFwwJykgKyBjb250ZW50LnNsaWNlKGxpbmtEYXRhLmVuZCk7XG4gICAgICAgIH1cblxuICAgIGZvciAoY29uc3QgZnVuY3Rpb25Ub0NhbGwgb2YgZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkKSBjb250ZW50ID0gZnVuY3Rpb25Ub0NhbGwoY29udGVudCwgMik7XG5cbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKCdcXDAnLCAnJyk7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGltcHJvcGVyIGNoYXJhY3RlcnMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICogQHBhcmFtIHJ1biBUaGUgcnVuIG51bWJlciBvZiB0aGUgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBJbXByb3BlckNoYXJhY3RlcnMoY29udGVudDogc3RyaW5nLCBydW46IDEgfCAyKSB7XG4gICAgY29uc3QgZWxpcHNpc1BsYWNlaG9sZGVyID0gJ1xcdTAwN0YnO1xuICAgIGNvbnN0IG5ic3BQbGFjZWhvbGRlciA9ICdcXHUwMDlGJztcblxuICAgIGlmIChydW4gPT09IDEpIHtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvW1x1MjAxQ1x1MjAxRFx1MjAxRVx1MjAxRl0vZywgJ1wiJyk7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1tcdTIwMThcdTIwMTlcdTIwMUFcdTIwMUJdL2csIFwiJ1wiKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgnXHUyMDI2JywgZWxpcHNpc1BsYWNlaG9sZGVyKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgnXHUwMEEwJywgbmJzcFBsYWNlaG9sZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKGVsaXBzaXNQbGFjZWhvbGRlciwgJy4uLicpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKG5ic3BQbGFjZWhvbGRlciwgJyZuYnNwOycpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCB5ZWFyIHJhbmdlcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKiBAcGFyYW0gcnVuIFRoZSBydW4gbnVtYmVyIG9mIHRoZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFllYXJSYW5nZXMoY29udGVudDogc3RyaW5nLCBydW46IDEgfCAyKSB7XG4gICAgaWYgKHJ1biA9PT0gMSlcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxcKFxcZHszLDR9KSA/W1x1MjAxMlx1MjAxM1x1MjIxMi1dID8oXFxkezMsNH1cXCkpL2csIChvcmlnaW5hbCwgc3RhcnQsIGVuZCkgPT5cbiAgICAgICAgICAgIGAke3N0YXJ0fVx1MjAxMyR7ZW5kfWAucGFkRW5kKG9yaWdpbmFsLmxlbmd0aCwgJ1xcMCcpLFxuICAgICAgICApO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBzdHJheSBtYXJrdXAgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU3RyYXlNYXJrdXAoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RyYXlNYXJrdXBSZWdleGVzID0gW1xuICAgICAgICAvJysoQm9sZHxJdGFsaWMpKCB0ZXh0KT8nKyAqL2csXG4gICAgICAgIC8oPGJpZz4pK0JpZyggdGV4dCk/KDxcXC9iaWc+KSsgKi9nLFxuICAgICAgICAvKDxzbWFsbD4pK1NtYWxsKCB0ZXh0KT8oPFxcL3NtYWxsPikrICovZyxcbiAgICAgICAgLyg8c3VwPikrU3VwZXJzY3JpcHQoIHRleHQpPyg8XFwvc3VwPikrICovZyxcbiAgICAgICAgLyg8c3ViPikrU3Vic2NyaXB0KCB0ZXh0KT8oPFxcL3N1Yj4pKyAqL2csXG4gICAgICAgIC8oPHM+KStTdHJpa2V0aHJvdWdoKDxcXC9zPikrICovZyxcbiAgICAgICAgLyg8dT4pK1VuZGVybGluZSg8XFwvdT4pKyAqL2csXG4gICAgICAgIC8oPGNvZGU+KStDb21wdXRlciBjb2RlKDxcXC9jb2RlPikrICovZyxcbiAgICAgICAgLyg8bm93aWtpPikrSW5zZXJ0IG5vbi1mb3JtYXR0ZWQgdGV4dCBoZXJlKDxcXC9ub3dpa2k+KSsgKi9nLFxuICAgICAgICAvPSsgSGVhZGluZyB0ZXh0ID0rICovZyxcbiAgICAgICAgL1xcKiBCdWxsZXRlZCBsaXN0IGl0ZW0gKi9nLFxuICAgICAgICAvIyBOdW1iZXJlZCBsaXN0IGl0ZW0gKi9nLFxuICAgICAgICAvPGdhbGxlcnk+XFxuRXhhbXBsZS5qcGdcXHxDYXB0aW9uMVxcbkV4YW1wbGUuanBnXFx8Q2FwdGlvbjJcXG48XFwvZ2FsbGVyeT4gKi9nLFxuICAgICAgICAvI1JFRElSRUNUIFxcW1xcW1RhcmdldCBwYWdlIG5hbWVdXSAqL2csXG4gICAgICAgIC88IS0tIEludmlzaWJsZSBjb21tZW50IC0tPiAqL2csXG4gICAgICAgIC88XFxzKihiaWd8c21hbGx8c3VwfHN1YnxzfHV8Y29kZXxub3dpa2l8bm9pbmNsdWRlfG9ubHlpbmNsdWRlfGluY2x1ZGVvbmx5fGNlbnRlcnxibG9ja3F1b3RlfGdhbGxlcnkpXFxzKihcXHMrW148Pl0qKT8+XFxzKjxcXHMqXFwvXFxzKlxcMVxccyo+L2dpLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHJlZ2V4IG9mIHN0cmF5TWFya3VwUmVnZXhlcykgd2hpbGUgKHJlZ2V4LnRlc3QoY29udGVudCkpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnZXgsICcnKTtcblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBzcGFjaW5nIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqIEBwYXJhbSBzZWNvbmRSdW4gV2hldGhlciB0aGUgZnVuY3Rpb24gaXMgYmVpbmcgcnVuIGZvciB0aGUgc2Vjb25kIHRpbWUsIGFmdGVyIG90aGVyIHByb2Nlc3NpbmcuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBTcGFjaW5nKGNvbnRlbnQ6IHN0cmluZywgc2Vjb25kUnVuID0gZmFsc2UpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXFxifFxccHtQdW5jdHVhdGlvbn18XFxdXFxdfFxcfVxcfXxcXHc+KSB7Mix9KFxcYnxcXHB7UHVuY3R1YXRpb259fFxcW1xcW3xcXHtcXHt8PFxcdykvZ3UsICckMSAkMicpOyAvLyBSZW1vdmUgZXh0cmEgc3BhY2VzIGJldHdlZW4gd29yZHMgYW5kIHNlbnRlbmNlc1xuICAgIGlmICghc2Vjb25kUnVuKSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9eICt8ICskL2dtLCAnJyk7IC8vIFJlbW92ZSBleHRyYSBzcGFjZXMgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiBsaW5lc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1xcbnszLH0vZywgJ1xcblxcbicpOyAvLyBSZW1vdmUgZXh0cmEgbmV3bGluZXNcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXHMqKHt7W159XSpzdHVifX0pL2ksICdcXG5cXG5cXG4kMScpOyAvLyBFbnN1cmUgdGhlcmUgYXJlIHRocmVlIG5ld2xpbmVzIGJlZm9yZSB0aGUgZmlyc3Qgc3R1YiB0ZW1wbGF0ZVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1xccyskL2csICcnKTsgLy8gUmVtb3ZlIHRyYWlsaW5nIHNwYWNlc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL14oWyMqXSspICovZ20sICckMSAnKTsgLy8gRW5zdXJlIHRoZXJlIGlzIGEgc3BhY2UgYWZ0ZXIgYSBidWxsZXQgb3IgaGFzaCBpbiBhIGxpc3QgaXRlbVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL14oWyMqXSsgLiopXFxuKyg/PVsjKl0rICkvZ20sICckMVxcbicpOyAvLyBSZW1vdmUgbmV3bGluZXMgYmV0d2VlbiBsaXN0IGl0ZW1zXG4gICAgaWYgKCFzZWNvbmRSdW4pIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoLyg/PCFcXHwpXFxzKyg/PTxyZWYoPyFlcmVuY2VzKSkvZywgJycpOyAvLyBSZW1vdmUgc3BhY2VzIGJlZm9yZSByZWZlcmVuY2VzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvPFxcLyhbQS1aYS16XSspICs+L2csICc8LyQxPicpOyAvLyBSZW1vdmUgZXhjZXNzIHNwYWNlIGluIGNsb3NpbmcgdGFnc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL14oPSsuKj89KykkXFxuezIsfSg/PV49Ky4qPz0rJCkvZ20sICckMVxcbicpOyAvLyBSZW1vdmUgZXh0cmEgbmV3bGluZXMgYmV0d2VlbiBlbXB0eSBzZWN0aW9uIGFuZCBmb2xsb3dpbmcgc2VjdGlvblxuICAgIGNvbnRlbnQgPSBjb250ZW50LnRyaW0oKTsgLy8gUmVtb3ZlIHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiB0aGUgY29udGVudFxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIHJlZmVyZW5jZXMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwUmVmZXJlbmNlcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKFxuICAgICAgICAvKCg/OjxyZWYoPyFlcmVuY2VzKVteL10qPz4oPzouKD8hPFxcL3JlZikpKj88XFwvcmVmPnw8cmVmKD8hZXJlbmNlcykoPzouKD8hPFxcL3JlZikpKj9cXC8+KSspKFshLC47P10pL2csXG4gICAgICAgICckMiQxJyxcbiAgICApOyAvLyBGaXggcHVuY3R1YXRpb24gZm9sbG93aW5nIHJlZmVyZW5jZXNcblxuICAgIGNvbnN0IHJlZmVyZW5jZXM6IHsgc3RhcnQ6IG51bWJlcjsgZW5kOiBudW1iZXI7IGlzU2VsZkNsb3Npbmc/OiB0cnVlIH1bXSA9IFtdO1xuXG4gICAgbGV0IGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZykgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb2NlZWRzIHRocm91Z2ggdGhlIGNvbnRlbnQgdW50aWwgdGhlIGRlc2lyZWQgc3RyaW5nIGlzIGZvdW5kLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcm9jZWVkVW50aWxTdHJpbmcoZGVzaXJlZFN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aCAmJiAhaXNBdFN0cmluZyhkZXNpcmVkU3RyaW5nKSkgY3VycmVudExvY2F0aW9uKys7XG4gICAgfVxuXG4gICAgd2hpbGUgKGN1cnJlbnRMb2NhdGlvbiA8IGNvbnRlbnQubGVuZ3RoKVxuICAgICAgICBpZiAoaXNBdFN0cmluZygnPG5vd2lraT4nKSkgaXNJbnNpZGVOb3dpa2kgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8L25vd2lraT4nKSkgaXNJbnNpZGVOb3dpa2kgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPCEtLScpKSBpc0luc2lkZUNvbW1lbnQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCctLT4nKSkgaXNJbnNpZGVDb21tZW50ID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKCFpc0luc2lkZU5vd2lraSAmJiAhaXNJbnNpZGVDb21tZW50KVxuICAgICAgICAgICAgaWYgKCFpc0F0U3RyaW5nKCc8cmVmZXJlbmNlcycpICYmIGlzQXRTdHJpbmcoJzxyZWYnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gY3VycmVudExvY2F0aW9uIC0gNDtcblxuICAgICAgICAgICAgICAgIHByb2NlZWRVbnRpbFN0cmluZygnPicpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaXNTZWxmQ2xvc2luZyA9IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKHN0YXJ0LCBjdXJyZW50TG9jYXRpb24gLSAxKVxuICAgICAgICAgICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAgICAgICAgIC5lbmRzV2l0aCgnLycpO1xuXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlcy5wdXNoKGlzU2VsZkNsb3NpbmcgPyB7IHN0YXJ0LCBlbmQ6IGN1cnJlbnRMb2NhdGlvbiwgaXNTZWxmQ2xvc2luZyB9IDogeyBzdGFydCwgZW5kOiAtMSB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBdFN0cmluZygnPC9yZWY+JykpIHJlZmVyZW5jZXMuYXQoLTEpIS5lbmQgPSBjdXJyZW50TG9jYXRpb247XG4gICAgICAgICAgICBlbHNlIGN1cnJlbnRMb2NhdGlvbisrO1xuICAgICAgICBlbHNlIGN1cnJlbnRMb2NhdGlvbisrO1xuXG4gICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuXG4gICAgY29uc3QgcmVwbGFjZW1lbnRzOiBbc3RyaW5nLCBzdHJpbmddW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgcmVmZXJlbmNlIG9mIHJlZmVyZW5jZXMpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gY29udGVudC5zbGljZShyZWZlcmVuY2Uuc3RhcnQsIHJlZmVyZW5jZS5lbmQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXJ0VGFnID0gLzxyZWYoPyFlcmVuY2VzKS4qPz4vaXMuZXhlYyhvcmlnaW5hbFRleHQpIVswXTtcblxuICAgICAgICBjb25zdCBwYXJzZWRUYWcgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKFxuICAgICAgICAgICAgcmVmZXJlbmNlLmlzU2VsZkNsb3NpbmcgPyBzdGFydFRhZy5yZXBsYWNlKC8gKlxcLyAqPi8sICcgLz4nKSA6IHN0YXJ0VGFnICsgJzwvcmVmPicsXG4gICAgICAgICAgICAndGV4dC9odG1sJyxcbiAgICAgICAgKS5ib2R5LmZpcnN0Q2hpbGQgYXMgSFRNTFVua25vd25FbGVtZW50O1xuXG4gICAgICAgIGxldCBvdXRwdXQgPSBwYXJzZWRUYWcub3V0ZXJIVE1MLnJlcGxhY2VBbGwoJyZhbXA7JywgJyYnKTtcblxuICAgICAgICBjb25zdCB0YWdDb250ZW50ID0gb3JpZ2luYWxUZXh0XG4gICAgICAgICAgICAuc2xpY2Uoc3RhcnRUYWcubGVuZ3RoLCAtNilcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgIC5yZXBsYWNlQWxsKC9eXFxbICooW14gXFxdXSopICpdJC9nbSwgJyQxJylcbiAgICAgICAgICAgIC50cmltKCk7XG5cbiAgICAgICAgb3V0cHV0ID1cbiAgICAgICAgICAgIHJlZmVyZW5jZS5pc1NlbGZDbG9zaW5nIHx8IHRhZ0NvbnRlbnQubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgICAgPyBvdXRwdXQucmVwbGFjZSgvPlxccyo8XFwvcmVmPi8sICcgLz4nKVxuICAgICAgICAgICAgICAgIDogYCR7b3V0cHV0LnNsaWNlKDAsIC02KX0ke3RhZ0NvbnRlbnR9PC9yZWY+YDtcblxuICAgICAgICBpZiAob3JpZ2luYWxUZXh0ICE9PSBvdXRwdXQpIHJlcGxhY2VtZW50cy5wdXNoKFtvcmlnaW5hbFRleHQsIG91dHB1dF0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgW29yaWdpbmFsVGV4dCwgb3V0cHV0XSBvZiByZXBsYWNlbWVudHMpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2Uob3JpZ2luYWxUZXh0LCBvdXRwdXQpO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogRm9ybWF0cyB0ZW1wbGF0ZSBzcGFjaW5nIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBmb3JtYXQuXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFRlbXBsYXRlcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBlbnVtIEZvcm1hdFN0eWxlIHtcbiAgICAgICAgRXhwYW5kZWQsXG4gICAgICAgIEV4cGFuZGVkQWxpZ25lZCxcbiAgICAgICAgTWluaW1pemVkLFxuICAgICAgICBNaW5pbWl6ZWRTcGFjZWQsXG4gICAgfVxuXG4gICAgZW51bSBOYW1lc3BhY2Uge1xuICAgICAgICBVc2VyID0gMixcbiAgICAgICAgRHJhZnQgPSAxMTgsXG4gICAgfVxuXG4gICAgY2xhc3MgVGVtcGxhdGUge1xuICAgICAgICBwdWJsaWMgbG9jYXRpb246IHsgc3RhcnQ6IG51bWJlcjsgZW5kPzogbnVtYmVyIH07XG4gICAgICAgIHB1YmxpYyBpc05lc3RlZCA9IGZhbHNlO1xuXG4gICAgICAgIHB1YmxpYyBmdWxsVGV4dD86IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSBmdWxsVGV4dEVzY2FwZWQ/OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcmF3TmFtZT86IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSBuYW1lPzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIHBhcmFtZXRlcnM6IHsga2V5OiBzdHJpbmcgfCBudWxsOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuICAgICAgICBwdWJsaWMgc3ViVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG5cbiAgICAgICAgcHJpdmF0ZSBwbGFjZWhvbGRlclN0cmluZ3MgPSBbJ1xcdXtGMDAwMH0nLCAnXFx1ezEwRkZGRn0nLCAnXFx1e0ZGRkZFfSddO1xuXG4gICAgICAgIHByaXZhdGUgcGlwZUVzY2FwZVJlZ2V4ZXMgPSBbLyhcXFtcXFtbXlxcXV0qPylcXHwoLio/XV0pL2csIC8oPCEtLS4qPylcXHwoLio/LS0+KS9nLCAvKDxub3dpa2k+Lio/KVxcfCguKj88XFwvbm93aWtpPikvZ107XG5cbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0VGVtcGxhdGVTdHlsZXMgPSB7XG4gICAgICAgICAgICBbRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkXTogW1xuICAgICAgICAgICAgICAgICdhbWVyaWNhbiBmb290YmFsbCB1bmlmb3JtJyxcbiAgICAgICAgICAgICAgICAnYXVzdHJhbGlhbiBydWxlcyBmb290YmFsbCBraXQnLFxuICAgICAgICAgICAgICAgICdhdXRvbWF0aWMgdGF4b2JveCcsXG4gICAgICAgICAgICAgICAgJ2Jhc2ViYWxsIHVuaWZvcm0nLFxuICAgICAgICAgICAgICAgICdiYXNrZXRiYWxsIGtpdCcsXG4gICAgICAgICAgICAgICAgJ2JlYWNoaGFuZGJhbGwga2l0JyxcbiAgICAgICAgICAgICAgICAnYmxvY2txdW90ZScsXG4gICAgICAgICAgICAgICAgJ2NyaWNrZXQgdW5pZm9ybScsXG4gICAgICAgICAgICAgICAgJ2VsZWN0aW9uIGJveCcsXG4gICAgICAgICAgICAgICAgJ2ZpZWxkIGhvY2tleSBraXQnLFxuICAgICAgICAgICAgICAgICdmb290YmFsbCBraXQnLFxuICAgICAgICAgICAgICAgICdoYW5kYmFsbCBraXQnLFxuICAgICAgICAgICAgICAgICdoeWJyaWRib3gnLFxuICAgICAgICAgICAgICAgICdpY2Vob2NrZXkga2l0JyxcbiAgICAgICAgICAgICAgICAnaWNobm9ib3gnLFxuICAgICAgICAgICAgICAgICdpbmZvYm94JyxcbiAgICAgICAgICAgICAgICAnaW5mcmFzcGVjaWVzYm94JyxcbiAgICAgICAgICAgICAgICAnbGlzdGVuJyxcbiAgICAgICAgICAgICAgICAnbG9jYXRpb24gbWFwJyxcbiAgICAgICAgICAgICAgICAnbWVkaWNhbCByZXNvdXJjZXMnLFxuICAgICAgICAgICAgICAgICdtb3RvcnNwb3J0IHNlYXNvbicsXG4gICAgICAgICAgICAgICAgJ211bHRpcGxlIGltYWdlJyxcbiAgICAgICAgICAgICAgICAnbXljb21vcnBoYm94JyxcbiAgICAgICAgICAgICAgICAnbmF2Ym94JyxcbiAgICAgICAgICAgICAgICAnb29ib3gnLFxuICAgICAgICAgICAgICAgICdvcmJpdGJveCcsXG4gICAgICAgICAgICAgICAgJ29zbSBsb2NhdGlvbiBtYXAnLFxuICAgICAgICAgICAgICAgICdxdW90ZSBib3gnLFxuICAgICAgICAgICAgICAgICdzaWRlYmFyJyxcbiAgICAgICAgICAgICAgICAnc3BlY2llc2JveCcsXG4gICAgICAgICAgICAgICAgJ3N0YXJib3gnLFxuICAgICAgICAgICAgICAgICdzdWNjZXNzaW9uIGJveCcsXG4gICAgICAgICAgICAgICAgJ3RheG9ib3gnLFxuICAgICAgICAgICAgICAgICd2aXJ1c2JveCcsXG4gICAgICAgICAgICAgICAgJ3ZvbGxleWJhbGwga2l0JyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbRm9ybWF0U3R5bGUuTWluaW1pemVkXTogWydiaXJ0aCBkYXRlJywgJ2Nvb3JkJywgJ2RlYXRoIGRhdGUnLCAnZW5kIGRhdGUnLCAnbGFuZycsICdzdGFydCBkYXRlJ10sXG4gICAgICAgICAgICBbRm9ybWF0U3R5bGUuTWluaW1pemVkU3BhY2VkXTogWydpbmZvYm94IG1hcGZyYW1lJ10sXG4gICAgICAgIH07XG5cbiAgICAgICAgcHJpdmF0ZSBuYW1lc3BhY2VTcGVjaWZpY1RlbXBsYXRlcyA9IHtcbiAgICAgICAgICAgIFtOYW1lc3BhY2UuRHJhZnRdOiBbXG4gICAgICAgICAgICAgICAgJ2FmYyBjb21tZW50JyxcbiAgICAgICAgICAgICAgICAnYWZjIHN1Ym1pc3Npb24nLFxuICAgICAgICAgICAgICAgICdhZmMgc3VibWlzc2lvbi9kcmFmdCcsXG4gICAgICAgICAgICAgICAgJ2FmYyB0b3BpYycsXG4gICAgICAgICAgICAgICAgJ2RyYWZ0IGFydGljbGUnLFxuICAgICAgICAgICAgICAgICdkcmFmdCBjYXRlZ29yaWVzJyxcbiAgICAgICAgICAgICAgICAnZHJhZnQgdG9waWNzJyxcbiAgICAgICAgICAgICAgICAnZHJhZnQnLFxuICAgICAgICAgICAgICAgICdkcmFmdHMgbW92ZWQgZnJvbSBtYWluc3BhY2UnLFxuICAgICAgICAgICAgICAgICdwcmVsb2FkZHJhZnQgc3VibWl0JyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBbTmFtZXNwYWNlLlVzZXJdOiBbJ2Rhc2hib2FyZC53aWtpZWR1Lm9yZyBzYW5kYm94JywgJ3VzZXIgc2FuZGJveCcsICd1c2Vyc3BhY2UgZHJhZnQnXSxcbiAgICAgICAgfTtcblxuICAgICAgICBwcml2YXRlIHRlbXBsYXRlc1RvS2VlcENvbnRlbnQgPSBbJ2RyYWZ0IGNhdGVnb3JpZXMnXTtcblxuICAgICAgICBwcml2YXRlIHRlbXBsYXRlc1RvU3Vic3QgPSBbXG4gICAgICAgICAgICAnYXJ0aWNsZXBhZ2VuYW1lJyxcbiAgICAgICAgICAgICdhcnRpY2xlc3BhY2UnLFxuICAgICAgICAgICAgJ2Jhc2VwYWdlbmFtZScsXG4gICAgICAgICAgICAnZnVsbHBhZ2VuYW1lJyxcbiAgICAgICAgICAgICduYW1lc3BhY2UnLFxuICAgICAgICAgICAgJ25hbWVzcGFjZW51bWJlcicsXG4gICAgICAgICAgICAncGFnZW5hbWUnLFxuICAgICAgICAgICAgJ3Jvb3RwYWdlbmFtZScsXG4gICAgICAgICAgICAnc3ViamVjdHBhZ2VuYW1lJyxcbiAgICAgICAgICAgICdzdWJqZWN0c3BhY2UnLFxuICAgICAgICAgICAgJ3N1YnBhZ2VuYW1lJyxcbiAgICAgICAgICAgICd0YWxrcGFnZW5hbWUnLFxuICAgICAgICAgICAgJ3RhbGtzcGFjZScsXG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc3RhcnRMb2NhdGlvbjogbnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0geyBzdGFydDogc3RhcnRMb2NhdGlvbiB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHBhcnNlKCkge1xuICAgICAgICAgICAgdGhpcy5mdWxsVGV4dCA9IGNvbnRlbnQuc2xpY2UodGhpcy5sb2NhdGlvbi5zdGFydCwgdGhpcy5sb2NhdGlvbi5lbmQpO1xuICAgICAgICAgICAgdGhpcy5mdWxsVGV4dEVzY2FwZWQgPSB0aGlzLmZ1bGxUZXh0O1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YlRlbXBsYXRlIG9mIHRoaXMuc3ViVGVtcGxhdGVzKSB7XG4gICAgICAgICAgICAgICAgc3ViVGVtcGxhdGUucGFyc2UoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZnVsbFRleHRFc2NhcGVkID0gdGhpcy5mdWxsVGV4dEVzY2FwZWQucmVwbGFjZShzdWJUZW1wbGF0ZS5mdWxsVGV4dCEsIHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHRyaW1tZWRJbm5lclRleHQgPSB0aGlzLmZ1bGxUZXh0RXNjYXBlZC5zbGljZSgyLCAtMikudHJpbSgpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBpcGVFc2NhcGVSZWdleCBvZiB0aGlzLnBpcGVFc2NhcGVSZWdleGVzKVxuICAgICAgICAgICAgICAgIHdoaWxlIChwaXBlRXNjYXBlUmVnZXgudGVzdCh0cmltbWVkSW5uZXJUZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgdHJpbW1lZElubmVyVGV4dCA9IHRyaW1tZWRJbm5lclRleHQucmVwbGFjZUFsbChwaXBlRXNjYXBlUmVnZXgsIGAkMSR7dGhpcy5wbGFjZWhvbGRlclN0cmluZ3NbMV19JDJgKTtcblxuICAgICAgICAgICAgY29uc3QgdGFnRXF1YWxzRXNjYXBlUmVnZXhlcyA9IFsvPChcXHcrKSggW148Pl0rPykoPzwhXFwvKT4uKj88XFwvXFwxPi9nLCAvPChcXHcrKSggW148Pl0rPylcXC8+L2ddO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhZ0VxdWFsc0VzY2FwZVJlZ2V4IG9mIHRhZ0VxdWFsc0VzY2FwZVJlZ2V4ZXMpXG4gICAgICAgICAgICAgICAgdHJpbW1lZElubmVyVGV4dCA9IHRyaW1tZWRJbm5lclRleHQucmVwbGFjZUFsbCh0YWdFcXVhbHNFc2NhcGVSZWdleCwgKGZ1bGxUZXh0LCB0YWdOYW1lOiBzdHJpbmcsIGF0dHJpYnV0ZXM6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVsbFRleHQucmVwbGFjZShhdHRyaWJ1dGVzLCBhdHRyaWJ1dGVzLnJlcGxhY2VBbGwoJz0nLCB0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1syXSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gdHJpbW1lZElubmVyVGV4dC5zcGxpdCgnfCcpLm1hcCgocGFyYW1ldGVyKSA9PiBwYXJhbWV0ZXIucmVwbGFjZUFsbCh0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1sxXSwgJ3wnKS50cmltKCkpO1xuXG4gICAgICAgICAgICB0aGlzLnJhd05hbWUgPSBwYXJhbWV0ZXJzLnNoaWZ0KCk7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLnJhd05hbWU/LnJlcGxhY2VBbGwoJ18nLCAnICcpO1xuXG4gICAgICAgICAgICBjb25zdCBzcGxpdFBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzLm1hcCgocGFyYW1ldGVycykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVxdWFsc0xvY2F0aW9uID0gcGFyYW1ldGVycy5pbmRleE9mKCc9Jyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXF1YWxzTG9jYXRpb24gPT09IC0xKSByZXR1cm4geyBrZXk6IG51bGwsIHZhbHVlOiBwYXJhbWV0ZXJzLnJlcGxhY2VBbGwodGhpcy5wbGFjZWhvbGRlclN0cmluZ3NbMl0sICc9JykudHJpbSgpIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtZXRlcnMuc2xpY2UoZXF1YWxzTG9jYXRpb24gKyAxKS5yZXBsYWNlQWxsKHRoaXMucGxhY2Vob2xkZXJTdHJpbmdzWzJdLCAnPScpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBwYXJhbWV0ZXJzLnNsaWNlKDAsIGVxdWFsc0xvY2F0aW9uKS50cmltKCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBgJHt2YWx1ZS5zdGFydHNXaXRoKCdcXG4nKSA/ICdcXG4nIDogJyd9JHt2YWx1ZS50cmltKCl9YCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHNwbGl0UGFyYW1ldGVycztcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc2hvdWxkQmVSZW1vdmVkKCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZXNwYWNlLCB0ZW1wbGF0ZXNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMubmFtZXNwYWNlU3BlY2lmaWNUZW1wbGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgPT09IE51bWJlci5wYXJzZUludChuYW1lc3BhY2UpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGlmICh0ZW1wbGF0ZXMuaW5jbHVkZXModGhpcy5uYW1lIS50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZ2V0U3R5bGUoKSB7XG4gICAgICAgICAgICBsZXQgbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlUHJlZml4TGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGxldCBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZTogRm9ybWF0U3R5bGUgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2Zvcm1hdFN0eWxlLCB0ZW1wbGF0ZVByZWZpeGVzXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmRlZmF1bHRUZW1wbGF0ZVN0eWxlcykpXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0ZW1wbGF0ZVByZWZpeCBvZiB0ZW1wbGF0ZVByZWZpeGVzKVxuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCh0ZW1wbGF0ZVByZWZpeCkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJlZml4Lmxlbmd0aCA+PSBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVQcmVmaXhMZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVQcmVmaXhMZW5ndGggPSB0ZW1wbGF0ZVByZWZpeC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZSA9IE51bWJlci5wYXJzZUludChmb3JtYXRTdHlsZSkgYXMgRm9ybWF0U3R5bGU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZUZvcm1hdFN0eWxlO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBjbGVhbnVwUGFyYW1ldGVycygpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlUGFyYW1ldGVycyA9IG5ldyBTZXQoWydpbWFnZScsICdsb2dvJywgJ2NvdmVyJ10pO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBudW1iZXIgPSAxOyBudW1iZXIgPD0gMTA7IG51bWJlcisrKSBpbWFnZVBhcmFtZXRlcnMuYWRkKGBpbWFnZSR7bnVtYmVyfWApO1xuXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnMubWFwKCh7IGtleSwgdmFsdWUgfSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgJiYgaW1hZ2VQYXJhbWV0ZXJzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdbWycpICYmIHZhbHVlLmVuZHNXaXRoKCddXScpKSB2YWx1ZSA9IC9cXFtcXFsoLio/KV1dL2cuZXhlYyh2YWx1ZSkhWzFdLnNwbGl0KCd8JylbMF07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eKEZpbGV8SW1hZ2UpOi8sICcnKS5yZXBsYWNlQWxsKCdfJywgJyAnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4geyBrZXksIHZhbHVlIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBmb3JtYXQoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZnVsbFRleHQpIHRoaXMucGFyc2UoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkQmVSZW1vdmVkKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVzVG9LZWVwQ29udGVudC5pbmNsdWRlcyh0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkpID8gdGhpcy5wYXJhbWV0ZXJzWzBdLnZhbHVlIDogJyc7XG5cbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFN1YnN0ID0gdGhpcy50ZW1wbGF0ZXNUb1N1YnN0LnNvbWUoXG4gICAgICAgICAgICAgICAgKG5hbWUpID0+IG5hbWUgPT09IHRoaXMubmFtZSEudG9Mb3dlckNhc2UoKSB8fCB0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChgJHtuYW1lfTpgKSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nZXRTdHlsZSgpO1xuICAgICAgICAgICAgaWYgKHN0eWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3TmFtZSA9IHRoaXMubmFtZSE7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmFtZSEudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCd0ZW1wbGF0ZTonKSkgbmV3TmFtZSA9IHRoaXMubmFtZSEuc2xpY2UoOSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkU3Vic3QpIG5ld05hbWUgPSBgc3Vic3Q6JHtuZXdOYW1lfWA7XG5cbiAgICAgICAgICAgICAgICBpZiAobmV3TmFtZSAhPT0gdGhpcy5yYXdOYW1lISkgdGhpcy5mdWxsVGV4dEVzY2FwZWQgPSB0aGlzLmZ1bGxUZXh0RXNjYXBlZCEucmVwbGFjZSh0aGlzLnJhd05hbWUhLCBuZXdOYW1lKTtcblxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViVGVtcGxhdGUgb2YgdGhpcy5zdWJUZW1wbGF0ZXMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnVsbFRleHRFc2NhcGVkID0gdGhpcy5mdWxsVGV4dEVzY2FwZWQhLnJlcGxhY2UodGhpcy5wbGFjZWhvbGRlclN0cmluZ3NbMF0sIHN1YlRlbXBsYXRlLmZvcm1hdCgpKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bGxUZXh0RXNjYXBlZCE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IFtge3ske3Nob3VsZFN1YnN0ID8gJ3N1YnN0OicgOiAnJ30ke3RoaXMubmFtZX1gXTtcblxuICAgICAgICAgICAgdGhpcy5jbGVhbnVwUGFyYW1ldGVycygpO1xuXG4gICAgICAgICAgICBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkIHx8IHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWlyZWRLZXlMZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWQpXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkS2V5TGVuZ3RoID0gTWF0aC5tYXgoLi4udGhpcy5wYXJhbWV0ZXJzLm1hcCgocGFyYW1ldGVyKSA9PiBwYXJhbWV0ZXIua2V5Py5sZW5ndGggPz8gMCkpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIHBhcmFtZXRlcl0gb2YgdGhpcy5wYXJhbWV0ZXJzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAhcGFyYW1ldGVyLmtleSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXBhcmFtZXRlci52YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNsaWNlKGluZGV4ICsgMSkuZXZlcnkoKHBhcmFtZXRlcikgPT4gcGFyYW1ldGVyLmtleSA/PyAhcGFyYW1ldGVyLnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChgfCAke3BhcmFtZXRlci5rZXkgPyBgJHtwYXJhbWV0ZXIua2V5LnBhZEVuZChyZXF1aXJlZEtleUxlbmd0aCl9ID0gYCA6ICcnfSR7cGFyYW1ldGVyLnZhbHVlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBwYXJhbWV0ZXJdIG9mIHRoaXMucGFyYW1ldGVycy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgIXBhcmFtZXRlci52YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHBhcmFtZXRlci5rZXkgfHwgdGhpcy5wYXJhbWV0ZXJzLnNsaWNlKGluZGV4ICsgMSkuZXZlcnkoKHBhcmFtZXRlcikgPT4gcGFyYW1ldGVyLmtleSA/PyAhcGFyYW1ldGVyLnZhbHVlKSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goYHwke3BhcmFtZXRlci5rZXkgPyBgJHtwYXJhbWV0ZXIua2V5fT1gIDogJyd9JHtwYXJhbWV0ZXIudmFsdWV9YCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQucHVzaCgnfX0nKTtcblxuICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbMF0gKz0gJ319JztcblxuICAgICAgICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLk1pbmltaXplZFNwYWNlZCkge1xuICAgICAgICAgICAgICAgIG91dHB1dFtvdXRwdXQubGVuZ3RoIC0gMl0gKz0gJ319JztcblxuICAgICAgICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGpvaW5lZE91dHB1dCA9IG91dHB1dC5qb2luKFxuICAgICAgICAgICAgICAgIHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZCB8fCBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkXG4gICAgICAgICAgICAgICAgICAgID8gJ1xcbidcbiAgICAgICAgICAgICAgICAgICAgOiBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuTWluaW1pemVkU3BhY2VkXG4gICAgICAgICAgICAgICAgICAgICAgPyAnICdcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBzdWJUZW1wbGF0ZSBvZiB0aGlzLnN1YlRlbXBsYXRlcylcbiAgICAgICAgICAgICAgICBqb2luZWRPdXRwdXQgPSBqb2luZWRPdXRwdXQucmVwbGFjZSh0aGlzLnBsYWNlaG9sZGVyU3RyaW5nc1swXSwgc3ViVGVtcGxhdGUuZm9ybWF0KCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gam9pbmVkT3V0cHV0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWxsVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG5cbiAgICBjb25zdCBpbnNpZGVUZW1wbGF0ZXM6IFRlbXBsYXRlW10gPSBbXTtcbiAgICBsZXQgaXNJbnNpZGVMaW5rID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgbGV0IGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuXG4gICAgbGV0IGN1cnJlbnRMb2NhdGlvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGNvbnRlbnQgZm9sbG93aW5nIHRoZSBjdXJyZW50IGxvY2F0aW9uIG1hdGNoZXMgdGhlIGRlc2lyZWQgc3RyaW5nLlxuICAgICAqIEBwYXJhbSBkZXNpcmVkU3RyaW5nIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmc6IHN0cmluZykge1xuICAgICAgICBjb25zdCBpc0F0U3RyaW5nID0gY29udGVudC5zbGljZShjdXJyZW50TG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiArIGRlc2lyZWRTdHJpbmcubGVuZ3RoKSA9PT0gZGVzaXJlZFN0cmluZztcblxuICAgICAgICBpZiAoaXNBdFN0cmluZykgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgaWYgKGlzQXRTdHJpbmcoJzxub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPC9ub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwhLS0nKSkgaXNJbnNpZGVDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnLS0+JykpIGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmICghaXNJbnNpZGVOb3dpa2kgJiYgIWlzSW5zaWRlQ29tbWVudClcbiAgICAgICAgICAgIGlmIChpc0F0U3RyaW5nKCdbWycpKSBpc0luc2lkZUxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnNpZGVMaW5rICYmIGlzQXRTdHJpbmcoJ11dJykpIGlzSW5zaWRlTGluayA9IGZhbHNlO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygne3snKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKGN1cnJlbnRMb2NhdGlvbiAtIDIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGluc2lkZVRlbXBsYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmlzTmVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5zaWRlVGVtcGxhdGVzLmF0KC0xKT8uc3ViVGVtcGxhdGVzLnB1c2godGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGluc2lkZVRlbXBsYXRlcy5wdXNoKHRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNBdFN0cmluZygnfX0nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RUZW1wbGF0ZSA9IGluc2lkZVRlbXBsYXRlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxhc3RUZW1wbGF0ZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBsYXN0VGVtcGxhdGUubG9jYXRpb24uZW5kID0gY3VycmVudExvY2F0aW9uO1xuXG4gICAgICAgICAgICAgICAgYWxsVGVtcGxhdGVzLnB1c2gobGFzdFRlbXBsYXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSBjdXJyZW50TG9jYXRpb24rKztcbiAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGxldCBuZXdDb250ZW50ID0gY29udGVudDtcblxuICAgIGZvciAoY29uc3QgdGVtcGxhdGUgb2YgYWxsVGVtcGxhdGVzKVxuICAgICAgICBpZiAoIXRlbXBsYXRlLmlzTmVzdGVkKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5wYXJzZSgpO1xuXG4gICAgICAgICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKHRlbXBsYXRlLmZ1bGxUZXh0ISwgdGVtcGxhdGUuZm9ybWF0KCkpO1xuICAgICAgICB9XG5cbiAgICByZXR1cm4gbmV3Q29udGVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHVubmVjZXNzYXJ5IGNvbW1lbnRzIGZyb20gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiByZW1vdmVDb21tZW50cyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBpZiAobXcuY29uZmlnLmdldCgnd2dOYW1lc3BhY2VOdW1iZXInKSAhPT0gMCkgcmV0dXJuIGNvbnRlbnQ7XG5cbiAgICBjb25zdCBjb21tZW50cyA9IFtcbiAgICAgICAgJ0RvIG5vdCByZW1vdmUgdGhpcyBsaW5lJyxcbiAgICAgICAgJ0VESVQgQkVMT1cgVEhJUyBMSU5FJyxcbiAgICAgICAgJ0ltcG9ydGFudCwgZG8gbm90IHJlbW92ZSBhbnl0aGluZyBhYm92ZSB0aGlzIGxpbmUgYmVmb3JlIGFydGljbGUgaGFzIGJlZW4gY3JlYXRlZCcsXG4gICAgICAgICdJbXBvcnRhbnQsIGRvIG5vdCByZW1vdmUgdGhpcyBsaW5lIGJlZm9yZSBhcnRpY2xlIGhhcyBiZWVuIGNyZWF0ZWQnLFxuICAgICAgICAnSW5saW5lIGNpdGF0aW9ucyBhZGRlZCB0byB5b3VyIGFydGljbGUgd2lsbCBhdXRvbWF0aWNhbGx5IGRpc3BsYXkgaGVyZScsXG4gICAgICAgICdOb3RlOiBUaGUgZm9sbG93aW5nIHBhZ2VzIHdlcmUgcmVkaXJlY3RzIHRvICcsXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgY29tbWVudCBvZiBjb21tZW50cylcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbChuZXcgUmVnRXhwKGAgKjwhLS0gPyR7ZXNjYXBlUmVnZXhDaGFyYWN0ZXJzKGNvbW1lbnQpfS4qPy0tPiAqXFxuP2AsICdncycpLCAnJyk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkFtQ1EsR0FBRyxPQUFPLElBQUksbUJBQW1CLEVBQUksR0FDcEMsR0FBRyxPQUFPLElBQUksc0JBQXNCLEdBRXpDLEdBQUcsT0FBTyxNQUFNLENBQUMsaUJBQWtCLHNCQUFzQixFQUFHLElBQU0sQ0FDOUQsR0FBRyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9yQixFQUVNLElBQU1BLEVBQU8sR0FBRyxLQUFLLGVBQ2pCLEdBQUcsT0FBTyxJQUFJLE1BQU0sSUFBTSxVQUFZLGVBQWlCLGFBQ3ZELElBQ0EsMEJBQ0EsaUJBQ0osRUFFSUMsRUFBeUIsR0FFdkJDLEVBQWdCLDRGQUV0QixHQUFHLEtBQUssNEJBQTRCLEVBQUUsSUFBSSxJQUFNLENBQzVDLEdB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QUFXLElBQUksRUFBR3NFLEVBQWUsV0FDakR0RSxFQUFXLElBQUksRUFBRyxDQUN2QixJQUFNdUUsRUFBVyxJQUFJOUIsRUFBUzFDLEVBQWtCLENBQUMsRUFFN0NzRSxFQUFnQixPQUFTLElBQ3pCRSxFQUFTLFNBQVcsR0FDcEJGLEVBQWdCLEdBQUcsRUFBRSxHQUFHLGFBQWEsS0FBS0UsQ0FBUSxHQUd0REYsRUFBZ0IsS0FBS0UsQ0FBUSxDQUNqQyxTQUFXdkUsRUFBVyxJQUFJLEVBQUcsQ0FDekIsSUFBTXdFLEVBQWVILEVBQWdCLElBQUksRUFDekMsR0FBSSxDQUFDRyxFQUFjLFNBRW5CQSxFQUFhLFNBQVMsSUFBTXpFLEVBRTVCcUUsRUFBYSxLQUFLSSxDQUFZLENBQ2xDLE1BQU96RSxTQUNOQSxJQUVULElBQUkwRSxFQUFhN0csRUFFakIsUUFBVzJHLEtBQVlILEVBQ2RHLEVBQVMsV0FDVkEsRUFBUyxNQUFNLEVBRWZFLEVBQWFBLEVBQVcsUUFBUUYsRUFBUyxTQUFXQSxFQUFTLE9BQU8sQ0FBQyxHQUc3RSxPQUFPRSxDQUNYLENBTUEsU0FBU2pILEVBQWVJLEVBQWlCLENBQ3JDLEdBQUksR0FBRyxPQUFPLElBQUksbUJBQW1CLElBQU0sRUFBRyxPQUFPQSxFQUVyRCxJQUFNOEcsRUFBVyxDQUNiLDBCQUNBLHVCQUNBLG9GQUNBLHFFQUNBLHlFQUNBLDhDQUNKLEVBRUEsUUFBV0MsS0FBV0QsRUFDbEI5RyxFQUFVQSxFQUFRLFdBQVcsSUFBSSxPQUFPLFdBQVdGLEVBQXNCaUgsQ0FBTyxDQUFDO0FBQUEsR0FBZSxJQUFJLEVBQUcsRUFBRSxFQUU3RyxPQUFPL0csQ0FDWCIsCiAgIm5hbWVzIjogWyJsaW5rIiwgInNob3VsZEFkZFNjcmlwdE1lc3NhZ2UiLCAic2NyaXB0TWVzc2FnZSIsICJzdW1tYXJ5SW5wdXQiLCAiZXZlbnQiLCAiZWRpdEJveCIsICJvcmlnaW5hbFRleHQiLCAiZmluYWxUZXh0IiwgImNsZWFudXBTZWN0aW9uSGVhZGVycyIsICJjbGVhbnVwTWFnaWNXb3JkcyIsICJjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyIsICJjbGVhbnVwQ2F0ZWdvcmllcyIsICJjbGVhbnVwTGlua3MiLCAiY2xlYW51cEltcHJvcGVyQ2hhcmFjdGVycyIsICJjbGVhbnVwWWVhclJhbmdlcyIsICJjbGVhbnVwU3RyYXlNYXJrdXAiLCAiY2xlYW51cFNwYWNpbmciLCAiY2xlYW51cFJlZmVyZW5jZXMiLCAiZm9ybWF0VGVtcGxhdGVzIiwgInJlbW92ZUNvbW1lbnRzIiwgInN1cmZhY2VNb2RlbCIsICJlc2NhcGVSZWdleENoYXJhY3RlcnMiLCAic3RyaW5nIiwgImNvbnRlbnQiLCAiY29tbW9uUmVwbGFjZW1lbnRzIiwgImNvbW1vbk1pc2NhcGl0YWxpemVkV29yZHMiLCAicmV2ZXJzZUNvbW1vblJlcGxhY2VtZW50cyIsICJrZXkiLCAidmFsdWVzIiwgInZhbHVlIiwgInBhcnNlZEhlYWRlcnMiLCAiaGVhZGVyIiwgIm5hbWUiLCAic3RhcnRNYXJrdXAiLCAiZW5kTWFya3VwIiwgImxpbmtzIiwgImRlcHRoIiwgImhlYWRlcnNTZXQiLCAidGl0bGVTcGFjZXIiLCAibG93ZXJjYXNlTmFtZSIsICJjYXBpdGFsaXplZE5hbWUiLCAid29yZCIsICJvdXRwdXQiLCAicGFyc2VkVGFncyIsICJ0YWciLCAiZnVsbFRhZyIsICJ0eXBlIiwgImN1cnJlbnRUaXRsZSIsICJvcmlnaW5hbFRhZ1JlZ2V4IiwgInVucHJlZml4ZWRUaXRsZSIsICJ0aXRsZSIsICJkZWZhdWx0S2V5IiwgImN1c3RvbUtleSIsICJuZXdUZXh0IiwgImZ1bmN0aW9uc0NhbGxlZFdoaWxlRXNjYXBlZCIsICJjbG9zZWRMaW5rcyIsICJpc0luc2lkZU5vd2lraSIsICJpc0luc2lkZUNvbW1lbnQiLCAiY3VycmVudExvY2F0aW9uIiwgImlzQXRTdHJpbmciLCAiZGVzaXJlZFN0cmluZyIsICJzaG91bGRJbmNyZW1lbnQiLCAibGFzdExpbmsiLCAibmV3TGlua0NvbnRlbnQiLCAibmFtZXNwYWNlTmFtZXMiLCAibGlua0xvY2F0aW9uIiwgImlubmVyTGluayIsICJ1bnBhcnNlZExpbmsiLCAicGFyYW1ldGVycyIsICJhbHRUZXh0IiwgImlzRmlyc3RDaGFyYWN0ZXJDb2xvbiIsICJzaG91bGRGaXJzdENoYXJhY3RlckJlQ29sb24iLCAibGlua1VwcGVyY2FzZVN0YXJ0IiwgImxpbmtMb3dlcmNhc2VTdGFydCIsICJuYW1lc3BhY2UiLCAiYWZ0ZXJMaW5rVGV4dCIsICJuZXdMaW5rIiwgImZ1bmN0aW9uVG9DYWxsIiwgImxvb3BDb3VudGVyIiwgImxpbmtEYXRhIiwgImxpbmtDb250ZW50IiwgInJ1biIsICJlbGlwc2lzUGxhY2Vob2xkZXIiLCAibmJzcFBsYWNlaG9sZGVyIiwgIm9yaWdpbmFsIiwgInN0YXJ0IiwgImVuZCIsICJzdHJheU1hcmt1cFJlZ2V4ZXMiLCAicmVnZXgiLCAic2Vjb25kUnVuIiwgInJlZmVyZW5jZXMiLCAicHJvY2VlZFVudGlsU3RyaW5nIiwgImlzU2VsZkNsb3NpbmciLCAicGFyc2VyIiwgInJlcGxhY2VtZW50cyIsICJyZWZlcmVuY2UiLCAic3RhcnRUYWciLCAidGFnQ29udGVudCIsICJGb3JtYXRTdHlsZSIsICJOYW1lc3BhY2UiLCAiVGVtcGxhdGUiLCAic3RhcnRMb2NhdGlvbiIsICJzdWJUZW1wbGF0ZSIsICJ0cmltbWVkSW5uZXJUZXh0IiwgInBpcGVFc2NhcGVSZWdleCIsICJ0YWdFcXVhbHNFc2NhcGVSZWdleGVzIiwgInRhZ0VxdWFsc0VzY2FwZVJlZ2V4IiwgImZ1bGxUZXh0IiwgInRhZ05hbWUiLCAiYXR0cmlidXRlcyIsICJwYXJhbWV0ZXIiLCAic3BsaXRQYXJhbWV0ZXJzIiwgImVxdWFsc0xvY2F0aW9uIiwgInRlbXBsYXRlcyIsICJtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVQcmVmaXhMZW5ndGgiLCAibW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlRm9ybWF0U3R5bGUiLCAiZm9ybWF0U3R5bGUiLCAidGVtcGxhdGVQcmVmaXhlcyIsICJ0ZW1wbGF0ZVByZWZpeCIsICJpbWFnZVBhcmFtZXRlcnMiLCAibnVtYmVyIiwgInNob3VsZFN1YnN0IiwgInN0eWxlIiwgIm5ld05hbWUiLCAicmVxdWlyZWRLZXlMZW5ndGgiLCAiaW5kZXgiLCAiam9pbmVkT3V0cHV0IiwgImFsbFRlbXBsYXRlcyIsICJpbnNpZGVUZW1wbGF0ZXMiLCAiaXNJbnNpZGVMaW5rIiwgInRlbXBsYXRlIiwgImxhc3RUZW1wbGF0ZSIsICJuZXdDb250ZW50IiwgImNvbW1lbnRzIiwgImNvbW1lbnQiXQp9Cg==
