// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/article-cleaner.ts

"use strict";(()=>{var v=new mw.Api;async function C(e){return(await v.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:e})).query.pages[0].revisions?.[0].slots.main.content.trim()}mw.config.get("wgNamespaceNumber")<0||mw.config.get("wgIsProbablyEditable")&&mw.loader.using(["mediawiki.util","jquery.textSelection"],()=>{mw.util.addCSS(`
#article-cleaner {
    display: none;
}

#content:has(#wpTextbox1) #article-cleaner {
    display: unset;
}`);let e=mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-navigation":"p-cactions","#","Perform article cleanup","article-cleaner"),p=!1,f="Cleaned up article content (via [[User:Eejit43/scripts/article-cleaner|article-cleaner]])";mw.hook("ve.saveDialog.stateChanged").add(()=>{if(p){let m=document.querySelector(".ve-ui-mwSaveDialog-summary textarea");m.value.includes(f.slice(1))||(m.value&&!m.value.startsWith("/* ")&&!m.value.endsWith(" */ ")?m.value+=`; ${f.charAt(0).toLowerCase()+f.slice(1)}`:m.value=`${m.value}${f}`),p=!1}}),e.addEventListener("click",async m=>{m.preventDefault();let o=$("#wpTextbox1");if(o.length===0)return mw.notify("Edit box not found!",{type:"error",autoHideSeconds:"short"});let g=o.textSelection("getContents"),a=g;if(a=L(a),a=R(a),a=N(a),a=I(a),a=P(a),a=F(a,[M,O]),a=D(a),a=y(a),a=_(a),a=await U(a),a=H(a),a=y(a,!0),a=W(a),g===a)mw.notify("No changes to be made to the article!",{type:"warn",autoHideSeconds:"short"});else{if(ve.init){let u=ve.init.target.getSurface().getModel();u.getLinearFragment(u.getRangeFromSourceOffsets(0,g.length)).insertContent(a),u.setSelection(new ve.dm.LinearSelection(new ve.Range(0,0)))}else o.textSelection("setContents",a),o.textSelection("setSelection",{start:0});mw.notify("Article cleanup complete!",{type:"success",autoHideSeconds:"short"});let d=document.querySelector("#wpSummary");d?d.value.includes(f.slice(1))||(d.value?d.value+=`; ${f.charAt(0).toLowerCase()+f.slice(1)}`:d.value=f):p=!0}})});function A(e){return e.replaceAll(/[$()*+.?[\\\]^{|}]/g,"\\$&")}function L(e){let p=/[\u0000-\u0009\u000B\u000C\u000E-\u001F\u007F\u00AD\u200B-\u200F\u202A-\u202E\u2060\u2063\uFEFF]/g;return p.test(e)&&(e=e.replaceAll(p,"")),e}function R(e){let p={"See also":["also see"],References:["reference","source","sources","citation","citations"],"Further reading":["further reading"],"External links":["external link","weblink","weblinks"]},f=["and","birth","career","death","education","life","of","or"],m=Object.fromEntries(Object.entries(p).flatMap(([u,r])=>[[u.toLowerCase(),u],...r.map(s=>[s,u])])),g=[...e.matchAll(/(?<=^|\n)\n*(?<startMarkup>=+) *(?<name>.*?) *(?<endMarkup>=+)(\n+|$)/g)].map(u=>{let{name:r}=u.groups,{startMarkup:s,endMarkup:c}=u.groups;r=r.replaceAll(/'{3}/g,"");let b=r.matchAll(/\[\[(.+?)]]/g).toArray();for(let t of b)r=r.replace(t[0],t[1].split("|").at(-1));let w=Math.max(s.length,c.length,2);return{name:r,depth:w,original:u[0]}}),a=new Set(g.map(u=>u.name)),d=g.length>0&&/^\n*=+ | =+\n+$/.test(g[0].original)?" ":"";for(let u of g){let r=u.name.toLowerCase(),c=r in m&&!a.has(m[r])?m[r]:u.name;for(let w of f)c=c.replaceAll(new RegExp(`\\b${w}\\b`,"gi"),w);c=c.charAt(0).toUpperCase()+c.slice(1);let b=`${"=".repeat(u.depth)}${d}${c}${d}${"=".repeat(u.depth)}`;u.original!==b&&(e=e.replace(u.original,`

${b}
`))}return e}function N(e){return e.replaceAll(/__(INDEX|NOINDEX|NEWSECTIONLINK|NONEWSECTIONLINK|NOEDITSECTION|DISAMBIG|STATICREDIRECT|FORCETOC)__\n*/g,"")}function I(e){let f=[...e.matchAll(/{{(displaytitle|defaultsort)[:|](.*?)}}/gi)].map(o=>{let[g,a,d]=o;return{type:a.toUpperCase(),value:d,original:g}}),m=mw.Title.newFromText(mw.config.get("wgPageName"));for(let o of f){let g=new RegExp(`${A(o.original)}
*`,"g"),a=mw.Title.newFromText(o.value);if(!a)continue;let d=mw.Title.makeTitle(m.getNamespaceId(),a.getMainText());if(!d)continue;let u=o.type==="DISPLAYTITLE"?m.toText():m.getMainText(),r=o.type==="DISPLAYTITLE"?d.toText():d.getMainText();if(u===r){e=e.replace(g,"");continue}let s=`{{${o.type}:${r}}}
`;e=e.replace(g,s)}return e}function P(e){return e.replaceAll(/(\[\[|}}):?category:(.*?)(]]|}})/gi,`[[${mw.config.get("wgCanonicalNamespace")==="Draft"?":":""}Category:$2]]`)}function F(e,p){let f=[],m=[],o=!1,g=!1,a=0;function d(s,c=!0){let b=e.slice(a,a+s.length)===s;return b&&c&&(a+=s.length),b}for(;a<e.length;)if(d("<nowiki>"))o=!0;else if(d("</nowiki>"))o=!1;else if(d("<!--"))g=!0;else if(d("-->"))g=!1;else if(!o&&!g)if(d("[["))m.push({start:a-2,end:-1,isNested:m.length>0});else if(d("]]")){let s=m.pop();if(!s)continue;s.end=a,f.push(s)}else a++;else a++;let u=[],r=Object.values(mw.config.get("wgFormattedNamespaces"));for(let s of f){let c=e.slice(s.start+2,s.end-2),[b,...w]=c.split("|");e=e.slice(0,s.start+2)+"\0".repeat(b.length)+e.slice(s.start+2+b.length);let t=b.replaceAll("_"," ").trim(),i=w.join("|");i=i===" "?" ":i.trim();let h=t.startsWith(":");h&&(t=t.slice(1));let n=!1,x=t.charAt(0).toUpperCase()+t.slice(1),l=t.charAt(0).toLowerCase()+t.slice(1),T=t.split(":")[0];T=T.charAt(0).toUpperCase()+T.slice(1),t.includes(":")&&(x.startsWith("Image:")&&(t=`${t.startsWith("Image:")?"F":"f"}ile:${t.slice(6)}`),h&&(["Image","File","Category"].includes(x.split(":")[0])||!r.includes(T))&&(n=!0));let S="";if(/[!',.:;?]$/.test(i)&&!["Image","File","Category"].includes(x.split(":")[0])){let E=i.slice(-1);t.endsWith(E)||(S=E,i=i.slice(0,-1))}t===i?i="":new RegExp(`^${A(t)}[a-z]+$`).test(i)&&(S=i.slice(t.length)+S,i="");for(let E of[x,l])E===i?(t=E,i=""):new RegExp(`^${A(E)}[a-z]+$`).test(i)&&(t=E,S=i.slice(E.length)+S,i="");(i&&t.includes(":")&&r.includes(T)||t.startsWith("file:")||t.startsWith("category:"))&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t=`${n?":":""}${t}`,t=t.padStart(b.length,"\0");let k=`[[${t}${i?`|${i}`:""}]]${S}`;u.push([s,k])}for(let s of p)e=s(e,1);for(let s=0;s<2;s++)for(let[c,b]of u)s===0&&c.isNested||s===1&&!c.isNested||(e=e.slice(0,c.start)+b.padEnd(c.end-c.start,"\0")+e.slice(c.end));for(let s of p)e=s(e,2);return e.replaceAll("\0","")}function M(e,p){let f="\x7F",m="\x9F";return p===1?(e=e.replaceAll(/[“”„‟]/g,'"'),e=e.replaceAll(/[‘’‚‛]/g,"'"),e=e.replaceAll("\u2026",f),e=e.replaceAll("\xA0",m)):(e=e.replaceAll(f,"..."),e=e.replaceAll(m,"&nbsp;")),e}function O(e,p){return p===1&&(e=e.replaceAll(/(\(\d{3,4}) ?[‒–−-] ?(\d{3,4}\))/g,(f,m,o)=>`${m}\u2013${o}`.padEnd(f.length,"\0"))),e}function D(e){let p=[/'+(Bold|Italic)( text)?'+ */g,/(<big>)+Big( text)?(<\/big>)+ */g,/(<small>)+Small( text)?(<\/small>)+ */g,/(<sup>)+Superscript( text)?(<\/sup>)+ */g,/(<sub>)+Subscript( text)?(<\/sub>)+ */g,/(<s>)+Strikethrough(<\/s>)+ */g,/(<u>)+Underline(<\/u>)+ */g,/(<code>)+Computer code(<\/code>)+ */g,/(<nowiki>)+Insert non-formatted text here(<\/nowiki>)+ */g,/=+ Heading text =+ */g,/\* Bulleted list item */g,/# Numbered list item */g,/<gallery>\nExample.jpg\|Caption1\nExample.jpg\|Caption2\n<\/gallery> */g,/#REDIRECT \[\[Target page name]] */g,/<!-- Invisible comment --> */g,/<\s*(big|small|sup|sub|s|u|code|nowiki|noinclude|onlyinclude|includeonly|center|blockquote|gallery)\s*(\s+[^<>]*)?>\s*<\s*\/\s*\1\s*>/gi];for(let f of p)for(;f.test(e);)e=e.replace(f,"");return e}function y(e,p=!1){return e=e.replaceAll(/(\b|\p{Punctuation}|\]\]|\}\}|\w>) {2,}(\b|\p{Punctuation}|\[\[|\{\{|<\w)/gu,"$1 $2"),p||(e=e.replaceAll(/^ +| +$/gm,"")),e=e.replaceAll(/\n{3,}/g,`

`),e=e.replace(/\s*({{[^}]*stub}})/i,`

$1`),e=e.replaceAll(/\s+$/g,""),e=e.replaceAll(/^([#*]+) */gm,"$1 "),e=e.replaceAll(/^([#*]+ .*)\n+(?=[#*]+ )/gm,`$1
`),p||(e=e.replaceAll(/(?<!\|)\s+(?=<ref(?!erences))/g,"")),e=e.replaceAll(/<\/([A-Za-z]+) +>/g,"</$1>"),e=e.replaceAll(/^(=+.*?=+)$\n{2,}(?=^=+.*?=+$)/gm,`$1
`),e=e.trim(),e}function _(e){e=e.replaceAll(/((?:<ref(?!erences)[^/]*?>.*?<\/ref>|<ref(?!erences).*?\/>)+)([!,.;?])?/g,(r,s,c)=>(c??"")+s);let p=[],f=!1,m=!1,o=0;function g(r){let s=e.slice(o,o+r.length)===r;return s&&(o+=r.length),s}function a(r){for(;o<e.length&&!g(r);)o++}for(;o<e.length;)if(g("<nowiki>"))f=!0;else if(g("</nowiki>"))f=!1;else if(g("<!--"))m=!0;else if(g("-->"))m=!1;else if(!f&&!m)if(!g("<references")&&g("<ref")){let r=o-4;a(">");let s=e.slice(r,o-1).trim().endsWith("/");p.push(s?{start:r,end:o,isSelfClosing:s}:{start:r,end:-1})}else g("</ref>")?p.at(-1).end=o:o++;else o++;let d=new DOMParser,u=[];for(let r of p){let s=e.slice(r.start,r.end),c=/<ref(?!erences).*?>/is.exec(s)[0],w=d.parseFromString(r.isSelfClosing?c.replace(/ *\/ *>/," />"):c+"</ref>","text/html").body.firstChild.outerHTML.replaceAll("&amp;","&"),t=s.slice(c.length,-6).trim().replaceAll(/^\[ *([^ \]]*) *]$/gm,"$1").trim();w=r.isSelfClosing||t.length===0?w.replace(/>\s*<\/ref>/," />"):`${w.slice(0,-6)}${t}</ref>`,s!==w&&u.push([s,w])}for(let[r,s]of u)e=e.replace(r,s);return e}async function U(e){let p;(x=>(x[x.Expanded=0]="Expanded",x[x.ExpandedAligned=1]="ExpandedAligned",x[x.Minimized=2]="Minimized",x[x.MinimizedSpaced=3]="MinimizedSpaced"))(p||={});let f;(n=>(n[n.User=2]="User",n[n.Template=10]="Template",n[n.Draft=118]="Draft"))(f||={});let m=JSON.parse(await C("User:Eejit43/scripts/article-cleaner.json")??"[]"),o=Object.fromEntries(m.flatMap(t=>t.from.map(i=>[i.charAt(0).toLowerCase()+i.slice(1),t.to])));class g{location;isNested=!1;fullText;fullTextEscaped;rawName;name;parameters=[];subTemplates=[];PLACEHOLDER_STRINGS=["\u{F0000}","\u{10FFFF}","\u{FFFFE}"];PIPE_ESCAPE_REGEXES=[/(\[\[[^\]]*?)\|(.*?]])/g,/(<!--.*?)\|(.*?-->)/g,/(<nowiki>.*?)\|(.*?<\/nowiki>)/g];TAG_EQUALS_ESCAPE_REGEXES=[/<(\w+)( [^<>]+?)(?<!\/)>.*?<\/\1>/g,/<(\w+)( [^<>]+?)\/>/g];templateAliases=o;defaultTemplateStyles={1:["album rating","album reviews","american football uniform","australian rules football kit","automatic taxobox","baseball uniform","basketball kit","beachhandball kit","blockquote","chembox","cricket uniform","election box","episode list","external music video","extra album cover","field hockey kit","football box","football kit","footballbox","handball kit","hybridbox","icehockey kit","ichnobox","infobox","infraspeciesbox","judo bracket","judo repechage","listen","location map","medical resources","motorsport season","multiple image","music ratings","mycomorphbox","navbox","oobox","orbitbox","osm location map","quote box","repechage","rugbybox","sidebar","single ratings","singles","song ratings","speciesbox","starbox","succession box","taxobox","team bracket","track listing","tweet","virusbox","volleyball kit","nteambracket","2nteam-nteambracket","2teambracket","3teambracket","3teamrr","4teambracket","4teamrr","5teambracket","5teamrr","6teambracket","6teamrr","7teambracket","7teamrr","8teambracket","8teamroundrobin","8teamrr","9teambracket","10teambracket","11teambracket","12teambracket","13teambracket","14teambracket","15teambracket","16teambracket","18teambracket","20teambracket","24teambracket","27teambracket","32teambracket","40teambracket","48teambracket","64teambracket","128teambracket"],2:["birth date","coord","death date","end date","lang","start date"],3:["infobox mapframe"]};namespaceSpecificTemplates={118:["afc comment","afc submission","afc submission/draft","afc topic","draft article","draft categories","draft topics","draft","drafts moved from mainspace","preloaddraft submit"],2:["dashboard.wikiedu.org sandbox","user sandbox","userspace draft"]};templatesToKeepContent=["draft categories"];templatesToSubst=["articlepagename","articlespace","basepagename","fullpagename","namespace","namespacenumber","pagename","rootpagename","subjectpagename","subjectspace","subpagename","talkpagename","talkspace","pagenamebase"];constructor(i){this.location={start:i}}parse(){this.fullText=e.slice(this.location.start,this.location.end),this.fullTextEscaped=this.fullText;for(let l of this.subTemplates)l.parse(),this.fullTextEscaped=this.fullTextEscaped.replace(l.fullText,this.PLACEHOLDER_STRINGS[0]);let i=this.fullTextEscaped.slice(2,-2).trim();for(let l of this.PIPE_ESCAPE_REGEXES)for(;l.test(i);)i=i.replaceAll(l,`$1${this.PLACEHOLDER_STRINGS[1]}$2`);for(let l of this.TAG_EQUALS_ESCAPE_REGEXES)i=i.replaceAll(l,(T,S,k)=>T.replace(k,k.replaceAll("=",this.PLACEHOLDER_STRINGS[2])));let h=i.split("|").map(l=>l.replaceAll(this.PLACEHOLDER_STRINGS[1],"|").trim());this.rawName=h.shift(),this.name=this.rawName.replaceAll("_"," "),this.name.toLowerCase().startsWith("template:")&&(this.name=this.name.slice(9));let n=this.name.charAt(0).toLowerCase()+this.name.slice(1);this.name=n in this.templateAliases?this.templateAliases[n]:this.name;let x=h.map(l=>{let T=l.indexOf("=");if(T===-1)return{key:null,value:l.replaceAll(this.PLACEHOLDER_STRINGS[2],"=").trim()};let S=l.slice(T+1).replaceAll(this.PLACEHOLDER_STRINGS[2],"=");return{key:l.slice(0,T).trim(),value:`${S.startsWith(`
`)?`
`:""}${S.trim()}`}});this.parameters=x}shouldBeRemoved(){for(let[i,h]of Object.entries(this.namespaceSpecificTemplates))if(mw.config.get("wgNamespaceNumber")!==Number.parseInt(i)&&h.includes(this.name.toLowerCase()))return!0;return!1}getStyle(){let i=0,h;for(let[n,x]of Object.entries(this.defaultTemplateStyles))for(let l of x)this.name.toLowerCase().startsWith(l)&&l.length>=i&&(i=l.length,h=Number.parseInt(n));return h}cleanupParameters(){let i=new Set(["cover","image_flag","image","logo","map_image"]);for(let h=1;h<=10;h++)i.add(`image${h}`);this.parameters=this.parameters.map(({key:h,value:n})=>(h&&i.has(h)&&(n=n.trim(),n.startsWith("[[")&&n.endsWith("]]")&&(n=/\[\[(.*?)]]/g.exec(n)[1].split("|")[0]),n=n.replace(/^(File|Image):/,"").replaceAll("_"," ")),{key:h,value:n}))}format(){if(this.fullText||this.parse(),this.shouldBeRemoved())return this.templatesToKeepContent.includes(this.name.toLowerCase())?this.parameters[0].value:"";let i=mw.config.get("wgNamespaceNumber")!==10&&this.templatesToSubst.some(l=>l===this.name.toLowerCase()||this.name.toLowerCase().startsWith(`${l}:`)),h=this.getStyle();if(h===void 0){let l=this.name;this.name.toLowerCase().startsWith("template:")&&(l=this.name.slice(9)),i&&(l=`subst:${l}`),l!==this.rawName&&(this.fullTextEscaped=this.fullTextEscaped.replace(this.rawName,l));for(let T of this.subTemplates)this.fullTextEscaped=this.fullTextEscaped.replace(this.PLACEHOLDER_STRINGS[0],T.format());return this.fullTextEscaped}let n=[`{{${i?"subst:":""}${this.name}`];if(this.cleanupParameters(),h===0||h===1){let l=0;h===1&&(l=Math.max(...this.parameters.map(T=>T.key?.length??0)));for(let[T,S]of this.parameters.entries())!S.key&&!S.value&&this.parameters.slice(T+1).every(k=>k.key??!k.value)||n.push(`| ${S.key?`${S.key.padEnd(l)} = `:""}${S.value}`)}else for(let[l,T]of this.parameters.entries())!T.value&&(T.key||this.parameters.slice(l+1).every(S=>S.key??!S.value))||n.push(`|${T.key?`${T.key}=`:""}${T.value}`);n.push("}}"),n.length===2?(n[0]+="}}",n.pop()):h===3&&(n[n.length-2]+="}}",n.pop());let x=n.join(h===0||h===1?`
`:h===3?" ":"");for(let l of this.subTemplates)x=x.replace(this.PLACEHOLDER_STRINGS[0],l.format());return x}}let a=[],d=[],u=!1,r=!1,s=!1,c=0;function b(t){let i=e.slice(c,c+t.length)===t;return i&&(c+=t.length),i}for(;c<e.length;)if(b("<nowiki>"))r=!0;else if(b("</nowiki>"))r=!1;else if(b("<!--"))s=!0;else if(b("-->"))s=!1;else if(!r&&!s)if(b("[["))u=!0;else if(u&&b("]]"))u=!1;else if(b("{{")){let t=new g(c-2);d.length>0&&(t.isNested=!0,d.at(-1)?.subTemplates.push(t)),d.push(t)}else if(b("}}")){let t=d.pop();if(!t)continue;t.location.end=c,a.push(t)}else c++;else c++;let w=e;for(let t of a)t.isNested||(t.parse(),w=w.replace(t.fullText,t.format()));return w}function H(e){if(mw.config.get("wgNamespaceNumber")!==0)return e;let p=["Do not remove this line","EDIT BELOW THIS LINE","Important, do not remove anything above this line before article has been created","Important, do not remove this line before article has been created","Inline citations added to your article will automatically display here","Note: The following pages were redirects to "];for(let f of p)e=e.replaceAll(new RegExp(` *<!-- ?${A(f)}.*?--> *
?`,"gs"),"");return e}function W(e){let p=[...e.matchAll(/\[\[Category:/g)].length;return e=e.replaceAll(/\n*{{(uncategorized|improve categories)(\|.+?)?}}\n*/gi,""),p===0&&!/{{uncategorized/i.test(e)?e+=`

{{Uncategorized|{{subst:CURRENTMONTHNAME}} {{subst:CURRENTYEAR}}}}`:p===1&&!/{{improve categories/i.test(e)&&(e+=`

{{Improve categories|{{subst:CURRENTMONTHNAME}} {{subst:CURRENTYEAR}}}}`),e}})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vdXRpbGl0eS50cyIsICIuLi9zY3JpcHRzL2FydGljbGUtY2xlYW5lci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHR5cGUgeyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcyB9IGZyb20gJ3R5cGVzLW1lZGlhd2lraS9hcGlfcGFyYW1zJztcbmltcG9ydCB0eXBlIHsgUGFnZVJldmlzaW9uc1Jlc3VsdCB9IGZyb20gJy4vZ2xvYmFsLXR5cGVzJztcblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBtdy5BcGkoKTtcblxuLyoqXG4gKiBGZXRjaGVzIHRoZSBjb250ZW50IG9mIGEgZ2l2ZW4gcGFnZS5cbiAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgdG8gZmV0Y2guXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYWdlQ29udGVudCh0aXRsZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgKGF3YWl0IGFwaS5nZXQoe1xuICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgcHJvcDogJ3JldmlzaW9ucycsXG4gICAgICAgICAgICBydnByb3A6ICdjb250ZW50JyxcbiAgICAgICAgICAgIHJ2c2xvdHM6ICdtYWluJyxcbiAgICAgICAgICAgIHRpdGxlczogdGl0bGUsXG4gICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKSkgYXMgUGFnZVJldmlzaW9uc1Jlc3VsdFxuICAgICkucXVlcnkucGFnZXNbMF0ucmV2aXNpb25zPy5bMF0uc2xvdHMubWFpbi5jb250ZW50LnRyaW0oKTtcbn1cbiIsICJpbXBvcnQgeyBnZXRQYWdlQ29udGVudCB9IGZyb20gJy4uL3V0aWxpdHknO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHRyYW5lb3VzLWNsYXNzXG4gICAgY2xhc3MgVmVSYW5nZSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTtcbiAgICB9XG5cbiAgICBjbGFzcyBWZUZyYWdtZW50IHtcbiAgICAgICAgaW5zZXJ0Q29udGVudChjb250ZW50OiBzdHJpbmcpOiB2b2lkO1xuICAgIH1cblxuICAgIGNsYXNzIFZlU3VyZmFjZU1vZGVsIHtcbiAgICAgICAgZ2V0TGluZWFyRnJhZ21lbnQocmFuZ2U6IFZlUmFuZ2UpOiBWZUZyYWdtZW50O1xuICAgICAgICBnZXRSYW5nZUZyb21Tb3VyY2VPZmZzZXRzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogVmVSYW5nZTtcbiAgICAgICAgc2V0U2VsZWN0aW9uKHNlbGVjdGlvbjogVmVMaW5lYXJTZWxlY3Rpb24pOiB2b2lkO1xuICAgIH1cblxuICAgIGNsYXNzIFZlVGFyZ2V0IHtcbiAgICAgICAgZ2V0U3VyZmFjZSgpOiB7IGdldE1vZGVsKCk6IFZlU3VyZmFjZU1vZGVsIH07XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHRyYW5lb3VzLWNsYXNzXG4gICAgY2xhc3MgVmVMaW5lYXJTZWxlY3Rpb24ge1xuICAgICAgICBjb25zdHJ1Y3RvcihyYW5nZTogVmVSYW5nZSk7XG4gICAgfVxuXG4gICAgY29uc3QgdmU6IHtcbiAgICAgICAgUmFuZ2U6IHR5cGVvZiBWZVJhbmdlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgICAgICBkbTogeyBMaW5lYXJTZWxlY3Rpb246IHR5cGVvZiBWZUxpbmVhclNlbGVjdGlvbiB9OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgICAgICBpbml0PzogeyB0YXJnZXQ6IFZlVGFyZ2V0IH07XG4gICAgfTtcbn1cblxuZXhwb3J0IHt9O1xuXG4oKCkgPT4ge1xuICAgIGlmIChtdy5jb25maWcuZ2V0KCd3Z05hbWVzcGFjZU51bWJlcicpIDwgMCkgcmV0dXJuOyAvLyBEb24ndCBydW4gaW4gdmlydHVhbCBuYW1lc3BhY2VzXG4gICAgaWYgKCFtdy5jb25maWcuZ2V0KCd3Z0lzUHJvYmFibHlFZGl0YWJsZScpKSByZXR1cm47IC8vIERvbid0IHJ1biBpZiB1c2VyIGNhbid0IGVkaXQgcGFnZVxuXG4gICAgbXcubG9hZGVyLnVzaW5nKFsnbWVkaWF3aWtpLnV0aWwnLCAnanF1ZXJ5LnRleHRTZWxlY3Rpb24nXSwgKCkgPT4ge1xuICAgICAgICBtdy51dGlsLmFkZENTUyhgXG4jYXJ0aWNsZS1jbGVhbmVyIHtcbiAgICBkaXNwbGF5OiBub25lO1xufVxuXG4jY29udGVudDpoYXMoI3dwVGV4dGJveDEpICNhcnRpY2xlLWNsZWFuZXIge1xuICAgIGRpc3BsYXk6IHVuc2V0O1xufWApO1xuXG4gICAgICAgIGNvbnN0IGxpbmsgPSBtdy51dGlsLmFkZFBvcnRsZXRMaW5rKFxuICAgICAgICAgICAgbXcuY29uZmlnLmdldCgnc2tpbicpID09PSAnbWluZXJ2YScgPyAncC1uYXZpZ2F0aW9uJyA6ICdwLWNhY3Rpb25zJyxcbiAgICAgICAgICAgICcjJyxcbiAgICAgICAgICAgICdQZXJmb3JtIGFydGljbGUgY2xlYW51cCcsXG4gICAgICAgICAgICAnYXJ0aWNsZS1jbGVhbmVyJyxcbiAgICAgICAgKSE7XG5cbiAgICAgICAgbGV0IHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBTQ1JJUFRfTUVTU0FHRSA9ICdDbGVhbmVkIHVwIGFydGljbGUgY29udGVudCAodmlhIFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvYXJ0aWNsZS1jbGVhbmVyfGFydGljbGUtY2xlYW5lcl1dKSc7XG5cbiAgICAgICAgbXcuaG9vaygndmUuc2F2ZURpYWxvZy5zdGF0ZUNoYW5nZWQnKS5hZGQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KCcudmUtdWktbXdTYXZlRGlhbG9nLXN1bW1hcnkgdGV4dGFyZWEnKSE7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXN1bW1hcnlJbnB1dC52YWx1ZS5pbmNsdWRlcyhTQ1JJUFRfTUVTU0FHRS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5SW5wdXQudmFsdWUgJiYgIXN1bW1hcnlJbnB1dC52YWx1ZS5zdGFydHNXaXRoKCcvKiAnKSAmJiAhc3VtbWFyeUlucHV0LnZhbHVlLmVuZHNXaXRoKCcgKi8gJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5SW5wdXQudmFsdWUgKz0gYDsgJHtTQ1JJUFRfTUVTU0FHRS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIFNDUklQVF9NRVNTQUdFLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc3VtbWFyeUlucHV0LnZhbHVlID0gYCR7c3VtbWFyeUlucHV0LnZhbHVlfSR7U0NSSVBUX01FU1NBR0V9YDtcblxuICAgICAgICAgICAgICAgIHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgZWRpdEJveCA9ICQoJyN3cFRleHRib3gxJyk7XG4gICAgICAgICAgICBpZiAoZWRpdEJveC5sZW5ndGggPT09IDApIHJldHVybiBtdy5ub3RpZnkoJ0VkaXQgYm94IG5vdCBmb3VuZCEnLCB7IHR5cGU6ICdlcnJvcicsIGF1dG9IaWRlU2Vjb25kczogJ3Nob3J0JyB9KTtcblxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdnZXRDb250ZW50cycpO1xuXG4gICAgICAgICAgICBsZXQgZmluYWxUZXh0ID0gb3JpZ2luYWxUZXh0O1xuXG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU3RyYXlVbmljb2RlQ2hhcmFjdGVycyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFNlY3Rpb25IZWFkZXJzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwTWFnaWNXb3JkcyhmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cERpc3BsYXl0aXRsZXNBbmREZWZhdWx0c29ydHMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBDYXRlZ29yaWVzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwTGlua3MoZmluYWxUZXh0LCBbY2xlYW51cEltcHJvcGVyQ2hhcmFjdGVycywgY2xlYW51cFllYXJSYW5nZXNdKTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBTdHJheU1hcmt1cChmaW5hbFRleHQpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gY2xlYW51cFNwYWNpbmcoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IGNsZWFudXBSZWZlcmVuY2VzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBhd2FpdCBmb3JtYXRUZW1wbGF0ZXMoZmluYWxUZXh0KTtcbiAgICAgICAgICAgIGZpbmFsVGV4dCA9IHJlbW92ZUNvbW1lbnRzKGZpbmFsVGV4dCk7XG4gICAgICAgICAgICBmaW5hbFRleHQgPSBjbGVhbnVwU3BhY2luZyhmaW5hbFRleHQsIHRydWUpO1xuICAgICAgICAgICAgZmluYWxUZXh0ID0gYXV0b1RhZ1BhZ2UoZmluYWxUZXh0KTtcblxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsVGV4dCA9PT0gZmluYWxUZXh0KSBtdy5ub3RpZnkoJ05vIGNoYW5nZXMgdG8gYmUgbWFkZSB0byB0aGUgYXJ0aWNsZSEnLCB7IHR5cGU6ICd3YXJuJywgYXV0b0hpZGVTZWNvbmRzOiAnc2hvcnQnIH0pO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHZlLmluaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VyZmFjZU1vZGVsID0gdmUuaW5pdC50YXJnZXQuZ2V0U3VyZmFjZSgpLmdldE1vZGVsKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gc3VyZmFjZU1vZGVsLmdldExpbmVhckZyYWdtZW50KHN1cmZhY2VNb2RlbC5nZXRSYW5nZUZyb21Tb3VyY2VPZmZzZXRzKDAsIG9yaWdpbmFsVGV4dC5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQuaW5zZXJ0Q29udGVudChmaW5hbFRleHQpO1xuICAgICAgICAgICAgICAgICAgICBzdXJmYWNlTW9kZWwuc2V0U2VsZWN0aW9uKG5ldyB2ZS5kbS5MaW5lYXJTZWxlY3Rpb24obmV3IHZlLlJhbmdlKDAsIDApKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdzZXRDb250ZW50cycsIGZpbmFsVGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZWRpdEJveC50ZXh0U2VsZWN0aW9uKCdzZXRTZWxlY3Rpb24nLCB7IHN0YXJ0OiAwIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG13Lm5vdGlmeSgnQXJ0aWNsZSBjbGVhbnVwIGNvbXBsZXRlIScsIHsgdHlwZTogJ3N1Y2Nlc3MnLCBhdXRvSGlkZVNlY29uZHM6ICdzaG9ydCcgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KCcjd3BTdW1tYXJ5Jyk7XG4gICAgICAgICAgICAgICAgaWYgKHN1bW1hcnlJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXN1bW1hcnlJbnB1dC52YWx1ZS5pbmNsdWRlcyhTQ1JJUFRfTUVTU0FHRS5zbGljZSgxKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeUlucHV0LnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnlJbnB1dC52YWx1ZSArPSBgOyAke1NDUklQVF9NRVNTQUdFLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgU0NSSVBUX01FU1NBR0Uuc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Ugc3VtbWFyeUlucHV0LnZhbHVlID0gU0NSSVBUX01FU1NBR0U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHNob3VsZEFkZFNjcmlwdE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn0pKCk7XG5cbi8qKlxuICogRXNjYXBlcyByZWdleCBjaGFyYWN0ZXJzIGluIGEgc3RyaW5nLlxuICogQHBhcmFtIHN0cmluZyBUaGUgc3RyaW5nIHRvIGVzY2FwZSByZWdleCBjaGFyYWN0ZXJzIGluLlxuICovXG5mdW5jdGlvbiBlc2NhcGVSZWdleENoYXJhY3RlcnMoc3RyaW5nOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2VBbGwoL1skKCkqKy4/W1xcXFxcXF1ee3x9XS9nLCAnXFxcXCQmJyk7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIHN0cmF5IFVuaWNvZGUgY2hhcmFjdGVycyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBTdHJheVVuaWNvZGVDaGFyYWN0ZXJzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIC8vIFRoaXMgcmVnZXggcmVtb3ZlczpcbiAgICAvLyAgIC0gQVNDSUkgY29udHJvbCBjaGFyYWN0ZXJzIChcXHUwMDAwLVxcdTAwMDksIFxcdTAwMEItXFx1MDAwQywgXFx1MDAwRS1cXHUwMDFGKVxuICAgIC8vICAgLSBERUwgKFxcdTAwN0YpXG4gICAgLy8gICAtIFNvZnQgaHlwaGVuIChcXHUwMEFEKVxuICAgIC8vICAgLSBaZXJvLXdpZHRoIGNoYXJhY3RlcnMgYW5kIGRpcmVjdGlvbmFsaXR5IG1hcmtzIChcXHUyMDBCLVxcdTIwMEYpXG4gICAgLy8gICAtIEJpZGkgb3ZlcnJpZGUgYW5kIGZvcm1hdHRpbmcgY2hhcmFjdGVycyAoXFx1MjAyQS1cXHUyMDJFKVxuICAgIC8vICAgLSBXb3JkIGpvaW5lciBhbmQgaW52aXNpYmxlIHNlcGFyYXRvciAoXFx1MjA2MCwgXFx1MjA2MylcbiAgICAvLyAgIC0gQnl0ZSBvcmRlciBtYXJrIChCT00pIChcXHVGRUZGKVxuICAgIGNvbnN0IHN0cmF5VW5pY29kZVJlZ2V4ID0gL1tcXHUwMDAwLVxcdTAwMDlcXHUwMDBCXFx1MDAwQ1xcdTAwMEUtXFx1MDAxRlxcdTAwN0ZcXHUwMEFEXFx1MjAwQi1cXHUyMDBGXFx1MjAyQS1cXHUyMDJFXFx1MjA2MFxcdTIwNjNcXHVGRUZGXS9nOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnRyb2wtcmVnZXhcblxuICAgIGlmIChzdHJheVVuaWNvZGVSZWdleC50ZXN0KGNvbnRlbnQpKSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKHN0cmF5VW5pY29kZVJlZ2V4LCAnJyk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgc2VjdGlvbiBoZWFkZXJzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFNlY3Rpb25IZWFkZXJzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnN0IGNvbW1vblJlcGxhY2VtZW50cyA9IHtcbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4gICAgICAgICdTZWUgYWxzbyc6IFsnYWxzbyBzZWUnXSxcbiAgICAgICAgJ1JlZmVyZW5jZXMnOiBbJ3JlZmVyZW5jZScsICdzb3VyY2UnLCAnc291cmNlcycsICdjaXRhdGlvbicsICdjaXRhdGlvbnMnXSxcbiAgICAgICAgJ0Z1cnRoZXIgcmVhZGluZyc6IFsnZnVydGhlciByZWFkaW5nJ10sXG4gICAgICAgICdFeHRlcm5hbCBsaW5rcyc6IFsnZXh0ZXJuYWwgbGluaycsICd3ZWJsaW5rJywgJ3dlYmxpbmtzJ10sXG4gICAgICAgIC8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4gICAgfTtcblxuICAgIGNvbnN0IGNvbW1vbk1pc2NhcGl0YWxpemVkV29yZHMgPSBbJ2FuZCcsICdiaXJ0aCcsICdjYXJlZXInLCAnZGVhdGgnLCAnZWR1Y2F0aW9uJywgJ2xpZmUnLCAnb2YnLCAnb3InXTtcblxuICAgIGNvbnN0IHJldmVyc2VDb21tb25SZXBsYWNlbWVudHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGNvbW1vblJlcGxhY2VtZW50cykuZmxhdE1hcCgoW2tleSwgdmFsdWVzXSkgPT4gW1xuICAgICAgICAgICAgW2tleS50b0xvd2VyQ2FzZSgpLCBrZXldLFxuICAgICAgICAgICAgLi4uKHZhbHVlcy5tYXAoKHZhbHVlKSA9PiBbdmFsdWUsIGtleV0pIGFzIFtzdHJpbmcsIHN0cmluZ11bXSksIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LXR5cGUtYXNzZXJ0aW9uXG4gICAgICAgIF0pLFxuICAgICk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gY29udGVudC5tYXRjaEFsbCgvKD88PV58XFxuKVxcbiooPzxzdGFydE1hcmt1cD49KykgKig/PG5hbWU+Lio/KSAqKD88ZW5kTWFya3VwPj0rKShcXG4rfCQpL2cpO1xuXG4gICAgY29uc3QgcGFyc2VkSGVhZGVycyA9IFsuLi5oZWFkZXJzXS5tYXAoKGhlYWRlcikgPT4ge1xuICAgICAgICBsZXQgeyBuYW1lIH0gPSBoZWFkZXIuZ3JvdXBzITtcbiAgICAgICAgY29uc3QgeyBzdGFydE1hcmt1cCwgZW5kTWFya3VwIH0gPSBoZWFkZXIuZ3JvdXBzITtcblxuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlQWxsKC8nezN9L2csICcnKTtcblxuICAgICAgICBjb25zdCBsaW5rcyA9IG5hbWUubWF0Y2hBbGwoL1xcW1xcWyguKz8pXV0vZykudG9BcnJheSgpO1xuXG4gICAgICAgIGZvciAoY29uc3QgbGluayBvZiBsaW5rcykgbmFtZSA9IG5hbWUucmVwbGFjZShsaW5rWzBdLCBsaW5rWzFdLnNwbGl0KCd8JykuYXQoLTEpISk7XG5cbiAgICAgICAgY29uc3QgZGVwdGggPSBNYXRoLm1heChzdGFydE1hcmt1cC5sZW5ndGgsIGVuZE1hcmt1cC5sZW5ndGgsIDIpO1xuXG4gICAgICAgIHJldHVybiB7IG5hbWUsIGRlcHRoLCBvcmlnaW5hbDogaGVhZGVyWzBdIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBoZWFkZXJzU2V0ID0gbmV3IFNldChwYXJzZWRIZWFkZXJzLm1hcCgoaGVhZGVyKSA9PiBoZWFkZXIubmFtZSkpO1xuXG4gICAgY29uc3QgdGl0bGVTcGFjZXIgPSBwYXJzZWRIZWFkZXJzLmxlbmd0aCA+IDAgPyAoL15cXG4qPSsgfCA9K1xcbiskLy50ZXN0KHBhcnNlZEhlYWRlcnNbMF0ub3JpZ2luYWwpID8gJyAnIDogJycpIDogJyc7XG5cbiAgICBmb3IgKGNvbnN0IGhlYWRlciBvZiBwYXJzZWRIZWFkZXJzKSB7XG4gICAgICAgIGNvbnN0IGxvd2VyY2FzZU5hbWUgPSBoZWFkZXIubmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGNvbnN0IHJlcGxhY2VkTmFtZSA9XG4gICAgICAgICAgICBsb3dlcmNhc2VOYW1lIGluIHJldmVyc2VDb21tb25SZXBsYWNlbWVudHMgJiYgIWhlYWRlcnNTZXQuaGFzKHJldmVyc2VDb21tb25SZXBsYWNlbWVudHNbbG93ZXJjYXNlTmFtZV0pXG4gICAgICAgICAgICAgICAgPyByZXZlcnNlQ29tbW9uUmVwbGFjZW1lbnRzW2xvd2VyY2FzZU5hbWVdXG4gICAgICAgICAgICAgICAgOiBoZWFkZXIubmFtZTtcblxuICAgICAgICBsZXQgY2FwaXRhbGl6ZWROYW1lID0gcmVwbGFjZWROYW1lO1xuXG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiBjb21tb25NaXNjYXBpdGFsaXplZFdvcmRzKSBjYXBpdGFsaXplZE5hbWUgPSBjYXBpdGFsaXplZE5hbWUucmVwbGFjZUFsbChuZXcgUmVnRXhwKGBcXFxcYiR7d29yZH1cXFxcYmAsICdnaScpLCB3b3JkKTtcblxuICAgICAgICBjYXBpdGFsaXplZE5hbWUgPSBjYXBpdGFsaXplZE5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYXBpdGFsaXplZE5hbWUuc2xpY2UoMSk7XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gYCR7Jz0nLnJlcGVhdChoZWFkZXIuZGVwdGgpfSR7dGl0bGVTcGFjZXJ9JHtjYXBpdGFsaXplZE5hbWV9JHt0aXRsZVNwYWNlcn0keyc9Jy5yZXBlYXQoaGVhZGVyLmRlcHRoKX1gO1xuXG4gICAgICAgIGlmIChoZWFkZXIub3JpZ2luYWwgIT09IG91dHB1dCkgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShoZWFkZXIub3JpZ2luYWwsIGBcXG5cXG4ke291dHB1dH1cXG5gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHVubmVjZXNzYXJ5IG1hZ2ljIHdvcmRzIGZyb20gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwTWFnaWNXb3Jkcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKC9fXyhJTkRFWHxOT0lOREVYfE5FV1NFQ1RJT05MSU5LfE5PTkVXU0VDVElPTkxJTkt8Tk9FRElUU0VDVElPTnxESVNBTUJJR3xTVEFUSUNSRURJUkVDVHxGT1JDRVRPQylfX1xcbiovZywgJycpO1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBESVNQTEFZVElUTEVzIGFuZCBERUZBVUxUU09SVHMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwRGlzcGxheXRpdGxlc0FuZERlZmF1bHRzb3J0cyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBjb25zdCB0YWdzID0gY29udGVudC5tYXRjaEFsbCgve3soZGlzcGxheXRpdGxlfGRlZmF1bHRzb3J0KVs6fF0oLio/KX19L2dpKTtcblxuICAgIGNvbnN0IHBhcnNlZFRhZ3MgPSBbLi4udGFnc10ubWFwKCh0YWcpID0+IHtcbiAgICAgICAgY29uc3QgW2Z1bGxUYWcsIHR5cGUsIHZhbHVlXSA9IHRhZztcblxuICAgICAgICByZXR1cm4geyB0eXBlOiB0eXBlLnRvVXBwZXJDYXNlKCksIHZhbHVlLCBvcmlnaW5hbDogZnVsbFRhZyB9O1xuICAgIH0pO1xuXG4gICAgY29uc3QgY3VycmVudFRpdGxlID0gbXcuVGl0bGUubmV3RnJvbVRleHQobXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpKSE7XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiBwYXJzZWRUYWdzKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVGFnUmVnZXggPSBuZXcgUmVnRXhwKGAke2VzY2FwZVJlZ2V4Q2hhcmFjdGVycyh0YWcub3JpZ2luYWwpfVxcbipgLCAnZycpO1xuXG4gICAgICAgIGNvbnN0IHVucHJlZml4ZWRUaXRsZSA9IG13LlRpdGxlLm5ld0Zyb21UZXh0KHRhZy52YWx1ZSk7XG5cbiAgICAgICAgaWYgKCF1bnByZWZpeGVkVGl0bGUpIGNvbnRpbnVlO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gbXcuVGl0bGUubWFrZVRpdGxlKGN1cnJlbnRUaXRsZS5nZXROYW1lc3BhY2VJZCgpLCB1bnByZWZpeGVkVGl0bGUuZ2V0TWFpblRleHQoKSk7XG5cbiAgICAgICAgaWYgKCF0aXRsZSkgY29udGludWU7XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdEtleSA9IHRhZy50eXBlID09PSAnRElTUExBWVRJVExFJyA/IGN1cnJlbnRUaXRsZS50b1RleHQoKSA6IGN1cnJlbnRUaXRsZS5nZXRNYWluVGV4dCgpO1xuXG4gICAgICAgIGNvbnN0IGN1c3RvbUtleSA9IHRhZy50eXBlID09PSAnRElTUExBWVRJVExFJyA/IHRpdGxlLnRvVGV4dCgpIDogdGl0bGUuZ2V0TWFpblRleHQoKTtcblxuICAgICAgICBpZiAoZGVmYXVsdEtleSA9PT0gY3VzdG9tS2V5KSB7XG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG9yaWdpbmFsVGFnUmVnZXgsICcnKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IGB7eyR7dGFnLnR5cGV9OiR7Y3VzdG9tS2V5fX19XFxuYDtcblxuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKG9yaWdpbmFsVGFnUmVnZXgsIG5ld1RleHQpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBjYXRlZ29yaWVzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cENhdGVnb3JpZXMoY29udGVudDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQucmVwbGFjZUFsbChcbiAgICAgICAgLyhcXFtcXFt8fX0pOj9jYXRlZ29yeTooLio/KShdXXx9fSkvZ2ksXG4gICAgICAgIGBbWyR7bXcuY29uZmlnLmdldCgnd2dDYW5vbmljYWxOYW1lc3BhY2UnKSA9PT0gJ0RyYWZ0JyA/ICc6JyA6ICcnfUNhdGVnb3J5OiQyXV1gLFxuICAgICk7XG59XG5cbmludGVyZmFjZSBMaW5rSW5mb3JtYXRpb24ge1xuICAgIHN0YXJ0OiBudW1iZXI7XG4gICAgZW5kOiBudW1iZXI7XG4gICAgaXNOZXN0ZWQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGxpbmtzIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqIEBwYXJhbSBmdW5jdGlvbnNDYWxsZWRXaGlsZUVzY2FwZWQgVGhlIGZ1bmN0aW9ucyBjYWxsZWQgd2hpbGUgdGhlIGxpbmtzIGFyZSBlc2NhcGVkLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwTGlua3MoY29udGVudDogc3RyaW5nLCBmdW5jdGlvbnNDYWxsZWRXaGlsZUVzY2FwZWQ6ICgoY29udGVudDogc3RyaW5nLCBydW46IDEgfCAyKSA9PiBzdHJpbmcpW10pIHtcbiAgICBjb25zdCBjbG9zZWRMaW5rczogTGlua0luZm9ybWF0aW9uW10gPSBbXTtcbiAgICBjb25zdCBsaW5rczogTGlua0luZm9ybWF0aW9uW10gPSBbXTtcblxuICAgIGxldCBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgIGxldCBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcblxuICAgIGxldCBjdXJyZW50TG9jYXRpb24gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBjb250ZW50IGZvbGxvd2luZyB0aGUgY3VycmVudCBsb2NhdGlvbiBtYXRjaGVzIHRoZSBkZXNpcmVkIHN0cmluZy5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFN0cmluZyBUaGUgc3RyaW5nIHRvIHNlYXJjaCBmb3IuXG4gICAgICogQHBhcmFtIHNob3VsZEluY3JlbWVudCBXaGV0aGVyIHRvIGluY3JlbWVudCB0aGUgY3VycmVudCBsb2NhdGlvbiBpZiB0aGUgc3RyaW5nIGlzIGZvdW5kLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXRTdHJpbmcoZGVzaXJlZFN0cmluZzogc3RyaW5nLCBzaG91bGRJbmNyZW1lbnQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IGlzQXRTdHJpbmcgPSBjb250ZW50LnNsaWNlKGN1cnJlbnRMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uICsgZGVzaXJlZFN0cmluZy5sZW5ndGgpID09PSBkZXNpcmVkU3RyaW5nO1xuXG4gICAgICAgIGlmIChpc0F0U3RyaW5nICYmIHNob3VsZEluY3JlbWVudCkgY3VycmVudExvY2F0aW9uICs9IGRlc2lyZWRTdHJpbmcubGVuZ3RoO1xuXG4gICAgICAgIHJldHVybiBpc0F0U3RyaW5nO1xuICAgIH1cblxuICAgIHdoaWxlIChjdXJyZW50TG9jYXRpb24gPCBjb250ZW50Lmxlbmd0aClcbiAgICAgICAgaWYgKGlzQXRTdHJpbmcoJzxub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnPC9ub3dpa2k+JykpIGlzSW5zaWRlTm93aWtpID0gZmFsc2U7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwhLS0nKSkgaXNJbnNpZGVDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnLS0+JykpIGlzSW5zaWRlQ29tbWVudCA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmICghaXNJbnNpZGVOb3dpa2kgJiYgIWlzSW5zaWRlQ29tbWVudClcbiAgICAgICAgICAgIGlmIChpc0F0U3RyaW5nKCdbWycpKSBsaW5rcy5wdXNoKHsgc3RhcnQ6IGN1cnJlbnRMb2NhdGlvbiAtIDIsIGVuZDogLTEsIGlzTmVzdGVkOiBsaW5rcy5sZW5ndGggPiAwIH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNBdFN0cmluZygnXV0nKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RMaW5rID0gbGlua3MucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXN0TGluaykgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBsYXN0TGluay5lbmQgPSBjdXJyZW50TG9jYXRpb247XG5cbiAgICAgICAgICAgICAgICBjbG9zZWRMaW5rcy5wdXNoKGxhc3RMaW5rKTtcbiAgICAgICAgICAgIH0gZWxzZSBjdXJyZW50TG9jYXRpb24rKztcbiAgICAgICAgZWxzZSBjdXJyZW50TG9jYXRpb24rKztcblxuICAgIGNvbnN0IG5ld0xpbmtDb250ZW50OiBbTGlua0luZm9ybWF0aW9uLCBzdHJpbmddW10gPSBbXTtcblxuICAgIGNvbnN0IG5hbWVzcGFjZU5hbWVzID0gT2JqZWN0LnZhbHVlcyhtdy5jb25maWcuZ2V0KCd3Z0Zvcm1hdHRlZE5hbWVzcGFjZXMnKSk7XG5cbiAgICBmb3IgKGNvbnN0IGxpbmtMb2NhdGlvbiBvZiBjbG9zZWRMaW5rcykge1xuICAgICAgICBjb25zdCBpbm5lckxpbmsgPSBjb250ZW50LnNsaWNlKGxpbmtMb2NhdGlvbi5zdGFydCArIDIsIGxpbmtMb2NhdGlvbi5lbmQgLSAyKTtcblxuICAgICAgICBjb25zdCBbdW5wYXJzZWRMaW5rLCAuLi5wYXJhbWV0ZXJzXSA9IGlubmVyTGluay5zcGxpdCgnfCcpO1xuXG4gICAgICAgIC8vIFJlcGxhY2UgbGluayBuYW1lcyBzbyB0aGVzZSB3b24ndCBiZSBhZmZlY3RlZCBieSBmdW5jdGlvbnMgY2FsbGVkIHdoaWxlIGVzY2FwZWRcbiAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICBjb250ZW50LnNsaWNlKDAsIGxpbmtMb2NhdGlvbi5zdGFydCArIDIpICtcbiAgICAgICAgICAgICdcXDAnLnJlcGVhdCh1bnBhcnNlZExpbmsubGVuZ3RoKSArXG4gICAgICAgICAgICBjb250ZW50LnNsaWNlKGxpbmtMb2NhdGlvbi5zdGFydCArIDIgKyB1bnBhcnNlZExpbmsubGVuZ3RoKTtcblxuICAgICAgICBsZXQgbGluayA9IHVucGFyc2VkTGluay5yZXBsYWNlQWxsKCdfJywgJyAnKS50cmltKCk7XG4gICAgICAgIGxldCBhbHRUZXh0ID0gcGFyYW1ldGVycy5qb2luKCd8Jyk7XG4gICAgICAgIGFsdFRleHQgPSBhbHRUZXh0ID09PSAnICcgPyAnICcgOiBhbHRUZXh0LnRyaW0oKTtcblxuICAgICAgICBjb25zdCBpc0ZpcnN0Q2hhcmFjdGVyQ29sb24gPSBsaW5rLnN0YXJ0c1dpdGgoJzonKTtcbiAgICAgICAgaWYgKGlzRmlyc3RDaGFyYWN0ZXJDb2xvbikgbGluayA9IGxpbmsuc2xpY2UoMSk7XG5cbiAgICAgICAgbGV0IHNob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnN0IGxpbmtVcHBlcmNhc2VTdGFydCA9IGxpbmsuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBsaW5rLnNsaWNlKDEpO1xuICAgICAgICBjb25zdCBsaW5rTG93ZXJjYXNlU3RhcnQgPSBsaW5rLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgbGluay5zbGljZSgxKTtcblxuICAgICAgICBsZXQgbmFtZXNwYWNlID0gbGluay5zcGxpdCgnOicpWzBdO1xuICAgICAgICBuYW1lc3BhY2UgPSBuYW1lc3BhY2UuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lc3BhY2Uuc2xpY2UoMSk7XG5cbiAgICAgICAgaWYgKGxpbmsuaW5jbHVkZXMoJzonKSkge1xuICAgICAgICAgICAgaWYgKGxpbmtVcHBlcmNhc2VTdGFydC5zdGFydHNXaXRoKCdJbWFnZTonKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNob3VsZFN0YXJ0VXBwZXJjYXNlID0gbGluay5zdGFydHNXaXRoKCdJbWFnZTonKTtcblxuICAgICAgICAgICAgICAgIGxpbmsgPSBgJHtzaG91bGRTdGFydFVwcGVyY2FzZSA/ICdGJyA6ICdmJ31pbGU6JHtsaW5rLnNsaWNlKDYpfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpc0ZpcnN0Q2hhcmFjdGVyQ29sb24gJiZcbiAgICAgICAgICAgICAgICAoWydJbWFnZScsICdGaWxlJywgJ0NhdGVnb3J5J10uaW5jbHVkZXMobGlua1VwcGVyY2FzZVN0YXJ0LnNwbGl0KCc6JylbMF0pIHx8ICFuYW1lc3BhY2VOYW1lcy5pbmNsdWRlcyhuYW1lc3BhY2UpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHNob3VsZEZpcnN0Q2hhcmFjdGVyQmVDb2xvbiA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWZ0ZXJMaW5rVGV4dCA9ICcnO1xuXG4gICAgICAgIGlmICgvWyEnLC46Oz9dJC8udGVzdChhbHRUZXh0KSAmJiAhWydJbWFnZScsICdGaWxlJywgJ0NhdGVnb3J5J10uaW5jbHVkZXMobGlua1VwcGVyY2FzZVN0YXJ0LnNwbGl0KCc6JylbMF0pKSB7XG4gICAgICAgICAgICBjb25zdCBhZGRlZFB1bmN0dWF0aW9uID0gYWx0VGV4dC5zbGljZSgtMSk7XG5cbiAgICAgICAgICAgIGlmICghbGluay5lbmRzV2l0aChhZGRlZFB1bmN0dWF0aW9uKSkge1xuICAgICAgICAgICAgICAgIGFmdGVyTGlua1RleHQgPSBhZGRlZFB1bmN0dWF0aW9uO1xuICAgICAgICAgICAgICAgIGFsdFRleHQgPSBhbHRUZXh0LnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaW5rID09PSBhbHRUZXh0KSBhbHRUZXh0ID0gJyc7XG4gICAgICAgIGVsc2UgaWYgKG5ldyBSZWdFeHAoYF4ke2VzY2FwZVJlZ2V4Q2hhcmFjdGVycyhsaW5rKX1bYS16XSskYCkudGVzdChhbHRUZXh0KSkge1xuICAgICAgICAgICAgYWZ0ZXJMaW5rVGV4dCA9IGFsdFRleHQuc2xpY2UobGluay5sZW5ndGgpICsgYWZ0ZXJMaW5rVGV4dDtcbiAgICAgICAgICAgIGFsdFRleHQgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgbmV3TGluayBvZiBbbGlua1VwcGVyY2FzZVN0YXJ0LCBsaW5rTG93ZXJjYXNlU3RhcnRdKVxuICAgICAgICAgICAgaWYgKG5ld0xpbmsgPT09IGFsdFRleHQpIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gbmV3TGluaztcbiAgICAgICAgICAgICAgICBhbHRUZXh0ID0gJyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ldyBSZWdFeHAoYF4ke2VzY2FwZVJlZ2V4Q2hhcmFjdGVycyhuZXdMaW5rKX1bYS16XSskYCkudGVzdChhbHRUZXh0KSkge1xuICAgICAgICAgICAgICAgIGxpbmsgPSBuZXdMaW5rO1xuICAgICAgICAgICAgICAgIGFmdGVyTGlua1RleHQgPSBhbHRUZXh0LnNsaWNlKG5ld0xpbmsubGVuZ3RoKSArIGFmdGVyTGlua1RleHQ7XG4gICAgICAgICAgICAgICAgYWx0VGV4dCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChhbHRUZXh0ICYmIGxpbmsuaW5jbHVkZXMoJzonKSAmJiBuYW1lc3BhY2VOYW1lcy5pbmNsdWRlcyhuYW1lc3BhY2UpKSB8fFxuICAgICAgICAgICAgbGluay5zdGFydHNXaXRoKCdmaWxlOicpIHx8XG4gICAgICAgICAgICBsaW5rLnN0YXJ0c1dpdGgoJ2NhdGVnb3J5OicpXG4gICAgICAgIClcbiAgICAgICAgICAgIGxpbmsgPSBsaW5rLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbGluay5zbGljZSgxKTtcblxuICAgICAgICBsaW5rID0gYCR7c2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uID8gJzonIDogJyd9JHtsaW5rfWA7XG5cbiAgICAgICAgbGluayA9IGxpbmsucGFkU3RhcnQodW5wYXJzZWRMaW5rLmxlbmd0aCwgJ1xcMCcpO1xuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGBbWyR7bGlua30ke2FsdFRleHQgPyBgfCR7YWx0VGV4dH1gIDogJyd9XV0ke2FmdGVyTGlua1RleHR9YDtcblxuICAgICAgICBuZXdMaW5rQ29udGVudC5wdXNoKFtsaW5rTG9jYXRpb24sIG91dHB1dF0pO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZnVuY3Rpb25Ub0NhbGwgb2YgZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkKSBjb250ZW50ID0gZnVuY3Rpb25Ub0NhbGwoY29udGVudCwgMSk7XG5cbiAgICBmb3IgKGxldCBsb29wQ291bnRlciA9IDA7IGxvb3BDb3VudGVyIDwgMjsgbG9vcENvdW50ZXIrKylcbiAgICAgICAgZm9yIChjb25zdCBbbGlua0RhdGEsIGxpbmtDb250ZW50XSBvZiBuZXdMaW5rQ29udGVudCkge1xuICAgICAgICAgICAgaWYgKGxvb3BDb3VudGVyID09PSAwICYmIGxpbmtEYXRhLmlzTmVzdGVkKSBjb250aW51ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGxvb3BDb3VudGVyID09PSAxICYmICFsaW5rRGF0YS5pc05lc3RlZCkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpY2UoMCwgbGlua0RhdGEuc3RhcnQpICsgbGlua0NvbnRlbnQucGFkRW5kKGxpbmtEYXRhLmVuZCAtIGxpbmtEYXRhLnN0YXJ0LCAnXFwwJykgKyBjb250ZW50LnNsaWNlKGxpbmtEYXRhLmVuZCk7XG4gICAgICAgIH1cblxuICAgIGZvciAoY29uc3QgZnVuY3Rpb25Ub0NhbGwgb2YgZnVuY3Rpb25zQ2FsbGVkV2hpbGVFc2NhcGVkKSBjb250ZW50ID0gZnVuY3Rpb25Ub0NhbGwoY29udGVudCwgMik7XG5cbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQWxsKCdcXDAnLCAnJyk7XG59XG5cbi8qKlxuICogQ2xlYW5zIHVwIGltcHJvcGVyIGNoYXJhY3RlcnMgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICogQHBhcmFtIHJ1biBUaGUgcnVuIG51bWJlciBvZiB0aGUgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBJbXByb3BlckNoYXJhY3RlcnMoY29udGVudDogc3RyaW5nLCBydW46IDEgfCAyKSB7XG4gICAgY29uc3QgZWxpcHNpc1BsYWNlaG9sZGVyID0gJ1xcdTAwN0YnO1xuICAgIGNvbnN0IG5ic3BQbGFjZWhvbGRlciA9ICdcXHUwMDlGJztcblxuICAgIGlmIChydW4gPT09IDEpIHtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvW1x1MjAxQ1x1MjAxRFx1MjAxRVx1MjAxRl0vZywgJ1wiJyk7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1tcdTIwMThcdTIwMTlcdTIwMUFcdTIwMUJdL2csIFwiJ1wiKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgnXHUyMDI2JywgZWxpcHNpc1BsYWNlaG9sZGVyKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgnXHUwMEEwJywgbmJzcFBsYWNlaG9sZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKGVsaXBzaXNQbGFjZWhvbGRlciwgJy4uLicpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKG5ic3BQbGFjZWhvbGRlciwgJyZuYnNwOycpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCB5ZWFyIHJhbmdlcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKiBAcGFyYW0gcnVuIFRoZSBydW4gbnVtYmVyIG9mIHRoZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY2xlYW51cFllYXJSYW5nZXMoY29udGVudDogc3RyaW5nLCBydW46IDEgfCAyKSB7XG4gICAgaWYgKHJ1biA9PT0gMSlcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKFxcKFxcZHszLDR9KSA/W1x1MjAxMlx1MjAxM1x1MjIxMi1dID8oXFxkezMsNH1cXCkpL2csIChvcmlnaW5hbCwgc3RhcnQsIGVuZCkgPT5cbiAgICAgICAgICAgIGAke3N0YXJ0fVx1MjAxMyR7ZW5kfWAucGFkRW5kKG9yaWdpbmFsLmxlbmd0aCwgJ1xcMCcpLFxuICAgICAgICApO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBzdHJheSBtYXJrdXAgaW4gYW4gYXJ0aWNsZSdzIGNvbnRlbnQuXG4gKiBAcGFyYW0gY29udGVudCBUaGUgYXJ0aWNsZSBjb250ZW50IHRvIGNsZWFuIHVwLlxuICovXG5mdW5jdGlvbiBjbGVhbnVwU3RyYXlNYXJrdXAoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3RyYXlNYXJrdXBSZWdleGVzID0gW1xuICAgICAgICAvJysoQm9sZHxJdGFsaWMpKCB0ZXh0KT8nKyAqL2csXG4gICAgICAgIC8oPGJpZz4pK0JpZyggdGV4dCk/KDxcXC9iaWc+KSsgKi9nLFxuICAgICAgICAvKDxzbWFsbD4pK1NtYWxsKCB0ZXh0KT8oPFxcL3NtYWxsPikrICovZyxcbiAgICAgICAgLyg8c3VwPikrU3VwZXJzY3JpcHQoIHRleHQpPyg8XFwvc3VwPikrICovZyxcbiAgICAgICAgLyg8c3ViPikrU3Vic2NyaXB0KCB0ZXh0KT8oPFxcL3N1Yj4pKyAqL2csXG4gICAgICAgIC8oPHM+KStTdHJpa2V0aHJvdWdoKDxcXC9zPikrICovZyxcbiAgICAgICAgLyg8dT4pK1VuZGVybGluZSg8XFwvdT4pKyAqL2csXG4gICAgICAgIC8oPGNvZGU+KStDb21wdXRlciBjb2RlKDxcXC9jb2RlPikrICovZyxcbiAgICAgICAgLyg8bm93aWtpPikrSW5zZXJ0IG5vbi1mb3JtYXR0ZWQgdGV4dCBoZXJlKDxcXC9ub3dpa2k+KSsgKi9nLFxuICAgICAgICAvPSsgSGVhZGluZyB0ZXh0ID0rICovZyxcbiAgICAgICAgL1xcKiBCdWxsZXRlZCBsaXN0IGl0ZW0gKi9nLFxuICAgICAgICAvIyBOdW1iZXJlZCBsaXN0IGl0ZW0gKi9nLFxuICAgICAgICAvPGdhbGxlcnk+XFxuRXhhbXBsZS5qcGdcXHxDYXB0aW9uMVxcbkV4YW1wbGUuanBnXFx8Q2FwdGlvbjJcXG48XFwvZ2FsbGVyeT4gKi9nLFxuICAgICAgICAvI1JFRElSRUNUIFxcW1xcW1RhcmdldCBwYWdlIG5hbWVdXSAqL2csXG4gICAgICAgIC88IS0tIEludmlzaWJsZSBjb21tZW50IC0tPiAqL2csXG4gICAgICAgIC88XFxzKihiaWd8c21hbGx8c3VwfHN1YnxzfHV8Y29kZXxub3dpa2l8bm9pbmNsdWRlfG9ubHlpbmNsdWRlfGluY2x1ZGVvbmx5fGNlbnRlcnxibG9ja3F1b3RlfGdhbGxlcnkpXFxzKihcXHMrW148Pl0qKT8+XFxzKjxcXHMqXFwvXFxzKlxcMVxccyo+L2dpLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHJlZ2V4IG9mIHN0cmF5TWFya3VwUmVnZXhlcykgd2hpbGUgKHJlZ2V4LnRlc3QoY29udGVudCkpIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnZXgsICcnKTtcblxuICAgIHJldHVybiBjb250ZW50O1xufVxuXG4vKipcbiAqIENsZWFucyB1cCBzcGFjaW5nIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqIEBwYXJhbSBzZWNvbmRSdW4gV2hldGhlciB0aGUgZnVuY3Rpb24gaXMgYmVpbmcgcnVuIGZvciB0aGUgc2Vjb25kIHRpbWUsIGFmdGVyIG90aGVyIHByb2Nlc3NpbmcuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBTcGFjaW5nKGNvbnRlbnQ6IHN0cmluZywgc2Vjb25kUnVuID0gZmFsc2UpIHtcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC8oXFxifFxccHtQdW5jdHVhdGlvbn18XFxdXFxdfFxcfVxcfXxcXHc+KSB7Mix9KFxcYnxcXHB7UHVuY3R1YXRpb259fFxcW1xcW3xcXHtcXHt8PFxcdykvZ3UsICckMSAkMicpOyAvLyBSZW1vdmUgZXh0cmEgc3BhY2VzIGJldHdlZW4gd29yZHMgYW5kIHNlbnRlbmNlc1xuICAgIGlmICghc2Vjb25kUnVuKSBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC9eICt8ICskL2dtLCAnJyk7IC8vIFJlbW92ZSBleHRyYSBzcGFjZXMgYXQgdGhlIHN0YXJ0IG9yIGVuZCBvZiBsaW5lc1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoL1xcbnszLH0vZywgJ1xcblxcbicpOyAvLyBSZW1vdmUgZXh0cmEgbmV3bGluZXNcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9cXHMqKHt7W159XSpzdHVifX0pL2ksICdcXG5cXG4kMScpOyAvLyBFbnN1cmUgdGhlcmUgaXMgb25lIGJsYW5rIGxpbmUgYmVmb3JlIHRoZSBmaXJzdCBzdHViIHRlbXBsYXRlXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXFxzKyQvZywgJycpOyAvLyBSZW1vdmUgdHJhaWxpbmcgc3BhY2VzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXihbIypdKykgKi9nbSwgJyQxICcpOyAvLyBFbnN1cmUgdGhlcmUgaXMgYSBzcGFjZSBhZnRlciBhIGJ1bGxldCBvciBoYXNoIGluIGEgbGlzdCBpdGVtXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXihbIypdKyAuKilcXG4rKD89WyMqXSsgKS9nbSwgJyQxXFxuJyk7IC8vIFJlbW92ZSBuZXdsaW5lcyBiZXR3ZWVuIGxpc3QgaXRlbXNcbiAgICBpZiAoIXNlY29uZFJ1bikgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvKD88IVxcfClcXHMrKD89PHJlZig/IWVyZW5jZXMpKS9nLCAnJyk7IC8vIFJlbW92ZSBzcGFjZXMgYmVmb3JlIHJlZmVyZW5jZXNcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlQWxsKC88XFwvKFtBLVphLXpdKykgKz4vZywgJzwvJDE+Jyk7IC8vIFJlbW92ZSBleGNlc3Mgc3BhY2UgaW4gY2xvc2luZyB0YWdzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXig9Ky4qPz0rKSRcXG57Mix9KD89Xj0rLio/PSskKS9nbSwgJyQxXFxuJyk7IC8vIFJlbW92ZSBleHRyYSBuZXdsaW5lcyBiZXR3ZWVuIGVtcHR5IHNlY3Rpb24gYW5kIGZvbGxvd2luZyBzZWN0aW9uXG4gICAgY29udGVudCA9IGNvbnRlbnQudHJpbSgpOyAvLyBSZW1vdmUgd2hpdGVzcGFjZSBhdCB0aGUgc3RhcnQgb3IgZW5kIG9mIHRoZSBjb250ZW50XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuLyoqXG4gKiBDbGVhbnMgdXAgcmVmZXJlbmNlcyBpbiBhbiBhcnRpY2xlJ3MgY29udGVudC5cbiAqIEBwYXJhbSBjb250ZW50IFRoZSBhcnRpY2xlIGNvbnRlbnQgdG8gY2xlYW4gdXAuXG4gKi9cbmZ1bmN0aW9uIGNsZWFudXBSZWZlcmVuY2VzKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwoXG4gICAgICAgIC8oKD86PHJlZig/IWVyZW5jZXMpW14vXSo/Pi4qPzxcXC9yZWY+fDxyZWYoPyFlcmVuY2VzKS4qP1xcLz4pKykoWyEsLjs/XSk/L2csXG4gICAgICAgIChmdWxsTWF0Y2gsIHJlZmVyZW5jZVRhZzogc3RyaW5nLCBwdW5jdHVhdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkKSA9PiAocHVuY3R1YXRpb24gPz8gJycpICsgcmVmZXJlbmNlVGFnLFxuICAgICk7IC8vIEZpeCBwdW5jdHVhdGlvbiBmb2xsb3dpbmcgcmVmZXJlbmNlc1xuXG4gICAgY29uc3QgcmVmZXJlbmNlczogeyBzdGFydDogbnVtYmVyOyBlbmQ6IG51bWJlcjsgaXNTZWxmQ2xvc2luZz86IHRydWUgfVtdID0gW107XG5cbiAgICBsZXQgaXNJbnNpZGVOb3dpa2kgPSBmYWxzZTtcbiAgICBsZXQgaXNJbnNpZGVDb21tZW50ID0gZmFsc2U7XG5cbiAgICBsZXQgY3VycmVudExvY2F0aW9uID0gMDtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgY29udGVudCBmb2xsb3dpbmcgdGhlIGN1cnJlbnQgbG9jYXRpb24gbWF0Y2hlcyB0aGUgZGVzaXJlZCBzdHJpbmcuXG4gICAgICogQHBhcmFtIGRlc2lyZWRTdHJpbmcgVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXRTdHJpbmcoZGVzaXJlZFN0cmluZzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGlzQXRTdHJpbmcgPSBjb250ZW50LnNsaWNlKGN1cnJlbnRMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uICsgZGVzaXJlZFN0cmluZy5sZW5ndGgpID09PSBkZXNpcmVkU3RyaW5nO1xuXG4gICAgICAgIGlmIChpc0F0U3RyaW5nKSBjdXJyZW50TG9jYXRpb24gKz0gZGVzaXJlZFN0cmluZy5sZW5ndGg7XG5cbiAgICAgICAgcmV0dXJuIGlzQXRTdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJvY2VlZHMgdGhyb3VnaCB0aGUgY29udGVudCB1bnRpbCB0aGUgZGVzaXJlZCBzdHJpbmcgaXMgZm91bmQuXG4gICAgICogQHBhcmFtIGRlc2lyZWRTdHJpbmcgVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByb2NlZWRVbnRpbFN0cmluZyhkZXNpcmVkU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRMb2NhdGlvbiA8IGNvbnRlbnQubGVuZ3RoICYmICFpc0F0U3RyaW5nKGRlc2lyZWRTdHJpbmcpKSBjdXJyZW50TG9jYXRpb24rKztcbiAgICB9XG5cbiAgICB3aGlsZSAoY3VycmVudExvY2F0aW9uIDwgY29udGVudC5sZW5ndGgpXG4gICAgICAgIGlmIChpc0F0U3RyaW5nKCc8bm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwvbm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8IS0tJykpIGlzSW5zaWRlQ29tbWVudCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJy0tPicpKSBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoIWlzSW5zaWRlTm93aWtpICYmICFpc0luc2lkZUNvbW1lbnQpXG4gICAgICAgICAgICBpZiAoIWlzQXRTdHJpbmcoJzxyZWZlcmVuY2VzJykgJiYgaXNBdFN0cmluZygnPHJlZicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBjdXJyZW50TG9jYXRpb24gLSA0O1xuXG4gICAgICAgICAgICAgICAgcHJvY2VlZFVudGlsU3RyaW5nKCc+Jyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGZDbG9zaW5nID0gY29udGVudFxuICAgICAgICAgICAgICAgICAgICAuc2xpY2Uoc3RhcnQsIGN1cnJlbnRMb2NhdGlvbiAtIDEpXG4gICAgICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAgICAgLmVuZHNXaXRoKCcvJyk7XG5cbiAgICAgICAgICAgICAgICByZWZlcmVuY2VzLnB1c2goaXNTZWxmQ2xvc2luZyA/IHsgc3RhcnQsIGVuZDogY3VycmVudExvY2F0aW9uLCBpc1NlbGZDbG9zaW5nIH0gOiB7IHN0YXJ0LCBlbmQ6IC0xIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0F0U3RyaW5nKCc8L3JlZj4nKSkgcmVmZXJlbmNlcy5hdCgtMSkhLmVuZCA9IGN1cnJlbnRMb2NhdGlvbjtcbiAgICAgICAgICAgIGVsc2UgY3VycmVudExvY2F0aW9uKys7XG4gICAgICAgIGVsc2UgY3VycmVudExvY2F0aW9uKys7XG5cbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG5cbiAgICBjb25zdCByZXBsYWNlbWVudHM6IFtzdHJpbmcsIHN0cmluZ11bXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCByZWZlcmVuY2Ugb2YgcmVmZXJlbmNlcykge1xuICAgICAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBjb250ZW50LnNsaWNlKHJlZmVyZW5jZS5zdGFydCwgcmVmZXJlbmNlLmVuZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhcnRUYWcgPSAvPHJlZig/IWVyZW5jZXMpLio/Pi9pcy5leGVjKG9yaWdpbmFsVGV4dCkhWzBdO1xuXG4gICAgICAgIGNvbnN0IHBhcnNlZFRhZyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoXG4gICAgICAgICAgICByZWZlcmVuY2UuaXNTZWxmQ2xvc2luZyA/IHN0YXJ0VGFnLnJlcGxhY2UoLyAqXFwvICo+LywgJyAvPicpIDogc3RhcnRUYWcgKyAnPC9yZWY+JyxcbiAgICAgICAgICAgICd0ZXh0L2h0bWwnLFxuICAgICAgICApLmJvZHkuZmlyc3RDaGlsZCBhcyBIVE1MVW5rbm93bkVsZW1lbnQ7XG5cbiAgICAgICAgbGV0IG91dHB1dCA9IHBhcnNlZFRhZy5vdXRlckhUTUwucmVwbGFjZUFsbCgnJmFtcDsnLCAnJicpO1xuXG4gICAgICAgIGNvbnN0IHRhZ0NvbnRlbnQgPSBvcmlnaW5hbFRleHRcbiAgICAgICAgICAgIC5zbGljZShzdGFydFRhZy5sZW5ndGgsIC02KVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgLnJlcGxhY2VBbGwoL15cXFsgKihbXiBcXF1dKikgKl0kL2dtLCAnJDEnKVxuICAgICAgICAgICAgLnRyaW0oKTtcblxuICAgICAgICBvdXRwdXQgPVxuICAgICAgICAgICAgcmVmZXJlbmNlLmlzU2VsZkNsb3NpbmcgfHwgdGFnQ29udGVudC5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICA/IG91dHB1dC5yZXBsYWNlKC8+XFxzKjxcXC9yZWY+LywgJyAvPicpXG4gICAgICAgICAgICAgICAgOiBgJHtvdXRwdXQuc2xpY2UoMCwgLTYpfSR7dGFnQ29udGVudH08L3JlZj5gO1xuXG4gICAgICAgIGlmIChvcmlnaW5hbFRleHQgIT09IG91dHB1dCkgcmVwbGFjZW1lbnRzLnB1c2goW29yaWdpbmFsVGV4dCwgb3V0cHV0XSk7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBbb3JpZ2luYWxUZXh0LCBvdXRwdXRdIG9mIHJlcGxhY2VtZW50cykgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShvcmlnaW5hbFRleHQsIG91dHB1dCk7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cblxuaW50ZXJmYWNlIFRlbXBsYXRlUmVkaXJlY3Qge1xuICAgIGZyb206IHN0cmluZ1tdO1xuICAgIHRvOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRm9ybWF0cyB0ZW1wbGF0ZSBzcGFjaW5nIGluIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBmb3JtYXQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZvcm1hdFRlbXBsYXRlcyhjb250ZW50OiBzdHJpbmcpIHtcbiAgICBlbnVtIEZvcm1hdFN0eWxlIHtcbiAgICAgICAgRXhwYW5kZWQsXG4gICAgICAgIEV4cGFuZGVkQWxpZ25lZCxcbiAgICAgICAgTWluaW1pemVkLFxuICAgICAgICBNaW5pbWl6ZWRTcGFjZWQsXG4gICAgfVxuXG4gICAgZW51bSBOYW1lc3BhY2Uge1xuICAgICAgICBVc2VyID0gMixcbiAgICAgICAgVGVtcGxhdGUgPSAxMCxcbiAgICAgICAgRHJhZnQgPSAxMTgsXG4gICAgfVxuXG4gICAgY29uc3QgdGVtcGxhdGVBbGlhc2VzID0gSlNPTi5wYXJzZSgoYXdhaXQgZ2V0UGFnZUNvbnRlbnQoJ1VzZXI6RWVqaXQ0My9zY3JpcHRzL2FydGljbGUtY2xlYW5lci5qc29uJykpID8/ICdbXScpIGFzIFRlbXBsYXRlUmVkaXJlY3RbXTtcblxuICAgIGNvbnN0IG1hcHBlZFRlbXBsYXRlQWxpYXNlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgdGVtcGxhdGVBbGlhc2VzLmZsYXRNYXAoKGFsaWFzKSA9PiBhbGlhcy5mcm9tLm1hcCgoZnJvbSkgPT4gW2Zyb20uY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBmcm9tLnNsaWNlKDEpLCBhbGlhcy50b10pKSxcbiAgICApO1xuXG4gICAgY2xhc3MgVGVtcGxhdGUge1xuICAgICAgICBwdWJsaWMgbG9jYXRpb246IHsgc3RhcnQ6IG51bWJlcjsgZW5kPzogbnVtYmVyIH07XG4gICAgICAgIHB1YmxpYyBpc05lc3RlZCA9IGZhbHNlO1xuXG4gICAgICAgIHB1YmxpYyBmdWxsVGV4dD86IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSBmdWxsVGV4dEVzY2FwZWQ/OiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcmF3TmFtZT86IHN0cmluZztcbiAgICAgICAgcHJpdmF0ZSBuYW1lPzogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIHBhcmFtZXRlcnM6IHsga2V5OiBzdHJpbmcgfCBudWxsOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuICAgICAgICBwdWJsaWMgc3ViVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG5cbiAgICAgICAgcHJpdmF0ZSBQTEFDRUhPTERFUl9TVFJJTkdTID0gWydcXHV7RjAwMDB9JywgJ1xcdXsxMEZGRkZ9JywgJ1xcdXtGRkZGRX0nXTtcblxuICAgICAgICBwcml2YXRlIFBJUEVfRVNDQVBFX1JFR0VYRVMgPSBbLyhcXFtcXFtbXlxcXV0qPylcXHwoLio/XV0pL2csIC8oPCEtLS4qPylcXHwoLio/LS0+KS9nLCAvKDxub3dpa2k+Lio/KVxcfCguKj88XFwvbm93aWtpPikvZ107XG5cbiAgICAgICAgcHJpdmF0ZSBUQUdfRVFVQUxTX0VTQ0FQRV9SRUdFWEVTID0gWy88KFxcdyspKCBbXjw+XSs/KSg/PCFcXC8pPi4qPzxcXC9cXDE+L2csIC88KFxcdyspKCBbXjw+XSs/KVxcLz4vZ107XG5cbiAgICAgICAgcHJpdmF0ZSB0ZW1wbGF0ZUFsaWFzZXMgPSBtYXBwZWRUZW1wbGF0ZUFsaWFzZXM7XG5cbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0VGVtcGxhdGVTdHlsZXMgPSB7XG4gICAgICAgICAgICBbRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkXTogW1xuICAgICAgICAgICAgICAgICdhbGJ1bSByYXRpbmcnLFxuICAgICAgICAgICAgICAgICdhbGJ1bSByZXZpZXdzJyxcbiAgICAgICAgICAgICAgICAnYW1lcmljYW4gZm9vdGJhbGwgdW5pZm9ybScsXG4gICAgICAgICAgICAgICAgJ2F1c3RyYWxpYW4gcnVsZXMgZm9vdGJhbGwga2l0JyxcbiAgICAgICAgICAgICAgICAnYXV0b21hdGljIHRheG9ib3gnLFxuICAgICAgICAgICAgICAgICdiYXNlYmFsbCB1bmlmb3JtJyxcbiAgICAgICAgICAgICAgICAnYmFza2V0YmFsbCBraXQnLFxuICAgICAgICAgICAgICAgICdiZWFjaGhhbmRiYWxsIGtpdCcsXG4gICAgICAgICAgICAgICAgJ2Jsb2NrcXVvdGUnLFxuICAgICAgICAgICAgICAgICdjaGVtYm94JyxcbiAgICAgICAgICAgICAgICAnY3JpY2tldCB1bmlmb3JtJyxcbiAgICAgICAgICAgICAgICAnZWxlY3Rpb24gYm94JyxcbiAgICAgICAgICAgICAgICAnZXBpc29kZSBsaXN0JyxcbiAgICAgICAgICAgICAgICAnZXh0ZXJuYWwgbXVzaWMgdmlkZW8nLFxuICAgICAgICAgICAgICAgICdleHRyYSBhbGJ1bSBjb3ZlcicsXG4gICAgICAgICAgICAgICAgJ2ZpZWxkIGhvY2tleSBraXQnLFxuICAgICAgICAgICAgICAgICdmb290YmFsbCBib3gnLFxuICAgICAgICAgICAgICAgICdmb290YmFsbCBraXQnLFxuICAgICAgICAgICAgICAgICdmb290YmFsbGJveCcsXG4gICAgICAgICAgICAgICAgJ2hhbmRiYWxsIGtpdCcsXG4gICAgICAgICAgICAgICAgJ2h5YnJpZGJveCcsXG4gICAgICAgICAgICAgICAgJ2ljZWhvY2tleSBraXQnLFxuICAgICAgICAgICAgICAgICdpY2hub2JveCcsXG4gICAgICAgICAgICAgICAgJ2luZm9ib3gnLFxuICAgICAgICAgICAgICAgICdpbmZyYXNwZWNpZXNib3gnLFxuICAgICAgICAgICAgICAgICdqdWRvIGJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICdqdWRvIHJlcGVjaGFnZScsXG4gICAgICAgICAgICAgICAgJ2xpc3RlbicsXG4gICAgICAgICAgICAgICAgJ2xvY2F0aW9uIG1hcCcsXG4gICAgICAgICAgICAgICAgJ21lZGljYWwgcmVzb3VyY2VzJyxcbiAgICAgICAgICAgICAgICAnbW90b3JzcG9ydCBzZWFzb24nLFxuICAgICAgICAgICAgICAgICdtdWx0aXBsZSBpbWFnZScsXG4gICAgICAgICAgICAgICAgJ211c2ljIHJhdGluZ3MnLFxuICAgICAgICAgICAgICAgICdteWNvbW9ycGhib3gnLFxuICAgICAgICAgICAgICAgICduYXZib3gnLFxuICAgICAgICAgICAgICAgICdvb2JveCcsXG4gICAgICAgICAgICAgICAgJ29yYml0Ym94JyxcbiAgICAgICAgICAgICAgICAnb3NtIGxvY2F0aW9uIG1hcCcsXG4gICAgICAgICAgICAgICAgJ3F1b3RlIGJveCcsXG4gICAgICAgICAgICAgICAgJ3JlcGVjaGFnZScsXG4gICAgICAgICAgICAgICAgJ3J1Z2J5Ym94JyxcbiAgICAgICAgICAgICAgICAnc2lkZWJhcicsXG4gICAgICAgICAgICAgICAgJ3NpbmdsZSByYXRpbmdzJyxcbiAgICAgICAgICAgICAgICAnc2luZ2xlcycsXG4gICAgICAgICAgICAgICAgJ3NvbmcgcmF0aW5ncycsXG4gICAgICAgICAgICAgICAgJ3NwZWNpZXNib3gnLFxuICAgICAgICAgICAgICAgICdzdGFyYm94JyxcbiAgICAgICAgICAgICAgICAnc3VjY2Vzc2lvbiBib3gnLFxuICAgICAgICAgICAgICAgICd0YXhvYm94JyxcbiAgICAgICAgICAgICAgICAndGVhbSBicmFja2V0JyxcbiAgICAgICAgICAgICAgICAndHJhY2sgbGlzdGluZycsXG4gICAgICAgICAgICAgICAgJ3R3ZWV0JyxcbiAgICAgICAgICAgICAgICAndmlydXNib3gnLFxuICAgICAgICAgICAgICAgICd2b2xsZXliYWxsIGtpdCcsXG5cbiAgICAgICAgICAgICAgICAvLyBOdW1iZXJlZCBicmFja2V0c1xuICAgICAgICAgICAgICAgICdudGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcybnRlYW0tbnRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMnRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnM3RlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnM3RlYW1ycicsXG4gICAgICAgICAgICAgICAgJzR0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzR0ZWFtcnInLFxuICAgICAgICAgICAgICAgICc1dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICc1dGVhbXJyJyxcbiAgICAgICAgICAgICAgICAnNnRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnNnRlYW1ycicsXG4gICAgICAgICAgICAgICAgJzd0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzd0ZWFtcnInLFxuICAgICAgICAgICAgICAgICc4dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICc4dGVhbXJvdW5kcm9iaW4nLFxuICAgICAgICAgICAgICAgICc4dGVhbXJyJyxcbiAgICAgICAgICAgICAgICAnOXRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMTB0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzExdGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcxMnRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMTN0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzE0dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcxNXRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMTZ0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzE4dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICcyMHRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMjR0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzI3dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICczMnRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnNDB0ZWFtYnJhY2tldCcsXG4gICAgICAgICAgICAgICAgJzQ4dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgICAgICc2NHRlYW1icmFja2V0JyxcbiAgICAgICAgICAgICAgICAnMTI4dGVhbWJyYWNrZXQnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtGb3JtYXRTdHlsZS5NaW5pbWl6ZWRdOiBbJ2JpcnRoIGRhdGUnLCAnY29vcmQnLCAnZGVhdGggZGF0ZScsICdlbmQgZGF0ZScsICdsYW5nJywgJ3N0YXJ0IGRhdGUnXSxcbiAgICAgICAgICAgIFtGb3JtYXRTdHlsZS5NaW5pbWl6ZWRTcGFjZWRdOiBbJ2luZm9ib3ggbWFwZnJhbWUnXSxcbiAgICAgICAgfTtcblxuICAgICAgICBwcml2YXRlIG5hbWVzcGFjZVNwZWNpZmljVGVtcGxhdGVzID0ge1xuICAgICAgICAgICAgW05hbWVzcGFjZS5EcmFmdF06IFtcbiAgICAgICAgICAgICAgICAnYWZjIGNvbW1lbnQnLFxuICAgICAgICAgICAgICAgICdhZmMgc3VibWlzc2lvbicsXG4gICAgICAgICAgICAgICAgJ2FmYyBzdWJtaXNzaW9uL2RyYWZ0JyxcbiAgICAgICAgICAgICAgICAnYWZjIHRvcGljJyxcbiAgICAgICAgICAgICAgICAnZHJhZnQgYXJ0aWNsZScsXG4gICAgICAgICAgICAgICAgJ2RyYWZ0IGNhdGVnb3JpZXMnLFxuICAgICAgICAgICAgICAgICdkcmFmdCB0b3BpY3MnLFxuICAgICAgICAgICAgICAgICdkcmFmdCcsXG4gICAgICAgICAgICAgICAgJ2RyYWZ0cyBtb3ZlZCBmcm9tIG1haW5zcGFjZScsXG4gICAgICAgICAgICAgICAgJ3ByZWxvYWRkcmFmdCBzdWJtaXQnLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtOYW1lc3BhY2UuVXNlcl06IFsnZGFzaGJvYXJkLndpa2llZHUub3JnIHNhbmRib3gnLCAndXNlciBzYW5kYm94JywgJ3VzZXJzcGFjZSBkcmFmdCddLFxuICAgICAgICB9O1xuXG4gICAgICAgIHByaXZhdGUgdGVtcGxhdGVzVG9LZWVwQ29udGVudCA9IFsnZHJhZnQgY2F0ZWdvcmllcyddO1xuXG4gICAgICAgIHByaXZhdGUgdGVtcGxhdGVzVG9TdWJzdCA9IFtcbiAgICAgICAgICAgIC8vIE1hZ2ljIHdvcmRzXG4gICAgICAgICAgICAnYXJ0aWNsZXBhZ2VuYW1lJyxcbiAgICAgICAgICAgICdhcnRpY2xlc3BhY2UnLFxuICAgICAgICAgICAgJ2Jhc2VwYWdlbmFtZScsXG4gICAgICAgICAgICAnZnVsbHBhZ2VuYW1lJyxcbiAgICAgICAgICAgICduYW1lc3BhY2UnLFxuICAgICAgICAgICAgJ25hbWVzcGFjZW51bWJlcicsXG4gICAgICAgICAgICAncGFnZW5hbWUnLFxuICAgICAgICAgICAgJ3Jvb3RwYWdlbmFtZScsXG4gICAgICAgICAgICAnc3ViamVjdHBhZ2VuYW1lJyxcbiAgICAgICAgICAgICdzdWJqZWN0c3BhY2UnLFxuICAgICAgICAgICAgJ3N1YnBhZ2VuYW1lJyxcbiAgICAgICAgICAgICd0YWxrcGFnZW5hbWUnLFxuICAgICAgICAgICAgJ3RhbGtzcGFjZScsXG5cbiAgICAgICAgICAgIC8vIFRlbXBsYXRlc1xuICAgICAgICAgICAgJ3BhZ2VuYW1lYmFzZScsXG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc3RhcnRMb2NhdGlvbjogbnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvY2F0aW9uID0geyBzdGFydDogc3RhcnRMb2NhdGlvbiB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHBhcnNlKCkge1xuICAgICAgICAgICAgdGhpcy5mdWxsVGV4dCA9IGNvbnRlbnQuc2xpY2UodGhpcy5sb2NhdGlvbi5zdGFydCwgdGhpcy5sb2NhdGlvbi5lbmQpO1xuICAgICAgICAgICAgdGhpcy5mdWxsVGV4dEVzY2FwZWQgPSB0aGlzLmZ1bGxUZXh0O1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YlRlbXBsYXRlIG9mIHRoaXMuc3ViVGVtcGxhdGVzKSB7XG4gICAgICAgICAgICAgICAgc3ViVGVtcGxhdGUucGFyc2UoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZnVsbFRleHRFc2NhcGVkID0gdGhpcy5mdWxsVGV4dEVzY2FwZWQucmVwbGFjZShzdWJUZW1wbGF0ZS5mdWxsVGV4dCEsIHRoaXMuUExBQ0VIT0xERVJfU1RSSU5HU1swXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB0cmltbWVkSW5uZXJUZXh0ID0gdGhpcy5mdWxsVGV4dEVzY2FwZWQuc2xpY2UoMiwgLTIpLnRyaW0oKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBwaXBlRXNjYXBlUmVnZXggb2YgdGhpcy5QSVBFX0VTQ0FQRV9SRUdFWEVTKVxuICAgICAgICAgICAgICAgIHdoaWxlIChwaXBlRXNjYXBlUmVnZXgudGVzdCh0cmltbWVkSW5uZXJUZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgdHJpbW1lZElubmVyVGV4dCA9IHRyaW1tZWRJbm5lclRleHQucmVwbGFjZUFsbChwaXBlRXNjYXBlUmVnZXgsIGAkMSR7dGhpcy5QTEFDRUhPTERFUl9TVFJJTkdTWzFdfSQyYCk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVnZXggb2YgdGhpcy5UQUdfRVFVQUxTX0VTQ0FQRV9SRUdFWEVTKVxuICAgICAgICAgICAgICAgIHRyaW1tZWRJbm5lclRleHQgPSB0cmltbWVkSW5uZXJUZXh0LnJlcGxhY2VBbGwocmVnZXgsIChmdWxsVGV4dCwgdGFnTmFtZTogc3RyaW5nLCBhdHRyaWJ1dGVzOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bGxUZXh0LnJlcGxhY2UoYXR0cmlidXRlcywgYXR0cmlidXRlcy5yZXBsYWNlQWxsKCc9JywgdGhpcy5QTEFDRUhPTERFUl9TVFJJTkdTWzJdKSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB0cmltbWVkSW5uZXJUZXh0XG4gICAgICAgICAgICAgICAgLnNwbGl0KCd8JylcbiAgICAgICAgICAgICAgICAubWFwKChwYXJhbWV0ZXIpID0+IHBhcmFtZXRlci5yZXBsYWNlQWxsKHRoaXMuUExBQ0VIT0xERVJfU1RSSU5HU1sxXSwgJ3wnKS50cmltKCkpO1xuXG4gICAgICAgICAgICB0aGlzLnJhd05hbWUgPSBwYXJhbWV0ZXJzLnNoaWZ0KCkhO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5yYXdOYW1lLnJlcGxhY2VBbGwoJ18nLCAnICcpO1xuXG4gICAgICAgICAgICAvLyBTdHJpcCBuYW1lc3BhY2UgcHJlZml4IGZyb20gbmFtZVxuICAgICAgICAgICAgaWYgKHRoaXMubmFtZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJ3RlbXBsYXRlOicpKSB0aGlzLm5hbWUgPSB0aGlzLm5hbWUuc2xpY2UoOSk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5hbWVMb3dlcmNhc2VGaXJzdCA9IHRoaXMubmFtZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHRoaXMubmFtZS5zbGljZSgxKTtcblxuICAgICAgICAgICAgLy8gUmVzb2x2ZSB0ZW1wbGF0ZSBhbGlhcyBpbiBuYW1lXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lTG93ZXJjYXNlRmlyc3QgaW4gdGhpcy50ZW1wbGF0ZUFsaWFzZXMgPyB0aGlzLnRlbXBsYXRlQWxpYXNlc1tuYW1lTG93ZXJjYXNlRmlyc3RdIDogdGhpcy5uYW1lO1xuXG4gICAgICAgICAgICBjb25zdCBzcGxpdFBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzLm1hcCgocGFyYW1ldGVycykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVxdWFsc0xvY2F0aW9uID0gcGFyYW1ldGVycy5pbmRleE9mKCc9Jyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXF1YWxzTG9jYXRpb24gPT09IC0xKSByZXR1cm4geyBrZXk6IG51bGwsIHZhbHVlOiBwYXJhbWV0ZXJzLnJlcGxhY2VBbGwodGhpcy5QTEFDRUhPTERFUl9TVFJJTkdTWzJdLCAnPScpLnRyaW0oKSB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbWV0ZXJzLnNsaWNlKGVxdWFsc0xvY2F0aW9uICsgMSkucmVwbGFjZUFsbCh0aGlzLlBMQUNFSE9MREVSX1NUUklOR1NbMl0sICc9Jyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHBhcmFtZXRlcnMuc2xpY2UoMCwgZXF1YWxzTG9jYXRpb24pLnRyaW0oKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGAke3ZhbHVlLnN0YXJ0c1dpdGgoJ1xcbicpID8gJ1xcbicgOiAnJ30ke3ZhbHVlLnRyaW0oKX1gLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gc3BsaXRQYXJhbWV0ZXJzO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzaG91bGRCZVJlbW92ZWQoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtuYW1lc3BhY2UsIHRlbXBsYXRlc10gb2YgT2JqZWN0LmVudHJpZXModGhpcy5uYW1lc3BhY2VTcGVjaWZpY1RlbXBsYXRlcykpIHtcbiAgICAgICAgICAgICAgICBpZiAobXcuY29uZmlnLmdldCgnd2dOYW1lc3BhY2VOdW1iZXInKSA9PT0gTnVtYmVyLnBhcnNlSW50KG5hbWVzcGFjZSkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRlbXBsYXRlcy5pbmNsdWRlcyh0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBnZXRTdHlsZSgpIHtcbiAgICAgICAgICAgIGxldCBtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVQcmVmaXhMZW5ndGggPSAwO1xuICAgICAgICAgICAgbGV0IG1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZUZvcm1hdFN0eWxlOiBGb3JtYXRTdHlsZSB8IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBbZm9ybWF0U3R5bGUsIHRlbXBsYXRlUHJlZml4ZXNdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuZGVmYXVsdFRlbXBsYXRlU3R5bGVzKSlcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRlbXBsYXRlUHJlZml4IG9mIHRlbXBsYXRlUHJlZml4ZXMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSEudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHRlbXBsYXRlUHJlZml4KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQcmVmaXgubGVuZ3RoID49IG1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZVByZWZpeExlbmd0aFxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZVByZWZpeExlbmd0aCA9IHRlbXBsYXRlUHJlZml4Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZUZvcm1hdFN0eWxlID0gTnVtYmVyLnBhcnNlSW50KGZvcm1hdFN0eWxlKSBhcyBGb3JtYXRTdHlsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbW9zdFNwZWNpZmljRGVmYXVsdFN0eWxlRm9ybWF0U3R5bGU7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGNsZWFudXBQYXJhbWV0ZXJzKCkge1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VQYXJhbWV0ZXJzID0gbmV3IFNldChbJ2NvdmVyJywgJ2ltYWdlX2ZsYWcnLCAnaW1hZ2UnLCAnbG9nbycsICdtYXBfaW1hZ2UnXSk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IG51bWJlciA9IDE7IG51bWJlciA8PSAxMDsgbnVtYmVyKyspIGltYWdlUGFyYW1ldGVycy5hZGQoYGltYWdlJHtudW1iZXJ9YCk7XG5cbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHRoaXMucGFyYW1ldGVycy5tYXAoKHsga2V5LCB2YWx1ZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAmJiBpbWFnZVBhcmFtZXRlcnMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ1tbJykgJiYgdmFsdWUuZW5kc1dpdGgoJ11dJykpIHZhbHVlID0gL1xcW1xcWyguKj8pXV0vZy5leGVjKHZhbHVlKSFbMV0uc3BsaXQoJ3wnKVswXTtcblxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14oRmlsZXxJbWFnZSk6LywgJycpLnJlcGxhY2VBbGwoJ18nLCAnICcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB7IGtleSwgdmFsdWUgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGZvcm1hdCgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mdWxsVGV4dCkgdGhpcy5wYXJzZSgpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRCZVJlbW92ZWQoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZXNUb0tlZXBDb250ZW50LmluY2x1ZGVzKHRoaXMubmFtZSEudG9Mb3dlckNhc2UoKSkgPyB0aGlzLnBhcmFtZXRlcnNbMF0udmFsdWUgOiAnJztcblxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkU3Vic3QgPVxuICAgICAgICAgICAgICAgIG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgIT09IChOYW1lc3BhY2UuVGVtcGxhdGUgYXMgbnVtYmVyKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzVG9TdWJzdC5zb21lKChuYW1lKSA9PiBuYW1lID09PSB0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkgfHwgdGhpcy5uYW1lIS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoYCR7bmFtZX06YCkpO1xuXG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IHRoaXMuZ2V0U3R5bGUoKTtcbiAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld05hbWUgPSB0aGlzLm5hbWUhO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm5hbWUhLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgndGVtcGxhdGU6JykpIG5ld05hbWUgPSB0aGlzLm5hbWUhLnNsaWNlKDkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNob3VsZFN1YnN0KSBuZXdOYW1lID0gYHN1YnN0OiR7bmV3TmFtZX1gO1xuXG4gICAgICAgICAgICAgICAgaWYgKG5ld05hbWUgIT09IHRoaXMucmF3TmFtZSEpIHRoaXMuZnVsbFRleHRFc2NhcGVkID0gdGhpcy5mdWxsVGV4dEVzY2FwZWQhLnJlcGxhY2UodGhpcy5yYXdOYW1lISwgbmV3TmFtZSk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN1YlRlbXBsYXRlIG9mIHRoaXMuc3ViVGVtcGxhdGVzKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZ1bGxUZXh0RXNjYXBlZCA9IHRoaXMuZnVsbFRleHRFc2NhcGVkIS5yZXBsYWNlKHRoaXMuUExBQ0VIT0xERVJfU1RSSU5HU1swXSwgc3ViVGVtcGxhdGUuZm9ybWF0KCkpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnVsbFRleHRFc2NhcGVkITtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0ID0gW2B7eyR7c2hvdWxkU3Vic3QgPyAnc3Vic3Q6JyA6ICcnfSR7dGhpcy5uYW1lIX1gXTtcblxuICAgICAgICAgICAgdGhpcy5jbGVhbnVwUGFyYW1ldGVycygpO1xuXG4gICAgICAgICAgICBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLkV4cGFuZGVkIHx8IHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWlyZWRLZXlMZW5ndGggPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZEFsaWduZWQpXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkS2V5TGVuZ3RoID0gTWF0aC5tYXgoLi4udGhpcy5wYXJhbWV0ZXJzLm1hcCgocGFyYW1ldGVyKSA9PiBwYXJhbWV0ZXIua2V5Py5sZW5ndGggPz8gMCkpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaW5kZXgsIHBhcmFtZXRlcl0gb2YgdGhpcy5wYXJhbWV0ZXJzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAhcGFyYW1ldGVyLmtleSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIXBhcmFtZXRlci52YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNsaWNlKGluZGV4ICsgMSkuZXZlcnkoKHBhcmFtZXRlcikgPT4gcGFyYW1ldGVyLmtleSA/PyAhcGFyYW1ldGVyLnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChgfCAke3BhcmFtZXRlci5rZXkgPyBgJHtwYXJhbWV0ZXIua2V5LnBhZEVuZChyZXF1aXJlZEtleUxlbmd0aCl9ID0gYCA6ICcnfSR7cGFyYW1ldGVyLnZhbHVlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBwYXJhbWV0ZXJdIG9mIHRoaXMucGFyYW1ldGVycy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgIXBhcmFtZXRlci52YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKHBhcmFtZXRlci5rZXkgfHwgdGhpcy5wYXJhbWV0ZXJzLnNsaWNlKGluZGV4ICsgMSkuZXZlcnkoKHBhcmFtZXRlcikgPT4gcGFyYW1ldGVyLmtleSA/PyAhcGFyYW1ldGVyLnZhbHVlKSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goYHwke3BhcmFtZXRlci5rZXkgPyBgJHtwYXJhbWV0ZXIua2V5fT1gIDogJyd9JHtwYXJhbWV0ZXIudmFsdWV9YCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXQucHVzaCgnfX0nKTtcblxuICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbMF0gKz0gJ319JztcblxuICAgICAgICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3R5bGUgPT09IEZvcm1hdFN0eWxlLk1pbmltaXplZFNwYWNlZCkge1xuICAgICAgICAgICAgICAgIG91dHB1dFtvdXRwdXQubGVuZ3RoIC0gMl0gKz0gJ319JztcblxuICAgICAgICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGpvaW5lZE91dHB1dCA9IG91dHB1dC5qb2luKFxuICAgICAgICAgICAgICAgIHN0eWxlID09PSBGb3JtYXRTdHlsZS5FeHBhbmRlZCB8fCBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuRXhwYW5kZWRBbGlnbmVkXG4gICAgICAgICAgICAgICAgICAgID8gJ1xcbidcbiAgICAgICAgICAgICAgICAgICAgOiBzdHlsZSA9PT0gRm9ybWF0U3R5bGUuTWluaW1pemVkU3BhY2VkXG4gICAgICAgICAgICAgICAgICAgICAgPyAnICdcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBzdWJUZW1wbGF0ZSBvZiB0aGlzLnN1YlRlbXBsYXRlcylcbiAgICAgICAgICAgICAgICBqb2luZWRPdXRwdXQgPSBqb2luZWRPdXRwdXQucmVwbGFjZSh0aGlzLlBMQUNFSE9MREVSX1NUUklOR1NbMF0sIHN1YlRlbXBsYXRlLmZvcm1hdCgpKTtcblxuICAgICAgICAgICAgcmV0dXJuIGpvaW5lZE91dHB1dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFsbFRlbXBsYXRlczogVGVtcGxhdGVbXSA9IFtdO1xuXG4gICAgY29uc3QgaW5zaWRlVGVtcGxhdGVzOiBUZW1wbGF0ZVtdID0gW107XG4gICAgbGV0IGlzSW5zaWRlTGluayA9IGZhbHNlO1xuICAgIGxldCBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgIGxldCBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcblxuICAgIGxldCBjdXJyZW50TG9jYXRpb24gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIHRoZSBjb250ZW50IGZvbGxvd2luZyB0aGUgY3VycmVudCBsb2NhdGlvbiBtYXRjaGVzIHRoZSBkZXNpcmVkIHN0cmluZy5cbiAgICAgKiBAcGFyYW0gZGVzaXJlZFN0cmluZyBUaGUgc3RyaW5nIHRvIHNlYXJjaCBmb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBdFN0cmluZyhkZXNpcmVkU3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgaXNBdFN0cmluZyA9IGNvbnRlbnQuc2xpY2UoY3VycmVudExvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24gKyBkZXNpcmVkU3RyaW5nLmxlbmd0aCkgPT09IGRlc2lyZWRTdHJpbmc7XG5cbiAgICAgICAgaWYgKGlzQXRTdHJpbmcpIGN1cnJlbnRMb2NhdGlvbiArPSBkZXNpcmVkU3RyaW5nLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4gaXNBdFN0cmluZztcbiAgICB9XG5cbiAgICB3aGlsZSAoY3VycmVudExvY2F0aW9uIDwgY29udGVudC5sZW5ndGgpXG4gICAgICAgIGlmIChpc0F0U3RyaW5nKCc8bm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJzwvbm93aWtpPicpKSBpc0luc2lkZU5vd2lraSA9IGZhbHNlO1xuICAgICAgICBlbHNlIGlmIChpc0F0U3RyaW5nKCc8IS0tJykpIGlzSW5zaWRlQ29tbWVudCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJy0tPicpKSBpc0luc2lkZUNvbW1lbnQgPSBmYWxzZTtcbiAgICAgICAgZWxzZSBpZiAoIWlzSW5zaWRlTm93aWtpICYmICFpc0luc2lkZUNvbW1lbnQpXG4gICAgICAgICAgICBpZiAoaXNBdFN0cmluZygnW1snKSkgaXNJbnNpZGVMaW5rID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzSW5zaWRlTGluayAmJiBpc0F0U3RyaW5nKCddXScpKSBpc0luc2lkZUxpbmsgPSBmYWxzZTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzQXRTdHJpbmcoJ3t7JykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShjdXJyZW50TG9jYXRpb24gLSAyKTtcblxuICAgICAgICAgICAgICAgIGlmIChpbnNpZGVUZW1wbGF0ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5pc05lc3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGluc2lkZVRlbXBsYXRlcy5hdCgtMSk/LnN1YlRlbXBsYXRlcy5wdXNoKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbnNpZGVUZW1wbGF0ZXMucHVzaCh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzQXRTdHJpbmcoJ319JykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0VGVtcGxhdGUgPSBpbnNpZGVUZW1wbGF0ZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXN0VGVtcGxhdGUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgbGFzdFRlbXBsYXRlLmxvY2F0aW9uLmVuZCA9IGN1cnJlbnRMb2NhdGlvbjtcblxuICAgICAgICAgICAgICAgIGFsbFRlbXBsYXRlcy5wdXNoKGxhc3RUZW1wbGF0ZSk7XG4gICAgICAgICAgICB9IGVsc2UgY3VycmVudExvY2F0aW9uKys7XG4gICAgICAgIGVsc2UgY3VycmVudExvY2F0aW9uKys7XG5cbiAgICBsZXQgbmV3Q29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICBmb3IgKGNvbnN0IHRlbXBsYXRlIG9mIGFsbFRlbXBsYXRlcylcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZS5pc05lc3RlZCkge1xuICAgICAgICAgICAgdGVtcGxhdGUucGFyc2UoKTtcblxuICAgICAgICAgICAgbmV3Q29udGVudCA9IG5ld0NvbnRlbnQucmVwbGFjZSh0ZW1wbGF0ZS5mdWxsVGV4dCEsIHRlbXBsYXRlLmZvcm1hdCgpKTtcbiAgICAgICAgfVxuXG4gICAgcmV0dXJuIG5ld0NvbnRlbnQ7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB1bm5lY2Vzc2FyeSBjb21tZW50cyBmcm9tIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBjbGVhbiB1cC5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQ29tbWVudHMoY29udGVudDogc3RyaW5nKSB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgIT09IDApIHJldHVybiBjb250ZW50O1xuXG4gICAgY29uc3QgY29tbWVudHMgPSBbXG4gICAgICAgICdEbyBub3QgcmVtb3ZlIHRoaXMgbGluZScsXG4gICAgICAgICdFRElUIEJFTE9XIFRISVMgTElORScsXG4gICAgICAgICdJbXBvcnRhbnQsIGRvIG5vdCByZW1vdmUgYW55dGhpbmcgYWJvdmUgdGhpcyBsaW5lIGJlZm9yZSBhcnRpY2xlIGhhcyBiZWVuIGNyZWF0ZWQnLFxuICAgICAgICAnSW1wb3J0YW50LCBkbyBub3QgcmVtb3ZlIHRoaXMgbGluZSBiZWZvcmUgYXJ0aWNsZSBoYXMgYmVlbiBjcmVhdGVkJyxcbiAgICAgICAgJ0lubGluZSBjaXRhdGlvbnMgYWRkZWQgdG8geW91ciBhcnRpY2xlIHdpbGwgYXV0b21hdGljYWxseSBkaXNwbGF5IGhlcmUnLFxuICAgICAgICAnTm90ZTogVGhlIGZvbGxvd2luZyBwYWdlcyB3ZXJlIHJlZGlyZWN0cyB0byAnLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IGNvbW1lbnQgb2YgY29tbWVudHMpXG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2VBbGwobmV3IFJlZ0V4cChgICo8IS0tID8ke2VzY2FwZVJlZ2V4Q2hhcmFjdGVycyhjb21tZW50KX0uKj8tLT4gKlxcbj9gLCAnZ3MnKSwgJycpO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbi8qKlxuICogQWRkcyByZWxldmFudCB0YWdzIHRvIGFuIGFydGljbGUncyBjb250ZW50LlxuICogQHBhcmFtIGNvbnRlbnQgVGhlIGFydGljbGUgY29udGVudCB0byBhZGQgdGFncyB0by5cbiAqL1xuZnVuY3Rpb24gYXV0b1RhZ1BhZ2UoY29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgbnVtYmVyT2ZDYXRlZ29yaWVzID0gWy4uLmNvbnRlbnQubWF0Y2hBbGwoL1xcW1xcW0NhdGVnb3J5Oi9nKV0ubGVuZ3RoO1xuXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZUFsbCgvXFxuKnt7KHVuY2F0ZWdvcml6ZWR8aW1wcm92ZSBjYXRlZ29yaWVzKShcXHwuKz8pP319XFxuKi9naSwgJycpO1xuXG4gICAgaWYgKG51bWJlck9mQ2F0ZWdvcmllcyA9PT0gMCAmJiAhL3t7dW5jYXRlZ29yaXplZC9pLnRlc3QoY29udGVudCkpXG4gICAgICAgIGNvbnRlbnQgKz0gJ1xcblxcbnt7VW5jYXRlZ29yaXplZHx7e3N1YnN0OkNVUlJFTlRNT05USE5BTUV9fSB7e3N1YnN0OkNVUlJFTlRZRUFSfX19fSc7XG4gICAgZWxzZSBpZiAobnVtYmVyT2ZDYXRlZ29yaWVzID09PSAxICYmICEve3tpbXByb3ZlIGNhdGVnb3JpZXMvaS50ZXN0KGNvbnRlbnQpKVxuICAgICAgICBjb250ZW50ICs9ICdcXG5cXG57e0ltcHJvdmUgY2F0ZWdvcmllc3x7e3N1YnN0OkNVUlJFTlRNT05USE5BTUV9fSB7e3N1YnN0OkNVUlJFTlRZRUFSfX19fSc7XG5cbiAgICByZXR1cm4gY29udGVudDtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkFHTyxJQUFNQSxFQUFNLElBQUksR0FBRyxJQU0xQixlQUFzQkMsRUFBZUMsRUFBZSxDQUNoRCxPQUNLLE1BQU1GLEVBQUksSUFBSSxDQUNYLE9BQVEsUUFDUixjQUFlLElBQ2YsS0FBTSxZQUNOLE9BQVEsVUFDUixRQUFTLE9BQ1QsT0FBUUUsQ0FDWixDQUFtQyxHQUNyQyxNQUFNLE1BQU0sQ0FBQyxFQUFFLFlBQVksQ0FBQyxFQUFFLE1BQU0sS0FBSyxRQUFRLEtBQUssQ0FDNUQsQ0NpQlEsR0FBRyxPQUFPLElBQUksbUJBQW1CLEVBQUksR0FDcEMsR0FBRyxPQUFPLElBQUksc0JBQXNCLEdBRXpDLEdBQUcsT0FBTyxNQUFNLENBQUMsaUJBQWtCLHNCQUFzQixFQUFHLElBQU0sQ0FDOUQsR0FBRyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9yQixFQUVNLElBQU1DLEVBQU8sR0FBRyxLQUFLLGVBQ2pCLEdBQUcsT0FBTyxJQUFJLE1BQU0sSUFBTSxVQUFZLGVBQWlCLGFBQ3ZELElBQ0EsMEJBQ0EsaUJBQ0osRUFFSUMsRUFBeUIsR0FFdkJDLEVBQWlCLDRGQUV2QixHQUFHLEtBQUssNEJBQTRCLEVBQUUsSUFBSSxJQUFNLENBQzVDLEdBQUlELEVBQXdCLENBQ3hCLElBQU1FLEVBQWUsU0FBUyxjQUFtQyxzQ0FBc0MsRUFFbEdBLEVBQWEsTUFBTSxTQUFTRCxFQUFlLE1BQU0sQ0FBQyxDQUFDLElBQ2hEQyxFQUFhLE9BQVMsQ0FBQ0EsRUFBYSxNQUFNLFdBQVcsS0FBSyxHQUFLLENBQUNBLEVBQWEsTUFBTSxTQUFTLE1BQU0sRUFDbEdBLEVBQWEsT0FBUyxL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LElBQU15SCxFQUFxQixDQUFDLEdBQUd6SCxFQUFRLFNBQVMsZ0JBQWdCLENBQUMsRUFBRSxPQUVuRSxPQUFBQSxFQUFVQSxFQUFRLFdBQVcseURBQTBELEVBQUUsRUFFckZ5SCxJQUF1QixHQUFLLENBQUMsbUJBQW1CLEtBQUt6SCxDQUFPLEVBQzVEQSxHQUFXO0FBQUE7QUFBQSxvRUFDTnlILElBQXVCLEdBQUssQ0FBQyx3QkFBd0IsS0FBS3pILENBQU8sSUFDdEVBLEdBQVc7QUFBQTtBQUFBLDBFQUVSQSxDQUNYIiwKICAibmFtZXMiOiBbImFwaSIsICJnZXRQYWdlQ29udGVudCIsICJ0aXRsZSIsICJsaW5rIiwgInNob3VsZEFkZFNjcmlwdE1lc3NhZ2UiLCAiU0NSSVBUX01FU1NBR0UiLCAic3VtbWFyeUlucHV0IiwgImV2ZW50IiwgImVkaXRCb3giLCAib3JpZ2luYWxUZXh0IiwgImZpbmFsVGV4dCIsICJjbGVhbnVwU3RyYXlVbmljb2RlQ2hhcmFjdGVycyIsICJjbGVhbnVwU2VjdGlvbkhlYWRlcnMiLCAiY2xlYW51cE1hZ2ljV29yZHMiLCAiY2xlYW51cERpc3BsYXl0aXRsZXNBbmREZWZhdWx0c29ydHMiLCAiY2xlYW51cENhdGVnb3JpZXMiLCAiY2xlYW51cExpbmtzIiwgImNsZWFudXBJbXByb3BlckNoYXJhY3RlcnMiLCAiY2xlYW51cFllYXJSYW5nZXMiLCAiY2xlYW51cFN0cmF5TWFya3VwIiwgImNsZWFudXBTcGFjaW5nIiwgImNsZWFudXBSZWZlcmVuY2VzIiwgImZvcm1hdFRlbXBsYXRlcyIsICJyZW1vdmVDb21tZW50cyIsICJhdXRvVGFnUGFnZSIsICJzdXJmYWNlTW9kZWwiLCAiZXNjYXBlUmVnZXhDaGFyYWN0ZXJzIiwgInN0cmluZyIsICJjb250ZW50IiwgInN0cmF5VW5pY29kZVJlZ2V4IiwgImNvbW1vblJlcGxhY2VtZW50cyIsICJjb21tb25NaXNjYXBpdGFsaXplZFdvcmRzIiwgInJldmVyc2VDb21tb25SZXBsYWNlbWVudHMiLCAia2V5IiwgInZhbHVlcyIsICJ2YWx1ZSIsICJwYXJzZWRIZWFkZXJzIiwgImhlYWRlciIsICJuYW1lIiwgInN0YXJ0TWFya3VwIiwgImVuZE1hcmt1cCIsICJsaW5rcyIsICJkZXB0aCIsICJoZWFkZXJzU2V0IiwgInRpdGxlU3BhY2VyIiwgImxvd2VyY2FzZU5hbWUiLCAiY2FwaXRhbGl6ZWROYW1lIiwgIndvcmQiLCAib3V0cHV0IiwgInBhcnNlZFRhZ3MiLCAidGFnIiwgImZ1bGxUYWciLCAidHlwZSIsICJjdXJyZW50VGl0bGUiLCAib3JpZ2luYWxUYWdSZWdleCIsICJ1bnByZWZpeGVkVGl0bGUiLCAidGl0bGUiLCAiZGVmYXVsdEtleSIsICJjdXN0b21LZXkiLCAibmV3VGV4dCIsICJmdW5jdGlvbnNDYWxsZWRXaGlsZUVzY2FwZWQiLCAiY2xvc2VkTGlua3MiLCAiaXNJbnNpZGVOb3dpa2kiLCAiaXNJbnNpZGVDb21tZW50IiwgImN1cnJlbnRMb2NhdGlvbiIsICJpc0F0U3RyaW5nIiwgImRlc2lyZWRTdHJpbmciLCAic2hvdWxkSW5jcmVtZW50IiwgImxhc3RMaW5rIiwgIm5ld0xpbmtDb250ZW50IiwgIm5hbWVzcGFjZU5hbWVzIiwgImxpbmtMb2NhdGlvbiIsICJpbm5lckxpbmsiLCAidW5wYXJzZWRMaW5rIiwgInBhcmFtZXRlcnMiLCAiYWx0VGV4dCIsICJpc0ZpcnN0Q2hhcmFjdGVyQ29sb24iLCAic2hvdWxkRmlyc3RDaGFyYWN0ZXJCZUNvbG9uIiwgImxpbmtVcHBlcmNhc2VTdGFydCIsICJsaW5rTG93ZXJjYXNlU3RhcnQiLCAibmFtZXNwYWNlIiwgImFmdGVyTGlua1RleHQiLCAiYWRkZWRQdW5jdHVhdGlvbiIsICJuZXdMaW5rIiwgImZ1bmN0aW9uVG9DYWxsIiwgImxvb3BDb3VudGVyIiwgImxpbmtEYXRhIiwgImxpbmtDb250ZW50IiwgInJ1biIsICJlbGlwc2lzUGxhY2Vob2xkZXIiLCAibmJzcFBsYWNlaG9sZGVyIiwgIm9yaWdpbmFsIiwgInN0YXJ0IiwgImVuZCIsICJzdHJheU1hcmt1cFJlZ2V4ZXMiLCAicmVnZXgiLCAic2Vjb25kUnVuIiwgImZ1bGxNYXRjaCIsICJyZWZlcmVuY2VUYWciLCAicHVuY3R1YXRpb24iLCAicmVmZXJlbmNlcyIsICJwcm9jZWVkVW50aWxTdHJpbmciLCAiaXNTZWxmQ2xvc2luZyIsICJwYXJzZXIiLCAicmVwbGFjZW1lbnRzIiwgInJlZmVyZW5jZSIsICJzdGFydFRhZyIsICJ0YWdDb250ZW50IiwgIkZvcm1hdFN0eWxlIiwgIk5hbWVzcGFjZSIsICJ0ZW1wbGF0ZUFsaWFzZXMiLCAiZ2V0UGFnZUNvbnRlbnQiLCAibWFwcGVkVGVtcGxhdGVBbGlhc2VzIiwgImFsaWFzIiwgImZyb20iLCAiVGVtcGxhdGUiLCAic3RhcnRMb2NhdGlvbiIsICJzdWJUZW1wbGF0ZSIsICJ0cmltbWVkSW5uZXJUZXh0IiwgInBpcGVFc2NhcGVSZWdleCIsICJmdWxsVGV4dCIsICJ0YWdOYW1lIiwgImF0dHJpYnV0ZXMiLCAicGFyYW1ldGVyIiwgIm5hbWVMb3dlcmNhc2VGaXJzdCIsICJzcGxpdFBhcmFtZXRlcnMiLCAiZXF1YWxzTG9jYXRpb24iLCAidGVtcGxhdGVzIiwgIm1vc3RTcGVjaWZpY0RlZmF1bHRTdHlsZVByZWZpeExlbmd0aCIsICJtb3N0U3BlY2lmaWNEZWZhdWx0U3R5bGVGb3JtYXRTdHlsZSIsICJmb3JtYXRTdHlsZSIsICJ0ZW1wbGF0ZVByZWZpeGVzIiwgInRlbXBsYXRlUHJlZml4IiwgImltYWdlUGFyYW1ldGVycyIsICJudW1iZXIiLCAic2hvdWxkU3Vic3QiLCAic3R5bGUiLCAibmV3TmFtZSIsICJyZXF1aXJlZEtleUxlbmd0aCIsICJpbmRleCIsICJqb2luZWRPdXRwdXQiLCAiYWxsVGVtcGxhdGVzIiwgImluc2lkZVRlbXBsYXRlcyIsICJpc0luc2lkZUxpbmsiLCAidGVtcGxhdGUiLCAibGFzdFRlbXBsYXRlIiwgIm5ld0NvbnRlbnQiLCAiY29tbWVudHMiLCAiY29tbWVudCIsICJudW1iZXJPZkNhdGVnb3JpZXMiXQp9Cg==
