// <pre>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/displaytitle-editor.ts

"use strict";(()=>{var n=new mw.Api;async function d(i){return(await n.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:i})).query.pages[0].revisions?.[0].slots.main.content.trim()}mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui.styles.icons-editing-core"],()=>{if(mw.config.get("wgNamespaceNumber")<0||!mw.config.get("wgIsProbablyEditable"))return;mw.util.addCSS(`
#displaytitle-edit-button {
    margin-right: 0;
    margin-left: 3px;
    font-size: 15px;
}

#displaytitle-edit-box {
    display: inline-block;
    ${mw.config.get("skin")==="modern"?"margin-top: 2px;":""}
    margin-bottom: 2px;
    width: 200px;
    max-width: 200px;
    font-size: 15px;
}`),mw.config.get("skin")==="modern"&&mw.util.addCSS(`
#mw_header {
    height: 2.5em;
}

#p-personal {
    top: 2.5em;
}

#mw_main {
    margin-top: 4em;
}`);let i=new OO.ui.ButtonWidget({icon:"edit",framed:!1,id:"displaytitle-edit-button"});i.on("click",async()=>{i.setDisabled(!0),mw.config.get("skin")==="modern"&&mw.util.addCSS(`
#mw_header {
    height: 3em;
}

#p-personal {
    top: 3em;
}

#mw_main {
    margin-top: 4.5em;
}`);let a=mw.config.get("wgPageName").replaceAll("_"," "),e=new OO.ui.TextInputWidget({placeholder:a,id:"displaytitle-edit-box"});e.on("enter",async()=>{e.setDisabled(!0),e.pushPending(),await n.edit(mw.config.get("wgPageName"),r=>{let t=r.content.replaceAll(/{{\s*displaytitle\s*:\s*(.*?)\s*}}\n*/gi,"");if(!e.getValue()||e.getValue().replaceAll("_"," ")===a)return{text:t,summary:"Removing DISPLAYTITLE (via [[User:Eejit43/scripts/displaytitle-editor|script]])"};let s=`${t===r.content?"Adding DISPLAYTITLE of":"Changing DISPLAYTITLE to"} "${e.getValue()}" (via [[User:Eejit43/scripts/displaytitle-editor|script]])`,l=/^#redirect\s*\[\[.*?]]/i;return/{{short description/i.test(t)?{text:t.replace(/{{short description(.*?)}}/i,`{{short description$1}}
{{DISPLAYTITLE:${e.getValue()}}}`),summary:s}:l.test(t)?{text:t.replace(l,`$&

{{DISPLAYTITLE:${e.getValue()}}}`),summary:s}:{text:`{{DISPLAYTITLE:${e.getValue()}}}
${t}`,summary:s}}),mw.notify("Successfully updated DISPLAYTITLE, reloading...",{type:"success"}),window.location.reload()}),e.setDisabled(!0),e.pushPending(),i.$element[0].after(e.$element[0]);let o=(await d(mw.config.get("wgPageName"))??"").match(/{{\s*displaytitle\s*:\s*(.*?)\s*}}/gi);o&&e.setValue(o.at(-1).replace(/{{\s*displaytitle\s*:\s*(.*?)\s*}}/i,"$1")),e.setDisabled(!1),e.popPending()}),document.querySelector("#firstHeading")?.append(i.$element[0])});})();

// </pre>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vdXRpbGl0eS50cyIsICIuLi9zY3JpcHRzL2Rpc3BsYXl0aXRsZS1lZGl0b3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMgfSBmcm9tICd0eXBlcy1tZWRpYXdpa2kvYXBpX3BhcmFtcyc7XG5pbXBvcnQgdHlwZSB7IFBhZ2VSZXZpc2lvbnNSZXN1bHQgfSBmcm9tICcuL2dsb2JhbC10eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgbXcuQXBpKCk7XG5cbi8qKlxuICogRmV0Y2hlcyB0aGUgY29udGVudCBvZiBhIGdpdmVuIHBhZ2UuXG4gKiBAcGFyYW0gdGl0bGUgVGhlIHRpdGxlIHRvIGZldGNoLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFnZUNvbnRlbnQodGl0bGU6IHN0cmluZykge1xuICAgIHJldHVybiAoXG4gICAgICAgIChhd2FpdCBhcGkuZ2V0KHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgIHByb3A6ICdyZXZpc2lvbnMnLFxuICAgICAgICAgICAgcnZwcm9wOiAnY29udGVudCcsXG4gICAgICAgICAgICBydnNsb3RzOiAnbWFpbicsXG4gICAgICAgICAgICB0aXRsZXM6IHRpdGxlLFxuICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcykpIGFzIFBhZ2VSZXZpc2lvbnNSZXN1bHRcbiAgICApLnF1ZXJ5LnBhZ2VzWzBdLnJldmlzaW9ucz8uWzBdLnNsb3RzLm1haW4uY29udGVudC50cmltKCk7XG59XG4iLCAiaW1wb3J0IHsgYXBpLCBnZXRQYWdlQ29udGVudCB9IGZyb20gJy4uL3V0aWxpdHknO1xuXG5tdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdvb2pzLXVpLWNvcmUnLCAnb29qcy11aS5zdHlsZXMuaWNvbnMtZWRpdGluZy1jb3JlJ10sICgpID0+IHtcbiAgICBpZiAobXcuY29uZmlnLmdldCgnd2dOYW1lc3BhY2VOdW1iZXInKSA8IDApIHJldHVybjsgLy8gRG9uJ3QgcnVuIGluIHZpcnR1YWwgbmFtZXNwYWNlc1xuICAgIGlmICghbXcuY29uZmlnLmdldCgnd2dJc1Byb2JhYmx5RWRpdGFibGUnKSkgcmV0dXJuOyAvLyBEb24ndCBydW4gaWYgdXNlciBjYW4ndCBlZGl0IHBhZ2VcblxuICAgIG13LnV0aWwuYWRkQ1NTKGBcbiNkaXNwbGF5dGl0bGUtZWRpdC1idXR0b24ge1xuICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICBtYXJnaW4tbGVmdDogM3B4O1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbn1cblxuI2Rpc3BsYXl0aXRsZS1lZGl0LWJveCB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICR7bXcuY29uZmlnLmdldCgnc2tpbicpID09PSAnbW9kZXJuJyA/ICdtYXJnaW4tdG9wOiAycHg7JyA6ICcnfVxuICAgIG1hcmdpbi1ib3R0b206IDJweDtcbiAgICB3aWR0aDogMjAwcHg7XG4gICAgbWF4LXdpZHRoOiAyMDBweDtcbiAgICBmb250LXNpemU6IDE1cHg7XG59YCk7XG5cbiAgICBpZiAobXcuY29uZmlnLmdldCgnc2tpbicpID09PSAnbW9kZXJuJylcbiAgICAgICAgbXcudXRpbC5hZGRDU1MoYFxuI213X2hlYWRlciB7XG4gICAgaGVpZ2h0OiAyLjVlbTtcbn1cblxuI3AtcGVyc29uYWwge1xuICAgIHRvcDogMi41ZW07XG59XG5cbiNtd19tYWluIHtcbiAgICBtYXJnaW4tdG9wOiA0ZW07XG59YCk7XG5cbiAgICBjb25zdCBlZGl0QnV0dG9uID0gbmV3IE9PLnVpLkJ1dHRvbldpZGdldCh7IGljb246ICdlZGl0JywgZnJhbWVkOiBmYWxzZSwgaWQ6ICdkaXNwbGF5dGl0bGUtZWRpdC1idXR0b24nIH0pO1xuICAgIGVkaXRCdXR0b24ub24oJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBlZGl0QnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuXG4gICAgICAgIGlmIChtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtb2Rlcm4nKVxuICAgICAgICAgICAgbXcudXRpbC5hZGRDU1MoYFxuI213X2hlYWRlciB7XG4gICAgaGVpZ2h0OiAzZW07XG59XG5cbiNwLXBlcnNvbmFsIHtcbiAgICB0b3A6IDNlbTtcbn1cblxuI213X21haW4ge1xuICAgIG1hcmdpbi10b3A6IDQuNWVtO1xufWApO1xuXG4gICAgICAgIGNvbnN0IGFjdHVhbFRpdGxlID0gbXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpLnJlcGxhY2VBbGwoJ18nLCAnICcpO1xuXG4gICAgICAgIGNvbnN0IGVkaXRCb3ggPSBuZXcgT08udWkuVGV4dElucHV0V2lkZ2V0KHsgcGxhY2Vob2xkZXI6IGFjdHVhbFRpdGxlLCBpZDogJ2Rpc3BsYXl0aXRsZS1lZGl0LWJveCcgfSk7XG4gICAgICAgIGVkaXRCb3gub24oJ2VudGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZWRpdEJveC5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgICAgIGVkaXRCb3gucHVzaFBlbmRpbmcoKTtcblxuICAgICAgICAgICAgYXdhaXQgYXBpLmVkaXQobXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpLCAocmV2aXNpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gcmV2aXNpb24uY29udGVudC5yZXBsYWNlQWxsKC97e1xccypkaXNwbGF5dGl0bGVcXHMqOlxccyooLio/KVxccyp9fVxcbiovZ2ksICcnKTtcblxuICAgICAgICAgICAgICAgIGlmICghZWRpdEJveC5nZXRWYWx1ZSgpIHx8IGVkaXRCb3guZ2V0VmFsdWUoKS5yZXBsYWNlQWxsKCdfJywgJyAnKSA9PT0gYWN0dWFsVGl0bGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHRleHQsIHN1bW1hcnk6ICdSZW1vdmluZyBESVNQTEFZVElUTEUgKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL2Rpc3BsYXl0aXRsZS1lZGl0b3J8c2NyaXB0XV0pJyB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaXNBZGRlZCA9IHRleHQgPT09IHJldmlzaW9uLmNvbnRlbnQ7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0gYCR7aXNBZGRlZCA/ICdBZGRpbmcgRElTUExBWVRJVExFIG9mJyA6ICdDaGFuZ2luZyBESVNQTEFZVElUTEUgdG8nfSBcIiR7ZWRpdEJveC5nZXRWYWx1ZSgpfVwiICh2aWEgW1tVc2VyOkVlaml0NDMvc2NyaXB0cy9kaXNwbGF5dGl0bGUtZWRpdG9yfHNjcmlwdF1dKWA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZWRpcmVjdFJlZ2V4ID0gL14jcmVkaXJlY3RcXHMqXFxbXFxbLio/XV0vaTtcblxuICAgICAgICAgICAgICAgIGlmICgve3tzaG9ydCBkZXNjcmlwdGlvbi9pLnRlc3QodGV4dCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgL3t7c2hvcnQgZGVzY3JpcHRpb24oLio/KX19L2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYHt7c2hvcnQgZGVzY3JpcHRpb24kMX19XFxue3tESVNQTEFZVElUTEU6JHtlZGl0Qm94LmdldFZhbHVlKCl9fX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVkaXJlY3RSZWdleC50ZXN0KHRleHQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dC5yZXBsYWNlKHJlZGlyZWN0UmVnZXgsIGAkJlxcblxcbnt7RElTUExBWVRJVExFOiR7ZWRpdEJveC5nZXRWYWx1ZSgpfX19YCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIHsgdGV4dDogYHt7RElTUExBWVRJVExFOiR7ZWRpdEJveC5nZXRWYWx1ZSgpfX19XFxuJHt0ZXh0fWAsIHN1bW1hcnkgfTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtdy5ub3RpZnkoJ1N1Y2Nlc3NmdWxseSB1cGRhdGVkIERJU1BMQVlUSVRMRSwgcmVsb2FkaW5nLi4uJywgeyB0eXBlOiAnc3VjY2VzcycgfSk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBlZGl0Qm94LnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICBlZGl0Qm94LnB1c2hQZW5kaW5nKCk7XG5cbiAgICAgICAgZWRpdEJ1dHRvbi4kZWxlbWVudFswXS5hZnRlcihlZGl0Qm94LiRlbGVtZW50WzBdKTtcblxuICAgICAgICBjb25zdCBwYWdlQ29udGVudCA9IChhd2FpdCBnZXRQYWdlQ29udGVudChtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJykpKSA/PyAnJztcblxuICAgICAgICBjb25zdCBmb3VuZE1hZ2ljV29yZHMgPSBwYWdlQ29udGVudC5tYXRjaCgve3tcXHMqZGlzcGxheXRpdGxlXFxzKjpcXHMqKC4qPylcXHMqfX0vZ2kpO1xuICAgICAgICBpZiAoZm91bmRNYWdpY1dvcmRzKSBlZGl0Qm94LnNldFZhbHVlKGZvdW5kTWFnaWNXb3Jkcy5hdCgtMSkhLnJlcGxhY2UoL3t7XFxzKmRpc3BsYXl0aXRsZVxccyo6XFxzKiguKj8pXFxzKn19L2ksICckMScpKTtcblxuICAgICAgICBlZGl0Qm94LnNldERpc2FibGVkKGZhbHNlKTtcbiAgICAgICAgZWRpdEJveC5wb3BQZW5kaW5nKCk7XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZmlyc3RIZWFkaW5nJyk/LmFwcGVuZChlZGl0QnV0dG9uLiRlbGVtZW50WzBdKTtcbn0pO1xuIl0sCiAgIm1hcHBpbmdzIjogIjs7O21CQUdPLElBQU1BLEVBQU0sSUFBSSxHQUFHLElBTTFCLGVBQXNCQyxFQUFlQyxFQUFlLENBQ2hELE9BQ0ssTUFBTUYsRUFBSSxJQUFJLENBQ1gsT0FBUSxRQUNSLGNBQWUsSUFDZixLQUFNLFlBQ04sT0FBUSxVQUNSLFFBQVMsT0FDVCxPQUFRRSxDQUNaLENBQW1DLEdBQ3JDLE1BQU0sTUFBTSxDQUFDLEVBQUUsWUFBWSxDQUFDLEVBQUUsTUFBTSxLQUFLLFFBQVEsS0FBSyxDQUM1RCxDQ2xCQSxHQUFHLE9BQU8sTUFBTSxDQUFDLGlCQUFrQixlQUFnQixtQ0FBbUMsRUFBRyxJQUFNLENBRTNGLEdBREksR0FBRyxPQUFPLElBQUksbUJBQW1CLEVBQUksR0FDckMsQ0FBQyxHQUFHLE9BQU8sSUFBSSxzQkFBc0IsRUFBRyxPQUU1QyxHQUFHLEtBQUssT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQVNiLEdBQUcsT0FBTyxJQUFJLE1BQU0sSUFBTSxTQUFXLG1CQUFxQixFQUFFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtoRSxFQUVNLEdBQUcsT0FBTyxJQUFJLE1BQU0sSUFBTSxVQUMxQixHQUFHLEtBQUssT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFXckIsRUFFRSxJQUFNQyxFQUFhLElBQUksR0FBRyxHQUFHLGFBQWEsQ0FBRSxLQUFNLE9BQVEsT0FBUSxHQUFPLEdBQUksMEJBQTJCLENBQUMsRUFDekdBLEVBQVcsR0FBRyxRQUFTLFNBQVksQ0FDL0JBLEVBQVcsWUFBWSxFQUFJLEVBRXZCLEdBQUcsT0FBTyxJQUFJLE1BQU0sSUFBTSxVQUMxQixHQUFHLEtBQUssT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFXekIsRUFFTSxJQUFNQyxFQUFjLEdBQUcsT0FBTyxJQUFJLFlBQVksRUFBRSxXQUFXLElBQUssR0FBRyxFQUU3REMsRUFBVSxJQUFJLEdBQUcsR0FBRyxnQkFBZ0IsQ0FBRSxZQUFhRCxFQUFhLEdBQUksdUJBQXdCLENBQUMsRUFDbkdDLEVBQVEsR0FBRyxRQUFTLFNBQVksQ0FDNUJBLEVBQVEsWUFBWSxFQUFJLEVBQ3hCQSxFQUFRLFlBQVksRUFFcEIsTUFBTUMsRUFBSSxLQUFLLEdBQUcsT0FBTyxJQUFJLFlBQVksRUFBSUMsR0FBYSxDQUN0RCxJQUFNQyxFQUFPRCxFQUFTLFFBQVEsV0FBVywwQ0FBMkMsRUFBRSxFQUV0RixHQUFJLENBQUNGLEVBQVEsU0FBUyxHQUFLQSxFQUFRLFNBQVMsRUFBRSxXQUFXLElBQUssR0FBRyxJQUFNRCxFQUNuRSxNQUFPLENBQUUsS0FBQUksRUFBTSxRQUFTLGlGQUFrRixFQUk5RyxJQUFNQyxFQUFVLEdBRkFELElBQVNELEVBQVMsUUFFTCx5QkFBMkIsMEJBQTBCLEtBQUtGLEVBQVEsU0FBUyxDQUFDLDhEQUVuR0ssRUFBZ0IsMEJBRXRCLE1BQUksdUJBQXVCLEtBQUtGLENBQUksRUFDekIsQ0FDSCxLQUFNQSxFQUFLLFFBQ1AsOEJBQ0E7QUFBQSxpQkFBMkNILEVBQVEsU0FBUyxDQUFDLElBQ2pFLEVBQ0EsUUFBQUksQ0FDSixFQUNLQyxFQUFjLEtBQUtGLENBQUksRUFDckIsQ0FDSCxLQUFNQSxFQUFLLFFBQVFFLEVBQWU7QUFBQTtBQUFBLGlCQUF3QkwsRUFBUSxTQUFTLENBQUMsSUFBSSxFQUNoRixRQUFBSSxDQUNKLEVBQ1EsQ0FBRSxLQUFNLGtCQUFrQkosRUFBUSxTQUFTLENBQUM7QUFBQSxFQUFPRyxDQUFJLEdBQUksUUFBQUMsQ0FBUSxDQUNuRixDQUFDLEVBRUQsR0FBRyxPQUFPLGtEQUFtRCxDQUFFLEtBQU0sU0FBVSxDQUFDLEVBQ2hGLE9BQU8sU0FBUyxPQUFPLENBQzNCLENBQUMsRUFDREosRUFBUSxZQUFZLEVBQUksRUFDeEJBLEVBQVEsWUFBWSxFQUVwQkYsRUFBVyxTQUFTLENBQUMsRUFBRSxNQUFNRSxFQUFRLFNBQVMsQ0FBQyxDQUFDLEVBSWhELElBQU1NLEdBRmUsTUFBTUMsRUFBZSxHQUFHLE9BQU8sSUFBSSxZQUFZLENBQUMsR0FBTSxJQUV2QyxNQUFNLHNDQUFzQyxFQUM1RUQsR0FBaUJOLEVBQVEsU0FBU00sRUFBZ0IsR0FBRyxFQUFFLEVBQUcsUUFBUSxzQ0FBdUMsSUFBSSxDQUFDLEVBRWxITixFQUFRLFlBQVksRUFBSyxFQUN6QkEsRUFBUSxXQUFXLENBQ3ZCLENBQUMsRUFFRCxTQUFTLGNBQWMsZUFBZSxHQUFHLE9BQU9GLEVBQVcsU0FBUyxDQUFDLENBQUMsQ0FDMUUsQ0FBQyIsCiAgIm5hbWVzIjogWyJhcGkiLCAiZ2V0UGFnZUNvbnRlbnQiLCAidGl0bGUiLCAiZWRpdEJ1dHRvbiIsICJhY3R1YWxUaXRsZSIsICJlZGl0Qm94IiwgImFwaSIsICJyZXZpc2lvbiIsICJ0ZXh0IiwgInN1bW1hcnkiLCAicmVkaXJlY3RSZWdleCIsICJmb3VuZE1hZ2ljV29yZHMiLCAiZ2V0UGFnZUNvbnRlbnQiXQp9Cg==
