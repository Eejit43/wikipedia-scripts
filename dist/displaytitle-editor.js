// <pre>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/displaytitle-editor.ts

"use strict";(()=>{var n=new mw.Api;async function d(i){return(await n.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:i})).query.pages[0].revisions?.[0].slots.main.content.trim()}mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui.styles.icons-editing-core"],()=>{if(mw.config.get("wgNamespaceNumber")<0||!mw.config.get("wgIsProbablyEditable"))return;mw.util.addCSS(`
#displaytitle-edit-button {
    margin-right: 0;
    margin-left: 3px;
    font-size: 15px;
}

#displaytitle-edit-box {
    display: inline-block;
    ${mw.config.get("skin")==="modern"?"margin-top: 2px;":""}
    margin-bottom: 2px;
    width: 200px;
    max-width: 200px;
    font-size: 15px;
}`),mw.config.get("skin")==="modern"&&mw.util.addCSS(`
#mw_header {
    height: 2.5em;
}

#p-personal {
    top: 2.5em;
}

#mw_main {
    margin-top: 4em;
}`);let i=new OO.ui.ButtonWidget({icon:"edit",framed:!1,id:"displaytitle-edit-button"});i.on("click",async()=>{i.setDisabled(!0),mw.config.get("skin")==="modern"&&mw.util.addCSS(`
#mw_header {
    height: 3em;
}

#p-personal {
    top: 3em;
}

#mw_main {
    margin-top: 4.5em;
}`);let a=mw.config.get("wgPageName").replaceAll("_"," "),e=new OO.ui.TextInputWidget({placeholder:a,id:"displaytitle-edit-box"});e.on("enter",async()=>{e.setDisabled(!0),e.pushPending(),await n.edit(mw.config.get("wgPageName"),r=>{let t=r.content.replaceAll(/{{\s*displaytitle\s*:\s*(.*?)\s*}}\n*/gi,"");if(!e.getValue()||e.getValue().replaceAll("_"," ")===a)return{text:t,summary:"Removing DISPLAYTITLE (via [[User:Eejit43/scripts/displaytitle-editor|script]])"};let s=`${t===r.content?"Adding DISPLAYTITLE of":"Changing DISPLAYTITLE to"} "${e.getValue()}" (via [[User:Eejit43/scripts/displaytitle-editor|script]])`,l=/^#redirect\s*\[\[.*?]]/i;return/{{short description/i.test(t)?{text:t.replace(/{{short description(.*?)}}/i,`{{short description$1}}
{{DISPLAYTITLE:${e.getValue()}}}`),summary:s}:l.test(t)?{text:t.replace(l,`$&

{{DISPLAYTITLE:${e.getValue()}}}`),summary:s}:{text:`{{DISPLAYTITLE:${e.getValue()}}}
${t}`,summary:s}}),mw.notify("Successfully updated DISPLAYTITLE, reloading...",{type:"success"}),window.location.reload()}),e.setDisabled(!0),e.pushPending(),i.$element[0].after(e.$element[0]);let o=(await d(mw.config.get("wgPageName"))??"").match(/{{\s*displaytitle\s*:\s*(.*?)\s*}}/gi);o&&e.setValue(o.at(-1).replace(/{{\s*displaytitle\s*:\s*(.*?)\s*}}/i,"$1")),e.setDisabled(!1),e.popPending()}),document.querySelector("#firstHeading")?.append(i.$element[0])});})();

// </pre>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vdXRpbGl0eS50cyIsICIuLi9zY3JpcHRzL2Rpc3BsYXl0aXRsZS1lZGl0b3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMgfSBmcm9tICd0eXBlcy1tZWRpYXdpa2ktYXBpJztcbmltcG9ydCB0eXBlIHsgUGFnZVJldmlzaW9uc1Jlc3VsdCB9IGZyb20gJy4vZ2xvYmFsLXR5cGVzJztcblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBtdy5BcGkoKTtcblxuLyoqXG4gKiBGZXRjaGVzIHRoZSBjb250ZW50IG9mIGEgZ2l2ZW4gcGFnZS5cbiAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgdG8gZmV0Y2guXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYWdlQ29udGVudCh0aXRsZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgKGF3YWl0IGFwaS5nZXQoe1xuICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgcHJvcDogJ3JldmlzaW9ucycsXG4gICAgICAgICAgICBydnByb3A6ICdjb250ZW50JyxcbiAgICAgICAgICAgIHJ2c2xvdHM6ICdtYWluJyxcbiAgICAgICAgICAgIHRpdGxlczogdGl0bGUsXG4gICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKSkgYXMgUGFnZVJldmlzaW9uc1Jlc3VsdFxuICAgICkucXVlcnkucGFnZXNbMF0ucmV2aXNpb25zPy5bMF0uc2xvdHMubWFpbi5jb250ZW50LnRyaW0oKTtcbn1cbiIsICJpbXBvcnQgeyBhcGksIGdldFBhZ2VDb250ZW50IH0gZnJvbSAnQC91dGlsaXR5JztcblxubXcubG9hZGVyLnVzaW5nKFsnbWVkaWF3aWtpLnV0aWwnLCAnb29qcy11aS1jb3JlJywgJ29vanMtdWkuc3R5bGVzLmljb25zLWVkaXRpbmctY29yZSddLCAoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJykgPCAwKSByZXR1cm47IC8vIERvbid0IHJ1biBpbiB2aXJ0dWFsIG5hbWVzcGFjZXNcbiAgICBpZiAoIW13LmNvbmZpZy5nZXQoJ3dnSXNQcm9iYWJseUVkaXRhYmxlJykpIHJldHVybjsgLy8gRG9uJ3QgcnVuIGlmIHVzZXIgY2FuJ3QgZWRpdCBwYWdlXG5cbiAgICBtdy51dGlsLmFkZENTUyhgXG4jZGlzcGxheXRpdGxlLWVkaXQtYnV0dG9uIHtcbiAgICBtYXJnaW4tcmlnaHQ6IDA7XG4gICAgbWFyZ2luLWxlZnQ6IDNweDtcbiAgICBmb250LXNpemU6IDE1cHg7XG59XG5cbiNkaXNwbGF5dGl0bGUtZWRpdC1ib3gge1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAke213LmNvbmZpZy5nZXQoJ3NraW4nKSA9PT0gJ21vZGVybicgPyAnbWFyZ2luLXRvcDogMnB4OycgOiAnJ31cbiAgICBtYXJnaW4tYm90dG9tOiAycHg7XG4gICAgd2lkdGg6IDIwMHB4O1xuICAgIG1heC13aWR0aDogMjAwcHg7XG4gICAgZm9udC1zaXplOiAxNXB4O1xufWApO1xuXG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3NraW4nKSA9PT0gJ21vZGVybicpXG4gICAgICAgIG13LnV0aWwuYWRkQ1NTKGBcbiNtd19oZWFkZXIge1xuICAgIGhlaWdodDogMi41ZW07XG59XG5cbiNwLXBlcnNvbmFsIHtcbiAgICB0b3A6IDIuNWVtO1xufVxuXG4jbXdfbWFpbiB7XG4gICAgbWFyZ2luLXRvcDogNGVtO1xufWApO1xuXG4gICAgY29uc3QgZWRpdEJ1dHRvbiA9IG5ldyBPTy51aS5CdXR0b25XaWRnZXQoeyBpY29uOiAnZWRpdCcsIGZyYW1lZDogZmFsc2UsIGlkOiAnZGlzcGxheXRpdGxlLWVkaXQtYnV0dG9uJyB9KTtcbiAgICBlZGl0QnV0dG9uLm9uKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgZWRpdEJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblxuICAgICAgICBpZiAobXcuY29uZmlnLmdldCgnc2tpbicpID09PSAnbW9kZXJuJylcbiAgICAgICAgICAgIG13LnV0aWwuYWRkQ1NTKGBcbiNtd19oZWFkZXIge1xuICAgIGhlaWdodDogM2VtO1xufVxuXG4jcC1wZXJzb25hbCB7XG4gICAgdG9wOiAzZW07XG59XG5cbiNtd19tYWluIHtcbiAgICBtYXJnaW4tdG9wOiA0LjVlbTtcbn1gKTtcblxuICAgICAgICBjb25zdCBhY3R1YWxUaXRsZSA9IG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKS5yZXBsYWNlQWxsKCdfJywgJyAnKTtcblxuICAgICAgICBjb25zdCBlZGl0Qm94ID0gbmV3IE9PLnVpLlRleHRJbnB1dFdpZGdldCh7IHBsYWNlaG9sZGVyOiBhY3R1YWxUaXRsZSwgaWQ6ICdkaXNwbGF5dGl0bGUtZWRpdC1ib3gnIH0pO1xuICAgICAgICBlZGl0Qm94Lm9uKCdlbnRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGVkaXRCb3guc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICBlZGl0Qm94LnB1c2hQZW5kaW5nKCk7XG5cbiAgICAgICAgICAgIGF3YWl0IGFwaS5lZGl0KG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSwgKHJldmlzaW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHJldmlzaW9uLmNvbnRlbnQucmVwbGFjZUFsbCgve3tcXHMqZGlzcGxheXRpdGxlXFxzKjpcXHMqKC4qPylcXHMqfX1cXG4qL2dpLCAnJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWVkaXRCb3guZ2V0VmFsdWUoKSB8fCBlZGl0Qm94LmdldFZhbHVlKCkucmVwbGFjZUFsbCgnXycsICcgJykgPT09IGFjdHVhbFRpdGxlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0ZXh0LCBzdW1tYXJ5OiAnUmVtb3ZpbmcgRElTUExBWVRJVExFICh2aWEgW1tVc2VyOkVlaml0NDMvc2NyaXB0cy9kaXNwbGF5dGl0bGUtZWRpdG9yfHNjcmlwdF1dKScgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQWRkZWQgPSB0ZXh0ID09PSByZXZpc2lvbi5jb250ZW50O1xuXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGAke2lzQWRkZWQgPyAnQWRkaW5nIERJU1BMQVlUSVRMRSBvZicgOiAnQ2hhbmdpbmcgRElTUExBWVRJVExFIHRvJ30gXCIke2VkaXRCb3guZ2V0VmFsdWUoKX1cIiAodmlhIFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvZGlzcGxheXRpdGxlLWVkaXRvcnxzY3JpcHRdXSlgO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RSZWdleCA9IC9eI3JlZGlyZWN0XFxzKlxcW1xcWy4qP11dL2k7XG5cbiAgICAgICAgICAgICAgICBpZiAoL3t7c2hvcnQgZGVzY3JpcHRpb24vaS50ZXN0KHRleHQpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC97e3Nob3J0IGRlc2NyaXB0aW9uKC4qPyl9fS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB7e3Nob3J0IGRlc2NyaXB0aW9uJDF9fVxcbnt7RElTUExBWVRJVExFOiR7ZWRpdEJveC5nZXRWYWx1ZSgpfX19YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlZGlyZWN0UmVnZXgudGVzdCh0ZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHQucmVwbGFjZShyZWRpcmVjdFJlZ2V4LCBgJCZcXG5cXG57e0RJU1BMQVlUSVRMRToke2VkaXRCb3guZ2V0VmFsdWUoKX19fWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBlbHNlIHJldHVybiB7IHRleHQ6IGB7e0RJU1BMQVlUSVRMRToke2VkaXRCb3guZ2V0VmFsdWUoKX19fVxcbiR7dGV4dH1gLCBzdW1tYXJ5IH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbXcubm90aWZ5KCdTdWNjZXNzZnVsbHkgdXBkYXRlZCBESVNQTEFZVElUTEUsIHJlbG9hZGluZy4uLicsIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWRpdEJveC5zZXREaXNhYmxlZCh0cnVlKTtcbiAgICAgICAgZWRpdEJveC5wdXNoUGVuZGluZygpO1xuXG4gICAgICAgIGVkaXRCdXR0b24uJGVsZW1lbnRbMF0uYWZ0ZXIoZWRpdEJveC4kZWxlbWVudFswXSk7XG5cbiAgICAgICAgY29uc3QgcGFnZUNvbnRlbnQgPSAoYXdhaXQgZ2V0UGFnZUNvbnRlbnQobXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpKSkgPz8gJyc7XG5cbiAgICAgICAgY29uc3QgZm91bmRNYWdpY1dvcmRzID0gcGFnZUNvbnRlbnQubWF0Y2goL3t7XFxzKmRpc3BsYXl0aXRsZVxccyo6XFxzKiguKj8pXFxzKn19L2dpKTtcbiAgICAgICAgaWYgKGZvdW5kTWFnaWNXb3JkcykgZWRpdEJveC5zZXRWYWx1ZShmb3VuZE1hZ2ljV29yZHMuYXQoLTEpIS5yZXBsYWNlKC97e1xccypkaXNwbGF5dGl0bGVcXHMqOlxccyooLio/KVxccyp9fS9pLCAnJDEnKSk7XG5cbiAgICAgICAgZWRpdEJveC5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgIGVkaXRCb3gucG9wUGVuZGluZygpO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZpcnN0SGVhZGluZycpPy5hcHBlbmQoZWRpdEJ1dHRvbi4kZWxlbWVudFswXSk7XG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkFHTyxJQUFNQSxFQUFNLElBQUksR0FBRyxJQU0xQixlQUFzQkMsRUFBZUMsRUFBZSxDQUNoRCxPQUNLLE1BQU1GLEVBQUksSUFBSSxDQUNYLE9BQVEsUUFDUixjQUFlLElBQ2YsS0FBTSxZQUNOLE9BQVEsVUFDUixRQUFTLE9BQ1QsT0FBUUUsQ0FDWixDQUFtQyxHQUNyQyxNQUFNLE1BQU0sQ0FBQyxFQUFFLFlBQVksQ0FBQyxFQUFFLE1BQU0sS0FBSyxRQUFRLEtBQUssQ0FDNUQsQ0NsQkEsR0FBRyxPQUFPLE1BQU0sQ0FBQyxpQkFBa0IsZUFBZ0IsbUNBQW1DLEVBQUcsSUFBTSxDQUUzRixHQURJLEdBQUcsT0FBTyxJQUFJLG1CQUFtQixFQUFJLEdBQ3JDLENBQUMsR0FBRyxPQUFPLElBQUksc0JBQXNCLEVBQUcsT0FFNUMsR0FBRyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFTYixHQUFHLE9BQU8sSUFBSSxNQUFNLElBQU0sU0FBVyxtQkFBcUIsRUFBRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLaEUsRUFFTSxHQUFHLE9BQU8sSUFBSSxNQUFNLElBQU0sVUFDMUIsR0FBRyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBV3JCLEVBRUUsSUFBTUMsRUFBYSxJQUFJLEdBQUcsR0FBRyxhQUFhLENBQUUsS0FBTSxPQUFRLE9BQVEsR0FBTyxHQUFJLDBCQUEyQixDQUFDLEVBQ3pHQSxFQUFXLEdBQUcsUUFBUyxTQUFZLENBQy9CQSxFQUFXLFlBQVksRUFBSSxFQUV2QixHQUFHLE9BQU8sSUFBSSxNQUFNLElBQU0sVUFDMUIsR0FBRyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBV3pCLEVBRU0sSUFBTUMsRUFBYyxHQUFHLE9BQU8sSUFBSSxZQUFZLEVBQUUsV0FBVyxJQUFLLEdBQUcsRUFFN0RDLEVBQVUsSUFBSSxHQUFHLEdBQUcsZ0JBQWdCLENBQUUsWUFBYUQsRUFBYSxHQUFJLHVCQUF3QixDQUFDLEVBQ25HQyxFQUFRLEdBQUcsUUFBUyxTQUFZLENBQzVCQSxFQUFRLFlBQVksRUFBSSxFQUN4QkEsRUFBUSxZQUFZLEVBRXBCLE1BQU1DLEVBQUksS0FBSyxHQUFHLE9BQU8sSUFBSSxZQUFZLEVBQUlDLEdBQWEsQ0FDdEQsSUFBTUMsRUFBT0QsRUFBUyxRQUFRLFdBQVcsMENBQTJDLEVBQUUsRUFFdEYsR0FBSSxDQUFDRixFQUFRLFNBQVMsR0FBS0EsRUFBUSxTQUFTLEVBQUUsV0FBVyxJQUFLLEdBQUcsSUFBTUQsRUFDbkUsTUFBTyxDQUFFLEtBQUFJLEVBQU0sUUFBUyxpRkFBa0YsRUFJOUcsSUFBTUMsRUFBVSxHQUZBRCxJQUFTRCxFQUFTLFFBRUwseUJBQTJCLDBCQUEwQixLQUFLRixFQUFRLFNBQVMsQ0FBQyw4REFFbkdLLEVBQWdCLDBCQUV0QixNQUFJLHVCQUF1QixLQUFLRixDQUFJLEVBQ3pCLENBQ0gsS0FBTUEsRUFBSyxRQUNQLDhCQUNBO0FBQUEsaUJBQTJDSCxFQUFRLFNBQVMsQ0FBQyxJQUNqRSxFQUNBLFFBQUFJLENBQ0osRUFDS0MsRUFBYyxLQUFLRixDQUFJLEVBQ3JCLENBQ0gsS0FBTUEsRUFBSyxRQUFRRSxFQUFlO0FBQUE7QUFBQSxpQkFBd0JMLEVBQVEsU0FBUyxDQUFDLElBQUksRUFDaEYsUUFBQUksQ0FDSixFQUNRLENBQUUsS0FBTSxrQkFBa0JKLEVBQVEsU0FBUyxDQUFDO0FBQUEsRUFBT0csQ0FBSSxHQUFJLFFBQUFDLENBQVEsQ0FDbkYsQ0FBQyxFQUVELEdBQUcsT0FBTyxrREFBbUQsQ0FBRSxLQUFNLFNBQVUsQ0FBQyxFQUNoRixPQUFPLFNBQVMsT0FBTyxDQUMzQixDQUFDLEVBQ0RKLEVBQVEsWUFBWSxFQUFJLEVBQ3hCQSxFQUFRLFlBQVksRUFFcEJGLEVBQVcsU0FBUyxDQUFDLEVBQUUsTUFBTUUsRUFBUSxTQUFTLENBQUMsQ0FBQyxFQUloRCxJQUFNTSxHQUZlLE1BQU1DLEVBQWUsR0FBRyxPQUFPLElBQUksWUFBWSxDQUFDLEdBQU0sSUFFdkMsTUFBTSxzQ0FBc0MsRUFDNUVELEdBQWlCTixFQUFRLFNBQVNNLEVBQWdCLEdBQUcsRUFBRSxFQUFHLFFBQVEsc0NBQXVDLElBQUksQ0FBQyxFQUVsSE4sRUFBUSxZQUFZLEVBQUssRUFDekJBLEVBQVEsV0FBVyxDQUN2QixDQUFDLEVBRUQsU0FBUyxjQUFjLGVBQWUsR0FBRyxPQUFPRixFQUFXLFNBQVMsQ0FBQyxDQUFDLENBQzFFLENBQUMiLAogICJuYW1lcyI6IFsiYXBpIiwgImdldFBhZ2VDb250ZW50IiwgInRpdGxlIiwgImVkaXRCdXR0b24iLCAiYWN0dWFsVGl0bGUiLCAiZWRpdEJveCIsICJhcGkiLCAicmV2aXNpb24iLCAidGV4dCIsICJzdW1tYXJ5IiwgInJlZGlyZWN0UmVnZXgiLCAiZm91bmRNYWdpY1dvcmRzIiwgImdldFBhZ2VDb250ZW50Il0KfQo=
