// <pre>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/displaytitle-editor.ts

"use strict";(()=>{var n=new mw.Api;async function d(i){return(await n.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:i})).query.pages[0].revisions?.[0].slots.main.content.trim()}mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui.styles.icons-editing-core"],()=>{if(mw.config.get("wgNamespaceNumber")<0||!mw.config.get("wgIsProbablyEditable"))return;mw.util.addCSS(`
#displaytitle-edit-button {
    margin-right: 0;
    margin-left: 3px;
    font-size: 15px;
}

#displaytitle-edit-box {
    display: inline-block;
    ${mw.config.get("skin")==="modern"?"margin-top: 2px;":""}
    margin-bottom: 2px;
    width: 200px;
    max-width: 200px;
    font-size: 15px;
}`),mw.config.get("skin")==="modern"&&mw.util.addCSS(`
#mw_header {
    height: 2.5em;
}

#p-personal {
    top: 2.5em;
}

#mw_main {
    margin-top: 4em;
}`);let i=new OO.ui.ButtonWidget({icon:"edit",framed:!1,id:"displaytitle-edit-button"});i.on("click",async()=>{i.setDisabled(!0),mw.config.get("skin")==="modern"&&mw.util.addCSS(`
#mw_header {
    height: 3em;
}

#p-personal {
    top: 3em;
}

#mw_main {
    margin-top: 4.5em;
}`);let a=mw.config.get("wgPageName").replaceAll("_"," "),e=new OO.ui.TextInputWidget({placeholder:a,id:"displaytitle-edit-box"});e.on("enter",async()=>{e.setDisabled(!0),e.pushPending(),await n.edit(mw.config.get("wgPageName"),r=>{let t=r.content.replaceAll(/{{\s*displaytitle\s*:\s*(.*?)\s*}}\n*/gi,"");if(!e.getValue()||e.getValue().replaceAll("_"," ")===a)return{text:t,summary:"Removing DISPLAYTITLE (via [[User:Eejit43/scripts/displaytitle-editor|script]])"};let s=`${t===r.content?"Adding DISPLAYTITLE of":"Changing DISPLAYTITLE to"} "${e.getValue()}" (via [[User:Eejit43/scripts/displaytitle-editor|script]])`,l=/^#redirect\s*\[\[.*?]]/i;return/{{short description/i.test(t)?{text:t.replace(/{{short description(.*?)}}/i,`{{short description$1}}
{{DISPLAYTITLE:${e.getValue()}}}`),summary:s}:l.test(t)?{text:t.replace(l,`$&

{{DISPLAYTITLE:${e.getValue()}}}`),summary:s}:{text:`{{DISPLAYTITLE:${e.getValue()}}}
${t}`,summary:s}}),mw.notify("Successfully updated DISPLAYTITLE, reloading...",{type:"success"}),window.location.reload()}),e.setDisabled(!0),e.pushPending(),i.$element[0].after(e.$element[0]);let o=(await d(mw.config.get("wgPageName"))??"").match(/{{\s*displaytitle\s*:\s*(.*?)\s*}}/gi);o&&e.setValue(o.at(-1).replace(/{{\s*displaytitle\s*:\s*(.*?)\s*}}/i,"$1")),e.setDisabled(!1),e.popPending()}),document.querySelector("#firstHeading")?.append(i.$element[0])});})();

// </pre>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vdXRpbGl0eS50cyIsICIuLi9zY3JpcHRzL2Rpc3BsYXl0aXRsZS1lZGl0b3IudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMgfSBmcm9tICd0eXBlcy1tZWRpYXdpa2ktYXBpJztcbmltcG9ydCB0eXBlIHsgUGFnZVJldmlzaW9uc1Jlc3VsdCB9IGZyb20gJy4vZ2xvYmFsLXR5cGVzJztcblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBtdy5BcGkoKTtcblxuLyoqXG4gKiBGZXRjaGVzIHRoZSBjb250ZW50IG9mIGEgZ2l2ZW4gcGFnZS5cbiAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgdG8gZmV0Y2guXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYWdlQ29udGVudCh0aXRsZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgKGF3YWl0IGFwaS5nZXQoe1xuICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgcHJvcDogJ3JldmlzaW9ucycsXG4gICAgICAgICAgICBydnByb3A6ICdjb250ZW50JyxcbiAgICAgICAgICAgIHJ2c2xvdHM6ICdtYWluJyxcbiAgICAgICAgICAgIHRpdGxlczogdGl0bGUsXG4gICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKSkgYXMgUGFnZVJldmlzaW9uc1Jlc3VsdFxuICAgICkucXVlcnkucGFnZXNbMF0ucmV2aXNpb25zPy5bMF0uc2xvdHMubWFpbi5jb250ZW50LnRyaW0oKTtcbn1cbiIsICJpbXBvcnQgeyBhcGksIGdldFBhZ2VDb250ZW50IH0gZnJvbSAnLi4vdXRpbGl0eSc7XG5cbm13LmxvYWRlci51c2luZyhbJ21lZGlhd2lraS51dGlsJywgJ29vanMtdWktY29yZScsICdvb2pzLXVpLnN0eWxlcy5pY29ucy1lZGl0aW5nLWNvcmUnXSwgKCkgPT4ge1xuICAgIGlmIChtdy5jb25maWcuZ2V0KCd3Z05hbWVzcGFjZU51bWJlcicpIDwgMCkgcmV0dXJuOyAvLyBEb24ndCBydW4gaW4gdmlydHVhbCBuYW1lc3BhY2VzXG4gICAgaWYgKCFtdy5jb25maWcuZ2V0KCd3Z0lzUHJvYmFibHlFZGl0YWJsZScpKSByZXR1cm47IC8vIERvbid0IHJ1biBpZiB1c2VyIGNhbid0IGVkaXQgcGFnZVxuXG4gICAgbXcudXRpbC5hZGRDU1MoYFxuI2Rpc3BsYXl0aXRsZS1lZGl0LWJ1dHRvbiB7XG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xuICAgIG1hcmdpbi1sZWZ0OiAzcHg7XG4gICAgZm9udC1zaXplOiAxNXB4O1xufVxuXG4jZGlzcGxheXRpdGxlLWVkaXQtYm94IHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgJHttdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtb2Rlcm4nID8gJ21hcmdpbi10b3A6IDJweDsnIDogJyd9XG4gICAgbWFyZ2luLWJvdHRvbTogMnB4O1xuICAgIHdpZHRoOiAyMDBweDtcbiAgICBtYXgtd2lkdGg6IDIwMHB4O1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbn1gKTtcblxuICAgIGlmIChtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtb2Rlcm4nKVxuICAgICAgICBtdy51dGlsLmFkZENTUyhgXG4jbXdfaGVhZGVyIHtcbiAgICBoZWlnaHQ6IDIuNWVtO1xufVxuXG4jcC1wZXJzb25hbCB7XG4gICAgdG9wOiAyLjVlbTtcbn1cblxuI213X21haW4ge1xuICAgIG1hcmdpbi10b3A6IDRlbTtcbn1gKTtcblxuICAgIGNvbnN0IGVkaXRCdXR0b24gPSBuZXcgT08udWkuQnV0dG9uV2lkZ2V0KHsgaWNvbjogJ2VkaXQnLCBmcmFtZWQ6IGZhbHNlLCBpZDogJ2Rpc3BsYXl0aXRsZS1lZGl0LWJ1dHRvbicgfSk7XG4gICAgZWRpdEJ1dHRvbi5vbignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGVkaXRCdXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG5cbiAgICAgICAgaWYgKG13LmNvbmZpZy5nZXQoJ3NraW4nKSA9PT0gJ21vZGVybicpXG4gICAgICAgICAgICBtdy51dGlsLmFkZENTUyhgXG4jbXdfaGVhZGVyIHtcbiAgICBoZWlnaHQ6IDNlbTtcbn1cblxuI3AtcGVyc29uYWwge1xuICAgIHRvcDogM2VtO1xufVxuXG4jbXdfbWFpbiB7XG4gICAgbWFyZ2luLXRvcDogNC41ZW07XG59YCk7XG5cbiAgICAgICAgY29uc3QgYWN0dWFsVGl0bGUgPSBtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJykucmVwbGFjZUFsbCgnXycsICcgJyk7XG5cbiAgICAgICAgY29uc3QgZWRpdEJveCA9IG5ldyBPTy51aS5UZXh0SW5wdXRXaWRnZXQoeyBwbGFjZWhvbGRlcjogYWN0dWFsVGl0bGUsIGlkOiAnZGlzcGxheXRpdGxlLWVkaXQtYm94JyB9KTtcbiAgICAgICAgZWRpdEJveC5vbignZW50ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBlZGl0Qm94LnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgZWRpdEJveC5wdXNoUGVuZGluZygpO1xuXG4gICAgICAgICAgICBhd2FpdCBhcGkuZWRpdChtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJyksIChyZXZpc2lvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSByZXZpc2lvbi5jb250ZW50LnJlcGxhY2VBbGwoL3t7XFxzKmRpc3BsYXl0aXRsZVxccyo6XFxzKiguKj8pXFxzKn19XFxuKi9naSwgJycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFlZGl0Qm94LmdldFZhbHVlKCkgfHwgZWRpdEJveC5nZXRWYWx1ZSgpLnJlcGxhY2VBbGwoJ18nLCAnICcpID09PSBhY3R1YWxUaXRsZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dCwgc3VtbWFyeTogJ1JlbW92aW5nIERJU1BMQVlUSVRMRSAodmlhIFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvZGlzcGxheXRpdGxlLWVkaXRvcnxzY3JpcHRdXSknIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBpc0FkZGVkID0gdGV4dCA9PT0gcmV2aXNpb24uY29udGVudDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHN1bW1hcnkgPSBgJHtpc0FkZGVkID8gJ0FkZGluZyBESVNQTEFZVElUTEUgb2YnIDogJ0NoYW5naW5nIERJU1BMQVlUSVRMRSB0byd9IFwiJHtlZGl0Qm94LmdldFZhbHVlKCl9XCIgKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL2Rpc3BsYXl0aXRsZS1lZGl0b3J8c2NyaXB0XV0pYDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0UmVnZXggPSAvXiNyZWRpcmVjdFxccypcXFtcXFsuKj9dXS9pO1xuXG4gICAgICAgICAgICAgICAgaWYgKC97e3Nob3J0IGRlc2NyaXB0aW9uL2kudGVzdCh0ZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAve3tzaG9ydCBkZXNjcmlwdGlvbiguKj8pfX0vaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBge3tzaG9ydCBkZXNjcmlwdGlvbiQxfX1cXG57e0RJU1BMQVlUSVRMRToke2VkaXRCb3guZ2V0VmFsdWUoKX19fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWRpcmVjdFJlZ2V4LnRlc3QodGV4dCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0LnJlcGxhY2UocmVkaXJlY3RSZWdleCwgYCQmXFxuXFxue3tESVNQTEFZVElUTEU6JHtlZGl0Qm94LmdldFZhbHVlKCl9fX1gKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZWxzZSByZXR1cm4geyB0ZXh0OiBge3tESVNQTEFZVElUTEU6JHtlZGl0Qm94LmdldFZhbHVlKCl9fX1cXG4ke3RleHR9YCwgc3VtbWFyeSB9O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG13Lm5vdGlmeSgnU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgRElTUExBWVRJVExFLCByZWxvYWRpbmcuLi4nLCB7IHR5cGU6ICdzdWNjZXNzJyB9KTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVkaXRCb3guc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgIGVkaXRCb3gucHVzaFBlbmRpbmcoKTtcblxuICAgICAgICBlZGl0QnV0dG9uLiRlbGVtZW50WzBdLmFmdGVyKGVkaXRCb3guJGVsZW1lbnRbMF0pO1xuXG4gICAgICAgIGNvbnN0IHBhZ2VDb250ZW50ID0gKGF3YWl0IGdldFBhZ2VDb250ZW50KG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSkpID8/ICcnO1xuXG4gICAgICAgIGNvbnN0IGZvdW5kTWFnaWNXb3JkcyA9IHBhZ2VDb250ZW50Lm1hdGNoKC97e1xccypkaXNwbGF5dGl0bGVcXHMqOlxccyooLio/KVxccyp9fS9naSk7XG4gICAgICAgIGlmIChmb3VuZE1hZ2ljV29yZHMpIGVkaXRCb3guc2V0VmFsdWUoZm91bmRNYWdpY1dvcmRzLmF0KC0xKSEucmVwbGFjZSgve3tcXHMqZGlzcGxheXRpdGxlXFxzKjpcXHMqKC4qPylcXHMqfX0vaSwgJyQxJykpO1xuXG4gICAgICAgIGVkaXRCb3guc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICBlZGl0Qm94LnBvcFBlbmRpbmcoKTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmaXJzdEhlYWRpbmcnKT8uYXBwZW5kKGVkaXRCdXR0b24uJGVsZW1lbnRbMF0pO1xufSk7XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7bUJBR08sSUFBTUEsRUFBTSxJQUFJLEdBQUcsSUFNMUIsZUFBc0JDLEVBQWVDLEVBQWUsQ0FDaEQsT0FDSyxNQUFNRixFQUFJLElBQUksQ0FDWCxPQUFRLFFBQ1IsY0FBZSxJQUNmLEtBQU0sWUFDTixPQUFRLFVBQ1IsUUFBUyxPQUNULE9BQVFFLENBQ1osQ0FBbUMsR0FDckMsTUFBTSxNQUFNLENBQUMsRUFBRSxZQUFZLENBQUMsRUFBRSxNQUFNLEtBQUssUUFBUSxLQUFLLENBQzVELENDbEJBLEdBQUcsT0FBTyxNQUFNLENBQUMsaUJBQWtCLGVBQWdCLG1DQUFtQyxFQUFHLElBQU0sQ0FFM0YsR0FESSxHQUFHLE9BQU8sSUFBSSxtQkFBbUIsRUFBSSxHQUNyQyxDQUFDLEdBQUcsT0FBTyxJQUFJLHNCQUFzQixFQUFHLE9BRTVDLEdBQUcsS0FBSyxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE1BU2IsR0FBRyxPQUFPLElBQUksTUFBTSxJQUFNLFNBQVcsbUJBQXFCLEVBQUU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS2hFLEVBRU0sR0FBRyxPQUFPLElBQUksTUFBTSxJQUFNLFVBQzFCLEdBQUcsS0FBSyxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVdyQixFQUVFLElBQU1DLEVBQWEsSUFBSSxHQUFHLEdBQUcsYUFBYSxDQUFFLEtBQU0sT0FBUSxPQUFRLEdBQU8sR0FBSSwwQkFBMkIsQ0FBQyxFQUN6R0EsRUFBVyxHQUFHLFFBQVMsU0FBWSxDQUMvQkEsRUFBVyxZQUFZLEVBQUksRUFFdkIsR0FBRyxPQUFPLElBQUksTUFBTSxJQUFNLFVBQzFCLEdBQUcsS0FBSyxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVd6QixFQUVNLElBQU1DLEVBQWMsR0FBRyxPQUFPLElBQUksWUFBWSxFQUFFLFdBQVcsSUFBSyxHQUFHLEVBRTdEQyxFQUFVLElBQUksR0FBRyxHQUFHLGdCQUFnQixDQUFFLFlBQWFELEVBQWEsR0FBSSx1QkFBd0IsQ0FBQyxFQUNuR0MsRUFBUSxHQUFHLFFBQVMsU0FBWSxDQUM1QkEsRUFBUSxZQUFZLEVBQUksRUFDeEJBLEVBQVEsWUFBWSxFQUVwQixNQUFNQyxFQUFJLEtBQUssR0FBRyxPQUFPLElBQUksWUFBWSxFQUFJQyxHQUFhLENBQ3RELElBQU1DLEVBQU9ELEVBQVMsUUFBUSxXQUFXLDBDQUEyQyxFQUFFLEVBRXRGLEdBQUksQ0FBQ0YsRUFBUSxTQUFTLEdBQUtBLEVBQVEsU0FBUyxFQUFFLFdBQVcsSUFBSyxHQUFHLElBQU1ELEVBQ25FLE1BQU8sQ0FBRSxLQUFBSSxFQUFNLFFBQVMsaUZBQWtGLEVBSTlHLElBQU1DLEVBQVUsR0FGQUQsSUFBU0QsRUFBUyxRQUVMLHlCQUEyQiwwQkFBMEIsS0FBS0YsRUFBUSxTQUFTLENBQUMsOERBRW5HSyxFQUFnQiwwQkFFdEIsTUFBSSx1QkFBdUIsS0FBS0YsQ0FBSSxFQUN6QixDQUNILEtBQU1BLEVBQUssUUFDUCw4QkFDQTtBQUFBLGlCQUEyQ0gsRUFBUSxTQUFTLENBQUMsSUFDakUsRUFDQSxRQUFBSSxDQUNKLEVBQ0tDLEVBQWMsS0FBS0YsQ0FBSSxFQUNyQixDQUNILEtBQU1BLEVBQUssUUFBUUUsRUFBZTtBQUFBO0FBQUEsaUJBQXdCTCxFQUFRLFNBQVMsQ0FBQyxJQUFJLEVBQ2hGLFFBQUFJLENBQ0osRUFDUSxDQUFFLEtBQU0sa0JBQWtCSixFQUFRLFNBQVMsQ0FBQztBQUFBLEVBQU9HLENBQUksR0FBSSxRQUFBQyxDQUFRLENBQ25GLENBQUMsRUFFRCxHQUFHLE9BQU8sa0RBQW1ELENBQUUsS0FBTSxTQUFVLENBQUMsRUFDaEYsT0FBTyxTQUFTLE9BQU8sQ0FDM0IsQ0FBQyxFQUNESixFQUFRLFlBQVksRUFBSSxFQUN4QkEsRUFBUSxZQUFZLEVBRXBCRixFQUFXLFNBQVMsQ0FBQyxFQUFFLE1BQU1FLEVBQVEsU0FBUyxDQUFDLENBQUMsRUFJaEQsSUFBTU0sR0FGZSxNQUFNQyxFQUFlLEdBQUcsT0FBTyxJQUFJLFlBQVksQ0FBQyxHQUFNLElBRXZDLE1BQU0sc0NBQXNDLEVBQzVFRCxHQUFpQk4sRUFBUSxTQUFTTSxFQUFnQixHQUFHLEVBQUUsRUFBRyxRQUFRLHNDQUF1QyxJQUFJLENBQUMsRUFFbEhOLEVBQVEsWUFBWSxFQUFLLEVBQ3pCQSxFQUFRLFdBQVcsQ0FDdkIsQ0FBQyxFQUVELFNBQVMsY0FBYyxlQUFlLEdBQUcsT0FBT0YsRUFBVyxTQUFTLENBQUMsQ0FBQyxDQUMxRSxDQUFDIiwKICAibmFtZXMiOiBbImFwaSIsICJnZXRQYWdlQ29udGVudCIsICJ0aXRsZSIsICJlZGl0QnV0dG9uIiwgImFjdHVhbFRpdGxlIiwgImVkaXRCb3giLCAiYXBpIiwgInJldmlzaW9uIiwgInRleHQiLCAic3VtbWFyeSIsICJyZWRpcmVjdFJlZ2V4IiwgImZvdW5kTWFnaWNXb3JkcyIsICJnZXRQYWdlQ29udGVudCJdCn0K
