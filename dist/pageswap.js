// <pre>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/pageswap.ts

"use strict";(()=>{mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui-widgets","oojs-ui-windows","mediawiki.widgets"],async()=>{let r=mw.config.get("wgNamespaceNumber");if(r<0||r>=120||r>=6&&r<=9||r>=14&&r<=99)return;let o=mw.config.get("wgPageName"),s=await O();if((await new mw.Api().get({action:"query",prop:"info",titles:o})).query.pages[-1])return;mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-tb":"p-cactions","#","Swap","eejit-pageswap").addEventListener("click",e=>{if(e.preventDefault(),!s.canSwap)return mw.notify("You do not have sufficient permissions to swap pages.",{type:"error"});function a(){a.super.apply(this,arguments)}OO.inheritClass(a,OO.ui.ProcessDialog),a.static.name="swap",a.static.title=$("<span>").append($("<a>").attr({href:mw.util.getUrl("WP:ROUNDROBIN"),target:"_blank"}).text("Swap")," two pages"),a.static.actions=[{action:"swap",label:"Swap",flags:["primary","progressive"],disabled:!0},{action:"cancel",label:"Cancel",flags:["safe","close"]}],a.prototype.initialize=function(){a.super.prototype.initialize.call(this),this.panel=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.content=new OO.ui.FieldsetLayout,this.destinationInput=new mw.widgets.TitleInputWidget({required:!0,$overlay:this.$overlay,excludeCurrentPage:!0,showDescriptions:!0,showRedirectTargets:!1,excludeDynamicNamespaces:!0,showMissing:!1,validate:i=>!(i===""||i===mw.config.get("wgPageName"))}),this.destinationInput.on("change",()=>{let i=this.destinationInput.getValue().replaceAll("_"," ").replace(/^\s+/,"");i=i.replace(new RegExp(`^(https?:)?/{2}?${mw.config.get("wgServer").replace(/^\/{2}/,"")}/wiki/`),""),i=i.split("#")[0],i=i.charAt(0).toUpperCase()+i.slice(1),this.destinationInput.setValue(i)}),this.destinationInput.connect(this,{change:"updateActionState"}),this.destinationInputField=new OO.ui.FieldLayout(this.destinationInput,{label:"Destination page",align:"top"}),this.summaryInput=new OO.ui.ComboBoxInputWidget({required:!0,$overlay:this.$overlay,options:[{data:"Performing [[WP:RM/TR|requested technical move]]"},{data:"Result of [[WP:RM|requested move]]"},{data:"Move to [[WP:COMMONNAME|common name]]"},{data:"Fixing typo"},{data:"Fixing capitalization"},{data:"Fixing per [[WP:NC|naming conventions]]"}]}),this.summaryInput.connect(this,{change:"updateActionState"}),this.summaryInputField=new OO.ui.FieldLayout(this.summaryInput,{label:"Summary",align:"top"}),this.moveTalkCheckbox=new OO.ui.CheckboxInputWidget({selected:!0}),this.moveTalkCheckboxField=new OO.ui.FieldLayout(this.moveTalkCheckbox,{label:"Move talk page (if applicable)",align:"inline"}),this.moveSubpagesCheckbox=new OO.ui.CheckboxInputWidget({selected:!0}),this.moveSubpagesCheckboxField=new OO.ui.FieldLayout(this.moveSubpagesCheckbox,{label:"Move subpages (if applicable)",align:"inline"}),this.content.addItems([this.destinationInputField,this.summaryInputField,this.moveTalkCheckboxField,this.moveSubpagesCheckboxField]),this.panel.$element.append(this.content.$element),this.$body.append(this.panel.$element)},a.prototype.updateActionState=function(){let i=this.destinationInput.getValue()!==""&&this.destinationInput.getValidity()&&this.summaryInput.getValue()!=="";this.actions.setAbilities({swap:i})},a.prototype.getActionProcess=function(i){if(i==="swap"){let u=this.destinationInput.getValue().trim(),p=this.summaryInput.getValue(),g=this.moveTalkCheckbox.isSelected(),m=this.moveSubpagesCheckbox.isSelected();return new OO.ui.Process().next(()=>P(s,o,u,p,g,m).catch(d=>(console.error(d),$.Deferred().reject(this.showErrors([new OO.ui.Error(d?.message||"An unknown error occurred.")]))))).next(()=>{mw.notify("Moves complete! Reloading...",{type:"success"}),this.close({action:i,success:!0}),setTimeout(()=>window.location.reload(),1e3)})}else if(i==="cancel")return new OO.ui.Process(()=>{this.close({action:i})});return a.super.prototype.getActionProcess.call(this,i)};let l=new a,t=new OO.ui.WindowManager;$("body").append(t.$element),t.addWindows([l]),t.openWindow(l)})});function O(){return new mw.Api().get({action:"query",meta:"userinfo",uiprop:"rights"}).then(r=>{let o=r.query.userinfo.rights;return{canSwap:o.includes("suppressredirect")&&o.includes("move-subpages"),allowSwapTemplates:o.includes("templateeditor")}})}function T(r,o,s){let n={},c=r[s.toString()]["*"].length===0?0:r[s.toString()]["*"].length+1;return n.titleWithoutPrefix=o.substring(c,o.length),n.talkTitle=`${r[(s+1).toString()]["*"]}:${n.titleWithoutPrefix}`,n}function I(r,o,s,n,c){let e={valid:!0,allowMoveSubpages:!0,checkTalk:!0},a=0;for(let[l,t]of Object.entries(s)){if(a++,l==="-1"||t.ns<0)return e.valid=!1,e.error=`Page ${t.title} does not exist.`,e;if(t.ns>=6&&t.ns<=9||t.ns>=10&&t.ns<=11&&!c.allowSwapTemplates||t.ns>=14&&t.ns<=117||t.ns>=120)return e.valid=!1,e.error=`Namespace of ${t.title} (${t.ns}) not supported.

Likely reasons:
- Names of pages in this namespace relies on other pages
- Namespace features heavily-transcluded pages
- Namespace involves subpages: swaps produce many redlinks


If the move is legitimate, consider a careful manual swap.`,e;r===t.title&&(e.currentTitle=t.title,e.currentNamespace=t.ns,e.currentTalkId=t.talkid,e.currentCanMove=t.actions.move==="",e.currentIsRedirect=t.redirect===""),o===t.title&&(e.destinationTitle=t.title,e.destinationNamespace=t.ns,e.destinationTalkId=t.talkid,e.destinationCanMove=t.actions.move==="",e.destinationIsRedirect=t.redirect==="")}if(!e.valid)return e;if(!e.currentCanMove)return e.valid=!1,e.error=`${e.currentTitle} is immovable`,e;if(!e.destinationCanMove)return e.valid=!1,e.error=`${e.destinationTitle} is immovable`,e;if(e.currentNamespace%2!==e.destinationNamespace%2)return e.valid=!1,e.error="Namespaces don't match: one is a talk page, the other is not",e;if(a!==2)return e.valid=!1,e.error="Destination title is the same as the current title",e;if(e.currentNamespaceAllowSubpages=n[e.currentNamespace.toString()].subpages!=="",e.destinationNamespaceAllowSubpages=n[e.destinationNamespace.toString()].subpages!=="",e.currentTitle.startsWith(e.destinationTitle+"/")||e.destinationTitle.startsWith(e.currentTitle+"/")){if(e.currentNamespace!==e.destinationNamespace)return e.valid=!1,e.error=`${e.currentTitle} in ns ${e.currentNamespace}
${e.destinationTitle} in ns ${e.destinationNamespace}. Disallowing.`,e;e.allowMoveSubpages=e.currentNamespaceAllowSubpages,e.allowMoveSubpages||(e.addLineInfo="One page is a subpage. Disallowing move-subpages")}if(e.currentNamespace%2===1)e.checkTalk=!1;else{let l=T(n,e.currentTitle,e.currentNamespace);e.currentTitleWithoutPrefix=l.titleWithoutPrefix,e.currentTalkName=l.talkTitle;let t=T(n,e.destinationTitle,e.destinationNamespace);e.destinationTitleWithoutPrefix=t.titleWithoutPrefix,e.destinationTalkName=t.talkTitle}return e}async function M(r,o,s){let n={};if(n.allowMoveTalk=!0,!r)return n;if(o===void 0||s===void 0)return mw.notify("Unable to validate talk. Disallowing movetalk to be safe",{type:"error"}),n.allowMoveTalk=!1,n;n.currTDNE=!0,n.destTDNE=!0,n.currentTalkCanCreate=!0,n.destinationTalkCanCreate=!0;let c=[o,s];if(c.length>0){let e=(await new mw.Api().get({action:"query",prop:"info",intestactions:"move|create",titles:c.join("|")})).query.pages;for(let[,a]of Object.entries(e))if(a.title===o)n.currTDNE=a.invalid===""||a.missing==="",n.currentTalkTitle=a.title,n.currentTalkCanMove=a.actions.move==="",n.currentTalkCanCreate=a.actions.create==="",n.currentTalkIsRedirect=a.redirect==="";else if(a.title===s)n.destTDNE=a.invalid===""||a.missing==="",n.destinationTalkTitle=a.title,n.destinationTalkCanMove=a.actions.move==="",n.destinationTalkCanCreate=a.actions.create==="",n.destinationTalkIsRedirect=a.redirect==="";else return mw.notify("Found pageid not matching given ids.",{type:"error"}),{}}return n.allowMoveTalk=n.currentTalkCanCreate&&n.currentTalkCanMove&&n.destinationTalkCanCreate&&n.destinationTalkCanMove,n}async function h(r,o,s,n){if(!n&&r[s.toString()].subpages!=="")return{data:[]};let c=T(r,o,s),e=(await new mw.Api().get({action:"query",list:"allpages",apnamespace:n?s+1:s,apfrom:c.titleWithoutPrefix+"/",apto:c.titleWithoutPrefix+"0",aplimit:101})).query.allpages,a=[[],[]];for(let u in e)a[u<50?0:1].push(e[u].pageid);if(a[0].length===0)return{data:[]};if(a[1].length===51)return{error:"100+ subpages, too many to move."};let l=[],t=(await new mw.Api().get({action:"query",prop:"info",intestactions:"move|create",pageids:a[0].join("|")})).query.pages;for(let[,u]of Object.entries(t))l.push({title:u.title,isRedir:u.redirect==="",canMove:u.actions?.move===""});if(a[1].length===0)return{data:l};let i=(await new mw.Api().get({action:"query",prop:"info",intestactions:"move|create",pageids:a[1].join("|")})).query.pages;for(let[,u]of Object.entries(i))l.push({title:u.title,isRedirect:u.redirect==="",canMove:u.actions?.move===""});return{data:l}}function v(r,o){let s={},n=[],c=[],e=0;for(let[,a]of Object.entries(o.data))a.canMove||c.push(a.title),n.push((a.isRedirect?"(R) ":"  ")+a.title),a.isRedirect&&e++;return n.length>0&&mw.notify(c.length>0?`Disabling move-subpages.
The following ${c.length} (of ${n.length}) total subpages of ${r} CANNOT be moved:

${c.join(", ")}`:`${n.length} total subpages of ${r}.${e!==0?` ${e} redirects, labeled (R)`:""}: ${n.join(", ")}`),s.allowMoveSubpages=c.length===0,s.noNeed=n.length===0,s}function x(r,o,s,n,c){let e=`Draft:Move/${r}`,a=[{action:"move",from:o,to:e,reason:"[[WP:ROUNDROBIN|Round-robin page move]] step 1 (with [[User:Eejit43/scripts/pageswap|pageswap 2]])",watchlist:"unwatch",noredirect:1},{action:"move",from:r,to:o,reason:s,watchlist:"unwatch",noredirect:1},{action:"move",from:e,to:r,reason:"[[WP:ROUNDROBIN|Round-robin page move]] step 3 (with [[User:Eejit43/scripts/pageswap|pageswap 2]])",watchlist:"unwatch",noredirect:1}];for(let l of a)n&&(l.movetalk=1),c&&(l.movesubpages=1);return new Promise((l,t)=>{let i={success:!0},u=0;function p(){if(u>=a.length)return l(i);new mw.Api().postWithToken("csrf",a[u]).done(()=>{u++,p()}).fail(()=>{i.success=!1,i.message=`Failed on move ${u+1} (${a[u].from} \u2192 ${a[u].to})`,t(i)})}return p(),i})}async function P(r,o,s,n,c,e){let a=(await new mw.Api().get({action:"query",meta:"siteinfo",siprop:"namespaces"})).query.namespaces,l=(await new mw.Api().get({action:"query",prop:"info",inprop:"talkid",intestactions:"move|create",titles:`${o}|${s}`})).query;for(let w in l.normalized)o===l.normalized[w].from&&(o=l.normalized[w].to),s===l.normalized[w].from&&(s=l.normalized[w].to);let t=I(o,s,l.pages,a,r);if(!t.valid)throw new Error(t.error);t.addLineInfo!==void 0&&mw.notify(t.addLineInfo);let i=await h(a,t.currentTitle,t.currentNamespace,!1);if(i.error!==void 0)throw new Error(i.error);let u=v(t.currentTitle,i),p=await h(a,t.destinationTitle,t.destinationNamespace,!1);if(p.error!==void 0)throw new Error(p.error);let g=v(t.destinationTitle,p),m=await M(t.checkTalk,t.currentTalkName,t.destinationTalkName),d=await h(a,t.currentTitle,t.currentNamespace,!0);if(d.error!==void 0)throw new Error(d.error);let y=v(t.currentTalkName,d),b=await h(a,t.destinationTitle,t.destinationNamespace,!0);if(b.error!==void 0)throw new Error(b.error);let N=v(t.destinationTalkName,b),C=u.noNeed&&g.noNeed&&y.noNeed&&N.noNeed,S=t.currentNamespaceAllowSubpages&&!g.noNeed||t.destinationNamespaceAllowSubpages&&!u.noNeed;c&&t.checkTalk&&!m.allowMoveTalk&&(c=!1,mw.notify(`Disallowing moving talk. ${m.currentTalkCanCreate?m.destinationTalkCanCreate?"Talk page is immovable":`${t.destinationTalkName} is create-protected`:`${t.currentTalkName} is create-protected`}`));let f=!1;!S&&!C&&t.allowMoveSubpages&&u.allowMoveSubpages&&g.allowMoveSubpages&&y.allowMoveSubpages&&N.allowMoveSubpages?f=e:S&&(f=!1,mw.notify("One namespace does not have subpages enabled. Disallowing move subpages.")),console.log(`[Pageswap] Swapping "${o}" with "${s}" with summary "${n}" and moveTalk ${c} and moveSubpages ${f}`);let k=await x(o,s,n,c,f);if(console.log(k),!k.success)throw new Error(k.error)}})();

// </pre>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9wYWdlc3dhcC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsibXcubG9hZGVyLnVzaW5nKFsnbWVkaWF3aWtpLnV0aWwnLCAnb29qcy11aS1jb3JlJywgJ29vanMtdWktd2lkZ2V0cycsICdvb2pzLXVpLXdpbmRvd3MnLCAnbWVkaWF3aWtpLndpZGdldHMnXSwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG5hbWVzcGFjZSA9IG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlTnVtYmVyJyk7XG4gICAgaWYgKG5hbWVzcGFjZSA8IDAgfHwgbmFtZXNwYWNlID49IDEyMCB8fCAobmFtZXNwYWNlID49IDYgJiYgbmFtZXNwYWNlIDw9IDkpIHx8IChuYW1lc3BhY2UgPj0gMTQgJiYgbmFtZXNwYWNlIDw9IDk5KSkgcmV0dXJuO1xuXG4gICAgY29uc3QgY3VycmVudFRpdGxlID0gbXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpO1xuXG4gICAgY29uc3QgdXNlclBlcm1pc3Npb25zID0gYXdhaXQgZmV0Y2hVc2VyUGVybWlzc2lvbnMoKTtcblxuICAgIGNvbnN0IHBhZ2VJbmZvID0gKGF3YWl0IG5ldyBtdy5BcGkoKS5nZXQoeyBhY3Rpb246ICdxdWVyeScsIHByb3A6ICdpbmZvJywgdGl0bGVzOiBjdXJyZW50VGl0bGUgfSkpIGFzIHtcbiAgICAgICAgcXVlcnk6IHsgcGFnZXM6IFJlY29yZDxudW1iZXIsIHVua25vd24+IH07XG4gICAgfTtcbiAgICBpZiAocGFnZUluZm8ucXVlcnkucGFnZXNbLTFdKSByZXR1cm47XG5cbiAgICBjb25zdCBsaW5rID0gbXcudXRpbC5hZGRQb3J0bGV0TGluayhtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtaW5lcnZhJyA/ICdwLXRiJyA6ICdwLWNhY3Rpb25zJywgJyMnLCAnU3dhcCcsICdlZWppdC1wYWdlc3dhcCcpITtcblxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoIXVzZXJQZXJtaXNzaW9ucy5jYW5Td2FwKSByZXR1cm4gbXcubm90aWZ5KCdZb3UgZG8gbm90IGhhdmUgc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBzd2FwIHBhZ2VzLicsIHsgdHlwZTogJ2Vycm9yJyB9KTtcblxuICAgICAgICBmdW5jdGlvbiBTd2FwRGlhbG9nKCkge1xuICAgICAgICAgICAgU3dhcERpYWxvZy5zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIE9PLmluaGVyaXRDbGFzcyhTd2FwRGlhbG9nLCBPTy51aS5Qcm9jZXNzRGlhbG9nKTtcblxuICAgICAgICBTd2FwRGlhbG9nLnN0YXRpYy5uYW1lID0gJ3N3YXAnO1xuICAgICAgICBTd2FwRGlhbG9nLnN0YXRpYy50aXRsZSA9ICQoJzxzcGFuPicpLmFwcGVuZChcbiAgICAgICAgICAgICQoJzxhPicpXG4gICAgICAgICAgICAgICAgLmF0dHIoeyBocmVmOiBtdy51dGlsLmdldFVybCgnV1A6Uk9VTkRST0JJTicpLCB0YXJnZXQ6ICdfYmxhbmsnIH0pXG4gICAgICAgICAgICAgICAgLnRleHQoJ1N3YXAnKSxcbiAgICAgICAgICAgICcgdHdvIHBhZ2VzJyxcbiAgICAgICAgKTtcbiAgICAgICAgU3dhcERpYWxvZy5zdGF0aWMuYWN0aW9ucyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdzd2FwJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1N3YXAnLFxuICAgICAgICAgICAgICAgIGZsYWdzOiBbJ3ByaW1hcnknLCAncHJvZ3Jlc3NpdmUnXSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnY2FuY2VsJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NhbmNlbCcsXG4gICAgICAgICAgICAgICAgZmxhZ3M6IFsnc2FmZScsICdjbG9zZSddLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcblxuICAgICAgICBTd2FwRGlhbG9nLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgU3dhcERpYWxvZy5zdXBlci5wcm90b3R5cGUuaW5pdGlhbGl6ZS5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLnBhbmVsID0gbmV3IE9PLnVpLlBhbmVsTGF5b3V0KHtcbiAgICAgICAgICAgICAgICBwYWRkZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IG5ldyBPTy51aS5GaWVsZHNldExheW91dCgpO1xuXG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uSW5wdXQgPSBuZXcgbXcud2lkZ2V0cy5UaXRsZUlucHV0V2lkZ2V0KHtcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAkb3ZlcmxheTogdGhpcy4kb3ZlcmxheSxcbiAgICAgICAgICAgICAgICBleGNsdWRlQ3VycmVudFBhZ2U6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hvd0Rlc2NyaXB0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaG93UmVkaXJlY3RUYXJnZXRzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBleGNsdWRlRHluYW1pY05hbWVzcGFjZXM6IHRydWUsIC8vIFwiU3BlY2lhbFwiIGFuZCBcIk1lZGlhXCJcbiAgICAgICAgICAgICAgICBzaG93TWlzc2luZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGU6ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnIHx8IHZhbHVlID09PSBtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbklucHV0Lm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5kZXN0aW5hdGlvbklucHV0LmdldFZhbHVlKCkucmVwbGFjZUFsbCgnXycsICcgJykucmVwbGFjZSgvXlxccysvLCAnJyk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoYF4oaHR0cHM/Oik/L3syfT8ke213LmNvbmZpZy5nZXQoJ3dnU2VydmVyJykucmVwbGFjZSgvXlxcL3syfS8sICcnKX0vd2lraS9gKSwgJycpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc3BsaXQoJyMnKVswXTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbklucHV0LnNldFZhbHVlKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbklucHV0LmNvbm5lY3QodGhpcywgeyBjaGFuZ2U6ICd1cGRhdGVBY3Rpb25TdGF0ZScgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dEZpZWxkID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KHRoaXMuZGVzdGluYXRpb25JbnB1dCwgeyBsYWJlbDogJ0Rlc3RpbmF0aW9uIHBhZ2UnLCBhbGlnbjogJ3RvcCcgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3VtbWFyeUlucHV0ID0gbmV3IE9PLnVpLkNvbWJvQm94SW5wdXRXaWRnZXQoe1xuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICRvdmVybGF5OiB0aGlzLiRvdmVybGF5LFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBkYXRhOiAnUGVyZm9ybWluZyBbW1dQOlJNL1RSfHJlcXVlc3RlZCB0ZWNobmljYWwgbW92ZV1dJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGRhdGE6ICdSZXN1bHQgb2YgW1tXUDpSTXxyZXF1ZXN0ZWQgbW92ZV1dJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGRhdGE6ICdNb3ZlIHRvIFtbV1A6Q09NTU9OTkFNRXxjb21tb24gbmFtZV1dJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGRhdGE6ICdGaXhpbmcgdHlwbycgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBkYXRhOiAnRml4aW5nIGNhcGl0YWxpemF0aW9uJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGRhdGE6ICdGaXhpbmcgcGVyIFtbV1A6TkN8bmFtaW5nIGNvbnZlbnRpb25zXV0nIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlJbnB1dC5jb25uZWN0KHRoaXMsIHsgY2hhbmdlOiAndXBkYXRlQWN0aW9uU3RhdGUnIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlJbnB1dEZpZWxkID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KHRoaXMuc3VtbWFyeUlucHV0LCB7IGxhYmVsOiAnU3VtbWFyeScsIGFsaWduOiAndG9wJyB9KTtcblxuICAgICAgICAgICAgdGhpcy5tb3ZlVGFsa0NoZWNrYm94ID0gbmV3IE9PLnVpLkNoZWNrYm94SW5wdXRXaWRnZXQoeyBzZWxlY3RlZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgIHRoaXMubW92ZVRhbGtDaGVja2JveEZpZWxkID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KHRoaXMubW92ZVRhbGtDaGVja2JveCwge1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnTW92ZSB0YWxrIHBhZ2UgKGlmIGFwcGxpY2FibGUpJyxcbiAgICAgICAgICAgICAgICBhbGlnbjogJ2lubGluZScsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5tb3ZlU3VicGFnZXNDaGVja2JveCA9IG5ldyBPTy51aS5DaGVja2JveElucHV0V2lkZ2V0KHsgc2VsZWN0ZWQ6IHRydWUgfSk7XG4gICAgICAgICAgICB0aGlzLm1vdmVTdWJwYWdlc0NoZWNrYm94RmllbGQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQodGhpcy5tb3ZlU3VicGFnZXNDaGVja2JveCwge1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnTW92ZSBzdWJwYWdlcyAoaWYgYXBwbGljYWJsZSknLFxuICAgICAgICAgICAgICAgIGFsaWduOiAnaW5saW5lJyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuYWRkSXRlbXMoW1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dEZpZWxkLFxuICAgICAgICAgICAgICAgIHRoaXMuc3VtbWFyeUlucHV0RmllbGQsXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVGFsa0NoZWNrYm94RmllbGQsXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlU3VicGFnZXNDaGVja2JveEZpZWxkLFxuICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgIHRoaXMucGFuZWwuJGVsZW1lbnQuYXBwZW5kKHRoaXMuY29udGVudC4kZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLiRib2R5LmFwcGVuZCh0aGlzLnBhbmVsLiRlbGVtZW50KTtcbiAgICAgICAgfTtcblxuICAgICAgICBTd2FwRGlhbG9nLnByb3RvdHlwZS51cGRhdGVBY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPVxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb25JbnB1dC5nZXRWYWx1ZSgpICE9PSAnJyAmJiB0aGlzLmRlc3RpbmF0aW9uSW5wdXQuZ2V0VmFsaWRpdHkoKSAmJiB0aGlzLnN1bW1hcnlJbnB1dC5nZXRWYWx1ZSgpICE9PSAnJztcbiAgICAgICAgICAgIHRoaXMuYWN0aW9ucy5zZXRBYmlsaXRpZXMoeyBzd2FwOiBpc1ZhbGlkIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIFN3YXBEaWFsb2cucHJvdG90eXBlLmdldEFjdGlvblByb2Nlc3MgPSBmdW5jdGlvbiAoYWN0aW9uOiBzdHJpbmcpIHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdzd2FwJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbklucHV0LmdldFZhbHVlKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1bW1hcnkgPSB0aGlzLnN1bW1hcnlJbnB1dC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVUYWxrID0gdGhpcy5tb3ZlVGFsa0NoZWNrYm94LmlzU2VsZWN0ZWQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb3ZlU3VicGFnZXMgPSB0aGlzLm1vdmVTdWJwYWdlc0NoZWNrYm94LmlzU2VsZWN0ZWQoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT08udWkuUHJvY2VzcygpXG4gICAgICAgICAgICAgICAgICAgIC5uZXh0KCgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICByb3VuZFJvYmluKHVzZXJQZXJtaXNzaW9ucywgY3VycmVudFRpdGxlLCBkZXN0aW5hdGlvbiwgc3VtbWFyeSwgbW92ZVRhbGssIG1vdmVTdWJwYWdlcykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQuRGVmZXJyZWQoKS5yZWplY3QodGhpcy5zaG93RXJyb3JzKFtuZXcgT08udWkuRXJyb3IoZXJyb3I/Lm1lc3NhZ2UgfHwgJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuJyldKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAubmV4dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoJ01vdmVzIGNvbXBsZXRlISBSZWxvYWRpbmcuLi4nLCB7IHR5cGU6ICdzdWNjZXNzJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoeyBhY3Rpb24sIHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdjYW5jZWwnKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT08udWkuUHJvY2VzcygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoeyBhY3Rpb24gfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBTd2FwRGlhbG9nLnN1cGVyLnByb3RvdHlwZS5nZXRBY3Rpb25Qcm9jZXNzLmNhbGwodGhpcywgYWN0aW9uKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBkaWFsb2cgPSBuZXcgU3dhcERpYWxvZygpO1xuICAgICAgICBjb25zdCB3aW5kb3dNYW5hZ2VyID0gbmV3IE9PLnVpLldpbmRvd01hbmFnZXIoKTtcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCh3aW5kb3dNYW5hZ2VyLiRlbGVtZW50KTtcbiAgICAgICAgd2luZG93TWFuYWdlci5hZGRXaW5kb3dzKFtkaWFsb2ddKTtcbiAgICAgICAgd2luZG93TWFuYWdlci5vcGVuV2luZG93KGRpYWxvZyk7XG4gICAgfSk7XG59KTtcblxuLy8gISEgU29tZSBjb250ZW50IGJlbG93IHRoaXMgY29udGFpbnMgY29kZSBtb2RpZmllZCBmcm9tIFtbVXNlcjpBbmR5IE0uIFdhbmcvcGFnZXN3YXAuanNdXSAhIVxuXG4vKipcbiAqIENoZWNrcyBpZiB1c2VyIGhhcyB0aGUgcmVxdWlyZWQgcGVybWlzc2lvbnMgdG8gcGVyZm9ybSBhIHN3YXBcbiAqIEByZXR1cm5zIHtQcm9taXNlPHtjYW5Td2FwOiBib29sZWFuLCBhbGxvd1N3YXBUZW1wbGF0ZXM6IGJvb2xlYW59Pn1cbiAqL1xuZnVuY3Rpb24gZmV0Y2hVc2VyUGVybWlzc2lvbnMoKSB7XG4gICAgcmV0dXJuIG5ldyBtdy5BcGkoKVxuICAgICAgICAuZ2V0KHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgIG1ldGE6ICd1c2VyaW5mbycsXG4gICAgICAgICAgICB1aXByb3A6ICdyaWdodHMnLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmlnaHRzTGlzdCA9IGRhdGEucXVlcnkudXNlcmluZm8ucmlnaHRzO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjYW5Td2FwOiByaWdodHNMaXN0LmluY2x1ZGVzKCdzdXBwcmVzc3JlZGlyZWN0JykgJiYgcmlnaHRzTGlzdC5pbmNsdWRlcygnbW92ZS1zdWJwYWdlcycpLCAvLyBQYWdlIG1vdmVyIHJpZ2h0IG9uIHRoZSBFbmdsaXNoIFdpa2lwZWRpYVxuICAgICAgICAgICAgICAgIGFsbG93U3dhcFRlbXBsYXRlczogcmlnaHRzTGlzdC5pbmNsdWRlcygndGVtcGxhdGVlZGl0b3InKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xufVxuXG4vKipcbiAqIEdpdmVuIG5hbWVzcGFjZSBkYXRhLCB0aXRsZSwgdGl0bGUgbmFtZXNwYWNlLCByZXR1cm5zIGV4cGVjdGVkIHRpdGxlIG9mIHBhZ2VcbiAqIEFsb25nIHdpdGggdGl0bGUgd2l0aG91dCBwcmVmaXhcbiAqIFByZWNvbmRpdGlvbiwgdGl0bGUsIHRpdGxlTnMgaXMgYSBzdWJqZWN0IHBhZ2UhXG4gKi9cbmZ1bmN0aW9uIGdldFRhbGtQYWdlTmFtZShuYW1lc3BhY2VEYXRhLCB0aXRsZSwgdGl0bGVOYW1lc3BhY2UpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBjb25zdCBwcmVmaXhMZW5ndGggPVxuICAgICAgICBuYW1lc3BhY2VEYXRhW3RpdGxlTmFtZXNwYWNlLnRvU3RyaW5nKCldWycqJ10ubGVuZ3RoID09PSAwID8gMCA6IG5hbWVzcGFjZURhdGFbdGl0bGVOYW1lc3BhY2UudG9TdHJpbmcoKV1bJyonXS5sZW5ndGggKyAxO1xuICAgIHJlc3VsdC50aXRsZVdpdGhvdXRQcmVmaXggPSB0aXRsZS5zdWJzdHJpbmcocHJlZml4TGVuZ3RoLCB0aXRsZS5sZW5ndGgpO1xuICAgIHJlc3VsdC50YWxrVGl0bGUgPSBgJHtuYW1lc3BhY2VEYXRhWyh0aXRsZU5hbWVzcGFjZSArIDEpLnRvU3RyaW5nKCldWycqJ119OiR7cmVzdWx0LnRpdGxlV2l0aG91dFByZWZpeH1gO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2l2ZW4gdHdvIChub3JtYWxpemVkKSB0aXRsZXMsIGZpbmQgdGhlaXIgbmFtZXNwYWNlcywgaWYgdGhleSBhcmUgcmVkaXJlY3RzLFxuICogaWYgaGF2ZSBhIHRhbGsgcGFnZSwgd2hldGhlciB0aGUgY3VycmVudCB1c2VyIGNhbiBtb3ZlIHRoZSBwYWdlcywgc3VnZ2VzdHNcbiAqIHdoZXRoZXIgbW92ZXN1YnBhZ2VzIHNob3VsZCBiZSBhbGxvd2VkLCB3aGV0aGVyIHRhbGsgcGFnZXMgbmVlZCB0byBiZSBjaGVja2VkXG4gKi9cbmZ1bmN0aW9uIHN3YXBWYWxpZGF0ZShzdGFydFRpdGxlLCBlbmRUaXRsZSwgcGFnZXNEYXRhLCBuYW1lc3BhY2VzRGF0YSwgdXNlclBlcm1pc3Npb25zKSB7XG4gICAgY29uc3QgcmVzdWx0ID0geyB2YWxpZDogdHJ1ZSwgYWxsb3dNb3ZlU3VicGFnZXM6IHRydWUsIGNoZWNrVGFsazogdHJ1ZSB9O1xuXG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBmb3IgKGNvbnN0IFtwYWdlSWQsIHBhZ2VEYXRhXSBvZiBPYmplY3QuZW50cmllcyhwYWdlc0RhdGEpKSB7XG4gICAgICAgIGNvdW50Kys7XG4gICAgICAgIGlmIChwYWdlSWQgPT09ICctMScgfHwgcGFnZURhdGEubnMgPCAwKSB7XG4gICAgICAgICAgICByZXN1bHQudmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJlc3VsdC5lcnJvciA9IGBQYWdlICR7cGFnZURhdGEudGl0bGV9IGRvZXMgbm90IGV4aXN0LmA7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8vIEVuYWJsZSBvbmx5IGluIE1haW4sIFRhbGssIFVzZXIsIFVzZXIgdGFsaywgV2lraXBlZGlhLCBXaWtpcGVkaWEgdGFsaywgSGVscCwgSGVscCB0YWxrLCBEcmFmdCwgYW5kIERyYWZ0IHRhbGtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHBhZ2VEYXRhLm5zID49IDYgJiYgcGFnZURhdGEubnMgPD0gOSkgfHxcbiAgICAgICAgICAgIChwYWdlRGF0YS5ucyA+PSAxMCAmJiBwYWdlRGF0YS5ucyA8PSAxMSAmJiAhdXNlclBlcm1pc3Npb25zLmFsbG93U3dhcFRlbXBsYXRlcykgfHxcbiAgICAgICAgICAgIChwYWdlRGF0YS5ucyA+PSAxNCAmJiBwYWdlRGF0YS5ucyA8PSAxMTcpIHx8XG4gICAgICAgICAgICBwYWdlRGF0YS5ucyA+PSAxMjBcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXN1bHQudmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJlc3VsdC5lcnJvciA9IGBOYW1lc3BhY2Ugb2YgJHtwYWdlRGF0YS50aXRsZX0gKCR7cGFnZURhdGEubnN9KSBub3Qgc3VwcG9ydGVkLlxcblxcbkxpa2VseSByZWFzb25zOlxcbi0gTmFtZXMgb2YgcGFnZXMgaW4gdGhpcyBuYW1lc3BhY2UgcmVsaWVzIG9uIG90aGVyIHBhZ2VzXFxuLSBOYW1lc3BhY2UgZmVhdHVyZXMgaGVhdmlseS10cmFuc2NsdWRlZCBwYWdlc1xcbi0gTmFtZXNwYWNlIGludm9sdmVzIHN1YnBhZ2VzOiBzd2FwcyBwcm9kdWNlIG1hbnkgcmVkbGlua3NcXG5cXG5cXG5JZiB0aGUgbW92ZSBpcyBsZWdpdGltYXRlLCBjb25zaWRlciBhIGNhcmVmdWwgbWFudWFsIHN3YXAuYDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0VGl0bGUgPT09IHBhZ2VEYXRhLnRpdGxlKSB7XG4gICAgICAgICAgICByZXN1bHQuY3VycmVudFRpdGxlID0gcGFnZURhdGEudGl0bGU7XG4gICAgICAgICAgICByZXN1bHQuY3VycmVudE5hbWVzcGFjZSA9IHBhZ2VEYXRhLm5zO1xuICAgICAgICAgICAgcmVzdWx0LmN1cnJlbnRUYWxrSWQgPSBwYWdlRGF0YS50YWxraWQ7XG4gICAgICAgICAgICByZXN1bHQuY3VycmVudENhbk1vdmUgPSBwYWdlRGF0YS5hY3Rpb25zLm1vdmUgPT09ICcnO1xuICAgICAgICAgICAgcmVzdWx0LmN1cnJlbnRJc1JlZGlyZWN0ID0gcGFnZURhdGEucmVkaXJlY3QgPT09ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRUaXRsZSA9PT0gcGFnZURhdGEudGl0bGUpIHtcbiAgICAgICAgICAgIHJlc3VsdC5kZXN0aW5hdGlvblRpdGxlID0gcGFnZURhdGEudGl0bGU7XG4gICAgICAgICAgICByZXN1bHQuZGVzdGluYXRpb25OYW1lc3BhY2UgPSBwYWdlRGF0YS5ucztcbiAgICAgICAgICAgIHJlc3VsdC5kZXN0aW5hdGlvblRhbGtJZCA9IHBhZ2VEYXRhLnRhbGtpZDtcbiAgICAgICAgICAgIHJlc3VsdC5kZXN0aW5hdGlvbkNhbk1vdmUgPSBwYWdlRGF0YS5hY3Rpb25zLm1vdmUgPT09ICcnO1xuICAgICAgICAgICAgcmVzdWx0LmRlc3RpbmF0aW9uSXNSZWRpcmVjdCA9IHBhZ2VEYXRhLnJlZGlyZWN0ID09PSAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICghcmVzdWx0LnZhbGlkKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmICghcmVzdWx0LmN1cnJlbnRDYW5Nb3ZlKSB7XG4gICAgICAgIHJlc3VsdC52YWxpZCA9IGZhbHNlO1xuICAgICAgICByZXN1bHQuZXJyb3IgPSBgJHtyZXN1bHQuY3VycmVudFRpdGxlfSBpcyBpbW1vdmFibGVgO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAoIXJlc3VsdC5kZXN0aW5hdGlvbkNhbk1vdmUpIHtcbiAgICAgICAgcmVzdWx0LnZhbGlkID0gZmFsc2U7XG4gICAgICAgIHJlc3VsdC5lcnJvciA9IGAke3Jlc3VsdC5kZXN0aW5hdGlvblRpdGxlfSBpcyBpbW1vdmFibGVgO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAocmVzdWx0LmN1cnJlbnROYW1lc3BhY2UgJSAyICE9PSByZXN1bHQuZGVzdGluYXRpb25OYW1lc3BhY2UgJSAyKSB7XG4gICAgICAgIHJlc3VsdC52YWxpZCA9IGZhbHNlO1xuICAgICAgICByZXN1bHQuZXJyb3IgPSBcIk5hbWVzcGFjZXMgZG9uJ3QgbWF0Y2g6IG9uZSBpcyBhIHRhbGsgcGFnZSwgdGhlIG90aGVyIGlzIG5vdFwiO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAoY291bnQgIT09IDIpIHtcbiAgICAgICAgcmVzdWx0LnZhbGlkID0gZmFsc2U7XG4gICAgICAgIHJlc3VsdC5lcnJvciA9ICdEZXN0aW5hdGlvbiB0aXRsZSBpcyB0aGUgc2FtZSBhcyB0aGUgY3VycmVudCB0aXRsZSc7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJlc3VsdC5jdXJyZW50TmFtZXNwYWNlQWxsb3dTdWJwYWdlcyA9IG5hbWVzcGFjZXNEYXRhW3Jlc3VsdC5jdXJyZW50TmFtZXNwYWNlLnRvU3RyaW5nKCldLnN1YnBhZ2VzICE9PSAnJztcbiAgICByZXN1bHQuZGVzdGluYXRpb25OYW1lc3BhY2VBbGxvd1N1YnBhZ2VzID0gbmFtZXNwYWNlc0RhdGFbcmVzdWx0LmRlc3RpbmF0aW9uTmFtZXNwYWNlLnRvU3RyaW5nKCldLnN1YnBhZ2VzICE9PSAnJztcblxuICAgIC8vIElmIHNhbWUgbmFtZXNwYWNlIChzdWJwYWdlcyBhbGxvd2VkKSwgaWYgb25lIGlzIHN1YnBhZ2Ugb2YgYW5vdGhlciwgZGlzYWxsb3cgbW92aW5nIHN1YnBhZ2VzXG4gICAgaWYgKHJlc3VsdC5jdXJyZW50VGl0bGUuc3RhcnRzV2l0aChyZXN1bHQuZGVzdGluYXRpb25UaXRsZSArICcvJykgfHwgcmVzdWx0LmRlc3RpbmF0aW9uVGl0bGUuc3RhcnRzV2l0aChyZXN1bHQuY3VycmVudFRpdGxlICsgJy8nKSkge1xuICAgICAgICBpZiAocmVzdWx0LmN1cnJlbnROYW1lc3BhY2UgIT09IHJlc3VsdC5kZXN0aW5hdGlvbk5hbWVzcGFjZSkge1xuICAgICAgICAgICAgcmVzdWx0LnZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICByZXN1bHQuZXJyb3IgPSBgJHtyZXN1bHQuY3VycmVudFRpdGxlfSBpbiBucyAke3Jlc3VsdC5jdXJyZW50TmFtZXNwYWNlfVxcbiR7cmVzdWx0LmRlc3RpbmF0aW9uVGl0bGV9IGluIG5zICR7cmVzdWx0LmRlc3RpbmF0aW9uTmFtZXNwYWNlfS4gRGlzYWxsb3dpbmcuYDtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQuYWxsb3dNb3ZlU3VicGFnZXMgPSByZXN1bHQuY3VycmVudE5hbWVzcGFjZUFsbG93U3VicGFnZXM7XG4gICAgICAgIGlmICghcmVzdWx0LmFsbG93TW92ZVN1YnBhZ2VzKSByZXN1bHQuYWRkTGluZUluZm8gPSAnT25lIHBhZ2UgaXMgYSBzdWJwYWdlLiBEaXNhbGxvd2luZyBtb3ZlLXN1YnBhZ2VzJztcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0LmN1cnJlbnROYW1lc3BhY2UgJSAyID09PSAxKVxuICAgICAgICByZXN1bHQuY2hlY2tUYWxrID0gZmFsc2U7IC8vIE5vIG5lZWQgdG8gY2hlY2sgdGFsa3MsIGFscmVhZHkgdGFsayBwYWdlc1xuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFsa0RhdGEgPSBnZXRUYWxrUGFnZU5hbWUobmFtZXNwYWNlc0RhdGEsIHJlc3VsdC5jdXJyZW50VGl0bGUsIHJlc3VsdC5jdXJyZW50TmFtZXNwYWNlKTtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnRUaXRsZVdpdGhvdXRQcmVmaXggPSBjdXJyZW50VGFsa0RhdGEudGl0bGVXaXRob3V0UHJlZml4O1xuICAgICAgICByZXN1bHQuY3VycmVudFRhbGtOYW1lID0gY3VycmVudFRhbGtEYXRhLnRhbGtUaXRsZTtcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb25EYXRhID0gZ2V0VGFsa1BhZ2VOYW1lKG5hbWVzcGFjZXNEYXRhLCByZXN1bHQuZGVzdGluYXRpb25UaXRsZSwgcmVzdWx0LmRlc3RpbmF0aW9uTmFtZXNwYWNlKTtcbiAgICAgICAgcmVzdWx0LmRlc3RpbmF0aW9uVGl0bGVXaXRob3V0UHJlZml4ID0gZGVzdGluYXRpb25EYXRhLnRpdGxlV2l0aG91dFByZWZpeDtcbiAgICAgICAgcmVzdWx0LmRlc3RpbmF0aW9uVGFsa05hbWUgPSBkZXN0aW5hdGlvbkRhdGEudGFsa1RpdGxlO1xuICAgICAgICAvLyBUT0RPOiBwb3NzaWJsZSB0aGF0IHJldC5jdXJyZW50VGFsa0lkIGlzIHVuZGVmaW5lZCwgYnV0IHN1YmplY3QgcGFnZSBoYXMgdGFsayBzdWJwYWdlc1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2l2ZW4gdHdvIHRhbGsgcGFnZSB0aXRsZXMgKG1heSBiZSB1bmRlZmluZWQpLCByZXRyaWV2ZXMgdGhlaXIgcGFnZXMgZm9yIGNvbXBhcmlzb25cbiAqIEFzc3VtZXMgdGhhdCB0YWxrIHBhZ2VzIGFsd2F5cyBoYXZlIHN1YnBhZ2VzIGVuYWJsZWQuXG4gKiBBc3N1bWVzIHRoYXQgcGFnZXMgYXJlIG5vdCBpZGVudGljYWwgKHN1YmplY3QgcGFnZXMgd2VyZSBhbHJlYWR5IHZlcmlmaWVkKVxuICogQXNzdW1lcyBuYW1lc3BhY2VzIGFyZSBva2F5IChzdWJqZWN0IHBhZ2VzIGFscmVhZHkgY2hlY2tlZClcbiAqIChDdXJyZW50bHkpIGFzc3VtZXMgdGhhdCB0aGUgbWFsaWNpb3VzIGNhc2Ugb2Ygc3ViamVjdCBwYWdlc1xuICogICBub3QgZGV0ZWN0ZWQgYXMgc3VicGFnZXMgYW5kIHRoZSB0YWxrIHBhZ2VzIEFSRSBzdWJwYWdlc1xuICogICAoaS5lLiBBIGFuZCBBL0IgdnMuIFRhbGs6QSBhbmQgVGFsazpBL0IpIGRvZXMgbm90IGhhcHBlbiAvIGRvZXMgbm90IGhhbmRsZVxuICogUmV0dXJucyBzdHJ1Y3R1cmUgaW5kaWNhdGluZyB3aGV0aGVyIG1vdmUgdGFsayBzaG91bGQgYmUgYWxsb3dlZFxuICovXG5hc3luYyBmdW5jdGlvbiB0YWxrVmFsaWRhdGUoY2hlY2tUYWxrLCBmaXJzdFRhbGssIHNlY29uZFRhbGspIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICByZXN1bHQuYWxsb3dNb3ZlVGFsayA9IHRydWU7XG4gICAgaWYgKCFjaGVja1RhbGspIHJldHVybiByZXN1bHQ7XG4gICAgaWYgKGZpcnN0VGFsayA9PT0gdW5kZWZpbmVkIHx8IHNlY29uZFRhbGsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtdy5ub3RpZnkoJ1VuYWJsZSB0byB2YWxpZGF0ZSB0YWxrLiBEaXNhbGxvd2luZyBtb3ZldGFsayB0byBiZSBzYWZlJywgeyB0eXBlOiAnZXJyb3InIH0pO1xuICAgICAgICByZXN1bHQuYWxsb3dNb3ZlVGFsayA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXN1bHQuY3VyclRETkUgPSB0cnVlO1xuICAgIHJlc3VsdC5kZXN0VERORSA9IHRydWU7XG4gICAgcmVzdWx0LmN1cnJlbnRUYWxrQ2FuQ3JlYXRlID0gdHJ1ZTtcbiAgICByZXN1bHQuZGVzdGluYXRpb25UYWxrQ2FuQ3JlYXRlID0gdHJ1ZTtcbiAgICBjb25zdCB0YWxrVGl0bGVBcnIgPSBbZmlyc3RUYWxrLCBzZWNvbmRUYWxrXTtcbiAgICBpZiAodGFsa1RpdGxlQXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgdGFsa0RhdGEgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgbXcuQXBpKCkuZ2V0KHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgcHJvcDogJ2luZm8nLFxuICAgICAgICAgICAgICAgIGludGVzdGFjdGlvbnM6ICdtb3ZlfGNyZWF0ZScsXG4gICAgICAgICAgICAgICAgdGl0bGVzOiB0YWxrVGl0bGVBcnIuam9pbignfCcpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgKS5xdWVyeS5wYWdlcztcblxuICAgICAgICBmb3IgKGNvbnN0IFssIHBhZ2VEYXRhXSBvZiBPYmplY3QuZW50cmllcyh0YWxrRGF0YSkpXG4gICAgICAgICAgICBpZiAocGFnZURhdGEudGl0bGUgPT09IGZpcnN0VGFsaykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5jdXJyVERORSA9IHBhZ2VEYXRhLmludmFsaWQgPT09ICcnIHx8IHBhZ2VEYXRhLm1pc3NpbmcgPT09ICcnO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5jdXJyZW50VGFsa1RpdGxlID0gcGFnZURhdGEudGl0bGU7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmN1cnJlbnRUYWxrQ2FuTW92ZSA9IHBhZ2VEYXRhLmFjdGlvbnMubW92ZSA9PT0gJyc7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmN1cnJlbnRUYWxrQ2FuQ3JlYXRlID0gcGFnZURhdGEuYWN0aW9ucy5jcmVhdGUgPT09ICcnO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5jdXJyZW50VGFsa0lzUmVkaXJlY3QgPSBwYWdlRGF0YS5yZWRpcmVjdCA9PT0gJyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2VEYXRhLnRpdGxlID09PSBzZWNvbmRUYWxrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmRlc3RURE5FID0gcGFnZURhdGEuaW52YWxpZCA9PT0gJycgfHwgcGFnZURhdGEubWlzc2luZyA9PT0gJyc7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmRlc3RpbmF0aW9uVGFsa1RpdGxlID0gcGFnZURhdGEudGl0bGU7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmRlc3RpbmF0aW9uVGFsa0Nhbk1vdmUgPSBwYWdlRGF0YS5hY3Rpb25zLm1vdmUgPT09ICcnO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5kZXN0aW5hdGlvblRhbGtDYW5DcmVhdGUgPSBwYWdlRGF0YS5hY3Rpb25zLmNyZWF0ZSA9PT0gJyc7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmRlc3RpbmF0aW9uVGFsa0lzUmVkaXJlY3QgPSBwYWdlRGF0YS5yZWRpcmVjdCA9PT0gJyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG13Lm5vdGlmeSgnRm91bmQgcGFnZWlkIG5vdCBtYXRjaGluZyBnaXZlbiBpZHMuJywgeyB0eXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIH1cbiAgICB9XG5cbiAgICByZXN1bHQuYWxsb3dNb3ZlVGFsayA9XG4gICAgICAgIHJlc3VsdC5jdXJyZW50VGFsa0NhbkNyZWF0ZSAmJiByZXN1bHQuY3VycmVudFRhbGtDYW5Nb3ZlICYmIHJlc3VsdC5kZXN0aW5hdGlvblRhbGtDYW5DcmVhdGUgJiYgcmVzdWx0LmRlc3RpbmF0aW9uVGFsa0Nhbk1vdmU7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHaXZlbiBleGlzdGluZyB0aXRsZSAobm90IHByZWZpeGVkIHdpdGggXCIvXCIpLCBvcHRpb25hbGx5IHNlYXJjaGluZyBmb3IgdGFsayxcbiAqICAgZmluZHMgc3VicGFnZXMgKGluY2wuIHRob3NlIHRoYXQgYXJlIHJlZGlycykgYW5kIHdoZXRoZXIgbGltaXRzIGFyZSBleGNlZWRlZFxuICogQXMgb2YgMjAxNi0wOCwgdXNlcyAyIGFwaSBnZXQgY2FsbHMgdG8gZ2V0IG5lZWRlZCBkZXRhaWxzOlxuICogICB3aGV0aGVyIHRoZSBwYWdlIGNhbiBiZSBtb3ZlZCwgd2hldGhlciB0aGUgcGFnZSBpcyBhIHJlZGlyZWN0XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFN1YnBhZ2VzKG5hbWVzcGFjZURhdGEsIHRpdGxlLCB0aXRsZU5hbWVzcGFjZSwgaXNUYWxrKSB7XG4gICAgaWYgKCFpc1RhbGsgJiYgbmFtZXNwYWNlRGF0YVt0aXRsZU5hbWVzcGFjZS50b1N0cmluZygpXS5zdWJwYWdlcyAhPT0gJycpIHJldHVybiB7IGRhdGE6IFtdIH07XG5cbiAgICBjb25zdCB0aXRsZVBhZ2VEYXRhID0gZ2V0VGFsa1BhZ2VOYW1lKG5hbWVzcGFjZURhdGEsIHRpdGxlLCB0aXRsZU5hbWVzcGFjZSk7XG4gICAgY29uc3Qgc3VicGFnZXMgPSAoXG4gICAgICAgIGF3YWl0IG5ldyBtdy5BcGkoKS5nZXQoe1xuICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgbGlzdDogJ2FsbHBhZ2VzJyxcbiAgICAgICAgICAgIGFwbmFtZXNwYWNlOiBpc1RhbGsgPyB0aXRsZU5hbWVzcGFjZSArIDEgOiB0aXRsZU5hbWVzcGFjZSxcbiAgICAgICAgICAgIGFwZnJvbTogdGl0bGVQYWdlRGF0YS50aXRsZVdpdGhvdXRQcmVmaXggKyAnLycsXG4gICAgICAgICAgICBhcHRvOiB0aXRsZVBhZ2VEYXRhLnRpdGxlV2l0aG91dFByZWZpeCArICcwJyxcbiAgICAgICAgICAgIGFwbGltaXQ6IDEwMSxcbiAgICAgICAgfSlcbiAgICApLnF1ZXJ5LmFsbHBhZ2VzO1xuXG4gICAgLy8gVHdvIHF1ZXJpZXMgYXJlIG5lZWRlZCBkdWUgdG8gQVBJIGxpbWl0c1xuICAgIGNvbnN0IHN1YnBhZ2VJZHMgPSBbW10sIFtdXTtcbiAgICBmb3IgKGNvbnN0IGlkIGluIHN1YnBhZ2VzKSBzdWJwYWdlSWRzW2lkIDwgNTAgPyAwIDogMV0ucHVzaChzdWJwYWdlc1tpZF0ucGFnZWlkKTtcblxuICAgIGlmIChzdWJwYWdlSWRzWzBdLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgZGF0YTogW10gfTtcblxuICAgIGlmIChzdWJwYWdlSWRzWzFdLmxlbmd0aCA9PT0gNTEpIHJldHVybiB7IGVycm9yOiAnMTAwKyBzdWJwYWdlcywgdG9vIG1hbnkgdG8gbW92ZS4nIH07XG5cbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBjb25zdCBzdWJwYWdlRGF0YU9uZSA9IChcbiAgICAgICAgYXdhaXQgbmV3IG13LkFwaSgpLmdldCh7XG4gICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICBwcm9wOiAnaW5mbycsXG4gICAgICAgICAgICBpbnRlc3RhY3Rpb25zOiAnbW92ZXxjcmVhdGUnLFxuICAgICAgICAgICAgcGFnZWlkczogc3VicGFnZUlkc1swXS5qb2luKCd8JyksXG4gICAgICAgIH0pXG4gICAgKS5xdWVyeS5wYWdlcztcbiAgICBmb3IgKGNvbnN0IFssIHBhZ2VEYXRhXSBvZiBPYmplY3QuZW50cmllcyhzdWJwYWdlRGF0YU9uZSkpXG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIHRpdGxlOiBwYWdlRGF0YS50aXRsZSxcbiAgICAgICAgICAgIGlzUmVkaXI6IHBhZ2VEYXRhLnJlZGlyZWN0ID09PSAnJyxcbiAgICAgICAgICAgIGNhbk1vdmU6IHBhZ2VEYXRhLmFjdGlvbnM/Lm1vdmUgPT09ICcnLFxuICAgICAgICB9KTtcblxuICAgIGlmIChzdWJwYWdlSWRzWzFdLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgZGF0YTogcmVzdWx0IH07XG5cbiAgICBjb25zdCBzdWJwYWdlRGF0YVR3byA9IChcbiAgICAgICAgYXdhaXQgbmV3IG13LkFwaSgpLmdldCh7XG4gICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICBwcm9wOiAnaW5mbycsXG4gICAgICAgICAgICBpbnRlc3RhY3Rpb25zOiAnbW92ZXxjcmVhdGUnLFxuICAgICAgICAgICAgcGFnZWlkczogc3VicGFnZUlkc1sxXS5qb2luKCd8JyksXG4gICAgICAgIH0pXG4gICAgKS5xdWVyeS5wYWdlcztcbiAgICBmb3IgKGNvbnN0IFssIHBhZ2VEYXRhXSBvZiBPYmplY3QuZW50cmllcyhzdWJwYWdlRGF0YVR3bykpXG4gICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgIHRpdGxlOiBwYWdlRGF0YS50aXRsZSxcbiAgICAgICAgICAgIGlzUmVkaXJlY3Q6IHBhZ2VEYXRhLnJlZGlyZWN0ID09PSAnJyxcbiAgICAgICAgICAgIGNhbk1vdmU6IHBhZ2VEYXRhLmFjdGlvbnM/Lm1vdmUgPT09ICcnLFxuICAgICAgICB9KTtcblxuICAgIHJldHVybiB7IGRhdGE6IHJlc3VsdCB9O1xufVxuXG4vKipcbiAqIFByaW50cyBzdWJwYWdlIGRhdGEgZ2l2ZW4gcmV0cmlldmVkIHN1YnBhZ2UgaW5mb3JtYXRpb24gcmV0dXJuZWQgYnkgZ2V0U3VicGFnZXNcbiAqIFJldHVybnMgYSBzdWdnZXN0aW9uIHdoZXRoZXIgbW92ZXN1YnBhZ2VzIHNob3VsZCBiZSBhbGxvd2VkXG4gKi9cbmZ1bmN0aW9uIHByaW50U3VicGFnZUluZm8oYmFzZVBhZ2UsIGN1cnJlbnRTdWJwYWdlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgY29uc3QgY3VycmVudFN1YnBhZ2VzID0gW107XG4gICAgY29uc3Qgc3VicGFnZXNDYW5ub3RNb3ZlID0gW107XG4gICAgbGV0IHJlZGlyZWN0Q291bnQgPSAwO1xuICAgIGZvciAoY29uc3QgWywgcGFnZURhdGFdIG9mIE9iamVjdC5lbnRyaWVzKGN1cnJlbnRTdWJwYWdlLmRhdGEpKSB7XG4gICAgICAgIGlmICghcGFnZURhdGEuY2FuTW92ZSkgc3VicGFnZXNDYW5ub3RNb3ZlLnB1c2gocGFnZURhdGEudGl0bGUpO1xuXG4gICAgICAgIGN1cnJlbnRTdWJwYWdlcy5wdXNoKChwYWdlRGF0YS5pc1JlZGlyZWN0ID8gJyhSKSAnIDogJyAgJykgKyBwYWdlRGF0YS50aXRsZSk7XG4gICAgICAgIGlmIChwYWdlRGF0YS5pc1JlZGlyZWN0KSByZWRpcmVjdENvdW50Kys7XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRTdWJwYWdlcy5sZW5ndGggPiAwKVxuICAgICAgICBtdy5ub3RpZnkoXG4gICAgICAgICAgICBzdWJwYWdlc0Nhbm5vdE1vdmUubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgID8gYERpc2FibGluZyBtb3ZlLXN1YnBhZ2VzLlxcblRoZSBmb2xsb3dpbmcgJHtzdWJwYWdlc0Nhbm5vdE1vdmUubGVuZ3RofSAob2YgJHtjdXJyZW50U3VicGFnZXMubGVuZ3RofSkgdG90YWwgc3VicGFnZXMgb2YgJHtiYXNlUGFnZX0gQ0FOTk9UIGJlIG1vdmVkOlxcblxcbiR7c3VicGFnZXNDYW5ub3RNb3ZlLmpvaW4oXG4gICAgICAgICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICAgICAgICl9YFxuICAgICAgICAgICAgICAgIDogYCR7Y3VycmVudFN1YnBhZ2VzLmxlbmd0aH0gdG90YWwgc3VicGFnZXMgb2YgJHtiYXNlUGFnZX0uJHtyZWRpcmVjdENvdW50ICE9PSAwID8gYCAke3JlZGlyZWN0Q291bnR9IHJlZGlyZWN0cywgbGFiZWxlZCAoUilgIDogJyd9OiAke2N1cnJlbnRTdWJwYWdlcy5qb2luKCcsICcpfWAsXG4gICAgICAgICk7XG5cbiAgICByZXN1bHQuYWxsb3dNb3ZlU3VicGFnZXMgPSBzdWJwYWdlc0Nhbm5vdE1vdmUubGVuZ3RoID09PSAwO1xuICAgIHJlc3VsdC5ub05lZWQgPSBjdXJyZW50U3VicGFnZXMubGVuZ3RoID09PSAwO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU3dhcHMgdGhlIHR3byBwYWdlcyAoZ2l2ZW4gYWxsIHByZXJlcXVpc2l0ZSBjaGVja3MpXG4gKiBPcHRpb25hbGx5IG1vdmVzIHRhbGsgcGFnZXMgYW5kIHN1YnBhZ2VzXG4gKi9cbmZ1bmN0aW9uIHN3YXBQYWdlcyh0aXRsZU9uZSwgdGl0bGVUd28sIHN1bW1hcnksIG1vdmVUYWxrLCBtb3ZlU3VicGFnZXMpIHtcbiAgICBjb25zdCBpbnRlcm1lZGlhdGVUaXRsZSA9IGBEcmFmdDpNb3ZlLyR7dGl0bGVPbmV9YDtcblxuICAgIGNvbnN0IG1vdmVzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBhY3Rpb246ICdtb3ZlJyxcbiAgICAgICAgICAgIGZyb206IHRpdGxlVHdvLFxuICAgICAgICAgICAgdG86IGludGVybWVkaWF0ZVRpdGxlLFxuICAgICAgICAgICAgcmVhc29uOiAnW1tXUDpST1VORFJPQklOfFJvdW5kLXJvYmluIHBhZ2UgbW92ZV1dIHN0ZXAgMSAod2l0aCBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL3BhZ2Vzd2FwfHBhZ2Vzd2FwIDJdXSknLFxuICAgICAgICAgICAgd2F0Y2hsaXN0OiAndW53YXRjaCcsXG4gICAgICAgICAgICBub3JlZGlyZWN0OiAxLFxuICAgICAgICB9LFxuICAgICAgICB7IGFjdGlvbjogJ21vdmUnLCBmcm9tOiB0aXRsZU9uZSwgdG86IHRpdGxlVHdvLCByZWFzb246IHN1bW1hcnksIHdhdGNobGlzdDogJ3Vud2F0Y2gnLCBub3JlZGlyZWN0OiAxIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFjdGlvbjogJ21vdmUnLFxuICAgICAgICAgICAgZnJvbTogaW50ZXJtZWRpYXRlVGl0bGUsXG4gICAgICAgICAgICB0bzogdGl0bGVPbmUsXG4gICAgICAgICAgICByZWFzb246ICdbW1dQOlJPVU5EUk9CSU58Um91bmQtcm9iaW4gcGFnZSBtb3ZlXV0gc3RlcCAzICh3aXRoIFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvcGFnZXN3YXB8cGFnZXN3YXAgMl1dKScsXG4gICAgICAgICAgICB3YXRjaGxpc3Q6ICd1bndhdGNoJyxcbiAgICAgICAgICAgIG5vcmVkaXJlY3Q6IDEsXG4gICAgICAgIH0sXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgbW92ZSBvZiBtb3Zlcykge1xuICAgICAgICBpZiAobW92ZVRhbGspIG1vdmUubW92ZXRhbGsgPSAxO1xuICAgICAgICBpZiAobW92ZVN1YnBhZ2VzKSBtb3ZlLm1vdmVzdWJwYWdlcyA9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgICAgIGxldCBpID0gMDtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUganNkb2MvcmVxdWlyZS1qc2RvY1xuICAgICAgICBmdW5jdGlvbiBkb01vdmUoKSB7XG4gICAgICAgICAgICBpZiAoaSA+PSBtb3Zlcy5sZW5ndGgpIHJldHVybiByZXNvbHZlKHJlc3VsdCk7XG5cbiAgICAgICAgICAgIG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5wb3N0V2l0aFRva2VuKCdjc3JmJywgbW92ZXNbaV0pXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIGRvTW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQubWVzc2FnZSA9IGBGYWlsZWQgb24gbW92ZSAke2kgKyAxfSAoJHttb3Zlc1tpXS5mcm9tfSBcdTIxOTIgJHttb3Zlc1tpXS50b30pYDtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBkb01vdmUoKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xufVxuXG4vKipcbiAqIEdpdmVuIHR3byB0aXRsZXMsIG5vcm1hbGl6ZXMsIGRvZXMgcHJlcmVxdWlzaXRlIGNoZWNrcyBmb3IgdGFsay9zdWJwYWdlcyxcbiAqIHByb21wdHMgdXNlciBmb3IgY29uZmlnIGJlZm9yZSBzd2FwcGluZyB0aGUgdGl0bGVzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJvdW5kUm9iaW4odXNlclBlcm1pc3Npb25zLCBjdXJyZW50VGl0bGUsIGRlc3RpbmF0aW9uVGl0bGUsIHN1bW1hcnksIG1vdmVUYWxrLCBtb3ZlU3VicGFnZXMpIHtcbiAgICAvLyBHZW5lcmFsIGluZm9ybWF0aW9uIGFib3V0IGFsbCBuYW1lc3BhY2VzXG4gICAgY29uc3QgbmFtZXNwYWNlc0luZm9ybWF0aW9uID0gKFxuICAgICAgICBhd2FpdCBuZXcgbXcuQXBpKCkuZ2V0KHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgIG1ldGE6ICdzaXRlaW5mbycsXG4gICAgICAgICAgICBzaXByb3A6ICduYW1lc3BhY2VzJyxcbiAgICAgICAgfSlcbiAgICApLnF1ZXJ5Lm5hbWVzcGFjZXM7XG5cbiAgICAvLyBTcGVjaWZpYyBpbmZvcm1hdGlvbiBhYm91dCBjdXJyZW50IGFuZCBkZXN0aW5hdGlvbiBwYWdlc1xuICAgIGNvbnN0IHBhZ2VzRGF0YSA9IChcbiAgICAgICAgYXdhaXQgbmV3IG13LkFwaSgpLmdldCh7XG4gICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICBwcm9wOiAnaW5mbycsXG4gICAgICAgICAgICBpbnByb3A6ICd0YWxraWQnLFxuICAgICAgICAgICAgaW50ZXN0YWN0aW9uczogJ21vdmV8Y3JlYXRlJyxcbiAgICAgICAgICAgIHRpdGxlczogYCR7Y3VycmVudFRpdGxlfXwke2Rlc3RpbmF0aW9uVGl0bGV9YCxcbiAgICAgICAgfSlcbiAgICApLnF1ZXJ5O1xuXG4gICAgLy8gTm9ybWFsaXplIHRpdGxlcyBpZiBuZWNlc3NhcnlcbiAgICBmb3IgKGNvbnN0IGNoYW5nZXMgaW4gcGFnZXNEYXRhLm5vcm1hbGl6ZWQpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRUaXRsZSA9PT0gcGFnZXNEYXRhLm5vcm1hbGl6ZWRbY2hhbmdlc10uZnJvbSkgY3VycmVudFRpdGxlID0gcGFnZXNEYXRhLm5vcm1hbGl6ZWRbY2hhbmdlc10udG87XG4gICAgICAgIGlmIChkZXN0aW5hdGlvblRpdGxlID09PSBwYWdlc0RhdGEubm9ybWFsaXplZFtjaGFuZ2VzXS5mcm9tKSBkZXN0aW5hdGlvblRpdGxlID0gcGFnZXNEYXRhLm5vcm1hbGl6ZWRbY2hhbmdlc10udG87XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgbmFtZXNwYWNlc1xuICAgIGNvbnN0IHZhbGlkYXRpb25EYXRhID0gc3dhcFZhbGlkYXRlKGN1cnJlbnRUaXRsZSwgZGVzdGluYXRpb25UaXRsZSwgcGFnZXNEYXRhLnBhZ2VzLCBuYW1lc3BhY2VzSW5mb3JtYXRpb24sIHVzZXJQZXJtaXNzaW9ucyk7XG4gICAgaWYgKCF2YWxpZGF0aW9uRGF0YS52YWxpZCkgdGhyb3cgbmV3IEVycm9yKHZhbGlkYXRpb25EYXRhLmVycm9yKTtcblxuICAgIGlmICh2YWxpZGF0aW9uRGF0YS5hZGRMaW5lSW5mbyAhPT0gdW5kZWZpbmVkKSBtdy5ub3RpZnkodmFsaWRhdGlvbkRhdGEuYWRkTGluZUluZm8pO1xuXG4gICAgLy8gU3VicGFnZSBjaGVja3NcbiAgICBjb25zdCBjdXJyZW50U3VicGFnZXMgPSBhd2FpdCBnZXRTdWJwYWdlcyhuYW1lc3BhY2VzSW5mb3JtYXRpb24sIHZhbGlkYXRpb25EYXRhLmN1cnJlbnRUaXRsZSwgdmFsaWRhdGlvbkRhdGEuY3VycmVudE5hbWVzcGFjZSwgZmFsc2UpO1xuICAgIGlmIChjdXJyZW50U3VicGFnZXMuZXJyb3IgIT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKGN1cnJlbnRTdWJwYWdlcy5lcnJvcik7XG4gICAgY29uc3QgY3VycmVudFN1YnBhZ2VGbGFncyA9IHByaW50U3VicGFnZUluZm8odmFsaWRhdGlvbkRhdGEuY3VycmVudFRpdGxlLCBjdXJyZW50U3VicGFnZXMpO1xuICAgIGNvbnN0IGRlc3RpbmF0aW9uU3VicGFnZXMgPSBhd2FpdCBnZXRTdWJwYWdlcyhcbiAgICAgICAgbmFtZXNwYWNlc0luZm9ybWF0aW9uLFxuICAgICAgICB2YWxpZGF0aW9uRGF0YS5kZXN0aW5hdGlvblRpdGxlLFxuICAgICAgICB2YWxpZGF0aW9uRGF0YS5kZXN0aW5hdGlvbk5hbWVzcGFjZSxcbiAgICAgICAgZmFsc2UsXG4gICAgKTtcbiAgICBpZiAoZGVzdGluYXRpb25TdWJwYWdlcy5lcnJvciAhPT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoZGVzdGluYXRpb25TdWJwYWdlcy5lcnJvcik7XG4gICAgY29uc3QgZGVzdGluYXRpb25TdWJwYWdlRmxhZ3MgPSBwcmludFN1YnBhZ2VJbmZvKHZhbGlkYXRpb25EYXRhLmRlc3RpbmF0aW9uVGl0bGUsIGRlc3RpbmF0aW9uU3VicGFnZXMpO1xuXG4gICAgY29uc3QgdGFsa1ZhbGlkYXRpb25EYXRhID0gYXdhaXQgdGFsa1ZhbGlkYXRlKFxuICAgICAgICB2YWxpZGF0aW9uRGF0YS5jaGVja1RhbGssXG4gICAgICAgIHZhbGlkYXRpb25EYXRhLmN1cnJlbnRUYWxrTmFtZSxcbiAgICAgICAgdmFsaWRhdGlvbkRhdGEuZGVzdGluYXRpb25UYWxrTmFtZSxcbiAgICApO1xuXG4gICAgLy8gVE9ETzogY2hlY2sgZW1wdHkgc3VicGFnZSBkZXN0aW5hdGlvbnMgb24gYm90aCBzaWRlcyAoc3ViaiwgdGFsaykgZm9yIGNyZWF0ZSBwcm90ZWN0aW9uXG4gICAgY29uc3QgY3VycmVudFRhbGtTdWJwYWdlcyA9IGF3YWl0IGdldFN1YnBhZ2VzKFxuICAgICAgICBuYW1lc3BhY2VzSW5mb3JtYXRpb24sXG4gICAgICAgIHZhbGlkYXRpb25EYXRhLmN1cnJlbnRUaXRsZSxcbiAgICAgICAgdmFsaWRhdGlvbkRhdGEuY3VycmVudE5hbWVzcGFjZSxcbiAgICAgICAgdHJ1ZSxcbiAgICApO1xuICAgIGlmIChjdXJyZW50VGFsa1N1YnBhZ2VzLmVycm9yICE9PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcihjdXJyZW50VGFsa1N1YnBhZ2VzLmVycm9yKTtcbiAgICBjb25zdCBjdXJyZW50VGFsa1N1YnBhZ2VGbGFncyA9IHByaW50U3VicGFnZUluZm8odmFsaWRhdGlvbkRhdGEuY3VycmVudFRhbGtOYW1lLCBjdXJyZW50VGFsa1N1YnBhZ2VzKTtcbiAgICBjb25zdCBkZXN0aW5hdGlvblRhbGtTdWJwYWdlcyA9IGF3YWl0IGdldFN1YnBhZ2VzKFxuICAgICAgICBuYW1lc3BhY2VzSW5mb3JtYXRpb24sXG4gICAgICAgIHZhbGlkYXRpb25EYXRhLmRlc3RpbmF0aW9uVGl0bGUsXG4gICAgICAgIHZhbGlkYXRpb25EYXRhLmRlc3RpbmF0aW9uTmFtZXNwYWNlLFxuICAgICAgICB0cnVlLFxuICAgICk7XG4gICAgaWYgKGRlc3RpbmF0aW9uVGFsa1N1YnBhZ2VzLmVycm9yICE9PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcihkZXN0aW5hdGlvblRhbGtTdWJwYWdlcy5lcnJvcik7XG4gICAgY29uc3QgZGVzdGluYXRpb25UYWxrU3VicGFnZUZsYWdzID0gcHJpbnRTdWJwYWdlSW5mbyh2YWxpZGF0aW9uRGF0YS5kZXN0aW5hdGlvblRhbGtOYW1lLCBkZXN0aW5hdGlvblRhbGtTdWJwYWdlcyk7XG5cbiAgICBjb25zdCBub1N1YnBhZ2VzID1cbiAgICAgICAgY3VycmVudFN1YnBhZ2VGbGFncy5ub05lZWQgJiZcbiAgICAgICAgZGVzdGluYXRpb25TdWJwYWdlRmxhZ3Mubm9OZWVkICYmXG4gICAgICAgIGN1cnJlbnRUYWxrU3VicGFnZUZsYWdzLm5vTmVlZCAmJlxuICAgICAgICBkZXN0aW5hdGlvblRhbGtTdWJwYWdlRmxhZ3Mubm9OZWVkO1xuICAgIC8vIElmIG9uZSBuYW1lc3BhY2UgZGlzYWJsZXMgc3VicGFnZXMsIG90aGVyIGVuYWJsZXMgc3VicGFnZXMgKGFuZCBoYXMgc3VicGFnZXMpLCBjb25zaWRlciBhYm9ydC4gQXNzdW1lIHRhbGsgcGFnZXMgYWx3YXlzIHNhZmUgKFRPRE8gZml4KVxuICAgIGNvbnN0IHN1YnBhZ2VDb2xsaXNpb24gPVxuICAgICAgICAodmFsaWRhdGlvbkRhdGEuY3VycmVudE5hbWVzcGFjZUFsbG93U3VicGFnZXMgJiYgIWRlc3RpbmF0aW9uU3VicGFnZUZsYWdzLm5vTmVlZCkgfHxcbiAgICAgICAgKHZhbGlkYXRpb25EYXRhLmRlc3RpbmF0aW9uTmFtZXNwYWNlQWxsb3dTdWJwYWdlcyAmJiAhY3VycmVudFN1YnBhZ2VGbGFncy5ub05lZWQpO1xuXG4gICAgaWYgKG1vdmVUYWxrICYmIHZhbGlkYXRpb25EYXRhLmNoZWNrVGFsayAmJiAhdGFsa1ZhbGlkYXRpb25EYXRhLmFsbG93TW92ZVRhbGspIHtcbiAgICAgICAgbW92ZVRhbGsgPSBmYWxzZTtcbiAgICAgICAgbXcubm90aWZ5KFxuICAgICAgICAgICAgYERpc2FsbG93aW5nIG1vdmluZyB0YWxrLiAke1xuICAgICAgICAgICAgICAgICF0YWxrVmFsaWRhdGlvbkRhdGEuY3VycmVudFRhbGtDYW5DcmVhdGVcbiAgICAgICAgICAgICAgICAgICAgPyBgJHt2YWxpZGF0aW9uRGF0YS5jdXJyZW50VGFsa05hbWV9IGlzIGNyZWF0ZS1wcm90ZWN0ZWRgXG4gICAgICAgICAgICAgICAgICAgIDogIXRhbGtWYWxpZGF0aW9uRGF0YS5kZXN0aW5hdGlvblRhbGtDYW5DcmVhdGVcbiAgICAgICAgICAgICAgICAgICAgICA/IGAke3ZhbGlkYXRpb25EYXRhLmRlc3RpbmF0aW9uVGFsa05hbWV9IGlzIGNyZWF0ZS1wcm90ZWN0ZWRgXG4gICAgICAgICAgICAgICAgICAgICAgOiAnVGFsayBwYWdlIGlzIGltbW92YWJsZSdcbiAgICAgICAgICAgIH1gLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGxldCBmaW5hbE1vdmVTdWJwYWdlcyA9IGZhbHNlO1xuICAgIC8vIFRPRE8gZnV0dXJlOiBjdXJyVFNwRmxhZ3MuYWxsb3dNb3ZlU3VicGFnZXMgJiYgZGVzdFRTcEZsYWdzLmFsbG93TW92ZVN1YnBhZ2VzIG5lZWRzIHRvIGJlIHNlcGFyYXRlIGNoZWNrLiBJZiB0YWxrIHN1YnBhZ2VzIGltbW92YWJsZSwgc2hvdWxkIG5vdCBhZmZlY3Qgc3VianNwYWNlXG4gICAgaWYgKFxuICAgICAgICAhc3VicGFnZUNvbGxpc2lvbiAmJlxuICAgICAgICAhbm9TdWJwYWdlcyAmJlxuICAgICAgICB2YWxpZGF0aW9uRGF0YS5hbGxvd01vdmVTdWJwYWdlcyAmJlxuICAgICAgICBjdXJyZW50U3VicGFnZUZsYWdzLmFsbG93TW92ZVN1YnBhZ2VzICYmXG4gICAgICAgIGRlc3RpbmF0aW9uU3VicGFnZUZsYWdzLmFsbG93TW92ZVN1YnBhZ2VzICYmXG4gICAgICAgIGN1cnJlbnRUYWxrU3VicGFnZUZsYWdzLmFsbG93TW92ZVN1YnBhZ2VzICYmXG4gICAgICAgIGRlc3RpbmF0aW9uVGFsa1N1YnBhZ2VGbGFncy5hbGxvd01vdmVTdWJwYWdlc1xuICAgIClcbiAgICAgICAgZmluYWxNb3ZlU3VicGFnZXMgPSBtb3ZlU3VicGFnZXM7XG4gICAgZWxzZSBpZiAoc3VicGFnZUNvbGxpc2lvbikge1xuICAgICAgICBmaW5hbE1vdmVTdWJwYWdlcyA9IGZhbHNlO1xuICAgICAgICBtdy5ub3RpZnkoJ09uZSBuYW1lc3BhY2UgZG9lcyBub3QgaGF2ZSBzdWJwYWdlcyBlbmFibGVkLiBEaXNhbGxvd2luZyBtb3ZlIHN1YnBhZ2VzLicpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgW1BhZ2Vzd2FwXSBTd2FwcGluZyBcIiR7Y3VycmVudFRpdGxlfVwiIHdpdGggXCIke2Rlc3RpbmF0aW9uVGl0bGV9XCIgd2l0aCBzdW1tYXJ5IFwiJHtzdW1tYXJ5fVwiIGFuZCBtb3ZlVGFsayAke21vdmVUYWxrfSBhbmQgbW92ZVN1YnBhZ2VzICR7ZmluYWxNb3ZlU3VicGFnZXN9YCxcbiAgICApO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3dhcFBhZ2VzKGN1cnJlbnRUaXRsZSwgZGVzdGluYXRpb25UaXRsZSwgc3VtbWFyeSwgbW92ZVRhbGssIGZpbmFsTW92ZVN1YnBhZ2VzKTtcblxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yKTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkFBQSxHQUFHLE9BQU8sTUFBTSxDQUFDLGlCQUFrQixlQUFnQixrQkFBbUIsa0JBQW1CLG1CQUFtQixFQUFHLFNBQVksQ0FDdkgsSUFBTUEsRUFBWSxHQUFHLE9BQU8sSUFBSSxtQkFBbUIsRUFDbkQsR0FBSUEsRUFBWSxHQUFLQSxHQUFhLEtBQVFBLEdBQWEsR0FBS0EsR0FBYSxHQUFPQSxHQUFhLElBQU1BLEdBQWEsR0FBSyxPQUVySCxJQUFNQyxFQUFlLEdBQUcsT0FBTyxJQUFJLFlBQVksRUFFekNDLEVBQWtCLE1BQU1DLEVBQXFCLEVBS25ELElBSGtCLE1BQU0sSUFBSSxHQUFHLElBQUksRUFBRSxJQUFJLENBQUUsT0FBUSxRQUFTLEtBQU0sT0FBUSxPQUFRRixDQUFhLENBQUMsR0FHbkYsTUFBTSxNQUFNLEVBQUUsRUFBRyxPQUVqQixHQUFHLEtBQUssZUFBZSxHQUFHLE9BQU8sSUFBSSxNQUFNLElBQU0sVUFBWSxPQUFTLGFBQWMsSUFBSyxPQUFRLGdCQUFnQixFQUV6SCxpQkFBaUIsUUFBVUcsR0FBVSxDQUd0QyxHQUZBQSxFQUFNLGVBQWUsRUFFakIsQ0FBQ0YsRUFBZ0IsUUFBUyxPQUFPLEdBQUcsT0FBTyx3REFBeUQsQ0FBRSxLQUFNLE9BQVEsQ0FBQyxFQUV6SCxTQUFTRyxHQUFhLENBQ2xCQSxFQUFXLE1BQU0sTUFBTSxLQUFNLFNBQVMsQ0FDMUMsQ0FDQSxHQUFHLGFBQWFBLEVBQVksR0FBRyxHQUFHLGFBQWEsRUFFL0NBLEVBQVcsT0FBTyxLQUFPLE9BQ3pCQSxFQUFXLE9BQU8sTUFBUSxFQUFFLFFBQVEsRUFBRSxPQUNsQyxFQUFFLEtBQUssRUFDRixLQUFLLENBQUUsS0FBTSxHQUFHLEtBQUssT0FBTyxlQUFlLEVBQUcsT0FBUSxRQUFTLENBQUMsRUFDaEUsS0FBSyxNQUFNLEVBQ2hCLFlBQ0osRUFDQUEsRUFBVyxPQUFPLFFBQVUsQ0FDeEIsQ0FDSSxPQUFRLE9BQ1IsTUFBTyxPQUNQLE1BQU8sQ0FBQyxVQUFXLGFBQWEsRUFDaEMsU0FBVSxFQUNkLEVBQ0EsQ0FDSSxPQUFRLFNBQ1IsTUFBTyxTQUNQLE1BQU8sQ0FBQyxPQUFRLE9BQU8sQ0FDM0IsQ0FDSixFQUVBQSxFQUFXLFVBQVUsV0FBYSxVQUFZLENBQzFDQSxFQUFXLE1BQU0sVUFBVSxXQUFXLEtBQUssSUFBSSxFQUUvQyxLQUFLLE1BQVEsSUFBSSxHQUFHLEdBQUcsWUFBWSxDQUMvQixPQUFRLEdBQ1IsU0FBVSxFQUNkLENBQUMsRUFFRCxLQUFLLFFBQVUsSUFBSSxHQUFHLEdBQUcsZUFFekIsS0FBSyxpQkFBbUIsSUFBSSxHQUFHLFFBQVEsaUJBQWlCLENBQ3BELFNBQVUsR0FDVixTQUFVLEtBQUssU0FDZixtQkFBb0IsR0FDcEIsaUJBQWtCLEdBQ2xCLG9CQUFxQixHQUNyQix5QkFBMEIsR0FDMUIsWUFBYSxHQUNiLFNBQVdDLEdBQ0gsRUFBQUEsSUFBVSxJQUFNQSxJQUFVLEdBQUcsT0FBTyxJQUFJLFlBQVksRUFHaEUsQ0FBQyxFQUNELEtBQUssaUJBQWlCLEdBQUcsU0FBVSxJQUFNLENBQ3JDLElBQUlBLEVBQVEsS0FBSyxpQkFBaUIsU0FBUyxFQUFFLFdBQVcsSUFBSyxHQUFHLEVBQUUsUUFBUSxPQUFRLEVBQUUsRUFDcEZBLEVBQVFBLEVBQU0sUUFBUSxJQUFJLE9BQU8sbUJBQW1CLEdBQUcsT0FBTyxJQUFJLFVBQVUsRUFBRSxRQUFRLFNBQVUsRUFBRSxDQUFDLFFBQVEsRUFBRyxFQUFFLEVBQ2hIQSxFQUFRQSxFQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFDMUJBLEVBQVFBLEVBQU0sT0FBTyxDQUFDLEVBQUUsWUFBWSxFQUFJQSxFQUFNLE1BQU0sQ0FBQyxFQUNyRCxLQUFLLGlCQUFpQixTQUFTQSxDQUFLLENBQ3hDLENBQUMsRUFDRCxLQUFLLGlCQUFpQixRQUFRLEtBQU0sQ0FBRSxPQUFRLG1CQUFvQixDQUFDLEVBRW5FLEtBQUssc0JBQXdCLElBQUksR0FBRyxHQUFHLFlBQVksS0FBSyxpQkFBa0IsQ0FBRSxNQUFPLG1CQUFvQixNQUFPLEtBQU0sQ0FBQyxFQUVySCxLQUFLLGFBQWUsSUFBSSxHQUFHLEdBQUcsb0JBQW9CLENBQzlDLFNBQVUsR0FDVixTQUFVLEtBQUssU0FDZixRQUFTLENBQ0wsQ0FBRSxLQUFNLGtEQUFtRCxFQUMzRCxDQUFFLEtBQU0sb0NBQXFDLEVBQzdDLENBQUUsS0FBTSx1Q0FBd0MsRUFDaEQsQ0FBRSxLQUFNLGFBQWMsRUFDdEIsQ0FBRSxLQUFNLHVCQUF3QixFQUNoQyxDQUFFLEtBQU0seUNBQTBDLENBQ3RELENBQ0osQ0FBQyxFQUVELEtBQUssYUFBYSxRQUFRLEtBQU0sQ0FBRSxPQUFRLG1CQUFvQixDQUFDLEVBRS9ELEtBQUssa0JBQW9CLElBQUksR0FBRyxHQUFHLFlBQVksS0FBSyxhQUFjLENBQUUsTUFBTyxVQUFXLE1BQU8sS0FBTSxDQUFDLEVBRXBHLEtBQUssaUJBQW1CLElBQUksR0FBRyxHQUFHLG9CQUFvQixDQUFFLFNBQVUsRUFBSyxDQUFDLEVBQ3hFLEtBQUssc0JBQXdCLElBQUksR0FBRyxHQUFHLFlBQVksS0FBSyxpQkFBa0IsQ0FDdEUsTUFBTyxpQ0FDUCxNQUFPLFFBQ1gsQ0FBQyxFQUVELEtBQUsscUJBQXVCLElBQUksR0FBRyxHQUFHLG9CQUFvQixDQUFFLFNBQVUsRUFBSyxDQUFDLEVBQzVFLEtBQUssMEJBQTRCLElBQUksR0FBRyxHQUFHLFlBQVksS0FBSyxxQkFBc0IsQ0FDOUUsTUFBTyxnQ0FDUCxNQUFPLFFBQ1gsQ0FBQyxFQUVELEtBQUssUUFBUSxTQUFTLENBQ2xCLEtBQUssc0JBQ0wsS0FBSyxrQkFDTCxLQUFLLHNCQUNMLEtBQUsseUJBQ1QsQ0FBQyxFQUVELEtBQUssTUFBTSxTQUFTLE9BQU8sS0FBSyxRQUFRLFFBQVEsRUFDaEQsS0FBSyxNQUFNLE9BQU8sS0FBSyxNQUFNLFFBQVEsQ0FDekMsRUFFQUQsRUFBVyxVQUFVLGtCQUFvQixVQUFZLENBQ2pELElBQU1FLEVBQ0YsS0FBSyxpQkFBaUIsU0FBUyxJQUFNLElBQU0sS0FBSyxpQkFBaUIsWUFBWSxHQUFLLEtBQUssYUFBYSxTQUFTLElBQU0sR0FDdkgsS0FBSyxRQUFRLGFBQWEsQ0FBRSxLQUFNQSxDQUFRLENBQUMsQ0FDL0MsRUFFQUYsRUFBVyxVQUFVLGlCQUFtQixTQUFVRyxFQUFnQixDQUM5RCxHQUFJQSxJQUFXLE9BQVEsQ0FDbkIsSUFBTUMsRUFBYyxLQUFLLGlCQUFpQixTQUFTLEVBQUUsS0FBSyxFQUNwREMsRUFBVSxLQUFLLGFBQWEsU0FBUyxFQUNyQ0MsRUFBVyxLQUFLLGlCQUFpQixXQUFXLEVBQzVDQyxFQUFlLEtBQUsscUJBQXFCLFdBQVcsRUFFMUQsT0FBTyxJQUFJLEdBQUcsR0FBRyxRQUFRLEVBQ3BCLEtBQUssSUFDRkMsRUFBV1gsRUFBaUJELEVBQWNRLEVBQWFDLEVBQVNDLEVBQVVDLENBQVksRUFBRSxNQUFPRSxJQUMzRixRQUFRLE1BQU1BLENBQUssRUFDWixFQUFFLFNBQVMsRUFBRSxPQUFPLEtBQUssV0FBVyxDQUFDLElBQUksR0FBRyxHQUFHLE1BQU1BLEdBQU8sU0FBVyw0QkFBNEIsQ0FBQyxDQUFDLENBQUMsRUFDaEgsQ0FDTCxFQUNDLEtBQUssSUFBTSxDQUNSLEdBQUcsT0FBTywrQkFBZ0MsQ0FBRSxLQUFNLFNBQVUsQ0FBQyxFQUM3RCxLQUFLLE1BQU0sQ0FBRSxPQUFBTixFQUFRLFFBQVMsRUFBSyxDQUFDLEVBQ3BDLFdBQVcsSUFBTSxPQUFPLFNBQVMsT0FBTyxFQUFHLEdBQUksQ0FDbkQsQ0FBQyxDQUNULFNBQVdBLElBQVcsU0FDbEIsT0FBTyxJQUFJLEdBQUcsR0FBRyxRQUFRLElBQU0sQ0FDM0IsS0FBSyxNQUFNLENBQUUsT0FBQUEsQ0FBTyxDQUFDLENBQ3pCLENBQUMsRUFFTCxPQUFPSCxFQUFXLE1BQU0sVUFBVSxpQkFBaUIsS0FBSyxLQUFNRyxDQUFNLENBQ3hFLEVBRUEsSUFBTU8sRUFBUyxJQUFJVixFQUNiVyxFQUFnQixJQUFJLEdBQUcsR0FBRyxjQUNoQyxFQUFFLE1BQU0sRUFBRSxPQUFPQSxFQUFjLFFBQVEsRUFDdkNBLEVBQWMsV0FBVyxDQUFDRCxDQUFNLENBQUMsRUFDakNDLEVBQWMsV0FBV0QsQ0FBTSxDQUNuQyxDQUFDLENBQ0wsQ0FBQyxFQVFELFNBQVNaLEdBQXVCLENBQzVCLE9BQU8sSUFBSSxHQUFHLElBQUksRUFDYixJQUFJLENBQ0QsT0FBUSxRQUNSLEtBQU0sV0FDTixPQUFRLFFBQ1osQ0FBQyxFQUNBLEtBQU1jLEdBQVMsQ0FDWixJQUFNQyxFQUFhRCxFQUFLLE1BQU0sU0FBUyxPQUN2QyxNQUFPLENBQ0gsUUFBU0MsRUFBVyxTQUFTLGtCQUFrQixHQUFLQSxFQUFXLFNBQVMsZUFBZSxFQUN2RixtQkFBb0JBLEVBQVcsU0FBUyxnQkFBZ0IsQ0FDNUQsQ0FDSixDQUFDLENBQ1QsQ0FPQSxTQUFTQyxFQUFnQkMsRUFBZUMsRUFBT0MsRUFBZ0IsQ0FDM0QsSUFBTUMsRUFBUyxDQUFDLEVBQ1ZDLEVBQ0ZKLEVBQWNFLEVBQWUsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLFNBQVcsRUFBSSxFQUFJRixFQUFjRSxFQUFlLFNBQVMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxPQUFTLEVBQzVILE9BQUFDLEVBQU8sbUJBQXFCRixFQUFNLFVBQVVHLEVBQWNILEVBQU0sTUFBTSxFQUN0RUUsRUFBTyxVQUFZLEdBQUdILEdBQWVFLEVBQWlCLEdBQUcsU0FBUyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUlDLEVBQU8sa0JBQWtCLEdBQy9GQSxDQUNYLENBT0EsU0FBU0UsRUFBYUMsRUFBWUMsRUFBVUMsRUFBV0MsRUFBZ0IzQixFQUFpQixDQUNwRixJQUFNcUIsRUFBUyxDQUFFLE1BQU8sR0FBTSxrQkFBbUIsR0FBTSxVQUFXLEVBQUssRUFFbkVPLEVBQVEsRUFDWixPQUFXLENBQUNDLEVBQVFDLENBQVEsSUFBSyxPQUFPLFFBQVFKLENBQVMsRUFBRyxDQUV4RCxHQURBRSxJQUNJQyxJQUFXLE1BQVFDLEVBQVMsR0FBSyxFQUNqQyxPQUFBVCxFQUFPLE1BQVEsR0FDZkEsRUFBTyxNQUFRLFFBQVFTLEVBQVMsS0FBSyxtQkFDOUJULEVBR1gsR0FDS1MsRUFBUyxJQUFNLEdBQUtBLEVBQVMsSUFBTSxHQUNuQ0EsRUFBUyxJQUFNLElBQU1BLEVBQVMsSUFBTSxJQUFNLENBQUM5QixFQUFnQixvQkFDM0Q4QixFQUFTLElBQU0sSUFBTUEsRUFBUyxJQUFNLEtBQ3JDQSxFQUFTLElBQU0sSUFFZixPQUFBVCxFQUFPLE1BQVEsR0FDZkEsRUFBTyxNQUFRLGdCQUFnQlMsRUFBUyxLQUFLLEtBQUtBLEVBQVMsRUFBRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsNERBQ3REVCxFQUVQRyxJQUFlTSxFQUFTLFFBQ3hCVCxFQUFPLGFBQWVTLEVBQVMsTUFDL0JULEVBQU8saUJBQW1CUyxFQUFTLEdBQ25DVCxFQUFPLGNBQWdCUyxFQUFTLE9BQ2hDVCxFQUFPLGVBQWlCUyxFQUFTLFFBQVEsT0FBUyxHQUNsRFQsRUFBTyxrQkFBb0JTLEVBQVMsV0FBYSxJQUVqREwsSUFBYUssRUFBUyxRQUN0QlQsRUFBTyxpQkFBbUJTLEVBQVMsTUFDbkNULEVBQU8scUJBQXVCUyxFQUFTLEdBQ3ZDVCxFQUFPLGtCQUFvQlMsRUFBUyxPQUNwQ1QsRUFBTyxtQkFBcUJTLEVBQVMsUUFBUSxPQUFTLEdBQ3REVCxFQUFPLHNCQUF3QlMsRUFBUyxXQUFhLEdBRTdELENBRUEsR0FBSSxDQUFDVCxFQUFPLE1BQU8sT0FBT0EsRUFDMUIsR0FBSSxDQUFDQSxFQUFPLGVBQ1IsT0FBQUEsRUFBTyxNQUFRLEdBQ2ZBLEVBQU8sTUFBUSxHQUFHQSxFQUFPLFlBQVksZ0JBQzlCQSxFQUVYLEdBQUksQ0FBQ0EsRUFBTyxtQkFDUixPQUFBQSxFQUFPLE1BQVEsR0FDZkEsRUFBTyxNQUFRLEdBQUdBLEVBQU8sZ0JBQWdCLGdCQUNsQ0EsRUFFWCxHQUFJQSxFQUFPLGlCQUFtQixJQUFNQSxFQUFPLHFCQUF1QixFQUM5RCxPQUFBQSxFQUFPLE1BQVEsR0FDZkEsRUFBTyxNQUFRLCtEQUNSQSxFQUVYLEdBQUlPLElBQVUsRUFDVixPQUFBUCxFQUFPLE1BQVEsR0FDZkEsRUFBTyxNQUFRLHFEQUNSQSxFQU1YLEdBSkFBLEVBQU8sOEJBQWdDTSxFQUFlTixFQUFPLGlCQUFpQixTQUFTLENBQUMsRUFBRSxXQUFhLEdBQ3ZHQSxFQUFPLGtDQUFvQ00sRUFBZU4sRUFBTyxxQkFBcUIsU0FBUyxDQUFDLEVBQUUsV0FBYSxHQUczR0EsRUFBTyxhQUFhLFdBQVdBLEVBQU8saUJBQW1CLEdBQUcsR0FBS0EsRUFBTyxpQkFBaUIsV0FBV0EsRUFBTyxhQUFlLEdBQUcsRUFBRyxDQUNoSSxHQUFJQSxFQUFPLG1CQUFxQkEsRUFBTyxxQkFDbkMsT0FBQUEsRUFBTyxNQUFRLEdBQ2ZBLEVBQU8sTUFBUSxHQUFHQSxFQUFPLFlBQVksVUFBVUEsRUFBTyxnQkFBZ0I7QUFBQSxFQUFLQSxFQUFPLGdCQUFnQixVQUFVQSxFQUFPLG9CQUFvQixpQkFDaElBLEVBR1hBLEVBQU8sa0JBQW9CQSxFQUFPLDhCQUM3QkEsRUFBTyxvQkFBbUJBLEVBQU8sWUFBYyxtREFDeEQsQ0FFQSxHQUFJQSxFQUFPLGlCQUFtQixJQUFNLEVBQ2hDQSxFQUFPLFVBQVksT0FDbEIsQ0FDRCxJQUFNVSxFQUFrQmQsRUFBZ0JVLEVBQWdCTixFQUFPLGFBQWNBLEVBQU8sZ0JBQWdCLEVBQ3BHQSxFQUFPLDBCQUE0QlUsRUFBZ0IsbUJBQ25EVixFQUFPLGdCQUFrQlUsRUFBZ0IsVUFDekMsSUFBTUMsRUFBa0JmLEVBQWdCVSxFQUFnQk4sRUFBTyxpQkFBa0JBLEVBQU8sb0JBQW9CLEVBQzVHQSxFQUFPLDhCQUFnQ1csRUFBZ0IsbUJBQ3ZEWCxFQUFPLG9CQUFzQlcsRUFBZ0IsU0FFakQsQ0FFQSxPQUFPWCxDQUNYLENBWUEsZUFBZVksRUFBYUMsRUFBV0MsRUFBV0MsRUFBWSxDQUMxRCxJQUFNZixFQUFTLENBQUMsRUFFaEIsR0FEQUEsRUFBTyxjQUFnQixHQUNuQixDQUFDYSxFQUFXLE9BQU9iLEVBQ3ZCLEdBQUljLElBQWMsUUFBYUMsSUFBZSxPQUMxQyxVQUFHLE9BQU8sMkRBQTRELENBQUUsS0FBTSxPQUFRLENBQUMsRUFDdkZmLEVBQU8sY0FBZ0IsR0FDaEJBLEVBRVhBLEVBQU8sU0FBVyxHQUNsQkEsRUFBTyxTQUFXLEdBQ2xCQSxFQUFPLHFCQUF1QixHQUM5QkEsRUFBTyx5QkFBMkIsR0FDbEMsSUFBTWdCLEVBQWUsQ0FBQ0YsRUFBV0MsQ0FBVSxFQUMzQyxHQUFJQyxFQUFhLE9BQVMsRUFBRyxDQUN6QixJQUFNQyxHQUNGLE1BQU0sSUFBSSxHQUFHLElBQUksRUFBRSxJQUFJLENBQ25CLE9BQVEsUUFDUixLQUFNLE9BQ04sY0FBZSxjQUNmLE9BQVFELEVBQWEsS0FBSyxHQUFHLENBQ2pDLENBQUMsR0FDSCxNQUFNLE1BRVIsT0FBVyxDQUFDLENBQUVQLENBQVEsSUFBSyxPQUFPLFFBQVFRLENBQVEsRUFDOUMsR0FBSVIsRUFBUyxRQUFVSyxFQUNuQmQsRUFBTyxTQUFXUyxFQUFTLFVBQVksSUFBTUEsRUFBUyxVQUFZLEdBQ2xFVCxFQUFPLGlCQUFtQlMsRUFBUyxNQUNuQ1QsRUFBTyxtQkFBcUJTLEVBQVMsUUFBUSxPQUFTLEdBQ3REVCxFQUFPLHFCQUF1QlMsRUFBUyxRQUFRLFNBQVcsR0FDMURULEVBQU8sc0JBQXdCUyxFQUFTLFdBQWEsV0FDOUNBLEVBQVMsUUFBVU0sRUFDMUJmLEVBQU8sU0FBV1MsRUFBUyxVQUFZLElBQU1BLEVBQVMsVUFBWSxHQUNsRVQsRUFBTyxxQkFBdUJTLEVBQVMsTUFDdkNULEVBQU8sdUJBQXlCUyxFQUFTLFFBQVEsT0FBUyxHQUMxRFQsRUFBTyx5QkFBMkJTLEVBQVMsUUFBUSxTQUFXLEdBQzlEVCxFQUFPLDBCQUE0QlMsRUFBUyxXQUFhLE9BRXpELFdBQUcsT0FBTyx1Q0FBd0MsQ0FBRSxLQUFNLE9BQVEsQ0FBQyxFQUM1RCxDQUFDLENBRXBCLENBRUEsT0FBQVQsRUFBTyxjQUNIQSxFQUFPLHNCQUF3QkEsRUFBTyxvQkFBc0JBLEVBQU8sMEJBQTRCQSxFQUFPLHVCQUNuR0EsQ0FDWCxDQVFBLGVBQWVrQixFQUFZckIsRUFBZUMsRUFBT0MsRUFBZ0JvQixFQUFRLENBQ3JFLEdBQUksQ0FBQ0EsR0FBVXRCLEVBQWNFLEVBQWUsU0FBUyxDQUFDLEVBQUUsV0FBYSxHQUFJLE1BQU8sQ0FBRSxLQUFNLENBQUMsQ0FBRSxFQUUzRixJQUFNcUIsRUFBZ0J4QixFQUFnQkMsRUFBZUMsRUFBT0MsQ0FBYyxFQUNwRXNCLEdBQ0YsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUFFLElBQUksQ0FDbkIsT0FBUSxRQUNSLEtBQU0sV0FDTixZQUFhRixFQUFTcEIsRUFBaUIsRUFBSUEsRUFDM0MsT0FBUXFCLEVBQWMsbUJBQXFCLElBQzNDLEtBQU1BLEVBQWMsbUJBQXFCLElBQ3pDLFFBQVMsR0FDYixDQUFDLEdBQ0gsTUFBTSxTQUdGRSxFQUFhLENBQUMsQ0FBQyxFQUFHLENBQUMsQ0FBQyxFQUMxQixRQUFXQyxLQUFNRixFQUFVQyxFQUFXQyxFQUFLLEdBQUssRUFBSSxDQUFDLEVBQUUsS0FBS0YsRUFBU0UsQ0FBRSxFQUFFLE1BQU0sRUFFL0UsR0FBSUQsRUFBVyxDQUFDLEVBQUUsU0FBVyxFQUFHLE1BQU8sQ0FBRSxLQUFNLENBQUMsQ0FBRSxFQUVsRCxHQUFJQSxFQUFXLENBQUMsRUFBRSxTQUFXLEdBQUksTUFBTyxDQUFFLE1BQU8sa0NBQW1DLEVBRXBGLElBQU10QixFQUFTLENBQUMsRUFDVndCLEdBQ0YsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUFFLElBQUksQ0FDbkIsT0FBUSxRQUNSLEtBQU0sT0FDTixjQUFlLGNBQ2YsUUFBU0YsRUFBVyxDQUFDLEVBQUUsS0FBSyxHQUFHLENBQ25DLENBQUMsR0FDSCxNQUFNLE1BQ1IsT0FBVyxDQUFDLENBQUViLENBQVEsSUFBSyxPQUFPLFFBQVFlLENBQWMsRUFDcER4QixFQUFPLEtBQUssQ0FDUixNQUFPUyxFQUFTLE1BQ2hCLFFBQVNBLEVBQVMsV0FBYSxHQUMvQixRQUFTQSxFQUFTLFNBQVMsT0FBUyxFQUN4QyxDQUFDLEVBRUwsR0FBSWEsRUFBVyxDQUFDLEVBQUUsU0FBVyxFQUFHLE1BQU8sQ0FBRSxLQUFNdEIsQ0FBTyxFQUV0RCxJQUFNeUIsR0FDRixNQUFNLElBQUksR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUNuQixPQUFRLFFBQ1IsS0FBTSxPQUNOLGNBQWUsY0FDZixRQUFTSCxFQUFXLENBQUMsRUFBRSxLQUFLLEdBQUcsQ0FDbkMsQ0FBQyxHQUNILE1BQU0sTUFDUixPQUFXLENBQUMsQ0FBRWIsQ0FBUSxJQUFLLE9BQU8sUUFBUWdCLENBQWMsRUFDcER6QixFQUFPLEtBQUssQ0FDUixNQUFPUyxFQUFTLE1BQ2hCLFdBQVlBLEVBQVMsV0FBYSxHQUNsQyxRQUFTQSxFQUFTLFNBQVMsT0FBUyxFQUN4QyxDQUFDLEVBRUwsTUFBTyxDQUFFLEtBQU1ULENBQU8sQ0FDMUIsQ0FNQSxTQUFTMEIsRUFBaUJDLEVBQVVDLEVBQWdCLENBQ2hELElBQU01QixFQUFTLENBQUMsRUFDVjZCLEVBQWtCLENBQUMsRUFDbkJDLEVBQXFCLENBQUMsRUFDeEJDLEVBQWdCLEVBQ3BCLE9BQVcsQ0FBQyxDQUFFdEIsQ0FBUSxJQUFLLE9BQU8sUUFBUW1CLEVBQWUsSUFBSSxFQUNwRG5CLEVBQVMsU0FBU3FCLEVBQW1CLEtBQUtyQixFQUFTLEtBQUssRUFFN0RvQixFQUFnQixNQUFNcEIsRUFBUyxXQUFhLE9BQVMsTUFBUUEsRUFBUyxLQUFLLEVBQ3ZFQSxFQUFTLFlBQVlzQixJQUc3QixPQUFJRixFQUFnQixPQUFTLEdBQ3pCLEdBQUcsT0FDQ0MsRUFBbUIsT0FBUyxFQUN0QjtBQUFBLGdCQUEyQ0EsRUFBbUIsTUFBTSxRQUFRRCxFQUFnQixNQUFNLHVCQUF1QkYsQ0FBUTtBQUFBO0FBQUEsRUFBd0JHLEVBQW1CLEtBQ3hLLElBQ0osQ0FBQyxHQUNELEdBQUdELEVBQWdCLE1BQU0sc0JBQXNCRixDQUFRLElBQUlJLElBQWtCLEVBQUksSUFBSUEsQ0FBYSwwQkFBNEIsRUFBRSxLQUFLRixFQUFnQixLQUFLLElBQUksQ0FBQyxFQUN6SyxFQUVKN0IsRUFBTyxrQkFBb0I4QixFQUFtQixTQUFXLEVBQ3pEOUIsRUFBTyxPQUFTNkIsRUFBZ0IsU0FBVyxFQUNwQzdCLENBQ1gsQ0FNQSxTQUFTZ0MsRUFBVUMsRUFBVUMsRUFBVS9DLEVBQVNDLEVBQVVDLEVBQWMsQ0FDcEUsSUFBTThDLEVBQW9CLGNBQWNGLENBQVEsR0FFMUNHLEVBQVEsQ0FDVixDQUNJLE9BQVEsT0FDUixLQUFNRixFQUNOLEdBQUlDLEVBQ0osT0FBUSxxR0FDUixVQUFXLFVBQ1gsV0FBWSxDQUNoQixFQUNBLENBQUUsT0FBUSxPQUFRLEtBQU1GLEVBQVUsR0FBSUMsRUFBVSxPQUFRL0MsRUFBUyxVQUFXLFVBQVcsV0FBWSxDQUFFLEVBQ3JHLENBQ0ksT0FBUSxPQUNSLEtBQU1nRCxFQUNOLEdBQUlGLEVBQ0osT0FBUSxxR0FDUixVQUFXLFVBQ1gsV0FBWSxDQUNoQixDQUNKLEVBRUEsUUFBV0ksS0FBUUQsRUFDWGhELElBQVVpRCxFQUFLLFNBQVcsR0FDMUJoRCxJQUFjZ0QsRUFBSyxhQUFlLEdBRzFDLE9BQU8sSUFBSSxRQUFRLENBQUNDLEVBQVNDLElBQVcsQ0FDcEMsSUFBTXZDLEVBQVMsQ0FBRSxRQUFTLEVBQUssRUFDM0J3QyxFQUFJLEVBR1IsU0FBU0MsR0FBUyxDQUNkLEdBQUlELEdBQUtKLEVBQU0sT0FBUSxPQUFPRSxFQUFRdEMsQ0FBTSxFQUU1QyxJQUFJLEdBQUcsSUFBSSxFQUNOLGNBQWMsT0FBUW9DLEVBQU1JLENBQUMsQ0FBQyxFQUM5QixLQUFLLElBQU0sQ0FDUkEsSUFDQUMsRUFBTyxDQUNYLENBQUMsRUFDQSxLQUFLLElBQU0sQ0FDUnpDLEVBQU8sUUFBVSxHQUNqQkEsRUFBTyxRQUFVLGtCQUFrQndDLEVBQUksQ0FBQyxLQUFLSixFQUFNSSxDQUFDLEVBQUUsSUFBSSxXQUFNSixFQUFNSSxDQUFDLEVBQUUsRUFBRSxJQUMzRUQsRUFBT3ZDLENBQU0sQ0FDakIsQ0FBQyxDQUNULENBRUEsT0FBQXlDLEVBQU8sRUFFQXpDLENBQ1gsQ0FBQyxDQUNMLENBTUEsZUFBZVYsRUFBV1gsRUFBaUJELEVBQWNnRSxFQUFrQnZELEVBQVNDLEVBQVVDLEVBQWMsQ0FFeEcsSUFBTXNELEdBQ0YsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUFFLElBQUksQ0FDbkIsT0FBUSxRQUNSLEtBQU0sV0FDTixPQUFRLFlBQ1osQ0FBQyxHQUNILE1BQU0sV0FHRnRDLEdBQ0YsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUFFLElBQUksQ0FDbkIsT0FBUSxRQUNSLEtBQU0sT0FDTixPQUFRLFNBQ1IsY0FBZSxjQUNmLE9BQVEsR0FBRzNCLENBQVksSUFBSWdFLENBQWdCLEVBQy9DLENBQUMsR0FDSCxNQUdGLFFBQVdFLEtBQVd2QyxFQUFVLFdBQ3hCM0IsSUFBaUIyQixFQUFVLFdBQVd1QyxDQUFPLEVBQUUsT0FBTWxFLEVBQWUyQixFQUFVLFdBQVd1QyxDQUFPLEVBQUUsSUFDbEdGLElBQXFCckMsRUFBVSxXQUFXdUMsQ0FBTyxFQUFFLE9BQU1GLEVBQW1CckMsRUFBVSxXQUFXdUMsQ0FBTyxFQUFFLElBSWxILElBQU1DLEVBQWlCM0MsRUFBYXhCLEVBQWNnRSxFQUFrQnJDLEVBQVUsTUFBT3NDLEVBQXVCaEUsQ0FBZSxFQUMzSCxHQUFJLENBQUNrRSxFQUFlLE1BQU8sTUFBTSxJQUFJLE1BQU1BLEVBQWUsS0FBSyxFQUUzREEsRUFBZSxjQUFnQixRQUFXLEdBQUcsT0FBT0EsRUFBZSxXQUFXLEVBR2xGLElBQU1oQixFQUFrQixNQUFNWCxFQUFZeUIsRUFBdUJFLEVBQWUsYUFBY0EsRUFBZSxpQkFBa0IsRUFBSyxFQUNwSSxHQUFJaEIsRUFBZ0IsUUFBVSxPQUFXLE1BQU0sSUFBSSxNQUFNQSxFQUFnQixLQUFLLEVBQzlFLElBQU1pQixFQUFzQnBCLEVBQWlCbUIsRUFBZSxhQUFjaEIsQ0FBZSxFQUNuRmtCLEVBQXNCLE1BQU03QixFQUM5QnlCLEVBQ0FFLEVBQWUsaUJBQ2ZBLEVBQWUscUJBQ2YsRUFDSixFQUNBLEdBQUlFLEVBQW9CLFFBQVUsT0FBVyxNQUFNLElBQUksTUFBTUEsRUFBb0IsS0FBSyxFQUN0RixJQUFNQyxFQUEwQnRCLEVBQWlCbUIsRUFBZSxpQkFBa0JFLENBQW1CLEVBRS9GRSxFQUFxQixNQUFNckMsRUFDN0JpQyxFQUFlLFVBQ2ZBLEVBQWUsZ0JBQ2ZBLEVBQWUsbUJBQ25CLEVBR01LLEVBQXNCLE1BQU1oQyxFQUM5QnlCLEVBQ0FFLEVBQWUsYUFDZkEsRUFBZSxpQkFDZixFQUNKLEVBQ0EsR0FBSUssRUFBb0IsUUFBVSxPQUFXLE1BQU0sSUFBSSxNQUFNQSxFQUFvQixLQUFLLEVBQ3RGLElBQU1DLEVBQTBCekIsRUFBaUJtQixFQUFlLGdCQUFpQkssQ0FBbUIsRUFDOUZFLEVBQTBCLE1BQU1sQyxFQUNsQ3lCLEVBQ0FFLEVBQWUsaUJBQ2ZBLEVBQWUscUJBQ2YsRUFDSixFQUNBLEdBQUlPLEVBQXdCLFFBQVUsT0FBVyxNQUFNLElBQUksTUFBTUEsRUFBd0IsS0FBSyxFQUM5RixJQUFNQyxFQUE4QjNCLEVBQWlCbUIsRUFBZSxvQkFBcUJPLENBQXVCLEVBRTFHRSxFQUNGUixFQUFvQixRQUNwQkUsRUFBd0IsUUFDeEJHLEVBQXdCLFFBQ3hCRSxFQUE0QixPQUUxQkUsRUFDRFYsRUFBZSwrQkFBaUMsQ0FBQ0csRUFBd0IsUUFDekVILEVBQWUsbUNBQXFDLENBQUNDLEVBQW9CLE9BRTFFMUQsR0FBWXlELEVBQWUsV0FBYSxDQUFDSSxFQUFtQixnQkFDNUQ3RCxFQUFXLEdBQ1gsR0FBRyxPQUNDLDRCQUNLNkQsRUFBbUIscUJBRWJBLEVBQW1CLHlCQUVsQix5QkFEQSxHQUFHSixFQUFlLG1CQUFtQix1QkFGdkMsR0FBR0EsRUFBZSxlQUFlLHNCQUkzQyxFQUNKLEdBR0osSUFBSVcsRUFBb0IsR0FHcEIsQ0FBQ0QsR0FDRCxDQUFDRCxHQUNEVCxFQUFlLG1CQUNmQyxFQUFvQixtQkFDcEJFLEVBQXdCLG1CQUN4QkcsRUFBd0IsbUJBQ3hCRSxFQUE0QixrQkFFNUJHLEVBQW9CbkUsRUFDZmtFLElBQ0xDLEVBQW9CLEdBQ3BCLEdBQUcsT0FBTywwRUFBMEUsR0FHeEYsUUFBUSxJQUNKLHdCQUF3QjlFLENBQVksV0FBV2dFLENBQWdCLG1CQUFtQnZELENBQU8sa0JBQWtCQyxDQUFRLHFCQUFxQm9FLENBQWlCLEVBQzdKLEVBRUEsSUFBTXhELEVBQVMsTUFBTWdDLEVBQVV0RCxFQUFjZ0UsRUFBa0J2RCxFQUFTQyxFQUFVb0UsQ0FBaUIsRUFJbkcsR0FGQSxRQUFRLElBQUl4RCxDQUFNLEVBRWQsQ0FBQ0EsRUFBTyxRQUFTLE1BQU0sSUFBSSxNQUFNQSxFQUFPLEtBQUssQ0FDckQiLAogICJuYW1lcyI6IFsibmFtZXNwYWNlIiwgImN1cnJlbnRUaXRsZSIsICJ1c2VyUGVybWlzc2lvbnMiLCAiZmV0Y2hVc2VyUGVybWlzc2lvbnMiLCAiZXZlbnQiLCAiU3dhcERpYWxvZyIsICJ2YWx1ZSIsICJpc1ZhbGlkIiwgImFjdGlvbiIsICJkZXN0aW5hdGlvbiIsICJzdW1tYXJ5IiwgIm1vdmVUYWxrIiwgIm1vdmVTdWJwYWdlcyIsICJyb3VuZFJvYmluIiwgImVycm9yIiwgImRpYWxvZyIsICJ3aW5kb3dNYW5hZ2VyIiwgImRhdGEiLCAicmlnaHRzTGlzdCIsICJnZXRUYWxrUGFnZU5hbWUiLCAibmFtZXNwYWNlRGF0YSIsICJ0aXRsZSIsICJ0aXRsZU5hbWVzcGFjZSIsICJyZXN1bHQiLCAicHJlZml4TGVuZ3RoIiwgInN3YXBWYWxpZGF0ZSIsICJzdGFydFRpdGxlIiwgImVuZFRpdGxlIiwgInBhZ2VzRGF0YSIsICJuYW1lc3BhY2VzRGF0YSIsICJjb3VudCIsICJwYWdlSWQiLCAicGFnZURhdGEiLCAiY3VycmVudFRhbGtEYXRhIiwgImRlc3RpbmF0aW9uRGF0YSIsICJ0YWxrVmFsaWRhdGUiLCAiY2hlY2tUYWxrIiwgImZpcnN0VGFsayIsICJzZWNvbmRUYWxrIiwgInRhbGtUaXRsZUFyciIsICJ0YWxrRGF0YSIsICJnZXRTdWJwYWdlcyIsICJpc1RhbGsiLCAidGl0bGVQYWdlRGF0YSIsICJzdWJwYWdlcyIsICJzdWJwYWdlSWRzIiwgImlkIiwgInN1YnBhZ2VEYXRhT25lIiwgInN1YnBhZ2VEYXRhVHdvIiwgInByaW50U3VicGFnZUluZm8iLCAiYmFzZVBhZ2UiLCAiY3VycmVudFN1YnBhZ2UiLCAiY3VycmVudFN1YnBhZ2VzIiwgInN1YnBhZ2VzQ2Fubm90TW92ZSIsICJyZWRpcmVjdENvdW50IiwgInN3YXBQYWdlcyIsICJ0aXRsZU9uZSIsICJ0aXRsZVR3byIsICJpbnRlcm1lZGlhdGVUaXRsZSIsICJtb3ZlcyIsICJtb3ZlIiwgInJlc29sdmUiLCAicmVqZWN0IiwgImkiLCAiZG9Nb3ZlIiwgImRlc3RpbmF0aW9uVGl0bGUiLCAibmFtZXNwYWNlc0luZm9ybWF0aW9uIiwgImNoYW5nZXMiLCAidmFsaWRhdGlvbkRhdGEiLCAiY3VycmVudFN1YnBhZ2VGbGFncyIsICJkZXN0aW5hdGlvblN1YnBhZ2VzIiwgImRlc3RpbmF0aW9uU3VicGFnZUZsYWdzIiwgInRhbGtWYWxpZGF0aW9uRGF0YSIsICJjdXJyZW50VGFsa1N1YnBhZ2VzIiwgImN1cnJlbnRUYWxrU3VicGFnZUZsYWdzIiwgImRlc3RpbmF0aW9uVGFsa1N1YnBhZ2VzIiwgImRlc3RpbmF0aW9uVGFsa1N1YnBhZ2VGbGFncyIsICJub1N1YnBhZ2VzIiwgInN1YnBhZ2VDb2xsaXNpb24iLCAiZmluYWxNb3ZlU3VicGFnZXMiXQp9Cg==
