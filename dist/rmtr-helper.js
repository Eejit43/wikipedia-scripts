// <pre>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/rmtr-helper.ts

"use strict";(()=>{var x=new mw.Api;var A=`#rmtr-review-result{margin:1em;padding:2.5%;color:#202122;font-size:.8em;background-color:#f5f5f5;border:1px solid #a2a9b1;border-radius:2px}#rmtr-review-header{margin-bottom:.5em;font-weight:700;font-size:1.5em}.rmtr-review-header{margin:.5em 0;font-weight:700;font-size:1em}.rmtr-review-invalid-warning{color:#cd5c5c;font-weight:700}.rmtr-review-request-checkbox{margin:3px 3px 0}.rmtr-review-section-content{margin-left:1em;line-height:1.3}.rmtr-review-section-content li+li{margin-top:.4rem;margin-bottom:.4rem}#rmtr-review-submit{margin-top:.2em}#rmtr-review-loading{display:inline-block;height:1.3em;margin-top:-.3em;margin-left:3px;line-height:1.5em;vertical-align:text-bottom;overflow:hidden}#rmtr-review-loading:after{display:inline-table;text-align:left;white-space:pre;animation:rmtr-review-loading .8s steps(10) infinite;content:"\\280b\\a\\2819\\a\\2839\\a\\2838\\a\\283c\\a\\2834\\a\\2826\\a\\2827\\a\\2807\\a\\280f"}@keyframes rmtr-review-loading{to{transform:translateY(-15em)}}
`;mw.loader.using(["mediawiki.util"],()=>{if(mw.config.get("wgPageName")!=="Wikipedia:Requested_moves/Technical_requests")return;mw.util.addCSS(A);let E=mw.config.get("wgNamespaceIds"),S=!1;mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-tb":"p-cactions","#","Review move requests","review-rmtr-requests").addEventListener("click",async M=>{M.preventDefault();let L=!0;if(window.addEventListener("beforeunload",o=>{L&&o.preventDefault()}),S)return document.querySelector("#rmtr-review-result")?.scrollIntoView();S=!0;let P=await I(),j=P.revid,N=P.slots.main.content,f=["Uncontroversial technical requests","Requests to revert undiscussed moves","Contested technical requests","Administrator needed"],T=f[2],O=f[3],d={};function W(o){let t=[],n=["[","{"],c=["]","}"],s=!1,r="";for(let i=0;i<o.length;i++){let a=o[i],l=o[i+1];if(a==="|"&&!s||i===o.length-1){a!=="|"&&(r+=a),t.push(r),r="";continue}r+=a,n.some(m=>m===a&&m===l)?s=!0:c.some(m=>m===a&&m===l)&&(s=!1)}let e={};for(let[i,a]of t.entries()){let l=a.split("=").map(m=>m.trim());l.length===1&&l.unshift((i+1).toString()),e[l.shift()]=l.join("=")}return e}for(let o of f){let n=N.split(new RegExp(`={3,} ?${o} ?={3,}`))[1].split(/={3,}/m)[0].trim().match(/(?:\* ?\n)?[ *:]*{{rmassist\/core.+?(?=[ *:]*{{rmassist\/core|$)/gis);if(n)d[o]=n.map(c=>{c=c.trim();let s=W(c.replaceAll(/(?:\* ?\n)?[ *:]*{{rmassist\/core\s*\||}}(?![^\n]*}}).*/gis,""));return s.full=c,s.original=s[1]?.replace(/^\[+/,"").replace(/]+$/,"")??"UNKNOWN",s.destination=s[2]?.replace(/^\[+/,"").replace(/]+$/,"")??"UNKNOWN",s.requester??=s.sig?.match(/\[\[User:(.*?)(\||]])/)?.[1].trim(),delete s[1],delete s[2],s});else{d[o]=[];continue}}await Promise.all(Object.entries(d).map(async([,o])=>{await Promise.all(o.map(async t=>{let n=mw.Title.newFromText(t.original),c=mw.Title.newFromText(t.destination);if(!n)return mw.notify(`Invalid title "${t.original}"!`,{type:"error"});if(!c)return mw.notify(`Invalid title "${t.destination}"!`,{type:"error"});let s=!/[#<>[\]{|}]/.test(t.destination)&&c,r=document.createElement("span");r.classList.add("rmtr-review-invalid-warning"),r.textContent=`Invalid title "${t.destination}"!`;let e=![E.file,E.category].some(u=>n.getNamespaceId()===u||c.getNamespaceId()===u),i=document.createElement("span");i.classList.add("rmtr-review-invalid-warning"),i.textContent=`Warning: original or destination page is in namespace "${c.getNamespaceId()===E.file?"file":"category"}"!`;let a=await x.parse(`[[:${t.original}]] \u2192 ${s?`[[:${t.destination}]]`:r.outerHTML} requested by ${t.requester?mw.util.isIPAddress(t.requester)?`[[Special:Contributions/${t.requester}|${t.requester}]]`:`[[User:${t.requester}|${t.requester}]]`:/(\[{2}Special:Contributions\/(.*?)\|\2]{2})/.exec(t.sig)?.[1]??"(unknown)"} with reasoning "${t.reason}"`),l=new DOMParser().parseFromString(a,"text/html"),m=document.createElement("li");m.innerHTML=l.querySelector("div.mw-parser-output").firstElementChild.innerHTML,e||m.append(i),t.element=m}))}));let w=document.createElement("div");w.id="rmtr-review-result";let C=document.createElement("div");C.id="rmtr-review-header",C.textContent="Technical move requests review",w.append(C);for(let[o,[t,n]]of Object.entries(d).entries()){let c=document.createElement("div");c.classList.add("rmtr-review-header"),c.textContent=t,w.append(c);let s=document.createElement("div");if(s.classList.add("rmtr-review-section-content"),n.length===0){let r=document.createElement("div");r.textContent="No requests in this section",s.append(r)}else{let r=document.createElement("ul");for(let[e,i]of n.entries()){let a=i.element,l=document.createElement("input");l.type="checkbox",l.classList.add("rmtr-review-request-checkbox"),l.id=`rmtr-review-remove-request-${o}-${e}`,l.addEventListener("change",()=>{l.checked?(d[t][e].result={remove:!0,reason:R.value},u.style.display="inline",g.disabled=!0):(delete d[t][e].result,u.style.display="none",g.disabled=!1)});let m=document.createElement("label");m.htmlFor=`rmtr-review-remove-request-${o}-${e}`,m.textContent="Remove request",a.append(l),a.append(m);let u=document.createElement("span");u.style.display="none",u.append(document.createTextNode(" as "));let R=document.createElement("select");t==="Contested technical requests"&&(R.value="Contested"),R.addEventListener("change",()=>{d[t][e].result.reason=R.value});let D=["Completed","Contested","Already done","Invalid page name","Incorrect venue","Withdrawn","Stale","Not done"];for(let h of D){let v=document.createElement("option");v.value=h,v.textContent=h,R.append(v)}u.append(R),a.append(u);let g=document.createElement("input");g.type="checkbox",g.classList.add("rmtr-review-request-checkbox"),g.id=`rmtr-review-move-request-${o}-${e}`,g.addEventListener("change",()=>{g.checked?(d[t][e].result={move:!0,section:$.value},p.style.display="inline",l.disabled=!0):(delete d[t][e].result,p.style.display="none",l.disabled=!1)});let k=document.createElement("label");k.htmlFor=`rmtr-review-move-request-${o}-${e}`,k.textContent="Switch section",a.append(g),a.append(k);let p=document.createElement("span");p.style.display="none",p.append(document.createTextNode(" to "));let $=document.createElement("select");$.addEventListener("change",()=>{d[t][e].result.section=$.value});for(let h of f){if(h===t)continue;let v=document.createElement("option");v.selected=h===(t===T?O:T),v.value=h,v.textContent=h,$.append(v)}p.append($),p.append(document.createTextNode(" with reasoning "));let q=document.createElement("input");q.type="text",q.addEventListener("input",()=>{d[t][e].result.reason=q.value}),p.append(q),p.append(document.createTextNode(" (optional, automatically pings requestor and signs)")),a.append(p),r.append(a)}s.append(r)}w.append(s)}let y=document.createElement("button");y.id="rmtr-review-submit",y.textContent="Submit",y.addEventListener("click",async()=>{if((await I()).revid!==j)return mw.notify("An edit conflict occurred, please start over!",{type:"error"});y.disabled=!0,b.style.display="inline-block";let t=N,n={remove:{},move:{},total:0};for(let r of Object.values(d))for(let e of r)if(e.result){if("remove"in e.result)t=t.replace(e.full+`
`,"").replace(e.full,""),e.result.reason in n.remove||(n.remove[e.result.reason]=[]),n.remove[e.result.reason].push(e),n.total++;else if("move"in e.result){let i=f[f.indexOf(e.result.section)+1];t=t.replace(e.full+`
`,"").replace(e.full,""),t=t.replace(new RegExp(`(
?
?(?:={3,} ?${i} ?={3,}|$))`),`
${e.full}${e.result.reason?`
:: ${e.requester&&e.requester.length>0?mw.util.isIPAddress(e.requester)?"":`@[[User:${e.requester}|${e.requester}]] `:""} ${e.result.reason} ~~~~`:""}$1`),e.result.section in n.move||(n.move[e.result.section]=[]),n.move[e.result.section].push(e),n.total++}}if(n.total===0)return y.disabled=!1,b.style.display="none",mw.notify("No changes to make!",{type:"error"});t=t.replaceAll(new RegExp(`
{2,}(={3,} ?${f.join("|")} ?={3,})`),`
$1`);let c=Object.values(d).every(r=>r.every(e=>e.result&&"remove"in e.result)),s=`Handled ${n.total} request${n.total>1?"s":""}: ${Object.entries(n.remove).length>0?`Removed ${Object.entries(n.remove).map(([r,e])=>`${e.map(i=>`[[${i.original}]]`).join(", ")} as ${r.toLowerCase()}`).join(", ")}`:""}${Object.entries(n.move).length>0?`${Object.entries(n.remove).length>0?", ":""}Moved ${Object.entries(n.move).map(([r,e])=>`${e.map(i=>`[[${i.original}]]`).join(", ")} to "${r}"`).join(", ")}`:""}${c?" (no requests remain)":""} (via [[User:Eejit43/scripts/rmtr-helper|script]])`;await x.edit(mw.config.get("wgPageName"),()=>({text:t,summary:s})),mw.notify(`Successfully handled ${n.total} requests, reloading...`,{type:"success"}),L=!1,window.location.reload()});let b=document.createElement("span");b.id="rmtr-review-loading",b.style.display="none",y.append(b),w.append(y),mw.util.$content[0].prepend(w),w.scrollIntoView()})});async function I(){return(await x.get({action:"query",formatversion:"2",prop:"revisions",rvprop:["content","ids"],rvslots:"main",titles:mw.config.get("wgPageName")})).query.pages[0].revisions[0]}})();

// </pre>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vdXRpbGl0eS50cyIsICIuLi9zdHlsZXMvcm10ci1oZWxwZXIuY3NzIiwgIi4uL3NjcmlwdHMvcm10ci1oZWxwZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB0eXBlIHsgQXBpUXVlcnlBbGxNZXNzYWdlc1BhcmFtcywgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMgfSBmcm9tICd0eXBlcy1tZWRpYXdpa2ktYXBpJztcbmltcG9ydCB0eXBlIHsgQWxsTWVzc2FnZXNSZXN1bHQsIFBhZ2VSZXZpc2lvbnNSZXN1bHQgfSBmcm9tICcuL2dsb2JhbC10eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgbXcuQXBpKCk7XG5cbi8qKlxuICogRmV0Y2hlcyB0aGUgY29udGVudCBvZiBhIGdpdmVuIHBhZ2UuXG4gKiBAcGFyYW0gdGl0bGUgVGhlIHRpdGxlIHRvIGZldGNoLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFnZUNvbnRlbnQodGl0bGU6IHN0cmluZykge1xuICAgIHJldHVybiAoXG4gICAgICAgIChhd2FpdCBhcGkuZ2V0KHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgIHByb3A6ICdyZXZpc2lvbnMnLFxuICAgICAgICAgICAgcnZwcm9wOiAnY29udGVudCcsXG4gICAgICAgICAgICBydnNsb3RzOiAnbWFpbicsXG4gICAgICAgICAgICB0aXRsZXM6IHRpdGxlLFxuICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcykpIGFzIFBhZ2VSZXZpc2lvbnNSZXN1bHRcbiAgICApLnF1ZXJ5LnBhZ2VzWzBdLnJldmlzaW9ucz8uWzBdLnNsb3RzLm1haW4uY29udGVudC50cmltKCk7XG59XG5cbi8qKlxuICogR2V0cyBhIHN5c3RlbSBtZXNzYWdlLlxuICogQHBhcmFtIG1lc3NhZ2VOYW1lIFRoZSBuYW1lIG9mIHRoZSBzeXN0ZW0gbWVzc2FnZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN5c3RlbU1lc3NhZ2UobWVzc2FnZU5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiAoXG4gICAgICAgIChhd2FpdCBhcGkuZ2V0KHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgIG1ldGE6ICdhbGxtZXNzYWdlcycsXG4gICAgICAgICAgICBhbW1lc3NhZ2VzOiBtZXNzYWdlTmFtZSxcbiAgICAgICAgICAgIGFtbGFuZzogbXcuY29uZmlnLmdldCgnd2dDb250ZW50TGFuZ3VhZ2UnKSxcbiAgICAgICAgfSBzYXRpc2ZpZXMgQXBpUXVlcnlBbGxNZXNzYWdlc1BhcmFtcykpIGFzIEFsbE1lc3NhZ2VzUmVzdWx0XG4gICAgKS5xdWVyeT8uYWxsbWVzc2FnZXNbMF0uY29udGVudDtcbn1cblxuLyoqXG4gKiBJbnRlcnBvbGF0ZXMgYSBzeXN0ZW0gbWVzc2FnZSB3aXRoIHZhbHVlcy5cbiAqIEBwYXJhbSBtZXNzYWdlIFRoZSBzeXN0ZW0gbWVzc2FnZSB0byBpbnRlcnBvbGF0ZS5cbiAqIEBwYXJhbSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBpbnRlcnBvbGF0ZSBpbnRvIHRoZSBtZXNzYWdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJwb2xhdGVTeXN0ZW1NZXNzYWdlKG1lc3NhZ2U6IHN0cmluZywgdmFsdWVzOiBzdHJpbmdbXSkge1xuICAgIGxldCByZXN1bHQgPSBtZXNzYWdlO1xuXG4gICAgZm9yIChjb25zdCBbaW5kZXgsIHZhbHVlXSBvZiB2YWx1ZXMuZW50cmllcygpKSByZXN1bHQgPSByZXN1bHQucmVwbGFjZUFsbChgJCR7aW5kZXggKyAxfWAsIHZhbHVlKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG4iLCAiI3JtdHItcmV2aWV3LXJlc3VsdHttYXJnaW46MWVtO3BhZGRpbmc6Mi41JTtjb2xvcjojMjAyMTIyO2ZvbnQtc2l6ZTouOGVtO2JhY2tncm91bmQtY29sb3I6I2Y1ZjVmNTtib3JkZXI6MXB4IHNvbGlkICNhMmE5YjE7Ym9yZGVyLXJhZGl1czoycHh9I3JtdHItcmV2aWV3LWhlYWRlcnttYXJnaW4tYm90dG9tOi41ZW07Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZToxLjVlbX0ucm10ci1yZXZpZXctaGVhZGVye21hcmdpbjouNWVtIDA7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZToxZW19LnJtdHItcmV2aWV3LWludmFsaWQtd2FybmluZ3tjb2xvcjojY2Q1YzVjO2ZvbnQtd2VpZ2h0OjcwMH0ucm10ci1yZXZpZXctcmVxdWVzdC1jaGVja2JveHttYXJnaW46M3B4IDNweCAwfS5ybXRyLXJldmlldy1zZWN0aW9uLWNvbnRlbnR7bWFyZ2luLWxlZnQ6MWVtO2xpbmUtaGVpZ2h0OjEuM30ucm10ci1yZXZpZXctc2VjdGlvbi1jb250ZW50IGxpK2xpe21hcmdpbi10b3A6LjRyZW07bWFyZ2luLWJvdHRvbTouNHJlbX0jcm10ci1yZXZpZXctc3VibWl0e21hcmdpbi10b3A6LjJlbX0jcm10ci1yZXZpZXctbG9hZGluZ3tkaXNwbGF5OmlubGluZS1ibG9jaztoZWlnaHQ6MS4zZW07bWFyZ2luLXRvcDotLjNlbTttYXJnaW4tbGVmdDozcHg7bGluZS1oZWlnaHQ6MS41ZW07dmVydGljYWwtYWxpZ246dGV4dC1ib3R0b207b3ZlcmZsb3c6aGlkZGVufSNybXRyLXJldmlldy1sb2FkaW5nOmFmdGVye2Rpc3BsYXk6aW5saW5lLXRhYmxlO3RleHQtYWxpZ246bGVmdDt3aGl0ZS1zcGFjZTpwcmU7YW5pbWF0aW9uOnJtdHItcmV2aWV3LWxvYWRpbmcgLjhzIHN0ZXBzKDEwKSBpbmZpbml0ZTtjb250ZW50OlwiXFwyODBiXFxhXFwyODE5XFxhXFwyODM5XFxhXFwyODM4XFxhXFwyODNjXFxhXFwyODM0XFxhXFwyODI2XFxhXFwyODI3XFxhXFwyODA3XFxhXFwyODBmXCJ9QGtleWZyYW1lcyBybXRyLXJldmlldy1sb2FkaW5ne3Rve3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0xNWVtKX19XG4iLCAiaW1wb3J0IHR5cGUgeyBQYWdlUmV2aXNpb25zUmVzdWx0IH0gZnJvbSAnQC9nbG9iYWwtdHlwZXMnO1xuaW1wb3J0IHsgYXBpIH0gZnJvbSAnQC91dGlsaXR5JztcbmltcG9ydCBjc3NDb250ZW50IGZyb20gJ0BzdHlsZXMvcm10ci1oZWxwZXIuY3NzJyB3aXRoIHsgdHlwZTogJ2NzcycgfTtcbmltcG9ydCB0eXBlIHsgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMgfSBmcm9tICd0eXBlcy1tZWRpYXdpa2ktYXBpJztcblxubXcubG9hZGVyLnVzaW5nKFsnbWVkaWF3aWtpLnV0aWwnXSwgKCkgPT4ge1xuICAgIGlmIChtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJykgIT09ICdXaWtpcGVkaWE6UmVxdWVzdGVkX21vdmVzL1RlY2huaWNhbF9yZXF1ZXN0cycpIHJldHVybjtcblxuICAgIG13LnV0aWwuYWRkQ1NTKGNzc0NvbnRlbnQpO1xuXG4gICAgY29uc3QgbmFtZXNwYWNlcyA9IG13LmNvbmZpZy5nZXQoJ3dnTmFtZXNwYWNlSWRzJyk7XG5cbiAgICBsZXQgZGlzcGxheWVkID0gZmFsc2U7XG5cbiAgICBjb25zdCBsaW5rID0gbXcudXRpbC5hZGRQb3J0bGV0TGluayhcbiAgICAgICAgbXcuY29uZmlnLmdldCgnc2tpbicpID09PSAnbWluZXJ2YScgPyAncC10YicgOiAncC1jYWN0aW9ucycsXG4gICAgICAgICcjJyxcbiAgICAgICAgJ1JldmlldyBtb3ZlIHJlcXVlc3RzJyxcbiAgICAgICAgJ3Jldmlldy1ybXRyLXJlcXVlc3RzJyxcbiAgICApITtcblxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBsZXQgc2hvdWxkU3RvcFRhYkNsb3N1cmUgPSB0cnVlO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkU3RvcFRhYkNsb3N1cmUpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChkaXNwbGF5ZWQpIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcm10ci1yZXZpZXctcmVzdWx0Jyk/LnNjcm9sbEludG9WaWV3KCk7XG4gICAgICAgIGVsc2UgZGlzcGxheWVkID0gdHJ1ZTtcblxuICAgICAgICBjb25zdCBwYWdlUmV2aXNpb24gPSBhd2FpdCBnZXRQYWdlUmV2aXNpb24oKTtcblxuICAgICAgICBjb25zdCByZXZJZCA9IHBhZ2VSZXZpc2lvbi5yZXZpZDtcbiAgICAgICAgY29uc3QgcGFnZUNvbnRlbnQgPSBwYWdlUmV2aXNpb24uc2xvdHMubWFpbi5jb250ZW50O1xuXG4gICAgICAgIGNvbnN0IHNlY3Rpb25zID0gW1xuICAgICAgICAgICAgJ1VuY29udHJvdmVyc2lhbCB0ZWNobmljYWwgcmVxdWVzdHMnLFxuICAgICAgICAgICAgJ1JlcXVlc3RzIHRvIHJldmVydCB1bmRpc2N1c3NlZCBtb3ZlcycsXG4gICAgICAgICAgICAnQ29udGVzdGVkIHRlY2huaWNhbCByZXF1ZXN0cycsXG4gICAgICAgICAgICAnQWRtaW5pc3RyYXRvciBuZWVkZWQnLFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRNb3ZlU2VjdGlvbiA9IHNlY3Rpb25zWzJdO1xuICAgICAgICBjb25zdCBmYWxsYmFja0RlZmF1bHRNb3ZlU2VjdGlvbiA9IHNlY3Rpb25zWzNdO1xuXG4gICAgICAgIGludGVyZmFjZSBSZXF1ZXN0IHtcbiAgICAgICAgICAgIHNpZzogc3RyaW5nO1xuICAgICAgICAgICAgcmVxdWVzdGVyPzogc3RyaW5nO1xuICAgICAgICAgICAgcmVhc29uOiBzdHJpbmc7XG4gICAgICAgICAgICBmdWxsOiBzdHJpbmc7XG4gICAgICAgICAgICBvcmlnaW5hbDogc3RyaW5nO1xuICAgICAgICAgICAgZGVzdGluYXRpb246IHN0cmluZztcbiAgICAgICAgICAgIGVsZW1lbnQ6IEhUTUxMSUVsZW1lbnQ7XG4gICAgICAgICAgICByZXN1bHQ/OiBSZXF1ZXN0UmVzdWx0TW92ZSB8IFJlcXVlc3RSZXN1bHRSZW1vdmU7XG4gICAgICAgIH1cblxuICAgICAgICBpbnRlcmZhY2UgUmVxdWVzdFJlc3VsdE1vdmUge1xuICAgICAgICAgICAgbW92ZTogYm9vbGVhbjtcbiAgICAgICAgICAgIHNlY3Rpb246IHN0cmluZztcbiAgICAgICAgICAgIHJlYXNvbj86IHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyZmFjZSBSZXF1ZXN0UmVzdWx0UmVtb3ZlIHtcbiAgICAgICAgICAgIHJlbW92ZTogYm9vbGVhbjtcbiAgICAgICAgICAgIHJlYXNvbjogc3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWxsUmVxdWVzdHM6IFJlY29yZDxzdHJpbmcsIFJlcXVlc3RbXT4gPSB7fTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUGFyc2VzIHRoZSBwYXJhbWV0ZXJzIG9mIGEgZ2l2ZW4gV2lraXRleHQgdGVtcGxhdGUuXG4gICAgICAgICAqIEBwYXJhbSB0ZW1wbGF0ZSBUaGUgdGVtcGxhdGUgdG8gcGFyc2UuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBwYXJzZVRlbXBsYXRlUGFyYW1ldGVycyh0ZW1wbGF0ZTogc3RyaW5nKSB7XG4gICAgICAgICAgICBjb25zdCByYXdQYXJhbWV0ZXJzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgICAgICBjb25zdCBpZ25vcmVkU3RhcnRTeW1ib2xzID0gWydbJywgJ3snXTtcbiAgICAgICAgICAgIGNvbnN0IGlnbm9yZWRFbmRTeW1ib2xzID0gWyddJywgJ30nXTtcblxuICAgICAgICAgICAgbGV0IGluc2lkZUxpbmtPclRlbXBsYXRlID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRleHQgPSAnJztcblxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRlbXBsYXRlLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IHRlbXBsYXRlW2luZGV4XTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2hhcmFjdGVyOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0ZW1wbGF0ZVtpbmRleCArIDFdO1xuXG4gICAgICAgICAgICAgICAgaWYgKChjaGFyYWN0ZXIgPT09ICd8JyAmJiAhaW5zaWRlTGlua09yVGVtcGxhdGUpIHx8IGluZGV4ID09PSB0ZW1wbGF0ZS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyYWN0ZXIgIT09ICd8JykgY3VycmVudFRleHQgKz0gY2hhcmFjdGVyO1xuXG4gICAgICAgICAgICAgICAgICAgIHJhd1BhcmFtZXRlcnMucHVzaChjdXJyZW50VGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUZXh0ID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3VycmVudFRleHQgKz0gY2hhcmFjdGVyO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlnbm9yZWRTdGFydFN5bWJvbHMuc29tZSgoc3ltYm9sKSA9PiBzeW1ib2wgPT09IGNoYXJhY3RlciAmJiBzeW1ib2wgPT09IG5leHRDaGFyYWN0ZXIpKSBpbnNpZGVMaW5rT3JUZW1wbGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaWdub3JlZEVuZFN5bWJvbHMuc29tZSgoc3ltYm9sKSA9PiBzeW1ib2wgPT09IGNoYXJhY3RlciAmJiBzeW1ib2wgPT09IG5leHRDaGFyYWN0ZXIpKSBpbnNpZGVMaW5rT3JUZW1wbGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+ID0ge307XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBwYXJhbWV0ZXJdIG9mIHJhd1BhcmFtZXRlcnMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BsaXRQYXJhbWV0ZXIgPSBwYXJhbWV0ZXIuc3BsaXQoJz0nKS5tYXAoKHZhbHVlKSA9PiB2YWx1ZS50cmltKCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNwbGl0UGFyYW1ldGVyLmxlbmd0aCA9PT0gMSkgc3BsaXRQYXJhbWV0ZXIudW5zaGlmdCgoaW5kZXggKyAxKS50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNbc3BsaXRQYXJhbWV0ZXIuc2hpZnQoKSFdID0gc3BsaXRQYXJhbWV0ZXIuam9pbignPScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcGFyYW1ldGVycztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBzZWN0aW9ucykge1xuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkNvbnRlbnQgPSBwYWdlQ29udGVudFxuICAgICAgICAgICAgICAgIC5zcGxpdChuZXcgUmVnRXhwKGA9ezMsfSA/JHtzZWN0aW9ufSA/PXszLH1gKSlbMV1cbiAgICAgICAgICAgICAgICAuc3BsaXQoLz17Myx9L20pWzBdXG4gICAgICAgICAgICAgICAgLnRyaW0oKTtcblxuICAgICAgICAgICAgY29uc3QgbWF0Y2hlZFJlcXVlc3RzID0gc2VjdGlvbkNvbnRlbnQubWF0Y2goLyg/OlxcKiA/XFxuKT9bICo6XSp7e3JtYXNzaXN0XFwvY29yZS4rPyg/PVsgKjpdKnt7cm1hc3Npc3RcXC9jb3JlfCQpL2dpcyk7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaGVkUmVxdWVzdHMpXG4gICAgICAgICAgICAgICAgYWxsUmVxdWVzdHNbc2VjdGlvbl0gPSBtYXRjaGVkUmVxdWVzdHMubWFwKChyZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QgPSByZXF1ZXN0LnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gcGFyc2VUZW1wbGF0ZVBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnJlcGxhY2VBbGwoLyg/OlxcKiA/XFxuKT9bICo6XSp7e3JtYXNzaXN0XFwvY29yZVxccypcXHx8fX0oPyFbXlxcbl0qfX0pLiovZ2lzLCAnJyksXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5mdWxsID0gcmVxdWVzdDtcblxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLm9yaWdpbmFsID0gcGFyYW1ldGVyc1sxXT8ucmVwbGFjZSgvXlxcWysvLCAnJykucmVwbGFjZSgvXSskLywgJycpID8/ICdVTktOT1dOJztcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5kZXN0aW5hdGlvbiA9IHBhcmFtZXRlcnNbMl0/LnJlcGxhY2UoL15cXFsrLywgJycpLnJlcGxhY2UoL10rJC8sICcnKSA/PyAnVU5LTk9XTic7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5yZXF1ZXN0ZXIgPz89IHBhcmFtZXRlcnMuc2lnPy5tYXRjaCgvXFxbXFxbVXNlcjooLio/KShcXHx8XV0pLyk/LlsxXS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtZXRlcnNbMV07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwYXJhbWV0ZXJzWzJdO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbWV0ZXJzIGFzIHVua25vd24gYXMgUmVxdWVzdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFsbFJlcXVlc3RzW3NlY3Rpb25dID0gW107XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGFsbFJlcXVlc3RzKS5tYXAoYXN5bmMgKFssIHJlcXVlc3RzXSkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0cy5tYXAoYXN5bmMgKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG13T2xkVGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dChyZXF1ZXN0Lm9yaWdpbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG13TmV3VGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dChyZXF1ZXN0LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtd09sZFRpdGxlKSByZXR1cm4gbXcubm90aWZ5KGBJbnZhbGlkIHRpdGxlIFwiJHtyZXF1ZXN0Lm9yaWdpbmFsfVwiIWAsIHsgdHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbXdOZXdUaXRsZSkgcmV0dXJuIG13Lm5vdGlmeShgSW52YWxpZCB0aXRsZSBcIiR7cmVxdWVzdC5kZXN0aW5hdGlvbn1cIiFgLCB7IHR5cGU6ICdlcnJvcicgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkVGl0bGUgPSAhL1sjPD5bXFxde3x9XS8udGVzdChyZXF1ZXN0LmRlc3RpbmF0aW9uKSAmJiBtd05ld1RpdGxlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkVGl0bGVXYXJuaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRpdGxlV2FybmluZy5jbGFzc0xpc3QuYWRkKCdybXRyLXJldmlldy1pbnZhbGlkLXdhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRUaXRsZVdhcm5pbmcudGV4dENvbnRlbnQgPSBgSW52YWxpZCB0aXRsZSBcIiR7cmVxdWVzdC5kZXN0aW5hdGlvbn1cIiFgO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxpZE5hbWVzcGFjZSA9ICFbbmFtZXNwYWNlcy5maWxlLCBuYW1lc3BhY2VzLmNhdGVnb3J5XS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuYW1lc3BhY2UpID0+IG13T2xkVGl0bGUuZ2V0TmFtZXNwYWNlSWQoKSA9PT0gbmFtZXNwYWNlIHx8IG13TmV3VGl0bGUuZ2V0TmFtZXNwYWNlSWQoKSA9PT0gbmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZE5hbWVzcGFjZVdhcm5pbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkTmFtZXNwYWNlV2FybmluZy5jbGFzc0xpc3QuYWRkKCdybXRyLXJldmlldy1pbnZhbGlkLXdhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWROYW1lc3BhY2VXYXJuaW5nLnRleHRDb250ZW50ID0gYFdhcm5pbmc6IG9yaWdpbmFsIG9yIGRlc3RpbmF0aW9uIHBhZ2UgaXMgaW4gbmFtZXNwYWNlIFwiJHttd05ld1RpdGxlLmdldE5hbWVzcGFjZUlkKCkgPT09IG5hbWVzcGFjZXMuZmlsZSA/ICdmaWxlJyA6ICdjYXRlZ29yeSd9XCIhYDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkV2lraXRleHQgPSBhd2FpdCBhcGkucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFtbOiR7cmVxdWVzdC5vcmlnaW5hbH1dXSBcdTIxOTIgJHt2YWxpZFRpdGxlID8gYFtbOiR7cmVxdWVzdC5kZXN0aW5hdGlvbn1dXWAgOiBpbnZhbGlkVGl0bGVXYXJuaW5nLm91dGVySFRNTH0gcmVxdWVzdGVkIGJ5ICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVxdWVzdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG13LnV0aWwuaXNJUEFkZHJlc3MocmVxdWVzdC5yZXF1ZXN0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgW1tTcGVjaWFsOkNvbnRyaWJ1dGlvbnMvJHtyZXF1ZXN0LnJlcXVlc3Rlcn18JHtyZXF1ZXN0LnJlcXVlc3Rlcn1dXWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGBbW1VzZXI6JHtyZXF1ZXN0LnJlcXVlc3Rlcn18JHtyZXF1ZXN0LnJlcXVlc3Rlcn1dXWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKC8oXFxbezJ9U3BlY2lhbDpDb250cmlidXRpb25zXFwvKC4qPylcXHxcXDJdezJ9KS8uZXhlYyhyZXF1ZXN0LnNpZyk/LlsxXSA/PyAnKHVua25vd24pJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdpdGggcmVhc29uaW5nIFwiJHtyZXF1ZXN0LnJlYXNvbn1cImAsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkSHRtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocGFyc2VkV2lraXRleHQsICd0ZXh0L2h0bWwnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVsZW1lbnQuaW5uZXJIVE1MID0gcGFyc2VkSHRtbC5xdWVyeVNlbGVjdG9yKCdkaXYubXctcGFyc2VyLW91dHB1dCcpIS5maXJzdEVsZW1lbnRDaGlsZCEuaW5uZXJIVE1MITtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZE5hbWVzcGFjZSkgcmVxdWVzdEVsZW1lbnQuYXBwZW5kKGludmFsaWROYW1lc3BhY2VXYXJuaW5nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5lbGVtZW50ID0gcmVxdWVzdEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBvdXRwdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG91dHB1dEVsZW1lbnQuaWQgPSAncm10ci1yZXZpZXctcmVzdWx0JztcblxuICAgICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaGVhZGVyLmlkID0gJ3JtdHItcmV2aWV3LWhlYWRlcic7XG4gICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9ICdUZWNobmljYWwgbW92ZSByZXF1ZXN0cyByZXZpZXcnO1xuXG4gICAgICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kKGhlYWRlcik7XG5cbiAgICAgICAgZm9yIChjb25zdCBbc2VjdGlvbkluZGV4LCBbc2VjdGlvbiwgcmVxdWVzdHNdXSBvZiBPYmplY3QuZW50cmllcyhhbGxSZXF1ZXN0cykuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBzZWN0aW9uSGVhZGVyLmNsYXNzTGlzdC5hZGQoJ3JtdHItcmV2aWV3LWhlYWRlcicpO1xuICAgICAgICAgICAgc2VjdGlvbkhlYWRlci50ZXh0Q29udGVudCA9IHNlY3Rpb247XG5cbiAgICAgICAgICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kKHNlY3Rpb25IZWFkZXIpO1xuXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgc2VjdGlvbkNvbnRlbnQuY2xhc3NMaXN0LmFkZCgncm10ci1yZXZpZXctc2VjdGlvbi1jb250ZW50Jyk7XG5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub1JlcXVlc3RzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgbm9SZXF1ZXN0cy50ZXh0Q29udGVudCA9ICdObyByZXF1ZXN0cyBpbiB0aGlzIHNlY3Rpb24nO1xuXG4gICAgICAgICAgICAgICAgc2VjdGlvbkNvbnRlbnQuYXBwZW5kKG5vUmVxdWVzdHMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0c0xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbcmVxdWVzdEluZGV4LCByZXF1ZXN0XSBvZiByZXF1ZXN0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdEVsZW1lbnQgPSByZXF1ZXN0LmVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlUmVxdWVzdENoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdENoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0Q2hlY2tib3guY2xhc3NMaXN0LmFkZCgncm10ci1yZXZpZXctcmVxdWVzdC1jaGVja2JveCcpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0Q2hlY2tib3guaWQgPSBgcm10ci1yZXZpZXctcmVtb3ZlLXJlcXVlc3QtJHtzZWN0aW9uSW5kZXh9LSR7cmVxdWVzdEluZGV4fWA7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVJlcXVlc3RDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlUmVxdWVzdENoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxSZXF1ZXN0c1tzZWN0aW9uXVtyZXF1ZXN0SW5kZXhdLnJlc3VsdCA9IHsgcmVtb3ZlOiB0cnVlLCByZWFzb246IHJlbW92ZVJlcXVlc3REcm9wZG93bi52YWx1ZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVJlcXVlc3RFeHRyYUlucHV0cy5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFsbFJlcXVlc3RzW3NlY3Rpb25dW3JlcXVlc3RJbmRleF0ucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVJlcXVlc3RFeHRyYUlucHV0cy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25DaGVja2JveC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVSZXF1ZXN0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0TGFiZWwuaHRtbEZvciA9IGBybXRyLXJldmlldy1yZW1vdmUtcmVxdWVzdC0ke3NlY3Rpb25JbmRleH0tJHtyZXF1ZXN0SW5kZXh9YDtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdExhYmVsLnRleHRDb250ZW50ID0gJ1JlbW92ZSByZXF1ZXN0JztcblxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0RWxlbWVudC5hcHBlbmQocmVtb3ZlUmVxdWVzdENoZWNrYm94KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVsZW1lbnQuYXBwZW5kKHJlbW92ZVJlcXVlc3RMYWJlbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlUmVxdWVzdEV4dHJhSW5wdXRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0RXh0cmFJbnB1dHMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0RXh0cmFJbnB1dHMuYXBwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgYXMgJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZVJlcXVlc3REcm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbiA9PT0gJ0NvbnRlc3RlZCB0ZWNobmljYWwgcmVxdWVzdHMnKSByZW1vdmVSZXF1ZXN0RHJvcGRvd24udmFsdWUgPSAnQ29udGVzdGVkJztcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdERyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIChhbGxSZXF1ZXN0c1tzZWN0aW9uXVtyZXF1ZXN0SW5kZXhdLnJlc3VsdCBhcyBSZXF1ZXN0UmVzdWx0UmVtb3ZlKS5yZWFzb24gPSByZW1vdmVSZXF1ZXN0RHJvcGRvd24udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZVJlcXVlc3REcm9wZG93bk9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZXN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0FscmVhZHkgZG9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnSW52YWxpZCBwYWdlIG5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0luY29ycmVjdCB2ZW51ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnV2l0aGRyYXduJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdTdGFsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnTm90IGRvbmUnLFxuICAgICAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIHJlbW92ZVJlcXVlc3REcm9wZG93bk9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQudmFsdWUgPSBvcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gb3B0aW9uO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0RHJvcGRvd24uYXBwZW5kKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdEV4dHJhSW5wdXRzLmFwcGVuZChyZW1vdmVSZXF1ZXN0RHJvcGRvd24pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RFbGVtZW50LmFwcGVuZChyZW1vdmVSZXF1ZXN0RXh0cmFJbnB1dHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN3aXRjaFNlY3Rpb25DaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25DaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ3JtdHItcmV2aWV3LXJlcXVlc3QtY2hlY2tib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkNoZWNrYm94LmlkID0gYHJtdHItcmV2aWV3LW1vdmUtcmVxdWVzdC0ke3NlY3Rpb25JbmRleH0tJHtyZXF1ZXN0SW5kZXh9YDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzd2l0Y2hTZWN0aW9uQ2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhbGxSZXF1ZXN0c1tzZWN0aW9uXVtyZXF1ZXN0SW5kZXhdLnJlc3VsdCBhcyBSZXF1ZXN0UmVzdWx0TW92ZSkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb246IHN3aXRjaFNlY3Rpb25Ecm9wZG93bi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25FeHRyYUlucHV0cy5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdENoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFsbFJlcXVlc3RzW3NlY3Rpb25dW3JlcXVlc3RJbmRleF0ucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25FeHRyYUlucHV0cy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVJlcXVlc3RDaGVja2JveC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzd2l0Y2hTZWN0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uTGFiZWwuaHRtbEZvciA9IGBybXRyLXJldmlldy1tb3ZlLXJlcXVlc3QtJHtzZWN0aW9uSW5kZXh9LSR7cmVxdWVzdEluZGV4fWA7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25MYWJlbC50ZXh0Q29udGVudCA9ICdTd2l0Y2ggc2VjdGlvbic7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVsZW1lbnQuYXBwZW5kKHN3aXRjaFNlY3Rpb25DaGVja2JveCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RFbGVtZW50LmFwcGVuZChzd2l0Y2hTZWN0aW9uTGFiZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN3aXRjaFNlY3Rpb25FeHRyYUlucHV0cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkV4dHJhSW5wdXRzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkV4dHJhSW5wdXRzLmFwcGVuZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnIHRvICcpKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzd2l0Y2hTZWN0aW9uRHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkRyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIChhbGxSZXF1ZXN0c1tzZWN0aW9uXVtyZXF1ZXN0SW5kZXhdLnJlc3VsdCBhcyBSZXF1ZXN0UmVzdWx0TW92ZSkuc2VjdGlvbiA9IHN3aXRjaFNlY3Rpb25Ecm9wZG93bi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygc2VjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb24gPT09IHNlY3Rpb24pIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LnNlbGVjdGVkID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24gPT09IChzZWN0aW9uID09PSBkZWZhdWx0TW92ZVNlY3Rpb24gPyBmYWxsYmFja0RlZmF1bHRNb3ZlU2VjdGlvbiA6IGRlZmF1bHRNb3ZlU2VjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LnZhbHVlID0gb3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkRyb3Bkb3duLmFwcGVuZChvcHRpb25FbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25FeHRyYUlucHV0cy5hcHBlbmQoc3dpdGNoU2VjdGlvbkRyb3Bkb3duKTtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMuYXBwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgd2l0aCByZWFzb25pbmcgJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN3aXRjaFNlY3Rpb25SZWFzb25pbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uUmVhc29uaW5nLnR5cGUgPSAndGV4dCc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25SZWFzb25pbmcuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoYWxsUmVxdWVzdHNbc2VjdGlvbl1bcmVxdWVzdEluZGV4XS5yZXN1bHQgYXMgUmVxdWVzdFJlc3VsdFJlbW92ZSkucmVhc29uID0gc3dpdGNoU2VjdGlvblJlYXNvbmluZy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkV4dHJhSW5wdXRzLmFwcGVuZChzd2l0Y2hTZWN0aW9uUmVhc29uaW5nKTtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMuYXBwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgKG9wdGlvbmFsLCBhdXRvbWF0aWNhbGx5IHBpbmdzIHJlcXVlc3RvciBhbmQgc2lnbnMpJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RFbGVtZW50LmFwcGVuZChzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RzTGlzdC5hcHBlbmQocmVxdWVzdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNlY3Rpb25Db250ZW50LmFwcGVuZChyZXF1ZXN0c0xpc3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXRFbGVtZW50LmFwcGVuZChzZWN0aW9uQ29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc3VibWl0QnV0dG9uLmlkID0gJ3JtdHItcmV2aWV3LXN1Ym1pdCc7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTdWJtaXQnO1xuICAgICAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdQYWdlUmV2aXNpb24gPSBhd2FpdCBnZXRQYWdlUmV2aXNpb24oKTtcblxuICAgICAgICAgICAgaWYgKG5ld1BhZ2VSZXZpc2lvbi5yZXZpZCAhPT0gcmV2SWQpIHJldHVybiBtdy5ub3RpZnkoJ0FuIGVkaXQgY29uZmxpY3Qgb2NjdXJyZWQsIHBsZWFzZSBzdGFydCBvdmVyIScsIHsgdHlwZTogJ2Vycm9yJyB9KTtcblxuICAgICAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGxvYWRpbmdTcGlubmVyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcblxuICAgICAgICAgICAgbGV0IGVuZFJlc3VsdCA9IHBhZ2VDb250ZW50O1xuXG4gICAgICAgICAgICBpbnRlcmZhY2UgQWxsQ2hhbmdlcyB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlOiBSZWNvcmQ8c3RyaW5nLCBSZXF1ZXN0W10+O1xuICAgICAgICAgICAgICAgIG1vdmU6IFJlY29yZDxzdHJpbmcsIFJlcXVlc3RbXT47XG4gICAgICAgICAgICAgICAgdG90YWw6IG51bWJlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY2hhbmdlczogQWxsQ2hhbmdlcyA9IHsgcmVtb3ZlOiB7fSwgbW92ZToge30sIHRvdGFsOiAwIH07XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBPYmplY3QudmFsdWVzKGFsbFJlcXVlc3RzKSlcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2Ygc2VjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3QucmVzdWx0KSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJ3JlbW92ZScgaW4gcmVxdWVzdC5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFJlc3VsdCA9IGVuZFJlc3VsdC5yZXBsYWNlKHJlcXVlc3QuZnVsbCArICdcXG4nLCAnJykucmVwbGFjZShyZXF1ZXN0LmZ1bGwsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcXVlc3QucmVzdWx0LnJlYXNvbiBpbiBjaGFuZ2VzLnJlbW92ZSkpIGNoYW5nZXMucmVtb3ZlW3JlcXVlc3QucmVzdWx0LnJlYXNvbl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMucmVtb3ZlW3JlcXVlc3QucmVzdWx0LnJlYXNvbl0ucHVzaChyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMudG90YWwrKztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgnbW92ZScgaW4gcmVxdWVzdC5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25UaXRsZUFmdGVyID0gc2VjdGlvbnNbc2VjdGlvbnMuaW5kZXhPZihyZXF1ZXN0LnJlc3VsdC5zZWN0aW9uKSArIDFdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRSZXN1bHQgPSBlbmRSZXN1bHQucmVwbGFjZShyZXF1ZXN0LmZ1bGwgKyAnXFxuJywgJycpLnJlcGxhY2UocmVxdWVzdC5mdWxsLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRSZXN1bHQgPSBlbmRSZXN1bHQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKGAoXFxuP1xcbj8oPzo9ezMsfSA/JHtzZWN0aW9uVGl0bGVBZnRlcn0gPz17Myx9fCQpKWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcXG4ke3JlcXVlc3QuZnVsbH0ke3JlcXVlc3QucmVzdWx0LnJlYXNvbiA/IGBcXG46OiAke3JlcXVlc3QucmVxdWVzdGVyICYmIHJlcXVlc3QucmVxdWVzdGVyLmxlbmd0aCA+IDAgPyAobXcudXRpbC5pc0lQQWRkcmVzcyhyZXF1ZXN0LnJlcXVlc3RlcikgPyAnJyA6IGBAW1tVc2VyOiR7cmVxdWVzdC5yZXF1ZXN0ZXJ9fCR7cmVxdWVzdC5yZXF1ZXN0ZXJ9XV0gYCkgOiAnJ30gJHtyZXF1ZXN0LnJlc3VsdC5yZWFzb259IH5+fn5gIDogJyd9JDFgLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcXVlc3QucmVzdWx0LnNlY3Rpb24gaW4gY2hhbmdlcy5tb3ZlKSkgY2hhbmdlcy5tb3ZlW3JlcXVlc3QucmVzdWx0LnNlY3Rpb25dID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMubW92ZVtyZXF1ZXN0LnJlc3VsdC5zZWN0aW9uXS5wdXNoKHJlcXVlc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy50b3RhbCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hhbmdlcy50b3RhbCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxvYWRpbmdTcGlubmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG13Lm5vdGlmeSgnTm8gY2hhbmdlcyB0byBtYWtlIScsIHsgdHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW5kUmVzdWx0ID0gZW5kUmVzdWx0LnJlcGxhY2VBbGwobmV3IFJlZ0V4cChgXFxuezIsfSg9ezMsfSA/JHtzZWN0aW9ucy5qb2luKCd8Jyl9ID89ezMsfSlgKSwgJ1xcbiQxJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vUmVtYWluaW5nID0gT2JqZWN0LnZhbHVlcyhhbGxSZXF1ZXN0cykuZXZlcnkoKHNlY3Rpb24pID0+XG4gICAgICAgICAgICAgICAgc2VjdGlvbi5ldmVyeSgocmVxdWVzdCkgPT4gcmVxdWVzdC5yZXN1bHQgJiYgJ3JlbW92ZScgaW4gcmVxdWVzdC5yZXN1bHQpLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgZWRpdFN1bW1hcnkgPSBgSGFuZGxlZCAke2NoYW5nZXMudG90YWx9IHJlcXVlc3Qke2NoYW5nZXMudG90YWwgPiAxID8gJ3MnIDogJyd9OiAke1xuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGNoYW5nZXMucmVtb3ZlKS5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgID8gYFJlbW92ZWQgJHtPYmplY3QuZW50cmllcyhjaGFuZ2VzLnJlbW92ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoW3JlYXNvbiwgcGFnZXNdKSA9PiBgJHtwYWdlcy5tYXAoKHBhZ2UpID0+IGBbWyR7cGFnZS5vcmlnaW5hbH1dXWApLmpvaW4oJywgJyl9IGFzICR7cmVhc29uLnRvTG93ZXJDYXNlKCl9YClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJywgJyl9YFxuICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICB9JHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhjaGFuZ2VzLm1vdmUpLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBgJHtPYmplY3QuZW50cmllcyhjaGFuZ2VzLnJlbW92ZSkubGVuZ3RoID4gMCA/ICcsICcgOiAnJ31Nb3ZlZCAke09iamVjdC5lbnRyaWVzKGNoYW5nZXMubW92ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoW2Rlc3RpbmF0aW9uLCBwYWdlc10pID0+IGAke3BhZ2VzLm1hcCgocGFnZSkgPT4gYFtbJHtwYWdlLm9yaWdpbmFsfV1dYCkuam9pbignLCAnKX0gdG8gXCIke2Rlc3RpbmF0aW9ufVwiYClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJywgJyl9YFxuICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICB9JHtub1JlbWFpbmluZyA/ICcgKG5vIHJlcXVlc3RzIHJlbWFpbiknIDogJyd9ICh2aWEgW1tVc2VyOkVlaml0NDMvc2NyaXB0cy9ybXRyLWhlbHBlcnxzY3JpcHRdXSlgO1xuXG4gICAgICAgICAgICBhd2FpdCBhcGkuZWRpdChtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJyksICgpID0+ICh7IHRleHQ6IGVuZFJlc3VsdCwgc3VtbWFyeTogZWRpdFN1bW1hcnkgfSkpO1xuXG4gICAgICAgICAgICBtdy5ub3RpZnkoYFN1Y2Nlc3NmdWxseSBoYW5kbGVkICR7Y2hhbmdlcy50b3RhbH0gcmVxdWVzdHMsIHJlbG9hZGluZy4uLmAsIHsgdHlwZTogJ3N1Y2Nlc3MnIH0pO1xuXG4gICAgICAgICAgICBzaG91bGRTdG9wVGFiQ2xvc3VyZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGxvYWRpbmdTcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBsb2FkaW5nU3Bpbm5lci5pZCA9ICdybXRyLXJldmlldy1sb2FkaW5nJztcbiAgICAgICAgbG9hZGluZ1NwaW5uZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICBzdWJtaXRCdXR0b24uYXBwZW5kKGxvYWRpbmdTcGlubmVyKTtcblxuICAgICAgICBvdXRwdXRFbGVtZW50LmFwcGVuZChzdWJtaXRCdXR0b24pO1xuXG4gICAgICAgIG13LnV0aWwuJGNvbnRlbnRbMF0ucHJlcGVuZChvdXRwdXRFbGVtZW50KTtcblxuICAgICAgICBvdXRwdXRFbGVtZW50LnNjcm9sbEludG9WaWV3KCk7XG4gICAgfSk7XG59KTtcblxuLyoqXG4gKiBHZXRzIGluZm9ybWF0aW9uIGFib3V0IGEgd2lraSBwYWdlJ3MgbGF0ZXN0IHJldmlzaW9uLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRQYWdlUmV2aXNpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgKGF3YWl0IGFwaS5nZXQoe1xuICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgcHJvcDogJ3JldmlzaW9ucycsXG4gICAgICAgICAgICBydnByb3A6IFsnY29udGVudCcsICdpZHMnXSxcbiAgICAgICAgICAgIHJ2c2xvdHM6ICdtYWluJyxcbiAgICAgICAgICAgIHRpdGxlczogbXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpLFxuICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcykpIGFzIFBhZ2VSZXZpc2lvbnNSZXN1bHQgJiB7IHF1ZXJ5OiB7IHBhZ2VzOiB7IHJldmlzaW9uczogeyByZXZpZDogbnVtYmVyIH1bXSB9W10gfSB9XG4gICAgKS5xdWVyeS5wYWdlc1swXS5yZXZpc2lvbnNbMF07XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7bUJBR08sSUFBTUEsRUFBTSxJQUFJLEdBQUcsSUNIMUIsSUFBQUMsRUFBQTtFQ0tBLEdBQUcsT0FBTyxNQUFNLENBQUMsZ0JBQWdCLEVBQUcsSUFBTSxDQUN0QyxHQUFJLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSwrQ0FBZ0QsT0FFcEYsR0FBRyxLQUFLLE9BQU9DLENBQVUsRUFFekIsSUFBTUMsRUFBYSxHQUFHLE9BQU8sSUFBSSxnQkFBZ0IsRUFFN0NDLEVBQVksR0FFSCxHQUFHLEtBQUssZUFDakIsR0FBRyxPQUFPLElBQUksTUFBTSxJQUFNLFVBQVksT0FBUyxhQUMvQyxJQUNBLHVCQUNBLHNCQUNKLEVBRUssaUJBQWlCLFFBQVMsTUFBT0MsR0FBVSxDQUM1Q0EsRUFBTSxlQUFlLEVBRXJCLElBQUlDLEVBQXVCLEdBSzNCLEdBSkEsT0FBTyxpQkFBaUIsZUFBaUJELEdBQVUsQ0FDM0NDLEdBQXNCRCxFQUFNLGVBQWUsQ0FDbkQsQ0FBQyxFQUVHRCxFQUFXLE9BQU8sU0FBUyxjQUFjLHFCQUFxQixHQUFHLGVBQWUsRUFDL0VBLEVBQVksR0FFakIsSUFBTUcsRUFBZSxNQUFNQyxFQUFnQixFQUVyQ0MsRUFBUUYsRUFBYSxNQUNyQkcsRUFBY0gsRUFBYSxNQUFNLEtBQUssUUFFdENJLEVBQVcsQ0FDYixxQ0FDQSx1Q0FDQSwrQkFDQSxzQkFDSixFQUVNQyxFQUFxQkQsRUFBUyxDQUFDLEVBQy9CRSxFQUE2QkYsRUFBUyxDQUFDLEVBd0J2Q0csRUFBeUMsQ0FBQyxFQU1oRCxTQUFTQyxFQUF3QkMsRUFBa0IsQ0FDL0MsSUFBTUMsRUFBMEIsQ0FBQyxFQUUzQkMsRUFBc0IsQ0FBQyxJQUFLLEdBQUcsRUFDL0JDLEVBQW9C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IjogWyJhcGkiLCAicm10cl9oZWxwZXJfZGVmYXVsdCIsICJybXRyX2hlbHBlcl9kZWZhdWx0IiwgIm5hbWVzcGFjZXMiLCAiZGlzcGxheWVkIiwgImV2ZW50IiwgInNob3VsZFN0b3BUYWJDbG9zdXJlIiwgInBhZ2VSZXZpc2lvbiIsICJnZXRQYWdlUmV2aXNpb24iLCAicmV2SWQiLCAicGFnZUNvbnRlbnQiLCAic2VjdGlvbnMiLCAiZGVmYXVsdE1vdmVTZWN0aW9uIiwgImZhbGxiYWNrRGVmYXVsdE1vdmVTZWN0aW9uIiwgImFsbFJlcXVlc3RzIiwgInBhcnNlVGVtcGxhdGVQYXJhbWV0ZXJzIiwgInRlbXBsYXRlIiwgInJhd1BhcmFtZXRlcnMiLCAiaWdub3JlZFN0YXJ0U3ltYm9scyIsICJpZ25vcmVkRW5kU3ltYm9scyIsICJpbnNpZGVMaW5rT3JUZW1wbGF0ZSIsICJjdXJyZW50VGV4dCIsICJpbmRleCIsICJjaGFyYWN0ZXIiLCAibmV4dENoYXJhY3RlciIsICJzeW1ib2wiLCAicGFyYW1ldGVycyIsICJwYXJhbWV0ZXIiLCAic3BsaXRQYXJhbWV0ZXIiLCAidmFsdWUiLCAic2VjdGlvbiIsICJtYXRjaGVkUmVxdWVzdHMiLCAicmVxdWVzdCIsICJyZXF1ZXN0cyIsICJtd09sZFRpdGxlIiwgIm13TmV3VGl0bGUiLCAidmFsaWRUaXRsZSIsICJpbnZhbGlkVGl0bGVXYXJuaW5nIiwgInZhbGlkTmFtZXNwYWNlIiwgIm5hbWVzcGFjZSIsICJpbnZhbGlkTmFtZXNwYWNlV2FybmluZyIsICJwYXJzZWRXaWtpdGV4dCIsICJhcGkiLCAicGFyc2VkSHRtbCIsICJyZXF1ZXN0RWxlbWVudCIsICJvdXRwdXRFbGVtZW50IiwgImhlYWRlciIsICJzZWN0aW9uSW5kZXgiLCAic2VjdGlvbkhlYWRlciIsICJzZWN0aW9uQ29udGVudCIsICJub1JlcXVlc3RzIiwgInJlcXVlc3RzTGlzdCIsICJyZXF1ZXN0SW5kZXgiLCAicmVtb3ZlUmVxdWVzdENoZWNrYm94IiwgInJlbW92ZVJlcXVlc3REcm9wZG93biIsICJyZW1vdmVSZXF1ZXN0RXh0cmFJbnB1dHMiLCAic3dpdGNoU2VjdGlvbkNoZWNrYm94IiwgInJlbW92ZVJlcXVlc3RMYWJlbCIsICJyZW1vdmVSZXF1ZXN0RHJvcGRvd25PcHRpb25zIiwgIm9wdGlvbiIsICJvcHRpb25FbGVtZW50IiwgInN3aXRjaFNlY3Rpb25Ecm9wZG93biIsICJzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMiLCAic3dpdGNoU2VjdGlvbkxhYmVsIiwgInN3aXRjaFNlY3Rpb25SZWFzb25pbmciLCAic3VibWl0QnV0dG9uIiwgImxvYWRpbmdTcGlubmVyIiwgImVuZFJlc3VsdCIsICJjaGFuZ2VzIiwgInNlY3Rpb25UaXRsZUFmdGVyIiwgIm5vUmVtYWluaW5nIiwgImVkaXRTdW1tYXJ5IiwgInJlYXNvbiIsICJwYWdlcyIsICJwYWdlIiwgImRlc3RpbmF0aW9uIl0KfQo=
