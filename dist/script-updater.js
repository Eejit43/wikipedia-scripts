// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/script-updater.ts

"use strict";(()=>{mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui-widgets","oojs-ui-windows"],()=>{if(mw.config.get("wgUserName")!=="Eejit43"||mw.config.get("wgPageName")!=="User:Eejit43")return;let y=document.querySelector(".mw-editsection").cloneNode(!0),d=document.createElement("a");d.href="#",d.style.fontWeight="bold",d.textContent="Sync from GitHub",d.addEventListener("click",m=>{m.preventDefault();let e=new OO.ui.WindowManager;document.body.append(e.$element[0]);let s=new p;e.addWindows([s]),s.open()}),y.querySelector("a").replaceWith(d),document.querySelector("h2#My_user_scripts + .mw-editsection").after(y);let w=" (via [[User:Eejit43/scripts/script-updater.js|script]])";class p extends OO.ui.ProcessDialog{api=new mw.Api;repoOwner="Eejit43";repoName="wikipedia-scripts";content;scriptsMultiselect;actionsMultiselect;latestCommitHash;scripts;scriptDataUpdaters={"redirect-helper":b};constructor(){super({size:"medium"}),p.static.name="ScriptUpdaterDialog",p.static.title="script-updater",p.static.actions=[{action:"cancel",label:"Close",flags:["safe","close"]},{action:"save",label:"Run",flags:["primary","progressive"]}]}getSetupProcess=()=>p.super.prototype.getSetupProcess.call(this).next(()=>this.wrapAsyncMethod(this.loadScriptData).then(e=>{if(e){let o=new OO.ui.MessageWidget({type:"error",label:e});this.content=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.content.$element.append(o.$element),this.$body.append(this.content.$element),this.getActions().setAbilities({save:!1});return}this.content=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.scriptsMultiselect=new OO.ui.CheckboxMultiselectWidget({items:this.scripts.map(o=>new OO.ui.CheckboxMultioptionWidget({data:o.name,label:o.name}))}),this.scriptsMultiselect.$element[0].style.columnCount="2";let s=new OO.ui.FieldLayout(this.scriptsMultiselect,{label:new OO.ui.HtmlSnippet("<b>Scripts to update:</b>"),align:"top"});this.actionsMultiselect=new OO.ui.CheckboxMultiselectWidget({items:[{id:"documentation",name:"Update script documentation"},{id:"script",name:"Update script code"},{id:"talk",name:"Create talk redirect",selectedDefault:!1}].map(({id:o,name:t,selectedDefault:a})=>new OO.ui.CheckboxMultioptionWidget({data:o,label:t,selected:a??!0}))});let i=new OO.ui.FieldLayout(this.actionsMultiselect,{label:new OO.ui.HtmlSnippet("<b>Actions to take (if applicable):</b>"),align:"top"}),r=new OO.ui.ButtonGroupWidget({items:Object.entries(this.scriptDataUpdaters).map(([o,t])=>{let a=new OO.ui.ButtonWidget({label:`Update ${o} data`,flags:["progressive"]});return a.on("click",async()=>{mw.notify(`Fetching ${o} data...`,{tag:"update-script-data-notification"});let c=await t();mw.notify(`Successfully fetched ${o} data, opening diff...`,{type:"success",tag:"update-script-data-notification"}),await new Promise(g=>setTimeout(g,500)),O("User:Eejit43/scripts/redirect-helper.json",c)}),a})}),l=new OO.ui.FieldLayout(r,{label:new OO.ui.HtmlSnippet("<b>Script updater functions:</b>"),align:"top"});this.content.$element.append(s.$element),this.content.$element.append(i.$element),this.content.$element.append(l.$element),this.$body.append(this.content.$element)}));getActionProcess=e=>e==="cancel"?new OO.ui.Process(()=>{this.close()}):e==="save"?new OO.ui.Process(()=>{let s=this.scriptsMultiselect.findSelectedItemsData().map(i=>this.scripts.find(r=>r.name===i));this.close(),(async()=>(mw.notify("Syncing scripts...",{tag:"sync-scripts-notification"}),await Promise.all(s.map(i=>this.handleScript(i))),await this.editOrCreate("User:Eejit43/scripts-info",[this.mapScripts(this.scripts.filter(i=>!i.personal&&!i.fork)),"","=== Forks ===",this.mapScripts(this.scripts.filter(i=>i.fork)),"","=== Personal scripts ===",this.mapScripts(this.scripts.filter(i=>i.personal))].join(`
`),"Syncing script list from GitHub"),mw.notify(`Synced ${s.length} script${s.length===1?"":"s"} from GitHub!`,{type:"success",tag:"sync-scripts-notification"})))()}):p.super.prototype.getActionProcess.call(this,e);getTeardownProcess=()=>p.super.prototype.getTeardownProcess.call(this).next(()=>{this.$body.empty()});wrapAsyncMethod(e){let s=$.Deferred();return e().then(i=>s.resolve(i)),s.promise()}loadScriptData=async()=>{let e=await fetch(`https://api.github.com/repos/${this.repoOwner}/${this.repoName}/commits`);if(!e.ok)return`Failed to fetch latest commit hash from GitHub: ${e.statusText} (${e.status})`;this.latestCommitHash=(await e.json())[0].sha;let s=await fetch(`https://raw.githubusercontent.com/${this.repoOwner}/${this.repoName}/${this.latestCommitHash}/scripts.json`);if(!s.ok)return`Failed to fetch script data from GitHub: ${s.statusText} (${s.status})`;let i=await s.json();this.scripts=Object.entries(i).map(([r,l])=>({name:r,...l}))};async handleScript(e){let s=this.actionsMultiselect.findSelectedItemsData(),i=`User:Eejit43/scripts/${e.name}`,r=`User talk:Eejit43/scripts/${e.name}`,l=`${i}.js`,o=["{{User:Eejit43/script-documentation",e.image===!1?`| image             = ${e.image}`:null,e["in-development"]?`| in-development    = ${e["in-development"]}`:null,e["use-instead"]?`| use-instead       = ${e["use-instead"].includes("User:")?e["use-instead"]:`[[User:Eejit43/scripts/${e["use-instead"]}|${e["use-instead"]}]]`}`:null,e["image-caption"]?`| image-caption     = ${e["image-caption"]}`:null,e["other-authors"]?`| other-authors     = ${e["other-authors"].map(a=>`[[User:${a}|${a}]]`).join(", ")}`:null,`| description-short = ${e["short-description"]}`,`| description       = ${e.description}`,e.usage?`| usage             = ${e.usage}`:null,e.configuration?`| configuration     = ${e.configuration}`:null,e.changelog?`| changelog         = 
${Object.entries(e.changelog).map(([a,c])=>`* '''{{start date and age|${a}}}:'''${Array.isArray(c)?`
${c.map(g=>`** ${g}`).join(`
`)}`:` ${c}`}`).join(`
`)}`:null,`| skin-support      = {{User:Eejit43/script-documentation/skin-support|${Object.entries(e["skin-support"]).map(([a,c])=>`${a}=${c}`).join("|")}}}`,e["source-multiple"]?`| source-multiple   = ${e["source-multiple"]}`:null,`| released          = {{start date and age|${e.released}}}`,`| updated           = {{start date and age|${e.updated}}}`,"}}"].filter(Boolean),t=null;if(s.includes("script")){let a=await fetch(`https://raw.githubusercontent.com/${this.repoOwner}/${this.repoName}/${this.latestCommitHash}/dist/${e.name}.js`);if(a.ok)t=await a.text();else return mw.notify(`Failed to fetch "${e.name}.js" from GitHub: ${a.statusText} (${a.status})`,{type:"error",tag:"sync-scripts-notification"})}e.personal||(s.includes("documentation")&&await this.editOrCreate(i,o.join(`
`),"Syncing script documentation from GitHub"),s.includes("talk")&&await this.editOrCreate(r,"#REDIRECT [[User talk:Eejit43]]","Redirecting script documentation talk page to main user talk page")),t&&await this.editOrCreate(l,t,"Syncing script from GitHub")}mapScripts(e){return e.map(s=>`* [[User:Eejit43/scripts/${s.name}${s.personal?".js":""}|${s.name}]] - ${s["short-description"]||s.description}${s["in-development"]?' (<span style="color: #bd2828">in development</span>)':""}${s["use-instead"]?' (<span style="color: #bd2828">deprecated</span>)':""}`).join(`
`)}async editOrCreate(e,s,i){i+=w,await this.api.edit(e,()=>({text:s,summary:i,watchlist:"watch"})).catch(async(r,l)=>{if(r==="nocreate-missing")await this.api.create(e,{summary:i,watchlist:"watch"},s).catch((o,t)=>{mw.notify(`Error creating ${e}: ${t?.error?.info??"Unknown error"} (${o})`,{type:"error"})});else{mw.notify(`Error editing or creating ${e}: ${l?.error?.info??"Unknown error"} (${r})`,{type:"error"});return}})}}Object.assign(p.prototype,OO.ui.ProcessDialog.prototype);async function b(){let m=new mw.Api,e=await m.get({action:"query",list:"categorymembers",cmtitle:"Category:Redirect templates",cmlimit:"max",formatversion:"2"}),s=await m.get({action:"query",list:"categorymembers",cmtitle:"Category:Template redirects with possibilities",cmlimit:"max",formatversion:"2"}),i=e.query.categorymembers.filter(t=>t.title.startsWith("Template:R ")&&t.title!=="Template:R template index").map(t=>({name:t.title.split(":")[1],redirect:!1})),r=s.query.categorymembers.filter(t=>t.title.startsWith("Template:R ")&&t.title!=="Template:R with possibilities").map(t=>({name:t.title.split(":")[1],redirect:!0})),l=[],o=await Promise.all([...i,...r].sort((t,a)=>t.name.startsWith("R comics")||t.name.startsWith("R ME")?1:a.name.startsWith("R comics")||a.name.startsWith("R ME")?-1:t.name.localeCompare(a.name)).map(async t=>{let a=await m.get({action:"templatedata",titles:"Template:"+t.name,formatversion:"2"}),c=Object.values(a.pages)[0]?.params||{},g=Object.fromEntries(Object.entries(c).map(([f,n])=>[f,{aliases:n.aliases,label:n.label?.en??null,description:n.description?.en??null,type:n.type,required:n.required,suggested:n.suggested,default:n.default?.en??null,example:n.example?.en??null}])),h;t.redirect?(h=(await m.get({action:"query",titles:"Template:"+t.name,prop:"linkshere",lhnamespace:10,lhlimit:"max",formatversion:"2"})).query.pages[0].linkshere?.filter(n=>n.redirect).map(n=>n.title.split(":")[1]).filter(n=>![...i,...r].some(u=>u.name===n)&&!n.endsWith("/doc")&&!n.endsWith("/sandbox")).sort((n,u)=>n.localeCompare(u))??[],l.push(...h)):h=(await m.get({action:"query",titles:"Template:"+t.name,prop:"redirects",rdlimit:"max",formatversion:"2"})).query.pages[0].redirects?.filter(n=>n.ns===10).map(n=>n.title.split(":")[1]).filter(n=>!r.some(u=>u.name===n)).sort((n,u)=>n.localeCompare(u))??[];let k={...t.redirect?{redirect:!0}:{},parameters:g,aliases:h};return[t.name,k]}));for(let t of l)for(let[,a]of o)!a.redirect&&a.aliases.includes(t)&&(a.aliases=a.aliases.filter(c=>c!==t));return JSON.stringify(Object.fromEntries(o))}function O(m,e){let s={wpTextbox1:e,wpSummary:`Updating data${w}`,wpDiff:"1",wpUltimateParam:"1"},i=new URL(`${mw.config.get("wgScriptPath")}/index.php`,window.location.origin);i.searchParams.set("title",m),i.searchParams.set("action","submit");let r=document.createElement("form");r.action=i.toString(),r.method="POST",r.target="_blank";for(let[l,o]of Object.entries(s)){let t=document.createElement("input");t.type="hidden",t.name=l,t.value=o,r.append(t)}document.body.append(r),r.submit(),r.remove()}});})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc2NyaXB0cy9zY3JpcHQtdXBkYXRlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHR5cGUge1xuICAgIEFwaVF1ZXJ5QmFja2xpbmtzcHJvcFBhcmFtcyxcbiAgICBBcGlRdWVyeUNhdGVnb3J5TWVtYmVyc1BhcmFtcyxcbiAgICBUZW1wbGF0ZURhdGFBcGlUZW1wbGF0ZURhdGFQYXJhbXMsXG59IGZyb20gJ3R5cGVzLW1lZGlhd2lraS9hcGlfcGFyYW1zJztcbmltcG9ydCB0eXBlIHsgQ2F0ZWdvcnlNZW1iZXJzUmVzdWx0LCBMaW5rc0hlcmVSZXN1bHQsIE1lZGlhV2lraURhdGFFcnJvciwgUmVkaXJlY3RzUmVzdWx0LCBUZW1wbGF0ZURhdGFSZXN1bHQgfSBmcm9tICcuLi9nbG9iYWwtdHlwZXMnO1xuXG5pbnRlcmZhY2UgU2NyaXB0IHtcbiAgICAnbmFtZSc6IHN0cmluZztcbiAgICAnaW4tZGV2ZWxvcG1lbnQnPzogYm9vbGVhbjtcbiAgICAndXNlLWluc3RlYWQnPzogc3RyaW5nO1xuICAgICdpbWFnZSc/OiBmYWxzZTtcbiAgICAnaW1hZ2UtY2FwdGlvbic/OiBzdHJpbmc7XG4gICAgJ3Nob3J0LWRlc2NyaXB0aW9uJzogc3RyaW5nO1xuICAgICdkZXNjcmlwdGlvbic6IHN0cmluZztcbiAgICAndXNhZ2UnPzogc3RyaW5nO1xuICAgICdjb25maWd1cmF0aW9uJz86IHN0cmluZztcbiAgICAnY2hhbmdlbG9nJz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPjtcbiAgICAnb3RoZXItYXV0aG9ycyc/OiBzdHJpbmdbXTtcbiAgICAnZm9yayc/OiB0cnVlO1xuICAgICdwZXJzb25hbCc/OiB0cnVlO1xuICAgICdza2luLXN1cHBvcnQnOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcbiAgICAnc291cmNlLW11bHRpcGxlJz86IHRydWU7XG4gICAgJ3JlbGVhc2VkJzogc3RyaW5nO1xuICAgICd1cGRhdGVkJzogc3RyaW5nO1xufVxuXG5tdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdvb2pzLXVpLWNvcmUnLCAnb29qcy11aS13aWRnZXRzJywgJ29vanMtdWktd2luZG93cyddLCAoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnVXNlck5hbWUnKSAhPT0gJ0Vlaml0NDMnIHx8IG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSAhPT0gJ1VzZXI6RWVqaXQ0MycpIHJldHVybjtcblxuICAgIGNvbnN0IGZ1bGxMaW5rRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tdy1lZGl0c2VjdGlvbicpIS5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFNwYW5FbGVtZW50O1xuXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBsaW5rLmhyZWYgPSAnIyc7XG4gICAgbGluay5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgIGxpbmsudGV4dENvbnRlbnQgPSAnU3luYyBmcm9tIEdpdEh1Yic7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHdpbmRvd01hbmFnZXIgPSBuZXcgT08udWkuV2luZG93TWFuYWdlcigpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh3aW5kb3dNYW5hZ2VyLiRlbGVtZW50WzBdKTtcblxuICAgICAgICBjb25zdCBzY3JpcHRVcGRhdGVyRGlhbG9nID0gbmV3IFNjcmlwdFVwZGF0ZXJEaWFsb2coKTtcbiAgICAgICAgd2luZG93TWFuYWdlci5hZGRXaW5kb3dzKFtzY3JpcHRVcGRhdGVyRGlhbG9nXSk7XG5cbiAgICAgICAgc2NyaXB0VXBkYXRlckRpYWxvZy5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBmdWxsTGlua0VsZW1lbnQucXVlcnlTZWxlY3RvcignYScpIS5yZXBsYWNlV2l0aChsaW5rKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyI015X3VzZXJfc2NyaXB0cyArIC5tdy1lZGl0c2VjdGlvbicpIS5hZnRlcihmdWxsTGlua0VsZW1lbnQpO1xuXG4gICAgY29uc3Qgc2NyaXB0TWVzc2FnZSA9ICcgKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL3NjcmlwdC11cGRhdGVyLmpzfHNjcmlwdF1dKSc7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGEgZGlhbG9nIHRoYXQgbWFuYWdlcyB1cGRhdGluZyBzY3JpcHRzLlxuICAgICAqL1xuICAgIGNsYXNzIFNjcmlwdFVwZGF0ZXJEaWFsb2cgZXh0ZW5kcyBPTy51aS5Qcm9jZXNzRGlhbG9nIHtcbiAgICAgICAgcHJpdmF0ZSBhcGkgPSBuZXcgbXcuQXBpKCk7XG5cbiAgICAgICAgcHJpdmF0ZSByZXBvT3duZXIgPSAnRWVqaXQ0Myc7XG4gICAgICAgIHByaXZhdGUgcmVwb05hbWUgPSAnd2lraXBlZGlhLXNjcmlwdHMnO1xuXG4gICAgICAgIHByaXZhdGUgY29udGVudCE6IE9PLnVpLlBhbmVsTGF5b3V0O1xuICAgICAgICBwcml2YXRlIHNjcmlwdHNNdWx0aXNlbGVjdCE6IE9PLnVpLkNoZWNrYm94TXVsdGlzZWxlY3RXaWRnZXQ7XG4gICAgICAgIHByaXZhdGUgYWN0aW9uc011bHRpc2VsZWN0ITogT08udWkuQ2hlY2tib3hNdWx0aXNlbGVjdFdpZGdldDtcblxuICAgICAgICBwcml2YXRlIGxhdGVzdENvbW1pdEhhc2ghOiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgc2NyaXB0cyE6IFNjcmlwdFtdO1xuXG4gICAgICAgIHByaXZhdGUgc2NyaXB0RGF0YVVwZGF0ZXJzID0ge1xuICAgICAgICAgICAgJ3JlZGlyZWN0LWhlbHBlcic6IGdldFJlZGlyZWN0SGVscGVyRGF0YSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKHsgc2l6ZTogJ21lZGl1bScgfSk7XG5cbiAgICAgICAgICAgIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3RhdGljLm5hbWUgPSAnU2NyaXB0VXBkYXRlckRpYWxvZyc7XG4gICAgICAgICAgICBTY3JpcHRVcGRhdGVyRGlhbG9nLnN0YXRpYy50aXRsZSA9ICdzY3JpcHQtdXBkYXRlcic7XG4gICAgICAgICAgICBTY3JpcHRVcGRhdGVyRGlhbG9nLnN0YXRpYy5hY3Rpb25zID0gW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY2FuY2VsJywgbGFiZWw6ICdDbG9zZScsIGZsYWdzOiBbJ3NhZmUnLCAnY2xvc2UnXSB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2F2ZScsIGxhYmVsOiAnUnVuJywgZmxhZ3M6IFsncHJpbWFyeScsICdwcm9ncmVzc2l2ZSddIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0U2V0dXBQcm9jZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3VwZXIucHJvdG90eXBlLmdldFNldHVwUHJvY2Vzcy5jYWxsKHRoaXMpLm5leHQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBBc3luY01ldGhvZCh0aGlzLmxvYWRTY3JpcHREYXRhKS50aGVuKChlcnJvcj86IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gbmV3IE9PLnVpLk1lc3NhZ2VXaWRnZXQoeyB0eXBlOiAnZXJyb3InLCBsYWJlbDogZXJyb3IgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudCA9IG5ldyBPTy51aS5QYW5lbExheW91dCh7IHBhZGRlZDogdHJ1ZSwgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LiRlbGVtZW50LmFwcGVuZChtZXNzYWdlRWxlbWVudC4kZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmFwcGVuZCh0aGlzLmNvbnRlbnQuJGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEFjdGlvbnMoKS5zZXRBYmlsaXRpZXMoeyBzYXZlOiBmYWxzZSB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gbmV3IE9PLnVpLlBhbmVsTGF5b3V0KHsgcGFkZGVkOiB0cnVlLCBleHBhbmRlZDogZmFsc2UgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JpcHRzTXVsdGlzZWxlY3QgPSBuZXcgT08udWkuQ2hlY2tib3hNdWx0aXNlbGVjdFdpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogdGhpcy5zY3JpcHRzLm1hcCgoc2NyaXB0KSA9PiBuZXcgT08udWkuQ2hlY2tib3hNdWx0aW9wdGlvbldpZGdldCh7IGRhdGE6IHNjcmlwdC5uYW1lLCBsYWJlbDogc2NyaXB0Lm5hbWUgfSkpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JpcHRzTXVsdGlzZWxlY3QuJGVsZW1lbnRbMF0uc3R5bGUuY29sdW1uQ291bnQgPSAnMic7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NyaXB0c011bHRpc2VsZWN0TGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KHRoaXMuc2NyaXB0c011bHRpc2VsZWN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogbmV3IE9PLnVpLkh0bWxTbmlwcGV0KCc8Yj5TY3JpcHRzIHRvIHVwZGF0ZTo8L2I+JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ3RvcCcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc011bHRpc2VsZWN0ID0gbmV3IE9PLnVpLkNoZWNrYm94TXVsdGlzZWxlY3RXaWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZG9jdW1lbnRhdGlvbicsIG5hbWU6ICdVcGRhdGUgc2NyaXB0IGRvY3VtZW50YXRpb24nIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ3NjcmlwdCcsIG5hbWU6ICdVcGRhdGUgc2NyaXB0IGNvZGUnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ3RhbGsnLCBuYW1lOiAnQ3JlYXRlIHRhbGsgcmVkaXJlY3QnLCBzZWxlY3RlZERlZmF1bHQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeyBpZCwgbmFtZSwgc2VsZWN0ZWREZWZhdWx0IH0pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBPTy51aS5DaGVja2JveE11bHRpb3B0aW9uV2lkZ2V0KHsgZGF0YTogaWQsIGxhYmVsOiBuYW1lLCBzZWxlY3RlZDogc2VsZWN0ZWREZWZhdWx0ID8/IHRydWUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb25zTXVsdGlzZWxlY3RMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQodGhpcy5hY3Rpb25zTXVsdGlzZWxlY3QsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBuZXcgT08udWkuSHRtbFNuaXBwZXQoJzxiPkFjdGlvbnMgdG8gdGFrZSAoaWYgYXBwbGljYWJsZSk6PC9iPicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICd0b3AnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXR0b25Hcm91cCA9IG5ldyBPTy51aS5CdXR0b25Hcm91cFdpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogT2JqZWN0LmVudHJpZXModGhpcy5zY3JpcHREYXRhVXBkYXRlcnMpLm1hcCgoW25hbWUsIHVwZGF0ZXJdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gbmV3IE9PLnVpLkJ1dHRvbldpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBgVXBkYXRlICR7bmFtZX0gZGF0YWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWdzOiBbJ3Byb2dyZXNzaXZlJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLm9uKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBGZXRjaGluZyAke25hbWV9IGRhdGEuLi5gLCB7IHRhZzogJ3VwZGF0ZS1zY3JpcHQtZGF0YS1ub3RpZmljYXRpb24nIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1cGRhdGVyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBTdWNjZXNzZnVsbHkgZmV0Y2hlZCAke25hbWV9IGRhdGEsIG9wZW5pbmcgZGlmZi4uLmAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogJ3VwZGF0ZS1zY3JpcHQtZGF0YS1ub3RpZmljYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTsgLy8gQWxsb3cgdGhlIG5vdGlmaWNhdGlvbiB0byBiZSBzaG93blxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5EaWZmKCdVc2VyOkVlaml0NDMvc2NyaXB0cy9yZWRpcmVjdC1oZWxwZXIuanNvbicsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY3JpcHREYXRhVXBkYXRlcnNNdWx0aXNlbGVjdExheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dChidXR0b25Hcm91cCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG5ldyBPTy51aS5IdG1sU25pcHBldCgnPGI+U2NyaXB0IHVwZGF0ZXIgZnVuY3Rpb25zOjwvYj4nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAndG9wJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LiRlbGVtZW50LmFwcGVuZChzY3JpcHRzTXVsdGlzZWxlY3RMYXlvdXQuJGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuJGVsZW1lbnQuYXBwZW5kKGFjdGlvbnNNdWx0aXNlbGVjdExheW91dC4kZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC4kZWxlbWVudC5hcHBlbmQoc2NyaXB0RGF0YVVwZGF0ZXJzTXVsdGlzZWxlY3RMYXlvdXQuJGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmFwcGVuZCh0aGlzLmNvbnRlbnQuJGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0QWN0aW9uUHJvY2VzcyA9IChhY3Rpb246IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NhbmNlbCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPTy51aS5Qcm9jZXNzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnc2F2ZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPTy51aS5Qcm9jZXNzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRTY3JpcHRzID0gKHRoaXMuc2NyaXB0c011bHRpc2VsZWN0LmZpbmRTZWxlY3RlZEl0ZW1zRGF0YSgpIGFzIHN0cmluZ1tdKS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAoc2NyaXB0TmFtZSkgPT4gdGhpcy5zY3JpcHRzLmZpbmQoKHNjcmlwdCkgPT4gc2NyaXB0Lm5hbWUgPT09IHNjcmlwdE5hbWUpISxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdm9pZCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KCdTeW5jaW5nIHNjcmlwdHMuLi4nLCB7IHRhZzogJ3N5bmMtc2NyaXB0cy1ub3RpZmljYXRpb24nIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChzZWxlY3RlZFNjcmlwdHMubWFwKChzY3JpcHQpID0+IHRoaXMuaGFuZGxlU2NyaXB0KHNjcmlwdCkpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5lZGl0T3JDcmVhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1VzZXI6RWVqaXQ0My9zY3JpcHRzLWluZm8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBTY3JpcHRzKHRoaXMuc2NyaXB0cy5maWx0ZXIoKHNjcmlwdCkgPT4gIXNjcmlwdC5wZXJzb25hbCAmJiAhc2NyaXB0LmZvcmspKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc9PT0gRm9ya3MgPT09JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBTY3JpcHRzKHRoaXMuc2NyaXB0cy5maWx0ZXIoKHNjcmlwdCkgPT4gc2NyaXB0LmZvcmspKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc9PT0gUGVyc29uYWwgc2NyaXB0cyA9PT0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcFNjcmlwdHModGhpcy5zY3JpcHRzLmZpbHRlcigoc2NyaXB0KSA9PiBzY3JpcHQucGVyc29uYWwpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJ1xcbicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTeW5jaW5nIHNjcmlwdCBsaXN0IGZyb20gR2l0SHViJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG13Lm5vdGlmeShgU3luY2VkICR7c2VsZWN0ZWRTY3JpcHRzLmxlbmd0aH0gc2NyaXB0JHtzZWxlY3RlZFNjcmlwdHMubGVuZ3RoID09PSAxID8gJycgOiAncyd9IGZyb20gR2l0SHViIWAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3VwZXIucHJvdG90eXBlLmdldEFjdGlvblByb2Nlc3MuY2FsbCh0aGlzLCBhY3Rpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGdldFRlYXJkb3duUHJvY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBTY3JpcHRVcGRhdGVyRGlhbG9nLnN1cGVyLnByb3RvdHlwZS5nZXRUZWFyZG93blByb2Nlc3MuY2FsbCh0aGlzKS5uZXh0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIHsgJGJvZHk6IEpRdWVyeSB9KS4kYm9keS5lbXB0eSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdyYXBzIGFuIGFzeW5jIG1ldGhvZCBpbnRvIGEgalF1ZXJ5IERlZmVycmVkIG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIG1ldGhvZCBUaGUgbWV0aG9kIHRvIHdyYXAuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHdyYXBBc3luY01ldGhvZChtZXRob2Q6ICgpID0+IFByb21pc2U8dW5rbm93bj4pIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICB2b2lkIG1ldGhvZCgpLnRoZW4oKHJlc3VsdCkgPT4gZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2FkcyBkYXRhIGZvciBhbGwgc2NyaXB0cy5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgbG9hZFNjcmlwdERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYXRlc3RDb21taXRIYXNoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3RoaXMucmVwb093bmVyfS8ke3RoaXMucmVwb05hbWV9L2NvbW1pdHNgKTtcbiAgICAgICAgICAgIGlmICghbGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLm9rKVxuICAgICAgICAgICAgICAgIHJldHVybiBgRmFpbGVkIHRvIGZldGNoIGxhdGVzdCBjb21taXQgaGFzaCBmcm9tIEdpdEh1YjogJHtsYXRlc3RDb21taXRIYXNoUmVzcG9uc2Uuc3RhdHVzVGV4dH0gKCR7bGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLnN0YXR1c30pYDtcblxuICAgICAgICAgICAgdGhpcy5sYXRlc3RDb21taXRIYXNoID0gKChhd2FpdCBsYXRlc3RDb21taXRIYXNoUmVzcG9uc2UuanNvbigpKSBhcyB7IHNoYTogc3RyaW5nIH1bXSlbMF0uc2hhO1xuXG4gICAgICAgICAgICBjb25zdCBzY3JpcHREYXRhUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyR7dGhpcy5yZXBvT3duZXJ9LyR7dGhpcy5yZXBvTmFtZX0vJHt0aGlzLmxhdGVzdENvbW1pdEhhc2h9L3NjcmlwdHMuanNvbmAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKCFzY3JpcHREYXRhUmVzcG9uc2Uub2spXG4gICAgICAgICAgICAgICAgcmV0dXJuIGBGYWlsZWQgdG8gZmV0Y2ggc2NyaXB0IGRhdGEgZnJvbSBHaXRIdWI6ICR7c2NyaXB0RGF0YVJlc3BvbnNlLnN0YXR1c1RleHR9ICgke3NjcmlwdERhdGFSZXNwb25zZS5zdGF0dXN9KWA7XG5cbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdERhdGEgPSAoYXdhaXQgc2NyaXB0RGF0YVJlc3BvbnNlLmpzb24oKSkgYXMgUmVjb3JkPHN0cmluZywgT21pdDxTY3JpcHQsICduYW1lJz4+O1xuXG4gICAgICAgICAgICB0aGlzLnNjcmlwdHMgPSBPYmplY3QuZW50cmllcyhzY3JpcHREYXRhKS5tYXAoKFtzY3JpcHROYW1lLCBzY3JpcHRdKSA9PiAoeyBuYW1lOiBzY3JpcHROYW1lLCAuLi5zY3JpcHQgfSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYW5kbGVzIGFuZCBlZGl0cy9jcmVhdGVzIHBhZ2VzIGZvciBhIGdpdmVuIHNjcmlwdC5cbiAgICAgICAgICogQHBhcmFtIHNjcmlwdCBUaGUgc2NyaXB0IHRvIGhhbmRsZS5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlU2NyaXB0KHNjcmlwdDogU2NyaXB0KSB7XG4gICAgICAgICAgICBjb25zdCBhY3Rpb25zVG9UYWtlID0gdGhpcy5hY3Rpb25zTXVsdGlzZWxlY3QuZmluZFNlbGVjdGVkSXRlbXNEYXRhKCkgYXMgKCdkb2N1bWVudGF0aW9uJyB8ICdzY3JpcHQnIHwgJ3RhbGsnKVtdO1xuXG4gICAgICAgICAgICBjb25zdCBzdWJwYWdlTmFtZSA9IGBVc2VyOkVlaml0NDMvc2NyaXB0cy8ke3NjcmlwdC5uYW1lfWA7XG4gICAgICAgICAgICBjb25zdCBzdWJwYWdlVGFsa05hbWUgPSBgVXNlciB0YWxrOkVlaml0NDMvc2NyaXB0cy8ke3NjcmlwdC5uYW1lfWA7XG4gICAgICAgICAgICBjb25zdCBzY3JpcHROYW1lID0gYCR7c3VicGFnZU5hbWV9LmpzYDtcblxuICAgICAgICAgICAgY29uc3QgZnVsbFN1YnBhZ2VJbmZvID0gW1xuICAgICAgICAgICAgICAgICd7e1VzZXI6RWVqaXQ0My9zY3JpcHQtZG9jdW1lbnRhdGlvbicsXG4gICAgICAgICAgICAgICAgc2NyaXB0LmltYWdlID09PSBmYWxzZSA/IGB8IGltYWdlICAgICAgICAgICAgID0gJHtzY3JpcHQuaW1hZ2V9YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgc2NyaXB0Wydpbi1kZXZlbG9wbWVudCddID8gYHwgaW4tZGV2ZWxvcG1lbnQgICAgPSAke3NjcmlwdFsnaW4tZGV2ZWxvcG1lbnQnXX1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHRbJ3VzZS1pbnN0ZWFkJ11cbiAgICAgICAgICAgICAgICAgICAgPyBgfCB1c2UtaW5zdGVhZCAgICAgICA9ICR7c2NyaXB0Wyd1c2UtaW5zdGVhZCddLmluY2x1ZGVzKCdVc2VyOicpID8gc2NyaXB0Wyd1c2UtaW5zdGVhZCddIDogYFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvJHtzY3JpcHRbJ3VzZS1pbnN0ZWFkJ119fCR7c2NyaXB0Wyd1c2UtaW5zdGVhZCddfV1dYH1gXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHRbJ2ltYWdlLWNhcHRpb24nXSA/IGB8IGltYWdlLWNhcHRpb24gICAgID0gJHtzY3JpcHRbJ2ltYWdlLWNhcHRpb24nXX1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHRbJ290aGVyLWF1dGhvcnMnXVxuICAgICAgICAgICAgICAgICAgICA/IGB8IG90aGVyLWF1dGhvcnMgICAgID0gJHtzY3JpcHRbJ290aGVyLWF1dGhvcnMnXS5tYXAoKGF1dGhvcikgPT4gYFtbVXNlcjoke2F1dGhvcn18JHthdXRob3J9XV1gKS5qb2luKCcsICcpfWBcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgIGB8IGRlc2NyaXB0aW9uLXNob3J0ID0gJHtzY3JpcHRbJ3Nob3J0LWRlc2NyaXB0aW9uJ119YCxcbiAgICAgICAgICAgICAgICBgfCBkZXNjcmlwdGlvbiAgICAgICA9ICR7c2NyaXB0LmRlc2NyaXB0aW9ufWAsXG4gICAgICAgICAgICAgICAgc2NyaXB0LnVzYWdlID8gYHwgdXNhZ2UgICAgICAgICAgICAgPSAke3NjcmlwdC51c2FnZX1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHQuY29uZmlndXJhdGlvbiA/IGB8IGNvbmZpZ3VyYXRpb24gICAgID0gJHtzY3JpcHQuY29uZmlndXJhdGlvbn1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHQuY2hhbmdlbG9nXG4gICAgICAgICAgICAgICAgICAgID8gYHwgY2hhbmdlbG9nICAgICAgICAgPSBcXG4ke09iamVjdC5lbnRyaWVzKHNjcmlwdC5jaGFuZ2Vsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoW2RhdGUsIGRlc2NyaXB0aW9uXSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKiAnJyd7e3N0YXJ0IGRhdGUgYW5kIGFnZXwke2RhdGV9fX06JycnJHtBcnJheS5pc0FycmF5KGRlc2NyaXB0aW9uKSA/IGBcXG4ke2Rlc2NyaXB0aW9uLm1hcCgobGluZSkgPT4gYCoqICR7bGluZX1gKS5qb2luKCdcXG4nKX1gIDogYCAke2Rlc2NyaXB0aW9ufWB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignXFxuJyl9YFxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgYHwgc2tpbi1zdXBwb3J0ICAgICAgPSB7e1VzZXI6RWVqaXQ0My9zY3JpcHQtZG9jdW1lbnRhdGlvbi9za2luLXN1cHBvcnR8JHtPYmplY3QuZW50cmllcyhzY3JpcHRbJ3NraW4tc3VwcG9ydCddKVxuICAgICAgICAgICAgICAgICAgICAubWFwKChbc2tpbiwgc3RhdHVzXSkgPT4gYCR7c2tpbn09JHtzdGF0dXN9YClcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJ3wnKX19fWAsXG4gICAgICAgICAgICAgICAgc2NyaXB0Wydzb3VyY2UtbXVsdGlwbGUnXSA/IGB8IHNvdXJjZS1tdWx0aXBsZSAgID0gJHtzY3JpcHRbJ3NvdXJjZS1tdWx0aXBsZSddfWAgOiBudWxsLFxuICAgICAgICAgICAgICAgIGB8IHJlbGVhc2VkICAgICAgICAgID0ge3tzdGFydCBkYXRlIGFuZCBhZ2V8JHtzY3JpcHQucmVsZWFzZWR9fX1gLFxuICAgICAgICAgICAgICAgIGB8IHVwZGF0ZWQgICAgICAgICAgID0ge3tzdGFydCBkYXRlIGFuZCBhZ2V8JHtzY3JpcHQudXBkYXRlZH19fWAsXG4gICAgICAgICAgICAgICAgJ319JyxcbiAgICAgICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgICAgICAgICBsZXQgc2NyaXB0Q29udGVudCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChhY3Rpb25zVG9UYWtlLmluY2x1ZGVzKCdzY3JpcHQnKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjcmlwdENvbnRlbnRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgICAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyR7dGhpcy5yZXBvT3duZXJ9LyR7dGhpcy5yZXBvTmFtZX0vJHt0aGlzLmxhdGVzdENvbW1pdEhhc2h9L2Rpc3QvJHtzY3JpcHQubmFtZX0uanNgLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKHNjcmlwdENvbnRlbnRSZXNwb25zZS5vaykgc2NyaXB0Q29udGVudCA9IGF3YWl0IHNjcmlwdENvbnRlbnRSZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXcubm90aWZ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBmZXRjaCBcIiR7c2NyaXB0Lm5hbWV9LmpzXCIgZnJvbSBHaXRIdWI6ICR7c2NyaXB0Q29udGVudFJlc3BvbnNlLnN0YXR1c1RleHR9ICgke3NjcmlwdENvbnRlbnRSZXNwb25zZS5zdGF0dXN9KWAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdlcnJvcicsIHRhZzogJ3N5bmMtc2NyaXB0cy1ub3RpZmljYXRpb24nIH0sXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghc2NyaXB0LnBlcnNvbmFsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbnNUb1Rha2UuaW5jbHVkZXMoJ2RvY3VtZW50YXRpb24nKSlcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5lZGl0T3JDcmVhdGUoc3VicGFnZU5hbWUsIGZ1bGxTdWJwYWdlSW5mby5qb2luKCdcXG4nKSwgJ1N5bmNpbmcgc2NyaXB0IGRvY3VtZW50YXRpb24gZnJvbSBHaXRIdWInKTtcblxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb25zVG9UYWtlLmluY2x1ZGVzKCd0YWxrJykpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZWRpdE9yQ3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VicGFnZVRhbGtOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgJyNSRURJUkVDVCBbW1VzZXIgdGFsazpFZWppdDQzXV0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlZGlyZWN0aW5nIHNjcmlwdCBkb2N1bWVudGF0aW9uIHRhbGsgcGFnZSB0byBtYWluIHVzZXIgdGFsayBwYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNjcmlwdENvbnRlbnQpIGF3YWl0IHRoaXMuZWRpdE9yQ3JlYXRlKHNjcmlwdE5hbWUsIHNjcmlwdENvbnRlbnQsICdTeW5jaW5nIHNjcmlwdCBmcm9tIEdpdEh1YicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgc2NyaXB0cyB0byBhIGJ1bGxldGVkIGxpc3QuXG4gICAgICAgICAqIEBwYXJhbSBzY3JpcHRzIFRoZSBzY3JpcHRzIHRvIG1hcC5cbiAgICAgICAgICogQHJldHVybnMgVGhlIG1hcHBlZCBzY3JpcHRzLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBtYXBTY3JpcHRzKHNjcmlwdHM6IFNjcmlwdFtdKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NyaXB0c1xuICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgIChzY3JpcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBgKiBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9JHtzY3JpcHQucGVyc29uYWwgPyAnLmpzJyA6ICcnfXwke3NjcmlwdC5uYW1lfV1dIC0gJHtzY3JpcHRbJ3Nob3J0LWRlc2NyaXB0aW9uJ10gfHwgc2NyaXB0LmRlc2NyaXB0aW9ufSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0Wydpbi1kZXZlbG9wbWVudCddID8gJyAoPHNwYW4gc3R5bGU9XCJjb2xvcjogI2JkMjgyOFwiPmluIGRldmVsb3BtZW50PC9zcGFuPiknIDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0ke3NjcmlwdFsndXNlLWluc3RlYWQnXSA/ICcgKDxzcGFuIHN0eWxlPVwiY29sb3I6ICNiZDI4MjhcIj5kZXByZWNhdGVkPC9zcGFuPiknIDogJyd9YCxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVkaXRzIGEgcGFnZSwgb3IgY3JlYXRlcyBpdCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgKiBAcGFyYW0gdGl0bGUgVGhlIHRpdGxlIG9mIHRoZSBwYWdlIHRvIGVkaXQuXG4gICAgICAgICAqIEBwYXJhbSB0ZXh0IFRoZSBwYWdlIGNvbnRlbnQgdG8gc2V0LlxuICAgICAgICAgKiBAcGFyYW0gc3VtbWFyeSBUaGUgZWRpdCBzdW1tYXJ5ICh3aWxsIGFwcGVuZCBzY3JpcHQgbm90aWNlKS5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgYXN5bmMgZWRpdE9yQ3JlYXRlKHRpdGxlOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgc3VtbWFyeTogc3RyaW5nKSB7XG4gICAgICAgICAgICBzdW1tYXJ5ICs9IHNjcmlwdE1lc3NhZ2U7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBpXG4gICAgICAgICAgICAgICAgLmVkaXQodGl0bGUsICgpID0+ICh7IHRleHQsIHN1bW1hcnksIHdhdGNobGlzdDogJ3dhdGNoJyB9KSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goYXN5bmMgKGVycm9yQ29kZSwgZXJyb3JJbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckNvZGUgPT09ICdub2NyZWF0ZS1taXNzaW5nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBpLmNyZWF0ZSh0aXRsZSwgeyBzdW1tYXJ5LCB3YXRjaGxpc3Q6ICd3YXRjaCcgfSwgdGV4dCkuY2F0Y2goKGVycm9yQ29kZSwgZXJyb3JJbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgY3JlYXRpbmcgJHt0aXRsZX06ICR7KGVycm9ySW5mbyBhcyBNZWRpYVdpa2lEYXRhRXJyb3IpPy5lcnJvcj8uaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnZXJyb3InIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIGVkaXRpbmcgb3IgY3JlYXRpbmcgJHt0aXRsZX06ICR7KGVycm9ySW5mbyBhcyBNZWRpYVdpa2lEYXRhRXJyb3IpPy5lcnJvcj8uaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdlcnJvcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24oU2NyaXB0VXBkYXRlckRpYWxvZy5wcm90b3R5cGUsIE9PLnVpLlByb2Nlc3NEaWFsb2cucHJvdG90eXBlKTtcblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgZGlmZiBjb250YWluaW5nIHRoZSB1cGRhdGVzIHRvIHJlZGlyZWN0LWhlbHBlci5qc29uLlxuICAgICAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uIGdldFJlZGlyZWN0SGVscGVyRGF0YSgpIHtcbiAgICAgICAgY29uc3QgYXBpID0gbmV3IG13LkFwaSgpO1xuXG4gICAgICAgIGNvbnN0IGFsbFJlZGlyZWN0VGVtcGxhdGVzID0gKGF3YWl0IGFwaS5nZXQoe1xuICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgbGlzdDogJ2NhdGVnb3J5bWVtYmVycycsXG4gICAgICAgICAgICBjbXRpdGxlOiAnQ2F0ZWdvcnk6UmVkaXJlY3QgdGVtcGxhdGVzJyxcbiAgICAgICAgICAgIGNtbGltaXQ6ICdtYXgnLFxuICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeUNhdGVnb3J5TWVtYmVyc1BhcmFtcykpIGFzIENhdGVnb3J5TWVtYmVyc1Jlc3VsdDtcbiAgICAgICAgY29uc3QgYWxsUG9zc2libGVUZW1wbGF0ZXMgPSAoYXdhaXQgYXBpLmdldCh7XG4gICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICBsaXN0OiAnY2F0ZWdvcnltZW1iZXJzJyxcbiAgICAgICAgICAgIGNtdGl0bGU6ICdDYXRlZ29yeTpUZW1wbGF0ZSByZWRpcmVjdHMgd2l0aCBwb3NzaWJpbGl0aWVzJyxcbiAgICAgICAgICAgIGNtbGltaXQ6ICdtYXgnLFxuICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeUNhdGVnb3J5TWVtYmVyc1BhcmFtcykpIGFzIENhdGVnb3J5TWVtYmVyc1Jlc3VsdDtcblxuICAgICAgICBjb25zdCByZWRpcmVjdFRlbXBsYXRlcyA9IGFsbFJlZGlyZWN0VGVtcGxhdGVzLnF1ZXJ5LmNhdGVnb3J5bWVtYmVyc1xuICAgICAgICAgICAgLmZpbHRlcigocGFnZSkgPT4gcGFnZS50aXRsZS5zdGFydHNXaXRoKCdUZW1wbGF0ZTpSICcpICYmIHBhZ2UudGl0bGUgIT09ICdUZW1wbGF0ZTpSIHRlbXBsYXRlIGluZGV4JylcbiAgICAgICAgICAgIC5tYXAoKHBhZ2UpID0+ICh7IG5hbWU6IHBhZ2UudGl0bGUuc3BsaXQoJzonKVsxXSwgcmVkaXJlY3Q6IGZhbHNlIH0pKTtcbiAgICAgICAgY29uc3QgcG9zc2libGVSZWRpcmVjdFRlbXBsYXRlcyA9IGFsbFBvc3NpYmxlVGVtcGxhdGVzLnF1ZXJ5LmNhdGVnb3J5bWVtYmVyc1xuICAgICAgICAgICAgLmZpbHRlcigocGFnZSkgPT4gcGFnZS50aXRsZS5zdGFydHNXaXRoKCdUZW1wbGF0ZTpSICcpICYmIHBhZ2UudGl0bGUgIT09ICdUZW1wbGF0ZTpSIHdpdGggcG9zc2liaWxpdGllcycpXG4gICAgICAgICAgICAubWFwKChwYWdlKSA9PiAoeyBuYW1lOiBwYWdlLnRpdGxlLnNwbGl0KCc6JylbMV0sIHJlZGlyZWN0OiB0cnVlIH0pKTtcblxuICAgICAgICBjb25zdCBhbGxBbGlhc2VzT2ZSZWRpcmVjdHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgY29uc3QgbWFwcGVkRGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgWy4uLnJlZGlyZWN0VGVtcGxhdGVzLCAuLi5wb3NzaWJsZVJlZGlyZWN0VGVtcGxhdGVzXVxuICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvcmNlIGNvbWljcyBhbmQgTWlkZGxlIEVhcnRoIHRlbXBsYXRlcyB0byB0aGUgZW5kIG9mIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgICAgIGlmIChhLm5hbWUuc3RhcnRzV2l0aCgnUiBjb21pY3MnKSB8fCBhLm5hbWUuc3RhcnRzV2l0aCgnUiBNRScpKSByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYi5uYW1lLnN0YXJ0c1dpdGgoJ1IgY29taWNzJykgfHwgYi5uYW1lLnN0YXJ0c1dpdGgoJ1IgTUUnKSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHJldHVybiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm1hcChhc3luYyAocGFnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZURhdGFRdWVyeSA9IChhd2FpdCBhcGkuZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3RlbXBsYXRlZGF0YScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZXM6ICdUZW1wbGF0ZTonICsgcGFnZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgICAgICAgICB9IHNhdGlzZmllcyBUZW1wbGF0ZURhdGFBcGlUZW1wbGF0ZURhdGFQYXJhbXMpKSBhcyBUZW1wbGF0ZURhdGFSZXN1bHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IE9iamVjdC52YWx1ZXModGVtcGxhdGVEYXRhUXVlcnkucGFnZXMpWzBdPy5wYXJhbXMgfHwge307IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFBhcmFtZXRlcnMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhwYXJhbWV0ZXJzKS5tYXAoKFtuYW1lLCBkYXRhXSkgPT4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlhc2VzOiBkYXRhLmFsaWFzZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBkYXRhLmxhYmVsPy5lbiA/PyBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbj8uZW4gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZGF0YS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZGF0YS5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGVkOiBkYXRhLnN1Z2dlc3RlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZGF0YS5kZWZhdWx0Py5lbiA/PyBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlOiBkYXRhLmV4YW1wbGU/LmVuID8/IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXBwZWRSZWRpcmVjdHM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlLnJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rc1F1ZXJ5ID0gKGF3YWl0IGFwaS5nZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZXM6ICdUZW1wbGF0ZTonICsgcGFnZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3A6ICdsaW5rc2hlcmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxobmFtZXNwYWNlOiAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaGxpbWl0OiAnbWF4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR2ZXJzaW9uOiAnMicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeUJhY2tsaW5rc3Byb3BQYXJhbXMpKSBhcyBMaW5rc0hlcmVSZXN1bHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFJlZGlyZWN0cyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlua3NRdWVyeS5xdWVyeS5wYWdlc1swXS5saW5rc2hlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPy5maWx0ZXIoKHBhZ2UpID0+IHBhZ2UucmVkaXJlY3QpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHBhZ2UpID0+IHBhZ2UudGl0bGUuc3BsaXQoJzonKVsxXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwYWdlKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFbLi4ucmVkaXJlY3RUZW1wbGF0ZXMsIC4uLnBvc3NpYmxlUmVkaXJlY3RUZW1wbGF0ZXNdLnNvbWUoKHRlbXBsYXRlKSA9PiB0ZW1wbGF0ZS5uYW1lID09PSBwYWdlKSAmJiAvLyBUT0RPOiB3b24ndCBjYXRjaCBpZiB0ZW1wbGF0ZSBpcyBhZGRlZCBhZnRlciwgdGhpcyBjaGVjayBzaG91bGQgYmUgZG9uZSBsYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXBhZ2UuZW5kc1dpdGgoJy9kb2MnKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFwYWdlLmVuZHNXaXRoKCcvc2FuZGJveCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpID8/IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxBbGlhc2VzT2ZSZWRpcmVjdHMucHVzaCguLi5tYXBwZWRSZWRpcmVjdHMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RzUXVlcnkgPSAoYXdhaXQgYXBpLmdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlczogJ1RlbXBsYXRlOicgKyBwYWdlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDogJ3JlZGlyZWN0cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmRsaW1pdDogJ21heCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSBzYXRpc2ZpZXMgQXBpUXVlcnlCYWNrbGlua3Nwcm9wUGFyYW1zKSkgYXMgUmVkaXJlY3RzUmVzdWx0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRSZWRpcmVjdHMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0c1F1ZXJ5LnF1ZXJ5LnBhZ2VzWzBdLnJlZGlyZWN0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/LmZpbHRlcigocmVkaXJlY3QpID0+IHJlZGlyZWN0Lm5zID09PSAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocmVkaXJlY3QpID0+IHJlZGlyZWN0LnRpdGxlLnNwbGl0KCc6JylbMV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKHJlZGlyZWN0KSA9PiAhcG9zc2libGVSZWRpcmVjdFRlbXBsYXRlcy5zb21lKCh0ZW1wbGF0ZSkgPT4gdGVtcGxhdGUubmFtZSA9PT0gcmVkaXJlY3QpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKSA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihwYWdlLnJlZGlyZWN0ID8geyByZWRpcmVjdDogdHJ1ZSB9IDoge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyczogZm9ybWF0dGVkUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzZXM6IG1hcHBlZFJlZGlyZWN0cyxcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3BhZ2UubmFtZSwgdGVtcGxhdGVEYXRhXSBhcyBjb25zdDtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGFsaWFzIG9mIGFsbEFsaWFzZXNPZlJlZGlyZWN0cylcbiAgICAgICAgICAgIGZvciAoY29uc3QgWywgZGF0YV0gb2YgbWFwcGVkRGF0YSlcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEucmVkaXJlY3QgJiYgZGF0YS5hbGlhc2VzLmluY2x1ZGVzKGFsaWFzKSkgZGF0YS5hbGlhc2VzID0gZGF0YS5hbGlhc2VzLmZpbHRlcigoYSkgPT4gYSAhPT0gYWxpYXMpO1xuXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShPYmplY3QuZnJvbUVudHJpZXMobWFwcGVkRGF0YSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIGEgZGlmZiBmb3IgdGhlIGdpdmVuIHBhZ2UgdGl0bGUgYW5kIGNvbnRlbnQuXG4gICAgICogQHBhcmFtIHBhZ2VUaXRsZSBUaGUgdGl0bGUgb2YgdGhlIHBhZ2UgdG8gb3BlbiBhIGRpZmYgZm9yLlxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBjb250ZW50IHRvIHNldCBmb3IgdGhlIHBhZ2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gb3BlbkRpZmYocGFnZVRpdGxlOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IHtcbiAgICAgICAgICAgIHdwVGV4dGJveDE6IGNvbnRlbnQsXG4gICAgICAgICAgICB3cFN1bW1hcnk6IGBVcGRhdGluZyBkYXRhJHtzY3JpcHRNZXNzYWdlfWAsXG4gICAgICAgICAgICB3cERpZmY6ICcxJywgLy8gQW55IHRydXRoeSB2YWx1ZSBtYWtlcyB0aGlzIHdvcmtcbiAgICAgICAgICAgIHdwVWx0aW1hdGVQYXJhbTogJzEnLCAvLyBNYXJrcyB0aGUgZW5kIG9mIGZvcm0gZGF0YVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZvcm1VcmwgPSBuZXcgVVJMKGAke213LmNvbmZpZy5nZXQoJ3dnU2NyaXB0UGF0aCcpfS9pbmRleC5waHBgLCB3aW5kb3cubG9jYXRpb24ub3JpZ2luKTtcbiAgICAgICAgZm9ybVVybC5zZWFyY2hQYXJhbXMuc2V0KCd0aXRsZScsIHBhZ2VUaXRsZSk7XG4gICAgICAgIGZvcm1Vcmwuc2VhcmNoUGFyYW1zLnNldCgnYWN0aW9uJywgJ3N1Ym1pdCcpO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgICAgIGZvcm0uYWN0aW9uID0gZm9ybVVybC50b1N0cmluZygpO1xuICAgICAgICBmb3JtLm1ldGhvZCA9ICdQT1NUJztcbiAgICAgICAgZm9ybS50YXJnZXQgPSAnX2JsYW5rJztcblxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmb3JtRGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGhpZGRlbkZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGhpZGRlbkZpZWxkLnR5cGUgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIGhpZGRlbkZpZWxkLm5hbWUgPSBrZXk7XG4gICAgICAgICAgICBoaWRkZW5GaWVsZC52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICBmb3JtLmFwcGVuZChoaWRkZW5GaWVsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChmb3JtKTtcbiAgICAgICAgZm9ybS5zdWJtaXQoKTtcbiAgICAgICAgZm9ybS5yZW1vdmUoKTtcbiAgICB9XG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkEyQkEsR0FBRyxPQUFPLE1BQU0sQ0FBQyxpQkFBa0IsZUFBZ0Isa0JBQW1CLGlCQUFpQixFQUFHLElBQU0sQ0FDNUYsR0FBSSxHQUFHLE9BQU8sSUFBSSxZQUFZLElBQU0sV0FBYSxHQUFHLE9BQU8sSUFBSSxZQUFZLElBQU0sZUFBZ0IsT0FFakcsSUFBTUEsRUFBa0IsU0FBUyxjQUFjLGlCQUFpQixFQUFHLFVBQVUsRUFBSSxFQUUzRUMsRUFBTyxTQUFTLGNBQWMsR0FBRyxFQUN2Q0EsRUFBSyxLQUFPLElBQ1pBLEVBQUssTUFBTSxXQUFhLE9BQ3hCQSxFQUFLLFlBQWMsbUJBQ25CQSxFQUFLLGlCQUFpQixRQUFVQyxHQUFVLENBQ3RDQSxFQUFNLGVBQWUsRUFFckIsSUFBTUMsRUFBZ0IsSUFBSSxHQUFHLEdBQUcsY0FDaEMsU0FBUyxLQUFLLE9BQU9BLEVBQWMsU0FBUyxDQUFDLENBQUMsRUFFOUMsSUFBTUMsRUFBc0IsSUFBSUMsRUFDaENGLEVBQWMsV0FBVyxDQUFDQyxDQUFtQixDQUFDLEVBRTlDQSxFQUFvQixLQUFLLENBQzdCLENBQUMsRUFFREosRUFBZ0IsY0FBYyxHQUFHLEVBQUcsWUFBWUMsQ0FBSSxFQUVwRCxTQUFTLGNBQWMsc0NBQXNDLEVBQUcsTUFBTUQsQ0FBZSxFQUVyRixJQUFNTSxFQUFnQiwyREFLdEIsTUFBTUQsVUFBNEIsR0FBRyxHQUFHLGFBQWMsQ0FDMUMsSUFBTSxJQUFJLEdBQUcsSUFFYixVQUFZLFVBQ1osU0FBVyxvQkFFWCxRQUNBLG1CQUNBLG1CQUVBLGlCQUNBLFFBRUEsbUJBQXFCLENBQ3pCLGtCQUFtQkUsQ0FDdkIsRUFFQSxhQUFjLENBQ1Ys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LEVBQVksS0FBTyxTQUNuQkEsRUFBWSxLQUFPRixFQUNuQkUsRUFBWSxNQUFRRCxFQUVwQkYsRUFBSyxPQUFPRyxDQUFXLENBQzNCLENBRUEsU0FBUyxLQUFLLE9BQU9ILENBQUksRUFDekJBLEVBQUssT0FBTyxFQUNaQSxFQUFLLE9BQU8sQ0FDaEIsQ0FDSixDQUFDIiwKICAibmFtZXMiOiBbImZ1bGxMaW5rRWxlbWVudCIsICJsaW5rIiwgImV2ZW50IiwgIndpbmRvd01hbmFnZXIiLCAic2NyaXB0VXBkYXRlckRpYWxvZyIsICJTY3JpcHRVcGRhdGVyRGlhbG9nIiwgInNjcmlwdE1lc3NhZ2UiLCAiZ2V0UmVkaXJlY3RIZWxwZXJEYXRhIiwgImVycm9yIiwgIm1lc3NhZ2VFbGVtZW50IiwgInNjcmlwdCIsICJzY3JpcHRzTXVsdGlzZWxlY3RMYXlvdXQiLCAiaWQiLCAibmFtZSIsICJzZWxlY3RlZERlZmF1bHQiLCAiYWN0aW9uc011bHRpc2VsZWN0TGF5b3V0IiwgImJ1dHRvbkdyb3VwIiwgInVwZGF0ZXIiLCAiYnV0dG9uIiwgImRhdGEiLCAicmVzb2x2ZSIsICJvcGVuRGlmZiIsICJzY3JpcHREYXRhVXBkYXRlcnNNdWx0aXNlbGVjdExheW91dCIsICJhY3Rpb24iLCAic2VsZWN0ZWRTY3JpcHRzIiwgInNjcmlwdE5hbWUiLCAibWV0aG9kIiwgImRlZmVycmVkIiwgInJlc3VsdCIsICJsYXRlc3RDb21taXRIYXNoUmVzcG9uc2UiLCAic2NyaXB0RGF0YVJlc3BvbnNlIiwgInNjcmlwdERhdGEiLCAiYWN0aW9uc1RvVGFrZSIsICJzdWJwYWdlTmFtZSIsICJzdWJwYWdlVGFsa05hbWUiLCAiZnVsbFN1YnBhZ2VJbmZvIiwgImF1dGhvciIsICJkYXRlIiwgImRlc2NyaXB0aW9uIiwgImxpbmUiLCAic2tpbiIsICJzdGF0dXMiLCAic2NyaXB0Q29udGVudCIsICJzY3JpcHRDb250ZW50UmVzcG9uc2UiLCAic2NyaXB0cyIsICJ0aXRsZSIsICJ0ZXh0IiwgInN1bW1hcnkiLCAiZXJyb3JDb2RlIiwgImVycm9ySW5mbyIsICJhcGkiLCAiYWxsUmVkaXJlY3RUZW1wbGF0ZXMiLCAiYWxsUG9zc2libGVUZW1wbGF0ZXMiLCAicmVkaXJlY3RUZW1wbGF0ZXMiLCAicGFnZSIsICJwb3NzaWJsZVJlZGlyZWN0VGVtcGxhdGVzIiwgImFsbEFsaWFzZXNPZlJlZGlyZWN0cyIsICJtYXBwZWREYXRhIiwgImEiLCAiYiIsICJ0ZW1wbGF0ZURhdGFRdWVyeSIsICJwYXJhbWV0ZXJzIiwgImZvcm1hdHRlZFBhcmFtZXRlcnMiLCAibWFwcGVkUmVkaXJlY3RzIiwgInRlbXBsYXRlIiwgInJlZGlyZWN0IiwgInRlbXBsYXRlRGF0YSIsICJhbGlhcyIsICJwYWdlVGl0bGUiLCAiY29udGVudCIsICJmb3JtRGF0YSIsICJmb3JtVXJsIiwgImZvcm0iLCAia2V5IiwgInZhbHVlIiwgImhpZGRlbkZpZWxkIl0KfQo=
