// <pre>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/script-updater.ts

"use strict";(()=>{var g=new mw.Api;async function y(d){return(await g.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:d})).query.pages[0].revisions?.[0].slots.main.content.trim()}mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui-widgets","oojs-ui-windows"],()=>{if(mw.config.get("wgUserName")!=="Eejit43"||mw.config.get("wgPageName")!=="User:Eejit43")return;let d=document.querySelector(".mw-editsection").cloneNode(!0),u=document.createElement("a");u.href="#",u.style.fontWeight="bold",u.textContent="Sync from GitHub",u.addEventListener("click",p=>{p.preventDefault();let e=new OO.ui.WindowManager;document.body.append(e.$element[0]);let s=new l;e.addWindows([s]),s.open()}),d.querySelector("a").replaceWith(u),document.querySelector("h2#My_user_scripts + .mw-editsection").after(d);class l extends OO.ui.ProcessDialog{REPO_OWNER="Eejit43";REPO_NAME="wikipedia-scripts";SCRIPT_MESSAGE=" (via [[User:Eejit43/scripts/script-updater.js|script]])";content;scriptsMultiselect;actionsMultiselect;latestCommitHash;scripts;scriptDataUpdaters={"article-cleaner":w,"redirect-helper":O};constructor(){super({size:"medium"}),l.static.name="ScriptUpdaterDialog",l.static.title="script-updater",l.static.actions=[{action:"cancel",label:"Close",flags:["safe","close"]},{action:"save",label:"Run",flags:["primary","progressive"]}]}getSetupProcess=()=>l.super.prototype.getSetupProcess.call(this).next(()=>this.wrapAsyncMethod(this.loadScriptData).then(e=>{if(e){let i=new OO.ui.MessageWidget({type:"error",label:e});this.content=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.content.$element.append(i.$element),this.$body.append(this.content.$element),this.getActions().setAbilities({save:!1});return}this.content=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.scriptsMultiselect=new OO.ui.CheckboxMultiselectWidget({items:this.scripts.map(i=>new OO.ui.CheckboxMultioptionWidget({data:i.name,label:i.name}))}),this.scriptsMultiselect.$element[0].style.columnCount="2";let s=new OO.ui.FieldLayout(this.scriptsMultiselect,{label:new OO.ui.HtmlSnippet("<b>Scripts to update:</b>"),align:"top"});this.actionsMultiselect=new OO.ui.CheckboxMultiselectWidget({items:[{id:"documentation",name:"Update script documentation"},{id:"script",name:"Update script code"},{id:"talk",name:"Create talk redirect",selectedDefault:!1}].map(({id:i,name:r,selectedDefault:a})=>new OO.ui.CheckboxMultioptionWidget({data:i,label:r,selected:a??!0}))});let n=new OO.ui.FieldLayout(this.actionsMultiselect,{label:new OO.ui.HtmlSnippet("<b>Actions to take (if applicable):</b>"),align:"top"}),m=new OO.ui.ButtonGroupWidget({items:Object.entries(this.scriptDataUpdaters).map(([i,r])=>{let a=new OO.ui.ButtonWidget({label:i,flags:["progressive"]});return a.on("click",async()=>{mw.notify(`Fetching ${i} data...`,{tag:"update-script-data-notification"});let o=await r();mw.notify(`Successfully fetched ${i} data, opening diff...`,{type:"success",tag:"update-script-data-notification"}),await new Promise(c=>setTimeout(c,500)),this.openDiff(`User:Eejit43/scripts/${i}.json`,o)}),a})}),t=new OO.ui.FieldLayout(m,{label:new OO.ui.HtmlSnippet("<b>Script data updaters:</b>"),align:"top"});this.content.$element.append(s.$element),this.content.$element.append(n.$element),this.content.$element.append(t.$element),this.$body.append(this.content.$element)}));getActionProcess=e=>e==="cancel"?new OO.ui.Process(()=>{this.close()}):e==="save"?new OO.ui.Process(()=>{let s=this.scriptsMultiselect.findSelectedItemsData().map(n=>this.scripts.find(m=>m.name===n));this.close(),(async()=>(mw.notify("Syncing scripts...",{tag:"sync-scripts-notification"}),await Promise.all(s.map(n=>this.handleScript(n))),await this.editOrCreate("User:Eejit43/scripts-info",[this.mapScripts(this.scripts.filter(n=>!n.personal&&!n.fork)),"","=== Forks ===",this.mapScripts(this.scripts.filter(n=>n.fork)),"","=== Personal scripts ===",this.mapScripts(this.scripts.filter(n=>n.personal))].join(`
`),"Syncing script list from GitHub"),mw.notify(`Synced ${s.length} script${s.length===1?"":"s"} from GitHub!`,{type:"success",tag:"sync-scripts-notification"})))()}):l.super.prototype.getActionProcess.call(this,e);getTeardownProcess=()=>l.super.prototype.getTeardownProcess.call(this).next(()=>{this.$body.empty()});wrapAsyncMethod(e){let s=$.Deferred();return e().then(n=>s.resolve(n)),s.promise()}loadScriptData=async()=>{let e=await fetch(`https://api.github.com/repos/${this.REPO_OWNER}/${this.REPO_NAME}/commits`);if(!e.ok)return`Failed to fetch latest commit hash from GitHub: ${e.statusText} (${e.status})`;this.latestCommitHash=(await e.json())[0].sha;let s=await fetch(`https://raw.githubusercontent.com/${this.REPO_OWNER}/${this.REPO_NAME}/${this.latestCommitHash}/scripts.json`);if(!s.ok)return`Failed to fetch script data from GitHub: ${s.statusText} (${s.status})`;let n=await s.json();this.scripts=Object.entries(n).map(([m,t])=>({name:m,...t}))};async handleScript(e){let s=this.actionsMultiselect.findSelectedItemsData(),n=`User:Eejit43/scripts/${e.name}`,m=`User talk:Eejit43/scripts/${e.name}`,t=`${n}.js`,i=["{{User:Eejit43/script-documentation",e.image===!1?`| image             = ${e.image}`:null,e["in-development"]?`| in-development    = ${e["in-development"]}`:null,e["use-instead"]?`| use-instead       = ${e["use-instead"].includes("User:")?e["use-instead"]:`[[User:Eejit43/scripts/${e["use-instead"]}|${e["use-instead"]}]]`}`:null,e["image-caption"]?`| image-caption     = ${e["image-caption"]}`:null,e["other-authors"]?`| other-authors     = ${e["other-authors"].map(a=>`[[User:${a}|${a}]]`).join(", ")}`:null,`| description-short = ${e["short-description"]}`,`| description       = ${e.description}`,e.usage?`| usage             = ${e.usage}`:null,e.configuration?`| configuration     = ${e.configuration}`:null,e.changelog?`| changelog         = 
${Object.entries(e.changelog).map(([a,o])=>`* '''{{start date and age|${a}}}:'''${Array.isArray(o)?`
${o.map(c=>`** ${c}`).join(`
`)}`:` ${o}`}`).join(`
`)}`:null,`| skin-support      = {{User:Eejit43/script-documentation/skin-support|${Object.entries(e["skin-support"]).map(([a,o])=>`${a}=${o}`).join("|")}}}`,e["source-multiple"]?`| source-multiple   = ${e["source-multiple"]}`:null,`| released          = {{start date and age|${e.released}}}`,`| updated           = {{start date and age|${e.updated}}}`,"}}"].filter(Boolean),r=null;if(s.includes("script")){let a=await fetch(`https://raw.githubusercontent.com/${this.REPO_OWNER}/${this.REPO_NAME}/${this.latestCommitHash}/dist/${e.name}.js`);if(a.ok)r=await a.text();else return mw.notify(`Failed to fetch "${e.name}.js" from GitHub: ${a.statusText} (${a.status})`,{type:"error",tag:"sync-scripts-notification"})}e.personal||(s.includes("documentation")&&await this.editOrCreate(n,i.join(`
`),"Syncing script documentation from GitHub"),s.includes("talk")&&await this.editOrCreate(m,"#REDIRECT [[User talk:Eejit43]]","Redirecting script documentation talk page to main user talk page")),r&&await this.editOrCreate(t,r,"Syncing script from GitHub")}mapScripts(e){return e.map(s=>`* [[User:Eejit43/scripts/${s.name}${s.personal?".js":""}|${s.name}]] - ${s["short-description"]||s.description}${s["in-development"]?' (<span style="color: #bd2828">in development</span>)':""}${s["use-instead"]?' (<span style="color: #bd2828">deprecated</span>)':""}`).join(`
`)}async editOrCreate(e,s,n){n+=this.SCRIPT_MESSAGE,await g.edit(e,()=>({text:s,summary:n,watchlist:"watch"})).catch(async(m,t)=>{if(m==="nocreate-missing")await g.create(e,{summary:n,watchlist:"watch"},s).catch((i,r)=>{mw.notify(`Error creating ${e}: ${r?.error?.info??"Unknown error"} (${i})`,{type:"error"})});else{mw.notify(`Error editing or creating ${e}: ${t?.error?.info??"Unknown error"} (${m})`,{type:"error"});return}})}openDiff(e,s){let n={wpTextbox1:s,wpSummary:`Updating data${this.SCRIPT_MESSAGE}`,wpDiff:"1",wpWatchthis:"1",wpUltimateParam:"1"},m=new URL(`${mw.config.get("wgScriptPath")}/index.php`,window.location.origin);m.searchParams.set("title",e),m.searchParams.set("action","submit");let t=document.createElement("form");t.action=m.toString(),t.method="POST",t.target="_blank";for(let[i,r]of Object.entries(n)){let a=document.createElement("input");a.type="hidden",a.name=i,a.value=r,t.append(a)}document.body.append(t),t.submit(),t.remove()}}Object.assign(l.prototype,OO.ui.ProcessDialog.prototype)});async function w(){let u=(await y("Wikipedia:AutoWikiBrowser/Template redirects")??"").matchAll(/\* {{tl\|.+/g).toArray().map(l=>{let p=l[0].matchAll(/{{tl\|(.+?)}}/g).toArray();return{from:p.slice(0,-1).map(e=>e[1]),to:p.at(-1)[1]}});return JSON.stringify(u)}function h(d,u){let l=[];for(let p=0;p<d.length;p+=u){let e=d.slice(p,p+u);l.push(e)}return l}async function b(d){let u=0,l=[],p={continue:{}};for(;"continue"in p&&u<10;)p=await g.get({...d,...p.continue}),l.push(p),u++;return l}async function O(){let d=await g.get({action:"query",list:"categorymembers",cmtitle:"Category:Redirect templates",cmlimit:"max",formatversion:"2"}),u=await g.get({action:"query",list:"categorymembers",cmtitle:"Category:Template redirects with possibilities",cmlimit:"max",formatversion:"2"}),l=d.query.categorymembers.filter(t=>t.title.startsWith("Template:R ")&&t.title!=="Template:R template index").map(t=>({name:t.title.split(":")[1],redirect:!1})),p=u.query.categorymembers.filter(t=>t.title.startsWith("Template:R ")&&t.title!=="Template:R with possibilities").map(t=>({name:t.title.split(":")[1],redirect:!0})),e=[...l,...p].sort((t,i)=>t.name.startsWith("R comics")||t.name.startsWith("R ME")?1:i.name.startsWith("R comics")||i.name.startsWith("R ME")?-1:t.name.localeCompare(i.name)),s=Object.fromEntries(e.map(t=>[t.name,{redirect:t.redirect,parameters:{},aliases:[]}]));await Promise.all(h(e,50).map(async t=>{let i=await g.get({action:"templatedata",titles:t.map(r=>`Template:${r.name}`),formatversion:"2"});for(let r of Object.values(i.pages)){let a=Object.fromEntries(Object.entries(r.params).map(([o,c])=>[o,{aliases:c.aliases,label:c.label?.en??null,description:c.description?.en??null,type:c.type,required:c.required,suggested:c.suggested,default:c.default?.en??null,example:c.example?.en??null}]));s[r.title.split(":")[1]].parameters=a}})),await Promise.all(h(l,50).map(async t=>{let r=(await b({action:"query",titles:t.map(a=>`Template:${a.name}`),prop:"redirects",rdnamespace:10,rdlimit:"max",formatversion:"2"})).flatMap(a=>a.query.pages);for(let a of r){let o=a.redirects?.map(c=>c.title.split(":")[1]).filter(c=>!p.some(f=>f.name===c)).sort((c,f)=>c.localeCompare(f))??[];s[a.title.split(":")[1]].aliases.push(...o)}}));let n=[];await Promise.all(h(p,50).map(async t=>{let i=await g.get({action:"query",titles:t.map(r=>`Template:${r.name}`),prop:"linkshere",lhnamespace:10,lhlimit:"max",formatversion:"2"});for(let r of i.query.pages){let a=r.linkshere?.filter(o=>o.redirect).map(o=>o.title.split(":")[1]).filter(o=>!o.endsWith("/doc")&&!o.endsWith("/sandbox")).sort((o,c)=>o.localeCompare(c))??[];n.push(...a),s[r.title.split(":")[1]].aliases=a}}));let m=Object.entries(s).map(([t,i])=>{let r={...i.redirect?{redirect:!0}:{},parameters:i.parameters,aliases:i.aliases.sort((a,o)=>a.localeCompare(o))};return[t,r]});for(let t of n)for(let[,i]of m)!i.redirect&&i.aliases.includes(t)&&(i.aliases=i.aliases.filter(r=>r!==t));return JSON.stringify(Object.fromEntries(m))}})();

// </pre>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vdXRpbGl0eS50cyIsICIuLi9zY3JpcHRzL3NjcmlwdC11cGRhdGVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgdHlwZSB7IEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zIH0gZnJvbSAndHlwZXMtbWVkaWF3aWtpLWFwaSc7XG5pbXBvcnQgdHlwZSB7IFBhZ2VSZXZpc2lvbnNSZXN1bHQgfSBmcm9tICcuL2dsb2JhbC10eXBlcyc7XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgbXcuQXBpKCk7XG5cbi8qKlxuICogRmV0Y2hlcyB0aGUgY29udGVudCBvZiBhIGdpdmVuIHBhZ2UuXG4gKiBAcGFyYW0gdGl0bGUgVGhlIHRpdGxlIHRvIGZldGNoLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFnZUNvbnRlbnQodGl0bGU6IHN0cmluZykge1xuICAgIHJldHVybiAoXG4gICAgICAgIChhd2FpdCBhcGkuZ2V0KHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgIHByb3A6ICdyZXZpc2lvbnMnLFxuICAgICAgICAgICAgcnZwcm9wOiAnY29udGVudCcsXG4gICAgICAgICAgICBydnNsb3RzOiAnbWFpbicsXG4gICAgICAgICAgICB0aXRsZXM6IHRpdGxlLFxuICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcykpIGFzIFBhZ2VSZXZpc2lvbnNSZXN1bHRcbiAgICApLnF1ZXJ5LnBhZ2VzWzBdLnJldmlzaW9ucz8uWzBdLnNsb3RzLm1haW4uY29udGVudC50cmltKCk7XG59XG4iLCAiaW1wb3J0IHR5cGUge1xuICAgIENhdGVnb3J5TWVtYmVyc1Jlc3VsdCxcbiAgICBMaW5rc0hlcmVSZXN1bHQsXG4gICAgTWVkaWFXaWtpRGF0YUVycm9yLFxuICAgIFF1ZXJ5Q29udGludWF0aW9uLFxuICAgIFJlZGlyZWN0c1Jlc3VsdCxcbiAgICBUZW1wbGF0ZURhdGFSZXN1bHQsXG59IGZyb20gJ0AvZ2xvYmFsLXR5cGVzJztcbmltcG9ydCB7IGFwaSwgZ2V0UGFnZUNvbnRlbnQgfSBmcm9tICdAL3V0aWxpdHknO1xuaW1wb3J0IHR5cGUge1xuICAgIEFwaVF1ZXJ5QmFja2xpbmtzcHJvcFBhcmFtcyxcbiAgICBBcGlRdWVyeUNhdGVnb3J5TWVtYmVyc1BhcmFtcyxcbiAgICBBcGlRdWVyeVBhcmFtcyxcbiAgICBUZW1wbGF0ZURhdGFBcGlUZW1wbGF0ZURhdGFQYXJhbXMsXG59IGZyb20gJ3R5cGVzLW1lZGlhd2lraS1hcGknO1xuaW1wb3J0IHR5cGUgeyBBcGlSZXNwb25zZSB9IGZyb20gJ3R5cGVzLW1lZGlhd2lraS9tdy9BcGknO1xuXG5pbnRlcmZhY2UgU2NyaXB0IHtcbiAgICAnbmFtZSc6IHN0cmluZztcbiAgICAnaW4tZGV2ZWxvcG1lbnQnPzogYm9vbGVhbjtcbiAgICAndXNlLWluc3RlYWQnPzogc3RyaW5nO1xuICAgICdpbWFnZSc/OiBmYWxzZTtcbiAgICAnaW1hZ2UtY2FwdGlvbic/OiBzdHJpbmc7XG4gICAgJ3Nob3J0LWRlc2NyaXB0aW9uJzogc3RyaW5nO1xuICAgICdkZXNjcmlwdGlvbic6IHN0cmluZztcbiAgICAndXNhZ2UnPzogc3RyaW5nO1xuICAgICdjb25maWd1cmF0aW9uJz86IHN0cmluZztcbiAgICAnY2hhbmdlbG9nJz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPjtcbiAgICAnb3RoZXItYXV0aG9ycyc/OiBzdHJpbmdbXTtcbiAgICAnZm9yayc/OiB0cnVlO1xuICAgICdwZXJzb25hbCc/OiB0cnVlO1xuICAgICdza2luLXN1cHBvcnQnOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcbiAgICAnc291cmNlLW11bHRpcGxlJz86IHRydWU7XG4gICAgJ3JlbGVhc2VkJzogc3RyaW5nO1xuICAgICd1cGRhdGVkJzogc3RyaW5nO1xufVxuXG5tdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdvb2pzLXVpLWNvcmUnLCAnb29qcy11aS13aWRnZXRzJywgJ29vanMtdWktd2luZG93cyddLCAoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnVXNlck5hbWUnKSAhPT0gJ0Vlaml0NDMnIHx8IG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSAhPT0gJ1VzZXI6RWVqaXQ0MycpIHJldHVybjtcblxuICAgIGNvbnN0IGZ1bGxMaW5rRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tdy1lZGl0c2VjdGlvbicpIS5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFNwYW5FbGVtZW50O1xuXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBsaW5rLmhyZWYgPSAnIyc7XG4gICAgbGluay5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgIGxpbmsudGV4dENvbnRlbnQgPSAnU3luYyBmcm9tIEdpdEh1Yic7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHdpbmRvd01hbmFnZXIgPSBuZXcgT08udWkuV2luZG93TWFuYWdlcigpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh3aW5kb3dNYW5hZ2VyLiRlbGVtZW50WzBdKTtcblxuICAgICAgICBjb25zdCBzY3JpcHRVcGRhdGVyRGlhbG9nID0gbmV3IFNjcmlwdFVwZGF0ZXJEaWFsb2coKTtcbiAgICAgICAgd2luZG93TWFuYWdlci5hZGRXaW5kb3dzKFtzY3JpcHRVcGRhdGVyRGlhbG9nXSk7XG5cbiAgICAgICAgc2NyaXB0VXBkYXRlckRpYWxvZy5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBmdWxsTGlua0VsZW1lbnQucXVlcnlTZWxlY3RvcignYScpIS5yZXBsYWNlV2l0aChsaW5rKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyI015X3VzZXJfc2NyaXB0cyArIC5tdy1lZGl0c2VjdGlvbicpIS5hZnRlcihmdWxsTGlua0VsZW1lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBhIGRpYWxvZyB0aGF0IG1hbmFnZXMgdXBkYXRpbmcgc2NyaXB0cy5cbiAgICAgKi9cbiAgICBjbGFzcyBTY3JpcHRVcGRhdGVyRGlhbG9nIGV4dGVuZHMgT08udWkuUHJvY2Vzc0RpYWxvZyB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgUkVQT19PV05FUiA9ICdFZWppdDQzJztcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBSRVBPX05BTUUgPSAnd2lraXBlZGlhLXNjcmlwdHMnO1xuXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgU0NSSVBUX01FU1NBR0UgPSAnICh2aWEgW1tVc2VyOkVlaml0NDMvc2NyaXB0cy9zY3JpcHQtdXBkYXRlci5qc3xzY3JpcHRdXSknO1xuXG4gICAgICAgIHByaXZhdGUgY29udGVudCE6IE9PLnVpLlBhbmVsTGF5b3V0O1xuICAgICAgICBwcml2YXRlIHNjcmlwdHNNdWx0aXNlbGVjdCE6IE9PLnVpLkNoZWNrYm94TXVsdGlzZWxlY3RXaWRnZXQ7XG4gICAgICAgIHByaXZhdGUgYWN0aW9uc011bHRpc2VsZWN0ITogT08udWkuQ2hlY2tib3hNdWx0aXNlbGVjdFdpZGdldDtcblxuICAgICAgICBwcml2YXRlIGxhdGVzdENvbW1pdEhhc2ghOiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgc2NyaXB0cyE6IFNjcmlwdFtdO1xuXG4gICAgICAgIHByaXZhdGUgc2NyaXB0RGF0YVVwZGF0ZXJzID0ge1xuICAgICAgICAgICAgJ2FydGljbGUtY2xlYW5lcic6IGdldEFydGljbGVDbGVhbmVyRGF0YSxcbiAgICAgICAgICAgICdyZWRpcmVjdC1oZWxwZXInOiBnZXRSZWRpcmVjdEhlbHBlckRhdGEsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcih7IHNpemU6ICdtZWRpdW0nIH0pO1xuXG4gICAgICAgICAgICBTY3JpcHRVcGRhdGVyRGlhbG9nLnN0YXRpYy5uYW1lID0gJ1NjcmlwdFVwZGF0ZXJEaWFsb2cnO1xuICAgICAgICAgICAgU2NyaXB0VXBkYXRlckRpYWxvZy5zdGF0aWMudGl0bGUgPSAnc2NyaXB0LXVwZGF0ZXInO1xuICAgICAgICAgICAgU2NyaXB0VXBkYXRlckRpYWxvZy5zdGF0aWMuYWN0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NhbmNlbCcsIGxhYmVsOiAnQ2xvc2UnLCBmbGFnczogWydzYWZlJywgJ2Nsb3NlJ10gfSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NhdmUnLCBsYWJlbDogJ1J1bicsIGZsYWdzOiBbJ3ByaW1hcnknLCAncHJvZ3Jlc3NpdmUnXSB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdldFNldHVwUHJvY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBTY3JpcHRVcGRhdGVyRGlhbG9nLnN1cGVyLnByb3RvdHlwZS5nZXRTZXR1cFByb2Nlc3MuY2FsbCh0aGlzKS5uZXh0KCgpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwQXN5bmNNZXRob2QodGhpcy5sb2FkU2NyaXB0RGF0YSkudGhlbigoZXJyb3I/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRWxlbWVudCA9IG5ldyBPTy51aS5NZXNzYWdlV2lkZ2V0KHsgdHlwZTogJ2Vycm9yJywgbGFiZWw6IGVycm9yIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBuZXcgT08udWkuUGFuZWxMYXlvdXQoeyBwYWRkZWQ6IHRydWUsIGV4cGFuZGVkOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC4kZWxlbWVudC5hcHBlbmQobWVzc2FnZUVsZW1lbnQuJGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIHsgJGJvZHk6IEpRdWVyeSB9KS4kYm9keS5hcHBlbmQodGhpcy5jb250ZW50LiRlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRBY3Rpb25zKCkuc2V0QWJpbGl0aWVzKHsgc2F2ZTogZmFsc2UgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudCA9IG5ldyBPTy51aS5QYW5lbExheW91dCh7IHBhZGRlZDogdHJ1ZSwgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NyaXB0c011bHRpc2VsZWN0ID0gbmV3IE9PLnVpLkNoZWNrYm94TXVsdGlzZWxlY3RXaWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHRoaXMuc2NyaXB0cy5tYXAoKHNjcmlwdCkgPT4gbmV3IE9PLnVpLkNoZWNrYm94TXVsdGlvcHRpb25XaWRnZXQoeyBkYXRhOiBzY3JpcHQubmFtZSwgbGFiZWw6IHNjcmlwdC5uYW1lIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NyaXB0c011bHRpc2VsZWN0LiRlbGVtZW50WzBdLnN0eWxlLmNvbHVtbkNvdW50ID0gJzInO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcmlwdHNNdWx0aXNlbGVjdExheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dCh0aGlzLnNjcmlwdHNNdWx0aXNlbGVjdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG5ldyBPTy51aS5IdG1sU25pcHBldCgnPGI+U2NyaXB0cyB0byB1cGRhdGU6PC9iPicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICd0b3AnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGlvbnNNdWx0aXNlbGVjdCA9IG5ldyBPTy51aS5DaGVja2JveE11bHRpc2VsZWN0V2lkZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2RvY3VtZW50YXRpb24nLCBuYW1lOiAnVXBkYXRlIHNjcmlwdCBkb2N1bWVudGF0aW9uJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdzY3JpcHQnLCBuYW1lOiAnVXBkYXRlIHNjcmlwdCBjb2RlJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICd0YWxrJywgbmFtZTogJ0NyZWF0ZSB0YWxrIHJlZGlyZWN0Jywgc2VsZWN0ZWREZWZhdWx0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXS5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHsgaWQsIG5hbWUsIHNlbGVjdGVkRGVmYXVsdCB9KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgT08udWkuQ2hlY2tib3hNdWx0aW9wdGlvbldpZGdldCh7IGRhdGE6IGlkLCBsYWJlbDogbmFtZSwgc2VsZWN0ZWQ6IHNlbGVjdGVkRGVmYXVsdCA/PyB0cnVlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uc011bHRpc2VsZWN0TGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KHRoaXMuYWN0aW9uc011bHRpc2VsZWN0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogbmV3IE9PLnVpLkh0bWxTbmlwcGV0KCc8Yj5BY3Rpb25zIHRvIHRha2UgKGlmIGFwcGxpY2FibGUpOjwvYj4nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAndG9wJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uR3JvdXAgPSBuZXcgT08udWkuQnV0dG9uR3JvdXBXaWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IE9iamVjdC5lbnRyaWVzKHRoaXMuc2NyaXB0RGF0YVVwZGF0ZXJzKS5tYXAoKFtuYW1lLCB1cGRhdGVyXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IG5ldyBPTy51aS5CdXR0b25XaWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IFsncHJvZ3Jlc3NpdmUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24ub24oJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYEZldGNoaW5nICR7bmFtZX0gZGF0YS4uLmAsIHsgdGFnOiAndXBkYXRlLXNjcmlwdC1kYXRhLW5vdGlmaWNhdGlvbicgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZXIoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYFN1Y2Nlc3NmdWxseSBmZXRjaGVkICR7bmFtZX0gZGF0YSwgb3BlbmluZyBkaWZmLi4uYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAndXBkYXRlLXNjcmlwdC1kYXRhLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpOyAvLyBBbGxvdyB0aGUgbm90aWZpY2F0aW9uIHRvIGJlIHNob3duXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuRGlmZihgVXNlcjpFZWppdDQzL3NjcmlwdHMvJHtuYW1lfS5qc29uYCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcmlwdERhdGFVcGRhdGVyc011bHRpc2VsZWN0TGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KGJ1dHRvbkdyb3VwLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogbmV3IE9PLnVpLkh0bWxTbmlwcGV0KCc8Yj5TY3JpcHQgZGF0YSB1cGRhdGVyczo8L2I+JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ3RvcCcsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC4kZWxlbWVudC5hcHBlbmQoc2NyaXB0c011bHRpc2VsZWN0TGF5b3V0LiRlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LiRlbGVtZW50LmFwcGVuZChhY3Rpb25zTXVsdGlzZWxlY3RMYXlvdXQuJGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuJGVsZW1lbnQuYXBwZW5kKHNjcmlwdERhdGFVcGRhdGVyc011bHRpc2VsZWN0TGF5b3V0LiRlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIHsgJGJvZHk6IEpRdWVyeSB9KS4kYm9keS5hcHBlbmQodGhpcy5jb250ZW50LiRlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGdldEFjdGlvblByb2Nlc3MgPSAoYWN0aW9uOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdjYW5jZWwnKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT08udWkuUHJvY2VzcygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3NhdmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT08udWkuUHJvY2VzcygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkU2NyaXB0cyA9ICh0aGlzLnNjcmlwdHNNdWx0aXNlbGVjdC5maW5kU2VsZWN0ZWRJdGVtc0RhdGEoKSBhcyBzdHJpbmdbXSkubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgKHNjcmlwdE5hbWUpID0+IHRoaXMuc2NyaXB0cy5maW5kKChzY3JpcHQpID0+IHNjcmlwdC5uYW1lID09PSBzY3JpcHROYW1lKSEsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZvaWQgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG13Lm5vdGlmeSgnU3luY2luZyBzY3JpcHRzLi4uJywgeyB0YWc6ICdzeW5jLXNjcmlwdHMtbm90aWZpY2F0aW9uJyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoc2VsZWN0ZWRTY3JpcHRzLm1hcCgoc2NyaXB0KSA9PiB0aGlzLmhhbmRsZVNjcmlwdChzY3JpcHQpKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZWRpdE9yQ3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVc2VyOkVlaml0NDMvc2NyaXB0cy1pbmZvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwU2NyaXB0cyh0aGlzLnNjcmlwdHMuZmlsdGVyKChzY3JpcHQpID0+ICFzY3JpcHQucGVyc29uYWwgJiYgIXNjcmlwdC5mb3JrKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPT09IEZvcmtzID09PScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwU2NyaXB0cyh0aGlzLnNjcmlwdHMuZmlsdGVyKChzY3JpcHQpID0+IHNjcmlwdC5mb3JrKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPT09IFBlcnNvbmFsIHNjcmlwdHMgPT09JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBTY3JpcHRzKHRoaXMuc2NyaXB0cy5maWx0ZXIoKHNjcmlwdCkgPT4gc2NyaXB0LnBlcnNvbmFsKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU3luY2luZyBzY3JpcHQgbGlzdCBmcm9tIEdpdEh1YicsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYFN5bmNlZCAke3NlbGVjdGVkU2NyaXB0cy5sZW5ndGh9IHNjcmlwdCR7c2VsZWN0ZWRTY3JpcHRzLmxlbmd0aCA9PT0gMSA/ICcnIDogJ3MnfSBmcm9tIEdpdEh1YiFgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogJ3N5bmMtc2NyaXB0cy1ub3RpZmljYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbHNlIHJldHVybiBTY3JpcHRVcGRhdGVyRGlhbG9nLnN1cGVyLnByb3RvdHlwZS5nZXRBY3Rpb25Qcm9jZXNzLmNhbGwodGhpcywgYWN0aW9uKTtcbiAgICAgICAgfTtcblxuICAgICAgICBnZXRUZWFyZG93blByb2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gU2NyaXB0VXBkYXRlckRpYWxvZy5zdXBlci5wcm90b3R5cGUuZ2V0VGVhcmRvd25Qcm9jZXNzLmNhbGwodGhpcykubmV4dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7ICRib2R5OiBKUXVlcnkgfSkuJGJvZHkuZW1wdHkoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXcmFwcyBhbiBhc3luYyBtZXRob2QgaW50byBhIGpRdWVyeSBEZWZlcnJlZCBvYmplY3QuXG4gICAgICAgICAqIEBwYXJhbSBtZXRob2QgVGhlIG1ldGhvZCB0byB3cmFwLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB3cmFwQXN5bmNNZXRob2QobWV0aG9kOiAoKSA9PiBQcm9taXNlPHVua25vd24+KSB7XG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcblxuICAgICAgICAgICAgdm9pZCBtZXRob2QoKS50aGVuKChyZXN1bHQpID0+IGRlZmVycmVkLnJlc29sdmUocmVzdWx0KSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZHMgZGF0YSBmb3IgYWxsIHNjcmlwdHMuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGxvYWRTY3JpcHREYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHt0aGlzLlJFUE9fT1dORVJ9LyR7dGhpcy5SRVBPX05BTUV9L2NvbW1pdHNgKTtcbiAgICAgICAgICAgIGlmICghbGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLm9rKVxuICAgICAgICAgICAgICAgIHJldHVybiBgRmFpbGVkIHRvIGZldGNoIGxhdGVzdCBjb21taXQgaGFzaCBmcm9tIEdpdEh1YjogJHtsYXRlc3RDb21taXRIYXNoUmVzcG9uc2Uuc3RhdHVzVGV4dH0gKCR7bGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLnN0YXR1c30pYDtcblxuICAgICAgICAgICAgdGhpcy5sYXRlc3RDb21taXRIYXNoID0gKChhd2FpdCBsYXRlc3RDb21taXRIYXNoUmVzcG9uc2UuanNvbigpKSBhcyB7IHNoYTogc3RyaW5nIH1bXSlbMF0uc2hhO1xuXG4gICAgICAgICAgICBjb25zdCBzY3JpcHREYXRhUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyR7dGhpcy5SRVBPX09XTkVSfS8ke3RoaXMuUkVQT19OQU1FfS8ke3RoaXMubGF0ZXN0Q29tbWl0SGFzaH0vc2NyaXB0cy5qc29uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoIXNjcmlwdERhdGFSZXNwb25zZS5vaylcbiAgICAgICAgICAgICAgICByZXR1cm4gYEZhaWxlZCB0byBmZXRjaCBzY3JpcHQgZGF0YSBmcm9tIEdpdEh1YjogJHtzY3JpcHREYXRhUmVzcG9uc2Uuc3RhdHVzVGV4dH0gKCR7c2NyaXB0RGF0YVJlc3BvbnNlLnN0YXR1c30pYDtcblxuICAgICAgICAgICAgY29uc3Qgc2NyaXB0RGF0YSA9IChhd2FpdCBzY3JpcHREYXRhUmVzcG9uc2UuanNvbigpKSBhcyBSZWNvcmQ8c3RyaW5nLCBPbWl0PFNjcmlwdCwgJ25hbWUnPj47XG5cbiAgICAgICAgICAgIHRoaXMuc2NyaXB0cyA9IE9iamVjdC5lbnRyaWVzKHNjcmlwdERhdGEpLm1hcCgoW3NjcmlwdE5hbWUsIHNjcmlwdF0pID0+ICh7IG5hbWU6IHNjcmlwdE5hbWUsIC4uLnNjcmlwdCB9KSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZXMgYW5kIGVkaXRzL2NyZWF0ZXMgcGFnZXMgZm9yIGEgZ2l2ZW4gc2NyaXB0LlxuICAgICAgICAgKiBAcGFyYW0gc2NyaXB0IFRoZSBzY3JpcHQgdG8gaGFuZGxlLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTY3JpcHQoc2NyaXB0OiBTY3JpcHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbnNUb1Rha2UgPSB0aGlzLmFjdGlvbnNNdWx0aXNlbGVjdC5maW5kU2VsZWN0ZWRJdGVtc0RhdGEoKSBhcyAoJ2RvY3VtZW50YXRpb24nIHwgJ3NjcmlwdCcgfCAndGFsaycpW107XG5cbiAgICAgICAgICAgIGNvbnN0IHN1YnBhZ2VOYW1lID0gYFVzZXI6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9YDtcbiAgICAgICAgICAgIGNvbnN0IHN1YnBhZ2VUYWxrTmFtZSA9IGBVc2VyIHRhbGs6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9YDtcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdE5hbWUgPSBgJHtzdWJwYWdlTmFtZX0uanNgO1xuXG4gICAgICAgICAgICBjb25zdCBmdWxsU3VicGFnZUluZm8gPSBbXG4gICAgICAgICAgICAgICAgJ3t7VXNlcjpFZWppdDQzL3NjcmlwdC1kb2N1bWVudGF0aW9uJyxcbiAgICAgICAgICAgICAgICBzY3JpcHQuaW1hZ2UgPT09IGZhbHNlID8gYHwgaW1hZ2UgICAgICAgICAgICAgPSAke3NjcmlwdC5pbWFnZX1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHRbJ2luLWRldmVsb3BtZW50J10gPyBgfCBpbi1kZXZlbG9wbWVudCAgICA9ICR7c2NyaXB0Wydpbi1kZXZlbG9wbWVudCddfWAgOiBudWxsLFxuICAgICAgICAgICAgICAgIHNjcmlwdFsndXNlLWluc3RlYWQnXVxuICAgICAgICAgICAgICAgICAgICA/IGB8IHVzZS1pbnN0ZWFkICAgICAgID0gJHtzY3JpcHRbJ3VzZS1pbnN0ZWFkJ10uaW5jbHVkZXMoJ1VzZXI6JykgPyBzY3JpcHRbJ3VzZS1pbnN0ZWFkJ10gOiBgW1tVc2VyOkVlaml0NDMvc2NyaXB0cy8ke3NjcmlwdFsndXNlLWluc3RlYWQnXX18JHtzY3JpcHRbJ3VzZS1pbnN0ZWFkJ119XV1gfWBcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgIHNjcmlwdFsnaW1hZ2UtY2FwdGlvbiddID8gYHwgaW1hZ2UtY2FwdGlvbiAgICAgPSAke3NjcmlwdFsnaW1hZ2UtY2FwdGlvbiddfWAgOiBudWxsLFxuICAgICAgICAgICAgICAgIHNjcmlwdFsnb3RoZXItYXV0aG9ycyddXG4gICAgICAgICAgICAgICAgICAgID8gYHwgb3RoZXItYXV0aG9ycyAgICAgPSAke3NjcmlwdFsnb3RoZXItYXV0aG9ycyddLm1hcCgoYXV0aG9yKSA9PiBgW1tVc2VyOiR7YXV0aG9yfXwke2F1dGhvcn1dXWApLmpvaW4oJywgJyl9YFxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgYHwgZGVzY3JpcHRpb24tc2hvcnQgPSAke3NjcmlwdFsnc2hvcnQtZGVzY3JpcHRpb24nXX1gLFxuICAgICAgICAgICAgICAgIGB8IGRlc2NyaXB0aW9uICAgICAgID0gJHtzY3JpcHQuZGVzY3JpcHRpb259YCxcbiAgICAgICAgICAgICAgICBzY3JpcHQudXNhZ2UgPyBgfCB1c2FnZSAgICAgICAgICAgICA9ICR7c2NyaXB0LnVzYWdlfWAgOiBudWxsLFxuICAgICAgICAgICAgICAgIHNjcmlwdC5jb25maWd1cmF0aW9uID8gYHwgY29uZmlndXJhdGlvbiAgICAgPSAke3NjcmlwdC5jb25maWd1cmF0aW9ufWAgOiBudWxsLFxuICAgICAgICAgICAgICAgIHNjcmlwdC5jaGFuZ2Vsb2dcbiAgICAgICAgICAgICAgICAgICAgPyBgfCBjaGFuZ2Vsb2cgICAgICAgICA9IFxcbiR7T2JqZWN0LmVudHJpZXMoc2NyaXB0LmNoYW5nZWxvZylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChbZGF0ZSwgZGVzY3JpcHRpb25dKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAqICcnJ3t7c3RhcnQgZGF0ZSBhbmQgYWdlfCR7ZGF0ZX19fTonJycke0FycmF5LmlzQXJyYXkoZGVzY3JpcHRpb24pID8gYFxcbiR7ZGVzY3JpcHRpb24ubWFwKChsaW5lKSA9PiBgKiogJHtsaW5lfWApLmpvaW4oJ1xcbicpfWAgOiBgICR7ZGVzY3JpcHRpb259YH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCdcXG4nKX1gXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgICBgfCBza2luLXN1cHBvcnQgICAgICA9IHt7VXNlcjpFZWppdDQzL3NjcmlwdC1kb2N1bWVudGF0aW9uL3NraW4tc3VwcG9ydHwke09iamVjdC5lbnRyaWVzKHNjcmlwdFsnc2tpbi1zdXBwb3J0J10pXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKFtza2luLCBzdGF0dXNdKSA9PiBgJHtza2lufT0ke3N0YXR1c31gKVxuICAgICAgICAgICAgICAgICAgICAuam9pbignfCcpfX19YCxcbiAgICAgICAgICAgICAgICBzY3JpcHRbJ3NvdXJjZS1tdWx0aXBsZSddID8gYHwgc291cmNlLW11bHRpcGxlICAgPSAke3NjcmlwdFsnc291cmNlLW11bHRpcGxlJ119YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgYHwgcmVsZWFzZWQgICAgICAgICAgPSB7e3N0YXJ0IGRhdGUgYW5kIGFnZXwke3NjcmlwdC5yZWxlYXNlZH19fWAsXG4gICAgICAgICAgICAgICAgYHwgdXBkYXRlZCAgICAgICAgICAgPSB7e3N0YXJ0IGRhdGUgYW5kIGFnZXwke3NjcmlwdC51cGRhdGVkfX19YCxcbiAgICAgICAgICAgICAgICAnfX0nLFxuICAgICAgICAgICAgXS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAgICAgICAgIGxldCBzY3JpcHRDb250ZW50ID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKGFjdGlvbnNUb1Rha2UuaW5jbHVkZXMoJ3NjcmlwdCcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NyaXB0Q29udGVudFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJHt0aGlzLlJFUE9fT1dORVJ9LyR7dGhpcy5SRVBPX05BTUV9LyR7dGhpcy5sYXRlc3RDb21taXRIYXNofS9kaXN0LyR7c2NyaXB0Lm5hbWV9LmpzYCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChzY3JpcHRDb250ZW50UmVzcG9uc2Uub2spIHNjcmlwdENvbnRlbnQgPSBhd2FpdCBzY3JpcHRDb250ZW50UmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG13Lm5vdGlmeShcbiAgICAgICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gZmV0Y2ggXCIke3NjcmlwdC5uYW1lfS5qc1wiIGZyb20gR2l0SHViOiAke3NjcmlwdENvbnRlbnRSZXNwb25zZS5zdGF0dXNUZXh0fSAoJHtzY3JpcHRDb250ZW50UmVzcG9uc2Uuc3RhdHVzfSlgLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnZXJyb3InLCB0YWc6ICdzeW5jLXNjcmlwdHMtbm90aWZpY2F0aW9uJyB9LFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXNjcmlwdC5wZXJzb25hbCkge1xuICAgICAgICAgICAgICAgIGlmIChhY3Rpb25zVG9UYWtlLmluY2x1ZGVzKCdkb2N1bWVudGF0aW9uJykpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZWRpdE9yQ3JlYXRlKHN1YnBhZ2VOYW1lLCBmdWxsU3VicGFnZUluZm8uam9pbignXFxuJyksICdTeW5jaW5nIHNjcmlwdCBkb2N1bWVudGF0aW9uIGZyb20gR2l0SHViJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uc1RvVGFrZS5pbmNsdWRlcygndGFsaycpKVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVkaXRPckNyZWF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnBhZ2VUYWxrTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICcjUkVESVJFQ1QgW1tVc2VyIHRhbGs6RWVqaXQ0M11dJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdSZWRpcmVjdGluZyBzY3JpcHQgZG9jdW1lbnRhdGlvbiB0YWxrIHBhZ2UgdG8gbWFpbiB1c2VyIHRhbGsgcGFnZScsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzY3JpcHRDb250ZW50KSBhd2FpdCB0aGlzLmVkaXRPckNyZWF0ZShzY3JpcHROYW1lLCBzY3JpcHRDb250ZW50LCAnU3luY2luZyBzY3JpcHQgZnJvbSBHaXRIdWInKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIHNjcmlwdHMgdG8gYSBidWxsZXRlZCBsaXN0LlxuICAgICAgICAgKiBAcGFyYW0gc2NyaXB0cyBUaGUgc2NyaXB0cyB0byBtYXAuXG4gICAgICAgICAqIEByZXR1cm5zIFRoZSBtYXBwZWQgc2NyaXB0cy5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgbWFwU2NyaXB0cyhzY3JpcHRzOiBTY3JpcHRbXSkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcmlwdHNcbiAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAoc2NyaXB0KSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgYCogW1tVc2VyOkVlaml0NDMvc2NyaXB0cy8ke3NjcmlwdC5uYW1lfSR7c2NyaXB0LnBlcnNvbmFsID8gJy5qcycgOiAnJ318JHtzY3JpcHQubmFtZX1dXSAtICR7c2NyaXB0WydzaG9ydC1kZXNjcmlwdGlvbiddIHx8IHNjcmlwdC5kZXNjcmlwdGlvbn0ke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdFsnaW4tZGV2ZWxvcG1lbnQnXSA/ICcgKDxzcGFuIHN0eWxlPVwiY29sb3I6ICNiZDI4MjhcIj5pbiBkZXZlbG9wbWVudDwvc3Bhbj4pJyA6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9JHtzY3JpcHRbJ3VzZS1pbnN0ZWFkJ10gPyAnICg8c3BhbiBzdHlsZT1cImNvbG9yOiAjYmQyODI4XCI+ZGVwcmVjYXRlZDwvc3Bhbj4pJyA6ICcnfWAsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFZGl0cyBhIHBhZ2UsIG9yIGNyZWF0ZXMgaXQgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICAgICAgICogQHBhcmFtIHRpdGxlIFRoZSB0aXRsZSBvZiB0aGUgcGFnZSB0byBlZGl0LlxuICAgICAgICAgKiBAcGFyYW0gdGV4dCBUaGUgcGFnZSBjb250ZW50IHRvIHNldC5cbiAgICAgICAgICogQHBhcmFtIHN1bW1hcnkgVGhlIGVkaXQgc3VtbWFyeSAod2lsbCBhcHBlbmQgc2NyaXB0IG5vdGljZSkuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGFzeW5jIGVkaXRPckNyZWF0ZSh0aXRsZTogc3RyaW5nLCB0ZXh0OiBzdHJpbmcsIHN1bW1hcnk6IHN0cmluZykge1xuICAgICAgICAgICAgc3VtbWFyeSArPSB0aGlzLlNDUklQVF9NRVNTQUdFO1xuXG4gICAgICAgICAgICBhd2FpdCBhcGlcbiAgICAgICAgICAgICAgICAuZWRpdCh0aXRsZSwgKCkgPT4gKHsgdGV4dCwgc3VtbWFyeSwgd2F0Y2hsaXN0OiAnd2F0Y2gnIH0pKVxuICAgICAgICAgICAgICAgIC5jYXRjaChhc3luYyAoZXJyb3JDb2RlLCBlcnJvckluZm8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ25vY3JlYXRlLW1pc3NpbmcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBpLmNyZWF0ZSh0aXRsZSwgeyBzdW1tYXJ5LCB3YXRjaGxpc3Q6ICd3YXRjaCcgfSwgdGV4dCkuY2F0Y2goKGVycm9yQ29kZSwgZXJyb3JJbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgY3JlYXRpbmcgJHt0aXRsZX06ICR7KGVycm9ySW5mbyBhcyBNZWRpYVdpa2lEYXRhRXJyb3IpPy5lcnJvcj8uaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnZXJyb3InIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYEVycm9yIGVkaXRpbmcgb3IgY3JlYXRpbmcgJHt0aXRsZX06ICR7KGVycm9ySW5mbyBhcyBNZWRpYVdpa2lEYXRhRXJyb3IpPy5lcnJvcj8uaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICdlcnJvcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcGVucyBhIGRpZmYgZm9yIHRoZSBnaXZlbiBwYWdlIHRpdGxlIGFuZCBjb250ZW50LlxuICAgICAgICAgKiBAcGFyYW0gcGFnZVRpdGxlIFRoZSB0aXRsZSBvZiB0aGUgcGFnZSB0byBvcGVuIGEgZGlmZiBmb3IuXG4gICAgICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBjb250ZW50IHRvIHNldCBmb3IgdGhlIHBhZ2UuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIG9wZW5EaWZmKHBhZ2VUaXRsZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0ge1xuICAgICAgICAgICAgICAgIHdwVGV4dGJveDE6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgd3BTdW1tYXJ5OiBgVXBkYXRpbmcgZGF0YSR7dGhpcy5TQ1JJUFRfTUVTU0FHRX1gLFxuICAgICAgICAgICAgICAgIHdwRGlmZjogJzEnLCAvLyBBbnkgdHJ1dGh5IHZhbHVlIG1ha2VzIHRoaXMgd29ya1xuICAgICAgICAgICAgICAgIHdwV2F0Y2h0aGlzOiAnMScsXG4gICAgICAgICAgICAgICAgd3BVbHRpbWF0ZVBhcmFtOiAnMScsIC8vIE1hcmtzIHRoZSBlbmQgb2YgZm9ybSBkYXRhXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBmb3JtVXJsID0gbmV3IFVSTChgJHttdy5jb25maWcuZ2V0KCd3Z1NjcmlwdFBhdGgnKX0vaW5kZXgucGhwYCwgd2luZG93LmxvY2F0aW9uLm9yaWdpbik7XG4gICAgICAgICAgICBmb3JtVXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3RpdGxlJywgcGFnZVRpdGxlKTtcbiAgICAgICAgICAgIGZvcm1Vcmwuc2VhcmNoUGFyYW1zLnNldCgnYWN0aW9uJywgJ3N1Ym1pdCcpO1xuXG4gICAgICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgICAgICAgZm9ybS5hY3Rpb24gPSBmb3JtVXJsLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBmb3JtLm1ldGhvZCA9ICdQT1NUJztcbiAgICAgICAgICAgIGZvcm0udGFyZ2V0ID0gJ19ibGFuayc7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZvcm1EYXRhKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhpZGRlbkZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICBoaWRkZW5GaWVsZC50eXBlID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgaGlkZGVuRmllbGQubmFtZSA9IGtleTtcbiAgICAgICAgICAgICAgICBoaWRkZW5GaWVsZC52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoaGlkZGVuRmllbGQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChmb3JtKTtcbiAgICAgICAgICAgIGZvcm0uc3VibWl0KCk7XG4gICAgICAgICAgICBmb3JtLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbihTY3JpcHRVcGRhdGVyRGlhbG9nLnByb3RvdHlwZSwgT08udWkuUHJvY2Vzc0RpYWxvZy5wcm90b3R5cGUpO1xufSk7XG5cbi8qKlxuICogR2V0cyB0aGUgc2NyaXB0IGRhdGEgZm9yIGFydGljbGUtY2xlYW5lci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0QXJ0aWNsZUNsZWFuZXJEYXRhKCkge1xuICAgIGNvbnN0IGNvbnRlbnQgPSAoYXdhaXQgZ2V0UGFnZUNvbnRlbnQoJ1dpa2lwZWRpYTpBdXRvV2lraUJyb3dzZXIvVGVtcGxhdGUgcmVkaXJlY3RzJykpID8/ICcnO1xuXG4gICAgY29uc3QgcmVwbGFjZW1lbnRzID0gY29udGVudFxuICAgICAgICAubWF0Y2hBbGwoL1xcKiB7e3RsXFx8LisvZylcbiAgICAgICAgLnRvQXJyYXkoKVxuICAgICAgICAubWFwKChsaW5lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZXMgPSBsaW5lWzBdLm1hdGNoQWxsKC97e3RsXFx8KC4rPyl9fS9nKS50b0FycmF5KCk7XG5cbiAgICAgICAgICAgIHJldHVybiB7IGZyb206IHRlbXBsYXRlcy5zbGljZSgwLCAtMSkubWFwKCh0ZW1wbGF0ZSkgPT4gdGVtcGxhdGVbMV0pLCB0bzogdGVtcGxhdGVzLmF0KC0xKSFbMV0gfTtcbiAgICAgICAgfSk7XG5cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocmVwbGFjZW1lbnRzKTtcbn1cblxuLyoqXG4gKiBDaHVua3MgYW4gYXJyYXkgaW50byBzbWFsbGVyIGFycmF5cyBvZiBhIHNwZWNpZmllZCBzaXplLlxuICogQHBhcmFtIGFycmF5IFRoZSBhcnJheSB0byBjaHVuay5cbiAqIEBwYXJhbSBjaHVua1NpemUgVGhlIHNpemUgb2YgZWFjaCBjaHVuay5cbiAqL1xuZnVuY3Rpb24gY2h1bmtBcnJheTxUPihhcnJheTogVFtdLCBjaHVua1NpemU6IG51bWJlcik6IFRbXVtdIHtcbiAgICBjb25zdCBjaHVua2VkID0gW107XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJyYXkubGVuZ3RoOyBpbmRleCArPSBjaHVua1NpemUpIHtcbiAgICAgICAgY29uc3QgY2h1bmsgPSBhcnJheS5zbGljZShpbmRleCwgaW5kZXggKyBjaHVua1NpemUpO1xuXG4gICAgICAgIGNodW5rZWQucHVzaChjaHVuayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNodW5rZWQ7XG59XG5cbi8qKlxuICogR2V0cyBhIGNvbnRpbnVlZCBxdWVyeSByZXN1bHQgZnJvbSB0aGUgQVBJLCByZXR1cm5pbmcgYW4gYXJyYXkgb2YgcmVzdWx0cy5cbiAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgcGFyYW1ldGVycyB0byB1c2UgZm9yIHRoZSBBUEkgcmVxdWVzdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGludWVkUXVlcnkocXVlcnk6IEFwaVF1ZXJ5UGFyYW1zKTogUHJvbWlzZTxBcGlSZXNwb25zZVtdPiB7XG4gICAgbGV0IGl0ZXJhdGlvbiA9IDA7XG5cbiAgICBjb25zdCByZXR1cm5WYWx1ZSA9IFtdO1xuXG4gICAgbGV0IHJlc3BvbnNlID0geyBjb250aW51ZToge30gfSBhcyBBcGlSZXNwb25zZSAmIFF1ZXJ5Q29udGludWF0aW9uO1xuXG4gICAgd2hpbGUgKCdjb250aW51ZScgaW4gcmVzcG9uc2UgJiYgaXRlcmF0aW9uIDwgMTApIHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBhcGkuZ2V0KHsgLi4ucXVlcnksIC4uLnJlc3BvbnNlLmNvbnRpbnVlIH0gYXMgQXBpUXVlcnlQYXJhbXMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWF3YWl0LWluLWxvb3BcblxuICAgICAgICByZXR1cm5WYWx1ZS5wdXNoKHJlc3BvbnNlKTtcblxuICAgICAgICBpdGVyYXRpb24rKztcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgc2NyaXB0IGRhdGEgZm9yIHJlZGlyZWN0LWhlbHBlci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXJlY3RIZWxwZXJEYXRhKCkge1xuICAgIGNvbnN0IGFsbFJlZGlyZWN0VGVtcGxhdGVzID0gKGF3YWl0IGFwaS5nZXQoe1xuICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgIGxpc3Q6ICdjYXRlZ29yeW1lbWJlcnMnLFxuICAgICAgICBjbXRpdGxlOiAnQ2F0ZWdvcnk6UmVkaXJlY3QgdGVtcGxhdGVzJyxcbiAgICAgICAgY21saW1pdDogJ21heCcsXG4gICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICB9IHNhdGlzZmllcyBBcGlRdWVyeUNhdGVnb3J5TWVtYmVyc1BhcmFtcykpIGFzIENhdGVnb3J5TWVtYmVyc1Jlc3VsdDtcbiAgICBjb25zdCBhbGxQb3NzaWJsZVJlZGlyZWN0VGVtcGxhdGVzID0gKGF3YWl0IGFwaS5nZXQoe1xuICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgIGxpc3Q6ICdjYXRlZ29yeW1lbWJlcnMnLFxuICAgICAgICBjbXRpdGxlOiAnQ2F0ZWdvcnk6VGVtcGxhdGUgcmVkaXJlY3RzIHdpdGggcG9zc2liaWxpdGllcycsXG4gICAgICAgIGNtbGltaXQ6ICdtYXgnLFxuICAgICAgICBmb3JtYXR2ZXJzaW9uOiAnMicsXG4gICAgfSBzYXRpc2ZpZXMgQXBpUXVlcnlDYXRlZ29yeU1lbWJlcnNQYXJhbXMpKSBhcyBDYXRlZ29yeU1lbWJlcnNSZXN1bHQ7XG5cbiAgICBjb25zdCByZWRpcmVjdFRlbXBsYXRlcyA9IGFsbFJlZGlyZWN0VGVtcGxhdGVzLnF1ZXJ5LmNhdGVnb3J5bWVtYmVyc1xuICAgICAgICAuZmlsdGVyKChwYWdlKSA9PiBwYWdlLnRpdGxlLnN0YXJ0c1dpdGgoJ1RlbXBsYXRlOlIgJykgJiYgcGFnZS50aXRsZSAhPT0gJ1RlbXBsYXRlOlIgdGVtcGxhdGUgaW5kZXgnKVxuICAgICAgICAubWFwKChwYWdlKSA9PiAoeyBuYW1lOiBwYWdlLnRpdGxlLnNwbGl0KCc6JylbMV0sIHJlZGlyZWN0OiBmYWxzZSB9KSk7XG4gICAgY29uc3QgcG9zc2libGVSZWRpcmVjdFRlbXBsYXRlcyA9IGFsbFBvc3NpYmxlUmVkaXJlY3RUZW1wbGF0ZXMucXVlcnkuY2F0ZWdvcnltZW1iZXJzXG4gICAgICAgIC5maWx0ZXIoKHBhZ2UpID0+IHBhZ2UudGl0bGUuc3RhcnRzV2l0aCgnVGVtcGxhdGU6UiAnKSAmJiBwYWdlLnRpdGxlICE9PSAnVGVtcGxhdGU6UiB3aXRoIHBvc3NpYmlsaXRpZXMnKVxuICAgICAgICAubWFwKChwYWdlKSA9PiAoeyBuYW1lOiBwYWdlLnRpdGxlLnNwbGl0KCc6JylbMV0sIHJlZGlyZWN0OiB0cnVlIH0pKTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL25vLWFycmF5LXNvcnRcbiAgICBjb25zdCBhbGxUZW1wbGF0ZXMgPSBbLi4ucmVkaXJlY3RUZW1wbGF0ZXMsIC4uLnBvc3NpYmxlUmVkaXJlY3RUZW1wbGF0ZXNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgLy8gRm9yY2UgY29taWNzIGFuZCBNaWRkbGUgRWFydGggdGVtcGxhdGVzIHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RcbiAgICAgICAgaWYgKGEubmFtZS5zdGFydHNXaXRoKCdSIGNvbWljcycpIHx8IGEubmFtZS5zdGFydHNXaXRoKCdSIE1FJykpIHJldHVybiAxO1xuICAgICAgICBlbHNlIGlmIChiLm5hbWUuc3RhcnRzV2l0aCgnUiBjb21pY3MnKSB8fCBiLm5hbWUuc3RhcnRzV2l0aCgnUiBNRScpKSByZXR1cm4gLTE7XG4gICAgICAgIGVsc2UgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBmaW5hbERhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIGFsbFRlbXBsYXRlcy5tYXAoKHBhZ2UpID0+IFtwYWdlLm5hbWUsIHsgcmVkaXJlY3Q6IHBhZ2UucmVkaXJlY3QsIHBhcmFtZXRlcnM6IHt9LCBhbGlhc2VzOiBbXSBhcyBzdHJpbmdbXSB9XSksXG4gICAgKTtcblxuICAgIC8vIEZldGNoIHRoZSBUZW1wbGF0ZURhdGEgZm9yIGFsbCB0ZW1wbGF0ZXNcbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgY2h1bmtBcnJheShhbGxUZW1wbGF0ZXMsIDUwKS5tYXAoYXN5bmMgKGNodW5rKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZURhdGFRdWVyeVJlc3VsdCA9IChhd2FpdCBhcGkuZ2V0KHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICd0ZW1wbGF0ZWRhdGEnLFxuICAgICAgICAgICAgICAgIHRpdGxlczogY2h1bmsubWFwKChwYWdlKSA9PiBgVGVtcGxhdGU6JHtwYWdlLm5hbWV9YCksXG4gICAgICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgfSBzYXRpc2ZpZXMgVGVtcGxhdGVEYXRhQXBpVGVtcGxhdGVEYXRhUGFyYW1zKSkgYXMgVGVtcGxhdGVEYXRhUmVzdWx0O1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgT2JqZWN0LnZhbHVlcyh0ZW1wbGF0ZURhdGFRdWVyeVJlc3VsdC5wYWdlcykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXJhbWV0ZXJzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhwYWdlLnBhcmFtcykubWFwKChbbmFtZSwgZGF0YV0pID0+IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXNlczogZGF0YS5hbGlhc2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBkYXRhLmxhYmVsPy5lbiA/PyBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uPy5lbiA/PyBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGRhdGEudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogZGF0YS5yZXF1aXJlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWQ6IGRhdGEuc3VnZ2VzdGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGRhdGEuZGVmYXVsdD8uZW4gPz8gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFtcGxlOiBkYXRhLmV4YW1wbGU/LmVuID8/IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZmluYWxEYXRhW3BhZ2UudGl0bGUuc3BsaXQoJzonKVsxXV0ucGFyYW1ldGVycyA9IGZvcm1hdHRlZFBhcmFtZXRlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICk7XG5cbiAgICAvLyBGaW5kIGFsaWFzZXMgb2YgcmVkaXJlY3QgdGVtcGxhdGVzXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGNodW5rQXJyYXkocmVkaXJlY3RUZW1wbGF0ZXMsIDUwKS5tYXAoYXN5bmMgKGNodW5rKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbGxSZWRpcmVjdHNRdWVyeVJlc3VsdCA9IChhd2FpdCBnZXRDb250aW51ZWRRdWVyeSh7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgIHRpdGxlczogY2h1bmsubWFwKChwYWdlKSA9PiBgVGVtcGxhdGU6JHtwYWdlLm5hbWV9YCksXG4gICAgICAgICAgICAgICAgcHJvcDogJ3JlZGlyZWN0cycsXG4gICAgICAgICAgICAgICAgcmRuYW1lc3BhY2U6IDEwLFxuICAgICAgICAgICAgICAgIHJkbGltaXQ6ICdtYXgnLFxuICAgICAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5QmFja2xpbmtzcHJvcFBhcmFtcykpIGFzIFJlZGlyZWN0c1Jlc3VsdFtdO1xuXG4gICAgICAgICAgICBjb25zdCByZWRpcmVjdHNRdWVyeVJlc3VsdFBhZ2VzID0gYWxsUmVkaXJlY3RzUXVlcnlSZXN1bHQuZmxhdE1hcCgocmVzdWx0KSA9PiByZXN1bHQucXVlcnkucGFnZXMpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcmVkaXJlY3RzUXVlcnlSZXN1bHRQYWdlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZFJlZGlyZWN0cyA9XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UucmVkaXJlY3RzXG4gICAgICAgICAgICAgICAgICAgICAgICA/Lm1hcCgocmVkaXJlY3QpID0+IHJlZGlyZWN0LnRpdGxlLnNwbGl0KCc6JylbMV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChyZWRpcmVjdCkgPT4gIXBvc3NpYmxlUmVkaXJlY3RUZW1wbGF0ZXMuc29tZSgodGVtcGxhdGUpID0+IHRlbXBsYXRlLm5hbWUgPT09IHJlZGlyZWN0KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpID8/IFtdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVuaWNvcm4vbm8tYXJyYXktc29ydFxuXG4gICAgICAgICAgICAgICAgZmluYWxEYXRhW3BhZ2UudGl0bGUuc3BsaXQoJzonKVsxXV0uYWxpYXNlcy5wdXNoKC4uLm1hcHBlZFJlZGlyZWN0cyk7IC8vIERhdGEgbWlnaHQgZXhpc3QgZnJvbSBwcmV2aW91cyBxdWVyaWVzLCBzbyB1cGRhdGUgaW5zdGVhZCBvZiBvdmVyd3JpdGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICApO1xuXG4gICAgLy8gRmluZCBhbGlhc2VzIG9mIHBvc3NpYmxlIHJlZGlyZWN0IHRlbXBsYXRlc1xuICAgIGNvbnN0IGFsbEFsaWFzZXNPZlBvc3NpYmxlVGVtcGxhdGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGNodW5rQXJyYXkocG9zc2libGVSZWRpcmVjdFRlbXBsYXRlcywgNTApLm1hcChhc3luYyAoY2h1bmspID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtzUXVlcnlSZXN1bHQgPSAoYXdhaXQgYXBpLmdldCh7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgIHRpdGxlczogY2h1bmsubWFwKChwYWdlKSA9PiBgVGVtcGxhdGU6JHtwYWdlLm5hbWV9YCksXG4gICAgICAgICAgICAgICAgcHJvcDogJ2xpbmtzaGVyZScsXG4gICAgICAgICAgICAgICAgbGhuYW1lc3BhY2U6IDEwLFxuICAgICAgICAgICAgICAgIGxobGltaXQ6ICdtYXgnLFxuICAgICAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5QmFja2xpbmtzcHJvcFBhcmFtcykpIGFzIExpbmtzSGVyZVJlc3VsdDtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIGxpbmtzUXVlcnlSZXN1bHQucXVlcnkucGFnZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXBwZWRSZWRpcmVjdHMgPVxuICAgICAgICAgICAgICAgICAgICBwYWdlLmxpbmtzaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgPy5maWx0ZXIoKHBhZ2UpID0+IHBhZ2UucmVkaXJlY3QpXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChwYWdlKSA9PiBwYWdlLnRpdGxlLnNwbGl0KCc6JylbMV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChwYWdlKSA9PiAhcGFnZS5lbmRzV2l0aCgnL2RvYycpICYmICFwYWdlLmVuZHNXaXRoKCcvc2FuZGJveCcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSkgPz8gW107IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdW5pY29ybi9uby1hcnJheS1zb3J0XG5cbiAgICAgICAgICAgICAgICBhbGxBbGlhc2VzT2ZQb3NzaWJsZVRlbXBsYXRlcy5wdXNoKC4uLm1hcHBlZFJlZGlyZWN0cyk7XG5cbiAgICAgICAgICAgICAgICBmaW5hbERhdGFbcGFnZS50aXRsZS5zcGxpdCgnOicpWzFdXS5hbGlhc2VzID0gbWFwcGVkUmVkaXJlY3RzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICApO1xuXG4gICAgY29uc3QgbWFwcGVkRmluYWxEYXRhID0gT2JqZWN0LmVudHJpZXMoZmluYWxEYXRhKS5tYXAoKFtuYW1lLCB0ZW1wbGF0ZURhdGFdKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbmFsVGVtcGxhdGVEYXRhID0ge1xuICAgICAgICAgICAgLi4uKHRlbXBsYXRlRGF0YS5yZWRpcmVjdCA/IHsgcmVkaXJlY3Q6IHRydWUgfSA6IHt9KSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHRlbXBsYXRlRGF0YS5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgYWxpYXNlczogdGVtcGxhdGVEYXRhLmFsaWFzZXMuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1bmljb3JuL25vLWFycmF5LXNvcnRcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gW25hbWUsIGZpbmFsVGVtcGxhdGVEYXRhXSBhcyBjb25zdDtcbiAgICB9KTtcblxuICAgIGZvciAoY29uc3QgcG9zc2libGVUZW1wbGF0ZUFsaWFzIG9mIGFsbEFsaWFzZXNPZlBvc3NpYmxlVGVtcGxhdGVzKVxuICAgICAgICBmb3IgKGNvbnN0IFssIGRhdGFdIG9mIG1hcHBlZEZpbmFsRGF0YSlcbiAgICAgICAgICAgIGlmICghZGF0YS5yZWRpcmVjdCAmJiBkYXRhLmFsaWFzZXMuaW5jbHVkZXMocG9zc2libGVUZW1wbGF0ZUFsaWFzKSlcbiAgICAgICAgICAgICAgICBkYXRhLmFsaWFzZXMgPSBkYXRhLmFsaWFzZXMuZmlsdGVyKChhbGlhcykgPT4gYWxpYXMgIT09IHBvc3NpYmxlVGVtcGxhdGVBbGlhcyk7XG5cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmZyb21FbnRyaWVzKG1hcHBlZEZpbmFsRGF0YSkpO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7O21CQUdPLElBQU1BLEVBQU0sSUFBSSxHQUFHLElBTTFCLGVBQXNCQyxFQUFlQyxFQUFlLENBQ2hELE9BQ0ssTUFBTUYsRUFBSSxJQUFJLENBQ1gsT0FBUSxRQUNSLGNBQWUsSUFDZixLQUFNLFlBQ04sT0FBUSxVQUNSLFFBQVMsT0FDVCxPQUFRRSxDQUNaLENBQW1DLEdBQ3JDLE1BQU0sTUFBTSxDQUFDLEVBQUUsWUFBWSxDQUFDLEVBQUUsTUFBTSxLQUFLLFFBQVEsS0FBSyxDQUM1RCxDQ2lCQSxHQUFHLE9BQU8sTUFBTSxDQUFDLGlCQUFrQixlQUFnQixrQkFBbUIsaUJBQWlCLEVBQUcsSUFBTSxDQUM1RixHQUFJLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSxXQUFhLEdBQUcsT0FBTyxJQUFJLFlBQVks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QUFvQixDQUN0QixHQUFJRCxFQUFhLFNBQVcsQ0FBRSxTQUFVLEVBQUssRUFBSSxDQUFDLEVBQ2xELFdBQVlBLEVBQWEsV0FDekIsUUFBU0EsRUFBYSxRQUFRLEtBQUssQ0FBQyxFQUFHVixJQUFNLEVBQUUsY0FBY0EsQ0FBQyxDQUFDLENBQ25FLEVBRUEsTUFBTyxDQUFDbkUsRUFBTThFLENBQWlCLENBQ25DLENBQUMsRUFFRCxRQUFXQyxLQUF5QkwsRUFDaEMsT0FBVyxDQUFDLENBQUVwRSxDQUFJLElBQUtzRSxFQUNmLENBQUN0RSxFQUFLLFVBQVlBLEVBQUssUUFBUSxTQUFTeUUsQ0FBcUIsSUFDN0R6RSxFQUFLLFFBQVVBLEVBQUssUUFBUSxPQUFRMEUsR0FBVUEsSUFBVUQsQ0FBcUIsR0FFekYsT0FBTyxLQUFLLFVBQVUsT0FBTyxZQUFZSCxDQUFlLENBQUMsQ0FDN0QiLAogICJuYW1lcyI6IFsiYXBpIiwgImdldFBhZ2VDb250ZW50IiwgInRpdGxlIiwgImZ1bGxMaW5rRWxlbWVudCIsICJsaW5rIiwgImV2ZW50IiwgIndpbmRvd01hbmFnZXIiLCAic2NyaXB0VXBkYXRlckRpYWxvZyIsICJTY3JpcHRVcGRhdGVyRGlhbG9nIiwgImdldEFydGljbGVDbGVhbmVyRGF0YSIsICJnZXRSZWRpcmVjdEhlbHBlckRhdGEiLCAiZXJyb3IiLCAibWVzc2FnZUVsZW1lbnQiLCAic2NyaXB0IiwgInNjcmlwdHNNdWx0aXNlbGVjdExheW91dCIsICJpZCIsICJuYW1lIiwgInNlbGVjdGVkRGVmYXVsdCIsICJhY3Rpb25zTXVsdGlzZWxlY3RMYXlvdXQiLCAiYnV0dG9uR3JvdXAiLCAidXBkYXRlciIsICJidXR0b24iLCAiZGF0YSIsICJyZXNvbHZlIiwgInNjcmlwdERhdGFVcGRhdGVyc011bHRpc2VsZWN0TGF5b3V0IiwgImFjdGlvbiIsICJzZWxlY3RlZFNjcmlwdHMiLCAic2NyaXB0TmFtZSIsICJtZXRob2QiLCAiZGVmZXJyZWQiLCAicmVzdWx0IiwgImxhdGVzdENvbW1pdEhhc2hSZXNwb25zZSIsICJzY3JpcHREYXRhUmVzcG9uc2UiLCAic2NyaXB0RGF0YSIsICJhY3Rpb25zVG9UYWtlIiwgInN1YnBhZ2VOYW1lIiwgInN1YnBhZ2VUYWxrTmFtZSIsICJmdWxsU3VicGFnZUluZm8iLCAiYXV0aG9yIiwgImRhdGUiLCAiZGVzY3JpcHRpb24iLCAibGluZSIsICJza2luIiwgInN0YXR1cyIsICJzY3JpcHRDb250ZW50IiwgInNjcmlwdENvbnRlbnRSZXNwb25zZSIsICJzY3JpcHRzIiwgInRpdGxlIiwgInRleHQiLCAic3VtbWFyeSIsICJhcGkiLCAiZXJyb3JDb2RlIiwgImVycm9ySW5mbyIsICJwYWdlVGl0bGUiLCAiY29udGVudCIsICJmb3JtRGF0YSIsICJmb3JtVXJsIiwgImZvcm0iLCAia2V5IiwgInZhbHVlIiwgImhpZGRlbkZpZWxkIiwgInJlcGxhY2VtZW50cyIsICJnZXRQYWdlQ29udGVudCIsICJ0ZW1wbGF0ZXMiLCAidGVtcGxhdGUiLCAiY2h1bmtBcnJheSIsICJhcnJheSIsICJjaHVua1NpemUiLCAiY2h1bmtlZCIsICJpbmRleCIsICJjaHVuayIsICJnZXRDb250aW51ZWRRdWVyeSIsICJxdWVyeSIsICJpdGVyYXRpb24iLCAicmV0dXJuVmFsdWUiLCAicmVzcG9uc2UiLCAiYWxsUmVkaXJlY3RUZW1wbGF0ZXMiLCAiYWxsUG9zc2libGVSZWRpcmVjdFRlbXBsYXRlcyIsICJyZWRpcmVjdFRlbXBsYXRlcyIsICJwYWdlIiwgInBvc3NpYmxlUmVkaXJlY3RUZW1wbGF0ZXMiLCAiYWxsVGVtcGxhdGVzIiwgImEiLCAiYiIsICJmaW5hbERhdGEiLCAidGVtcGxhdGVEYXRhUXVlcnlSZXN1bHQiLCAiZm9ybWF0dGVkUGFyYW1ldGVycyIsICJyZWRpcmVjdHNRdWVyeVJlc3VsdFBhZ2VzIiwgIm1hcHBlZFJlZGlyZWN0cyIsICJyZWRpcmVjdCIsICJhbGxBbGlhc2VzT2ZQb3NzaWJsZVRlbXBsYXRlcyIsICJsaW5rc1F1ZXJ5UmVzdWx0IiwgIm1hcHBlZEZpbmFsRGF0YSIsICJ0ZW1wbGF0ZURhdGEiLCAiZmluYWxUZW1wbGF0ZURhdGEiLCAicG9zc2libGVUZW1wbGF0ZUFsaWFzIiwgImFsaWFzIl0KfQo=
