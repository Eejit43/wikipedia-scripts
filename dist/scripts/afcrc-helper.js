// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/afcrc-helper.ts

"use strict";mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui-widgets","oojs-ui-windows"],()=>{const H=mw.config.get("wgPageName")==="Wikipedia:Articles_for_creation/Redirects",G=mw.config.get("wgPageName")==="Wikipedia:Articles_for_creation/Categories";if(!H&&!G)return;const U=H?"redirect":"category";mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-tb":"p-cactions","#",`Handle ${U} creation requests`,"afcrc-helper").addEventListener("click",F=>{F.preventDefault();const j=new OO.ui.WindowManager;document.body.append(j.$element[0]);const t=new D(U,mw.config.get("wgPageName").replaceAll("_"," "));j.addWindows([t]),t.open(),t.load()});class N extends OO.ui.Dialog{constructor(){super({size:"large"});this.initialize=()=>(OO.ui.Dialog.prototype.initialize.apply(this),mw.util.addCSS(`
.afcrc-helper-actions-container div {
    margin-block: 8px;
}`),this.contentLayout=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.$body.append(this.contentLayout.$element),this.logOutput=document.createElement("div"),this.logOutput.classList.add("afcrc-helper-actions-container"),this.closeButton=new OO.ui.ButtonWidget({label:"Close",flags:["safe","close"]}),this.closeButton.on("click",()=>this.close()),this.contentLayout.$element.append(this.logOutput,this.closeButton.$element),this);N.static.name="ShowActionsDialog",N.static.title="Actions"}addLogEntry(t,e="notice"){const s=new OO.ui.MessageWidget({type:e,inline:!0,label:new OO.ui.HtmlSnippet(t)});this.logOutput.append(s.$element[0]),this.updateSize(),this.closeButton.scrollElementIntoView()}showReload(){this.closeButton.$element.remove();const t=new OO.ui.ButtonWidget({label:"Reload",flags:["primary"]});t.on("click",()=>window.location.reload()),this.contentLayout.$element.append(t.$element)}}Object.assign(N.prototype,OO.ui.Dialog.prototype);class z extends OO.ui.TextInputWidget{constructor(t){super(t);this.api=new mw.Api;this.getLookupRequest=()=>{const t=this.getValue(),e=$.Deferred();t||e.resolve([]);const s=mw.Title.newFromText(t);return this.api.get({action:"query",formatversion:"2",gaplimit:20,gapnamespace:s?.getNamespaceId()??0,gapprefix:s?.getMainText()??t,generator:"allpages"}).catch(()=>null).then(i=>{if(i?.query?.pages){const a=i.query.pages.map(c=>({data:c.title,label:c.title}));this.emit("showing-values",a),e.resolve(a)}else e.resolve([])}),e.promise({abort(){}})};this.getLookupCacheDataFromResponse=t=>t??[];this.getLookupMenuOptionsFromData=t=>t.map(({data:e,label:s})=>new OO.ui.MenuOptionWidget({data:e,label:s}));OO.ui.mixin.LookupElement.call(this,t)}}Object.assign(z.prototype,OO.ui.mixin.LookupElement.prototype);class _ extends OO.ui.TextInputWidget{constructor(t){super(t);this.api=new mw.Api;this.getLookupRequest=()=>{const t=this.getValue(),e=$.Deferred();t||e.resolve([]);const s=mw.Title.newFromText(t);return this.api.get({action:"query",formatversion:"2",gaplimit:20,gapnamespace:14,gapprefix:s?.getMainText()??t,generator:"allpages",prop:"categories"}).catch(()=>null).then(i=>{if(i?.query?.pages){const a=i.query.pages.filter(c=>!c.categories?.some(n=>n.title==="Category:Wikipedia soft redirected categories")).map(c=>{const n=c.title.split(":")[1];return{data:n,label:n}});this.emit("showing-values",a),e.resolve(a)}else e.resolve([])}),e.promise({abort(){}})};this.getLookupCacheDataFromResponse=t=>t??[];this.getLookupMenuOptionsFromData=t=>t.map(({data:e,label:s})=>new OO.ui.MenuOptionWidget({data:e,label:s}));OO.ui.mixin.LookupElement.call(this,t)}}Object.assign(_.prototype,OO.ui.mixin.LookupElement.prototype);class D extends OO.ui.ProcessDialog{constructor(t,e){super({size:"large"});this.api=new mw.Api;this.scriptMessage=" ([[User:Eejit43/scripts/afcrc-helper|afcrc-helper]])";this.templateEditorsInfo=[];this.parsedRequests=[];this.actionsToTake=[];this.editsCreationsToMake=[];this.getActionProcess=t=>t==="cancel"?new OO.ui.Process(()=>{this.getManager().closeWindow(this)}):t==="save"?new OO.ui.Process(()=>{this.performActions()}):D.super.prototype.getActionProcess.call(this,t);this.getTeardownProcess=()=>D.super.prototype.getTeardownProcess.call(this).next(()=>{this.$body.empty()});D.static.name="AfcrcHelperDialog",D.static.title="afcrc-helper",D.static.actions=[{action:"cancel",label:"Close",flags:["safe","close"]},{action:"save",label:"Run",flags:["primary","progressive"]}],this.pageTitle=e,this.requestPageType=t,mw.util.addCSS(`
.afcrc-helper-request {
    background-color: #eee;
    border-radius: 5px;
    margin: 10px;
    padding: 5px;
}

.afcrc-helper-request summary {
    cursor: pointer;
}

.afcrc-helper-request-info, .afcrc-helper-request-responder {
    margin: 5px;
}

.afcrc-helper-request-info > div, .afcrc-helper-request-responder > div {
    margin-block: 8px;
}

.afcrc-helper-request-responder > div:last-of-type {
    margin-bottom: 0;
}

.afcrc-helper-request-responder .oo-ui-fieldLayout {
    margin-left: 8px;
}

.afcrc-helper-action-radio {
    margin-top: 8px;
}

.afcrc-helper-action-radio .oo-ui-radioOptionWidget {
    display: inline;
    padding: 8px;
}

.afcrc-closing-reason-input, .afcrc-comment-input {
    max-width: 50%;
}

.afcrc-helper-template-parameters-container, .afcrc-helper-template-parameters-container details {
    background-color: #e2e2e2;
    border-radius: 5px;
    margin-block: 10px;
    padding: 5px;
}

.afcrc-helper-template-parameters-container {
    margin-left: 8px;
}

.afcrc-helper-template-parameters-container summary {
    cursor: pointer;
    font-weight: bold;
}

.afcrc-helper-template-parameters-container details {
    background-color: #d1cece;
    margin-block: 5px;
}

#afcrc-helper-no-templates-message {
    padding: 5px;
}`)}async load(){const t=await this.api.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:"User:Eejit43/scripts/redirect-helper.json"});this.redirectTemplates=JSON.parse(t.query.pages?.[0]?.revisions?.[0]?.slots?.main?.content||"{}");const e=await this.api.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:this.pageTitle});this.pageContent=e.query.pages[0].revisions[0].slots.main.content.trim(),this.parseRequests(),this.loadInputElements()}parseRequests(){this.beforeText=this.pageContent.match(/^(.*?)==/s)[1],this.pageContent=this.pageContent.replace(/^.*?==/s,"==").replaceAll(new RegExp(`\\[https?:${mw.config.get("wgServer")}/(.*?)]`,"g"),"[[$1]]");const t=[...this.pageContent.matchAll(/^==.*?==$(\s*(?!==[^=]).*)*/gim)].map(e=>e[0]);for(const e of t){if(/{{afc-c\|/i.test(e))continue;const i=e.match(/^==(.*?)==$/m)[1].trim();if(U==="redirect"){const a={},c=[...i.matchAll(/\[\[(.*?)]]/g)].map(g=>g[1]?.trim().replace(/^:/,"").replaceAll("_"," ")).filter(Boolean);if(c.length===0)continue;a.pages=c;const n=e.match(/Target of redirect: ?\[\[(.*?)]]/)?.[1].trim().replace(/^:/,"").replaceAll("_"," ");if(!n)continue;a.target=n,a.reason=e.match(/reason: ?(.*?)\*source(?: \(if applicable\))?:/is)?.[1].trim()??"",a.source=e.match(/source(?: \(if applicable\))?: ?(.*?)(?:<references \/>|\n\n)/is)?.[1].trim()??"";const o=e.match(e.includes("<references />")?/<references \/>\n+(.*)/:new RegExp(`(?:<references \\/>${a.source?`|${a.source.replaceAll(/[\s#$()*+,.?[\\\]^{|}-]/g,"\\$&")}`:""})
+(.*)`))?.[1].trim();if(!o)continue;a.requester={type:/\[\[User( talk)?:/.test(o)?"user":"ip",name:o.match(/(?:Special:Contributions\/|User(?: talk)?:)(.*?)\|/)[1].trim()},this.parsedRequests.push(a),this.actionsToTake.push({target:a.target,requests:Object.fromEntries(c.map(g=>[g,{originalText:{fullSectionText:e,sectionText:e.replace(/^==.*?==$/m,"").trim()},action:"none"}]))})}else{const a={},c=i.match(/:?Category:(.*?)(]]|$)/)?.[1].trim();if(!c)continue;a.category=c.replaceAll("_"," "),a.examples=[...e.match(/example pages which belong to this category:(.*?)parent category\/categories:/is)[1].matchAll(/\*\s*(?:\[\[)?(.*?)(\||]]|\s*?\n)/g)].map(O=>O[1].trim().replace(/^:/,"").replaceAll("_"," ")).filter(Boolean)??[],a.parents=[...e.match(/parent category\/categories:(.*?)(\n\n|\n\[\[(special:contributions\/|user:))/is)[1].matchAll(/(?<!\|)#?:?Category:(.*?)(\||]]|\s*?\n)/g)].map(O=>O[1].trim().replace(/^:/,"").replaceAll("_"," ")).filter(Boolean)??[];const n=e.indexOf("[[User:"),o=e.indexOf("[[User talk:"),g=e.indexOf("[[Special:Contributions/"),h=Math.min(...[n,o,g].filter(O=>O!==-1));if(h===Number.POSITIVE_INFINITY||(a.requester=h===g?{type:"ip",name:e.match(/\[\[Special:Contributions\/(.*?)(\||]])/)[1].trim()}:{type:"user",name:e.match(/\[\[User(?: talk)?:(.*?)(\||]])/)[1].trim()},!a.requester.name))continue;this.parsedRequests.push(a),this.actionsToTake.push({category:a.category,examples:a.examples,parents:a.parents,originalText:{fullSectionText:e,sectionText:e.replace(/^==.*?==$/m,"").trim()},action:"none"})}}}loadInputElements(){if(this.parsedRequests.length>0){let t=0;const e=()=>{const i=Math.min(t+5,this.parsedRequests.length);this.title.setLabel(`afcrc-helper (loading ${t+1}-${i}/${this.parsedRequests.length} requests)`);for(let a=t;a<i;a++)this.requestPageType==="redirect"?this.loadRedirectRequestElements(a):this.loadCategoryRequestElements(a);i<this.parsedRequests.length?(t=i,setTimeout(e,0)):this.title.setLabel(`afcrc-helper (${this.parsedRequests.length} requests loaded)`)};e()}else{const t=new OO.ui.MessageWidget({type:"notice",label:"No valid requests to handle!"}),e=new OO.ui.PanelLayout({padded:!0,expanded:!1});e.$element.append(t.$element),this.$body.append(e.$element),this.updateSize()}}loadRedirectRequestElements(t){const e=this.parsedRequests[t],s=document.createElement("details");s.classList.add("afcrc-helper-request"),s.addEventListener("click",()=>setTimeout(()=>this.updateSize(),0));const i=document.createElement("summary");i.innerHTML=e.pages.map(u=>`<b>${u}</b>`).join(", ")+" \u2192 ";const a=document.createElement("a");a.target="_blank",a.href=mw.util.getUrl(e.target),a.textContent=e.target,i.append(a),s.append(i);const c=document.createElement("div");c.classList.add("afcrc-helper-request-info");const n=document.createElement("span");n.style.color="dimgray",n.textContent="None";const o=document.createElement("div"),g=document.createElement("b");g.textContent="Reason: ",o.append(g),e.reason?o.append(e.reason):o.append(n.cloneNode(!0)),c.append(o);const h=document.createElement("div"),O=document.createElement("b");O.textContent="Source: ",h.append(O),e.source?h.append(e.source):h.append(n.cloneNode(!0)),c.append(h);const v=document.createElement("div"),C=document.createElement("b");C.textContent="Requester: ",v.append(C);const k=document.createElement("a");k.target="_blank",k.href=e.requester.type==="user"?mw.util.getUrl(`User:${e.requester.name}`):mw.util.getUrl(`Special:Contributions/${e.requester.name}`),k.textContent=e.requester.name,v.append(k),c.append(v),s.append(c),s.append(document.createElement("hr"));const R=document.createElement("div");R.classList.add("afcrc-helper-request-responder");for(const u of e.pages){const p=document.createElement("div"),l=document.createElement("b");l.textContent=u+" \u2192 "+e.target,p.append(l);let f,b;const w=new OO.ui.RadioSelectWidget({classes:["afcrc-helper-action-radio"],items:["Accept","Deny","Comment","Close","None"].map(y=>new OO.ui.RadioOptionWidget({data:y,label:y}))});w.selectItemByLabel("None"),w.on("choose",()=>{setTimeout(()=>this.updateSize(),0);const y=w.findSelectedItem().getData().toLowerCase();if(this.actionsToTake[t].requests[u].action=y,!f||!b){const T=new OO.ui.MenuTagMultiselectWidget({allowArbitrary:!1,allowReordering:!1,options:Object.keys(this.redirectTemplates).map(m=>({data:m,label:m}))});T.getMenu().filterMode="substring",T.on("change",()=>{const m=T.getValue().sort((M,E)=>M.toLowerCase().localeCompare(E.toLowerCase()));T.getValue().join(";")!==m.join(";")&&T.setValue(m),this.actionsToTake[t].requests[u].redirectTemplates=m;for(const M of this.templateEditorsInfo)M.details.style.display="none";let I=0;for(const M of T.getValue()){const E=this.templateEditorsInfo.find(V=>V.name===M);E&&(E.details.style.display="block",I++)}r.textContent=`Template parameters (${I>0?`for ${I} template${I>1?"s":""}`:"none to show"})`,d.style.display=I>0?"none":"block"}),f=new OO.ui.FieldLayout(T,{classes:["afcrc-helper-tag-select-layout"],align:"inline",label:"Redirect templates:"}),p.append(f.$element[0]),b=document.createElement("details"),b.classList.add("afcrc-helper-template-parameters-container");const r=document.createElement("summary");r.textContent="Template parameters (none to show)",b.append(r);for(const[m,I]of Object.entries(this.redirectTemplates)){const M=Object.entries(I.parameters);if(M.length===0)continue;const E=document.createElement("details");E.style.display="none";const V=document.createElement("summary");V.textContent=m,E.append(V);const Q={name:m,details:E,parameters:[]};for(const[B,q]of M){const J=new OO.ui.TextInputWidget({placeholder:q.default?.toString(),required:q.required}),Y=new OO.ui.FieldLayout(J,{label:new OO.ui.HtmlSnippet(`${B}${!q.label||B.toLowerCase()===q.label?.toLowerCase()?"":` (${q.label})`}${q.description?` (${q.description})`:""} (type: ${q.type}) ${q.suggested?" (suggested)":""}${q.example?` (example: "${q.example}")`:""}`),align:"inline"});E.append(Y.$element[0]),Q.parameters.push({name:B,aliases:q.aliases,editor:J})}b.append(E),this.templateEditorsInfo.push(Q)}const d=document.createElement("div");d.id="afcrc-helper-no-templates-message",d.textContent="No templates with parameters to display!",b.append(d),p.append(b)}if(["comment","close"].includes(y)){W.$element.show();const T=P.getValue().trim();T?this.actionsToTake[t].requests[u].comment=T:delete this.actionsToTake[t].requests[u].comment}else W.$element.hide(),delete this.actionsToTake[t].requests[u].comment;switch(this.updateRequestColor(s,t),f.$element.hide(),b.style.display="none",x.$element.hide(),L.$element.hide(),y){case"accept":{f.$element.show(),b.style.display="block";break}case"deny":{x.$element.show();break}case"close":{L.$element.show();break}}});const S=new OO.ui.ComboBoxInputWidget({classes:["afcrc-closing-reason-input"],placeholder:"autofill:unlikely",options:[["exists","existing pages"],["empty","empty submissions"],["notarget","nonexistent or no provided target"],["notitle","no title provided"],["unlikely","unlikely redirects"],["notredirect","article creation requests"],["externallink","external link redirects"],["editrequest","edit requests"],["notenglish","requests not in English"]].map(([y,T])=>({data:`autofill:${y}`,label:`Autofilled text for ${T}`}))});S.on("change",()=>{this.actionsToTake[t].requests[u].denyReason=S.getValue()||"autofill:unlikely"}),S.setValue("autofill:unlikely"),S.getMenu().selectItemByData("autofill:unlikely");const x=new OO.ui.FieldLayout(S,{align:"inline",label:"Deny reason:"});x.$element.hide();const A=new OO.ui.DropdownWidget({classes:["afcrc-closing-reason-input"],menu:{items:[["No response","r"],["Succeeded","s"],["Withdrawn","w"]].map(([y,T])=>new OO.ui.MenuOptionWidget({data:T,label:y}))}});A.getMenu().on("choose",()=>{const y=A.getMenu().findSelectedItem();this.actionsToTake[t].requests[u].closingReason={name:y.getLabel(),id:y.getData()},this.updateRequestColor(s,t)}),A.getMenu().selectItemByData("r"),this.actionsToTake[t].requests[u].closingReason={name:"No response",id:"r"};const L=new OO.ui.FieldLayout(A,{align:"inline",label:"Closing reason:"});L.$element.hide();const P=new OO.ui.TextInputWidget;P.on("change",()=>{const y=P.getValue().trim();y?this.actionsToTake[t].requests[u].comment=y:delete this.actionsToTake[t].requests[u].comment});const W=new OO.ui.FieldLayout(P,{classes:["afcrc-comment-input"],align:"inline",label:"Comment:"});W.$element.hide(),p.append(w.$element[0],x.$element[0],L.$element[0],W.$element[0]),R.append(p)}s.append(R),this.$body.append(s),this.updateSize()}loadCategoryRequestElements(t){const e=this.parsedRequests[t],s=document.createElement("details");s.classList.add("afcrc-helper-request"),s.addEventListener("click",()=>setTimeout(()=>this.updateSize(),0));const i=document.createElement("summary");i.innerHTML=`<b>Category:${e.category}</b>`,s.append(i);const a=document.createElement("div");a.classList.add("afcrc-helper-request-info");const c=document.createElement("span");c.style.color="dimgray",c.textContent="None";const n=document.createElement("div"),o=document.createElement("b");if(o.textContent="Examples: ",n.append(o),e.examples.length>0)for(const[r,d]of e.examples.entries()){const m=document.createElement("a");m.target="_blank",m.href=mw.util.getUrl(d),m.textContent=d,n.append(m),r!==e.examples.length-1&&n.append(", ")}else n.append(c.cloneNode(!0));a.append(n);const g=document.createElement("div"),h=document.createElement("b");if(h.textContent="Parents: ",g.append(h),e.parents.length>0)for(const[r,d]of e.parents.entries()){const m=document.createElement("a");m.target="_blank",m.href=mw.util.getUrl(`Category:${d}`),m.textContent=d,g.append(m),r!==e.parents.length-1&&g.append(", ")}else g.append(c.cloneNode(!0));a.append(g);const O=document.createElement("div"),v=document.createElement("b");v.textContent="Requester: ",O.append(v);const C=document.createElement("a");C.target="_blank",C.href=e.requester.type==="user"?mw.util.getUrl(`User:${e.requester.name}`):mw.util.getUrl(`Special:Contributions/${e.requester.name}`),C.textContent=e.requester.name,O.append(C),a.append(O),s.append(a),s.append(document.createElement("hr"));const k=document.createElement("div");k.classList.add("afcrc-helper-request-responder");const R=new OO.ui.RadioSelectWidget({classes:["afcrc-helper-action-radio"],items:["Accept","Deny","Comment","Close","None"].map(r=>new OO.ui.RadioOptionWidget({data:r,label:r}))});R.selectItemByLabel("None"),R.on("choose",()=>{setTimeout(()=>this.updateSize(),0);const r=R.findSelectedItem().getData().toLowerCase();if(this.actionsToTake[t].action=r,["comment","close"].includes(r)){T.$element.show();const d=y.getValue().trim();d?this.actionsToTake[t].comment=d:delete this.actionsToTake[t].comment}else T.$element.hide(),delete this.actionsToTake[t].comment;switch(this.updateRequestColor(s,t),f.$element.hide(),x.$element.hide(),L.$element.hide(),W.$element.hide(),r){case"accept":{f.$element.show(),x.$element.show();break}case"deny":{L.$element.show();break}case"close":{W.$element.show();break}}});const u=new z({placeholder:"Add pages here"});u.on("change",()=>{let r=u.getValue();r=r.replace(new RegExp(`^(https?:)?/{2}?${mw.config.get("wgServer").replace(/^\/{2}/,"")}/wiki/`),""),r=r.replace(/^:/,""),r.length>0&&u.setValue(r[0].toUpperCase()+r.slice(1).replaceAll("_"," "))}),u.on("showing-values",r=>{for(const d of r)p.addAllowedValue(d.data)});const p=new OO.ui.TagMultiselectWidget({allowReordering:!1,inputPosition:"outline",inputWidget:u});p.on("change",()=>{const r=p.getValue().sort((d,m)=>d.toLowerCase().localeCompare(m.toLowerCase()));p.getValue().join(";")!==r.join(";")&&p.setValue(r),this.actionsToTake[t].examples=r});const{examples:l}=this.actionsToTake[t];for(const r of l)p.addAllowedValue(r);p.setValue(l);const f=new OO.ui.FieldLayout(p,{align:"inline",label:"Pages to categorize:"});f.$element.hide();const b=new _({placeholder:"Add categories here"});b.on("change",()=>{let r=b.getValue();r=r.replace(new RegExp(`^(https?:)?/{2}?${mw.config.get("wgServer").replace(/^\/{2}/,"")}/wiki/`),""),r=r.replace(/^Category:/,""),r.length>0&&b.setValue(r[0].toUpperCase()+r.slice(1).replaceAll("_"," "))}),b.on("showing-values",r=>{for(const d of r)w.addAllowedValue(d.data)});const w=new OO.ui.TagMultiselectWidget({allowReordering:!1,inputPosition:"outline",inputWidget:b});w.on("change",()=>{const r=w.getValue().sort((d,m)=>d.toLowerCase().localeCompare(m.toLowerCase()));w.getValue().join(";")!==r.join(";")&&w.setValue(r),this.actionsToTake[t].parents=r});const{parents:S}=this.actionsToTake[t];for(const r of S)w.addAllowedValue(r);w.setValue(S);const x=new OO.ui.FieldLayout(w,{align:"inline",label:"Categories:"});x.$element.hide();const A=new OO.ui.ComboBoxInputWidget({classes:["afcrc-closing-reason-input"],placeholder:"autofill:unlikely",options:[["exists","existing categories"],["empty","empty submissions"],["unlikely","categories that are unlikely to have enough pages"],["notcategory","page creation requests"],["notenglish","requests not in English"]].map(([r,d])=>({data:`autofill:${r}`,label:`Autofilled text for ${d}`}))});A.on("change",()=>{this.actionsToTake[t].denyReason=A.getValue()||"autofill:unlikely"}),A.setValue("autofill:unlikely"),A.getMenu().selectItemByData("autofill:unlikely");const L=new OO.ui.FieldLayout(A,{align:"inline",label:"Deny reason:"});L.$element.hide();const P=new OO.ui.DropdownWidget({classes:["afcrc-closing-reason-input"],menu:{items:[["No response","r"],["Succeeded","s"],["Withdrawn","w"]].map(([r,d])=>new OO.ui.MenuOptionWidget({data:d,label:r}))}});P.getMenu().on("choose",()=>{const r=P.getMenu().findSelectedItem();this.actionsToTake[t].closingReason={name:r.getLabel(),id:r.getData()},this.updateRequestColor(s,t)}),P.getMenu().selectItemByData("r"),this.actionsToTake[t].closingReason={name:"No response",id:"r"};const W=new OO.ui.FieldLayout(P,{align:"inline",label:"Closing reason:"});W.$element.hide();const y=new OO.ui.TextInputWidget;y.on("change",()=>{const r=y.getValue().trim();r?this.actionsToTake[t].comment=r:delete this.actionsToTake[t].comment});const T=new OO.ui.FieldLayout(y,{classes:["afcrc-comment-input"],align:"inline",label:"Comment:"});T.$element.hide(),k.append(R.$element[0],f.$element[0],x.$element[0],L.$element[0],W.$element[0],T.$element[0]),s.append(k),this.$body.append(s),this.updateSize()}updateRequestColor(t,e){if(this.requestPageType==="redirect"){const s=Object.values(this.actionsToTake[e].requests),i=s.every(o=>o.action==="accept"||o.action==="deny"),a=s.find(o=>o.action==="close")?.closingReason?.id,c=s.every(o=>o.action==="close"&&o.closingReason?.id===a);let n="";if(i){const o=s.filter(h=>h.action==="accept").length,g=s.filter(h=>h.action==="deny").length;o>0&&g>0?n="#fff17e":o>0?n="#a0ffa0":n="#ffcece"}else c&&(a==="r"?n="#ffcece":a==="s"?n="#90c090":n="#b8b8b8");t.style.backgroundColor=n}else{const{action:s}=this.actionsToTake[e];let i="";s==="accept"?i="#a0ffa0":s==="deny"?i="#ffcece":s==="close"&&(this.actionsToTake[e].closingReason?.id==="r"?i="#ffcece":this.actionsToTake[e].closingReason?.id==="s"?i="#90c090":i="#b8b8b8"),t.style.backgroundColor=i}}async performActions(){const t=new OO.ui.WindowManager;document.body.append(t.$element[0]);const e=new N;t.addWindows([e]),e.open();const s={accepted:0,denied:0,"commented on":0,closed:0};let i=(await this.api.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:this.pageTitle})).query.pages[0].revisions[0].slots.main.content.trim();if(this.requestPageType==="redirect")if(this.actionsToTake.some(c=>Object.values(c.requests).some(n=>n.action!=="none"))){for(const{target:n,requests:o}of this.actionsToTake){const g=Object.values(o).some(l=>l.action==="accept"||l.action==="deny"),h=Object.values(o).every(l=>l.action==="accept"||l.action==="deny"),O=Object.values(o).find(l=>l.action==="close")?.closingReason?.id,v=Object.values(o).every(l=>l.action==="close"&&l.closingReason?.id===O),C=[],k=[],R=[],u=Object.keys(o).length;for(const[l,f]of Object.entries(o))switch(f.action){case"accept":{g&&!h?e.addLogEntry(`Not all requests to "${n}" were accepted or denied, the handling of "${l}" will be ignored.`,"warning"):(C.push(l),s.accepted++);break}case"deny":{g&&!h?e.addLogEntry(`Not all requests to "${n}" were accepted or denied, the handling of "${l}" is being ignored.`,"warning"):(k.push([l,f.denyReason]),s.denied++);break}case"comment":{f.comment?(R.push([l,f.comment]),s["commented on"]++):e.addLogEntry(`The request to create "${l}" \u2192 "${n}" was marked to be commented on, but no comment was provided so it will be skipped.`,"warning");break}case"close":{v?(f.comment&&R.push([l,f.comment]),s.closed++):e.addLogEntry(`Not all requests to "${n}" were closed with the same reason, the handling of "${l}" is being ignored.`,"warning");break}}let p={pageText:i,...Object.values(o)[0].originalText};if(R.length>0&&(p=this.modifySectionData(p,{append:this.mapComments(R,u===1,R.length===u)})),h){let l;if(C.length>0&&k.length>0){l="p";const f=`* {{subst:AfC redirect}} (${C.map(w=>`[[${w}]]`).join(", ")}) ~~~~`,b=this.mapDeniedReasons(k,!1,!1);for(const w of C)this.handleAcceptedRedirect(w,o[w],n);p=this.modifySectionData(p,{append:`${f}
${b}`})}else if(C.length>0){l="a";for(const f of C)this.handleAcceptedRedirect(f,o[f],n);p=this.modifySectionData(p,{append:`* {{subst:AfC redirect${C.length>1?"|all":""}}} ~~~~`})}else l="d",p=this.modifySectionData(p,{append:this.mapDeniedReasons(k,u===1,!0)});p=this.modifySectionData(p,{prepend:`{{AfC-c|${l}}}`,append:"{{AfC-c|b}}"})}else v&&(p=this.modifySectionData(p,{prepend:`{{AfC-c|${O}}}`,append:"{{AfC-c|b}}"}));i=p.pageText}if(this.beforeText+this.pageContent===i)return e.addLogEntry("No requests have been handled (page content identical)!");const c=Object.entries(s).filter(([,n])=>n>0).map(([n,o])=>`${n} ${o}`).join(", ");this.editsCreationsToMake.push({type:"edit",title:this.pageTitle,transform:()=>({text:i,summary:`Handling AfC redirect requests (${c})${this.scriptMessage}`})}),await this.makeAllEditsCreations(e),e.addLogEntry("All changes made, click below to reload!","success"),e.showReload()}else e.addLogEntry("No requests have been handled!");else if(this.actionsToTake.some(c=>c.action!=="none")){for(const n of this.actionsToTake){let o={pageText:i,...n.originalText};switch(n.action){case"accept":{o=this.modifySectionData(o,{prepend:"{{AfC-c|a}}",append:`* {{subst:AfC category}} ~~~~
{{AfC-c|b}}`}),this.handleAcceptedCategory(n),s.accepted++;break}case"deny":{o=this.modifySectionData(o,{prepend:"{{AfC-c|d}}",append:`* ${this.formatDeniedReason(n.denyReason)} ~~~~
{{AfC-c|b}}`}),s.denied++;break}case"comment":{n.comment?(o=this.modifySectionData(o,{append:`* {{AfC comment|1=${n.comment}}} ~~~~`}),s["commented on"]++):e.addLogEntry(`The request to create "${n.category}" was marked to be commented on, but no comment was provided so it will be skipped.`,"warning");break}case"close":{o=this.modifySectionData(o,{prepend:`{{AfC-c|${n.closingReason.id}}}`,append:(n.comment?`* {{AfC comment|1=${n.comment}}} ~~~~`:"")+`
{{AfC-c|b}`}),s.closed++;break}}i=o.pageText}if(this.beforeText+this.pageContent===i)return e.addLogEntry("No requests have been handled (page content identical)!");const c=Object.entries(s).filter(([,n])=>n>0).map(([n,o])=>`${n} ${o}`).join(", ");this.editsCreationsToMake.push({type:"edit",title:this.pageTitle,transform:()=>({text:i,summary:`Handling AfC category requests (${c})${this.scriptMessage}`})}),await this.makeAllEditsCreations(e),e.addLogEntry("All changes made, click below to reload!","success"),e.showReload()}else e.addLogEntry("No requests have been handled!")}formatDeniedReason(t){const e=t.startsWith("autofill:")?t.replace("autofill:",""):`decline|2=${t}`;return`{{subst:AfC ${this.requestPageType}|${e}}}`}mapDeniedReasons(t,e,s){if(e)return`* ${this.formatDeniedReason(t[0][1])} ~~~~`;const i={};for(const[c,n]of t)i[n]||(i[n]=[]),i[n].push(c);const a=Object.entries(i);return a.map(([c,n])=>`* ${this.formatDeniedReason(c)}${a.length>1||!s?` (${n.map(o=>`[[${o}]]`).join(", ")})`:""} ~~~~`).join(`
`)}mapComments(t,e,s){if(e)return`* {{AfC comment|1=${t[0][1]}}} ~~~~`;const i={};for(const[c,n]of t)i[n]||(i[n]=[]),i[n].push(c);const a=Object.entries(i);return a.map(([c,n])=>`* {{AfC comment|1=${c}}}${a.length>1||!s?` (${n.map(o=>`[[${o}]]`).join(", ")})`:""} ~~~~`).join(`
`)}modifySectionData(t,{prepend:e,append:s}){const{fullSectionText:i,sectionText:a}=t;return e&&(t.sectionText=e+`
`+t.sectionText),s&&(t.sectionText+=`
`+s),t.fullSectionText=t.fullSectionText.replace(a,t.sectionText),t.pageText=t.pageText.replace(i,t.fullSectionText),t}handleAcceptedRedirect(t,e,s){const i=e.redirectTemplates&&e.redirectTemplates.length>0?e.redirectTemplates.map(a=>{const c=this.templateEditorsInfo.find(o=>o.name===a);if(!c)return`{{${a}}}`;const n=c.parameters.map((o,g)=>{const h=o.editor.getValue().trim();return h?`|${o.name===(g+1).toString()?"":`${o.name}=`}${h}`:null}).filter(Boolean).join("");return`{{${a}${n}}}`}):null;this.editsCreationsToMake.push({type:"create",isRedirect:!0,title:t,text:`#REDIRECT [[${s}]]${i?`

{{Redirect category shell|
${i.join(`
`)}
}}`:""}`,summary:`Creating redirect to [[${s}]] as requested at [[WP:AFC/R]]${this.scriptMessage}`},{type:"create",isRedirect:!1,title:mw.Title.newFromText(t).getTalkPage().getPrefixedText(),text:`{{WikiProject banner shell|
{{WikiProject Articles for creation|ts={{subst:LOCALTIMESTAMP}}|reviewer=${mw.config.get("wgUserName")}}}
}}`,summary:`Adding [[Wikipedia:WikiProject Articles for creation|WikiProject Articles for creation]] banner${this.scriptMessage}`})}handleAcceptedCategory(t){this.editsCreationsToMake.push({type:"create",isRedirect:!1,title:`Category:${t.category}`,text:t.parents.map(e=>`[[Category:${e}]]`).join(`
`),summary:`Creating category as requested at [[WP:AFC/C]]${this.scriptMessage}`},{type:"create",isRedirect:!1,title:`Category talk:${t.category}`,text:`{{WikiProject banner shell|
{{WikiProject Articles for creation|ts={{subst:LOCALTIMESTAMP}}|reviewer=${mw.config.get("wgUserName")}}}
}}`,summary:`Adding [[Wikipedia:WikiProject Articles for creation|WikiProject Articles for creation]] banner${this.scriptMessage}`},...t.examples.map(e=>({type:"edit",title:e,transform:({content:s})=>({text:`${s}
[[Category:${t.category}]]`,summary:`Adding page to [[:Category:${t.category}]] as requested at [[WP:AFC/C]]${this.scriptMessage}`})})))}async makeAllEditsCreations(t){for(const e of this.editsCreationsToMake){const s=e.type==="edit"?this.api.edit(e.title,e.transform):this.api.create(e.title,{summary:e.summary},e.text),i=document.createElement("a");i.target="_blank",i.href=mw.util.getUrl(e.title,"isRedirect"in e&&e.isRedirect?{redirect:"no"}:void 0),i.textContent=e.title,t.addLogEntry(`${e.type==="edit"?"Editing":"Creating"} ${i.outerHTML}...`),await s.catch(async(a,c)=>{a==="ratelimited"?(t.addLogEntry(`Rate limited. Waiting for 70 seconds... (resuming at ${new Date(Date.now()+7e4).toLocaleTimeString()})`,"warning"),await new Promise(n=>setTimeout(n,7e4)),t.addLogEntry("Continuing...","success"),await s.catch((n,o)=>{t.addLogEntry(`Error ${e.type==="edit"?"editing":"creating"} ${i.outerHTML}: ${o?.error.info??"Unknown error"} (${n}).`,"error")})):t.addLogEntry(`Error ${e.type==="edit"?"editing":"creating"} ${i.outerHTML}: ${c?.error.info??"Unknown error"} (${a}).`,"error")})}}}Object.assign(D.prototype,OO.ui.ProcessDialog.prototype)});

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy9hZmNyYy1oZWxwZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwaUVkaXRQYWdlUGFyYW1zLCBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcyB9IGZyb20gJ3R5cGVzLW1lZGlhd2lraS9hcGlfcGFyYW1zJztcbmltcG9ydCB7IEFwaVF1ZXJ5QWxsUGFnZXNHZW5lcmF0b3JQYXJhbXMsIE1lZGlhV2lraURhdGFFcnJvciwgUGFnZVJldmlzaW9uc1Jlc3VsdCB9IGZyb20gJy4uL2dsb2JhbC10eXBlcyc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdW5pY29ybi9wcmV2ZW50LWFiYnJldmlhdGlvbnNcbmltcG9ydCB7IFJlZGlyZWN0VGVtcGxhdGVEYXRhLCBUZW1wbGF0ZUVkaXRvckVsZW1lbnRJbmZvIH0gZnJvbSAnLi9yZWRpcmVjdC1oZWxwZXInO1xuXG5tdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdvb2pzLXVpLWNvcmUnLCAnb29qcy11aS13aWRnZXRzJywgJ29vanMtdWktd2luZG93cyddLCAoKSA9PiB7XG4gICAgY29uc3QgaXNSZWRpcmVjdFJlcXVlc3RQYWdlID0gbXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpID09PSAnV2lraXBlZGlhOkFydGljbGVzX2Zvcl9jcmVhdGlvbi9SZWRpcmVjdHMnO1xuICAgIGNvbnN0IGlzQ2F0ZWdvcnlSZXF1ZXN0UGFnZSA9IG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSA9PT0gJ1dpa2lwZWRpYTpBcnRpY2xlc19mb3JfY3JlYXRpb24vQ2F0ZWdvcmllcyc7XG5cbiAgICBpZiAoIWlzUmVkaXJlY3RSZXF1ZXN0UGFnZSAmJiAhaXNDYXRlZ29yeVJlcXVlc3RQYWdlKSByZXR1cm47XG5cbiAgICBjb25zdCByZXF1ZXN0UGFnZVR5cGUgPSBpc1JlZGlyZWN0UmVxdWVzdFBhZ2UgPyAncmVkaXJlY3QnIDogJ2NhdGVnb3J5JztcblxuICAgIGNvbnN0IGxpbmsgPSBtdy51dGlsLmFkZFBvcnRsZXRMaW5rKG13LmNvbmZpZy5nZXQoJ3NraW4nKSA9PT0gJ21pbmVydmEnID8gJ3AtdGInIDogJ3AtY2FjdGlvbnMnLCAnIycsIGBIYW5kbGUgJHtyZXF1ZXN0UGFnZVR5cGV9IGNyZWF0aW9uIHJlcXVlc3RzYCwgJ2FmY3JjLWhlbHBlcicpITtcblxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB3aW5kb3dNYW5hZ2VyID0gbmV3IE9PLnVpLldpbmRvd01hbmFnZXIoKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmQod2luZG93TWFuYWdlci4kZWxlbWVudFswXSk7XG5cbiAgICAgICAgY29uc3QgYWZjcmNIZWxwZXJEaWFsb2cgPSBuZXcgQWZjcmNIZWxwZXJEaWFsb2cocmVxdWVzdFBhZ2VUeXBlLCBtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJykucmVwbGFjZUFsbCgnXycsICcgJykpO1xuXG4gICAgICAgIHdpbmRvd01hbmFnZXIuYWRkV2luZG93cyhbYWZjcmNIZWxwZXJEaWFsb2ddKTtcblxuICAgICAgICBhZmNyY0hlbHBlckRpYWxvZy5vcGVuKCk7XG4gICAgICAgIGFmY3JjSGVscGVyRGlhbG9nLmxvYWQoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgaXMgYW4gYWN0aW9uIGRpYWxvZy5cbiAgICAgKi9cbiAgICBjbGFzcyBTaG93QWN0aW9uc0RpYWxvZyBleHRlbmRzIE9PLnVpLkRpYWxvZyB7XG4gICAgICAgIHByaXZhdGUgY29udGVudExheW91dCE6IE9PLnVpLlBhbmVsTGF5b3V0O1xuICAgICAgICBwcml2YXRlIGxvZ091dHB1dCE6IEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBwcml2YXRlIGNsb3NlQnV0dG9uITogT08udWkuQnV0dG9uV2lkZ2V0O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoeyBzaXplOiAnbGFyZ2UnIH0pO1xuXG4gICAgICAgICAgICBTaG93QWN0aW9uc0RpYWxvZy5zdGF0aWMubmFtZSA9ICdTaG93QWN0aW9uc0RpYWxvZyc7XG4gICAgICAgICAgICBTaG93QWN0aW9uc0RpYWxvZy5zdGF0aWMudGl0bGUgPSAnQWN0aW9ucyc7XG4gICAgICAgIH1cblxuICAgICAgICBpbml0aWFsaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgT08udWkuRGlhbG9nLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMpO1xuXG4gICAgICAgICAgICBtdy51dGlsLmFkZENTUyhgXG4uYWZjcmMtaGVscGVyLWFjdGlvbnMtY29udGFpbmVyIGRpdiB7XG4gICAgbWFyZ2luLWJsb2NrOiA4cHg7XG59YCk7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGVudExheW91dCA9IG5ldyBPTy51aS5QYW5lbExheW91dCh7IHBhZGRlZDogdHJ1ZSwgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7ICRib2R5OiBKUXVlcnkgfSkuJGJvZHkuYXBwZW5kKHRoaXMuY29udGVudExheW91dC4kZWxlbWVudCk7XG5cbiAgICAgICAgICAgIHRoaXMubG9nT3V0cHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0aGlzLmxvZ091dHB1dC5jbGFzc0xpc3QuYWRkKCdhZmNyYy1oZWxwZXItYWN0aW9ucy1jb250YWluZXInKTtcblxuICAgICAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbiA9IG5ldyBPTy51aS5CdXR0b25XaWRnZXQoeyBsYWJlbDogJ0Nsb3NlJywgZmxhZ3M6IFsnc2FmZScsICdjbG9zZSddIH0pO1xuICAgICAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRMYXlvdXQuJGVsZW1lbnQuYXBwZW5kKHRoaXMubG9nT3V0cHV0LCB0aGlzLmNsb3NlQnV0dG9uLiRlbGVtZW50KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZHMgYSBsb2cgZW50cnkgdG8gdGhlIGRpYWxvZy5cbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gYWRkLlxuICAgICAgICAgKiBAcGFyYW0gdHlwZSBUaGUgbWVzc2FnZSB0eXBlLlxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGFkZExvZ0VudHJ5KG1lc3NhZ2U6IHN0cmluZywgdHlwZTogT08udWkuTWVzc2FnZVdpZGdldC5UeXBlID0gJ25vdGljZScpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VXaWRnZXQgPSBuZXcgT08udWkuTWVzc2FnZVdpZGdldCh7IHR5cGUsIGlubGluZTogdHJ1ZSwgbGFiZWw6IG5ldyBPTy51aS5IdG1sU25pcHBldChtZXNzYWdlKSB9KTtcblxuICAgICAgICAgICAgdGhpcy5sb2dPdXRwdXQuYXBwZW5kKG1lc3NhZ2VXaWRnZXQuJGVsZW1lbnRbMF0pO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKTtcblxuICAgICAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbi5zY3JvbGxFbGVtZW50SW50b1ZpZXcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmVzIHRoZSBjbG9zZSBidXR0b24gYW5kIGFkZHMgYSByZWxvYWQgYnV0dG9uLlxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNob3dSZWxvYWQoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQnV0dG9uLiRlbGVtZW50LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCByZWxvYWRCdXR0b24gPSBuZXcgT08udWkuQnV0dG9uV2lkZ2V0KHsgbGFiZWw6ICdSZWxvYWQnLCBmbGFnczogWydwcmltYXJ5J10gfSk7XG4gICAgICAgICAgICByZWxvYWRCdXR0b24ub24oJ2NsaWNrJywgKCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpKTtcblxuICAgICAgICAgICAgdGhpcy5jb250ZW50TGF5b3V0LiRlbGVtZW50LmFwcGVuZChyZWxvYWRCdXR0b24uJGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbihTaG93QWN0aW9uc0RpYWxvZy5wcm90b3R5cGUsIE9PLnVpLkRpYWxvZy5wcm90b3R5cGUpO1xuXG4gICAgaW50ZXJmYWNlIExvb2t1cEVsZW1lbnRDb25maWcgZXh0ZW5kcyBPTy51aS5UZXh0SW5wdXRXaWRnZXQuQ29uZmlnT3B0aW9ucywgT08udWkubWl4aW4uTG9va3VwRWxlbWVudC5Db25maWdPcHRpb25zIHt9XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGEgcGFnZSBsb29rdXAgZWxlbWVudC5cbiAgICAgKi9cbiAgICBjbGFzcyBQYWdlSW5wdXRXaWRnZXQgZXh0ZW5kcyBPTy51aS5UZXh0SW5wdXRXaWRnZXQge1xuICAgICAgICAvLyBVdGlsaXR5IHZhcmlhYmxlc1xuICAgICAgICBwcml2YXRlIGFwaSA9IG5ldyBtdy5BcGkoKTtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihjb25maWc6IExvb2t1cEVsZW1lbnRDb25maWcpIHtcbiAgICAgICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgICAgICAgICBPTy51aS5taXhpbi5Mb29rdXBFbGVtZW50LmNhbGwodGhpcyBhcyB1bmtub3duIGFzIE9PLnVpLm1peGluLkxvb2t1cEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBnZXRMb29rdXBSZXF1ZXN0ID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcblxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkgZGVmZXJyZWQucmVzb2x2ZShbXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFRpdGxlID0gbXcuVGl0bGUubmV3RnJvbVRleHQodmFsdWUpO1xuXG4gICAgICAgICAgICB0aGlzLmFwaVxuICAgICAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgICAgICAgICAgZ2FwbGltaXQ6IDIwLFxuICAgICAgICAgICAgICAgICAgICBnYXBuYW1lc3BhY2U6IHBhcnNlZFRpdGxlPy5nZXROYW1lc3BhY2VJZCgpID8/IDAsXG4gICAgICAgICAgICAgICAgICAgIGdhcHByZWZpeDogcGFyc2VkVGl0bGU/LmdldE1haW5UZXh0KCkgPz8gdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRvcjogJ2FsbHBhZ2VzJyxcbiAgICAgICAgICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeUFsbFBhZ2VzR2VuZXJhdG9yUGFyYW1zKVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBudWxsKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQ6IHsgcXVlcnk6IHsgcGFnZXM6IHsgdGl0bGU6IHN0cmluZyB9W10gfSB9IHwgbnVsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Py5xdWVyeT8ucGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VzID0gcmVzdWx0LnF1ZXJ5LnBhZ2VzLm1hcCgocGFnZSkgPT4gKHsgZGF0YTogcGFnZS50aXRsZSwgbGFiZWw6IHBhZ2UudGl0bGUgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3Nob3dpbmctdmFsdWVzJywgcGFnZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHBhZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGRlZmVycmVkLnJlc29sdmUoW10pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSh7IGFib3J0KCkge30gfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWVtcHR5LWZ1bmN0aW9uXG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0TG9va3VwQ2FjaGVEYXRhRnJvbVJlc3BvbnNlID0gPFQ+KHJlc3BvbnNlOiBUW10gfCBudWxsIHwgdW5kZWZpbmVkKSA9PiByZXNwb25zZSA/PyBbXTtcblxuICAgICAgICBnZXRMb29rdXBNZW51T3B0aW9uc0Zyb21EYXRhID0gKGRhdGE6IHsgZGF0YTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH1bXSkgPT4gZGF0YS5tYXAoKHsgZGF0YSwgbGFiZWwgfSkgPT4gbmV3IE9PLnVpLk1lbnVPcHRpb25XaWRnZXQoeyBkYXRhLCBsYWJlbCB9KSk7XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbihQYWdlSW5wdXRXaWRnZXQucHJvdG90eXBlLCBPTy51aS5taXhpbi5Mb29rdXBFbGVtZW50LnByb3RvdHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGEgY2F0ZWdvcnkgbG9va3VwIGVsZW1lbnQuXG4gICAgICovXG4gICAgY2xhc3MgQ2F0ZWdvcnlJbnB1dFdpZGdldCBleHRlbmRzIE9PLnVpLlRleHRJbnB1dFdpZGdldCB7XG4gICAgICAgIC8vIFV0aWxpdHkgdmFyaWFibGVzXG4gICAgICAgIHByaXZhdGUgYXBpID0gbmV3IG13LkFwaSgpO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogTG9va3VwRWxlbWVudENvbmZpZykge1xuICAgICAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgICAgIE9PLnVpLm1peGluLkxvb2t1cEVsZW1lbnQuY2FsbCh0aGlzIGFzIHVua25vd24gYXMgT08udWkubWl4aW4uTG9va3VwRWxlbWVudCwgY29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdldExvb2t1cFJlcXVlc3QgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICBpZiAoIXZhbHVlKSBkZWZlcnJlZC5yZXNvbHZlKFtdKTtcblxuICAgICAgICAgICAgY29uc3QgcGFyc2VkVGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dCh2YWx1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuYXBpXG4gICAgICAgICAgICAgICAgLmdldCh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgICAgICAgICBnYXBsaW1pdDogMjAsXG4gICAgICAgICAgICAgICAgICAgIGdhcG5hbWVzcGFjZTogMTQsXG4gICAgICAgICAgICAgICAgICAgIGdhcHByZWZpeDogcGFyc2VkVGl0bGU/LmdldE1haW5UZXh0KCkgPz8gdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRvcjogJ2FsbHBhZ2VzJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvcDogJ2NhdGVnb3JpZXMnLFxuICAgICAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5QWxsUGFnZXNHZW5lcmF0b3JQYXJhbXMpXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IG51bGwpXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogeyBxdWVyeTogeyBwYWdlczogeyB0aXRsZTogc3RyaW5nOyBjYXRlZ29yaWVzPzogeyB0aXRsZTogc3RyaW5nIH1bXSB9W10gfSB9IHwgbnVsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Py5xdWVyeT8ucGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VzID0gcmVzdWx0LnF1ZXJ5LnBhZ2VzIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigocGFnZSkgPT4gIXBhZ2UuY2F0ZWdvcmllcz8uc29tZSgoY2F0ZWdvcnkpID0+IGNhdGVnb3J5LnRpdGxlID09PSAnQ2F0ZWdvcnk6V2lraXBlZGlhIHNvZnQgcmVkaXJlY3RlZCBjYXRlZ29yaWVzJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocGFnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZVdpdGhvdXROYW1lc3BhY2UgPSBwYWdlLnRpdGxlLnNwbGl0KCc6JylbMV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogdGl0bGVXaXRob3V0TmFtZXNwYWNlLCBsYWJlbDogdGl0bGVXaXRob3V0TmFtZXNwYWNlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnc2hvd2luZy12YWx1ZXMnLCBwYWdlcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocGFnZXMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgZGVmZXJyZWQucmVzb2x2ZShbXSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKHsgYWJvcnQoKSB7fSB9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgICAgICAgfTtcblxuICAgICAgICBnZXRMb29rdXBDYWNoZURhdGFGcm9tUmVzcG9uc2UgPSA8VD4ocmVzcG9uc2U6IFRbXSB8IG51bGwgfCB1bmRlZmluZWQpID0+IHJlc3BvbnNlID8/IFtdO1xuXG4gICAgICAgIGdldExvb2t1cE1lbnVPcHRpb25zRnJvbURhdGEgPSAoZGF0YTogeyBkYXRhOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfVtdKSA9PiBkYXRhLm1hcCgoeyBkYXRhLCBsYWJlbCB9KSA9PiBuZXcgT08udWkuTWVudU9wdGlvbldpZGdldCh7IGRhdGEsIGxhYmVsIH0pKTtcbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKENhdGVnb3J5SW5wdXRXaWRnZXQucHJvdG90eXBlLCBPTy51aS5taXhpbi5Mb29rdXBFbGVtZW50LnByb3RvdHlwZSk7XG5cbiAgICBpbnRlcmZhY2UgUmVkaXJlY3RSZXF1ZXN0RGF0YSB7XG4gICAgICAgIHBhZ2VzOiBzdHJpbmdbXTtcbiAgICAgICAgdGFyZ2V0OiBzdHJpbmc7XG4gICAgICAgIHJlYXNvbjogc3RyaW5nO1xuICAgICAgICBzb3VyY2U6IHN0cmluZztcbiAgICAgICAgcmVxdWVzdGVyOiB7IHR5cGU6ICd1c2VyJyB8ICdpcCc7IG5hbWU6IHN0cmluZyB9O1xuICAgIH1cblxuICAgIGludGVyZmFjZSBDYXRlZ29yeVJlcXVlc3REYXRhIHtcbiAgICAgICAgY2F0ZWdvcnk6IHN0cmluZztcbiAgICAgICAgZXhhbXBsZXM6IHN0cmluZ1tdO1xuICAgICAgICBwYXJlbnRzOiBzdHJpbmdbXTtcbiAgICAgICAgcmVxdWVzdGVyOiB7IHR5cGU6ICd1c2VyJyB8ICdpcCc7IG5hbWU6IHN0cmluZyB9O1xuICAgIH1cblxuICAgIHR5cGUgQWN0aW9uVHlwZSA9ICdhY2NlcHQnIHwgJ2RlbnknIHwgJ2NvbW1lbnQnIHwgJ2Nsb3NlJyB8ICdub25lJztcblxuICAgIGludGVyZmFjZSBBY3Rpb24ge1xuICAgICAgICBvcmlnaW5hbFRleHQ6IHsgZnVsbFNlY3Rpb25UZXh0OiBzdHJpbmc7IHNlY3Rpb25UZXh0OiBzdHJpbmcgfTtcbiAgICAgICAgYWN0aW9uOiBBY3Rpb25UeXBlO1xuICAgICAgICBjb21tZW50Pzogc3RyaW5nO1xuICAgICAgICBkZW55UmVhc29uPzogc3RyaW5nO1xuICAgICAgICBjbG9zaW5nUmVhc29uPzogeyBuYW1lOiBzdHJpbmc7IGlkOiBzdHJpbmcgfTtcbiAgICB9XG5cbiAgICB0eXBlIFJlZGlyZWN0QWN0aW9uID0gQWN0aW9uICYgeyByZWRpcmVjdFRlbXBsYXRlcz86IHN0cmluZ1tdIH07XG5cbiAgICB0eXBlIENhdGVnb3J5QWN0aW9uID0gQWN0aW9uICYgeyBjYXRlZ29yeTogc3RyaW5nOyBleGFtcGxlczogc3RyaW5nW107IHBhcmVudHM6IHN0cmluZ1tdIH07XG5cbiAgICB0eXBlIFJlZGlyZWN0QWN0aW9ucyA9IHsgdGFyZ2V0OiBzdHJpbmc7IHJlcXVlc3RzOiBSZWNvcmQ8c3RyaW5nLCBSZWRpcmVjdEFjdGlvbj4gfVtdO1xuXG4gICAgdHlwZSBDYXRlZ29yeUFjdGlvbnMgPSBDYXRlZ29yeUFjdGlvbltdO1xuXG4gICAgLyoqXG4gICAgICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBhIGRpYWxvZyB0aGF0IGhhbmRsZXMgcmVkaXJlY3QgYW5kIGNhdGVnb3J5IHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGNsYXNzIEFmY3JjSGVscGVyRGlhbG9nIGV4dGVuZHMgT08udWkuUHJvY2Vzc0RpYWxvZyB7XG4gICAgICAgIHByaXZhdGUgYXBpID0gbmV3IG13LkFwaSgpO1xuXG4gICAgICAgIHByaXZhdGUgc2NyaXB0TWVzc2FnZSA9ICcgKFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvYWZjcmMtaGVscGVyfGFmY3JjLWhlbHBlcl1dKSc7XG5cbiAgICAgICAgcHJpdmF0ZSByZXF1ZXN0UGFnZVR5cGU6ICdyZWRpcmVjdCcgfCAnY2F0ZWdvcnknO1xuICAgICAgICBwcml2YXRlIHBhZ2VUaXRsZSE6IHN0cmluZztcblxuICAgICAgICBwcml2YXRlIHJlZGlyZWN0VGVtcGxhdGVzITogUmVkaXJlY3RUZW1wbGF0ZURhdGE7XG5cbiAgICAgICAgcHJpdmF0ZSB0ZW1wbGF0ZUVkaXRvcnNJbmZvOiBUZW1wbGF0ZUVkaXRvckVsZW1lbnRJbmZvW10gPSBbXTtcblxuICAgICAgICBwcml2YXRlIGJlZm9yZVRleHQhOiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgcGFnZUNvbnRlbnQhOiBzdHJpbmc7XG5cbiAgICAgICAgcHJpdmF0ZSBwYXJzZWRSZXF1ZXN0czogUmVkaXJlY3RSZXF1ZXN0RGF0YVtdIHwgQ2F0ZWdvcnlSZXF1ZXN0RGF0YVtdID0gW107XG4gICAgICAgIHByaXZhdGUgYWN0aW9uc1RvVGFrZTogUmVkaXJlY3RBY3Rpb25zIHwgQ2F0ZWdvcnlBY3Rpb25zID0gW107XG4gICAgICAgIHByaXZhdGUgZWRpdHNDcmVhdGlvbnNUb01ha2U6IChcbiAgICAgICAgICAgIHwgeyB0eXBlOiAnZWRpdCc7IHRpdGxlOiBzdHJpbmc7IHRyYW5zZm9ybTogKGRhdGE6IHsgY29udGVudDogc3RyaW5nIH0pID0+IEFwaUVkaXRQYWdlUGFyYW1zIH1cbiAgICAgICAgICAgIHwgeyB0eXBlOiAnY3JlYXRlJzsgaXNSZWRpcmVjdDogYm9vbGVhbjsgdGl0bGU6IHN0cmluZzsgdGV4dDogc3RyaW5nOyBzdW1tYXJ5OiBzdHJpbmcgfVxuICAgICAgICApW10gPSBbXTtcblxuICAgICAgICBjb25zdHJ1Y3RvcihyZXF1ZXN0UGFnZVR5cGU6ICdyZWRpcmVjdCcgfCAnY2F0ZWdvcnknLCBwYWdlVGl0bGU6IHN0cmluZykge1xuICAgICAgICAgICAgc3VwZXIoeyBzaXplOiAnbGFyZ2UnIH0pO1xuXG4gICAgICAgICAgICBBZmNyY0hlbHBlckRpYWxvZy5zdGF0aWMubmFtZSA9ICdBZmNyY0hlbHBlckRpYWxvZyc7XG4gICAgICAgICAgICBBZmNyY0hlbHBlckRpYWxvZy5zdGF0aWMudGl0bGUgPSAnYWZjcmMtaGVscGVyJztcbiAgICAgICAgICAgIEFmY3JjSGVscGVyRGlhbG9nLnN0YXRpYy5hY3Rpb25zID0gW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY2FuY2VsJywgbGFiZWw6ICdDbG9zZScsIGZsYWdzOiBbJ3NhZmUnLCAnY2xvc2UnXSB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2F2ZScsIGxhYmVsOiAnUnVuJywgZmxhZ3M6IFsncHJpbWFyeScsICdwcm9ncmVzc2l2ZSddIH0sXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICB0aGlzLnBhZ2VUaXRsZSA9IHBhZ2VUaXRsZTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFBhZ2VUeXBlID0gcmVxdWVzdFBhZ2VUeXBlO1xuXG4gICAgICAgICAgICBtdy51dGlsLmFkZENTUyhgXG4uYWZjcmMtaGVscGVyLXJlcXVlc3Qge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIG1hcmdpbjogMTBweDtcbiAgICBwYWRkaW5nOiA1cHg7XG59XG5cbi5hZmNyYy1oZWxwZXItcmVxdWVzdCBzdW1tYXJ5IHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5hZmNyYy1oZWxwZXItcmVxdWVzdC1pbmZvLCAuYWZjcmMtaGVscGVyLXJlcXVlc3QtcmVzcG9uZGVyIHtcbiAgICBtYXJnaW46IDVweDtcbn1cblxuLmFmY3JjLWhlbHBlci1yZXF1ZXN0LWluZm8gPiBkaXYsIC5hZmNyYy1oZWxwZXItcmVxdWVzdC1yZXNwb25kZXIgPiBkaXYge1xuICAgIG1hcmdpbi1ibG9jazogOHB4O1xufVxuXG4uYWZjcmMtaGVscGVyLXJlcXVlc3QtcmVzcG9uZGVyID4gZGl2Omxhc3Qtb2YtdHlwZSB7XG4gICAgbWFyZ2luLWJvdHRvbTogMDtcbn1cblxuLmFmY3JjLWhlbHBlci1yZXF1ZXN0LXJlc3BvbmRlciAub28tdWktZmllbGRMYXlvdXQge1xuICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG59XG5cbi5hZmNyYy1oZWxwZXItYWN0aW9uLXJhZGlvIHtcbiAgICBtYXJnaW4tdG9wOiA4cHg7XG59XG5cbi5hZmNyYy1oZWxwZXItYWN0aW9uLXJhZGlvIC5vby11aS1yYWRpb09wdGlvbldpZGdldCB7XG4gICAgZGlzcGxheTogaW5saW5lO1xuICAgIHBhZGRpbmc6IDhweDtcbn1cblxuLmFmY3JjLWNsb3NpbmctcmVhc29uLWlucHV0LCAuYWZjcmMtY29tbWVudC1pbnB1dCB7XG4gICAgbWF4LXdpZHRoOiA1MCU7XG59XG5cbi5hZmNyYy1oZWxwZXItdGVtcGxhdGUtcGFyYW1ldGVycy1jb250YWluZXIsIC5hZmNyYy1oZWxwZXItdGVtcGxhdGUtcGFyYW1ldGVycy1jb250YWluZXIgZGV0YWlscyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2UyZTJlMjtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgbWFyZ2luLWJsb2NrOiAxMHB4O1xuICAgIHBhZGRpbmc6IDVweDtcbn1cblxuLmFmY3JjLWhlbHBlci10ZW1wbGF0ZS1wYXJhbWV0ZXJzLWNvbnRhaW5lciB7XG4gICAgbWFyZ2luLWxlZnQ6IDhweDtcbn1cblxuLmFmY3JjLWhlbHBlci10ZW1wbGF0ZS1wYXJhbWV0ZXJzLWNvbnRhaW5lciBzdW1tYXJ5IHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5hZmNyYy1oZWxwZXItdGVtcGxhdGUtcGFyYW1ldGVycy1jb250YWluZXIgZGV0YWlscyB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2QxY2VjZTtcbiAgICBtYXJnaW4tYmxvY2s6IDVweDtcbn1cblxuI2FmY3JjLWhlbHBlci1uby10ZW1wbGF0ZXMtbWVzc2FnZSB7XG4gICAgcGFkZGluZzogNXB4O1xufWApO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0QWN0aW9uUHJvY2VzcyA9IChhY3Rpb246IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NhbmNlbCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPTy51aS5Qcm9jZXNzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRNYW5hZ2VyKCkuY2xvc2VXaW5kb3codGhpcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdzYXZlJylcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9PLnVpLlByb2Nlc3MoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1BY3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbHNlIHJldHVybiBBZmNyY0hlbHBlckRpYWxvZy5zdXBlci5wcm90b3R5cGUuZ2V0QWN0aW9uUHJvY2Vzcy5jYWxsKHRoaXMsIGFjdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0VGVhcmRvd25Qcm9jZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIEFmY3JjSGVscGVyRGlhbG9nLnN1cGVyLnByb3RvdHlwZS5nZXRUZWFyZG93blByb2Nlc3MuY2FsbCh0aGlzKS5uZXh0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIHsgJGJvZHk6IEpRdWVyeSB9KS4kYm9keS5lbXB0eSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWQgZWxlbWVudHMgaW4gdGhlIHdpbmRvdy5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBhc3luYyBsb2FkKCkge1xuICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RUZW1wbGF0ZVJlc3BvbnNlID0gKGF3YWl0IHRoaXMuYXBpLmdldCh7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgICAgICBwcm9wOiAncmV2aXNpb25zJyxcbiAgICAgICAgICAgICAgICBydnByb3A6ICdjb250ZW50JyxcbiAgICAgICAgICAgICAgICBydnNsb3RzOiAnbWFpbicsXG4gICAgICAgICAgICAgICAgdGl0bGVzOiAnVXNlcjpFZWppdDQzL3NjcmlwdHMvcmVkaXJlY3QtaGVscGVyLmpzb24nLFxuICAgICAgICAgICAgfSBzYXRpc2ZpZXMgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMpKSBhcyBQYWdlUmV2aXNpb25zUmVzdWx0O1xuXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VGVtcGxhdGVzID0gSlNPTi5wYXJzZShyZWRpcmVjdFRlbXBsYXRlUmVzcG9uc2UucXVlcnkucGFnZXM/LlswXT8ucmV2aXNpb25zPy5bMF0/LnNsb3RzPy5tYWluPy5jb250ZW50IHx8ICd7fScpIGFzIFJlZGlyZWN0VGVtcGxhdGVEYXRhO1xuXG4gICAgICAgICAgICBjb25zdCBwYWdlUmV2aXNpb24gPSAoYXdhaXQgdGhpcy5hcGkuZ2V0KHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgICAgIHByb3A6ICdyZXZpc2lvbnMnLFxuICAgICAgICAgICAgICAgIHJ2cHJvcDogJ2NvbnRlbnQnLFxuICAgICAgICAgICAgICAgIHJ2c2xvdHM6ICdtYWluJyxcbiAgICAgICAgICAgICAgICB0aXRsZXM6IHRoaXMucGFnZVRpdGxlLFxuICAgICAgICAgICAgfSBzYXRpc2ZpZXMgQXBpUXVlcnlSZXZpc2lvbnNQYXJhbXMpKSBhcyBQYWdlUmV2aXNpb25zUmVzdWx0O1xuXG4gICAgICAgICAgICB0aGlzLnBhZ2VDb250ZW50ID0gcGFnZVJldmlzaW9uLnF1ZXJ5LnBhZ2VzWzBdLnJldmlzaW9uc1swXS5zbG90cy5tYWluLmNvbnRlbnQudHJpbSgpO1xuXG4gICAgICAgICAgICB0aGlzLnBhcnNlUmVxdWVzdHMoKTtcbiAgICAgICAgICAgIHRoaXMubG9hZElucHV0RWxlbWVudHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXJzZXMgcmVxdWVzdHMgZnJvbSB0aGUgcGFnZSBjb250ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBwYXJzZVJlcXVlc3RzKCkge1xuICAgICAgICAgICAgdGhpcy5iZWZvcmVUZXh0ID0gdGhpcy5wYWdlQ29udGVudC5tYXRjaCgvXiguKj8pPT0vcykhWzFdO1xuXG4gICAgICAgICAgICB0aGlzLnBhZ2VDb250ZW50ID0gdGhpcy5wYWdlQ29udGVudC5yZXBsYWNlKC9eLio/PT0vcywgJz09JykucmVwbGFjZUFsbChuZXcgUmVnRXhwKGBcXFxcW2h0dHBzPzoke213LmNvbmZpZy5nZXQoJ3dnU2VydmVyJyl9LyguKj8pXWAsICdnJyksICdbWyQxXV0nKTtcblxuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbnMgPSBbLi4udGhpcy5wYWdlQ29udGVudC5tYXRjaEFsbCgvXj09Lio/PT0kKFxccyooPyE9PVtePV0pLiopKi9naW0pXS5tYXAoKG1hdGNoKSA9PiBtYXRjaFswXSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvblRleHQgb2Ygc2VjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0Nsb3NlZCA9IC97e2FmYy1jXFx8L2kudGVzdChzZWN0aW9uVGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQ2xvc2VkKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25IZWFkZXIgPSBzZWN0aW9uVGV4dC5tYXRjaCgvXj09KC4qPyk9PSQvbSkhWzFdLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0UGFnZVR5cGUgPT09ICdyZWRpcmVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IHt9IGFzIFJlZGlyZWN0UmVxdWVzdERhdGE7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkUGFnZXMgPSBbLi4uc2VjdGlvbkhlYWRlci5tYXRjaEFsbCgvXFxbXFxbKC4qPyldXS9nKV0ubWFwKChtYXRjaCkgPT4gbWF0Y2hbMV0/LnRyaW0oKS5yZXBsYWNlKC9eOi8sICcnKS5yZXBsYWNlQWxsKCdfJywgJyAnKSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdGVkUGFnZXMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhLnBhZ2VzID0gcmVxdWVzdGVkUGFnZXM7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkVGFyZ2V0ID0gc2VjdGlvblRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXRjaCgvVGFyZ2V0IG9mIHJlZGlyZWN0OiA/XFxbXFxbKC4qPyldXS8pPy5bMV1cbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9eOi8sICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2VBbGwoJ18nLCAnICcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFRhcmdldCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS50YXJnZXQgPSBwYXJzZWRUYXJnZXQ7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5yZWFzb24gPSBzZWN0aW9uVGV4dC5tYXRjaCgvcmVhc29uOiA/KC4qPylcXCpzb3VyY2UoPzogXFwoaWYgYXBwbGljYWJsZVxcKSk/Oi9pcyk/LlsxXS50cmltKCkgPz8gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5zb3VyY2UgPSBzZWN0aW9uVGV4dC5tYXRjaCgvc291cmNlKD86IFxcKGlmIGFwcGxpY2FibGVcXCkpPzogPyguKj8pKD86PHJlZmVyZW5jZXMgXFwvPnxcXG5cXG4pL2lzKT8uWzFdLnRyaW0oKSA/PyAnJztcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ZXIgPSBzZWN0aW9uVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hdGNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25UZXh0LmluY2x1ZGVzKCc8cmVmZXJlbmNlcyAvPicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gLzxyZWZlcmVuY2VzIFxcLz5cXG4rKC4qKS9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgUmVnRXhwKGAoPzo8cmVmZXJlbmNlcyBcXFxcLz4ke3BhcnNlZERhdGEuc291cmNlID8gYHwke3BhcnNlZERhdGEuc291cmNlLnJlcGxhY2VBbGwoL1tcXHMjJCgpKissLj9bXFxcXFxcXV57fH0tXS9nLCAnXFxcXCQmJyl9YCA6ICcnfSlcXG4rKC4qKWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgKT8uWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3RlcikgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5yZXF1ZXN0ZXIgPSB7IHR5cGU6IC9cXFtcXFtVc2VyKCB0YWxrKT86Ly50ZXN0KHJlcXVlc3RlcikgPyAndXNlcicgOiAnaXAnLCBuYW1lOiByZXF1ZXN0ZXIubWF0Y2goLyg/OlNwZWNpYWw6Q29udHJpYnV0aW9uc1xcL3xVc2VyKD86IHRhbGspPzopKC4qPylcXHwvKSFbMV0udHJpbSgpIH07XG5cbiAgICAgICAgICAgICAgICAgICAgKHRoaXMucGFyc2VkUmVxdWVzdHMgYXMgUmVkaXJlY3RSZXF1ZXN0RGF0YVtdKS5wdXNoKHBhcnNlZERhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgUmVkaXJlY3RBY3Rpb25zKS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogcGFyc2VkRGF0YS50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0czogT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZFBhZ2VzLm1hcCgocGFnZSkgPT4gW3BhZ2UsIHsgb3JpZ2luYWxUZXh0OiB7IGZ1bGxTZWN0aW9uVGV4dDogc2VjdGlvblRleHQsIHNlY3Rpb25UZXh0OiBzZWN0aW9uVGV4dC5yZXBsYWNlKC9ePT0uKj89PSQvbSwgJycpLnRyaW0oKSB9LCBhY3Rpb246ICdub25lJyB9XSksXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0ge30gYXMgQ2F0ZWdvcnlSZXF1ZXN0RGF0YTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3VuZENhdGVnb3J5ID0gc2VjdGlvbkhlYWRlci5tYXRjaCgvOj9DYXRlZ29yeTooLio/KShdXXwkKS8pPy5bMV0udHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kQ2F0ZWdvcnkpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGEuY2F0ZWdvcnkgPSBmb3VuZENhdGVnb3J5LnJlcGxhY2VBbGwoJ18nLCAnICcpO1xuXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGEuZXhhbXBsZXMgPVxuICAgICAgICAgICAgICAgICAgICAgICAgWy4uLnNlY3Rpb25UZXh0Lm1hdGNoKC9leGFtcGxlIHBhZ2VzIHdoaWNoIGJlbG9uZyB0byB0aGlzIGNhdGVnb3J5OiguKj8pcGFyZW50IGNhdGVnb3J5XFwvY2F0ZWdvcmllczovaXMpIVsxXS5tYXRjaEFsbCgvXFwqXFxzKig/OlxcW1xcWyk/KC4qPykoXFx8fF1dfFxccyo/XFxuKS9nKV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChtYXRjaCkgPT4gbWF0Y2hbMV0udHJpbSgpLnJlcGxhY2UoL146LywgJycpLnJlcGxhY2VBbGwoJ18nLCAnICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbikgPz8gW107XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5wYXJlbnRzID1cbiAgICAgICAgICAgICAgICAgICAgICAgIFsuLi5zZWN0aW9uVGV4dC5tYXRjaCgvcGFyZW50IGNhdGVnb3J5XFwvY2F0ZWdvcmllczooLio/KShcXG5cXG58XFxuXFxbXFxbKHNwZWNpYWw6Y29udHJpYnV0aW9uc1xcL3x1c2VyOikpL2lzKSFbMV0ubWF0Y2hBbGwoLyg/PCFcXHwpIz86P0NhdGVnb3J5OiguKj8pKFxcfHxdXXxcXHMqP1xcbikvZyldXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPy5tYXAoKG1hdGNoKSA9PiBtYXRjaFsxXS50cmltKCkucmVwbGFjZSgvXjovLCAnJykucmVwbGFjZUFsbCgnXycsICcgJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKSA/PyBbXTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFVzZXJJbmRleCA9IHNlY3Rpb25UZXh0LmluZGV4T2YoJ1tbVXNlcjonKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RVc2VyVGFsa0luZGV4ID0gc2VjdGlvblRleHQuaW5kZXhPZignW1tVc2VyIHRhbGs6Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SXBJbmRleCA9IHNlY3Rpb25UZXh0LmluZGV4T2YoJ1tbU3BlY2lhbDpDb250cmlidXRpb25zLycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0SW5kZXggPSBNYXRoLm1pbiguLi5bZmlyc3RVc2VySW5kZXgsIGZpcnN0VXNlclRhbGtJbmRleCwgZmlyc3RJcEluZGV4XS5maWx0ZXIoKGluZGV4KSA9PiBpbmRleCAhPT0gLTEpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0SW5kZXggPT09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5yZXF1ZXN0ZXIgPVxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RJbmRleCA9PT0gZmlyc3RJcEluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IHR5cGU6ICdpcCcsIG5hbWU6IHNlY3Rpb25UZXh0Lm1hdGNoKC9cXFtcXFtTcGVjaWFsOkNvbnRyaWJ1dGlvbnNcXC8oLio/KShcXHx8XV0pLykhWzFdLnRyaW0oKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7IHR5cGU6ICd1c2VyJywgbmFtZTogc2VjdGlvblRleHQubWF0Y2goL1xcW1xcW1VzZXIoPzogdGFsayk/OiguKj8pKFxcfHxdXSkvKSFbMV0udHJpbSgpIH07XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VkRGF0YS5yZXF1ZXN0ZXIubmFtZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgKHRoaXMucGFyc2VkUmVxdWVzdHMgYXMgQ2F0ZWdvcnlSZXF1ZXN0RGF0YVtdKS5wdXNoKHBhcnNlZERhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgQ2F0ZWdvcnlBY3Rpb25zKS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBwYXJzZWREYXRhLmNhdGVnb3J5LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXBsZXM6IHBhcnNlZERhdGEuZXhhbXBsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRzOiBwYXJzZWREYXRhLnBhcmVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFRleHQ6IHsgZnVsbFNlY3Rpb25UZXh0OiBzZWN0aW9uVGV4dCwgc2VjdGlvblRleHQ6IHNlY3Rpb25UZXh0LnJlcGxhY2UoL149PS4qPz09JC9tLCAnJykudHJpbSgpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWRzIHRoZSBpbnB1dCBlbGVtZW50cyBpbiB0aGUgZGlhbG9nLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBsb2FkSW5wdXRFbGVtZW50cygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlZFJlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXRjaFNpemUgPSA1O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmRJbmRleCA9IE1hdGgubWluKGluZGV4ICsgYmF0Y2hTaXplLCB0aGlzLnBhcnNlZFJlcXVlc3RzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyB0aXRsZTogT08udWkuTGFiZWxXaWRnZXQgfSkudGl0bGUuc2V0TGFiZWwoYGFmY3JjLWhlbHBlciAobG9hZGluZyAke2luZGV4ICsgMX0tJHtlbmRJbmRleH0vJHt0aGlzLnBhcnNlZFJlcXVlc3RzLmxlbmd0aH0gcmVxdWVzdHMpYCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3ViSW5kZXggPSBpbmRleDsgc3ViSW5kZXggPCBlbmRJbmRleDsgc3ViSW5kZXgrKylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlcXVlc3RQYWdlVHlwZSA9PT0gJ3JlZGlyZWN0JykgdGhpcy5sb2FkUmVkaXJlY3RSZXF1ZXN0RWxlbWVudHMoc3ViSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB0aGlzLmxvYWRDYXRlZ29yeVJlcXVlc3RFbGVtZW50cyhzdWJJbmRleCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZEluZGV4IDwgdGhpcy5wYXJzZWRSZXF1ZXN0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZW5kSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGhhbmRsZSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSAodGhpcyBhcyB1bmtub3duIGFzIHsgdGl0bGU6IE9PLnVpLkxhYmVsV2lkZ2V0IH0pLnRpdGxlLnNldExhYmVsKGBhZmNyYy1oZWxwZXIgKCR7dGhpcy5wYXJzZWRSZXF1ZXN0cy5sZW5ndGh9IHJlcXVlc3RzIGxvYWRlZClgKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaGFuZGxlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VXaWRnZXQgPSBuZXcgT08udWkuTWVzc2FnZVdpZGdldCh7IHR5cGU6ICdub3RpY2UnLCBsYWJlbDogJ05vIHZhbGlkIHJlcXVlc3RzIHRvIGhhbmRsZSEnIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVdpZGdldExheW91dCA9IG5ldyBPTy51aS5QYW5lbExheW91dCh7IHBhZGRlZDogdHJ1ZSwgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VXaWRnZXRMYXlvdXQuJGVsZW1lbnQuYXBwZW5kKG1lc3NhZ2VXaWRnZXQuJGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7ICRib2R5OiBKUXVlcnkgfSkuJGJvZHkuYXBwZW5kKG1lc3NhZ2VXaWRnZXRMYXlvdXQuJGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZHMgYSBnaXZlbiByZWRpcmVjdCByZXF1ZXN0IGludG8gdGhlIGRpYWxvZy5cbiAgICAgICAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgcmVxdWVzdCB0byBsb2FkLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBsb2FkUmVkaXJlY3RSZXF1ZXN0RWxlbWVudHMoaW5kZXg6IG51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMucGFyc2VkUmVxdWVzdHNbaW5kZXhdIGFzIFJlZGlyZWN0UmVxdWVzdERhdGE7XG5cbiAgICAgICAgICAgIGNvbnN0IGRldGFpbHNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGV0YWlscycpO1xuICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWZjcmMtaGVscGVyLXJlcXVlc3QnKTtcbiAgICAgICAgICAgIGRldGFpbHNFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZVNpemUoKSwgMCkpO1xuXG4gICAgICAgICAgICBjb25zdCBzdW1tYXJ5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N1bW1hcnknKTtcbiAgICAgICAgICAgIHN1bW1hcnlFbGVtZW50LmlubmVySFRNTCA9IHJlcXVlc3QucGFnZXMubWFwKChwYWdlKSA9PiBgPGI+JHtwYWdlfTwvYj5gKS5qb2luKCcsICcpICsgJyBcdTIxOTIgJztcblxuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICBsaW5rRWxlbWVudC50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LmhyZWYgPSBtdy51dGlsLmdldFVybChyZXF1ZXN0LnRhcmdldCk7XG4gICAgICAgICAgICBsaW5rRWxlbWVudC50ZXh0Q29udGVudCA9IHJlcXVlc3QudGFyZ2V0O1xuXG4gICAgICAgICAgICBzdW1tYXJ5RWxlbWVudC5hcHBlbmQobGlua0VsZW1lbnQpO1xuXG4gICAgICAgICAgICBkZXRhaWxzRWxlbWVudC5hcHBlbmQoc3VtbWFyeUVsZW1lbnQpO1xuXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SW5mb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHJlcXVlc3RJbmZvRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhZmNyYy1oZWxwZXItcmVxdWVzdC1pbmZvJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vbmVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgbm9uZUVsZW1lbnQuc3R5bGUuY29sb3IgPSAnZGltZ3JheSc7XG4gICAgICAgICAgICBub25lRWxlbWVudC50ZXh0Q29udGVudCA9ICdOb25lJztcblxuICAgICAgICAgICAgY29uc3QgcmVhc29uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlYXNvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICAgICAgcmVhc29uTGFiZWwudGV4dENvbnRlbnQgPSAnUmVhc29uOiAnO1xuICAgICAgICAgICAgcmVhc29uRGl2LmFwcGVuZChyZWFzb25MYWJlbCk7XG5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYXNvbikgcmVhc29uRGl2LmFwcGVuZChyZXF1ZXN0LnJlYXNvbik7XG4gICAgICAgICAgICBlbHNlIHJlYXNvbkRpdi5hcHBlbmQobm9uZUVsZW1lbnQuY2xvbmVOb2RlKHRydWUpKTtcblxuICAgICAgICAgICAgcmVxdWVzdEluZm9FbGVtZW50LmFwcGVuZChyZWFzb25EaXYpO1xuXG4gICAgICAgICAgICBjb25zdCBzb3VyY2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgY29uc3Qgc291cmNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJyk7XG4gICAgICAgICAgICBzb3VyY2VMYWJlbC50ZXh0Q29udGVudCA9ICdTb3VyY2U6ICc7XG4gICAgICAgICAgICBzb3VyY2VEaXYuYXBwZW5kKHNvdXJjZUxhYmVsKTtcblxuICAgICAgICAgICAgaWYgKHJlcXVlc3Quc291cmNlKSBzb3VyY2VEaXYuYXBwZW5kKHJlcXVlc3Quc291cmNlKTtcbiAgICAgICAgICAgIGVsc2Ugc291cmNlRGl2LmFwcGVuZChub25lRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgICAgICAgICByZXF1ZXN0SW5mb0VsZW1lbnQuYXBwZW5kKHNvdXJjZURpdik7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZXJMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2InKTtcbiAgICAgICAgICAgIHJlcXVlc3RlckxhYmVsLnRleHRDb250ZW50ID0gJ1JlcXVlc3RlcjogJztcbiAgICAgICAgICAgIHJlcXVlc3RlckRpdi5hcHBlbmQocmVxdWVzdGVyTGFiZWwpO1xuXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZXJMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgcmVxdWVzdGVyTGluay50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgICAgIHJlcXVlc3RlckxpbmsuaHJlZiA9IHJlcXVlc3QucmVxdWVzdGVyLnR5cGUgPT09ICd1c2VyJyA/IG13LnV0aWwuZ2V0VXJsKGBVc2VyOiR7cmVxdWVzdC5yZXF1ZXN0ZXIubmFtZX1gKSA6IG13LnV0aWwuZ2V0VXJsKGBTcGVjaWFsOkNvbnRyaWJ1dGlvbnMvJHtyZXF1ZXN0LnJlcXVlc3Rlci5uYW1lfWApO1xuICAgICAgICAgICAgcmVxdWVzdGVyTGluay50ZXh0Q29udGVudCA9IHJlcXVlc3QucmVxdWVzdGVyLm5hbWU7XG4gICAgICAgICAgICByZXF1ZXN0ZXJEaXYuYXBwZW5kKHJlcXVlc3RlckxpbmspO1xuXG4gICAgICAgICAgICByZXF1ZXN0SW5mb0VsZW1lbnQuYXBwZW5kKHJlcXVlc3RlckRpdik7XG5cbiAgICAgICAgICAgIGRldGFpbHNFbGVtZW50LmFwcGVuZChyZXF1ZXN0SW5mb0VsZW1lbnQpO1xuXG4gICAgICAgICAgICBkZXRhaWxzRWxlbWVudC5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RSZXNwb25kZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICByZXF1ZXN0UmVzcG9uZGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhZmNyYy1oZWxwZXItcmVxdWVzdC1yZXNwb25kZXInKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCByZXF1ZXN0ZWRUaXRsZSBvZiByZXF1ZXN0LnBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkVGl0bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gcmVxdWVzdGVkVGl0bGUgKyAnIFx1MjE5MiAnICsgcmVxdWVzdC50YXJnZXQ7XG4gICAgICAgICAgICAgICAgcmVxdWVzdGVkVGl0bGVEaXYuYXBwZW5kKGxhYmVsKTtcblxuICAgICAgICAgICAgICAgIGxldCB0YWdTZWxlY3RMYXlvdXQ6IE9PLnVpLkZpZWxkTGF5b3V0LCB0ZW1wbGF0ZVBhcmFtZXRlcnNFZGl0b3I6IEhUTUxEZXRhaWxzRWxlbWVudDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvblJhZGlvSW5wdXQgPSBuZXcgT08udWkuUmFkaW9TZWxlY3RXaWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbJ2FmY3JjLWhlbHBlci1hY3Rpb24tcmFkaW8nXSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFsnQWNjZXB0JywgJ0RlbnknLCAnQ29tbWVudCcsICdDbG9zZScsICdOb25lJ10ubWFwKChsYWJlbCkgPT4gbmV3IE9PLnVpLlJhZGlvT3B0aW9uV2lkZ2V0KHsgZGF0YTogbGFiZWwsIGxhYmVsIH0pKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhY3Rpb25SYWRpb0lucHV0LnNlbGVjdEl0ZW1CeUxhYmVsKCdOb25lJyk7XG4gICAgICAgICAgICAgICAgYWN0aW9uUmFkaW9JbnB1dC5vbignY2hvb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudXBkYXRlU2l6ZSgpLCAwKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSAoKGFjdGlvblJhZGlvSW5wdXQuZmluZFNlbGVjdGVkSXRlbSgpIGFzIE9PLnVpLlJhZGlvT3B0aW9uV2lkZ2V0KS5nZXREYXRhKCkgYXMgc3RyaW5nKS50b0xvd2VyQ2FzZSgpIGFzIEFjdGlvblR5cGU7XG5cbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBSZWRpcmVjdEFjdGlvbnMpW2luZGV4XS5yZXF1ZXN0c1tyZXF1ZXN0ZWRUaXRsZV0uYWN0aW9uID0gb3B0aW9uO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFnU2VsZWN0TGF5b3V0IHx8ICF0ZW1wbGF0ZVBhcmFtZXRlcnNFZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ1NlbGVjdCA9IG5ldyBPTy51aS5NZW51VGFnTXVsdGlzZWxlY3RXaWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93QXJiaXRyYXJ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1Jlb3JkZXJpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IE9iamVjdC5rZXlzKHRoaXMucmVkaXJlY3RUZW1wbGF0ZXMpLm1hcCgodGFnKSA9PiAoeyBkYXRhOiB0YWcsIGxhYmVsOiB0YWcgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAodGFnU2VsZWN0LmdldE1lbnUoKSBhcyBPTy51aS5NZW51U2VsZWN0V2lkZ2V0LkNvbmZpZ09wdGlvbnMpLmZpbHRlck1vZGUgPSAnc3Vic3RyaW5nJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ1NlbGVjdC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZFRhZ3MgPSAodGFnU2VsZWN0LmdldFZhbHVlKCkgYXMgc3RyaW5nW10pLnNvcnQoKGEsIGIpID0+IGEudG9Mb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKGIudG9Mb3dlckNhc2UoKSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0YWdTZWxlY3QuZ2V0VmFsdWUoKSBhcyBzdHJpbmdbXSkuam9pbignOycpICE9PSBzb3J0ZWRUYWdzLmpvaW4oJzsnKSkgdGFnU2VsZWN0LnNldFZhbHVlKHNvcnRlZFRhZ3MpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBSZWRpcmVjdEFjdGlvbnMpW2luZGV4XS5yZXF1ZXN0c1tyZXF1ZXN0ZWRUaXRsZV0ucmVkaXJlY3RUZW1wbGF0ZXMgPSBzb3J0ZWRUYWdzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlZGl0b3JJbmZvIG9mIHRoaXMudGVtcGxhdGVFZGl0b3JzSW5mbykgZWRpdG9ySW5mby5kZXRhaWxzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2hvd25UZW1wbGF0ZUVkaXRvcnMgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFnIG9mIHRhZ1NlbGVjdC5nZXRWYWx1ZSgpIGFzIHN0cmluZ1tdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvckluZm8gPSB0aGlzLnRlbXBsYXRlRWRpdG9yc0luZm8uZmluZCgoZWRpdG9ySW5mbykgPT4gZWRpdG9ySW5mby5uYW1lID09PSB0YWcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlZGl0b3JJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3JJbmZvLmRldGFpbHMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93blRlbXBsYXRlRWRpdG9ycysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtbWFyeUVsZW1lbnQudGV4dENvbnRlbnQgPSBgVGVtcGxhdGUgcGFyYW1ldGVycyAoJHtzaG93blRlbXBsYXRlRWRpdG9ycyA+IDAgPyBgZm9yICR7c2hvd25UZW1wbGF0ZUVkaXRvcnN9IHRlbXBsYXRlJHtzaG93blRlbXBsYXRlRWRpdG9ycyA+IDEgPyAncycgOiAnJ31gIDogJ25vbmUgdG8gc2hvdyd9KWA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub1RlbXBsYXRlc01lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9IHNob3duVGVtcGxhdGVFZGl0b3JzID4gMCA/ICdub25lJyA6ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnU2VsZWN0TGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KHRhZ1NlbGVjdCwgeyBjbGFzc2VzOiBbJ2FmY3JjLWhlbHBlci10YWctc2VsZWN0LWxheW91dCddLCBhbGlnbjogJ2lubGluZScsIGxhYmVsOiAnUmVkaXJlY3QgdGVtcGxhdGVzOicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRUaXRsZURpdi5hcHBlbmQodGFnU2VsZWN0TGF5b3V0LiRlbGVtZW50WzBdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQYXJhbWV0ZXJzRWRpdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGV0YWlscycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQYXJhbWV0ZXJzRWRpdG9yLmNsYXNzTGlzdC5hZGQoJ2FmY3JjLWhlbHBlci10ZW1wbGF0ZS1wYXJhbWV0ZXJzLWNvbnRhaW5lcicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N1bW1hcnknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bW1hcnlFbGVtZW50LnRleHRDb250ZW50ID0gJ1RlbXBsYXRlIHBhcmFtZXRlcnMgKG5vbmUgdG8gc2hvdyknO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVQYXJhbWV0ZXJzRWRpdG9yLmFwcGVuZChzdW1tYXJ5RWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3RlbXBsYXRlTmFtZSwgdGVtcGxhdGVEYXRhXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnJlZGlyZWN0VGVtcGxhdGVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSBPYmplY3QuZW50cmllcyh0ZW1wbGF0ZURhdGEucGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMubGVuZ3RoID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkZXRhaWxzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N1bW1hcnknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5LnRleHRDb250ZW50ID0gdGVtcGxhdGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHMuYXBwZW5kKHN1bW1hcnkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudERhdGE6IFRlbXBsYXRlRWRpdG9yRWxlbWVudEluZm8gPSB7IG5hbWU6IHRlbXBsYXRlTmFtZSwgZGV0YWlscywgcGFyYW1ldGVyczogW10gfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3BhcmFtZXRlck5hbWUsIHBhcmFtZXRlckRhdGFdIG9mIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBuZXcgT08udWkuVGV4dElucHV0V2lkZ2V0KHsgcGxhY2Vob2xkZXI6IHBhcmFtZXRlckRhdGEuZGVmYXVsdD8udG9TdHJpbmcoKSwgcmVxdWlyZWQ6IHBhcmFtZXRlckRhdGEucmVxdWlyZWQgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBuZXcgT08udWkuSHRtbFNuaXBwZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7cGFyYW1ldGVyTmFtZX0keyFwYXJhbWV0ZXJEYXRhLmxhYmVsIHx8IHBhcmFtZXRlck5hbWUudG9Mb3dlckNhc2UoKSA9PT0gcGFyYW1ldGVyRGF0YS5sYWJlbD8udG9Mb3dlckNhc2UoKSA/ICcnIDogYCAoJHtwYXJhbWV0ZXJEYXRhLmxhYmVsfSlgfSR7cGFyYW1ldGVyRGF0YS5kZXNjcmlwdGlvbiA/IGAgKCR7cGFyYW1ldGVyRGF0YS5kZXNjcmlwdGlvbn0pYCA6ICcnfSAodHlwZTogJHtwYXJhbWV0ZXJEYXRhLnR5cGV9KSAke3BhcmFtZXRlckRhdGEuc3VnZ2VzdGVkID8gJyAoc3VnZ2VzdGVkKScgOiAnJ30ke3BhcmFtZXRlckRhdGEuZXhhbXBsZSA/IGAgKGV4YW1wbGU6IFwiJHtwYXJhbWV0ZXJEYXRhLmV4YW1wbGV9XCIpYCA6ICcnfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdpbmxpbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5hcHBlbmQoaW5wdXRMYXlvdXQuJGVsZW1lbnRbMF0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnREYXRhLnBhcmFtZXRlcnMucHVzaCh7IG5hbWU6IHBhcmFtZXRlck5hbWUsIGFsaWFzZXM6IHBhcmFtZXRlckRhdGEuYWxpYXNlcywgZWRpdG9yOiBpbnB1dCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVBhcmFtZXRlcnNFZGl0b3IuYXBwZW5kKGRldGFpbHMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVkaXRvcnNJbmZvLnB1c2goZWxlbWVudERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub1RlbXBsYXRlc01lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vVGVtcGxhdGVzTWVzc2FnZS5pZCA9ICdhZmNyYy1oZWxwZXItbm8tdGVtcGxhdGVzLW1lc3NhZ2UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9UZW1wbGF0ZXNNZXNzYWdlLnRleHRDb250ZW50ID0gJ05vIHRlbXBsYXRlcyB3aXRoIHBhcmFtZXRlcnMgdG8gZGlzcGxheSEnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVBhcmFtZXRlcnNFZGl0b3IuYXBwZW5kKG5vVGVtcGxhdGVzTWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZFRpdGxlRGl2LmFwcGVuZCh0ZW1wbGF0ZVBhcmFtZXRlcnNFZGl0b3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFsnY29tbWVudCcsICdjbG9zZSddLmluY2x1ZGVzKG9wdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRJbnB1dExheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBjb21tZW50SW5wdXQuZ2V0VmFsdWUoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWVudCkgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBSZWRpcmVjdEFjdGlvbnMpW2luZGV4XS5yZXF1ZXN0c1tyZXF1ZXN0ZWRUaXRsZV0uY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGRlbGV0ZSAodGhpcy5hY3Rpb25zVG9UYWtlIGFzIFJlZGlyZWN0QWN0aW9ucylbaW5kZXhdLnJlcXVlc3RzW3JlcXVlc3RlZFRpdGxlXS5jb21tZW50O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudElucHV0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgUmVkaXJlY3RBY3Rpb25zKVtpbmRleF0ucmVxdWVzdHNbcmVxdWVzdGVkVGl0bGVdLmNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVJlcXVlc3RDb2xvcihkZXRhaWxzRWxlbWVudCwgaW5kZXgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRhZ1NlbGVjdExheW91dC4kZWxlbWVudC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUGFyYW1ldGVyc0VkaXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2luZ1JlYXNvbkxheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FjY2VwdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdTZWxlY3RMYXlvdXQuJGVsZW1lbnQuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUGFyYW1ldGVyc0VkaXRvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVueSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50LnNob3coKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2xvc2UnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ1JlYXNvbkxheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZGVueVJlYXNvbiA9IG5ldyBPTy51aS5Db21ib0JveElucHV0V2lkZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWydhZmNyYy1jbG9zaW5nLXJlYXNvbi1pbnB1dCddLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ2F1dG9maWxsOnVubGlrZWx5JyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgWydleGlzdHMnLCAnZXhpc3RpbmcgcGFnZXMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnZW1wdHknLCAnZW1wdHkgc3VibWlzc2lvbnMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnbm90YXJnZXQnLCAnbm9uZXhpc3RlbnQgb3Igbm8gcHJvdmlkZWQgdGFyZ2V0J10sXG4gICAgICAgICAgICAgICAgICAgICAgICBbJ25vdGl0bGUnLCAnbm8gdGl0bGUgcHJvdmlkZWQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsndW5saWtlbHknLCAndW5saWtlbHkgcmVkaXJlY3RzJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBbJ25vdHJlZGlyZWN0JywgJ2FydGljbGUgY3JlYXRpb24gcmVxdWVzdHMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnZXh0ZXJuYWxsaW5rJywgJ2V4dGVybmFsIGxpbmsgcmVkaXJlY3RzJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBbJ2VkaXRyZXF1ZXN0JywgJ2VkaXQgcmVxdWVzdHMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnbm90ZW5nbGlzaCcsICdyZXF1ZXN0cyBub3QgaW4gRW5nbGlzaCddLFxuICAgICAgICAgICAgICAgICAgICBdLm1hcCgoW3ZhbHVlLCBsYWJlbF0pID0+ICh7IGRhdGE6IGBhdXRvZmlsbDoke3ZhbHVlfWAsIGxhYmVsOiBgQXV0b2ZpbGxlZCB0ZXh0IGZvciAke2xhYmVsfWAgfSkpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlbnlSZWFzb24ub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBSZWRpcmVjdEFjdGlvbnMpW2luZGV4XS5yZXF1ZXN0c1tyZXF1ZXN0ZWRUaXRsZV0uZGVueVJlYXNvbiA9IGRlbnlSZWFzb24uZ2V0VmFsdWUoKSB8fCAnYXV0b2ZpbGw6dW5saWtlbHknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlbnlSZWFzb24uc2V0VmFsdWUoJ2F1dG9maWxsOnVubGlrZWx5Jyk7XG4gICAgICAgICAgICAgICAgZGVueVJlYXNvbi5nZXRNZW51KCkuc2VsZWN0SXRlbUJ5RGF0YSgnYXV0b2ZpbGw6dW5saWtlbHknKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbnlSZWFzb25MYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoZGVueVJlYXNvbiwgeyBhbGlnbjogJ2lubGluZScsIGxhYmVsOiAnRGVueSByZWFzb246JyB9KTtcbiAgICAgICAgICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb3NpbmdSZWFzb24gPSBuZXcgT08udWkuRHJvcGRvd25XaWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbJ2FmY3JjLWNsb3NpbmctcmVhc29uLWlucHV0J10sXG4gICAgICAgICAgICAgICAgICAgIG1lbnU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydObyByZXNwb25zZScsICdyJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydTdWNjZWVkZWQnLCAncyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnV2l0aGRyYXduJywgJ3cnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0ubWFwKChbdGl0bGUsIGlkXSkgPT4gbmV3IE9PLnVpLk1lbnVPcHRpb25XaWRnZXQoeyBkYXRhOiBpZCwgbGFiZWw6IHRpdGxlIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjbG9zaW5nUmVhc29uLmdldE1lbnUoKS5vbignY2hvb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGNsb3NpbmdSZWFzb24uZ2V0TWVudSgpLmZpbmRTZWxlY3RlZEl0ZW0oKSBhcyBPTy51aS5NZW51T3B0aW9uV2lkZ2V0O1xuXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgUmVkaXJlY3RBY3Rpb25zKVtpbmRleF0ucmVxdWVzdHNbcmVxdWVzdGVkVGl0bGVdLmNsb3NpbmdSZWFzb24gPSB7IG5hbWU6IHNlbGVjdGVkLmdldExhYmVsKCkgYXMgc3RyaW5nLCBpZDogc2VsZWN0ZWQuZ2V0RGF0YSgpIGFzIHN0cmluZyB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVxdWVzdENvbG9yKGRldGFpbHNFbGVtZW50LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2xvc2luZ1JlYXNvbi5nZXRNZW51KCkuc2VsZWN0SXRlbUJ5RGF0YSgncicpO1xuICAgICAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgUmVkaXJlY3RBY3Rpb25zKVtpbmRleF0ucmVxdWVzdHNbcmVxdWVzdGVkVGl0bGVdLmNsb3NpbmdSZWFzb24gPSB7IG5hbWU6ICdObyByZXNwb25zZScsIGlkOiAncicgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb3NpbmdSZWFzb25MYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoY2xvc2luZ1JlYXNvbiwgeyBhbGlnbjogJ2lubGluZScsIGxhYmVsOiAnQ2xvc2luZyByZWFzb246JyB9KTtcbiAgICAgICAgICAgICAgICBjbG9zaW5nUmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJbnB1dCA9IG5ldyBPTy51aS5UZXh0SW5wdXRXaWRnZXQoKTtcbiAgICAgICAgICAgICAgICBjb21tZW50SW5wdXQub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IGNvbW1lbnRJbnB1dC5nZXRWYWx1ZSgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWVudCkgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBSZWRpcmVjdEFjdGlvbnMpW2luZGV4XS5yZXF1ZXN0c1tyZXF1ZXN0ZWRUaXRsZV0uY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZGVsZXRlICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgUmVkaXJlY3RBY3Rpb25zKVtpbmRleF0ucmVxdWVzdHNbcmVxdWVzdGVkVGl0bGVdLmNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50SW5wdXRMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoY29tbWVudElucHV0LCB7IGNsYXNzZXM6IFsnYWZjcmMtY29tbWVudC1pbnB1dCddLCBhbGlnbjogJ2lubGluZScsIGxhYmVsOiAnQ29tbWVudDonIH0pO1xuICAgICAgICAgICAgICAgIGNvbW1lbnRJbnB1dExheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICByZXF1ZXN0ZWRUaXRsZURpdi5hcHBlbmQoYWN0aW9uUmFkaW9JbnB1dC4kZWxlbWVudFswXSwgZGVueVJlYXNvbkxheW91dC4kZWxlbWVudFswXSwgY2xvc2luZ1JlYXNvbkxheW91dC4kZWxlbWVudFswXSwgY29tbWVudElucHV0TGF5b3V0LiRlbGVtZW50WzBdKTtcblxuICAgICAgICAgICAgICAgIHJlcXVlc3RSZXNwb25kZXJFbGVtZW50LmFwcGVuZChyZXF1ZXN0ZWRUaXRsZURpdik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRldGFpbHNFbGVtZW50LmFwcGVuZChyZXF1ZXN0UmVzcG9uZGVyRWxlbWVudCk7XG5cbiAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmFwcGVuZChkZXRhaWxzRWxlbWVudCk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWRzIGEgZ2l2ZW4gY2F0ZWdvcnkgcmVxdWVzdCBpbnRvIHRoZSBkaWFsb2cuXG4gICAgICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHJlcXVlc3QgdG8gbG9hZC5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgbG9hZENhdGVnb3J5UmVxdWVzdEVsZW1lbnRzKGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLnBhcnNlZFJlcXVlc3RzW2luZGV4XSBhcyBDYXRlZ29yeVJlcXVlc3REYXRhO1xuXG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RldGFpbHMnKTtcbiAgICAgICAgICAgIGRldGFpbHNFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FmY3JjLWhlbHBlci1yZXF1ZXN0Jyk7XG4gICAgICAgICAgICBkZXRhaWxzRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVTaXplKCksIDApKTtcblxuICAgICAgICAgICAgY29uc3Qgc3VtbWFyeUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdW1tYXJ5Jyk7XG4gICAgICAgICAgICBzdW1tYXJ5RWxlbWVudC5pbm5lckhUTUwgPSBgPGI+Q2F0ZWdvcnk6JHtyZXF1ZXN0LmNhdGVnb3J5fTwvYj5gO1xuICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuYXBwZW5kKHN1bW1hcnlFbGVtZW50KTtcblxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEluZm9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICByZXF1ZXN0SW5mb0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWZjcmMtaGVscGVyLXJlcXVlc3QtaW5mbycpO1xuXG4gICAgICAgICAgICBjb25zdCBub25lRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIG5vbmVFbGVtZW50LnN0eWxlLmNvbG9yID0gJ2RpbWdyYXknO1xuICAgICAgICAgICAgbm9uZUVsZW1lbnQudGV4dENvbnRlbnQgPSAnTm9uZSc7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVzTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJyk7XG4gICAgICAgICAgICBleGFtcGxlc0xhYmVsLnRleHRDb250ZW50ID0gJ0V4YW1wbGVzOiAnO1xuICAgICAgICAgICAgZXhhbXBsZXNEaXYuYXBwZW5kKGV4YW1wbGVzTGFiZWwpO1xuXG4gICAgICAgICAgICBpZiAocmVxdWVzdC5leGFtcGxlcy5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2luZGV4LCBleGFtcGxlXSBvZiByZXF1ZXN0LmV4YW1wbGVzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICAgICAgbGlua0VsZW1lbnQudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtFbGVtZW50LmhyZWYgPSBtdy51dGlsLmdldFVybChleGFtcGxlKTtcbiAgICAgICAgICAgICAgICAgICAgbGlua0VsZW1lbnQudGV4dENvbnRlbnQgPSBleGFtcGxlO1xuXG4gICAgICAgICAgICAgICAgICAgIGV4YW1wbGVzRGl2LmFwcGVuZChsaW5rRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSByZXF1ZXN0LmV4YW1wbGVzLmxlbmd0aCAtIDEpIGV4YW1wbGVzRGl2LmFwcGVuZCgnLCAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGV4YW1wbGVzRGl2LmFwcGVuZChub25lRWxlbWVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuXG4gICAgICAgICAgICByZXF1ZXN0SW5mb0VsZW1lbnQuYXBwZW5kKGV4YW1wbGVzRGl2KTtcblxuICAgICAgICAgICAgY29uc3QgcGFyZW50c0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRzTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJyk7XG4gICAgICAgICAgICBwYXJlbnRzTGFiZWwudGV4dENvbnRlbnQgPSAnUGFyZW50czogJztcbiAgICAgICAgICAgIHBhcmVudHNEaXYuYXBwZW5kKHBhcmVudHNMYWJlbCk7XG5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnBhcmVudHMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtpbmRleCwgcGFyZW50XSBvZiByZXF1ZXN0LnBhcmVudHMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICAgICAgICBsaW5rRWxlbWVudC50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgICAgICAgICAgICAgbGlua0VsZW1lbnQuaHJlZiA9IG13LnV0aWwuZ2V0VXJsKGBDYXRlZ29yeToke3BhcmVudH1gKTtcbiAgICAgICAgICAgICAgICAgICAgbGlua0VsZW1lbnQudGV4dENvbnRlbnQgPSBwYXJlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyZW50c0Rpdi5hcHBlbmQobGlua0VsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gcmVxdWVzdC5wYXJlbnRzLmxlbmd0aCAtIDEpIHBhcmVudHNEaXYuYXBwZW5kKCcsICcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgcGFyZW50c0Rpdi5hcHBlbmQobm9uZUVsZW1lbnQuY2xvbmVOb2RlKHRydWUpKTtcblxuICAgICAgICAgICAgcmVxdWVzdEluZm9FbGVtZW50LmFwcGVuZChwYXJlbnRzRGl2KTtcblxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICAgICAgcmVxdWVzdGVyTGFiZWwudGV4dENvbnRlbnQgPSAnUmVxdWVzdGVyOiAnO1xuICAgICAgICAgICAgcmVxdWVzdGVyRGl2LmFwcGVuZChyZXF1ZXN0ZXJMYWJlbCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlckxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICByZXF1ZXN0ZXJMaW5rLnRhcmdldCA9ICdfYmxhbmsnO1xuICAgICAgICAgICAgcmVxdWVzdGVyTGluay5ocmVmID0gcmVxdWVzdC5yZXF1ZXN0ZXIudHlwZSA9PT0gJ3VzZXInID8gbXcudXRpbC5nZXRVcmwoYFVzZXI6JHtyZXF1ZXN0LnJlcXVlc3Rlci5uYW1lfWApIDogbXcudXRpbC5nZXRVcmwoYFNwZWNpYWw6Q29udHJpYnV0aW9ucy8ke3JlcXVlc3QucmVxdWVzdGVyLm5hbWV9YCk7XG4gICAgICAgICAgICByZXF1ZXN0ZXJMaW5rLnRleHRDb250ZW50ID0gcmVxdWVzdC5yZXF1ZXN0ZXIubmFtZTtcbiAgICAgICAgICAgIHJlcXVlc3RlckRpdi5hcHBlbmQocmVxdWVzdGVyTGluayk7XG5cbiAgICAgICAgICAgIHJlcXVlc3RJbmZvRWxlbWVudC5hcHBlbmQocmVxdWVzdGVyRGl2KTtcblxuICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuYXBwZW5kKHJlcXVlc3RJbmZvRWxlbWVudCk7XG5cbiAgICAgICAgICAgIGRldGFpbHNFbGVtZW50LmFwcGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdocicpKTtcblxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdFJlc3BvbmRlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHJlcXVlc3RSZXNwb25kZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FmY3JjLWhlbHBlci1yZXF1ZXN0LXJlc3BvbmRlcicpO1xuXG4gICAgICAgICAgICBjb25zdCBhY3Rpb25SYWRpb0lucHV0ID0gbmV3IE9PLnVpLlJhZGlvU2VsZWN0V2lkZ2V0KHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBbJ2FmY3JjLWhlbHBlci1hY3Rpb24tcmFkaW8nXSxcbiAgICAgICAgICAgICAgICBpdGVtczogWydBY2NlcHQnLCAnRGVueScsICdDb21tZW50JywgJ0Nsb3NlJywgJ05vbmUnXS5tYXAoKGxhYmVsKSA9PiBuZXcgT08udWkuUmFkaW9PcHRpb25XaWRnZXQoeyBkYXRhOiBsYWJlbCwgbGFiZWwgfSkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhY3Rpb25SYWRpb0lucHV0LnNlbGVjdEl0ZW1CeUxhYmVsKCdOb25lJyk7XG4gICAgICAgICAgICBhY3Rpb25SYWRpb0lucHV0Lm9uKCdjaG9vc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZVNpemUoKSwgMCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSAoKGFjdGlvblJhZGlvSW5wdXQuZmluZFNlbGVjdGVkSXRlbSgpIGFzIE9PLnVpLlJhZGlvT3B0aW9uV2lkZ2V0KS5nZXREYXRhKCkgYXMgc3RyaW5nKS50b0xvd2VyQ2FzZSgpIGFzIEFjdGlvblR5cGU7XG5cbiAgICAgICAgICAgICAgICAodGhpcy5hY3Rpb25zVG9UYWtlIGFzIENhdGVnb3J5QWN0aW9ucylbaW5kZXhdLmFjdGlvbiA9IG9wdGlvbjtcblxuICAgICAgICAgICAgICAgIGlmIChbJ2NvbW1lbnQnLCAnY2xvc2UnXS5pbmNsdWRlcyhvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRJbnB1dExheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IGNvbW1lbnRJbnB1dC5nZXRWYWx1ZSgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1lbnQpICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgQ2F0ZWdvcnlBY3Rpb25zKVtpbmRleF0uY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZGVsZXRlICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgQ2F0ZWdvcnlBY3Rpb25zKVtpbmRleF0uY29tbWVudDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb21tZW50SW5wdXRMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAodGhpcy5hY3Rpb25zVG9UYWtlIGFzIENhdGVnb3J5QWN0aW9ucylbaW5kZXhdLmNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVSZXF1ZXN0Q29sb3IoZGV0YWlsc0VsZW1lbnQsIGluZGV4KTtcblxuICAgICAgICAgICAgICAgIHBhZ2VTZWxlY3RMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcbiAgICAgICAgICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcbiAgICAgICAgICAgICAgICBjbG9zaW5nUmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAob3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FjY2VwdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VTZWxlY3RMYXlvdXQuJGVsZW1lbnQuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlTZWxlY3RMYXlvdXQuJGVsZW1lbnQuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZW55Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVueVJlYXNvbkxheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nsb3NlJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ1JlYXNvbkxheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhZ2VTZWxlY3RJbnB1dCA9IG5ldyBQYWdlSW5wdXRXaWRnZXQoeyBwbGFjZWhvbGRlcjogJ0FkZCBwYWdlcyBoZXJlJyB9KTtcbiAgICAgICAgICAgIHBhZ2VTZWxlY3RJbnB1dC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHBhZ2VTZWxlY3RJbnB1dC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShuZXcgUmVnRXhwKGBeKGh0dHBzPzopPy97Mn0/JHttdy5jb25maWcuZ2V0KCd3Z1NlcnZlcicpLnJlcGxhY2UoL15cXC97Mn0vLCAnJyl9L3dpa2kvYCksICcnKTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL146LywgJycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDApIHBhZ2VTZWxlY3RJbnB1dC5zZXRWYWx1ZSh2YWx1ZVswXS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSkucmVwbGFjZUFsbCgnXycsICcgJykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwYWdlU2VsZWN0SW5wdXQub24oJ3Nob3dpbmctdmFsdWVzJywgKHBhZ2VzOiB7IGRhdGE6IHN0cmluZzsgbGFiZWw6IHN0cmluZyB9W10pID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIHBhZ2VTZWxlY3QuYWRkQWxsb3dlZFZhbHVlKHBhZ2UuZGF0YSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgcGFnZVNlbGVjdCA9IG5ldyBPTy51aS5UYWdNdWx0aXNlbGVjdFdpZGdldCh7IGFsbG93UmVvcmRlcmluZzogZmFsc2UsIGlucHV0UG9zaXRpb246ICdvdXRsaW5lJywgaW5wdXRXaWRnZXQ6IHBhZ2VTZWxlY3RJbnB1dCB9KTtcbiAgICAgICAgICAgIHBhZ2VTZWxlY3Qub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRUYWdzID0gKHBhZ2VTZWxlY3QuZ2V0VmFsdWUoKSBhcyBzdHJpbmdbXSkuc29ydCgoYSwgYikgPT4gYS50b0xvd2VyQ2FzZSgpLmxvY2FsZUNvbXBhcmUoYi50b0xvd2VyQ2FzZSgpKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoKHBhZ2VTZWxlY3QuZ2V0VmFsdWUoKSBhcyBzdHJpbmdbXSkuam9pbignOycpICE9PSBzb3J0ZWRUYWdzLmpvaW4oJzsnKSkgcGFnZVNlbGVjdC5zZXRWYWx1ZShzb3J0ZWRUYWdzKTtcblxuICAgICAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgQ2F0ZWdvcnlBY3Rpb25zKVtpbmRleF0uZXhhbXBsZXMgPSBzb3J0ZWRUYWdzO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgZXhhbXBsZXMgfSA9ICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgQ2F0ZWdvcnlBY3Rpb25zKVtpbmRleF07XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZXhhbXBsZSBvZiBleGFtcGxlcykgcGFnZVNlbGVjdC5hZGRBbGxvd2VkVmFsdWUoZXhhbXBsZSk7XG4gICAgICAgICAgICBwYWdlU2VsZWN0LnNldFZhbHVlKGV4YW1wbGVzKTtcblxuICAgICAgICAgICAgY29uc3QgcGFnZVNlbGVjdExheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dChwYWdlU2VsZWN0LCB7IGFsaWduOiAnaW5saW5lJywgbGFiZWw6ICdQYWdlcyB0byBjYXRlZ29yaXplOicgfSk7XG4gICAgICAgICAgICBwYWdlU2VsZWN0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnlTZWxlY3RJbnB1dCA9IG5ldyBDYXRlZ29yeUlucHV0V2lkZ2V0KHsgcGxhY2Vob2xkZXI6ICdBZGQgY2F0ZWdvcmllcyBoZXJlJyB9KTtcbiAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0SW5wdXQub24oJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBjYXRlZ29yeVNlbGVjdElucHV0LmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoYF4oaHR0cHM/Oik/L3syfT8ke213LmNvbmZpZy5nZXQoJ3dnU2VydmVyJykucmVwbGFjZSgvXlxcL3syfS8sICcnKX0vd2lraS9gKSwgJycpO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXkNhdGVnb3J5Oi8sICcnKTtcblxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSBjYXRlZ29yeVNlbGVjdElucHV0LnNldFZhbHVlKHZhbHVlWzBdLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKS5yZXBsYWNlQWxsKCdfJywgJyAnKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0SW5wdXQub24oJ3Nob3dpbmctdmFsdWVzJywgKHBhZ2VzOiB7IGRhdGE6IHN0cmluZzsgbGFiZWw6IHN0cmluZyB9W10pID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgcGFnZXMpIGNhdGVnb3J5U2VsZWN0LmFkZEFsbG93ZWRWYWx1ZShwYWdlLmRhdGEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5U2VsZWN0ID0gbmV3IE9PLnVpLlRhZ011bHRpc2VsZWN0V2lkZ2V0KHsgYWxsb3dSZW9yZGVyaW5nOiBmYWxzZSwgaW5wdXRQb3NpdGlvbjogJ291dGxpbmUnLCBpbnB1dFdpZGdldDogY2F0ZWdvcnlTZWxlY3RJbnB1dCB9KTtcbiAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0Lm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkVGFncyA9IChjYXRlZ29yeVNlbGVjdC5nZXRWYWx1ZSgpIGFzIHN0cmluZ1tdKS5zb3J0KChhLCBiKSA9PiBhLnRvTG93ZXJDYXNlKCkubG9jYWxlQ29tcGFyZShiLnRvTG93ZXJDYXNlKCkpKTtcblxuICAgICAgICAgICAgICAgIGlmICgoY2F0ZWdvcnlTZWxlY3QuZ2V0VmFsdWUoKSBhcyBzdHJpbmdbXSkuam9pbignOycpICE9PSBzb3J0ZWRUYWdzLmpvaW4oJzsnKSkgY2F0ZWdvcnlTZWxlY3Quc2V0VmFsdWUoc29ydGVkVGFncyk7XG5cbiAgICAgICAgICAgICAgICAodGhpcy5hY3Rpb25zVG9UYWtlIGFzIENhdGVnb3J5QWN0aW9ucylbaW5kZXhdLnBhcmVudHMgPSBzb3J0ZWRUYWdzO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcGFyZW50cyB9ID0gKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBDYXRlZ29yeUFjdGlvbnMpW2luZGV4XTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBwYXJlbnQgb2YgcGFyZW50cykgY2F0ZWdvcnlTZWxlY3QuYWRkQWxsb3dlZFZhbHVlKHBhcmVudCk7XG4gICAgICAgICAgICBjYXRlZ29yeVNlbGVjdC5zZXRWYWx1ZShwYXJlbnRzKTtcblxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnlTZWxlY3RMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoY2F0ZWdvcnlTZWxlY3QsIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogJ0NhdGVnb3JpZXM6JyB9KTtcbiAgICAgICAgICAgIGNhdGVnb3J5U2VsZWN0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgY29uc3QgZGVueVJlYXNvbiA9IG5ldyBPTy51aS5Db21ib0JveElucHV0V2lkZ2V0KHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBbJ2FmY3JjLWNsb3NpbmctcmVhc29uLWlucHV0J10sXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdhdXRvZmlsbDp1bmxpa2VseScsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICBbJ2V4aXN0cycsICdleGlzdGluZyBjYXRlZ29yaWVzJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnZW1wdHknLCAnZW1wdHkgc3VibWlzc2lvbnMnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd1bmxpa2VseScsICdjYXRlZ29yaWVzIHRoYXQgYXJlIHVubGlrZWx5IHRvIGhhdmUgZW5vdWdoIHBhZ2VzJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnbm90Y2F0ZWdvcnknLCAncGFnZSBjcmVhdGlvbiByZXF1ZXN0cyddLFxuICAgICAgICAgICAgICAgICAgICBbJ25vdGVuZ2xpc2gnLCAncmVxdWVzdHMgbm90IGluIEVuZ2xpc2gnXSxcbiAgICAgICAgICAgICAgICBdLm1hcCgoW3ZhbHVlLCBsYWJlbF0pID0+ICh7IGRhdGE6IGBhdXRvZmlsbDoke3ZhbHVlfWAsIGxhYmVsOiBgQXV0b2ZpbGxlZCB0ZXh0IGZvciAke2xhYmVsfWAgfSkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZW55UmVhc29uLm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBDYXRlZ29yeUFjdGlvbnMpW2luZGV4XS5kZW55UmVhc29uID0gZGVueVJlYXNvbi5nZXRWYWx1ZSgpIHx8ICdhdXRvZmlsbDp1bmxpa2VseSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlbnlSZWFzb24uc2V0VmFsdWUoJ2F1dG9maWxsOnVubGlrZWx5Jyk7XG4gICAgICAgICAgICBkZW55UmVhc29uLmdldE1lbnUoKS5zZWxlY3RJdGVtQnlEYXRhKCdhdXRvZmlsbDp1bmxpa2VseScpO1xuXG4gICAgICAgICAgICBjb25zdCBkZW55UmVhc29uTGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KGRlbnlSZWFzb24sIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogJ0RlbnkgcmVhc29uOicgfSk7XG4gICAgICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgY29uc3QgY2xvc2luZ1JlYXNvbiA9IG5ldyBPTy51aS5Ecm9wZG93bldpZGdldCh7XG4gICAgICAgICAgICAgICAgY2xhc3NlczogWydhZmNyYy1jbG9zaW5nLXJlYXNvbi1pbnB1dCddLFxuICAgICAgICAgICAgICAgIG1lbnU6IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnTm8gcmVzcG9uc2UnLCAnciddLFxuICAgICAgICAgICAgICAgICAgICAgICAgWydTdWNjZWVkZWQnLCAncyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgWydXaXRoZHJhd24nLCAndyddLFxuICAgICAgICAgICAgICAgICAgICBdLm1hcCgoW3RpdGxlLCBpZF0pID0+IG5ldyBPTy51aS5NZW51T3B0aW9uV2lkZ2V0KHsgZGF0YTogaWQsIGxhYmVsOiB0aXRsZSB9KSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2xvc2luZ1JlYXNvbi5nZXRNZW51KCkub24oJ2Nob29zZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGNsb3NpbmdSZWFzb24uZ2V0TWVudSgpLmZpbmRTZWxlY3RlZEl0ZW0oKSBhcyBPTy51aS5NZW51T3B0aW9uV2lkZ2V0O1xuXG4gICAgICAgICAgICAgICAgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBDYXRlZ29yeUFjdGlvbnMpW2luZGV4XS5jbG9zaW5nUmVhc29uID0geyBuYW1lOiBzZWxlY3RlZC5nZXRMYWJlbCgpIGFzIHN0cmluZywgaWQ6IHNlbGVjdGVkLmdldERhdGEoKSBhcyBzdHJpbmcgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVxdWVzdENvbG9yKGRldGFpbHNFbGVtZW50LCBpbmRleCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNsb3NpbmdSZWFzb24uZ2V0TWVudSgpLnNlbGVjdEl0ZW1CeURhdGEoJ3InKTtcbiAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgQ2F0ZWdvcnlBY3Rpb25zKVtpbmRleF0uY2xvc2luZ1JlYXNvbiA9IHsgbmFtZTogJ05vIHJlc3BvbnNlJywgaWQ6ICdyJyB9O1xuXG4gICAgICAgICAgICBjb25zdCBjbG9zaW5nUmVhc29uTGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KGNsb3NpbmdSZWFzb24sIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogJ0Nsb3NpbmcgcmVhc29uOicgfSk7XG4gICAgICAgICAgICBjbG9zaW5nUmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgY29uc3QgY29tbWVudElucHV0ID0gbmV3IE9PLnVpLlRleHRJbnB1dFdpZGdldCgpO1xuICAgICAgICAgICAgY29tbWVudElucHV0Lm9uKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IGNvbW1lbnRJbnB1dC5nZXRWYWx1ZSgpLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgIGlmIChjb21tZW50KSAodGhpcy5hY3Rpb25zVG9UYWtlIGFzIENhdGVnb3J5QWN0aW9ucylbaW5kZXhdLmNvbW1lbnQgPSBjb21tZW50O1xuICAgICAgICAgICAgICAgIGVsc2UgZGVsZXRlICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgQ2F0ZWdvcnlBY3Rpb25zKVtpbmRleF0uY29tbWVudDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBjb21tZW50SW5wdXRMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoY29tbWVudElucHV0LCB7IGNsYXNzZXM6IFsnYWZjcmMtY29tbWVudC1pbnB1dCddLCBhbGlnbjogJ2lubGluZScsIGxhYmVsOiAnQ29tbWVudDonIH0pO1xuICAgICAgICAgICAgY29tbWVudElucHV0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgcmVxdWVzdFJlc3BvbmRlckVsZW1lbnQuYXBwZW5kKFxuICAgICAgICAgICAgICAgIGFjdGlvblJhZGlvSW5wdXQuJGVsZW1lbnRbMF0sXG4gICAgICAgICAgICAgICAgcGFnZVNlbGVjdExheW91dC4kZWxlbWVudFswXSxcbiAgICAgICAgICAgICAgICBjYXRlZ29yeVNlbGVjdExheW91dC4kZWxlbWVudFswXSxcbiAgICAgICAgICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50WzBdLFxuICAgICAgICAgICAgICAgIGNsb3NpbmdSZWFzb25MYXlvdXQuJGVsZW1lbnRbMF0sXG4gICAgICAgICAgICAgICAgY29tbWVudElucHV0TGF5b3V0LiRlbGVtZW50WzBdLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuYXBwZW5kKHJlcXVlc3RSZXNwb25kZXJFbGVtZW50KTtcblxuICAgICAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7ICRib2R5OiBKUXVlcnkgfSkuJGJvZHkuYXBwZW5kKGRldGFpbHNFbGVtZW50KTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlcyB0aGUgY29sb3Igb2YgYSBkZXRhaWxzIGVsZW1lbnQgYmFzZWQgb24gdGhlIGhhbmRsaW5nIG9mIHRoZSByZXF1ZXN0cyBpbnNpZGUuXG4gICAgICAgICAqIEBwYXJhbSBkZXRhaWxzRWxlbWVudCBUaGUgZGV0YWlscyBlbGVtZW50IHRvIHVwZGF0ZS5cbiAgICAgICAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgcmVkaXJlY3QgdGFyZ2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVSZXF1ZXN0Q29sb3IoZGV0YWlsc0VsZW1lbnQ6IEhUTUxEZXRhaWxzRWxlbWVudCwgaW5kZXg6IG51bWJlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVxdWVzdFBhZ2VUeXBlID09PSAncmVkaXJlY3QnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uc1RvVGFrZSA9IE9iamVjdC52YWx1ZXMoKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBSZWRpcmVjdEFjdGlvbnMpW2luZGV4XS5yZXF1ZXN0cyk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBhbGxSZXF1ZXN0c0FjY2VwdGVkRGVuaWVkID0gYWN0aW9uc1RvVGFrZS5ldmVyeSgoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnYWNjZXB0JyB8fCBhY3Rpb24uYWN0aW9uID09PSAnZGVueScpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZmlyc3RDbG9zZVJlYXNvbiA9IGFjdGlvbnNUb1Rha2UuZmluZCgoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnY2xvc2UnKT8uY2xvc2luZ1JlYXNvbj8uaWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsUmVxdWVzdHNDbG9zZWQgPSBhY3Rpb25zVG9UYWtlLmV2ZXJ5KChhY3Rpb24pID0+IGFjdGlvbi5hY3Rpb24gPT09ICdjbG9zZScgJiYgYWN0aW9uLmNsb3NpbmdSZWFzb24/LmlkID09PSBmaXJzdENsb3NlUmVhc29uKTtcblxuICAgICAgICAgICAgICAgIGxldCBiYWNrZ3JvdW5kQ29sb3IgPSAnJztcblxuICAgICAgICAgICAgICAgIGlmIChhbGxSZXF1ZXN0c0FjY2VwdGVkRGVuaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjY2VwdGVkQ291bnQgPSBhY3Rpb25zVG9UYWtlLmZpbHRlcigoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnYWNjZXB0JykubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZW5pZWRDb3VudCA9IGFjdGlvbnNUb1Rha2UuZmlsdGVyKChhY3Rpb24pID0+IGFjdGlvbi5hY3Rpb24gPT09ICdkZW55JykubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2NlcHRlZENvdW50ID4gMCAmJiBkZW5pZWRDb3VudCA+IDApIGJhY2tncm91bmRDb2xvciA9ICcjZmZmMTdlJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYWNjZXB0ZWRDb3VudCA+IDApIGJhY2tncm91bmRDb2xvciA9ICcjYTBmZmEwJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBiYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmY2VjZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbGxSZXF1ZXN0c0Nsb3NlZClcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0Q2xvc2VSZWFzb24gPT09ICdyJykgYmFja2dyb3VuZENvbG9yID0gJyNmZmNlY2UnO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChmaXJzdENsb3NlUmVhc29uID09PSAncycpIGJhY2tncm91bmRDb2xvciA9ICcjOTBjMDkwJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBiYWNrZ3JvdW5kQ29sb3IgPSAnI2I4YjhiOCc7XG5cbiAgICAgICAgICAgICAgICBkZXRhaWxzRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYWN0aW9uIH0gPSAodGhpcy5hY3Rpb25zVG9UYWtlIGFzIENhdGVnb3J5QWN0aW9ucylbaW5kZXhdO1xuXG4gICAgICAgICAgICAgICAgbGV0IGJhY2tncm91bmRDb2xvciA9ICcnO1xuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vcHJlZmVyLXN3aXRjaFxuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdhY2NlcHQnKSBiYWNrZ3JvdW5kQ29sb3IgPSAnI2EwZmZhMCc7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnZGVueScpIGJhY2tncm91bmRDb2xvciA9ICcjZmZjZWNlJztcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdjbG9zZScpXG4gICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5hY3Rpb25zVG9UYWtlIGFzIENhdGVnb3J5QWN0aW9ucylbaW5kZXhdLmNsb3NpbmdSZWFzb24/LmlkID09PSAncicpIGJhY2tncm91bmRDb2xvciA9ICcjZmZjZWNlJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBDYXRlZ29yeUFjdGlvbnMpW2luZGV4XS5jbG9zaW5nUmVhc29uPy5pZCA9PT0gJ3MnKSBiYWNrZ3JvdW5kQ29sb3IgPSAnIzkwYzA5MCc7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgYmFja2dyb3VuZENvbG9yID0gJyNiOGI4YjgnO1xuXG4gICAgICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBlcmZvcm1zIGFsbCBhY3Rpb25zIGFuZCBsb2dzIHRoZWlyIHJlc3VsdHMuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGFzeW5jIHBlcmZvcm1BY3Rpb25zKCkge1xuICAgICAgICAgICAgY29uc3Qgd2luZG93TWFuYWdlciA9IG5ldyBPTy51aS5XaW5kb3dNYW5hZ2VyKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh3aW5kb3dNYW5hZ2VyLiRlbGVtZW50WzBdKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hvd0FjdGlvbnNEaWFsb2cgPSBuZXcgU2hvd0FjdGlvbnNEaWFsb2coKTtcbiAgICAgICAgICAgIHdpbmRvd01hbmFnZXIuYWRkV2luZG93cyhbc2hvd0FjdGlvbnNEaWFsb2ddKTtcbiAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLm9wZW4oKTtcblxuICAgICAgICAgICAgY29uc3QgY291bnRzID0geyBhY2NlcHRlZDogMCwgZGVuaWVkOiAwLCAnY29tbWVudGVkIG9uJzogMCwgY2xvc2VkOiAwIH07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5cbiAgICAgICAgICAgIGxldCBuZXdQYWdlVGV4dCA9IChcbiAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5hcGkuZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXR2ZXJzaW9uOiAnMicsXG4gICAgICAgICAgICAgICAgICAgIHByb3A6ICdyZXZpc2lvbnMnLFxuICAgICAgICAgICAgICAgICAgICBydnByb3A6ICdjb250ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgcnZzbG90czogJ21haW4nLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZXM6IHRoaXMucGFnZVRpdGxlLFxuICAgICAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKSkgYXMgUGFnZVJldmlzaW9uc1Jlc3VsdFxuICAgICAgICAgICAgKS5xdWVyeS5wYWdlc1swXS5yZXZpc2lvbnNbMF0uc2xvdHMubWFpbi5jb250ZW50LnRyaW0oKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucmVxdWVzdFBhZ2VUeXBlID09PSAncmVkaXJlY3QnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYW55UmVxdWVzdEhhbmRsZWQgPSAodGhpcy5hY3Rpb25zVG9UYWtlIGFzIFJlZGlyZWN0QWN0aW9ucykuc29tZSgoYWN0aW9uRGF0YSkgPT4gT2JqZWN0LnZhbHVlcyhhY3Rpb25EYXRhLnJlcXVlc3RzKS5zb21lKChhY3Rpb24pID0+IGFjdGlvbi5hY3Rpb24gIT09ICdub25lJykpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGFueVJlcXVlc3RIYW5kbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyB0YXJnZXQsIHJlcXVlc3RzIH0gb2YgdGhpcy5hY3Rpb25zVG9UYWtlIGFzIFJlZGlyZWN0QWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc29tZVJlcXVlc3RBY2NlcHRlZERlbmllZCA9IE9iamVjdC52YWx1ZXMocmVxdWVzdHMpLnNvbWUoKGFjdGlvbikgPT4gYWN0aW9uLmFjdGlvbiA9PT0gJ2FjY2VwdCcgfHwgYWN0aW9uLmFjdGlvbiA9PT0gJ2RlbnknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbFJlcXVlc3RzQWNjZXB0ZWREZW5pZWQgPSBPYmplY3QudmFsdWVzKHJlcXVlc3RzKS5ldmVyeSgoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnYWNjZXB0JyB8fCBhY3Rpb24uYWN0aW9uID09PSAnZGVueScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENsb3NlUmVhc29uID0gT2JqZWN0LnZhbHVlcyhyZXF1ZXN0cyBhcyBSZWNvcmQ8c3RyaW5nLCBSZWRpcmVjdEFjdGlvbj4pLmZpbmQoKGFjdGlvbikgPT4gYWN0aW9uLmFjdGlvbiA9PT0gJ2Nsb3NlJyk/LmNsb3NpbmdSZWFzb24/LmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsUmVxdWVzdHNDbG9zZWQgPSBPYmplY3QudmFsdWVzKHJlcXVlc3RzIGFzIFJlY29yZDxzdHJpbmcsIFJlZGlyZWN0QWN0aW9uPikuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbikgPT4gYWN0aW9uLmFjdGlvbiA9PT0gJ2Nsb3NlJyAmJiBhY3Rpb24uY2xvc2luZ1JlYXNvbj8uaWQgPT09IGZpcnN0Q2xvc2VSZWFzb24sXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2NlcHRlZFBhZ2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZW5pZWRQYWdlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudHMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50T2ZQYWdlcyA9IE9iamVjdC5rZXlzKHJlcXVlc3RzKS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3JlcXVlc3RlZFRpdGxlLCBhY3Rpb25dIG9mIE9iamVjdC5lbnRyaWVzKHJlcXVlc3RzKSBhcyBbc3RyaW5nLCBSZWRpcmVjdEFjdGlvbl1bXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbi5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWNjZXB0Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvbWVSZXF1ZXN0QWNjZXB0ZWREZW5pZWQgJiYgIWFsbFJlcXVlc3RzQWNjZXB0ZWREZW5pZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoYE5vdCBhbGwgcmVxdWVzdHMgdG8gXCIke3RhcmdldH1cIiB3ZXJlIGFjY2VwdGVkIG9yIGRlbmllZCwgdGhlIGhhbmRsaW5nIG9mIFwiJHtyZXF1ZXN0ZWRUaXRsZX1cIiB3aWxsIGJlIGlnbm9yZWQuYCwgJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdGVkUGFnZXMucHVzaChyZXF1ZXN0ZWRUaXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmFjY2VwdGVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc29tZVJlcXVlc3RBY2NlcHRlZERlbmllZCAmJiAhYWxsUmVxdWVzdHNBY2NlcHRlZERlbmllZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeShgTm90IGFsbCByZXF1ZXN0cyB0byBcIiR7dGFyZ2V0fVwiIHdlcmUgYWNjZXB0ZWQgb3IgZGVuaWVkLCB0aGUgaGFuZGxpbmcgb2YgXCIke3JlcXVlc3RlZFRpdGxlfVwiIGlzIGJlaW5nIGlnbm9yZWQuYCwgJ3dhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbmllZFBhZ2VzLnB1c2goW3JlcXVlc3RlZFRpdGxlLCBhY3Rpb24uZGVueVJlYXNvbiFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHMuZGVuaWVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uLmNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50cy5wdXNoKFtyZXF1ZXN0ZWRUaXRsZSwgYWN0aW9uLmNvbW1lbnRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHNbJ2NvbW1lbnRlZCBvbiddKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFRoZSByZXF1ZXN0IHRvIGNyZWF0ZSBcIiR7cmVxdWVzdGVkVGl0bGV9XCIgXHUyMTkyIFwiJHt0YXJnZXR9XCIgd2FzIG1hcmtlZCB0byBiZSBjb21tZW50ZWQgb24sIGJ1dCBubyBjb21tZW50IHdhcyBwcm92aWRlZCBzbyBpdCB3aWxsIGJlIHNraXBwZWQuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Nsb3NlJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbFJlcXVlc3RzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbi5jb21tZW50KSBjb21tZW50cy5wdXNoKFtyZXF1ZXN0ZWRUaXRsZSwgYWN0aW9uLmNvbW1lbnRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHMuY2xvc2VkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYE5vdCBhbGwgcmVxdWVzdHMgdG8gXCIke3RhcmdldH1cIiB3ZXJlIGNsb3NlZCB3aXRoIHRoZSBzYW1lIHJlYXNvbiwgdGhlIGhhbmRsaW5nIG9mIFwiJHtyZXF1ZXN0ZWRUaXRsZX1cIiBpcyBiZWluZyBpZ25vcmVkLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWN0aW9uRGF0YSA9IHsgcGFnZVRleHQ6IG5ld1BhZ2VUZXh0LCAuLi5PYmplY3QudmFsdWVzKHJlcXVlc3RzKVswXS5vcmlnaW5hbFRleHQgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1lbnRzLmxlbmd0aCA+IDApIHNlY3Rpb25EYXRhID0gdGhpcy5tb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YSwgeyBhcHBlbmQ6IHRoaXMubWFwQ29tbWVudHMoY29tbWVudHMsIGFtb3VudE9mUGFnZXMgPT09IDEsIGNvbW1lbnRzLmxlbmd0aCA9PT0gYW1vdW50T2ZQYWdlcykgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxSZXF1ZXN0c0FjY2VwdGVkRGVuaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NpbmdJZDogc3RyaW5nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2VwdGVkUGFnZXMubGVuZ3RoID4gMCAmJiBkZW5pZWRQYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NpbmdJZCA9ICdwJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2NlcHRlZFBhZ2VzTWVzc2FnZSA9IGAqIHt7c3Vic3Q6QWZDIHJlZGlyZWN0fX0gKCR7YWNjZXB0ZWRQYWdlcy5tYXAoKHBhZ2UpID0+IGBbWyR7cGFnZX1dXWApLmpvaW4oJywgJyl9KSB+fn5+YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVuaWVkUGFnZXNNZXNzYWdlID0gdGhpcy5tYXBEZW5pZWRSZWFzb25zKGRlbmllZFBhZ2VzLCBmYWxzZSwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBhY2NlcHRlZFBhZ2VzKSB0aGlzLmhhbmRsZUFjY2VwdGVkUmVkaXJlY3QocGFnZSwgcmVxdWVzdHNbcGFnZV0sIHRhcmdldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkRhdGEgPSB0aGlzLm1vZGlmeVNlY3Rpb25EYXRhKHNlY3Rpb25EYXRhLCB7IGFwcGVuZDogYCR7YWNjZXB0ZWRQYWdlc01lc3NhZ2V9XFxuJHtkZW5pZWRQYWdlc01lc3NhZ2V9YCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFjY2VwdGVkUGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nSWQgPSAnYSc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIGFjY2VwdGVkUGFnZXMpIHRoaXMuaGFuZGxlQWNjZXB0ZWRSZWRpcmVjdChwYWdlLCByZXF1ZXN0c1twYWdlXSwgdGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uRGF0YSA9IHRoaXMubW9kaWZ5U2VjdGlvbkRhdGEoc2VjdGlvbkRhdGEsIHsgYXBwZW5kOiBgKiB7e3N1YnN0OkFmQyByZWRpcmVjdCR7YWNjZXB0ZWRQYWdlcy5sZW5ndGggPiAxID8gJ3xhbGwnIDogJyd9fX0gfn5+fmAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ0lkID0gJ2QnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25EYXRhID0gdGhpcy5tb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YSwgeyBhcHBlbmQ6IHRoaXMubWFwRGVuaWVkUmVhc29ucyhkZW5pZWRQYWdlcywgYW1vdW50T2ZQYWdlcyA9PT0gMSwgdHJ1ZSkgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbkRhdGEgPSB0aGlzLm1vZGlmeVNlY3Rpb25EYXRhKHNlY3Rpb25EYXRhLCB7IHByZXBlbmQ6IGB7e0FmQy1jfCR7Y2xvc2luZ0lkfX19YCwgYXBwZW5kOiAne3tBZkMtY3xifX0nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhbGxSZXF1ZXN0c0Nsb3NlZCkgc2VjdGlvbkRhdGEgPSB0aGlzLm1vZGlmeVNlY3Rpb25EYXRhKHNlY3Rpb25EYXRhLCB7IHByZXBlbmQ6IGB7e0FmQy1jfCR7Zmlyc3RDbG9zZVJlYXNvbn19fWAsIGFwcGVuZDogJ3t7QWZDLWN8Yn19JyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFnZVRleHQgPSBzZWN0aW9uRGF0YS5wYWdlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJlZm9yZVRleHQgKyB0aGlzLnBhZ2VDb250ZW50ID09PSBuZXdQYWdlVGV4dCkgcmV0dXJuIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KCdObyByZXF1ZXN0cyBoYXZlIGJlZW4gaGFuZGxlZCAocGFnZSBjb250ZW50IGlkZW50aWNhbCkhJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwcGVkQ291bnRzID0gT2JqZWN0LmVudHJpZXMoY291bnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoWywgY291bnRdKSA9PiBjb3VudCA+IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbYWN0aW9uLCBjb3VudF0pID0+IGAke2FjdGlvbn0gJHtjb3VudH1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJywgJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0c0NyZWF0aW9uc1RvTWFrZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VUaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogKCkgPT4gKHsgdGV4dDogbmV3UGFnZVRleHQsIHN1bW1hcnk6IGBIYW5kbGluZyBBZkMgcmVkaXJlY3QgcmVxdWVzdHMgKCR7bWFwcGVkQ291bnRzfSkke3RoaXMuc2NyaXB0TWVzc2FnZX1gIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1ha2VBbGxFZGl0c0NyZWF0aW9ucyhzaG93QWN0aW9uc0RpYWxvZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoJ0FsbCBjaGFuZ2VzIG1hZGUsIGNsaWNrIGJlbG93IHRvIHJlbG9hZCEnLCAnc3VjY2VzcycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLnNob3dSZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoJ05vIHJlcXVlc3RzIGhhdmUgYmVlbiBoYW5kbGVkIScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnlSZXF1ZXN0SGFuZGxlZCA9ICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgQ2F0ZWdvcnlBY3Rpb25zKS5zb21lKChhY3Rpb25EYXRhKSA9PiBhY3Rpb25EYXRhLmFjdGlvbiAhPT0gJ25vbmUnKTtcblxuICAgICAgICAgICAgICAgIGlmIChhbnlSZXF1ZXN0SGFuZGxlZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbkRhdGEgb2YgdGhpcy5hY3Rpb25zVG9UYWtlIGFzIENhdGVnb3J5QWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlY3Rpb25EYXRhID0geyBwYWdlVGV4dDogbmV3UGFnZVRleHQsIC4uLmFjdGlvbkRhdGEub3JpZ2luYWxUZXh0IH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uRGF0YS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhY2NlcHQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25EYXRhID0gdGhpcy5tb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YSwgeyBwcmVwZW5kOiAne3tBZkMtY3xhfX0nLCBhcHBlbmQ6ICcqIHt7c3Vic3Q6QWZDIGNhdGVnb3J5fX0gfn5+flxcbnt7QWZDLWN8Yn19JyB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFjY2VwdGVkQ2F0ZWdvcnkoYWN0aW9uRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmFjY2VwdGVkKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25EYXRhID0gdGhpcy5tb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlcGVuZDogJ3t7QWZDLWN8ZH19JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogYCogJHt0aGlzLmZvcm1hdERlbmllZFJlYXNvbihhY3Rpb25EYXRhLmRlbnlSZWFzb24hKX0gfn5+flxcbnt7QWZDLWN8Yn19YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmRlbmllZCsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjb21tZW50Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uRGF0YS5jb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uRGF0YSA9IHRoaXMubW9kaWZ5U2VjdGlvbkRhdGEoc2VjdGlvbkRhdGEsIHsgYXBwZW5kOiBgKiB7e0FmQyBjb21tZW50fDE9JHthY3Rpb25EYXRhLmNvbW1lbnR9fX0gfn5+fmAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50c1snY29tbWVudGVkIG9uJ10rKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgVGhlIHJlcXVlc3QgdG8gY3JlYXRlIFwiJHthY3Rpb25EYXRhLmNhdGVnb3J5fVwiIHdhcyBtYXJrZWQgdG8gYmUgY29tbWVudGVkIG9uLCBidXQgbm8gY29tbWVudCB3YXMgcHJvdmlkZWQgc28gaXQgd2lsbCBiZSBza2lwcGVkLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dhcm5pbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2xvc2UnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25EYXRhID0gdGhpcy5tb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlcGVuZDogYHt7QWZDLWN8JHthY3Rpb25EYXRhLmNsb3NpbmdSZWFzb24hLmlkfX19YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogKGFjdGlvbkRhdGEuY29tbWVudCA/IGAqIHt7QWZDIGNvbW1lbnR8MT0ke2FjdGlvbkRhdGEuY29tbWVudH19fSB+fn5+YCA6ICcnKSArICdcXG57e0FmQy1jfGJ9JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmNsb3NlZCsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFnZVRleHQgPSBzZWN0aW9uRGF0YS5wYWdlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJlZm9yZVRleHQgKyB0aGlzLnBhZ2VDb250ZW50ID09PSBuZXdQYWdlVGV4dCkgcmV0dXJuIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KCdObyByZXF1ZXN0cyBoYXZlIGJlZW4gaGFuZGxlZCAocGFnZSBjb250ZW50IGlkZW50aWNhbCkhJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwcGVkQ291bnRzID0gT2JqZWN0LmVudHJpZXMoY291bnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoWywgY291bnRdKSA9PiBjb3VudCA+IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbYWN0aW9uLCBjb3VudF0pID0+IGAke2FjdGlvbn0gJHtjb3VudH1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJywgJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0c0NyZWF0aW9uc1RvTWFrZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlZGl0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnBhZ2VUaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogKCkgPT4gKHsgdGV4dDogbmV3UGFnZVRleHQsIHN1bW1hcnk6IGBIYW5kbGluZyBBZkMgY2F0ZWdvcnkgcmVxdWVzdHMgKCR7bWFwcGVkQ291bnRzfSkke3RoaXMuc2NyaXB0TWVzc2FnZX1gIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1ha2VBbGxFZGl0c0NyZWF0aW9ucyhzaG93QWN0aW9uc0RpYWxvZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoJ0FsbCBjaGFuZ2VzIG1hZGUsIGNsaWNrIGJlbG93IHRvIHJlbG9hZCEnLCAnc3VjY2VzcycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLnNob3dSZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoJ05vIHJlcXVlc3RzIGhhdmUgYmVlbiBoYW5kbGVkIScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZvcm1hdHMgYSByZXF1ZXN0IGRlbmlhbCByZWFzb24gdG8gYSB7e3N1YnN0OkFmQyByZWRpcmVjdH19IGNhbGwuXG4gICAgICAgICAqIEBwYXJhbSByZWFzb24gVGhlIHJlYXNvbiB0byBmb3JtYXQuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGZvcm1hdERlbmllZFJlYXNvbihyZWFzb246IHN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVQYXJhbWV0ZXJzID0gcmVhc29uLnN0YXJ0c1dpdGgoJ2F1dG9maWxsOicpID8gcmVhc29uLnJlcGxhY2UoJ2F1dG9maWxsOicsICcnKSA6IGBkZWNsaW5lfDI9JHtyZWFzb259YDtcblxuICAgICAgICAgICAgcmV0dXJuIGB7e3N1YnN0OkFmQyAke3RoaXMucmVxdWVzdFBhZ2VUeXBlfXwke3RlbXBsYXRlUGFyYW1ldGVyc319fWA7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIGdyb3VwIG9mIGRlbmllZCByZWFzb25zLlxuICAgICAgICAgKiBAcGFyYW0gZGVuaWVkUGFnZXMgVGhlIHBhZ2VzIHRvIG1hcC5cbiAgICAgICAgICogQHBhcmFtIHNpbmd1bGFyUmVxdWVzdCBXaGV0aGVyIHRoZSByZXF1ZXN0IGlzIHRoZSBvbmx5IHJlcXVlc3QuXG4gICAgICAgICAqIEBwYXJhbSBhbGxSZXF1ZXN0cyBXaGV0aGVyIGFsbCByZXF1ZXN0cyBhcmUgYmVpbmcgbWFwcGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBtYXBEZW5pZWRSZWFzb25zKGRlbmllZFBhZ2VzOiBzdHJpbmdbXVtdLCBzaW5ndWxhclJlcXVlc3Q6IGJvb2xlYW4sIGFsbFJlcXVlc3RzOiBib29sZWFuKSB7XG4gICAgICAgICAgICBpZiAoc2luZ3VsYXJSZXF1ZXN0KSByZXR1cm4gYCogJHt0aGlzLmZvcm1hdERlbmllZFJlYXNvbihkZW5pZWRQYWdlc1swXVsxXSl9IH5+fn5gO1xuXG4gICAgICAgICAgICBjb25zdCByZWFzb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7fTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBbcGFnZSwgcmVhc29uXSBvZiBkZW5pZWRQYWdlcykge1xuICAgICAgICAgICAgICAgIGlmICghcmVhc29uc1tyZWFzb25dKSByZWFzb25zW3JlYXNvbl0gPSBbXTtcbiAgICAgICAgICAgICAgICByZWFzb25zW3JlYXNvbl0ucHVzaChwYWdlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcmVhc29uc0FycmF5ID0gT2JqZWN0LmVudHJpZXMocmVhc29ucyk7XG5cbiAgICAgICAgICAgIHJldHVybiByZWFzb25zQXJyYXlcbiAgICAgICAgICAgICAgICAubWFwKChbcmVhc29uLCBwYWdlc10pID0+IGAqICR7dGhpcy5mb3JtYXREZW5pZWRSZWFzb24ocmVhc29uKX0ke3JlYXNvbnNBcnJheS5sZW5ndGggPiAxIHx8ICFhbGxSZXF1ZXN0cyA/IGAgKCR7cGFnZXMubWFwKChwYWdlKSA9PiBgW1ske3BhZ2V9XV1gKS5qb2luKCcsICcpfSlgIDogJyd9IH5+fn5gKVxuICAgICAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgZ3JvdXAgb2YgY29tbWVudHMuXG4gICAgICAgICAqIEBwYXJhbSBjb21tZW50cyBUaGUgY29tbWVudHMgdG8gbWFwLlxuICAgICAgICAgKiBAcGFyYW0gc2luZ3VsYXJSZXF1ZXN0IFdoZXRoZXIgdGhlIHJlcXVlc3QgaXMgdGhlIG9ubHkgcmVxdWVzdC5cbiAgICAgICAgICogQHBhcmFtIGFsbFJlcXVlc3RzIFdoZXRoZXIgYWxsIHJlcXVlc3RzIGFyZSBiZWluZyBtYXBwZWQuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIG1hcENvbW1lbnRzKGNvbW1lbnRzOiBzdHJpbmdbXVtdLCBzaW5ndWxhclJlcXVlc3Q6IGJvb2xlYW4sIGFsbFJlcXVlc3RzOiBib29sZWFuKSB7XG4gICAgICAgICAgICBpZiAoc2luZ3VsYXJSZXF1ZXN0KSByZXR1cm4gYCoge3tBZkMgY29tbWVudHwxPSR7Y29tbWVudHNbMF1bMV19fX0gfn5+fmA7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRNZXNzYWdlczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+ID0ge307XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgW3BhZ2UsIGNvbW1lbnRdIG9mIGNvbW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb21tZW50TWVzc2FnZXNbY29tbWVudF0pIGNvbW1lbnRNZXNzYWdlc1tjb21tZW50XSA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbW1lbnRNZXNzYWdlc1tjb21tZW50XS5wdXNoKHBhZ2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb21tZW50c0FycmF5ID0gT2JqZWN0LmVudHJpZXMoY29tbWVudE1lc3NhZ2VzKTtcblxuICAgICAgICAgICAgcmV0dXJuIGNvbW1lbnRzQXJyYXlcbiAgICAgICAgICAgICAgICAubWFwKChbY29tbWVudCwgcGFnZXNdKSA9PiBgKiB7e0FmQyBjb21tZW50fDE9JHtjb21tZW50fX19JHtjb21tZW50c0FycmF5Lmxlbmd0aCA+IDEgfHwgIWFsbFJlcXVlc3RzID8gYCAoJHtwYWdlcy5tYXAoKHBhZ2UpID0+IGBbWyR7cGFnZX1dXWApLmpvaW4oJywgJyl9KWAgOiAnJ30gfn5+fmApXG4gICAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1vZGlmaWVzIGEgZ2l2ZW4gc2VjdGlvbiB0ZXh0IHdpdGggcHJlcGVuZGVkIGFuZCBhcHBlbmRlZCB0ZXh0LlxuICAgICAgICAgKiBAcGFyYW0gc2VjdGlvbkRhdGEgVGhlIHNlY3Rpb24gZGF0YS5cbiAgICAgICAgICogQHBhcmFtIGNoYW5nZXMgVGhlIHByZXBlbmRpbmcgYW5kIGFwcGVuZGluZyB0ZXh0LlxuICAgICAgICAgKiBAcGFyYW0gY2hhbmdlcy5wcmVwZW5kIFRoZSB0ZXh0IHRvIHByZXBlbmQgdG8gdGhlIHNlY3Rpb24gdGV4dC5cbiAgICAgICAgICogQHBhcmFtIGNoYW5nZXMuYXBwZW5kIFRoZSB0ZXh0IHRvIGFwcGVuZCB0byB0aGUgc2VjdGlvbiB0ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBtb2RpZnlTZWN0aW9uRGF0YShzZWN0aW9uRGF0YTogeyBwYWdlVGV4dDogc3RyaW5nIH0gJiBBY3Rpb25bJ29yaWdpbmFsVGV4dCddLCB7IHByZXBlbmQsIGFwcGVuZCB9OiB7IHByZXBlbmQ/OiBzdHJpbmc7IGFwcGVuZD86IHN0cmluZyB9KSB7XG4gICAgICAgICAgICBjb25zdCB7IGZ1bGxTZWN0aW9uVGV4dDogb2xkRnVsbFNlY3Rpb25UZXh0LCBzZWN0aW9uVGV4dDogb2xkU2VjdGlvblRleHQgfSA9IHNlY3Rpb25EYXRhO1xuXG4gICAgICAgICAgICBpZiAocHJlcGVuZCkgc2VjdGlvbkRhdGEuc2VjdGlvblRleHQgPSBwcmVwZW5kICsgJ1xcbicgKyBzZWN0aW9uRGF0YS5zZWN0aW9uVGV4dDtcbiAgICAgICAgICAgIGlmIChhcHBlbmQpIHNlY3Rpb25EYXRhLnNlY3Rpb25UZXh0ICs9ICdcXG4nICsgYXBwZW5kO1xuXG4gICAgICAgICAgICBzZWN0aW9uRGF0YS5mdWxsU2VjdGlvblRleHQgPSBzZWN0aW9uRGF0YS5mdWxsU2VjdGlvblRleHQucmVwbGFjZShvbGRTZWN0aW9uVGV4dCwgc2VjdGlvbkRhdGEuc2VjdGlvblRleHQpO1xuXG4gICAgICAgICAgICBzZWN0aW9uRGF0YS5wYWdlVGV4dCA9IHNlY3Rpb25EYXRhLnBhZ2VUZXh0LnJlcGxhY2Uob2xkRnVsbFNlY3Rpb25UZXh0LCBzZWN0aW9uRGF0YS5mdWxsU2VjdGlvblRleHQpO1xuXG4gICAgICAgICAgICByZXR1cm4gc2VjdGlvbkRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlcyB0aGUgY3JlYXRpb24gb2YgcGFnZXMgcmVsYXRlZCB0byBhbiBhY2NlcHRlZCByZWRpcmVjdCByZXF1ZXN0LlxuICAgICAgICAgKiBAcGFyYW0gcGFnZSBUaGUgcmVxdWVzdGVkIHBhZ2UuXG4gICAgICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIG9mIHRoZSByZXF1ZXN0ZWQgcGFnZS5cbiAgICAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9mIHRoZSByZXF1ZXN0ZWQgcGFnZS5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgaGFuZGxlQWNjZXB0ZWRSZWRpcmVjdChwYWdlOiBzdHJpbmcsIGRhdGE6IFJlZGlyZWN0QWN0aW9uLCB0YXJnZXQ6IHN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgdGFnc1dpdGhBcmd1bWVudHMgPVxuICAgICAgICAgICAgICAgIGRhdGEucmVkaXJlY3RUZW1wbGF0ZXMgJiYgZGF0YS5yZWRpcmVjdFRlbXBsYXRlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgID8gZGF0YS5yZWRpcmVjdFRlbXBsYXRlcy5tYXAoKHRhZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3VuZEFyZ3VtZW50RWRpdG9yID0gdGhpcy50ZW1wbGF0ZUVkaXRvcnNJbmZvLmZpbmQoKGVkaXRvckluZm8pID0+IGVkaXRvckluZm8ubmFtZSA9PT0gdGFnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZEFyZ3VtZW50RWRpdG9yKSByZXR1cm4gYHt7JHt0YWd9fX1gO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZEFyZ3VtZW50cyA9IGZvdW5kQXJndW1lbnRFZGl0b3IucGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgocGFyYW1ldGVyLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcGFyYW1ldGVyLmVkaXRvci5nZXRWYWx1ZSgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgfCR7cGFyYW1ldGVyLm5hbWUgPT09IChpbmRleCArIDEpLnRvU3RyaW5nKCkgPyAnJyA6IGAke3BhcmFtZXRlci5uYW1lfT1gfSR7dmFsdWV9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGB7eyR7dGFnfSR7bWFwcGVkQXJndW1lbnRzfX19YDtcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuZWRpdHNDcmVhdGlvbnNUb01ha2UucHVzaChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc1JlZGlyZWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogcGFnZSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYCNSRURJUkVDVCBbWyR7dGFyZ2V0fV1dJHt0YWdzV2l0aEFyZ3VtZW50cyA/IGBcXG5cXG57e1JlZGlyZWN0IGNhdGVnb3J5IHNoZWxsfFxcbiR7dGFnc1dpdGhBcmd1bWVudHMuam9pbignXFxuJyl9XFxufX1gIDogJyd9YCxcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogYENyZWF0aW5nIHJlZGlyZWN0IHRvIFtbJHt0YXJnZXR9XV0gYXMgcmVxdWVzdGVkIGF0IFtbV1A6QUZDL1JdXSR7dGhpcy5zY3JpcHRNZXNzYWdlfWAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc1JlZGlyZWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG13LlRpdGxlLm5ld0Zyb21UZXh0KHBhZ2UpIS5nZXRUYWxrUGFnZSgpIS5nZXRQcmVmaXhlZFRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYHt7V2lraVByb2plY3QgYmFubmVyIHNoZWxsfFxcbnt7V2lraVByb2plY3QgQXJ0aWNsZXMgZm9yIGNyZWF0aW9ufHRzPXt7c3Vic3Q6TE9DQUxUSU1FU1RBTVB9fXxyZXZpZXdlcj0ke213LmNvbmZpZy5nZXQoJ3dnVXNlck5hbWUnKX19fVxcbn19YCxcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeTogYEFkZGluZyBbW1dpa2lwZWRpYTpXaWtpUHJvamVjdCBBcnRpY2xlcyBmb3IgY3JlYXRpb258V2lraVByb2plY3QgQXJ0aWNsZXMgZm9yIGNyZWF0aW9uXV0gYmFubmVyJHt0aGlzLnNjcmlwdE1lc3NhZ2V9YCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIYW5kbGVzIHRoZSBjcmVhdGlvbiBvZiBwYWdlcyByZWxhdGVkIHRvIGFuIGFjY2VwdGVkIGNhdGVnb3J5IHJlcXVlc3QuXG4gICAgICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIG9mIHRoZSByZXF1ZXN0ZWQgY2F0ZWdvcnkuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGhhbmRsZUFjY2VwdGVkQ2F0ZWdvcnkoZGF0YTogQ2F0ZWdvcnlBY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdHNDcmVhdGlvbnNUb01ha2UucHVzaChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc1JlZGlyZWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGBDYXRlZ29yeToke2RhdGEuY2F0ZWdvcnl9YCxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZGF0YS5wYXJlbnRzLm1hcCgocGFyZW50KSA9PiBgW1tDYXRlZ29yeToke3BhcmVudH1dXWApLmpvaW4oJ1xcbicpLFxuICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiBgQ3JlYXRpbmcgY2F0ZWdvcnkgYXMgcmVxdWVzdGVkIGF0IFtbV1A6QUZDL0NdXSR7dGhpcy5zY3JpcHRNZXNzYWdlfWAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc1JlZGlyZWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGBDYXRlZ29yeSB0YWxrOiR7ZGF0YS5jYXRlZ29yeX1gLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBge3tXaWtpUHJvamVjdCBiYW5uZXIgc2hlbGx8XFxue3tXaWtpUHJvamVjdCBBcnRpY2xlcyBmb3IgY3JlYXRpb258dHM9e3tzdWJzdDpMT0NBTFRJTUVTVEFNUH19fHJldmlld2VyPSR7bXcuY29uZmlnLmdldCgnd2dVc2VyTmFtZScpfX19XFxufX1gLFxuICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiBgQWRkaW5nIFtbV2lraXBlZGlhOldpa2lQcm9qZWN0IEFydGljbGVzIGZvciBjcmVhdGlvbnxXaWtpUHJvamVjdCBBcnRpY2xlcyBmb3IgY3JlYXRpb25dXSBiYW5uZXIke3RoaXMuc2NyaXB0TWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uZGF0YS5leGFtcGxlcy5tYXAoKGV4YW1wbGUpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlZGl0JyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGV4YW1wbGUsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogKHsgY29udGVudCB9OiB7IGNvbnRlbnQ6IHN0cmluZyB9KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogYCR7Y29udGVudH1cXG5bW0NhdGVnb3J5OiR7ZGF0YS5jYXRlZ29yeX1dXWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5OiBgQWRkaW5nIHBhZ2UgdG8gW1s6Q2F0ZWdvcnk6JHtkYXRhLmNhdGVnb3J5fV1dIGFzIHJlcXVlc3RlZCBhdCBbW1dQOkFGQy9DXV0ke3RoaXMuc2NyaXB0TWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1ha2VzIGFsbCBlZGl0cyBhbmQgY3JlYXRpb25zIHRoYXQgbmVlZCB0byBiZSBtYWRlLlxuICAgICAgICAgKiBAcGFyYW0gc2hvd0FjdGlvbnNEaWFsb2cgVGhlIGRpYWxvZyB0byBsb2cgdGhlIHJlc3VsdHMgdG8uXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGFzeW5jIG1ha2VBbGxFZGl0c0NyZWF0aW9ucyhzaG93QWN0aW9uc0RpYWxvZzogU2hvd0FjdGlvbnNEaWFsb2cpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIHRoaXMuZWRpdHNDcmVhdGlvbnNUb01ha2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhcGlGdW5jdGlvbiA9IGFjdGlvbi50eXBlID09PSAnZWRpdCcgPyB0aGlzLmFwaS5lZGl0KGFjdGlvbi50aXRsZSwgYWN0aW9uLnRyYW5zZm9ybSkgOiB0aGlzLmFwaS5jcmVhdGUoYWN0aW9uLnRpdGxlLCB7IHN1bW1hcnk6IGFjdGlvbi5zdW1tYXJ5IH0sIGFjdGlvbi50ZXh0KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICAgIGxpbmtFbGVtZW50LnRhcmdldCA9ICdfYmxhbmsnO1xuICAgICAgICAgICAgICAgIGxpbmtFbGVtZW50LmhyZWYgPSBtdy51dGlsLmdldFVybChhY3Rpb24udGl0bGUsICdpc1JlZGlyZWN0JyBpbiBhY3Rpb24gJiYgYWN0aW9uLmlzUmVkaXJlY3QgPyB7IHJlZGlyZWN0OiAnbm8nIH0gOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIGxpbmtFbGVtZW50LnRleHRDb250ZW50ID0gYWN0aW9uLnRpdGxlO1xuXG4gICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoYCR7YWN0aW9uLnR5cGUgPT09ICdlZGl0JyA/ICdFZGl0aW5nJyA6ICdDcmVhdGluZyd9ICR7bGlua0VsZW1lbnQub3V0ZXJIVE1MfS4uLmApO1xuXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWF3YWl0LWluLWxvb3BcbiAgICAgICAgICAgICAgICBhd2FpdCBhcGlGdW5jdGlvbi5jYXRjaChhc3luYyAoZXJyb3JDb2RlOiBzdHJpbmcsIGVycm9ySW5mbzogTWVkaWFXaWtpRGF0YUVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckNvZGUgPT09ICdyYXRlbGltaXRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KGBSYXRlIGxpbWl0ZWQuIFdhaXRpbmcgZm9yIDcwIHNlY29uZHMuLi4gKHJlc3VtaW5nIGF0ICR7bmV3IERhdGUoRGF0ZS5ub3coKSArIDcwXzAwMCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9KWAsICd3YXJuaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCA3MF8wMDApKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoJ0NvbnRpbnVpbmcuLi4nLCAnc3VjY2VzcycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBpRnVuY3Rpb24uY2F0Y2goKGVycm9yQ29kZTogc3RyaW5nLCBlcnJvckluZm86IE1lZGlhV2lraURhdGFFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRXJyb3IgJHthY3Rpb24udHlwZSA9PT0gJ2VkaXQnID8gJ2VkaXRpbmcnIDogJ2NyZWF0aW5nJ30gJHtsaW5rRWxlbWVudC5vdXRlckhUTUx9OiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBFcnJvciAke2FjdGlvbi50eXBlID09PSAnZWRpdCcgPyAnZWRpdGluZycgOiAnY3JlYXRpbmcnfSAke2xpbmtFbGVtZW50Lm91dGVySFRNTH06ICR7ZXJyb3JJbmZvPy5lcnJvci5pbmZvID8/ICdVbmtub3duIGVycm9yJ30gKCR7ZXJyb3JDb2RlfSkuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24oQWZjcmNIZWxwZXJEaWFsb2cucHJvdG90eXBlLCBPTy51aS5Qcm9jZXNzRGlhbG9nLnByb3RvdHlwZSk7XG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7OzthQUlBLEdBQUcsT0FBTyxNQUFNLENBQUMsaUJBQWtCLGVBQWdCLGtCQUFtQixpQkFBaUIsRUFBRyxJQUFNLENBQzVGLE1BQU1BLEVBQXdCLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSw0Q0FDeERDLEVBQXdCLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSw2Q0FFOUQsR0FBSSxDQUFDRCxHQUF5QixDQUFDQyxFQUF1QixPQUV0RCxNQUFNQyxFQUFrQkYsRUFBd0IsV0FBYSxXQUVoRCxHQUFHLEtBQUssZUFBZSxHQUFHLE9BQU8sSUFBSSxNQUFNLElBQU0sVUFBWSxPQUFTLGFBQWMsSUFBSyxVQUFVRSxDQUFlLHFCQUFzQixjQUFjLEVBRTlKLGlCQUFpQixRQUFVQyxHQUFVLENBQ3RDQSxFQUFNLGVBQWUsRUFFckIsTUFBTUMsRUFBZ0IsSUFBSSxHQUFHLEdBQUcsY0FDaEMsU0FBUyxLQUFLLE9BQU9BLEVBQWMsU0FBUyxDQUFDLENBQUMsRUFFOUMsTUFBTUMsRUFBb0IsSUFBSUMsRUFBa0JKLEVBQWlCLEdBQUcsT0FBTyxJQUFJLFlBQVksRUFBRSxXQUFXLElBQUssR0FBRyxDQUFDLEVBRWpIRSxFQUFjLFdBQVcsQ0FBQ0MsQ0FBaUIsQ0FBQyxFQUU1Q0EsRUFBa0IsS0FBSyxFQUN2QkEsRUFBa0IsS0FBSyxDQUMzQixDQUFDLEVBS0QsTUFBTUUsVUFBMEIsR0FBRyxHQUFHLE1BQU8sQ0FLekMsYUFBYyxDQUNWLE1BQU0sQ0FBRSxLQUFNLE9BQVEsQ0FBQyxFQU0zQixnQkFBYSxLQUNULEdBQUcsR0FBRyxPQUFPLFVBQVUsV0FBVyxNQUFNLElBQUksRUFFNUMsR0FBRyxLQUFLLE9BQU87QUFBQTtBQUFBO0FBQUEsRUFHekIsRUFFVSxLQUFLLGNBQWdCLElBQUksR0FBRyxHQUFHLFlBQVksQ0FBRSxPQUFRLEdBQU0sU0FBVSxFQUFNLENBQUMsRUFDM0UsS0FBc0MsTUFBTSxPQUFPLEtBQUssY0FBYyxRQUFRLEVBRS9FLEtBQUssVUFBWSxTQUFTLGNBQWMsS0FBSyxFQUM3QyxLQUFLLFVBQVUsVUFBVSxJQUFJLGdDQUFnQyxFQUU3RCxLQUFLLFlBQWMsSUFBSSxHQUFHLEdBQUcsYUFBYSxDQUFFLE1BQU8sUUFBUyxNQUFPLENBQUMsT0FBUSxPQUFPLENBQUUsQ0FBQyxFQUN0RixLQUFLLFlBQVksR0FBRyxRQUFTLElBQU0sS0FBSyxNQUFNLENBQUMsRUFFL0MsS0FBSyxjQUFjLFNBQVMsT0FBTyxLQUFLLFVBQVcsS0FBSyxZQUFZLFFBQVEsRUFFckUsTUF2QlBBLEVBQWtCLE9BQU8sS0FBTyxvQkFDaENBLEVBQWtCLE9BQU8sTUFBUSxTQUNyQyxDQTZCTyxZQUFZQyxFQUFpQkMsRUFBaUMsU0FBVSxDQUMzRSxNQUFNQyxFQUFnQixJQUFJLEdBQUcsR0FBRyxjQUFjLENBQUUsS0FBQUQsRUFBTSxPQUFRLEdBQU0sTUFBTyxJQUFJLEdBQUcsR0FBRyxZQUFZRCxDQUFPLENBQUUsQ0FBQyxFQUUzRyxLQUFLLFVBQVUsT0FBT0UsRUFBYyxTQUFTLENBQUMsQ0FBQyxFQUUvQyxLQUFLLFdBQVcsRUFFaEIsS0FBSyxZQUFZLHNCQUFzQixDQUMzQyxDQUtPLFlBQWEsQ0FDaEIsS0FBSyxZQUFZLFNBQVMsT0FBTyxFQUVqQyxNQUFNQyxFQUFlLElBQUksR0FBRyxHQUFHLGFBQWEsQ0FBRSxNQUFPLFNBQVUsTUFBTyxDQUFDLFNBQVMsQ0FBRSxDQUFDLEVBQ25GQSxFQUFhLEdBQUcsUUFBUyxJQUFNLE9BQU8sU0FBUyxPQUFPLENBQUMsRUFFdkQsS0FBSyxjQUFjLFNBQVMsT0FBT0EsRUFBYSxRQUFRLENBQzVELENBQ0osQ0FFQSxPQUFPLE9BQU9KLEVBQWtCLFVBQVcsR0FBRyxHQUFHLE9BQU8sU0FBUyxFQU9qRSxNQUFNSyxVQUF3QixHQUFHLEdBQUcsZUFBZ0IsQ0FJaEQsWUFBWUMsRUFBNkIsQ0FDckMsTUFBTUEsQ0FBTSxFQUhoQixLQUFRLElBQU0sSUFBSSxHQUFHLElBT3JCLHNCQUFtQixJQUFNLENBQ3JCLE1BQU1DLEVBQVEsS0FBSyxTQUFTLEVBQ3RCQyxFQUFXLEVBQUUsU0FBUyxFQUV2QkQsR0FBT0MsRUFBUyxRQUFRLENBQUMsQ0FBQyxFQUUvQixNQUFNQyxFQUFjLEdBQUcsTUFBTSxZQUFZRixDQUFLLEVBRTlDLFlBQUssSUFDQSxJQUFJLENBQ0QsT0FBUSxRQUNSLGNBQWUsSUFDZixTQUFVLEdBQ1YsYUFBY0UsR0FBYSxlQUFlLEdBQUssRUFDL0MsVUFBV0EsR0FBYSxZQUFZLEdBQUtGLEVBQ3pDLFVBQVcsVUFDZixDQUEyQyxFQUMxQyxNQUFNLElBQU0sSUFBSSxFQUNoQixLQUFNRyxHQUE2RCxDQUNoRSxHQUFJQSxHQUFRLE9BQU8sTUFBTyxDQUN0QixNQUFNQyxFQUFRRCxFQUFPLE1BQU0sTUFBTSxJQUFLRSxJQUFVLENBQUUsS0FBTUEsRUFBSyxNQUFPLE1BQU9BLEVBQUssS0FBTSxFQUFFLEVBRXhGLEtBQUssS0FBSyxpQkFBa0JELENBQUssRUFFakNILEVBQVMsUUFBUUcsQ0FBSyxDQUMxQixNQUFPSCxFQUFTLFFBQVEsQ0FBQyxDQUFDLENBQzlCLENBQUMsRUFFRUEsRUFBUyxRQUFRLENBQUUsT0FBUSxDQUFDLENBQUUsQ0FBQyxDQUMxQyxFQUVBLG9DQUFxQ0ssR0FBcUNBLEdBQVksQ0FBQyxFQUV2RixrQ0FBZ0NDLEdBQTRDQSxFQUFLLElBQUksQ0FBQyxDQUFFLEtBQUFBLEVBQU0sTUFBQUMsQ0FBTSxJQUFNLElBQUksR0FBRyxHQUFHLGlCQUFpQixDQUFFLEtBQUFELEVBQU0sTUFBQUMsQ0FBTSxDQUFDLENBQUMsRUFwQ2pKLEdBQUcsR0FBRyxNQUFNLGNBQWMsS0FBSyxLQUE4Q1QsQ0FBTSxDQUN2RixDQW9DSixDQUVBLE9BQU8sT0FBT0QsRUFBZ0IsVUFBVyxHQUFHLEdBQUcsTUFBTSxjQUFjLFNBQVMsRUFLNUUsTUFBTVcsVUFBNEIsR0FBRyxHQUFHLGVBQWdCLENBSXBELFlBQVlWLEVBQTZCLENBQ3JDLE1BQU1BLENBQU0sRUFIaEIsS0FBUSxJQUFNLElBQUksR0FBRyxJQU9yQixzQkFBbUIsSUFBTSxDQUNyQixNQUFNQyxFQUFRLEtBQUssU0FBUyxFQUN0QkMsRUFBVyxFQUFFLFNBQVMsRUFFdkJELEdBQU9DLEVBQVMsUUFBUSxDQUFDLENBQUMsRUFFL0IsTUFBTUMsRUFBYyxHQUFHLE1BQU0sWUFBWUYsQ0FBSyxFQUU5QyxZQUFLLElBQ0EsSUFBSSxDQUNELE9BQVEsUUFDUixjQUFlLElBQ2YsU0FBVSxHQUNWLGFBQWMsR0FDZCxVQUFXRSxHQUFhLFlBQVksR0FBS0YsRUFDekMsVUFBVyxXQUNYLEtBQU0sWUFDVixDQUEyQyxFQUMxQyxNQUFNLElBQU0sSUFBSSxFQUNoQixLQUFNRyxHQUErRixDQUNsRyxHQUFJQSxHQUFRLE9BQU8sTUFBTyxDQUN0QixNQUFNQyxFQUFRRCxFQUFPLE1BQU0sTUFDdEIsT0FBUUUsR0FBUyxDQUFDQSxFQUFLLFlBQVksS0FBTUssR0FBYUEsRUFBUyxRQUFVLCtDQUErQyxDQUFDLEVBQ3pILElBQUtMLEdBQVMsQ0FDWCxNQUFNTSxFQUF3Qk4sRUFBSyxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFFckQsTUFBTyxDQUFFLEtBQU1NLEVBQXVCLE1BQU9BLENBQXNCLENBQ3ZFLENBQUMsRUFFTCxLQUFLLEtBQUssaUJBQWtCUCxDQUFLLEVBRWpDSCxFQUFTLFFBQVFHLENBQUssQ0FDMUIsTUFBT0gsRUFBUyxRQUFRLENBQUMsQ0FBQyxDQUM5QixDQUFDLEVBRUVBLEVBQVMsUUFBUSxDQUFFLE9BQVEsQ0FBQyxDQUFFLENBQUMsQ0FDMUMsRUFFQSxvQ0FBcUNLLEdBQXFDQSxHQUFZLENBQUMsRUFFdkYsa0NBQWdDQyxHQUE0Q0EsRUFBSyxJQUFJLENBQUMsQ0FBRSxLQUFBQSxFQUFNLE1BQUFDLENBQU0sSUFBTSxJQUFJLEdBQUcsR0FBRyxpQkFBaUIsQ0FBRSxLQUFBRCxFQUFNLE1BQUFDLENBQU0sQ0FBQyxDQUFDLEVBM0NqSixHQUFHLEdBQUcsTUFBTSxjQUFjLEtBQUssS0FBOENULENBQU0sQ0FDdkYsQ0EyQ0osQ0FFQSxPQUFPLE9BQU9VLEVBQW9CLFVBQVcsR0FBRyxHQUFHLE1BQU0sY0FBYyxTQUFTLEVBc0NoRixNQUFNakIsVUFBMEIsR0FBRyxHQUFHLGFBQWMsQ0FzQmhELFlBQVlKLEVBQTBDd0IsRUFBbUIsQ0FDckUsTUFBTSxDQUFFLEtBQU0sT0FBUSxDQUFDLEVBdEIzQixLQUFRLElBQU0sSUFBSSxHQUFHLElBRXJCLEtBQVEsY0FBZ0Isd0RBT3hCLEtBQVEsb0JBQW1ELENBQUMsRUFLNUQsS0FBUSxlQUFnRSxDQUFDLEVBQ3pFLEtBQVEsY0FBbUQsQ0FBQyxFQUM1RCxLQUFRLHFCQUdGLENBQUMsRUFrRlAsc0JBQW9CQyxHQUNaQSxJQUFXLFNBQ0osSUFBSSxHQUFHLEdBQUcsUUFBUSxJQUFNLENBQzNCLEtBQUssV0FBVyxFQUFFLFlBQVksSUFBSSxDQUN0QyxDQUFDLEVBQ0lBLElBQVcsT0FDVCxJQUFJLEdBQUcsR0FBRyxRQUFRLElBQU0sQ0FDM0IsS0FBSyxlQUFlLENBQ3hCLENBQUMsRUFDT3JCLEVBQWtCLE1BQU0sVUFBVSxpQkFBaUIsS0FBSyxLQUFNcUIsQ0FBTSxFQUdwRix3QkFBcUIsSUFDVnJCLEVBQWtCLE1BQU0sVUFBVSxtQkFBbUIsS0FBSyxJQUFJLEVBQUUsS0FBSyxJQUFNLENBQzdFLEtBQXNDLE1BQU0sTUFBTSxDQUN2RCxDQUFDLEVBNUZEQSxFQUFrQixPQUFPLEtBQU8sb0JBQ2hDQSxFQUFrQixPQUFPLE1BQVEsZUFDakNBLEVBQWtCLE9BQU8sUUFBVSxDQUMvQixDQUFFLE9BQVEsU0FBVSxNQUFPLFFBQVMsTUFBTyxDQUFDLE9BQVEsT0FBTyxDQUFFLEVBQzdELENBQUUsT0FBUSxPQUFRLE1BQU8sTUFBTyxNQUFPLENBQUMsVUFBVyxhQUFhLENBQUUsQ0FDdEUsRUFFQSxLQUFLLFVBQVlvQixFQUNqQixLQUFLLGdCQUFrQnhCLEVBRXZCLEdBQUcsS0FBSyxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFnRXpCLENBQ00sQ0F1QkEsTUFBYSxNQUFPLENBQ2hCLE1BQU0wQixFQUE0QixNQUFNLEtBQUssSUFBSSxJQUFJLENBQ2pELE9BQVEsUUFDUixjQUFlLElBQ2YsS0FBTSxZQUNOLE9BQVEsVUFDUixRQUFTLE9BQ1QsT0FBUSwyQ0FDWixDQUFtQyxFQUVuQyxLQUFLLGtCQUFvQixLQUFLLE1BQU1BLEVBQXlCLE1BQU0sUUFBUSxDQUFDLEdBQUcsWUFBWSxDQUFDLEdBQUcsT0FBTyxNQUFNLFNBQVcsSUFBSSxFQUUzSCxNQUFNQyxFQUFnQixNQUFNLEtBQUssSUFBSSxJQUFJLENBQ3JDLE9BQVEsUUFDUixjQUFlLElBQ2YsS0FBTSxZQUNOLE9BQVEsVUFDUixRQUFTLE9BQ1QsT0FBUSxLQUFLLFNBQ2pCLENBQW1DLEVBRW5DLEtBQUssWUFBY0EsRUFBYSxNQUFNLE1BQU0sQ0FBQyxFQUFFLFVBQVUsQ0FBQyxFQUFFLE1BQU0sS0FBSyxRQUFRLEtBQUssRUFFcEYsS0FBSyxjQUFjLEVBQ25CLEtBQUssa0JBQWtCLENBQzNCLENBS1EsZUFBZ0IsQ0FDcEIsS0FBSyxXQUFhLEtBQUssWUFBWSxNQUFNLFdBQVcsRUFBRyxDQUFDLEVBRXhELEtBQUssWUFBYyxLQUFLLFlBQVksUUFBUSxVQUFXLElBQUksRUFBRSxXQUFXLElBQUksT0FBTyxhQUFhLEdBQUcsT0FBTyxJQUFJLFVBQVUsQ0FBQyxVQUFXLEdBQUcsRUFBRyxRQUFRLEVBRWxKLE1BQU1DLEVBQVcsQ0FBQyxHQUFHLEtBQUssWUFBWSxTQUFTLGdDQUFnQyxDQUFDLEVBQUUsSUFBS0MsR0FBVUEsRUFBTSxDQUFDLENBQUMsRUFFekcsVUFBV0MsS0FBZUYsRUFBVSxDQUVoQyxHQURpQixhQUFhLEtBQUtFLENBQVcsRUFDaEMsU0FFZCxNQUFNQyxFQUFnQkQsRUFBWSxNQUFNLGNBQWMsRUFBRyxDQUFDLEVBQUUsS0FBSyxFQUVqRSxHQUFJOUIsSUFBb0IsV0FBWSxDQUNoQyxNQUFNZ0MsRUFBYSxDQUFDLEVBRWRDLEVBQWlCLENBQUMsR0FBR0YsRUFBYyxTQUFTLGNBQWMsQ0FBQyxFQUFFLElBQUtGLEdBQVVBLEVBQU0sQ0FBQyxHQUFHLEtBQUssRUFBRSxRQUFRLEtBQU0sRUFBRSxFQUFFLFdBQVcsSUFBSyxHQUFHLENBQUMsRUFBRSxPQUFPLE9BQU8sRUFDekosR0FBSUksRUFBZSxTQUFXLEVBQUcsU0FFakNELEVBQVcsTUFBUUMsRUFFbkIsTUFBTUMsRUFBZUosRUFDaEIsTUFBTSxrQ0FBa0MsSUFBSSxDQUFDLEVBQzdDLEtBQUssRUFDTCxRQUFRLEtBQU0sRUFBRSxFQUNoQixXQUFXLElBQUssR0FBRyxFQUN4QixHQUFJLENBQUNJLEVBQWMsU0FFbkJGLEVBQVcsT0FBU0UsRUFFcEJGLEVBQVcsT0FBU0YsRUFBWSxNQUFNLGtEQUFrRCxJQUFJLENBQUMsRUFBRSxLQUFLLEdBQUssR0FFekdFLEVBQVcsT0FBU0YsRUFBWSxNQUFNLGlFQUFpRSxJQUFJLENBQUMsRUFBRSxLQUFLLEdBQUssR0FFeEgsTUFBTUssRUFBWUwsRUFDYixNQUNHQSxFQUFZLFNBQVMsZ0JBQWdCLEVBQy9CLHlCQUNBLElBQUksT0FBTyxzQkFBc0JFLEVBQVcsT0FBUyxJQUFJQSxFQUFXLE9BQU8sV0FBVywyQkFBNEIsTUFBTSxDQUFDLEdBQUssRUFBRTtBQUFBLE1BQVUsQ0FDcEosSUFBSSxDQUFDLEVBQ0osS0FBSyxFQUNWLEdBQUksQ0FBQ0csRUFBVyxTQUVoQkgsRUFBVyxVQUFZLENBQUUsS0FBTSxvQkFBb0IsS0FBS0csQ0FBUyxFQUFJLE9BQVMsS0FBTSxLQUFNQSxFQUFVLE1BQU0sb0RBQW9ELEVBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBRSxFQUUxSyxLQUFLLGVBQXlDLEtBQUtILENBQVUsRUFFN0QsS0FBSyxjQUFrQyxLQUFLLENBQ3pDLE9BQVFBLEVBQVcsT0FDbkIsU0FBVSxPQUFPLFlBQ2JDLEVBQWUsSUFBS2hCLEdBQVMsQ0FBQ0EsRUFBTSxDQUFFLGFBQWMsQ0FBRSxnQkFBaUJhLEVBQWEsWUFBYUEsRUFBWSxRQUFRLGFBQWMsRUFBRSxFQUFFLEtBQUssQ0FBRSxFQUFHLE9BQVEsTUFBTyxDQUFDLENBQUMsQ0FDdEssQ0FDSixDQUFDLENBQ0wsS0FBTyxDQUNILE1BQU1FLEVBQWEsQ0FBQyxFQUVkSSxFQUFnQkwsRUFBYyxNQUFNLHdCQUF3QixJQUFJLENBQUMsRUFBRSxLQUFLLEVBQzlFLEdBQUksQ0FBQ0ssRUFBZSxTQUVwQkosRUFBVyxTQUFXSSxFQUFjLFdBQVcsSUFBSyxHQUFHLEVBRXZESixFQUFXLFNBQ1AsQ0FBQyxHQUFHRixFQUFZLE1BQU0saUZBQWlGLEVBQUcsQ0FBQyxFQUFFLFNBQVMsb0NBQW9DLENBQUMsRUFDdEosSUFBS0QsR0FBVUEsRUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLFFBQVEsS0FBTSxFQUFFLEVBQUUsV0FBVyxJQUFLLEdBQUcsQ0FBQyxFQUNyRSxPQUFPLE9BQU8sR0FBSyxDQUFDLEVBRTdCRyxFQUFXLFFBQ1AsQ0FBQyxHQUFHRixFQUFZLE1BQU0saUZBQWlGLEVBQUcsQ0FBQyxFQUFFLFNBQVMsMENBQTBDLENBQUMsRUFDM0osSUFBS0QsR0FBVUEsRUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLFFBQVEsS0FBTSxFQUFFLEVBQUUsV0FBVyxJQUFLLEdBQUcsQ0FBQyxFQUN0RSxPQUFPLE9BQU8sR0FBSyxDQUFDLEVBRTdCLE1BQU1RLEVBQWlCUCxFQUFZLFFBQVEsU0FBUyxFQUM5Q1EsRUFBcUJSLEVBQVksUUFBUSxjQUFjLEVBQ3ZEUyxFQUFlVCxFQUFZLFFBQVEsMEJBQTBCLEVBRTdEVSxFQUFhLEtBQUssSUFBSSxHQUFHLENBQUNILEVBQWdCQyxFQUFvQkMsQ0FBWSxFQUFFLE9BQVFFLEdBQVVBLElBQVUsRUFBRSxDQUFDLEVBT2pILEdBTklELElBQWUsT0FBTyxvQkFFMUJSLEVBQVcsVUFDUFEsSUFBZUQsRUFDVCxDQUFFLEtBQU0sS0FBTSxLQUFNVCxFQUFZLE1BQU0seUNBQXlDLEVBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBRSxFQUM1RixDQUFFLEtBQU0sT0FBUSxLQUFNQSxFQUFZLE1BQU0saUNBQWlDLEVBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBRSxFQUM1RixDQUFDRSxFQUFXLFVBQVUsTUFBTSxTQUUvQixLQUFLLGVBQXlDLEtBQUtBLENBQVUsRUFFN0QsS0FBSyxjQUFrQyxLQUFLLENBQ3pDLFNBQVVBLEVBQVcsU0FDckIsU0FBVUEsRUFBVyxTQUNyQixRQUFTQSxFQUFXLFFBQ3BCLGFBQWMsQ0FBRSxnQkFBaUJGLEVBQWEsWUFBYUEsRUFBWSxRQUFRLGFBQWMsRUFBRSxFQUFFLEtBQUssQ0FBRSxFQUN4RyxPQUFRLE1BQ1osQ0FBQyxDQUNMLENBQ0osQ0FDSixDQUtRLG1CQUFvQixDQUN4QixHQUFJLEtBQUssZUFBZSxPQUFTLEVBQUcsQ0FDaEMsSUFBSVcsRUFBUSxFQUVaLE1BQU1DLEVBQVMsSUFBTSxDQUVqQixNQUFNQyxFQUFXLEtBQUssSUFBSUYsRUFBUSxFQUFXLEtBQUssZUFBZSxNQUFNLEVBQ3RFLEtBQWlELE1BQU0sU0FBUyx5QkFBeUJBLEVBQVEsQ0FBQyxJQUFJRSxDQUFRLElBQUksS0FBSyxlQUFlLE1BQU0sWUFBWSxFQUV6SixRQUFTQyxFQUFXSCxFQUFPRyxFQUFXRCxFQUFVQyxJQUN4QyxLQUFLLGtCQUFvQixXQUFZLEtBQUssNEJBQTRCQSxDQUFRLEVBQzdFLEtBQUssNEJBQTRCQSxDQUFRLEVBRTlDRCxFQUFXLEtBQUssZUFBZSxRQUMvQkYsRUFBUUUsRUFDUixXQUFXRCxFQUFRLENBQUMsR0FDaEIsS0FBaUQsTUFBTSxTQUFTLGlCQUFpQixLQUFLLGVBQWUsTUFBTSxtQkFBbUIsQ0FDMUksRUFFQUEsRUFBTyxDQUNYLEtBQU8sQ0FDSCxNQUFNbEMsRUFBZ0IsSUFBSSxHQUFHLEdBQUcsY0FBYyxDQUFFLEtBQU0sU0FBVSxNQUFPLDhCQUErQixDQUFDLEVBRWpHcUMsRUFBc0IsSUFBSSxHQUFHLEdBQUcsWUFBWSxDQUFFLE9BQVEsR0FBTSxTQUFVLEVBQU0sQ0FBQyxFQUNuRkEsRUFBb0IsU0FBUyxPQUFPckMsRUFBYyxRQUFRLEVBRXpELEtBQXNDLE1BQU0sT0FBT3FDLEVBQW9CLFFBQVEsRUFFaEYsS0FBSyxXQUFXLENBQ3BCLENBQ0osQ0FNUSw0QkFBNEJKLEVBQWUsQ0FDL0MsTUFBTUssRUFBVSxLQUFLLGVBQWVMLENBQUssRUFFbkNNLEVBQWlCLFNBQVMsY0FBYyxTQUFTLEVBQ3ZEQSxFQUFlLFVBQVUsSUFBSSxzQkFBc0IsRUFDbkRBLEVBQWUsaUJBQWlCLFFBQVMsSUFBTSxXQUFXLElBQU0sS0FBSyxXQUFXLEVBQUcsQ0FBQyxDQUFDLEVBRXJGLE1BQU1DLEVBQWlCLFNBQVMsY0FBYyxTQUFTLEVBQ3ZEQSxFQUFlLFVBQVlGLEVBQVEsTUFBTSxJQUFLN0IsR0FBUyxNQUFNQSxDQUFJLE1BQU0sRUFBRSxLQUFLLElBQUksRUFBSSxXQUV0RixNQUFNZ0MsRUFBYyxTQUFTLGNBQWMsR0FBRyxFQUM5Q0EsRUFBWSxPQUFTLFNBQ3JCQSxFQUFZLEtBQU8sR0FBRyxLQUFLLE9BQU9ILEVBQVEsTUFBTSxFQUNoREcsRUFBWSxZQUFjSCxFQUFRLE9BRWxDRSxFQUFlLE9BQU9DLENBQVcsRUFFakNGLEVBQWUsT0FBT0MsQ0FBYyxFQUVwQyxNQUFNRSxFQUFxQixTQUFTLGNBQWMsS0FBSyxFQUN2REEsRUFBbUIsVUFBVSxJQUFJLDJCQUEyQixFQUU1RCxNQUFNQyxFQUFjLFNBQVMsY0FBYyxNQUFNLEVBQ2pEQSxFQUFZLE1BQU0sTUFBUSxVQUMxQkEsRUFBWSxZQUFjLE9BRTFCLE1BQU1DLEVBQVksU0FBUyxjQUFjLEtBQUssRUFFeENDLEVBQWMsU0FBUyxjQUFjLEdBQUcsRUFDOUNBLEVBQVksWUFBYyxXQUMxQkQsRUFBVSxPQUFPQyxDQUFXLEVBRXhCUCxFQUFRLE9BQVFNLEVBQVUsT0FBT04sRUFBUSxNQUFNLEVBQzlDTSxFQUFVLE9BQU9ELEVBQVksVUFBVSxFQUFJLENBQUMsRUFFakRELEVBQW1CLE9BQU9FLENBQVMsRUFFbkMsTUFBTUUsRUFBWSxTQUFTLGNBQWMsS0FBSyxFQUV4Q0MsRUFBYyxTQUFTLGNBQWMsR0FBRyxFQUM5Q0EsRUFBWSxZQUFjLFdBQzFCRCxFQUFVLE9BQU9DLENBQVcsRUFFeEJULEVBQVEsT0FBUVEsRUFBVSxPQUFPUixFQUFRLE1BQU0sRUFDOUNRLEVBQVUsT0FBT0gsRUFBWSxVQUFVLEVBQUksQ0FBQyxFQUVqREQsRUFBbUIsT0FBT0ksQ0FBUyxFQUVuQyxNQUFNRSxFQUFlLFNBQVMsY0FBYyxLQUFLLEVBRTNDQyxFQUFpQixTQUFTLGNBQWMsR0FBRyxFQUNqREEsRUFBZSxZQUFjLGNBQzdCRCxFQUFhLE9BQU9DLENBQWMsRUFFbEMsTUFBTUMsRUFBZ0IsU0FBUyxjQUFjLEdBQUcsRUFDaERBLEVBQWMsT0FBUyxTQUN2QkEsRUFBYyxLQUFPWixFQUFRLFVBQVUsT0FBUyxPQUFTLEdBQUcsS0FBSyxPQUFPLFFBQVFBLEVBQVEsVUFBVSxJQUFJLEVBQUUsRUFBSSxHQUFHLEtBQUssT0FBTyx5QkFBeUJBLEVBQVEsVUFBVSxJQUFJLEVBQUUsRUFDNUtZLEVBQWMsWUFBY1osRUFBUSxVQUFVLEtBQzlDVSxFQUFhLE9BQU9FLENBQWEsRUFFakNSLEVBQW1CLE9BQU9NLENBQVksRUFFdENULEVBQWUsT0FBT0csQ0FBa0IsRUFFeENILEVBQWUsT0FBTyxTQUFTLGNBQWMsSUFBSSxDQUFDLEVBRWxELE1BQU1ZLEVBQTBCLFNBQVMsY0FBYyxLQUFLLEVBQzVEQSxFQUF3QixVQUFVLElBQUksZ0NBQWdDLEVBRXRFLFVBQVdDLEtBQWtCZCxFQUFRLE1BQU8sQ0FDeEMsTUFBTWUsRUFBb0IsU0FBUyxjQUFjLEtBQUssRUFFaER6QyxFQUFRLFNBQVMsY0FBYyxHQUFHLEVBQ3hDQSxFQUFNLFlBQWN3QyxFQUFpQixXQUFRZCxFQUFRLE9BQ3JEZSxFQUFrQixPQUFPekMsQ0FBSyxFQUU5QixJQUFJMEMsRUFBb0NDLEVBRXhDLE1BQU1DLEVBQW1CLElBQUksR0FBRyxHQUFHLGtCQUFrQixDQUNqRCxRQUFTLENBQUMsMkJBQTJCLEVBQ3JDLE1BQU8sQ0FBQyxTQUFVLE9BQVEsVUFBVyxRQUFTLE1BQU0sRUFBRSxJQUFLNUMsR0FBVSxJQUFJLEdBQUcsR0FBRyxrQkFBa0IsQ0FBRSxLQUFNQSxFQUFPLE1BQUFBLENBQU0sQ0FBQyxDQUFDLENBQzVILENBQUMsRUFDRDRDLEVBQWlCLGtCQUFrQixNQUFNLEVBQ3pDQSxFQUFpQixHQUFHLFNBQVUsSUFBTSxDQUNoQyxXQUFXLElBQU0sS0FBSyxXQUFXLEVBQUcsQ0FBQyxFQUVyQyxNQUFNQyxFQUFXRCxFQUFpQixpQkFBaUIsRUFBOEIsUUFBUSxFQUFhLFlBQVksRUFJbEgsR0FGQyxLQUFLLGNBQWtDdkIsQ0FBSyxFQUFFLFNBQVNtQixDQUFjLEVBQUUsT0FBU0ssRUFFN0UsQ0FBQ0gsR0FBbUIsQ0FBQ0MsRUFBMEIsQ0FDL0MsTUFBTUcsRUFBWSxJQUFJLEdBQUcsR0FBRyx5QkFBeUIsQ0FDakQsZUFBZ0IsR0FDaEIsZ0JBQWlCLEdBQ2pCLFFBQVMsT0FBTyxLQUFLLEtBQUssaUJBQWlCLEVBQUUsSUFBS0MsSUFBUyxDQUFFLEtBQU1BLEVBQUssTUFBT0EsQ0FBSSxFQUFFLENBQ3pGLENBQUMsRUFDQUQsRUFBVSxRQUFRLEVBQTJDLFdBQWEsWUFDM0VBLEVBQVUsR0FBRyxTQUFVLElBQU0sQ0FDekIsTUFBTUUsRUFBY0YsRUFBVSxTQUFTLEVBQWUsS0FBSyxDQUFDRyxFQUFHQyxJQUFNRCxFQUFFLFlBQVksRUFBRSxjQUFjQyxFQUFFLFlBQVksQ0FBQyxDQUFDLEVBRTlHSixFQUFVLFNBQVMsRUFBZSxLQUFLLEdBQUcsSUFBTUUsRUFBVyxLQUFLLEdBQUcsR0FBR0YsRUFBVSxTQUFTRSxDQUFVLEVBRXZHLEtBQUssY0FBa0MzQixDQUFLLEVBQUUsU0FBU21CLENBQWMsRUFBRSxrQkFBb0JRLEVBRTVGLFVBQVdHLEtBQWMsS0FBSyxvQkFBcUJBLEVBQVcsUUFBUSxNQUFNLFFBQVUsT0FFdEYsSUFBSUMsRUFBdUIsRUFDM0IsVUFBV0wsS0FBT0QsRUFBVSxTQUFTLEVBQWUsQ0FDaEQsTUFBTUssRUFBYSxLQUFLLG9CQUFvQixLQUFNQSxHQUFlQSxFQUFXLE9BQVNKLENBQUcsRUFFcEZJLElBQ0FBLEVBQVcsUUFBUSxNQUFNLFFBQVUsUUFDbkNDLElBRVIsQ0FFQXhCLEVBQWUsWUFBYyx3QkFBd0J3QixFQUF1QixFQUFJLE9BQU9BLENBQW9CLFlBQVlBLEVBQXVCLEVBQUksSUFBTSxFQUFFLEdBQUssY0FBYyxJQUU3S0MsRUFBbUIsTUFBTSxRQUFVRCxFQUF1QixFQUFJLE9BQVMsT0FDM0UsQ0FBQyxFQUVEVixFQUFrQixJQUFJLEdBQUcsR0FBRyxZQUFZSSxFQUFXLENBQUUsUUFBUyxDQUFDLGdDQUFnQyxFQUFHLE1BQU8sU0FBVSxNQUFPLHFCQUFzQixDQUFDLEVBQ2pKTCxFQUFrQixPQUFPQyxFQUFnQixTQUFTLENBQUMsQ0FBQyxFQUVwREMsRUFBMkIsU0FBUyxjQUFjLFNBQVMsRUFDM0RBLEVBQXlCLFVBQVUsSUFBSSw0Q0FBNEMsRUFFbkYsTUFBTWYsRUFBaUIsU0FBUyxjQUFjLFNBQVMsRUFDdkRBLEVBQWUsWUFBYyxxQ0FDN0JlLEVBQXlCLE9BQU9mLENBQWMsRUFFOUMsU0FBVyxDQUFDMEIsRUFBY0MsQ0FBWSxJQUFLLE9BQU8sUUFBUSxLQUFLLGlCQUFpQixFQUFHLENBQy9FLE1BQU1DLEVBQWEsT0FBTyxRQUFRRCxFQUFhLFVBQVUsRUFDekQsR0FBSUMsRUFBVyxTQUFXLEVBQUcsU0FFN0IsTUFBTUMsRUFBVSxTQUFTLGNBQWMsU0FBUyxFQUNoREEsRUFBUSxNQUFNLFFBQVUsT0FFeEIsTUFBTUMsRUFBVSxTQUFTLGNBQWMsU0FBUyxFQUNoREEsRUFBUSxZQUFjSixFQUN0QkcsRUFBUSxPQUFPQyxDQUFPLEVBRXRCLE1BQU1DLEVBQXlDLENBQUUsS0FBTUwsRUFBYyxRQUFBRyxFQUFTLFdBQVksQ0FBQyxDQUFFLEVBRTdGLFNBQVcsQ0FBQ0csRUFBZUMsQ0FBYSxJQUFLTCxFQUFZLENBQ3JELE1BQU1NLEVBQVEsSUFBSSxHQUFHLEdBQUcsZ0JBQWdCLENBQUUsWUFBYUQsRUFBYyxTQUFTLFNBQVMsRUFBRyxTQUFVQSxFQUFjLFFBQVMsQ0FBQyxFQUV0SEUsRUFBYyxJQUFJLEdBQUcsR0FBRyxZQUFZRCxFQUFPLENBQzdDLE1BQU8sSUFBSSxHQUFHLEdBQUcsWUFDYixHQUFHRixDQUFhLEdBQUcsQ0FBQ0MsRUFBYyxPQUFTRCxFQUFjLFlBQVksSUFBTUMsRUFBYyxPQUFPLFlBQVksRUFBSSxHQUFLLEtBQUtBLEVBQWMsS0FBSyxHQUFHLEdBQUdBLEVBQWMsWUFBYyxLQUFLQSxFQUFjLFdBQVcsSUFBTSxFQUFFLFdBQVdBLEVBQWMsSUFBSSxLQUFLQSxFQUFjLFVBQVksZUFBaUIsRUFBRSxHQUFHQSxFQUFjLFFBQVUsZUFBZUEsRUFBYyxPQUFPLEtBQU8sRUFBRSxFQUNoWCxFQUNBLE1BQU8sUUFDWCxDQUFDLEVBQ0RKLEVBQVEsT0FBT00sRUFBWSxTQUFTLENBQUMsQ0FBQyxFQUV0Q0osRUFBWSxXQUFXLEtBQUssQ0FBRSxLQUFNQyxFQUFlLFFBQVNDLEVBQWMsUUFBUyxPQUFRQyxDQUFNLENBQUMsQ0FDdEcsQ0FFQW5CLEVBQXlCLE9BQU9jLENBQU8sRUFFdkMsS0FBSyxvQkFBb0IsS0FBS0UsQ0FBVyxDQUM3QyxDQUVBLE1BQU1OLEVBQXFCLFNBQVMsY0FBYyxLQUFLLEVBQ3ZEQSxFQUFtQixHQUFLLG9DQUN4QkEsRUFBbUIsWUFBYywyQ0FFakNWLEVBQXlCLE9BQU9VLENBQWtCLEVBRWxEWixFQUFrQixPQUFPRSxDQUF3QixDQUNyRCxDQUVBLEdBQUksQ0FBQyxVQUFXLE9BQU8sRUFBRSxTQUFTRSxDQUFNLEVBQUcsQ0FDdkNtQixFQUFtQixTQUFTLEtBQUssRUFFakMsTUFBTUMsRUFBVUMsRUFBYSxTQUFTLEVBQUUsS0FBSyxFQUN6Q0QsRUFBVSxLQUFLLGNBQWtDNUMsQ0FBSyxFQUFFLFNBQVNtQixDQUFjLEVBQUUsUUFBVXlCLEVBQzFGLE9BQVEsS0FBSyxjQUFrQzVDLENBQUssRUFBRSxTQUFTbUIsQ0FBYyxFQUFFLE9BQ3hGLE1BQ0l3QixFQUFtQixTQUFTLEtBQUssRUFFakMsT0FBUSxLQUFLLGNBQWtDM0MsQ0FBSyxFQUFFLFNBQVNtQixDQUFjLEVBQUUsUUFVbkYsT0FQQSxLQUFLLG1CQUFtQmIsRUFBZ0JOLENBQUssRUFFN0NxQixFQUFnQixTQUFTLEtBQUssRUFDOUJDLEVBQXlCLE1BQU0sUUFBVSxPQUN6Q3dCLEVBQWlCLFNBQVMsS0FBSyxFQUMvQkMsRUFBb0IsU0FBUyxLQUFLLEVBRTFCdkIsRUFBUSxDQUNaLElBQUssU0FBVSxDQUNYSCxFQUFnQixTQUFTLEtBQUssRUFDOUJDLEVBQXlCLE1BQU0sUUFBVSxRQUV6QyxLQUNKLENBQ0EsSUFBSyxPQUFRLENBQ1R3QixFQUFpQixTQUFTLEtBQUssRUFFL0IsS0FDSixDQUNBLElBQUssUUFBUyxDQUNWQyxFQUFvQixTQUFTLEtBQUssRUFFbEMsS0FDSixDQUNKLENBQ0osQ0FBQyxFQUVELE1BQU1DLEVBQWEsSUFBSSxHQUFHLEdBQUcsb0JBQW9CLENBQzdDLFFBQVMsQ0FBQyw0QkFBNEIsRUFDdEMsWUFBYSxvQkFDYixRQUFTLENBQ0wsQ0FBQyxTQUFVLGdCQUFnQixFQUMzQixDQUFDLFFBQVMsbUJBQW1CLEVBQzdCLENBQUMsV0FBWSxtQ0FBbUMsRUFDaEQsQ0FBQyxVQUFXLG1CQUFtQixFQUMvQixDQUFDLFdBQVksb0JBQW9CLEVBQ2pDLENBQUMsY0FBZSwyQkFBMkIsRUFDM0MsQ0FBQyxlQUFnQix5QkFBeUIsRUFDMUMsQ0FBQyxjQUFlLGVBQWUsRUFDL0IsQ0FBQyxhQUFjLHlCQUF5QixDQUM1QyxFQUFFLElBQUksQ0FBQyxDQUFDN0UsRUFBT1EsQ0FBSyxLQUFPLENBQUUsS0FBTSxZQUFZUixDQUFLLEdBQUksTUFBTyx1QkFBdUJRLENBQUssRUFBRyxFQUFFLENBQ3BHLENBQUMsRUFDRHFFLEVBQVcsR0FBRyxTQUFVLElBQU0sQ0FDekIsS0FBSyxjQUFrQ2hELENBQUssRUFBRSxTQUFTbUIsQ0FBYyxFQUFFLFdBQWE2QixFQUFXLFNBQVMsR0FBSyxtQkFDbEgsQ0FBQyxFQUNEQSxFQUFXLFNBQVMsbUJBQW1CLEVBQ3ZDQSxFQUFXLFFBQVEsRUFBRSxpQkFBaUIsbUJBQW1CLEVBRXpELE1BQU1GLEVBQW1CLElBQUksR0FBRyxHQUFHLFlBQVlFLEVBQVksQ0FBRSxNQUFPLFNBQVUsTUFBTyxjQUFlLENBQUMsRUFDckdGLEVBQWlCLFNBQVMsS0FBSyxFQUUvQixNQUFNRyxFQUFnQixJQUFJLEdBQUcsR0FBRyxlQUFlLENBQzNDLFFBQVMsQ0FBQyw0QkFBNEIsRUFDdEMsS0FBTSxDQUNGLE1BQU8sQ0FDSCxDQUFDLGNBQWUsR0FBRyxFQUNuQixDQUFDLFlBQWEsR0FBRyxFQUNqQixDQUFDLFlBQWEsR0FBRyxDQUNyQixFQUFFLElBQUksQ0FBQyxDQUFDQyxFQUFPQyxDQUFFLElBQU0sSUFBSSxHQUFHLEdBQUcsaUJBQWlCLENBQUUsS0FBTUEsRUFBSSxNQUFPRCxDQUFNLENBQUMsQ0FBQyxDQUNqRixDQUNKLENBQUMsRUFDREQsRUFBYyxRQUFRLEVBQUUsR0FBRyxTQUFVLElBQU0sQ0FDdkMsTUFBTUcsRUFBV0gsRUFBYyxRQUFRLEVBQUUsaUJBQWlCLEVBRXpELEtBQUssY0FBa0NqRCxDQUFLLEVBQUUsU0FBU21CLENBQWMsRUFBRSxjQUFnQixDQUFFLEtBQU1pQyxFQUFTLFNBQVMsRUFBYSxHQUFJQSxFQUFTLFFBQVEsQ0FBWSxFQUVoSyxLQUFLLG1CQUFtQjlDLEVBQWdCTixDQUFLLENBQ2pELENBQUMsRUFDRGlELEVBQWMsUUFBUSxFQUFFLGlCQUFpQixHQUFHLEVBQzNDLEtBQUssY0FBa0NqRCxDQUFLLEVBQUUsU0FBU21CLENBQWMsRUFBRSxjQUFnQixDQUFFLEtBQU0sY0FBZSxHQUFJLEdBQUksRUFFdkgsTUFBTTRCLEVBQXNCLElBQUksR0FBRyxHQUFHLFlBQVlFLEVBQWUsQ0FBRSxNQUFPLFNBQVUsTUFBTyxpQkFBa0IsQ0FBQyxFQUM5R0YsRUFBb0IsU0FBUyxLQUFLLEVBRWxDLE1BQU1GLEVBQWUsSUFBSSxHQUFHLEdBQUcsZ0JBQy9CQSxFQUFhLEdBQUcsU0FBVSxJQUFNLENBQzVCLE1BQU1ELEVBQVVDLEVBQWEsU0FBUyxFQUFFLEtBQUssRUFFekNELEVBQVUsS0FBSyxjQUFrQzVDLENBQUssRUFBRSxTQUFTbUIsQ0FBYyxFQUFFLFFBQVV5QixFQUMxRixPQUFRLEtBQUssY0FBa0M1QyxDQUFLLEVBQUUsU0FBU21CLENBQWMsRUFBRSxPQUN4RixDQUFDLEVBRUQsTUFBTXdCLEVBQXFCLElBQUksR0FBRyxHQUFHLFlBQVlFLEVBQWMsQ0FBRSxRQUFTLENBQUMscUJBQXFCLEVBQUcsTUFBTyxTQUFVLE1BQU8sVUFBVyxDQUFDLEVBQ3ZJRixFQUFtQixTQUFTLEtBQUssRUFFakN2QixFQUFrQixPQUFPRyxFQUFpQixTQUFTLENBQUMsRUFBR3VCLEVBQWlCLFNBQVMsQ0FBQyxFQUFHQyxFQUFvQixTQUFTLENBQUMsRUFBR0osRUFBbUIsU0FBUyxDQUFDLENBQUMsRUFFcEp6QixFQUF3QixPQUFPRSxDQUFpQixDQUNwRCxDQUVBZCxFQUFlLE9BQU9ZLENBQXVCLEVBRTVDLEtBQXNDLE1BQU0sT0FBT1osQ0FBYyxFQUVsRSxLQUFLLFdBQVcsQ0FDcEIsQ0FNUSw0QkFBNEJOLEVBQWUsQ0FDL0MsTUFBTUssRUFBVSxLQUFLLGVBQWVMLENBQUssRUFFbkNNLEVBQWlCLFNBQVMsY0FBYyxTQUFTLEVBQ3ZEQSxFQUFlLFVBQVUsSUFBSSxzQkFBc0IsRUFDbkRBLEVBQWUsaUJBQWlCLFFBQVMsSUFBTSxXQUFXLElBQU0sS0FBSyxXQUFXLEVBQUcsQ0FBQyxDQUFDLEVBRXJGLE1BQU1DLEVBQWlCLFNBQVMsY0FBYyxTQUFTLEVBQ3ZEQSxFQUFlLFVBQVksZUFBZUYsRUFBUSxRQUFRLE9BQzFEQyxFQUFlLE9BQU9DLENBQWMsRUFFcEMsTUFBTUUsRUFBcUIsU0FBUyxjQUFjLEtBQUssRUFDdkRBLEVBQW1CLFVBQVUsSUFBSSwyQkFBMkIsRUFFNUQsTUFBTUMsRUFBYyxTQUFTLGNBQWMsTUFBTSxFQUNqREEsRUFBWSxNQUFNLE1BQVEsVUFDMUJBLEVBQVksWUFBYyxPQUUxQixNQUFNMkMsRUFBYyxTQUFTLGNBQWMsS0FBSyxFQUUxQ0MsRUFBZ0IsU0FBUyxjQUFjLEdBQUcsRUFJaEQsR0FIQUEsRUFBYyxZQUFjLGFBQzVCRCxFQUFZLE9BQU9DLENBQWEsRUFFNUJqRCxFQUFRLFNBQVMsT0FBUyxFQUMxQixTQUFXLENBQUNMLEVBQU91RCxDQUFPLElBQUtsRCxFQUFRLFNBQVMsUUFBUSxFQUFHLENBQ3ZELE1BQU1HLEVBQWMsU0FBUyxjQUFjLEdBQUcsRUFDOUNBLEVBQVksT0FBUyxTQUNyQkEsRUFBWSxLQUFPLEdBQUcsS0FBSyxPQUFPK0MsQ0FBTyxFQUN6Qy9DLEVBQVksWUFBYytDLEVBRTFCRixFQUFZLE9BQU83QyxDQUFXLEVBRTFCUixJQUFVSyxFQUFRLFNBQVMsT0FBUyxHQUFHZ0QsRUFBWSxPQUFPLElBQUksQ0FDdEUsTUFDQ0EsRUFBWSxPQUFPM0MsRUFBWSxVQUFVLEVBQUksQ0FBQyxFQUVuREQsRUFBbUIsT0FBTzRDLENBQVcsRUFFckMsTUFBTUcsRUFBYSxTQUFTLGNBQWMsS0FBSyxFQUV6Q0MsRUFBZSxTQUFTLGNBQWMsR0FBRyxFQUkvQyxHQUhBQSxFQUFhLFlBQWMsWUFDM0JELEVBQVcsT0FBT0MsQ0FBWSxFQUUxQnBELEVBQVEsUUFBUSxPQUFTLEVBQ3pCLFNBQVcsQ0FBQ0wsRUFBTzBELENBQU0sSUFBS3JELEVBQVEsUUFBUSxRQUFRLEVBQUcsQ0FDckQsTUFBTUcsRUFBYyxTQUFTLGNBQWMsR0FBRyxFQUM5Q0EsRUFBWSxPQUFTLFNBQ3JCQSxFQUFZLEtBQU8sR0FBRyxLQUFLLE9BQU8sWUFBWWtELENBQU0sRUFBRSxFQUN0RGxELEVBQVksWUFBY2tELEVBRTFCRixFQUFXLE9BQU9oRCxDQUFXLEVBRXpCUixJQUFVSyxFQUFRLFFBQVEsT0FBUyxHQUFHbUQsRUFBVyxPQUFPLElBQUksQ0FDcEUsTUFDQ0EsRUFBVyxPQUFPOUMsRUFBWSxVQUFVLEVBQUksQ0FBQyxFQUVsREQsRUFBbUIsT0FBTytDLENBQVUsRUFFcEMsTUFBTXpDLEVBQWUsU0FBUyxjQUFjLEtBQUssRUFFM0NDLEVBQWlCLFNBQVMsY0FBYyxHQUFHLEVBQ2pEQSxFQUFlLFlBQWMsY0FDN0JELEVBQWEsT0FBT0MsQ0FBYyxFQUVsQyxNQUFNQyxFQUFnQixTQUFTLGNBQWMsR0FBRyxFQUNoREEsRUFBYyxPQUFTLFNBQ3ZCQSxFQUFjLEtBQU9aLEVBQVEsVUFBVSxPQUFTLE9BQVMsR0FBRyxLQUFLLE9BQU8sUUFBUUEsRUFBUSxVQUFVLElBQUksRUFBRSxFQUFJLEdBQUcsS0FBSyxPQUFPLHlCQUF5QkEsRUFBUSxVQUFVLElBQUksRUFBRSxFQUM1S1ksRUFBYyxZQUFjWixFQUFRLFVBQVUsS0FDOUNVLEVBQWEsT0FBT0UsQ0FBYSxFQUVqQ1IsRUFBbUIsT0FBT00sQ0FBWSxFQUV0Q1QsRUFBZSxPQUFPRyxDQUFrQixFQUV4Q0gsRUFBZSxPQUFPLFNBQVMsY0FBYyxJQUFJLENBQUMsRUFFbEQsTUFBTVksRUFBMEIsU0FBUyxjQUFjLEtBQUssRUFDNURBLEVBQXdCLFVBQVUsSUFBSSxnQ0FBZ0MsRUFFdEUsTUFBTUssRUFBbUIsSUFBSSxHQUFHLEdBQUcsa0JBQWtCLENBQ2pELFFBQVMsQ0FBQywyQkFBMkIsRUFDckMsTUFBTyxDQUFDLFNBQVUsT0FBUSxVQUFXLFFBQVMsTUFBTSxFQUFFLElBQUs1QyxHQUFVLElBQUksR0FBRyxHQUFHLGtCQUFrQixDQUFFLEtBQU1BLEVBQU8sTUFBQUEsQ0FBTSxDQUFDLENBQUMsQ0FDNUgsQ0FBQyxFQUNENEMsRUFBaUIsa0JBQWtCLE1BQU0sRUFDekNBLEVBQWlCLEdBQUcsU0FBVSxJQUFNLENBQ2hDLFdBQVcsSUFBTSxLQUFLLFdBQVcsRUFBRyxDQUFDLEVBRXJDLE1BQU1DLEVBQVdELEVBQWlCLGlCQUFpQixFQUE4QixRQUFRLEVBQWEsWUFBWSxFQUlsSCxHQUZDLEtBQUssY0FBa0N2QixDQUFLLEVBQUUsT0FBU3dCLEVBRXBELENBQUMsVUFBVyxPQUFPLEVBQUUsU0FBU0EsQ0FBTSxFQUFHLENBQ3ZDbUIsRUFBbUIsU0FBUyxLQUFLLEVBRWpDLE1BQU1DLEVBQVVDLEVBQWEsU0FBUyxFQUFFLEtBQUssRUFDekNELEVBQVUsS0FBSyxjQUFrQzVDLENBQUssRUFBRSxRQUFVNEMsRUFDakUsT0FBUSxLQUFLLGNBQWtDNUMsQ0FBSyxFQUFFLE9BQy9ELE1BQ0kyQyxFQUFtQixTQUFTLEtBQUssRUFFakMsT0FBUSxLQUFLLGNBQWtDM0MsQ0FBSyxFQUFFLFFBVTFELE9BUEEsS0FBSyxtQkFBbUJNLEVBQWdCTixDQUFLLEVBRTdDMkQsRUFBaUIsU0FBUyxLQUFLLEVBQy9CQyxFQUFxQixTQUFTLEtBQUssRUFDbkNkLEVBQWlCLFNBQVMsS0FBSyxFQUMvQkMsRUFBb0IsU0FBUyxLQUFLLEVBRTFCdkIsRUFBUSxDQUNaLElBQUssU0FBVSxDQUNYbUMsRUFBaUIsU0FBUyxLQUFLLEVBQy9CQyxFQUFxQixTQUFTLEtBQUssRUFFbkMsS0FDSixDQUNBLElBQUssT0FBUSxDQUNUZCxFQUFpQixTQUFTLEtBQUssRUFFL0IsS0FDSixDQUNBLElBQUssUUFBUyxDQUNWQyxFQUFvQixTQUFTLEtBQUssRUFFbEMsS0FDSixDQUNKLENBQ0osQ0FBQyxFQUVELE1BQU1jLEVBQWtCLElBQUk1RixFQUFnQixDQUFFLFlBQWEsZ0JBQWlCLENBQUMsRUFDN0U0RixFQUFnQixHQUFHLFNBQVUsSUFBTSxDQUMvQixJQUFJMUYsRUFBUTBGLEVBQWdCLFNBQVMsRUFDckMxRixFQUFRQSxFQUFNLFFBQVEsSUFBSSxPQUFPLG1CQUFtQixHQUFHLE9BQU8sSUFBSSxVQUFVLEVBQUUsUUFBUSxTQUFVLEVBQUUsQ0FBQyxRQUFRLEVBQUcsRUFBRSxFQUNoSEEsRUFBUUEsRUFBTSxRQUFRLEtBQU0sRUFBRSxFQUUxQkEsRUFBTSxPQUFTLEdBQUcwRixFQUFnQixTQUFTMUYsRUFBTSxDQUFDLEVBQUUsWUFBWSxFQUFJQSxFQUFNLE1BQU0sQ0FBQyxFQUFFLFdBQVcsSUFBSyxHQUFHLENBQUMsQ0FDL0csQ0FBQyxFQUNEMEYsRUFBZ0IsR0FBRyxpQkFBbUJ0RixHQUE2QyxDQUMvRSxVQUFXQyxLQUFRRCxFQUFPdUYsRUFBVyxnQkFBZ0J0RixFQUFLLElBQUksQ0FDbEUsQ0FBQyxFQUVELE1BQU1zRixFQUFhLElBQUksR0FBRyxHQUFHLHFCQUFxQixDQUFFLGdCQUFpQixHQUFPLGNBQWUsVUFBVyxZQUFhRCxDQUFnQixDQUFDLEVBQ3BJQyxFQUFXLEdBQUcsU0FBVSxJQUFNLENBQzFCLE1BQU1uQyxFQUFjbUMsRUFBVyxTQUFTLEVBQWUsS0FBSyxDQUFDbEMsRUFBR0MsSUFBTUQsRUFBRSxZQUFZLEVBQUUsY0FBY0MsRUFBRSxZQUFZLENBQUMsQ0FBQyxFQUUvR2lDLEVBQVcsU0FBUyxFQUFlLEtBQUssR0FBRyxJQUFNbkMsRUFBVyxLQUFLLEdBQUcsR0FBR21DLEVBQVcsU0FBU25DLENBQVUsRUFFekcsS0FBSyxjQUFrQzNCLENBQUssRUFBRSxTQUFXMkIsQ0FDOUQsQ0FBQyxFQUVELEtBQU0sQ0FBRSxTQUFBb0MsQ0FBUyxFQUFLLEtBQUssY0FBa0MvRCxDQUFLLEVBRWxFLFVBQVd1RCxLQUFXUSxFQUFVRCxFQUFXLGdCQUFnQlAsQ0FBTyxFQUNsRU8sRUFBVyxTQUFTQyxDQUFRLEVBRTVCLE1BQU1KLEVBQW1CLElBQUksR0FBRyxHQUFHLFlBQVlHLEVBQVksQ0FBRSxNQUFPLFNBQVUsTUFBTyxzQkFBdUIsQ0FBQyxFQUM3R0gsRUFBaUIsU0FBUyxLQUFLLEVBRS9CLE1BQU1LLEVBQXNCLElBQUlwRixFQUFvQixDQUFFLFlBQWEscUJBQXNCLENBQUMsRUFDMUZvRixFQUFvQixHQUFHLFNBQVUsSUFBTSxDQUNuQyxJQUFJN0YsRUFBUTZGLEVBQW9CLFNBQVMsRUFDekM3RixFQUFRQSxFQUFNLFFBQVEsSUFBSSxPQUFPLG1CQUFtQixHQUFHLE9BQU8sSUFBSSxVQUFVLEVBQUUsUUFBUSxTQUFVLEVBQUUsQ0FBQyxRQUFRLEVBQUcsRUFBRSxFQUNoSEEsRUFBUUEsRUFBTSxRQUFRLGFBQWMsRUFBRSxFQUVsQ0EsRUFBTSxPQUFTLEdBQUc2RixFQUFvQixTQUFTN0YsRUFBTSxDQUFDLEVBQUUsWUFBWSxFQUFJQSxFQUFNLE1BQU0sQ0FBQyxFQUFFLFdBQVcsSUFBSyxHQUFHLENBQUMsQ0FDbkgsQ0FBQyxFQUNENkYsRUFBb0IsR0FBRyxpQkFBbUJ6RixHQUE2QyxDQUNuRixVQUFXQyxLQUFRRCxFQUFPMEYsRUFBZSxnQkFBZ0J6RixFQUFLLElBQUksQ0FDdEUsQ0FBQyxFQUVELE1BQU15RixFQUFpQixJQUFJLEdBQUcsR0FBRyxxQkFBcUIsQ0FBRSxnQkFBaUIsR0FBTyxjQUFlLFVBQVcsWUFBYUQsQ0FBb0IsQ0FBQyxFQUM1SUMsRUFBZSxHQUFHLFNBQVUsSUFBTSxDQUM5QixNQUFNdEMsRUFBY3NDLEVBQWUsU0FBUyxFQUFlLEtBQUssQ0FBQ3JDLEVBQUdDLElBQU1ELEVBQUUsWUFBWSxFQUFFLGNBQWNDLEVBQUUsWUFBWSxDQUFDLENBQUMsRUFFbkhvQyxFQUFlLFNBQVMsRUFBZSxLQUFLLEdBQUcsSUFBTXRDLEVBQVcsS0FBSyxHQUFHLEdBQUdzQyxFQUFlLFNBQVN0QyxDQUFVLEVBRWpILEtBQUssY0FBa0MzQixDQUFLLEVBQUUsUUFBVTJCLENBQzdELENBQUMsRUFFRCxLQUFNLENBQUUsUUFBQXVDLENBQVEsRUFBSyxLQUFLLGNBQWtDbEUsQ0FBSyxFQUVqRSxVQUFXMEQsS0FBVVEsRUFBU0QsRUFBZSxnQkFBZ0JQLENBQU0sRUFDbkVPLEVBQWUsU0FBU0MsQ0FBTyxFQUUvQixNQUFNTixFQUF1QixJQUFJLEdBQUcsR0FBRyxZQUFZSyxFQUFnQixDQUFFLE1BQU8sU0FBVSxNQUFPLGFBQWMsQ0FBQyxFQUM1R0wsRUFBcUIsU0FBUyxLQUFLLEVBRW5DLE1BQU1aLEVBQWEsSUFBSSxHQUFHLEdBQUcsb0JBQW9CLENBQzdDLFFBQVMsQ0FBQyw0QkFBNEIsRUFDdEMsWUFBYSxvQkFDYixRQUFTLENBQ0wsQ0FBQyxTQUFVLHFCQUFxQixFQUNoQyxDQUFDLFFBQVMsbUJBQW1CLEVBQzdCLENBQUMsV0FBWSxtREFBbUQsRUFDaEUsQ0FBQyxjQUFlLHdCQUF3QixFQUN4QyxDQUFDLGFBQWMseUJBQXlCLENBQzVDLEVBQUUsSUFBSSxDQUFDLENBQUM3RSxFQUFPUSxDQUFLLEtBQU8sQ0FBRSxLQUFNLFlBQVlSLENBQUssR0FBSSxNQUFPLHVCQUF1QlEsQ0FBSyxFQUFHLEVBQUUsQ0FDcEcsQ0FBQyxFQUNEcUUsRUFBVyxHQUFHLFNBQVUsSUFBTSxDQUN6QixLQUFLLGNBQWtDaEQsQ0FBSyxFQUFFLFdBQWFnRCxFQUFXLFNBQVMsR0FBSyxtQkFDekYsQ0FBQyxFQUNEQSxFQUFXLFNBQVMsbUJBQW1CLEVBQ3ZDQSxFQUFXLFFBQVEsRUFBRSxpQkFBaUIsbUJBQW1CLEVBRXpELE1BQU1GLEVBQW1CLElBQUksR0FBRyxHQUFHLFlBQVlFLEVBQVksQ0FBRSxNQUFPLFNBQVUsTUFBTyxjQUFlLENBQUMsRUFDckdGLEVBQWlCLFNBQVMsS0FBSyxFQUUvQixNQUFNRyxFQUFnQixJQUFJLEdBQUcsR0FBRyxlQUFlLENBQzNDLFFBQVMsQ0FBQyw0QkFBNEIsRUFDdEMsS0FBTSxDQUNGLE1BQU8sQ0FDSCxDQUFDLGNBQWUsR0FBRyxFQUNuQixDQUFDLFlBQWEsR0FBRyxFQUNqQixDQUFDLFlBQWEsR0FBRyxDQUNyQixFQUFFLElBQUksQ0FBQyxDQUFDQyxFQUFPQyxDQUFFLElBQU0sSUFBSSxHQUFHLEdBQUcsaUJBQWlCLENBQUUsS0FBTUEsRUFBSSxNQUFPRCxDQUFNLENBQUMsQ0FBQyxDQUNqRixDQUNKLENBQUMsRUFDREQsRUFBYyxRQUFRLEVBQUUsR0FBRyxTQUFVLElBQU0sQ0FDdkMsTUFBTUcsRUFBV0gsRUFBYyxRQUFRLEVBQUUsaUJBQWlCLEVBRXpELEtBQUssY0FBa0NqRCxDQUFLLEVBQUUsY0FBZ0IsQ0FBRSxLQUFNb0QsRUFBUyxTQUFTLEVBQWEsR0FBSUEsRUFBUyxRQUFRLENBQVksRUFFdkksS0FBSyxtQkFBbUI5QyxFQUFnQk4sQ0FBSyxDQUNqRCxDQUFDLEVBQ0RpRCxFQUFjLFFBQVEsRUFBRSxpQkFBaUIsR0FBRyxFQUMzQyxLQUFLLGNBQWtDakQsQ0FBSyxFQUFFLGNBQWdCLENBQUUsS0FBTSxjQUFlLEdBQUksR0FBSSxFQUU5RixNQUFNK0MsRUFBc0IsSUFBSSxHQUFHLEdBQUcsWUFBWUUsRUFBZSxDQUFFLE1BQU8sU0FBVSxNQUFPLGlCQUFrQixDQUFDLEVBQzlHRixFQUFvQixTQUFTLEtBQUssRUFFbEMsTUFBTUYsRUFBZSxJQUFJLEdBQUcsR0FBRyxnQkFDL0JBLEVBQWEsR0FBRyxTQUFVLElBQU0sQ0FDNUIsTUFBTUQsRUFBVUMsRUFBYSxTQUFTLEVBQUUsS0FBSyxFQUV6Q0QsRUFBVSxLQUFLLGNBQWtDNUMsQ0FBSyxFQUFFLFFBQVU0QyxFQUNqRSxPQUFRLEtBQUssY0FBa0M1QyxDQUFLLEVBQUUsT0FDL0QsQ0FBQyxFQUVELE1BQU0yQyxFQUFxQixJQUFJLEdBQUcsR0FBRyxZQUFZRSxFQUFjLENBQUUsUUFBUyxDQUFDLHFCQUFxQixFQUFHLE1BQU8sU0FBVSxNQUFPLFVBQVcsQ0FBQyxFQUN2SUYsRUFBbUIsU0FBUyxLQUFLLEVBRWpDekIsRUFBd0IsT0FDcEJLLEVBQWlCLFNBQVMsQ0FBQyxFQUMzQm9DLEVBQWlCLFNBQVMsQ0FBQyxFQUMzQkMsRUFBcUIsU0FBUyxDQUFDLEVBQy9CZCxFQUFpQixTQUFTLENBQUMsRUFDM0JDLEVBQW9CLFNBQVMsQ0FBQyxFQUM5QkosRUFBbUIsU0FBUyxDQUFDLENBQ2pDLEVBRUFyQyxFQUFlLE9BQU9ZLENBQXVCLEVBRTVDLEtBQXNDLE1BQU0sT0FBT1osQ0FBYyxFQUVsRSxLQUFLLFdBQVcsQ0FDcEIsQ0FPUSxtQkFBbUJBLEVBQW9DTixFQUFlLENBQzFFLEdBQUksS0FBSyxrQkFBb0IsV0FBWSxDQUNyQyxNQUFNbUUsRUFBZ0IsT0FBTyxPQUFRLEtBQUssY0FBa0NuRSxDQUFLLEVBQUUsUUFBUSxFQUVyRm9FLEVBQTRCRCxFQUFjLE1BQU9uRixHQUFXQSxFQUFPLFNBQVcsVUFBWUEsRUFBTyxTQUFXLE1BQU0sRUFFbEhxRixFQUFtQkYsRUFBYyxLQUFNbkYsR0FBV0EsRUFBTyxTQUFXLE9BQU8sR0FBRyxlQUFlLEdBQzdGc0YsRUFBb0JILEVBQWMsTUFBT25GLEdBQVdBLEVBQU8sU0FBVyxTQUFXQSxFQUFPLGVBQWUsS0FBT3FGLENBQWdCLEVBRXBJLElBQUlFLEVBQWtCLEdBRXRCLEdBQUlILEVBQTJCLENBQzNCLE1BQU1JLEVBQWdCTCxFQUFjLE9BQVFuRixHQUFXQSxFQUFPLFNBQVcsUUFBUSxFQUFFLE9BQzdFeUYsRUFBY04sRUFBYyxPQUFRbkYsR0FBV0EsRUFBTyxTQUFXLE1BQU0sRUFBRSxPQUUzRXdGLEVBQWdCLEdBQUtDLEVBQWMsRUFBR0YsRUFBa0IsVUFDbkRDLEVBQWdCLEVBQUdELEVBQWtCLFVBQ3pDQSxFQUFrQixTQUMzQixNQUFXRCxJQUNIRCxJQUFxQixJQUFLRSxFQUFrQixVQUN2Q0YsSUFBcUIsSUFBS0UsRUFBa0IsVUFDaERBLEVBQWtCLFdBRTNCakUsRUFBZSxNQUFNLGdCQUFrQmlFLENBQzNDLEtBQU8sQ0FDSCxLQUFNLENBQUUsT0FBQXZGLENBQU8sRUFBSyxLQUFLLGNBQWtDZ0IsQ0FBSyxFQUVoRSxJQUFJdUUsRUFBa0IsR0FHbEJ2RixJQUFXLFNBQVV1RixFQUFrQixVQUNsQ3ZGLElBQVcsT0FBUXVGLEVBQWtCLFVBQ3JDdkYsSUFBVyxVQUNYLEtBQUssY0FBa0NnQixDQUFLLEVBQUUsZUFBZSxLQUFPLElBQUt1RSxFQUFrQixVQUN0RixLQUFLLGNBQWtDdkUsQ0FBSyxFQUFFLGVBQWUsS0FBTyxJQUFLdUUsRUFBa0IsVUFDaEdBLEVBQWtCLFdBRTNCakUsRUFBZSxNQUFNLGdCQUFrQmlFLENBQzNDLENBQ0osQ0FLQSxNQUFjLGdCQUFpQixDQUMzQixNQUFNOUcsRUFBZ0IsSUFBSSxHQUFHLEdBQUcsY0FDaEMsU0FBUyxLQUFLLE9BQU9BLEVBQWMsU0FBUyxDQUFDLENBQUMsRUFFOUMsTUFBTWlILEVBQW9CLElBQUk5RyxFQUM5QkgsRUFBYyxXQUFXLENBQUNpSCxDQUFpQixDQUFDLEVBQzVDQSxFQUFrQixLQUFLLEVBRXZCLE1BQU1DLEVBQVMsQ0FBRSxTQUFVLEVBQUcsT0FBUSxFQUFHLGVBQWdCLEVBQUcsT0FBUSxDQUFFLEVBRXRFLElBQUlDLEdBQ0MsTUFBTSxLQUFLLElBQUksSUFBSSxDQUNoQixPQUFRLFFBQ1IsY0FBZSxJQUNmLEtBQU0sWUFDTixPQUFRLFVBQ1IsUUFBUyxPQUNULE9BQVEsS0FBSyxTQUNqQixDQUFtQyxHQUNyQyxNQUFNLE1BQU0sQ0FBQyxFQUFFLFVBQVUsQ0FBQyxFQUFFLE1BQU0sS0FBSyxRQUFRLEtBQUssRUFFdEQsR0FBSSxLQUFLLGtCQUFvQixXQUd6QixHQUYyQixLQUFLLGNBQWtDLEtBQU1DLEdBQWUsT0FBTyxPQUFPQSxFQUFXLFFBQVEsRUFBRSxLQUFNN0YsR0FBV0EsRUFBTyxTQUFXLE1BQU0sQ0FBQyxFQUU3SSxDQUNuQixTQUFXLENBQUUsT0FBQThGLEVBQVEsU0FBQUMsQ0FBUyxJQUFLLEtBQUssY0FBa0MsQ0FDdEUsTUFBTUMsRUFBNEIsT0FBTyxPQUFPRCxDQUFRLEVBQUUsS0FBTS9GLEdBQVdBLEVBQU8sU0FBVyxVQUFZQSxFQUFPLFNBQVcsTUFBTSxFQUMzSG9GLEVBQTRCLE9BQU8sT0FBT1csQ0FBUSxFQUFFLE1BQU8vRixHQUFXQSxFQUFPLFNBQVcsVUFBWUEsRUFBTyxTQUFXLE1BQU0sRUFFNUhxRixFQUFtQixPQUFPLE9BQU9VLENBQTBDLEVBQUUsS0FBTS9GLEdBQVdBLEVBQU8sU0FBVyxPQUFPLEdBQUcsZUFBZSxHQUN6SXNGLEVBQW9CLE9BQU8sT0FBT1MsQ0FBMEMsRUFBRSxNQUMvRS9GLEdBQVdBLEVBQU8sU0FBVyxTQUFXQSxFQUFPLGVBQWUsS0FBT3FGLENBQzFFLEVBRU1ZLEVBQWdCLENBQUMsRUFDakJDLEVBQWMsQ0FBQyxFQUNmQyxFQUFXLENBQUMsRUFFWkMsRUFBZ0IsT0FBTyxLQUFLTCxDQUFRLEVBQUUsT0FFNUMsU0FBVyxDQUFDNUQsRUFBZ0JuQyxDQUFNLElBQUssT0FBTyxRQUFRK0YsQ0FBUSxFQUMxRCxPQUFRL0YsRUFBTyxPQUFRLENBQ25CLElBQUssU0FBVSxDQUNQZ0csR0FBNkIsQ0FBQ1osRUFDOUJNLEVBQWtCLFlBQVksd0JBQXdCSSxDQUFNLCtDQUErQzNELENBQWMscUJBQXNCLFNBQVMsR0FFeEo4RCxFQUFjLEtBQUs5RCxDQUFjLEVBQ2pDd0QsRUFBTyxZQUdYLEtBQ0osQ0FDQSxJQUFLLE9BQVEsQ0FDTEssR0FBNkIsQ0FBQ1osRUFDOUJNLEVBQWtCLFlBQVksd0JBQXdCSSxDQUFNLCtDQUErQzNELENBQWMsc0JBQXVCLFNBQVMsR0FFekorRCxFQUFZLEtBQUssQ0FBQy9ELEVBQWdCbkMsRUFBTyxVQUFXLENBQUMsRUFDckQyRixFQUFPLFVBR1gsS0FDSixDQUNBLElBQUssVUFBVyxDQUNSM0YsRUFBTyxTQUNQbUcsRUFBUyxLQUFLLENBQUNoRSxFQUFnQm5DLEVBQU8sT0FBTyxDQUFDLEVBQzlDMkYsRUFBTyxjQUFjLEtBRXJCRCxFQUFrQixZQUNkLDBCQUEwQnZELENBQWMsYUFBUTJELENBQU0sc0ZBQ3RELFNBQ0osRUFFSixLQUNKLENBQ0EsSUFBSyxRQUFTLENBQ05SLEdBQ0l0RixFQUFPLFNBQVNtRyxFQUFTLEtBQUssQ0FBQ2hFLEVBQWdCbkMsRUFBTyxPQUFPLENBQUMsRUFDbEUyRixFQUFPLFVBRVBELEVBQWtCLFlBQ2Qsd0JBQXdCSSxDQUFNLHdEQUF3RDNELENBQWMsc0JBQ3BHLFNBQ0osRUFDSixLQUNKLENBQ0osQ0FFSixJQUFJa0UsRUFBYyxDQUFFLFNBQVVULEVBQWEsR0FBRyxPQUFPLE9BQU9HLENBQVEsRUFBRSxDQUFDLEVBQUUsWUFBYSxFQUl0RixHQUZJSSxFQUFTLE9BQVMsSUFBR0UsRUFBYyxLQUFLLGtCQUFrQkEsRUFBYSxDQUFFLE9BQVEsS0FBSyxZQUFZRixFQUFVQyxJQUFrQixFQUFHRCxFQUFTLFNBQVdDLENBQWEsQ0FBRSxDQUFDLEdBRXJLaEIsRUFBMkIsQ0FDM0IsSUFBSWtCLEVBRUosR0FBSUwsRUFBYyxPQUFTLEdBQUtDLEVBQVksT0FBUyxFQUFHLENBQ3BESSxFQUFZLElBRVosTUFBTUMsRUFBdUIsNkJBQTZCTixFQUFjLElBQUt6RyxHQUFTLEtBQUtBLENBQUksSUFBSSxFQUFFLEtBQUssSUFBSSxDQUFDLFNBQ3pHZ0gsRUFBcUIsS0FBSyxpQkFBaUJOLEVBQWEsR0FBTyxFQUFLLEVBRTFFLFVBQVcxRyxLQUFReUcsRUFBZSxLQUFLLHVCQUF1QnpHLEVBQU11RyxFQUFTdkcsQ0FBSSxFQUFHc0csQ0FBTSxFQUUxRk8sRUFBYyxLQUFLLGtCQUFrQkEsRUFBYSxDQUFFLE9BQVEsR0FBR0UsQ0FBb0I7QUFBQSxFQUFLQyxDQUFrQixFQUFHLENBQUMsQ0FDbEgsU0FBV1AsRUFBYyxPQUFTLEVBQUcsQ0FDakNLLEVBQVksSUFFWixVQUFXOUcsS0FBUXlHLEVBQWUsS0FBSyx1QkFBdUJ6RyxFQUFNdUcsRUFBU3ZHLENBQUksRUFBR3NHLENBQU0sRUFFMUZPLEVBQWMsS0FBSyxrQkFBa0JBLEVBQWEsQ0FBRSxPQUFRLHlCQUF5QkosRUFBYyxPQUFTLEVBQUksT0FBUyxFQUFFLFNBQVUsQ0FBQyxDQUMxSSxNQUNJSyxFQUFZLElBRVpELEVBQWMsS0FBSyxrQkFBa0JBLEVBQWEsQ0FBRSxPQUFRLEtBQUssaUJBQWlCSCxFQUFhRSxJQUFrQixFQUFHLEVBQUksQ0FBRSxDQUFDLEVBRy9IQyxFQUFjLEtBQUssa0JBQWtCQSxFQUFhLENBQUUsUUFBUyxXQUFXQyxDQUFTLEtBQU0sT0FBUSxhQUFjLENBQUMsQ0FDbEgsTUFBV2hCLElBQW1CZSxFQUFjLEtBQUssa0JBQWtCQSxFQUFhLENBQUUsUUFBUyxXQUFXaEIsQ0FBZ0IsS0FBTSxPQUFRLGFBQWMsQ0FBQyxHQUVuSk8sRUFBY1MsRUFBWSxRQUM5QixDQUVBLEdBQUksS0FBSyxXQUFhLEtBQUssY0FBZ0JULEVBQWEsT0FBT0YsRUFBa0IsWUFBWSx5REFBeUQsRUFFdEosTUFBTWUsRUFBZSxPQUFPLFFBQVFkLENBQU0sRUFDckMsT0FBTyxDQUFDLENBQUMsQ0FBRWUsQ0FBSyxJQUFNQSxFQUFRLENBQUMsRUFDL0IsSUFBSSxDQUFDLENBQUMxRyxFQUFRMEcsQ0FBSyxJQUFNLEdBQUcxRyxDQUFNLElBQUkwRyxDQUFLLEVBQUUsRUFDN0MsS0FBSyxJQUFJLEVBRWQsS0FBSyxxQkFBcUIsS0FBSyxDQUMzQixLQUFNLE9BQ04sTUFBTyxLQUFLLFVBQ1osVUFBVyxLQUFPLENBQUUsS0FBTWQsRUFBYSxRQUFTLG1DQUFtQ2EsQ0FBWSxJQUFJLEtBQUssYUFBYSxFQUFHLEVBQzVILENBQUMsRUFFRCxNQUFNLEtBQUssc0JBQXNCZixDQUFpQixFQUVsREEsRUFBa0IsWUFBWSwyQ0FBNEMsU0FBUyxFQUVuRkEsRUFBa0IsV0FBVyxDQUNqQyxNQUFPQSxFQUFrQixZQUFZLGdDQUFnQyxVQUUxQyxLQUFLLGNBQWtDLEtBQU1HLEdBQWVBLEVBQVcsU0FBVyxNQUFNLEVBRTVGLENBQ25CLFVBQVdBLEtBQWMsS0FBSyxjQUFrQyxDQUM1RCxJQUFJUSxFQUFjLENBQUUsU0FBVVQsRUFBYSxHQUFHQyxFQUFXLFlBQWEsRUFFdEUsT0FBUUEsRUFBVyxPQUFRLENBQ3ZCLElBQUssU0FBVSxDQUNYUSxFQUFjLEtBQUssa0JBQWtCQSxFQUFhLENBQUUsUUFBUyxjQUFlLE9BQVE7QUFBQSxZQUE2QyxDQUFDLEVBRWxJLEtBQUssdUJBQXVCUixDQUFVLEVBRXRDRixFQUFPLFdBRVAsS0FDSixDQUNBLElBQUssT0FBUSxDQUNUVSxFQUFjLEtBQUssa0JBQWtCQSxFQUFhLENBQzlDLFFBQVMsY0FDVCxPQUFRLEtBQUssS0FBSyxtQkFBbUJSLEVBQVcsVUFBVyxDQUFDO0FBQUEsWUFDaEUsQ0FBQyxFQUVERixFQUFPLFNBRVAsS0FDSixDQUNBLElBQUssVUFBVyxDQUNSRSxFQUFXLFNBQ1hRLEVBQWMsS0FBSyxrQkFBa0JBLEVBQWEsQ0FBRSxPQUFRLHFCQUFxQlIsRUFBVyxPQUFPLFNBQVUsQ0FBQyxFQUU5R0YsRUFBTyxjQUFjLEtBRXJCRCxFQUFrQixZQUNkLDBCQUEwQkcsRUFBVyxRQUFRLHNGQUM3QyxTQUNKLEVBRUosS0FDSixDQUNBLElBQUssUUFBUyxDQUNWUSxFQUFjLEtBQUssa0JBQWtCQSxFQUFhLENBQzlDLFFBQVMsV0FBV1IsRUFBVyxjQUFlLEVBQUUsS0FDaEQsUUFBU0EsRUFBVyxRQUFVLHFCQUFxQkEsRUFBVyxPQUFPLFVBQVksSUFBTTtBQUFBLFdBQzNGLENBQUMsRUFFREYsRUFBTyxTQUVQLEtBQ0osQ0FDSixDQUVBQyxFQUFjUyxFQUFZLFFBQzlCLENBRUEsR0FBSSxLQUFLLFdBQWEsS0FBSyxjQUFnQlQsRUFBYSxPQUFPRixFQUFrQixZQUFZLHlEQUF5RCxFQUV0SixNQUFNZSxFQUFlLE9BQU8sUUFBUWQsQ0FBTSxFQUNyQyxPQUFPLENBQUMsQ0FBQyxDQUFFZSxDQUFLLElBQU1BLEVBQVEsQ0FBQyxFQUMvQixJQUFJLENBQUMsQ0FBQzFHLEVBQVEwRyxDQUFLLElBQU0sR0FBRzFHLENBQU0sSUFBSTBHLENBQUssRUFBRSxFQUM3QyxLQUFLLElBQUksRUFFZCxLQUFLLHFCQUFxQixLQUFLLENBQzNCLEtBQU0sT0FDTixNQUFPLEtBQUssVUFDWixVQUFXLEtBQU8sQ0FBRSxLQUFNZCxFQUFhLFFBQVMsbUNBQW1DYSxDQUFZLElBQUksS0FBSyxhQUFhLEVBQUcsRUFDNUgsQ0FBQyxFQUVELE1BQU0sS0FBSyxzQkFBc0JmLENBQWlCLEVBRWxEQSxFQUFrQixZQUFZLDJDQUE0QyxTQUFTLEVBRW5GQSxFQUFrQixXQUFXLENBQ2pDLE1BQU9BLEVBQWtCLFlBQVksZ0NBQWdDLENBRTdFLENBTVEsbUJBQW1CaUIsRUFBZ0IsQ0FDdkMsTUFBTUMsRUFBcUJELEVBQU8sV0FBVyxXQUFXLEVBQUlBLEVBQU8sUUFBUSxZQUFhLEVBQUUsRUFBSSxhQUFhQSxDQUFNLEdBRWpILE1BQU8sZUFBZSxLQUFLLGVBQWUsSUFBSUMsQ0FBa0IsSUFDcEUsQ0FRUSxpQkFBaUJWLEVBQXlCVyxFQUEwQkMsRUFBc0IsQ0FDOUYsR0FBSUQsRUFBaUIsTUFBTyxLQUFLLEtBQUssbUJBQW1CWCxFQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUUzRSxNQUFNYSxFQUFvQyxDQUFDLEVBRTNDLFNBQVcsQ0FBQ3ZILEVBQU1tSCxDQUFNLElBQUtULEVBQ3BCYSxFQUFRSixDQUFNLElBQUdJLEVBQVFKLENBQU0sRUFBSSxDQUFDLEdBQ3pDSSxFQUFRSixDQUFNLEVBQUUsS0FBS25ILENBQUksRUFHN0IsTUFBTXdILEVBQWUsT0FBTyxRQUFRRCxDQUFPLEVBRTNDLE9BQU9DLEVBQ0YsSUFBSSxDQUFDLENBQUNMLEVBQVFwSCxDQUFLLElBQU0sS0FBSyxLQUFLLG1CQUFtQm9ILENBQU0sQ0FBQyxHQUFHSyxFQUFhLE9BQVMsR0FBSyxDQUFDRixFQUFjLEtBQUt2SCxFQUFNLElBQUtDLEdBQVMsS0FBS0EsQ0FBSSxJQUFJLEVBQUUsS0FBSyxJQUFJLENBQUMsSUFBTSxFQUFFLE9BQU8sRUFDM0ssS0FBSztBQUFBLENBQUksQ0FDbEIsQ0FRUSxZQUFZMkcsRUFBc0JVLEVBQTBCQyxFQUFzQixDQUN0RixHQUFJRCxFQUFpQixNQUFPLHFCQUFxQlYsRUFBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBRS9ELE1BQU1jLEVBQTRDLENBQUMsRUFFbkQsU0FBVyxDQUFDekgsRUFBTW9FLENBQU8sSUFBS3VDLEVBQ3JCYyxFQUFnQnJELENBQU8sSUFBR3FELEVBQWdCckQsQ0FBTyxFQUFJLENBQUMsR0FDM0RxRCxFQUFnQnJELENBQU8sRUFBRSxLQUFLcEUsQ0FBSSxFQUd0QyxNQUFNMEgsRUFBZ0IsT0FBTyxRQUFRRCxDQUFlLEVBRXBELE9BQU9DLEVBQ0YsSUFBSSxDQUFDLENBQUN0RCxFQUFTckUsQ0FBSyxJQUFNLHFCQUFxQnFFLENBQU8sS0FBS3NELEVBQWMsT0FBUyxHQUFLLENBQUNKLEVBQWMsS0FBS3ZILEVBQU0sSUFBS0MsR0FBUyxLQUFLQSxDQUFJLElBQUksRUFBRSxLQUFLLElBQUksQ0FBQyxJQUFNLEVBQUUsT0FBTyxFQUN2SyxLQUFLO0FBQUEsQ0FBSSxDQUNsQixDQVNRLGtCQUFrQjZHLEVBQTRELENBQUUsUUFBQWMsRUFBUyxPQUFBQyxDQUFPLEVBQTBDLENBQzlJLEtBQU0sQ0FBRSxnQkFBaUJDLEVBQW9CLFlBQWFDLENBQWUsRUFBSWpCLEVBRTdFLE9BQUljLElBQVNkLEVBQVksWUFBY2MsRUFBVTtBQUFBLEVBQU9kLEVBQVksYUFDaEVlLElBQVFmLEVBQVksYUFBZTtBQUFBLEVBQU9lLEdBRTlDZixFQUFZLGdCQUFrQkEsRUFBWSxnQkFBZ0IsUUFBUWlCLEVBQWdCakIsRUFBWSxXQUFXLEVBRXpHQSxFQUFZLFNBQVdBLEVBQVksU0FBUyxRQUFRZ0IsRUFBb0JoQixFQUFZLGVBQWUsRUFFNUZBLENBQ1gsQ0FRUSx1QkFBdUI3RyxFQUFjRSxFQUFzQm9HLEVBQWdCLENBQy9FLE1BQU15QixFQUNGN0gsRUFBSyxtQkFBcUJBLEVBQUssa0JBQWtCLE9BQVMsRUFDcERBLEVBQUssa0JBQWtCLElBQUtnRCxHQUFRLENBQ2hDLE1BQU04RSxFQUFzQixLQUFLLG9CQUFvQixLQUFNMUUsR0FBZUEsRUFBVyxPQUFTSixDQUFHLEVBQ2pHLEdBQUksQ0FBQzhFLEVBQXFCLE1BQU8sS0FBSzlFLENBQUcsS0FFekMsTUFBTStFLEVBQWtCRCxFQUFvQixXQUN2QyxJQUFJLENBQUNFLEVBQVcxRyxJQUFVLENBQ3ZCLE1BQU03QixFQUFRdUksRUFBVSxPQUFPLFNBQVMsRUFBRSxLQUFLLEVBQy9DLE9BQUt2SSxFQUVFLElBQUl1SSxFQUFVLFFBQVUxRyxFQUFRLEdBQUcsU0FBUyxFQUFJLEdBQUssR0FBRzBHLEVBQVUsSUFBSSxHQUFHLEdBQUd2SSxDQUFLLEdBRnJFLElBR3ZCLENBQUMsRUFDQSxPQUFPLE9BQU8sRUFDZCxLQUFLLEVBQUUsRUFFWixNQUFPLEtBQUt1RCxDQUFHLEdBQUcrRSxDQUFlLElBQ3JDLENBQUMsRUFDRCxLQUVWLEtBQUsscUJBQXFCLEtBQ3RCLENBQ0ksS0FBTSxTQUNOLFdBQVksR0FDWixNQUFPakksRUFDUCxLQUFNLGVBQWVzRyxDQUFNLEtBQUt5QixFQUFvQjtBQUFBO0FBQUE7QUFBQSxFQUFtQ0EsRUFBa0IsS0FBSztBQUFBLENBQUksQ0FBQztBQUFBLElBQVMsRUFBRSxHQUM5SCxRQUFTLDBCQUEwQnpCLENBQU0sa0NBQWtDLEtBQUssYUFBYSxFQUNqRyxFQUNBLENBQ0ksS0FBTSxTQUNOLFdBQVksR0FDWixNQUFPLEdBQUcsTUFBTSxZQUFZdEcsQ0FBSSxFQUFHLFlBQVksRUFBRyxnQkFBZ0IsRUFDbEUsS0FBTTtBQUFBLDJFQUF5RyxHQUFHLE9BQU8sSUFBSSxZQUFZLENBQUM7QUFBQSxJQUMxSSxRQUFTLGtHQUFrRyxLQUFLLGFBQWEsRUFDakksQ0FDSixDQUNKLENBTVEsdUJBQXVCRSxFQUFzQixDQUNqRCxLQUFLLHFCQUFxQixLQUN0QixDQUNJLEtBQU0sU0FDTixXQUFZLEdBQ1osTUFBTyxZQUFZQSxFQUFLLFFBQVEsR0FDaEMsS0FBTUEsRUFBSyxRQUFRLElBQUtnRixHQUFXLGNBQWNBLENBQU0sSUFBSSxFQUFFLEtBQUs7QUFBQSxDQUFJLEVBQ3RFLFFBQVMsaURBQWlELEtBQUssYUFBYSxFQUNoRixFQUNBLENBQ0ksS0FBTSxTQUNOLFdBQVksR0FDWixNQUFPLGlCQUFpQmhGLEVBQUssUUFBUSxHQUNyQyxLQUFNO0FBQUEsMkVBQXlHLEdBQUcsT0FBTyxJQUFJLFlBQVksQ0FBQztBQUFBLElBQzFJLFFBQVMsa0dBQWtHLEtBQUssYUFBYSxFQUNqSSxFQUNBLEdBQUdBLEVBQUssU0FBUyxJQUFLNkUsSUFBYSxDQUMvQixLQUFNLE9BQ04sTUFBT0EsRUFDUCxVQUFXLENBQUMsQ0FBRSxRQUFBb0QsQ0FBUSxLQUE0QixDQUM5QyxLQUFNLEdBQUdBLENBQU87QUFBQSxhQUFnQmpJLEVBQUssUUFBUSxLQUM3QyxRQUFTLDhCQUE4QkEsRUFBSyxRQUFRLGtDQUFrQyxLQUFLLGFBQWEsRUFDNUcsRUFDSixFQUFFLENBQ04sQ0FDSixDQU1BLE1BQWMsc0JBQXNCZ0csRUFBc0MsQ0FDdEUsVUFBVzFGLEtBQVUsS0FBSyxxQkFBc0IsQ0FDNUMsTUFBTTRILEVBQWM1SCxFQUFPLE9BQVMsT0FBUyxLQUFLLElBQUksS0FBS0EsRUFBTyxNQUFPQSxFQUFPLFNBQVMsRUFBSSxLQUFLLElBQUksT0FBT0EsRUFBTyxNQUFPLENBQUUsUUFBU0EsRUFBTyxPQUFRLEVBQUdBLEVBQU8sSUFBSSxFQUU3SndCLEVBQWMsU0FBUyxjQUFjLEdBQUcsRUFDOUNBLEVBQVksT0FBUyxTQUNyQkEsRUFBWSxLQUFPLEdBQUcsS0FBSyxPQUFPeEIsRUFBTyxNQUFPLGVBQWdCQSxHQUFVQSxFQUFPLFdBQWEsQ0FBRSxTQUFVLElBQUssRUFBSSxNQUFTLEVBQzVId0IsRUFBWSxZQUFjeEIsRUFBTyxNQUVqQzBGLEVBQWtCLFlBQVksR0FBRzFGLEVBQU8sT0FBUyxPQUFTLFVBQVksVUFBVSxJQUFJd0IsRUFBWSxTQUFTLEtBQUssRUFHOUcsTUFBTW9HLEVBQVksTUFBTSxNQUFPQyxFQUFtQkMsSUFBa0MsQ0FDNUVELElBQWMsZUFDZG5DLEVBQWtCLFlBQVksd0RBQXdELElBQUksS0FBSyxLQUFLLElBQUksRUFBSSxHQUFNLEVBQUUsbUJBQW1CLENBQUMsSUFBSyxTQUFTLEVBQ3RKLE1BQU0sSUFBSSxRQUFTcUMsR0FBWSxXQUFXQSxFQUFTLEdBQU0sQ0FBQyxFQUUxRHJDLEVBQWtCLFlBQVksZ0JBQWlCLFNBQVMsRUFHeEQsTUFBTWtDLEVBQVksTUFBTSxDQUFDQyxFQUFtQkMsSUFBa0MsQ0FDMUVwQyxFQUFrQixZQUNkLFNBQVMxRixFQUFPLE9BQVMsT0FBUyxVQUFZLFVBQVUsSUFBSXdCLEVBQVksU0FBUyxLQUFLc0csR0FBVyxNQUFNLE1BQVEsZUFBZSxLQUFLRCxDQUFTLEtBQzVJLE9BQ0osQ0FDSixDQUFDLEdBRURuQyxFQUFrQixZQUNkLFNBQVMxRixFQUFPLE9BQVMsT0FBUyxVQUFZLFVBQVUsSUFBSXdCLEVBQVksU0FBUyxLQUFLc0csR0FBVyxNQUFNLE1BQVEsZUFBZSxLQUFLRCxDQUFTLEtBQzVJLE9BQ0osQ0FDUixDQUFDLENBQ0wsQ0FDSixDQUNKLENBRUEsT0FBTyxPQUFPbEosRUFBa0IsVUFBVyxHQUFHLEdBQUcsY0FBYyxTQUFTLENBQzVFLENBQUMiLAogICJuYW1lcyI6IFsiaXNSZWRpcmVjdFJlcXVlc3RQYWdlIiwgImlzQ2F0ZWdvcnlSZXF1ZXN0UGFnZSIsICJyZXF1ZXN0UGFnZVR5cGUiLCAiZXZlbnQiLCAid2luZG93TWFuYWdlciIsICJhZmNyY0hlbHBlckRpYWxvZyIsICJBZmNyY0hlbHBlckRpYWxvZyIsICJTaG93QWN0aW9uc0RpYWxvZyIsICJtZXNzYWdlIiwgInR5cGUiLCAibWVzc2FnZVdpZGdldCIsICJyZWxvYWRCdXR0b24iLCAiUGFnZUlucHV0V2lkZ2V0IiwgImNvbmZpZyIsICJ2YWx1ZSIsICJkZWZlcnJlZCIsICJwYXJzZWRUaXRsZSIsICJyZXN1bHQiLCAicGFnZXMiLCAicGFnZSIsICJyZXNwb25zZSIsICJkYXRhIiwgImxhYmVsIiwgIkNhdGVnb3J5SW5wdXRXaWRnZXQiLCAiY2F0ZWdvcnkiLCAidGl0bGVXaXRob3V0TmFtZXNwYWNlIiwgInBhZ2VUaXRsZSIsICJhY3Rpb24iLCAicmVkaXJlY3RUZW1wbGF0ZVJlc3BvbnNlIiwgInBhZ2VSZXZpc2lvbiIsICJzZWN0aW9ucyIsICJtYXRjaCIsICJzZWN0aW9uVGV4dCIsICJzZWN0aW9uSGVhZGVyIiwgInBhcnNlZERhdGEiLCAicmVxdWVzdGVkUGFnZXMiLCAicGFyc2VkVGFyZ2V0IiwgInJlcXVlc3RlciIsICJmb3VuZENhdGVnb3J5IiwgImZpcnN0VXNlckluZGV4IiwgImZpcnN0VXNlclRhbGtJbmRleCIsICJmaXJzdElwSW5kZXgiLCAiZmlyc3RJbmRleCIsICJpbmRleCIsICJoYW5kbGUiLCAiZW5kSW5kZXgiLCAic3ViSW5kZXgiLCAibWVzc2FnZVdpZGdldExheW91dCIsICJyZXF1ZXN0IiwgImRldGFpbHNFbGVtZW50IiwgInN1bW1hcnlFbGVtZW50IiwgImxpbmtFbGVtZW50IiwgInJlcXVlc3RJbmZvRWxlbWVudCIsICJub25lRWxlbWVudCIsICJyZWFzb25EaXYiLCAicmVhc29uTGFiZWwiLCAic291cmNlRGl2IiwgInNvdXJjZUxhYmVsIiwgInJlcXVlc3RlckRpdiIsICJyZXF1ZXN0ZXJMYWJlbCIsICJyZXF1ZXN0ZXJMaW5rIiwgInJlcXVlc3RSZXNwb25kZXJFbGVtZW50IiwgInJlcXVlc3RlZFRpdGxlIiwgInJlcXVlc3RlZFRpdGxlRGl2IiwgInRhZ1NlbGVjdExheW91dCIsICJ0ZW1wbGF0ZVBhcmFtZXRlcnNFZGl0b3IiLCAiYWN0aW9uUmFkaW9JbnB1dCIsICJvcHRpb24iLCAidGFnU2VsZWN0IiwgInRhZyIsICJzb3J0ZWRUYWdzIiwgImEiLCAiYiIsICJlZGl0b3JJbmZvIiwgInNob3duVGVtcGxhdGVFZGl0b3JzIiwgIm5vVGVtcGxhdGVzTWVzc2FnZSIsICJ0ZW1wbGF0ZU5hbWUiLCAidGVtcGxhdGVEYXRhIiwgInBhcmFtZXRlcnMiLCAiZGV0YWlscyIsICJzdW1tYXJ5IiwgImVsZW1lbnREYXRhIiwgInBhcmFtZXRlck5hbWUiLCAicGFyYW1ldGVyRGF0YSIsICJpbnB1dCIsICJpbnB1dExheW91dCIsICJjb21tZW50SW5wdXRMYXlvdXQiLCAiY29tbWVudCIsICJjb21tZW50SW5wdXQiLCAiZGVueVJlYXNvbkxheW91dCIsICJjbG9zaW5nUmVhc29uTGF5b3V0IiwgImRlbnlSZWFzb24iLCAiY2xvc2luZ1JlYXNvbiIsICJ0aXRsZSIsICJpZCIsICJzZWxlY3RlZCIsICJleGFtcGxlc0RpdiIsICJleGFtcGxlc0xhYmVsIiwgImV4YW1wbGUiLCAicGFyZW50c0RpdiIsICJwYXJlbnRzTGFiZWwiLCAicGFyZW50IiwgInBhZ2VTZWxlY3RMYXlvdXQiLCAiY2F0ZWdvcnlTZWxlY3RMYXlvdXQiLCAicGFnZVNlbGVjdElucHV0IiwgInBhZ2VTZWxlY3QiLCAiZXhhbXBsZXMiLCAiY2F0ZWdvcnlTZWxlY3RJbnB1dCIsICJjYXRlZ29yeVNlbGVjdCIsICJwYXJlbnRzIiwgImFjdGlvbnNUb1Rha2UiLCAiYWxsUmVxdWVzdHNBY2NlcHRlZERlbmllZCIsICJmaXJzdENsb3NlUmVhc29uIiwgImFsbFJlcXVlc3RzQ2xvc2VkIiwgImJhY2tncm91bmRDb2xvciIsICJhY2NlcHRlZENvdW50IiwgImRlbmllZENvdW50IiwgInNob3dBY3Rpb25zRGlhbG9nIiwgImNvdW50cyIsICJuZXdQYWdlVGV4dCIsICJhY3Rpb25EYXRhIiwgInRhcmdldCIsICJyZXF1ZXN0cyIsICJzb21lUmVxdWVzdEFjY2VwdGVkRGVuaWVkIiwgImFjY2VwdGVkUGFnZXMiLCAiZGVuaWVkUGFnZXMiLCAiY29tbWVudHMiLCAiYW1vdW50T2ZQYWdlcyIsICJzZWN0aW9uRGF0YSIsICJjbG9zaW5nSWQiLCAiYWNjZXB0ZWRQYWdlc01lc3NhZ2UiLCAiZGVuaWVkUGFnZXNNZXNzYWdlIiwgIm1hcHBlZENvdW50cyIsICJjb3VudCIsICJyZWFzb24iLCAidGVtcGxhdGVQYXJhbWV0ZXJzIiwgInNpbmd1bGFyUmVxdWVzdCIsICJhbGxSZXF1ZXN0cyIsICJyZWFzb25zIiwgInJlYXNvbnNBcnJheSIsICJjb21tZW50TWVzc2FnZXMiLCAiY29tbWVudHNBcnJheSIsICJwcmVwZW5kIiwgImFwcGVuZCIsICJvbGRGdWxsU2VjdGlvblRleHQiLCAib2xkU2VjdGlvblRleHQiLCAidGFnc1dpdGhBcmd1bWVudHMiLCAiZm91bmRBcmd1bWVudEVkaXRvciIsICJtYXBwZWRBcmd1bWVudHMiLCAicGFyYW1ldGVyIiwgImNvbnRlbnQiLCAiYXBpRnVuY3Rpb24iLCAiZXJyb3JDb2RlIiwgImVycm9ySW5mbyIsICJyZXNvbHZlIl0KfQo=
