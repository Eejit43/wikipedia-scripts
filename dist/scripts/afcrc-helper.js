"use strict";mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui-widgets","oojs-ui-windows"],()=>{const P=mw.config.get("wgPageName")==="Wikipedia:Articles_for_creation/Redirects",j=mw.config.get("wgPageName")==="Wikipedia:Articles_for_creation/Categories";if(!P&&!j)return;const L=P?"redirect":"category";mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-tb":"p-cactions","#",`Handle ${L} creation requests`,"afcrc-helper").addEventListener("click",M=>{M.preventDefault();const C=new OO.ui.WindowManager;document.body.append(C.$element[0]);const e=new w(L,mw.config.get("wgPageName"));C.addWindows([e]),e.open()});class A extends OO.ui.Dialog{constructor(){super({size:"medium"});this.initialize=()=>{OO.ui.Dialog.prototype.initialize.apply(this),mw.util.addCSS(`
.afcrc-helper-actions-container div {
    margin-block: 8px;
}`),this.contentLayout=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.$body.append(this.contentLayout.$element),this.logOutput=document.createElement("div"),this.logOutput.classList.add("afcrc-helper-actions-container");const e=new OO.ui.ButtonWidget({label:"Close",flags:["safe","close"]});return e.on("click",()=>this.close()),this.contentLayout.$element.append(this.logOutput,e.$element),this};this.getBodyHeight=()=>this.contentLayout.$element.outerHeight(!0);A.static.name="ShowActionsDialog",A.static.title="Actions"}addLogEntry(e){const t=document.createElement("div");t.textContent=e,this.logOutput.append(t)}}Object.assign(A.prototype,OO.ui.Dialog.prototype);class w extends OO.ui.ProcessDialog{constructor(e,t){super({size:"large"});this.api=new mw.Api;this.scriptMessage=" ([[User:Eejit43/scripts/afcrc-helper|afcrc-helper]])";this.parsedRequests=[];this.actionsToTake={};this.getSetupProcess=()=>(mw.util.addCSS(`
.afcrc-helper-request {
    background-color: #eee;
    border-radius: 5px;
    margin: 10px;
    padding: 5px;
}

.afcrc-helper-request summary {
    cursor: pointer;
}

.afcrc-helper-request-info, .afcrc-helper-request-responder {
    margin: 5px;
}

.afcrc-helper-request-info > div, .afcrc-helper-request-responder > div {
    margin-block: 8px;
}

.afcrc-helper-request-responder > div:last-of-type {
    margin-bottom: 0;
}

.afcrc-helper-request-responder .oo-ui-fieldLayout {
    margin-left: 8px;
}

.afcrc-helper-action-radio {
    margin-top: 8px;
}

.afcrc-helper-action-radio .oo-ui-radioOptionWidget {
    display: inline;
    padding: 8px;
}

.afcrc-closing-reason-input, .afcrc-comment-input {
    max-width: 50%;
}`),w.super.prototype.getSetupProcess.call(this).next(()=>this.api.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:"User:Eejit43/scripts/redirect-helper.json"}).then(e=>{this.redirectTemplateItems=Object.keys(JSON.parse(e.query.pages?.[0]?.revisions?.[0]?.slots?.main?.content||"{}")).map(t=>new OO.ui.MenuOptionWidget({data:t,label:t}))})).next(()=>this.api.get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:this.pageTitle}).then(e=>{this.pageContent=e.query.pages[0].revisions[0].slots.main.content.trim(),this.parseRequests(),this.loadInputElements()})));this.getActionProcess=e=>{switch(e){case"cancel":return new OO.ui.Process(()=>{this.getManager().closeWindow(this)});case"show-actions":return new OO.ui.Process(()=>{this.performActions(!0)});case"save":return new OO.ui.Process(()=>{this.performActions(!1)});default:return w.super.prototype.getActionProcess.call(this,e)}};this.getTeardownProcess=()=>w.super.prototype.getTeardownProcess.call(this).next(()=>{this.$body.empty()});w.static.name="AfcrcHelperDialog",w.static.title="afcrc-helper",w.static.actions=[{action:"cancel",label:"Close",flags:["safe","close"]},{action:"show-actions",label:"Show actions to take"},{action:"save",label:"Run",flags:["primary","progressive"]}],this.pageTitle=t,this.requestPageType=e}parseRequests(){this.beforeText=this.pageContent.match(/^(.*?)==/s)[1],this.pageContent=this.pageContent.replace(/^.*?==/s,"==").replaceAll(new RegExp(`\\[https?:${mw.config.get("wgServer")}/(.*?)]`,"g"),"[[$1]]");const e=[...this.pageContent.matchAll(/^==.*?==$(\s*(?!==[^=]).*)*/gim)].map(t=>t[0]);for(const t of e){if(/{{afc-c\|/i.test(t))continue;const r=t.match(/^==(.*?)==$/m)[1].trim();if(L==="redirect"){const s={},i=[...r.matchAll(/\[\[(.*?)]]/g)].map(o=>o[1].trim().replace(/^:/,"").replaceAll("_"," "));s.pages=i;const O=t.match(/Target of redirect: ?\[\[(.*?)]]/)?.[1].trim().replace(/^:/,"").replaceAll("_"," ");if(!O)continue;s.target=O,s.reason=t.match(/reason: ?(.*?)\*source(?: \(if applicable\))?:/is)[1].trim(),s.source=t.match(/source(?: \(if applicable\))?: ?(.*?)(?:<references \/>|\n)/is)[1].trim();const y=t.match(t.includes("<references />")?/<references \/>\n(.*)/:new RegExp(`(?:<references \\/>${s.source?`|${s.source.replaceAll(/[\s#$()*+,.?[\\\]^{|}-]/g,"\\$&")}`:""})
+(.*)`))[1].trim();s.requester={type:y.includes("[[User:")?"user":"ip",name:y.match(/(?:Special:Contributions\/|User:)(.*?)\|/)[1].trim()},this.parsedRequests.push(s),this.actionsToTake[s.target]=Object.fromEntries(i.map(o=>[o,{originalText:t.replace(/^==.*?==$/m,"").trim(),action:"none"}]))}else{const s={}}}}loadInputElements(){if(this.requestPageType==="redirect")for(const e of this.parsedRequests){const t=document.createElement("details");t.classList.add("afcrc-helper-request");const g=document.createElement("summary");g.innerHTML=e.pages.map(a=>`<b>${a}</b>`).join(", ")+" \u2192 ";const r=document.createElement("a");r.target="_blank",r.href=mw.util.getUrl(e.target),r.textContent=e.target,g.append(r),t.append(g);const s=document.createElement("div");s.classList.add("afcrc-helper-request-info");const i=document.createElement("span");i.style.color="dimgray",i.textContent="None";const O=document.createElement("div"),y=document.createElement("b");y.textContent="Reason: ",O.append(y),e.reason?O.append(e.reason):O.append(i),s.append(O);const o=document.createElement("div"),m=document.createElement("b");m.textContent="Source: ",o.append(m),e.source?o.append(e.source):o.append(i),s.append(o);const $=document.createElement("div"),k=document.createElement("b");k.textContent="Requester: ",$.append(k);const T=document.createElement("a");T.target="_blank",T.href=e.requester.type==="user"?mw.util.getUrl(`User:${e.requester.name}`):mw.util.getUrl(`Special:Contributions/${e.requester.name}`),T.textContent=e.requester.name,$.append(T),s.append($),t.append(s),t.append(document.createElement("hr"));const q=document.createElement("div");q.classList.add("afcrc-helper-request-responder");for(const a of e.pages){const b=document.createElement("div"),v=document.createElement("b");v.textContent=a+" \u2192 "+e.target,b.append(v);const d=new OO.ui.RadioSelectWidget({classes:["afcrc-helper-action-radio"],items:["Accept","Deny","Comment","Close","None"].map(c=>new OO.ui.RadioOptionWidget({data:c,label:c}))});d.selectItemByLabel("None"),d.on("choose",()=>{const c=d.findSelectedItem().getData().toLowerCase();if(this.actionsToTake[e.target][a].action=c,["comment","close"].includes(c)){E.$element.show();const f=x.getValue().trim();f?this.actionsToTake[e.target][a].comment=f:delete this.actionsToTake[e.target][a].comment}else E.$element.hide(),delete this.actionsToTake[e.target][a].comment;switch(u.$element.hide(),h.$element.hide(),R.$element.hide(),c){case"accept":{u.$element.show(),this.actionsToTake[e.target][a].redirectTemplates=n.getValue();break}case"deny":{h.$element.show(),this.actionsToTake[e.target][a].denyReason=l.getValue();break}case"close":{R.$element.show();const f=p.getMenu().findSelectedItem();this.actionsToTake[e.target][a].closingReason={name:f.getLabel(),id:f.getData()};break}}});const n=new OO.ui.MenuTagMultiselectWidget({allowArbitrary:!1,allowReordering:!1});n.getMenu().addItems(this.redirectTemplateItems),n.getMenu().filterMode="substring",n.on("change",()=>{const c=n.getValue().sort((f,W)=>f.toLowerCase().localeCompare(W.toLowerCase()));n.getValue().join(";")!==c.join(";")&&n.setValue(c),this.actionsToTake[e.target][a].redirectTemplates=c});const u=new OO.ui.FieldLayout(n,{align:"inline",label:"Redirect templates"});u.$element.hide();const l=new OO.ui.ComboBoxInputWidget({classes:["afcrc-closing-reason-input"],placeholder:"autofill:unlikely",options:[["exists","existing pages"],["empty","empty submissions"],["notarget","nonexistent or no provided target"],["notitle","no title provided"],["unlikely","unlikely redirects"],["externallink","external link redirects"],["editrequest","edit requests"],["notenglish","requests not in English"]].map(([c,f])=>({data:`autofill:${c}`,label:`Autofilled text for ${f}`}))});l.getMenu().on("choose",()=>{this.actionsToTake[e.target][a].denyReason=l.getValue()}),l.setValue("autofill:unlikely"),l.getMenu().selectItemByData("autofill:unlikely");const h=new OO.ui.FieldLayout(l,{align:"inline",label:"Deny reason"});h.$element.hide();const p=new OO.ui.DropdownWidget({classes:["afcrc-closing-reason-input"],menu:{items:[["No response","r"],["Succeeded","s"],["Withdrawn","w"]].map(([c,f])=>new OO.ui.MenuOptionWidget({data:f,label:c}))}});p.getMenu().on("choose",()=>{const c=p.getMenu().findSelectedItem();this.actionsToTake[e.target][a].closingReason={name:c.getLabel(),id:c.getData()}}),p.getMenu().selectItemByLabel("No response");const R=new OO.ui.FieldLayout(p,{align:"inline",label:"Closing reason"});R.$element.hide();const x=new OO.ui.TextInputWidget;x.on("change",()=>{const c=x.getValue().trim();c?this.actionsToTake[e.target][a].comment=c:delete this.actionsToTake[e.target][a].comment});const E=new OO.ui.FieldLayout(x,{classes:["afcrc-comment-input"],align:"inline",label:"Comment"});E.$element.hide(),b.append(d.$element[0],u.$element[0],h.$element[0],R.$element[0],E.$element[0]),q.append(b)}t.append(q),this.$body.append(t)}else for(const e of this.parsedRequests){const t=document.createElement("details");t.classList.add("afcrc-helper-request");const g=document.createElement("summary");g.textContent=e.name,t.append(g),this.$body.append(t)}}async performActions(e){const t=e?"will be":"has been",g=new OO.ui.WindowManager;document.body.append(g.$element[0]);const r=new A;g.addWindows([r]),r.open();const s={accepted:0,denied:0,commented:0,closed:0};let i=this.beforeText+this.pageContent;if(this.requestPageType==="redirect")if(Object.values(this.actionsToTake).some(y=>Object.values(y).some(o=>o.action!=="none"))){for(const[o,m]of Object.entries(this.actionsToTake)){const $=Object.values(m).some(n=>n.action==="accept"||n.action==="deny"),k=Object.values(m).every(n=>n.action==="accept"||n.action==="deny"),T=Object.values(m).find(n=>n.action==="close")?.closingReason?.id,q=Object.values(m).every(n=>n.action==="close"&&n.closingReason?.id===T),a=[],b=[],v=[];for(const[n,u]of Object.entries(m)){const l=`The request to create "${n}" \u2192 "${o}" ${t} `,h=u.comment?" and commented on":"";switch(u.action){case"accept":{$&&!k?r.addLogEntry(`Not all requests to "${o}" were accepted or denied, the handling of "${n}" will be ignored.`):(r.addLogEntry(l+`accepted${h}.`),a.push(n),s.accepted++);break}case"deny":{$&&!k?r.addLogEntry(`Not all requests to "${o}" were accepted or denied, the handling of "${n}" is being ignored.`):(r.addLogEntry(l+"denied."),b.push([n,u.denyReason||"decline"]),s.denied++);break}case"comment":{u.comment?(r.addLogEntry(l+"commented on."),v.push(`[${n} \u2192 ${o}] ${u.comment}`),s.commented++):r.addLogEntry(l+"marked to be commented on, but no comment was provided.");break}case"close":{q?(r.addLogEntry(l+`closed as ${u.closingReason.name.toLowerCase()}${h}.`),s.closed++):r.addLogEntry(`Not all requests to "${o}" were closed with the same reason, the handling of "${n}" is being ignored.`);break}}}let d=Object.values(m)[0].originalText;if(v.length>0&&(d+=`
`+v.map(n=>`* {{AfC comment|1=${n}}} ~~~~`).join(`
`),i=i.replace(Object.values(m)[0].originalText,d)),$){let n;const u=d;if(a.length>0&&b.length>0){n="p";const l=a.map(p=>`* {{subst:AfC redirect}} [${p}] ~~~~`),h=b.map(([p,R])=>`* {{subst:AfC redirect|${R.startsWith("autofill:")?R.replace("autofill:",""):`decline|1=${R}`}}} [${p}] ~~~~`);if(!e)for(const p of a)this.handleAcceptedRedirect(p,m[p],o);d+=`
`+l.join(`
`)+`
`+h.join(`
`),i=i.replace(u,d)}else if(a.length>0){if(n="a",!e)for(const l of a)this.handleAcceptedRedirect(l,m[l],o);d+=`
* {{subst:AfC redirect${a.length>1?"|all":""}}} ~~~~`,i=i.replace(u,d)}else{n="d";const l=b.map(([h,p])=>`* {{subst:AfC redirect|${p.startsWith("autofill:")?p.replace("autofill:",""):`decline|1=${p}`}}}${b.length>1?` [${h}]`:""} ~~~~`);d+=`
`+l.join(`
`),i=i.replace(u,d)}i=i.replace(d,`{{AfC-c|${n}}}
${d}
{{AfC-c|b}}`)}else q&&(i=i.replace(d,`{{AfC-c|${T}}}
${d}
{{AfC-c|b}}`))}if(e||this.beforeText+this.pageContent===i)return;const y=Object.entries(s).filter(([,o])=>o>0).map(([o,m])=>`${o} ${m}`).join(", ");await this.api.edit(this.pageTitle,()=>({text:i,summary:`Handling AfC redirect requests (${y})${this.scriptMessage}`})),mw.notify(`Handled ${y} redirect requests, reloading...`),window.location.reload()}else r.addLogEntry(`No requests ${e?"will be":"have been"} handled!`)}handleAcceptedRedirect(e,t,g){const r=t.redirectTemplates&&t.redirectTemplates.length>0?t.redirectTemplates?.map(i=>`{{${i}}}`).join(`
`):null;this.api.create(e,{summary:`Creating redirect to [[${g}]] as requested at [[WP:AFC/R]]${this.scriptMessage}`},`#REDIRECT [[${g}]]${r?`

{{Redirect category shell|
${r}
}}`:""}`);const s=mw.Title.newFromText(e).getTalkPage().getPrefixedText();this.api.create(s,{summary:`Placing banner for [[Wikipedia:WikiProject Articles for creation|WikiProject Articles for creation]] ${this.scriptMessage}`},`{{WikiProject banner shell|class=Redirect|
{{WikiProject Articles for creation|ts={{subst:LOCALTIMESTAMP}}|reviewer=${mw.config.get("wgUserName")}}}
}}`)}}Object.assign(w.prototype,OO.ui.ProcessDialog.prototype)});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy9hZmNyYy1oZWxwZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zIH0gZnJvbSAndHlwZXMtbWVkaWF3aWtpL2FwaV9wYXJhbXMnO1xuaW1wb3J0IHsgUGFnZVJldmlzaW9uc1Jlc3VsdCB9IGZyb20gJy4uL2dsb2JhbC10eXBlcyc7XG5cbm13LmxvYWRlci51c2luZyhbJ21lZGlhd2lraS51dGlsJywgJ29vanMtdWktY29yZScsICdvb2pzLXVpLXdpZGdldHMnLCAnb29qcy11aS13aW5kb3dzJ10sICgpID0+IHtcbiAgICBjb25zdCBpc1JlZGlyZWN0UmVxdWVzdFBhZ2UgPSBtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJykgPT09ICdXaWtpcGVkaWE6QXJ0aWNsZXNfZm9yX2NyZWF0aW9uL1JlZGlyZWN0cyc7XG4gICAgY29uc3QgaXNDYXRlZ29yeVJlcXVlc3RQYWdlID0gbXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpID09PSAnV2lraXBlZGlhOkFydGljbGVzX2Zvcl9jcmVhdGlvbi9DYXRlZ29yaWVzJztcblxuICAgIGlmICghaXNSZWRpcmVjdFJlcXVlc3RQYWdlICYmICFpc0NhdGVnb3J5UmVxdWVzdFBhZ2UpIHJldHVybjtcblxuICAgIGNvbnN0IHJlcXVlc3RQYWdlVHlwZSA9IGlzUmVkaXJlY3RSZXF1ZXN0UGFnZSA/ICdyZWRpcmVjdCcgOiAnY2F0ZWdvcnknO1xuXG4gICAgY29uc3QgbGluayA9IG13LnV0aWwuYWRkUG9ydGxldExpbmsobXcuY29uZmlnLmdldCgnc2tpbicpID09PSAnbWluZXJ2YScgPyAncC10YicgOiAncC1jYWN0aW9ucycsICcjJywgYEhhbmRsZSAke3JlcXVlc3RQYWdlVHlwZX0gY3JlYXRpb24gcmVxdWVzdHNgLCAnYWZjcmMtaGVscGVyJykhO1xuXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHdpbmRvd01hbmFnZXIgPSBuZXcgT08udWkuV2luZG93TWFuYWdlcigpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh3aW5kb3dNYW5hZ2VyLiRlbGVtZW50WzBdKTtcblxuICAgICAgICBjb25zdCBhZmNyY0hlbHBlckRpYWxvZyA9IG5ldyBBZmNyY0hlbHBlckRpYWxvZyhyZXF1ZXN0UGFnZVR5cGUsIG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSk7XG5cbiAgICAgICAgd2luZG93TWFuYWdlci5hZGRXaW5kb3dzKFthZmNyY0hlbHBlckRpYWxvZ10pO1xuXG4gICAgICAgIGFmY3JjSGVscGVyRGlhbG9nLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIGNsYXNzIFNob3dBY3Rpb25zRGlhbG9nIGV4dGVuZHMgT08udWkuRGlhbG9nIHtcbiAgICAgICAgcHJpdmF0ZSBjb250ZW50TGF5b3V0ITogT08udWkuUGFuZWxMYXlvdXQ7XG4gICAgICAgIHByaXZhdGUgbG9nT3V0cHV0ITogSFRNTERpdkVsZW1lbnQ7XG5cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcih7IHNpemU6ICdtZWRpdW0nIH0pO1xuXG4gICAgICAgICAgICBTaG93QWN0aW9uc0RpYWxvZy5zdGF0aWMubmFtZSA9ICdTaG93QWN0aW9uc0RpYWxvZyc7XG4gICAgICAgICAgICBTaG93QWN0aW9uc0RpYWxvZy5zdGF0aWMudGl0bGUgPSAnQWN0aW9ucyc7XG4gICAgICAgIH1cblxuICAgICAgICBpbml0aWFsaXplID0gKCkgPT4ge1xuICAgICAgICAgICAgT08udWkuRGlhbG9nLnByb3RvdHlwZS5pbml0aWFsaXplLmFwcGx5KHRoaXMpO1xuXG4gICAgICAgICAgICBtdy51dGlsLmFkZENTUyhgXG4uYWZjcmMtaGVscGVyLWFjdGlvbnMtY29udGFpbmVyIGRpdiB7XG4gICAgbWFyZ2luLWJsb2NrOiA4cHg7XG59YCk7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGVudExheW91dCA9IG5ldyBPTy51aS5QYW5lbExheW91dCh7IHBhZGRlZDogdHJ1ZSwgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7ICRib2R5OiBKUXVlcnkgfSkuJGJvZHkuYXBwZW5kKHRoaXMuY29udGVudExheW91dC4kZWxlbWVudCk7XG5cbiAgICAgICAgICAgIHRoaXMubG9nT3V0cHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0aGlzLmxvZ091dHB1dC5jbGFzc0xpc3QuYWRkKCdhZmNyYy1oZWxwZXItYWN0aW9ucy1jb250YWluZXInKTtcblxuICAgICAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBuZXcgT08udWkuQnV0dG9uV2lkZ2V0KHsgbGFiZWw6ICdDbG9zZScsIGZsYWdzOiBbJ3NhZmUnLCAnY2xvc2UnXSB9KTtcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGVudExheW91dC4kZWxlbWVudC5hcHBlbmQodGhpcy5sb2dPdXRwdXQsIGNsb3NlQnV0dG9uLiRlbGVtZW50KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0Qm9keUhlaWdodCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnRMYXlvdXQuJGVsZW1lbnQub3V0ZXJIZWlnaHQodHJ1ZSkhO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIGEgbG9nIGVudHJ5IHRvIHRoZSBkaWFsb2cuXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGFkZC5cbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBhZGRMb2dFbnRyeShtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBsb2dFbnRyeS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgICAgICAgICAgIHRoaXMubG9nT3V0cHV0LmFwcGVuZChsb2dFbnRyeSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKFNob3dBY3Rpb25zRGlhbG9nLnByb3RvdHlwZSwgT08udWkuRGlhbG9nLnByb3RvdHlwZSk7XG5cbiAgICBpbnRlcmZhY2UgUmVkaXJlY3RSZXF1ZXN0RGF0YSB7XG4gICAgICAgIHBhZ2VzOiBzdHJpbmdbXTtcbiAgICAgICAgdGFyZ2V0OiBzdHJpbmc7XG4gICAgICAgIHJlYXNvbjogc3RyaW5nO1xuICAgICAgICBzb3VyY2U6IHN0cmluZztcbiAgICAgICAgcmVxdWVzdGVyOiB7IHR5cGU6ICd1c2VyJyB8ICdpcCc7IG5hbWU6IHN0cmluZyB9O1xuICAgIH1cblxuICAgIGludGVyZmFjZSBDYXRlZ29yeVJlcXVlc3REYXRhIHt9XG5cbiAgICB0eXBlIEFjdGlvblR5cGUgPSAnYWNjZXB0JyB8ICdkZW55JyB8ICdjb21tZW50JyB8ICdjbG9zZScgfCAnbm9uZSc7XG5cbiAgICBpbnRlcmZhY2UgQWN0aW9uIHtcbiAgICAgICAgb3JpZ2luYWxUZXh0OiBzdHJpbmc7XG4gICAgICAgIGFjdGlvbjogQWN0aW9uVHlwZTtcbiAgICAgICAgY29tbWVudD86IHN0cmluZztcbiAgICB9XG5cbiAgICB0eXBlIFJlZGlyZWN0QWN0aW9uID0gQWN0aW9uICYgeyByZWRpcmVjdFRlbXBsYXRlcz86IHN0cmluZ1tdOyBkZW55UmVhc29uPzogc3RyaW5nOyBjbG9zaW5nUmVhc29uPzogeyBuYW1lOiBzdHJpbmc7IGlkOiBzdHJpbmcgfSB9O1xuXG4gICAgdHlwZSBSZWRpcmVjdEFjdGlvbnMgPSBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBSZWRpcmVjdEFjdGlvbj4+O1xuXG4gICAgdHlwZSBDYXRlZ29yeUFjdGlvbnMgPSBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBBY3Rpb24+PjtcblxuICAgIC8qKlxuICAgICAqIEFuIGluc3RhbmNlIG9mIHRoaXMgY2xhc3MgaXMgYSBkaWFsb2cgdGhhdCBoYW5kbGVzIHJlZGlyZWN0IGFuZCBjYXRlZ29yeSByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBjbGFzcyBBZmNyY0hlbHBlckRpYWxvZyBleHRlbmRzIE9PLnVpLlByb2Nlc3NEaWFsb2cge1xuICAgICAgICBwcml2YXRlIGFwaSA9IG5ldyBtdy5BcGkoKTtcblxuICAgICAgICBwcml2YXRlIHNjcmlwdE1lc3NhZ2UgPSAnIChbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL2FmY3JjLWhlbHBlcnxhZmNyYy1oZWxwZXJdXSknO1xuXG4gICAgICAgIHByaXZhdGUgcmVxdWVzdFBhZ2VUeXBlOiAncmVkaXJlY3QnIHwgJ2NhdGVnb3J5JztcbiAgICAgICAgcHJpdmF0ZSBwYWdlVGl0bGUhOiBzdHJpbmc7XG5cbiAgICAgICAgcHJpdmF0ZSByZWRpcmVjdFRlbXBsYXRlSXRlbXMhOiBPTy51aS5NZW51T3B0aW9uV2lkZ2V0W107XG5cbiAgICAgICAgcHJpdmF0ZSBiZWZvcmVUZXh0ITogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIHBhZ2VDb250ZW50ITogc3RyaW5nO1xuXG4gICAgICAgIHByaXZhdGUgcGFyc2VkUmVxdWVzdHM6IFJlZGlyZWN0UmVxdWVzdERhdGFbXSB8IENhdGVnb3J5UmVxdWVzdERhdGFbXSA9IFtdO1xuICAgICAgICBwcml2YXRlIGFjdGlvbnNUb1Rha2U6IFJlZGlyZWN0QWN0aW9ucyB8IENhdGVnb3J5QWN0aW9ucyA9IHt9O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHJlcXVlc3RQYWdlVHlwZTogJ3JlZGlyZWN0JyB8ICdjYXRlZ29yeScsIHBhZ2VUaXRsZTogc3RyaW5nKSB7XG4gICAgICAgICAgICBzdXBlcih7IHNpemU6ICdsYXJnZScgfSk7XG5cbiAgICAgICAgICAgIEFmY3JjSGVscGVyRGlhbG9nLnN0YXRpYy5uYW1lID0gJ0FmY3JjSGVscGVyRGlhbG9nJztcbiAgICAgICAgICAgIEFmY3JjSGVscGVyRGlhbG9nLnN0YXRpYy50aXRsZSA9ICdhZmNyYy1oZWxwZXInO1xuICAgICAgICAgICAgQWZjcmNIZWxwZXJEaWFsb2cuc3RhdGljLmFjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjYW5jZWwnLCBsYWJlbDogJ0Nsb3NlJywgZmxhZ3M6IFsnc2FmZScsICdjbG9zZSddIH0sXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzaG93LWFjdGlvbnMnLCBsYWJlbDogJ1Nob3cgYWN0aW9ucyB0byB0YWtlJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2F2ZScsIGxhYmVsOiAnUnVuJywgZmxhZ3M6IFsncHJpbWFyeScsICdwcm9ncmVzc2l2ZSddIH0sXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICB0aGlzLnBhZ2VUaXRsZSA9IHBhZ2VUaXRsZTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFBhZ2VUeXBlID0gcmVxdWVzdFBhZ2VUeXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0U2V0dXBQcm9jZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgbXcudXRpbC5hZGRDU1MoYFxuLmFmY3JjLWhlbHBlci1yZXF1ZXN0IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBtYXJnaW46IDEwcHg7XG4gICAgcGFkZGluZzogNXB4O1xufVxuXG4uYWZjcmMtaGVscGVyLXJlcXVlc3Qgc3VtbWFyeSB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uYWZjcmMtaGVscGVyLXJlcXVlc3QtaW5mbywgLmFmY3JjLWhlbHBlci1yZXF1ZXN0LXJlc3BvbmRlciB7XG4gICAgbWFyZ2luOiA1cHg7XG59XG5cbi5hZmNyYy1oZWxwZXItcmVxdWVzdC1pbmZvID4gZGl2LCAuYWZjcmMtaGVscGVyLXJlcXVlc3QtcmVzcG9uZGVyID4gZGl2IHtcbiAgICBtYXJnaW4tYmxvY2s6IDhweDtcbn1cblxuLmFmY3JjLWhlbHBlci1yZXF1ZXN0LXJlc3BvbmRlciA+IGRpdjpsYXN0LW9mLXR5cGUge1xuICAgIG1hcmdpbi1ib3R0b206IDA7XG59XG5cbi5hZmNyYy1oZWxwZXItcmVxdWVzdC1yZXNwb25kZXIgLm9vLXVpLWZpZWxkTGF5b3V0IHtcbiAgICBtYXJnaW4tbGVmdDogOHB4O1xufVxuXG4uYWZjcmMtaGVscGVyLWFjdGlvbi1yYWRpbyB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xufVxuXG4uYWZjcmMtaGVscGVyLWFjdGlvbi1yYWRpbyAub28tdWktcmFkaW9PcHRpb25XaWRnZXQge1xuICAgIGRpc3BsYXk6IGlubGluZTtcbiAgICBwYWRkaW5nOiA4cHg7XG59XG5cbi5hZmNyYy1jbG9zaW5nLXJlYXNvbi1pbnB1dCwgLmFmY3JjLWNvbW1lbnQtaW5wdXQge1xuICAgIG1heC13aWR0aDogNTAlO1xufWApO1xuXG4gICAgICAgICAgICByZXR1cm4gQWZjcmNIZWxwZXJEaWFsb2cuc3VwZXIucHJvdG90eXBlLmdldFNldHVwUHJvY2Vzc1xuICAgICAgICAgICAgICAgIC5jYWxsKHRoaXMpXG4gICAgICAgICAgICAgICAgLm5leHQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR2ZXJzaW9uOiAnMicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcDogJ3JldmlzaW9ucycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnZwcm9wOiAnY29udGVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnZzbG90czogJ21haW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlczogJ1VzZXI6RWVqaXQ0My9zY3JpcHRzL3JlZGlyZWN0LWhlbHBlci5qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRlbXBsYXRlSXRlbXMgPSBPYmplY3Qua2V5cyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSlNPTi5wYXJzZSgocmVzcG9uc2UgYXMgUGFnZVJldmlzaW9uc1Jlc3VsdCkucXVlcnkucGFnZXM/LlswXT8ucmV2aXNpb25zPy5bMF0/LnNsb3RzPy5tYWluPy5jb250ZW50IHx8ICd7fScpIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5tYXAoKHRhZykgPT4gbmV3IE9PLnVpLk1lbnVPcHRpb25XaWRnZXQoeyBkYXRhOiB0YWcsIGxhYmVsOiB0YWcgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAubmV4dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFwaVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHZlcnNpb246ICcyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wOiAncmV2aXNpb25zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydnByb3A6ICdjb250ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydnNsb3RzOiAnbWFpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGVzOiB0aGlzLnBhZ2VUaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQ29udGVudCA9IChyZXNwb25zZSBhcyBQYWdlUmV2aXNpb25zUmVzdWx0KS5xdWVyeS5wYWdlc1swXS5yZXZpc2lvbnNbMF0uc2xvdHMubWFpbi5jb250ZW50LnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VSZXF1ZXN0cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZElucHV0RWxlbWVudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGdldEFjdGlvblByb2Nlc3MgPSAoYWN0aW9uOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2FuY2VsJzoge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9PLnVpLlByb2Nlc3MoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRNYW5hZ2VyKCkuY2xvc2VXaW5kb3codGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdzaG93LWFjdGlvbnMnOiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT08udWkuUHJvY2VzcygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1BY3Rpb25zKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnc2F2ZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPTy51aS5Qcm9jZXNzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybUFjdGlvbnMoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gQWZjcmNIZWxwZXJEaWFsb2cuc3VwZXIucHJvdG90eXBlLmdldEFjdGlvblByb2Nlc3MuY2FsbCh0aGlzLCBhY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBnZXRUZWFyZG93blByb2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gQWZjcmNIZWxwZXJEaWFsb2cuc3VwZXIucHJvdG90eXBlLmdldFRlYXJkb3duUHJvY2Vzcy5jYWxsKHRoaXMpLm5leHQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmVtcHR5KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUGFyc2VzIHJlcXVlc3RzIGZyb20gdGhlIHBhZ2UgY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcGFyc2VSZXF1ZXN0cygpIHtcbiAgICAgICAgICAgIHRoaXMuYmVmb3JlVGV4dCA9IHRoaXMucGFnZUNvbnRlbnQubWF0Y2goL14oLio/KT09L3MpIVsxXTtcblxuICAgICAgICAgICAgdGhpcy5wYWdlQ29udGVudCA9IHRoaXMucGFnZUNvbnRlbnQucmVwbGFjZSgvXi4qPz09L3MsICc9PScpLnJlcGxhY2VBbGwobmV3IFJlZ0V4cChgXFxcXFtodHRwcz86JHttdy5jb25maWcuZ2V0KCd3Z1NlcnZlcicpfS8oLio/KV1gLCAnZycpLCAnW1skMV1dJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25zID0gWy4uLnRoaXMucGFnZUNvbnRlbnQubWF0Y2hBbGwoL149PS4qPz09JChcXHMqKD8hPT1bXj1dKS4qKSovZ2ltKV0ubWFwKChtYXRjaCkgPT4gbWF0Y2hbMF0pO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25UZXh0IG9mIHNlY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNDbG9zZWQgPSAve3thZmMtY1xcfC9pLnRlc3Qoc2VjdGlvblRleHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Nsb3NlZCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0gc2VjdGlvblRleHQubWF0Y2goL149PSguKj8pPT0kL20pIVsxXS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdFBhZ2VUeXBlID09PSAncmVkaXJlY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB7fSBhcyBSZWRpcmVjdFJlcXVlc3REYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlZFBhZ2VzID0gWy4uLnNlY3Rpb25IZWFkZXIubWF0Y2hBbGwoL1xcW1xcWyguKj8pXV0vZyldLm1hcCgobWF0Y2gpID0+IG1hdGNoWzFdLnRyaW0oKS5yZXBsYWNlKC9eOi8sICcnKS5yZXBsYWNlQWxsKCdfJywgJyAnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5wYWdlcyA9IHJlcXVlc3RlZFBhZ2VzO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFRhcmdldCA9IHNlY3Rpb25UZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAubWF0Y2goL1RhcmdldCBvZiByZWRpcmVjdDogP1xcW1xcWyguKj8pXV0vKT8uWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXjovLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlQWxsKCdfJywgJyAnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFRhcmdldCkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS50YXJnZXQgPSBwYXJzZWRUYXJnZXQ7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5yZWFzb24gPSBzZWN0aW9uVGV4dC5tYXRjaCgvcmVhc29uOiA/KC4qPylcXCpzb3VyY2UoPzogXFwoaWYgYXBwbGljYWJsZVxcKSk/Oi9pcykhWzFdLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICBwYXJzZWREYXRhLnNvdXJjZSA9IHNlY3Rpb25UZXh0Lm1hdGNoKC9zb3VyY2UoPzogXFwoaWYgYXBwbGljYWJsZVxcKSk/OiA/KC4qPykoPzo8cmVmZXJlbmNlcyBcXC8+fFxcbikvaXMpIVsxXS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVyID0gc2VjdGlvblRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXRjaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uVGV4dC5pbmNsdWRlcygnPHJlZmVyZW5jZXMgLz4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IC88cmVmZXJlbmNlcyBcXC8+XFxuKC4qKS9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgUmVnRXhwKGAoPzo8cmVmZXJlbmNlcyBcXFxcLz4ke3BhcnNlZERhdGEuc291cmNlID8gYHwke3BhcnNlZERhdGEuc291cmNlLnJlcGxhY2VBbGwoL1tcXHMjJCgpKissLj9bXFxcXFxcXV57fH0tXS9nLCAnXFxcXCQmJyl9YCA6ICcnfSlcXG4rKC4qKWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgKSFbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0YS5yZXF1ZXN0ZXIgPSB7IHR5cGU6IHJlcXVlc3Rlci5pbmNsdWRlcygnW1tVc2VyOicpID8gJ3VzZXInIDogJ2lwJywgbmFtZTogcmVxdWVzdGVyLm1hdGNoKC8oPzpTcGVjaWFsOkNvbnRyaWJ1dGlvbnNcXC98VXNlcjopKC4qPylcXHwvKSFbMV0udHJpbSgpIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRSZXF1ZXN0cy5wdXNoKHBhcnNlZERhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1RvVGFrZVtwYXJzZWREYXRhLnRhcmdldF0gPSBPYmplY3QuZnJvbUVudHJpZXMocmVxdWVzdGVkUGFnZXMubWFwKChwYWdlKSA9PiBbcGFnZSwgeyBvcmlnaW5hbFRleHQ6IHNlY3Rpb25UZXh0LnJlcGxhY2UoL149PS4qPz09JC9tLCAnJykudHJpbSgpLCBhY3Rpb246ICdub25lJyB9XSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSB7fSBhcyBSZWRpcmVjdFJlcXVlc3REYXRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2FkcyB0aGUgaW5wdXQgZWxlbWVudHMgaW4gdGhlIGRpYWxvZy5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgbG9hZElucHV0RWxlbWVudHMoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0UGFnZVR5cGUgPT09ICdyZWRpcmVjdCcpXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXF1ZXN0IG9mIHRoaXMucGFyc2VkUmVxdWVzdHMgYXMgUmVkaXJlY3RSZXF1ZXN0RGF0YVtdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbHNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGV0YWlscycpO1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhZmNyYy1oZWxwZXItcmVxdWVzdCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1bW1hcnlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3VtbWFyeScpO1xuICAgICAgICAgICAgICAgICAgICBzdW1tYXJ5RWxlbWVudC5pbm5lckhUTUwgPSByZXF1ZXN0LnBhZ2VzLm1hcCgocGFnZSkgPT4gYDxiPiR7cGFnZX08L2I+YCkuam9pbignLCAnKSArICcgXHUyMTkyICc7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtFbGVtZW50LnRhcmdldCA9ICdfYmxhbmsnO1xuICAgICAgICAgICAgICAgICAgICBsaW5rRWxlbWVudC5ocmVmID0gbXcudXRpbC5nZXRVcmwocmVxdWVzdC50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBsaW5rRWxlbWVudC50ZXh0Q29udGVudCA9IHJlcXVlc3QudGFyZ2V0O1xuXG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnlFbGVtZW50LmFwcGVuZChsaW5rRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuYXBwZW5kKHN1bW1hcnlFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0SW5mb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEluZm9FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FmY3JjLWhlbHBlci1yZXF1ZXN0LWluZm8nKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub25lRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICAgICAgbm9uZUVsZW1lbnQuc3R5bGUuY29sb3IgPSAnZGltZ3JheSc7XG4gICAgICAgICAgICAgICAgICAgIG5vbmVFbGVtZW50LnRleHRDb250ZW50ID0gJ05vbmUnO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYXNvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYXNvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICAgICAgICAgICAgICByZWFzb25MYWJlbC50ZXh0Q29udGVudCA9ICdSZWFzb246ICc7XG4gICAgICAgICAgICAgICAgICAgIHJlYXNvbkRpdi5hcHBlbmQocmVhc29uTGFiZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnJlYXNvbikgcmVhc29uRGl2LmFwcGVuZChyZXF1ZXN0LnJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgcmVhc29uRGl2LmFwcGVuZChub25lRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEluZm9FbGVtZW50LmFwcGVuZChyZWFzb25EaXYpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VMYWJlbC50ZXh0Q29udGVudCA9ICdTb3VyY2U6ICc7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZURpdi5hcHBlbmQoc291cmNlTGFiZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnNvdXJjZSkgc291cmNlRGl2LmFwcGVuZChyZXF1ZXN0LnNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Ugc291cmNlRGl2LmFwcGVuZChub25lRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEluZm9FbGVtZW50LmFwcGVuZChzb3VyY2VEaXYpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYicpO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZXJMYWJlbC50ZXh0Q29udGVudCA9ICdSZXF1ZXN0ZXI6ICc7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlckRpdi5hcHBlbmQocmVxdWVzdGVyTGFiZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RlckxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlckxpbmsudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlckxpbmsuaHJlZiA9IHJlcXVlc3QucmVxdWVzdGVyLnR5cGUgPT09ICd1c2VyJyA/IG13LnV0aWwuZ2V0VXJsKGBVc2VyOiR7cmVxdWVzdC5yZXF1ZXN0ZXIubmFtZX1gKSA6IG13LnV0aWwuZ2V0VXJsKGBTcGVjaWFsOkNvbnRyaWJ1dGlvbnMvJHtyZXF1ZXN0LnJlcXVlc3Rlci5uYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZXJMaW5rLnRleHRDb250ZW50ID0gcmVxdWVzdC5yZXF1ZXN0ZXIubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVyRGl2LmFwcGVuZChyZXF1ZXN0ZXJMaW5rKTtcblxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SW5mb0VsZW1lbnQuYXBwZW5kKHJlcXVlc3RlckRpdik7XG5cbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuYXBwZW5kKHJlcXVlc3RJbmZvRWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuYXBwZW5kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RSZXNwb25kZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RSZXNwb25kZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FmY3JjLWhlbHBlci1yZXF1ZXN0LXJlc3BvbmRlcicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmVxdWVzdGVkVGl0bGUgb2YgcmVxdWVzdC5wYWdlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkVGl0bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IHJlcXVlc3RlZFRpdGxlICsgJyBcdTIxOTIgJyArIHJlcXVlc3QudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkVGl0bGVEaXYuYXBwZW5kKGxhYmVsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aW9uUmFkaW9JbnB1dCA9IG5ldyBPTy51aS5SYWRpb1NlbGVjdFdpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NlczogWydhZmNyYy1oZWxwZXItYWN0aW9uLXJhZGlvJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFsnQWNjZXB0JywgJ0RlbnknLCAnQ29tbWVudCcsICdDbG9zZScsICdOb25lJ10ubWFwKChsYWJlbCkgPT4gbmV3IE9PLnVpLlJhZGlvT3B0aW9uV2lkZ2V0KHsgZGF0YTogbGFiZWwsIGxhYmVsIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uUmFkaW9JbnB1dC5zZWxlY3RJdGVtQnlMYWJlbCgnTm9uZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uUmFkaW9JbnB1dC5vbignY2hvb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9ICgoYWN0aW9uUmFkaW9JbnB1dC5maW5kU2VsZWN0ZWRJdGVtKCkgYXMgT08udWkuUmFkaW9PcHRpb25XaWRnZXQpLmdldERhdGEoKSBhcyBzdHJpbmcpLnRvTG93ZXJDYXNlKCkgYXMgQWN0aW9uVHlwZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aW9uc1RvVGFrZVtyZXF1ZXN0LnRhcmdldF1bcmVxdWVzdGVkVGl0bGVdLmFjdGlvbiA9IG9wdGlvbjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChbJ2NvbW1lbnQnLCAnY2xvc2UnXS5pbmNsdWRlcyhvcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRJbnB1dExheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IGNvbW1lbnRJbnB1dC5nZXRWYWx1ZSgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1lbnQpIHRoaXMuYWN0aW9uc1RvVGFrZVtyZXF1ZXN0LnRhcmdldF1bcmVxdWVzdGVkVGl0bGVdLmNvbW1lbnQgPSBjb21tZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGRlbGV0ZSB0aGlzLmFjdGlvbnNUb1Rha2VbcmVxdWVzdC50YXJnZXRdW3JlcXVlc3RlZFRpdGxlXS5jb21tZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRJbnB1dExheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuYWN0aW9uc1RvVGFrZVtyZXF1ZXN0LnRhcmdldF1bcmVxdWVzdGVkVGl0bGVdLmNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnU2VsZWN0TGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nUmVhc29uTGF5b3V0LiRlbGVtZW50LmhpZGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FjY2VwdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ1NlbGVjdExheW91dC4kZWxlbWVudC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgUmVkaXJlY3RBY3Rpb25zKVtyZXF1ZXN0LnRhcmdldF1bcmVxdWVzdGVkVGl0bGVdLnJlZGlyZWN0VGVtcGxhdGVzID0gdGFnU2VsZWN0LmdldFZhbHVlKCkgYXMgc3RyaW5nW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RlbnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZW55UmVhc29uTGF5b3V0LiRlbGVtZW50LnNob3coKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBSZWRpcmVjdEFjdGlvbnMpW3JlcXVlc3QudGFyZ2V0XVtyZXF1ZXN0ZWRUaXRsZV0uZGVueVJlYXNvbiA9IGRlbnlSZWFzb24uZ2V0VmFsdWUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2xvc2UnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nUmVhc29uTGF5b3V0LiRlbGVtZW50LnNob3coKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBjbG9zaW5nUmVhc29uLmdldE1lbnUoKS5maW5kU2VsZWN0ZWRJdGVtKCkgYXMgT08udWkuTWVudU9wdGlvbldpZGdldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgUmVkaXJlY3RBY3Rpb25zKVtyZXF1ZXN0LnRhcmdldF1bcmVxdWVzdGVkVGl0bGVdLmNsb3NpbmdSZWFzb24gPSB7IG5hbWU6IHNlbGVjdGVkLmdldExhYmVsKCkgYXMgc3RyaW5nLCBpZDogc2VsZWN0ZWQuZ2V0RGF0YSgpIGFzIHN0cmluZyB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdTZWxlY3QgPSBuZXcgT08udWkuTWVudVRhZ011bHRpc2VsZWN0V2lkZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd0FyYml0cmFyeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dSZW9yZGVyaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnU2VsZWN0LmdldE1lbnUoKS5hZGRJdGVtcyh0aGlzLnJlZGlyZWN0VGVtcGxhdGVJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAodGFnU2VsZWN0LmdldE1lbnUoKSBhcyBPTy51aS5NZW51U2VsZWN0V2lkZ2V0LkNvbmZpZ09wdGlvbnMpLmZpbHRlck1vZGUgPSAnc3Vic3RyaW5nJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ1NlbGVjdC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZFRhZ3MgPSAodGFnU2VsZWN0LmdldFZhbHVlKCkgYXMgc3RyaW5nW10pLnNvcnQoKGEsIGIpID0+IGEudG9Mb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKGIudG9Mb3dlckNhc2UoKSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0YWdTZWxlY3QuZ2V0VmFsdWUoKSBhcyBzdHJpbmdbXSkuam9pbignOycpICE9PSBzb3J0ZWRUYWdzLmpvaW4oJzsnKSkgdGFnU2VsZWN0LnNldFZhbHVlKHNvcnRlZFRhZ3MpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aW9uc1RvVGFrZSBhcyBSZWRpcmVjdEFjdGlvbnMpW3JlcXVlc3QudGFyZ2V0XVtyZXF1ZXN0ZWRUaXRsZV0ucmVkaXJlY3RUZW1wbGF0ZXMgPSBzb3J0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ1NlbGVjdExheW91dCA9IG5ldyBPTy51aS5GaWVsZExheW91dCh0YWdTZWxlY3QsIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogJ1JlZGlyZWN0IHRlbXBsYXRlcycgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdTZWxlY3RMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZW55UmVhc29uID0gbmV3IE9PLnVpLkNvbWJvQm94SW5wdXRXaWRnZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzZXM6IFsnYWZjcmMtY2xvc2luZy1yZWFzb24taW5wdXQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ2F1dG9maWxsOnVubGlrZWx5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnZXhpc3RzJywgJ2V4aXN0aW5nIHBhZ2VzJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnZW1wdHknLCAnZW1wdHkgc3VibWlzc2lvbnMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydub3RhcmdldCcsICdub25leGlzdGVudCBvciBubyBwcm92aWRlZCB0YXJnZXQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydub3RpdGxlJywgJ25vIHRpdGxlIHByb3ZpZGVkJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsndW5saWtlbHknLCAndW5saWtlbHkgcmVkaXJlY3RzJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnZXh0ZXJuYWxsaW5rJywgJ2V4dGVybmFsIGxpbmsgcmVkaXJlY3RzJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnZWRpdHJlcXVlc3QnLCAnZWRpdCByZXF1ZXN0cyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ25vdGVuZ2xpc2gnLCAncmVxdWVzdHMgbm90IGluIEVuZ2xpc2gnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLm1hcCgoW3ZhbHVlLCBsYWJlbF0pID0+ICh7IGRhdGE6IGBhdXRvZmlsbDoke3ZhbHVlfWAsIGxhYmVsOiBgQXV0b2ZpbGxlZCB0ZXh0IGZvciAke2xhYmVsfWAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZW55UmVhc29uLmdldE1lbnUoKS5vbignY2hvb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGlvbnNUb1Rha2UgYXMgUmVkaXJlY3RBY3Rpb25zKVtyZXF1ZXN0LnRhcmdldF1bcmVxdWVzdGVkVGl0bGVdLmRlbnlSZWFzb24gPSBkZW55UmVhc29uLmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbnlSZWFzb24uc2V0VmFsdWUoJ2F1dG9maWxsOnVubGlrZWx5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZW55UmVhc29uLmdldE1lbnUoKS5zZWxlY3RJdGVtQnlEYXRhKCdhdXRvZmlsbDp1bmxpa2VseScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZW55UmVhc29uTGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KGRlbnlSZWFzb24sIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogJ0RlbnkgcmVhc29uJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbnlSZWFzb25MYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9zaW5nUmVhc29uID0gbmV3IE9PLnVpLkRyb3Bkb3duV2lkZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbJ2FmY3JjLWNsb3NpbmctcmVhc29uLWlucHV0J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydObyByZXNwb25zZScsICdyJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ1N1Y2NlZWRlZCcsICdzJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbJ1dpdGhkcmF3bicsICd3J10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0ubWFwKChbdGl0bGUsIGlkXSkgPT4gbmV3IE9PLnVpLk1lbnVPcHRpb25XaWRnZXQoeyBkYXRhOiBpZCwgbGFiZWw6IHRpdGxlIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nUmVhc29uLmdldE1lbnUoKS5vbignY2hvb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gY2xvc2luZ1JlYXNvbi5nZXRNZW51KCkuZmluZFNlbGVjdGVkSXRlbSgpIGFzIE9PLnVpLk1lbnVPcHRpb25XaWRnZXQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hY3Rpb25zVG9UYWtlIGFzIFJlZGlyZWN0QWN0aW9ucylbcmVxdWVzdC50YXJnZXRdW3JlcXVlc3RlZFRpdGxlXS5jbG9zaW5nUmVhc29uID0geyBuYW1lOiBzZWxlY3RlZC5nZXRMYWJlbCgpIGFzIHN0cmluZywgaWQ6IHNlbGVjdGVkLmdldERhdGEoKSBhcyBzdHJpbmcgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ1JlYXNvbi5nZXRNZW51KCkuc2VsZWN0SXRlbUJ5TGFiZWwoJ05vIHJlc3BvbnNlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb3NpbmdSZWFzb25MYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoY2xvc2luZ1JlYXNvbiwgeyBhbGlnbjogJ2lubGluZScsIGxhYmVsOiAnQ2xvc2luZyByZWFzb24nIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ1JlYXNvbkxheW91dC4kZWxlbWVudC5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRJbnB1dCA9IG5ldyBPTy51aS5UZXh0SW5wdXRXaWRnZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRJbnB1dC5vbignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnQgPSBjb21tZW50SW5wdXQuZ2V0VmFsdWUoKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWVudCkgdGhpcy5hY3Rpb25zVG9UYWtlW3JlcXVlc3QudGFyZ2V0XVtyZXF1ZXN0ZWRUaXRsZV0uY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBkZWxldGUgdGhpcy5hY3Rpb25zVG9UYWtlW3JlcXVlc3QudGFyZ2V0XVtyZXF1ZXN0ZWRUaXRsZV0uY29tbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50SW5wdXRMYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoY29tbWVudElucHV0LCB7IGNsYXNzZXM6IFsnYWZjcmMtY29tbWVudC1pbnB1dCddLCBhbGlnbjogJ2lubGluZScsIGxhYmVsOiAnQ29tbWVudCcgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50SW5wdXRMYXlvdXQuJGVsZW1lbnQuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRUaXRsZURpdi5hcHBlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uUmFkaW9JbnB1dC4kZWxlbWVudFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdTZWxlY3RMYXlvdXQuJGVsZW1lbnRbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVueVJlYXNvbkxheW91dC4kZWxlbWVudFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nUmVhc29uTGF5b3V0LiRlbGVtZW50WzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRJbnB1dExheW91dC4kZWxlbWVudFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RSZXNwb25kZXJFbGVtZW50LmFwcGVuZChyZXF1ZXN0ZWRUaXRsZURpdik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzRWxlbWVudC5hcHBlbmQocmVxdWVzdFJlc3BvbmRlckVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmFwcGVuZChkZXRhaWxzRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmVxdWVzdCBvZiB0aGlzLnBhcnNlZFJlcXVlc3RzIGFzIENhdGVnb3J5UmVxdWVzdERhdGFbXSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RldGFpbHMnKTtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWZjcmMtaGVscGVyLXJlcXVlc3QnKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N1bW1hcnknKTtcbiAgICAgICAgICAgICAgICAgICAgc3VtbWFyeUVsZW1lbnQudGV4dENvbnRlbnQgPSByZXF1ZXN0Lm5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0VsZW1lbnQuYXBwZW5kKHN1bW1hcnlFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIHsgJGJvZHk6IEpRdWVyeSB9KS4kYm9keS5hcHBlbmQoZGV0YWlsc0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQZXJmb3JtcyBhbGwgYWN0aW9ucyBhbmQgbG9ncyB0aGVpciByZXN1bHRzLlxuICAgICAgICAgKiBAcGFyYW0gZHJ5UnVuIElmIHRydWUsIG5vIHBhZ2VzIHdpbGwgYmUgZWRpdGVkIG9yIGNyZWF0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGFzeW5jIHBlcmZvcm1BY3Rpb25zKGRyeVJ1bjogYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgdGVuc2UgPSBkcnlSdW4gPyAnd2lsbCBiZScgOiAnaGFzIGJlZW4nO1xuXG4gICAgICAgICAgICBjb25zdCB3aW5kb3dNYW5hZ2VyID0gbmV3IE9PLnVpLldpbmRvd01hbmFnZXIoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHdpbmRvd01hbmFnZXIuJGVsZW1lbnRbMF0pO1xuXG4gICAgICAgICAgICBjb25zdCBzaG93QWN0aW9uc0RpYWxvZyA9IG5ldyBTaG93QWN0aW9uc0RpYWxvZygpO1xuICAgICAgICAgICAgd2luZG93TWFuYWdlci5hZGRXaW5kb3dzKFtzaG93QWN0aW9uc0RpYWxvZ10pO1xuICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cub3BlbigpO1xuXG4gICAgICAgICAgICBjb25zdCBjb3VudHMgPSB7IGFjY2VwdGVkOiAwLCBkZW5pZWQ6IDAsIGNvbW1lbnRlZDogMCwgY2xvc2VkOiAwIH07XG4gICAgICAgICAgICBsZXQgbmV3UGFnZVRleHQgPSB0aGlzLmJlZm9yZVRleHQgKyB0aGlzLnBhZ2VDb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5yZXF1ZXN0UGFnZVR5cGUgPT09ICdyZWRpcmVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnlSZXF1ZXN0SGFuZGxlZCA9IE9iamVjdC52YWx1ZXModGhpcy5hY3Rpb25zVG9UYWtlKS5zb21lKChhY3Rpb25zKSA9PiBPYmplY3QudmFsdWVzKGFjdGlvbnMpLnNvbWUoKGFjdGlvbikgPT4gYWN0aW9uLmFjdGlvbiAhPT0gJ25vbmUnKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYW55UmVxdWVzdEhhbmRsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbdGFyZ2V0LCBhY3Rpb25zXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmFjdGlvbnNUb1Rha2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb21lUmVxdWVzdEFjY2VwdGVkRGVuaWVkID0gT2JqZWN0LnZhbHVlcyhhY3Rpb25zKS5zb21lKChhY3Rpb24pID0+IGFjdGlvbi5hY3Rpb24gPT09ICdhY2NlcHQnIHx8IGFjdGlvbi5hY3Rpb24gPT09ICdkZW55Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxSZXF1ZXN0c0FjY2VwdGVkRGVuaWVkID0gT2JqZWN0LnZhbHVlcyhhY3Rpb25zKS5ldmVyeSgoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnYWNjZXB0JyB8fCBhY3Rpb24uYWN0aW9uID09PSAnZGVueScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdENsb3NlUmVhc29uID0gT2JqZWN0LnZhbHVlcyhhY3Rpb25zIGFzIFJlY29yZDxzdHJpbmcsIFJlZGlyZWN0QWN0aW9uPikuZmluZCgoYWN0aW9uKSA9PiBhY3Rpb24uYWN0aW9uID09PSAnY2xvc2UnKT8uY2xvc2luZ1JlYXNvbj8uaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxSZXF1ZXN0c0Nsb3NlZCA9IE9iamVjdC52YWx1ZXMoYWN0aW9ucyBhcyBSZWNvcmQ8c3RyaW5nLCBSZWRpcmVjdEFjdGlvbj4pLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pID0+IGFjdGlvbi5hY3Rpb24gPT09ICdjbG9zZScgJiYgYWN0aW9uLmNsb3NpbmdSZWFzb24/LmlkID09PSBmaXJzdENsb3NlUmVhc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjZXB0ZWRQYWdlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVuaWVkUGFnZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3JlcXVlc3RlZFRpdGxlLCBhY3Rpb25dIG9mIE9iamVjdC5lbnRyaWVzKGFjdGlvbnMpIGFzIFtzdHJpbmcsIFJlZGlyZWN0QWN0aW9uXVtdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVByZWZpeCA9IGBUaGUgcmVxdWVzdCB0byBjcmVhdGUgXCIke3JlcXVlc3RlZFRpdGxlfVwiIFx1MjE5MiBcIiR7dGFyZ2V0fVwiICR7dGVuc2V9IGA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbWVudGVkTWVzc2FnZSA9IGFjdGlvbi5jb21tZW50ID8gJyBhbmQgY29tbWVudGVkIG9uJyA6ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24uYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FjY2VwdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb21lUmVxdWVzdEFjY2VwdGVkRGVuaWVkICYmICFhbGxSZXF1ZXN0c0FjY2VwdGVkRGVuaWVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KGBOb3QgYWxsIHJlcXVlc3RzIHRvIFwiJHt0YXJnZXR9XCIgd2VyZSBhY2NlcHRlZCBvciBkZW5pZWQsIHRoZSBoYW5kbGluZyBvZiBcIiR7cmVxdWVzdGVkVGl0bGV9XCIgd2lsbCBiZSBpZ25vcmVkLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkobWVzc2FnZVByZWZpeCArIGBhY2NlcHRlZCR7Y29tbWVudGVkTWVzc2FnZX0uYCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHRlZFBhZ2VzLnB1c2gocmVxdWVzdGVkVGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cy5hY2NlcHRlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdkZW55Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvbWVSZXF1ZXN0QWNjZXB0ZWREZW5pZWQgJiYgIWFsbFJlcXVlc3RzQWNjZXB0ZWREZW5pZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkoYE5vdCBhbGwgcmVxdWVzdHMgdG8gXCIke3RhcmdldH1cIiB3ZXJlIGFjY2VwdGVkIG9yIGRlbmllZCwgdGhlIGhhbmRsaW5nIG9mIFwiJHtyZXF1ZXN0ZWRUaXRsZX1cIiBpcyBiZWluZyBpZ25vcmVkLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FjdGlvbnNEaWFsb2cuYWRkTG9nRW50cnkobWVzc2FnZVByZWZpeCArICdkZW5pZWQuJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZW5pZWRQYWdlcy5wdXNoKFtyZXF1ZXN0ZWRUaXRsZSwgYWN0aW9uLmRlbnlSZWFzb24hIHx8ICdkZWNsaW5lJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cy5kZW5pZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29tbWVudCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24uY29tbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KG1lc3NhZ2VQcmVmaXggKyAnY29tbWVudGVkIG9uLicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudHMucHVzaChgWyR7cmVxdWVzdGVkVGl0bGV9IFx1MjE5MiAke3RhcmdldH1dICR7YWN0aW9uLmNvbW1lbnR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmNvbW1lbnRlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KG1lc3NhZ2VQcmVmaXggKyAnbWFya2VkIHRvIGJlIGNvbW1lbnRlZCBvbiwgYnV0IG5vIGNvbW1lbnQgd2FzIHByb3ZpZGVkLicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjbG9zZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxSZXF1ZXN0c0Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KG1lc3NhZ2VQcmVmaXggKyBgY2xvc2VkIGFzICR7YWN0aW9uLmNsb3NpbmdSZWFzb24hLm5hbWUudG9Mb3dlckNhc2UoKX0ke2NvbW1lbnRlZE1lc3NhZ2V9LmApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRzLmNsb3NlZCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHNob3dBY3Rpb25zRGlhbG9nLmFkZExvZ0VudHJ5KGBOb3QgYWxsIHJlcXVlc3RzIHRvIFwiJHt0YXJnZXR9XCIgd2VyZSBjbG9zZWQgd2l0aCB0aGUgc2FtZSByZWFzb24sIHRoZSBoYW5kbGluZyBvZiBcIiR7cmVxdWVzdGVkVGl0bGV9XCIgaXMgYmVpbmcgaWdub3JlZC5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VjdGlvblJlcGxhY2VUZXh0ID0gT2JqZWN0LnZhbHVlcyhhY3Rpb25zKVswXS5vcmlnaW5hbFRleHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21tZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvblJlcGxhY2VUZXh0ICs9ICdcXG4nICsgY29tbWVudHMubWFwKChjb21tZW50KSA9PiBgKiB7e0FmQyBjb21tZW50fDE9JHtjb21tZW50fX19IH5+fn5gKS5qb2luKCdcXG4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhZ2VUZXh0ID0gbmV3UGFnZVRleHQucmVwbGFjZShPYmplY3QudmFsdWVzKGFjdGlvbnMpWzBdLm9yaWdpbmFsVGV4dCwgc2VjdGlvblJlcGxhY2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvbWVSZXF1ZXN0QWNjZXB0ZWREZW5pZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2xvc2luZ0lkOiBzdHJpbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uVGV4dEJlZm9yZSA9IHNlY3Rpb25SZXBsYWNlVGV4dDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2NlcHRlZFBhZ2VzLmxlbmd0aCA+IDAgJiYgZGVuaWVkUGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nSWQgPSAncCc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwcGVkQWNjZXB0ZWRQYWdlcyA9IGFjY2VwdGVkUGFnZXMubWFwKChwYWdlKSA9PiBgKiB7e3N1YnN0OkFmQyByZWRpcmVjdH19IFske3BhZ2V9XSB+fn5+YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZERlbmllZFBhZ2VzID0gZGVuaWVkUGFnZXMubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFtwYWdlLCByZWFzb25dKSA9PiBgKiB7e3N1YnN0OkFmQyByZWRpcmVjdHwke3JlYXNvbi5zdGFydHNXaXRoKCdhdXRvZmlsbDonKSA/IHJlYXNvbi5yZXBsYWNlKCdhdXRvZmlsbDonLCAnJykgOiBgZGVjbGluZXwxPSR7cmVhc29ufWB9fX0gWyR7cGFnZX1dIH5+fn5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZHJ5UnVuKSBmb3IgKGNvbnN0IHBhZ2Ugb2YgYWNjZXB0ZWRQYWdlcykgdGhpcy5oYW5kbGVBY2NlcHRlZFJlZGlyZWN0KHBhZ2UsIGFjdGlvbnNbcGFnZV0sIHRhcmdldCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvblJlcGxhY2VUZXh0ICs9ICdcXG4nICsgbWFwcGVkQWNjZXB0ZWRQYWdlcy5qb2luKCdcXG4nKSArICdcXG4nICsgbWFwcGVkRGVuaWVkUGFnZXMuam9pbignXFxuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhZ2VUZXh0ID0gbmV3UGFnZVRleHQucmVwbGFjZShzZWN0aW9uVGV4dEJlZm9yZSwgc2VjdGlvblJlcGxhY2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFjY2VwdGVkUGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nSWQgPSAnYSc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkcnlSdW4pIGZvciAoY29uc3QgcGFnZSBvZiBhY2NlcHRlZFBhZ2VzKSB0aGlzLmhhbmRsZUFjY2VwdGVkUmVkaXJlY3QocGFnZSwgYWN0aW9uc1twYWdlXSwgdGFyZ2V0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uUmVwbGFjZVRleHQgKz0gYFxcbioge3tzdWJzdDpBZkMgcmVkaXJlY3Qke2FjY2VwdGVkUGFnZXMubGVuZ3RoID4gMSA/ICd8YWxsJyA6ICcnfX19IH5+fn5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYWdlVGV4dCA9IG5ld1BhZ2VUZXh0LnJlcGxhY2Uoc2VjdGlvblRleHRCZWZvcmUsIHNlY3Rpb25SZXBsYWNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ0lkID0gJ2QnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZFJlYXNvbnMgPSBkZW5pZWRQYWdlcy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoW3BhZ2UsIHJlYXNvbl0pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCoge3tzdWJzdDpBZkMgcmVkaXJlY3R8JHtyZWFzb24uc3RhcnRzV2l0aCgnYXV0b2ZpbGw6JykgPyByZWFzb24ucmVwbGFjZSgnYXV0b2ZpbGw6JywgJycpIDogYGRlY2xpbmV8MT0ke3JlYXNvbn1gfX19JHtkZW5pZWRQYWdlcy5sZW5ndGggPiAxID8gYCBbJHtwYWdlfV1gIDogJyd9IH5+fn5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25SZXBsYWNlVGV4dCArPSAnXFxuJyArIG1hcHBlZFJlYXNvbnMuam9pbignXFxuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhZ2VUZXh0ID0gbmV3UGFnZVRleHQucmVwbGFjZShzZWN0aW9uVGV4dEJlZm9yZSwgc2VjdGlvblJlcGxhY2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdQYWdlVGV4dCA9IG5ld1BhZ2VUZXh0LnJlcGxhY2Uoc2VjdGlvblJlcGxhY2VUZXh0LCBge3tBZkMtY3wke2Nsb3NpbmdJZH19fVxcbiR7c2VjdGlvblJlcGxhY2VUZXh0fVxcbnt7QWZDLWN8Yn19YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFsbFJlcXVlc3RzQ2xvc2VkKSBuZXdQYWdlVGV4dCA9IG5ld1BhZ2VUZXh0LnJlcGxhY2Uoc2VjdGlvblJlcGxhY2VUZXh0LCBge3tBZkMtY3wke2ZpcnN0Q2xvc2VSZWFzb259fX1cXG4ke3NlY3Rpb25SZXBsYWNlVGV4dH1cXG57e0FmQy1jfGJ9fWApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyeVJ1biB8fCB0aGlzLmJlZm9yZVRleHQgKyB0aGlzLnBhZ2VDb250ZW50ID09PSBuZXdQYWdlVGV4dCkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcHBlZENvdW50cyA9IE9iamVjdC5lbnRyaWVzKGNvdW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKFssIGNvdW50XSkgPT4gY291bnQgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoW2FjdGlvbiwgY291bnRdKSA9PiBgJHthY3Rpb259ICR7Y291bnR9YClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcsICcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBpLmVkaXQodGhpcy5wYWdlVGl0bGUsICgpID0+ICh7IHRleHQ6IG5ld1BhZ2VUZXh0LCBzdW1tYXJ5OiBgSGFuZGxpbmcgQWZDIHJlZGlyZWN0IHJlcXVlc3RzICgke21hcHBlZENvdW50c30pJHt0aGlzLnNjcmlwdE1lc3NhZ2V9YCB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBIYW5kbGVkICR7bWFwcGVkQ291bnRzfSByZWRpcmVjdCByZXF1ZXN0cywgcmVsb2FkaW5nLi4uYCk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBzaG93QWN0aW9uc0RpYWxvZy5hZGRMb2dFbnRyeShgTm8gcmVxdWVzdHMgJHtkcnlSdW4gPyAnd2lsbCBiZScgOiAnaGF2ZSBiZWVuJ30gaGFuZGxlZCFgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgaGFuZGxlQWNjZXB0ZWRSZWRpcmVjdChwYWdlOiBzdHJpbmcsIGRhdGE6IFJlZGlyZWN0QWN0aW9uLCB0YXJnZXQ6IHN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgbWFwcGVkVGFncyA9IGRhdGEucmVkaXJlY3RUZW1wbGF0ZXMgJiYgZGF0YS5yZWRpcmVjdFRlbXBsYXRlcy5sZW5ndGggPiAwID8gZGF0YS5yZWRpcmVjdFRlbXBsYXRlcz8ubWFwKCh0YWcpID0+IGB7eyR7dGFnfX19YCkuam9pbignXFxuJykgOiBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLmFwaS5jcmVhdGUoXG4gICAgICAgICAgICAgICAgcGFnZSxcbiAgICAgICAgICAgICAgICB7IHN1bW1hcnk6IGBDcmVhdGluZyByZWRpcmVjdCB0byBbWyR7dGFyZ2V0fV1dIGFzIHJlcXVlc3RlZCBhdCBbW1dQOkFGQy9SXV0ke3RoaXMuc2NyaXB0TWVzc2FnZX1gIH0sXG4gICAgICAgICAgICAgICAgYCNSRURJUkVDVCBbWyR7dGFyZ2V0fV1dJHttYXBwZWRUYWdzID8gYFxcblxcbnt7UmVkaXJlY3QgY2F0ZWdvcnkgc2hlbGx8XFxuJHttYXBwZWRUYWdzfVxcbn19YCA6ICcnfWAsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCB0YWxrTmFtZSA9IG13LlRpdGxlLm5ld0Zyb21UZXh0KHBhZ2UpIS5nZXRUYWxrUGFnZSgpIS5nZXRQcmVmaXhlZFRleHQoKTtcblxuICAgICAgICAgICAgdGhpcy5hcGkuY3JlYXRlKFxuICAgICAgICAgICAgICAgIHRhbGtOYW1lLFxuICAgICAgICAgICAgICAgIHsgc3VtbWFyeTogYFBsYWNpbmcgYmFubmVyIGZvciBbW1dpa2lwZWRpYTpXaWtpUHJvamVjdCBBcnRpY2xlcyBmb3IgY3JlYXRpb258V2lraVByb2plY3QgQXJ0aWNsZXMgZm9yIGNyZWF0aW9uXV0gJHt0aGlzLnNjcmlwdE1lc3NhZ2V9YCB9LFxuICAgICAgICAgICAgICAgIGB7e1dpa2lQcm9qZWN0IGJhbm5lciBzaGVsbHxjbGFzcz1SZWRpcmVjdHxcXG57e1dpa2lQcm9qZWN0IEFydGljbGVzIGZvciBjcmVhdGlvbnx0cz17e3N1YnN0OkxPQ0FMVElNRVNUQU1QfX18cmV2aWV3ZXI9JHttdy5jb25maWcuZ2V0KCd3Z1VzZXJOYW1lJyl9fX1cXG59fWAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbihBZmNyY0hlbHBlckRpYWxvZy5wcm90b3R5cGUsIE9PLnVpLlByb2Nlc3NEaWFsb2cucHJvdG90eXBlKTtcbn0pO1xuIl0sCiAgIm1hcHBpbmdzIjogImFBR0EsR0FBRyxPQUFPLE1BQU0sQ0FBQyxpQkFBa0IsZUFBZ0Isa0JBQW1CLGlCQUFpQixFQUFHLElBQU0sQ0FDNUYsTUFBTUEsRUFBd0IsR0FBRyxPQUFPLElBQUksWUFBWSxJQUFNLDRDQUN4REMsRUFBd0IsR0FBRyxPQUFPLElBQUksWUFBWSxJQUFNLDZDQUU5RCxHQUFJLENBQUNELEdBQXlCLENBQUNDLEVBQXVCLE9BRXRELE1BQU1DLEVBQWtCRixFQUF3QixXQUFhLFdBRWhELEdBQUcsS0FBSyxlQUFlLEdBQUcsT0FBTyxJQUFJLE1BQU0sSUFBTSxVQUFZLE9BQVMsYUFBYyxJQUFLLFVBQVVFLENBQWUscUJBQXNCLGNBQWMsRUFFOUosaUJBQWlCLFFBQVVDLEdBQVUsQ0FDdENBLEVBQU0sZUFBZSxFQUVyQixNQUFNQyxFQUFnQixJQUFJLEdBQUcsR0FBRyxjQUNoQyxTQUFTLEtBQUssT0FBT0EsRUFBYyxTQUFTLENBQUMsQ0FBQyxFQUU5QyxNQUFNQyxFQUFvQixJQUFJQyxFQUFrQkosRUFBaUIsR0FBRyxPQUFPLElBQUksWUFBWSxDQUFDLEVBRTVGRSxFQUFjLFdBQVcsQ0FBQ0MsQ0FBaUIsQ0FBQyxFQUU1Q0EsRUFBa0IsS0FBSyxDQUMzQixDQUFDLEVBRUQsTUFBTUUsVUFBMEIsR0FBRyxHQUFHLE1BQU8sQ0FJekMsYUFBYyxDQUNWLE1BQU0sQ0FBRSxLQUFNLFFBQVMsQ0FBQyxFQU01QixnQkFBYSxJQUFNLENBQ2YsR0FBRyxHQUFHLE9BQU8sVUFBVSxXQUFXLE1BQU0sSUFBSSxFQUU1QyxHQUFHLEtB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O0FBQUE7QUFBQTtBQUFBLEVBQW1DQSxDQUFVO0FBQUEsSUFBUyxFQUFFLEVBQ25HLEVBRUEsTUFBTUMsRUFBVyxHQUFHLE1BQU0sWUFBWS9ELENBQUksRUFBRyxZQUFZLEVBQUcsZ0JBQWdCLEVBRTVFLEtBQUssSUFBSSxPQUNMK0QsRUFDQSxDQUFFLFFBQVMsd0dBQXdHLEtBQUssYUFBYSxFQUFHLEVBQ3hJO0FBQUEsMkVBQXdILEdBQUcsT0FBTyxJQUFJLFlBQVksQ0FBQztBQUFBLEdBQ3ZKLENBQ0osQ0FDSixDQUVBLE9BQU8sT0FBT2hGLEVBQWtCLFVBQVcsR0FBRyxHQUFHLGNBQWMsU0FBUyxDQUM1RSxDQUFDIiwKICAibmFtZXMiOiBbImlzUmVkaXJlY3RSZXF1ZXN0UGFnZSIsICJpc0NhdGVnb3J5UmVxdWVzdFBhZ2UiLCAicmVxdWVzdFBhZ2VUeXBlIiwgImV2ZW50IiwgIndpbmRvd01hbmFnZXIiLCAiYWZjcmNIZWxwZXJEaWFsb2ciLCAiQWZjcmNIZWxwZXJEaWFsb2ciLCAiU2hvd0FjdGlvbnNEaWFsb2ciLCAiY2xvc2VCdXR0b24iLCAibWVzc2FnZSIsICJsb2dFbnRyeSIsICJwYWdlVGl0bGUiLCAicmVzcG9uc2UiLCAidGFnIiwgImFjdGlvbiIsICJzZWN0aW9ucyIsICJtYXRjaCIsICJzZWN0aW9uVGV4dCIsICJzZWN0aW9uSGVhZGVyIiwgInBhcnNlZERhdGEiLCAicmVxdWVzdGVkUGFnZXMiLCAicGFyc2VkVGFyZ2V0IiwgInJlcXVlc3RlciIsICJwYWdlIiwgInJlcXVlc3QiLCAiZGV0YWlsc0VsZW1lbnQiLCAic3VtbWFyeUVsZW1lbnQiLCAibGlua0VsZW1lbnQiLCAicmVxdWVzdEluZm9FbGVtZW50IiwgIm5vbmVFbGVtZW50IiwgInJlYXNvbkRpdiIsICJyZWFzb25MYWJlbCIsICJzb3VyY2VEaXYiLCAic291cmNlTGFiZWwiLCAicmVxdWVzdGVyRGl2IiwgInJlcXVlc3RlckxhYmVsIiwgInJlcXVlc3RlckxpbmsiLCAicmVxdWVzdFJlc3BvbmRlckVsZW1lbnQiLCAicmVxdWVzdGVkVGl0bGUiLCAicmVxdWVzdGVkVGl0bGVEaXYiLCAibGFiZWwiLCAiYWN0aW9uUmFkaW9JbnB1dCIsICJvcHRpb24iLCAiY29tbWVudElucHV0TGF5b3V0IiwgImNvbW1lbnQiLCAiY29tbWVudElucHV0IiwgInRhZ1NlbGVjdExheW91dCIsICJkZW55UmVhc29uTGF5b3V0IiwgImNsb3NpbmdSZWFzb25MYXlvdXQiLCAidGFnU2VsZWN0IiwgImRlbnlSZWFzb24iLCAic2VsZWN0ZWQiLCAiY2xvc2luZ1JlYXNvbiIsICJzb3J0ZWRUYWdzIiwgImEiLCAiYiIsICJ2YWx1ZSIsICJ0aXRsZSIsICJpZCIsICJkcnlSdW4iLCAidGVuc2UiLCAic2hvd0FjdGlvbnNEaWFsb2ciLCAiY291bnRzIiwgIm5ld1BhZ2VUZXh0IiwgImFjdGlvbnMiLCAidGFyZ2V0IiwgInNvbWVSZXF1ZXN0QWNjZXB0ZWREZW5pZWQiLCAiYWxsUmVxdWVzdHNBY2NlcHRlZERlbmllZCIsICJmaXJzdENsb3NlUmVhc29uIiwgImFsbFJlcXVlc3RzQ2xvc2VkIiwgImFjY2VwdGVkUGFnZXMiLCAiZGVuaWVkUGFnZXMiLCAiY29tbWVudHMiLCAibWVzc2FnZVByZWZpeCIsICJjb21tZW50ZWRNZXNzYWdlIiwgInNlY3Rpb25SZXBsYWNlVGV4dCIsICJjbG9zaW5nSWQiLCAic2VjdGlvblRleHRCZWZvcmUiLCAibWFwcGVkQWNjZXB0ZWRQYWdlcyIsICJtYXBwZWREZW5pZWRQYWdlcyIsICJyZWFzb24iLCAibWFwcGVkUmVhc29ucyIsICJtYXBwZWRDb3VudHMiLCAiY291bnQiLCAiZGF0YSIsICJtYXBwZWRUYWdzIiwgInRhbGtOYW1lIl0KfQo=
