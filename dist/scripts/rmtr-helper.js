// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/rmtr-helper.ts

"use strict";(()=>{mw.loader.using(["mediawiki.util"],()=>{if(mw.config.get("wgPageName")!=="Wikipedia:Requested_moves/Technical_requests")return;importStylesheet("User:Eejit43/scripts/rmtr-helper.css");let b=mw.config.get("wgNamespaceIds"),k=!1;mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-tb":"p-cactions","#","Review move requests","review-rmtr-requests").addEventListener("click",async S=>{if(S.preventDefault(),k)return document.querySelector("#rmtr-review-result")?.scrollIntoView();k=!0;let L=await T(),P=L.revid,N=L.slots.main.content,R=["Uncontroversial technical requests","Requests to revert undiscussed moves","Contested technical requests","Administrator needed"],I=R[2],j=R[3],o={};for(let a of R){let n=N.split(new RegExp(`={3,} ?${a} ?={3,}`))[1].split(/={3,}/m)[0].trim().match(/(?:\* ?\n)?[ *:]*{{rmassist\/core.+?(?=[ *:]*{{rmassist\/core|$)/gis);if(n)o[a]=n.map(i=>{i=i.trim();let c=i,s=i.replaceAll(/(?:\* ?\n)?[ *:]*{{rmassist\/core \||}}.*/gis,"").split(/\s*\|\s*/).map(r=>r.trim()),e=Object.fromEntries(s.map(r=>r.split(" = ").map(l=>l.trim())));return e.full=c,e.original=e[1]?.replace(/^\[+/,"").replace(/]+$/,"")??"UNKNOWN",e.destination=e[2]?.replace(/^\[+/,"").replace(/]+$/,"")??"UNKNOWN",delete e[1],delete e[2],e});else{o[a]=[];continue}}await Promise.all(Object.entries(o).map(async([,a])=>{await Promise.all(a.map(async t=>{let n=mw.Title.newFromText(t.original),i=mw.Title.newFromText(t.destination);if(!n)return mw.notify(`Invalid title "${t.original}"!`,{type:"error"});if(!i)return mw.notify(`Invalid title "${t.destination}"!`,{type:"error"});let c=!/[#<>[\]{|}]/.test(t.destination)&&i,s=document.createElement("span");s.classList.add("rmtr-review-invalid-warning"),s.textContent=`Invalid title "${t.destination}"!`;let e=![b.file,b.category].some(m=>n.getNamespaceId()===m||i.getNamespaceId()===m),r=document.createElement("span");r.classList.add("rmtr-review-invalid-warning"),r.textContent=`Warning: original or destination page is in namespace "${i.getNamespaceId()===b.file?"file":"category"}"!`;let l=await new mw.Api().parse(`[[:${t.original}]] \u2192 ${c?`[[:${t.destination}]]`:s.outerHTML} requested by ${t.requester?mw.util.isIPAddress(t.requester)?`[[Special:Contributions/${t.requester}|${t.requester}]]`:`[[User:${t.requester}|${t.requester}]]`:/(\[{2}Special:Contributions\/(.*?)\|\2]{2})/.exec(t.sig)?.[1]??"(unknown)"} with reasoning "${t.reason}"`),d=new DOMParser().parseFromString(l,"text/html"),f=document.createElement("li");f.innerHTML=d.querySelector("div.mw-parser-output").firstElementChild.innerHTML,e||f.append(r),t.element=f}))}));let g=document.createElement("div");g.id="rmtr-review-result";let x=document.createElement("div");x.id="rmtr-review-header",x.textContent="Technical move requests review",g.append(x);for(let[a,[t,n]]of Object.entries(o).entries()){let i=document.createElement("div");i.classList.add("rmtr-review-header"),i.textContent=t,g.append(i);let c=document.createElement("div");if(c.classList.add("rmtr-review-section-content"),n.length===0){let s=document.createElement("div");s.textContent="No requests in this section",c.append(s)}else{let s=document.createElement("ul");for(let[e,r]of n.entries()){let l=r.element,d=document.createElement("input");d.type="checkbox",d.classList.add("rmtr-review-request-checkbox"),d.id=`rmtr-review-remove-request-${a}-${e}`,d.addEventListener("change",()=>{d.checked?(o[t][e].result={remove:!0,reason:h.value},m.style.display="inline",p.disabled=!0):(delete o[t][e].result,m.style.display="none",p.disabled=!1)});let f=document.createElement("label");f.htmlFor=`rmtr-review-remove-request-${a}-${e}`,f.textContent="Remove request",l.append(d),l.append(f);let m=document.createElement("span");m.style.display="none",m.append(document.createTextNode(" as "));let h=document.createElement("select");t==="Contested technical requests"&&(h.value="Contested"),h.addEventListener("change",()=>{o[t][e].result.reason=h.value});let O=["Completed","Contested","Already done","Invalid page name","Incorrect venue","Withdrawn","Not done"];for(let y of O){let v=document.createElement("option");v.value=y,v.textContent=y,h.append(v)}m.append(h),l.append(m);let p=document.createElement("input");p.type="checkbox",p.classList.add("rmtr-review-request-checkbox"),p.id=`rmtr-review-move-request-${a}-${e}`,p.addEventListener("change",()=>{p.checked?(o[t][e].result={move:!0,section:q.value},u.style.display="inline",d.disabled=!0):(delete o[t][e].result,u.style.display="none",d.disabled=!1)});let C=document.createElement("label");C.htmlFor=`rmtr-review-move-request-${a}-${e}`,C.textContent="Switch section",l.append(p),l.append(C);let u=document.createElement("span");u.style.display="none",u.append(document.createTextNode(" to "));let q=document.createElement("select");q.addEventListener("change",()=>{o[t][e].result.section=q.value});for(let y of R){if(y===t)continue;let v=document.createElement("option");v.selected=y===(t===I?j:I),v.value=y,v.textContent=y,q.append(v)}u.append(q),u.append(document.createTextNode(" with reasoning "));let E=document.createElement("input");E.type="text",E.addEventListener("input",()=>{o[t][e].result.reason=E.value}),u.append(E),u.append(document.createTextNode(" (optional, automatically pings requestor and signs)")),l.append(u),s.append(l)}c.append(s)}g.append(c)}let w=document.createElement("button");w.id="rmtr-review-submit",w.textContent="Submit",w.addEventListener("click",async()=>{if((await T()).revid!==P)return mw.notify("rmtr-helper: An edit conflict occurred, please start over!",{type:"error"});w.disabled=!0,$.style.display="inline-block";let t=N,n={remove:{},move:{},total:0};for(let s of Object.values(o))for(let e of s)if(e.result){if("remove"in e.result)t=t.replace(e.full+`
`,"").replace(e.full,""),e.result.reason in n.remove||(n.remove[e.result.reason]=[]),n.remove[e.result.reason].push(e),n.total++;else if("move"in e.result){let r=R[R.indexOf(e.result.section)+1];t=t.replace(e.full+`
`,"").replace(e.full,""),t=t.replace(new RegExp(`(
?
?(?:={3,} ?${r} ?={3,}|$))`),`
${e.full}${e.result.reason?`
:: ${e.requester&&e.requester.length>0?mw.util.isIPAddress(e.requester)?"":`@[[User:${e.requester}|${e.requester}]] `:""} ${e.result.reason} ~~~~`:""}$1`),e.result.section in n.move||(n.move[e.result.section]=[]),n.move[e.result.section].push(e),n.total++}}if(n.total===0)return w.disabled=!1,$.style.display="none",mw.notify("No changes to make!",{type:"error"});let i=Object.values(o).every(s=>s.every(e=>e.result&&"remove"in e.result)),c=`Handled ${n.total} request${n.total>1?"s":""}: ${Object.entries(n.remove).length>0?`Removed ${Object.entries(n.remove).map(([s,e])=>`${e.map(r=>`[[${r.original}]]`).join(", ")} as ${s.toLowerCase()}`).join(", ")}`:""}${Object.entries(n.move).length>0?`${Object.entries(n.remove).length>0?", ":""}Moved ${Object.entries(n.move).map(([s,e])=>`${e.map(r=>`[[${r.original}]]`).join(", ")} to "${s}"`).join(", ")}`:""}${i?" (no requests remain)":""} (via [[User:Eejit43/scripts/rmtr-helper|script]])`;await new mw.Api().edit(mw.config.get("wgPageName"),()=>({text:t,summary:c})),mw.notify(`Successfully handled ${n.total} requests, reloading...`,{type:"success"}),window.location.reload()});let $=document.createElement("span");$.id="rmtr-review-loading",$.style.display="none",w.append($),g.append(w),mw.util.$content[0].prepend(g),g.scrollIntoView()})});async function T(){return(await new mw.Api().get({action:"query",formatversion:"2",prop:"revisions",rvprop:["content","ids"],rvslots:"main",titles:mw.config.get("wgPageName")})).query.pages[0].revisions[0]}})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy9ybXRyLWhlbHBlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHR5cGUgeyBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcyB9IGZyb20gJ3R5cGVzLW1lZGlhd2lraS9hcGlfcGFyYW1zJztcbmltcG9ydCB0eXBlIHsgUGFnZVJldmlzaW9uc1Jlc3VsdCB9IGZyb20gJy4uL2dsb2JhbC10eXBlcyc7XG5cbm13LmxvYWRlci51c2luZyhbJ21lZGlhd2lraS51dGlsJ10sICgpID0+IHtcbiAgICBpZiAobXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpICE9PSAnV2lraXBlZGlhOlJlcXVlc3RlZF9tb3Zlcy9UZWNobmljYWxfcmVxdWVzdHMnKSByZXR1cm47XG5cbiAgICBpbXBvcnRTdHlsZXNoZWV0KCdVc2VyOkVlaml0NDMvc2NyaXB0cy9ybXRyLWhlbHBlci5jc3MnKTtcblxuICAgIGNvbnN0IG5hbWVzcGFjZXMgPSBtdy5jb25maWcuZ2V0KCd3Z05hbWVzcGFjZUlkcycpO1xuXG4gICAgbGV0IGRpc3BsYXllZCA9IGZhbHNlO1xuXG4gICAgY29uc3QgbGluayA9IG13LnV0aWwuYWRkUG9ydGxldExpbmsoXG4gICAgICAgIG13LmNvbmZpZy5nZXQoJ3NraW4nKSA9PT0gJ21pbmVydmEnID8gJ3AtdGInIDogJ3AtY2FjdGlvbnMnLFxuICAgICAgICAnIycsXG4gICAgICAgICdSZXZpZXcgbW92ZSByZXF1ZXN0cycsXG4gICAgICAgICdyZXZpZXctcm10ci1yZXF1ZXN0cycsXG4gICAgKSE7XG5cbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKGRpc3BsYXllZCkgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNybXRyLXJldmlldy1yZXN1bHQnKT8uc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICAgICAgZWxzZSBkaXNwbGF5ZWQgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IHBhZ2VSZXZpc2lvbiA9IGF3YWl0IGdldFBhZ2VSZXZpc2lvbigpO1xuXG4gICAgICAgIGNvbnN0IHJldklkID0gcGFnZVJldmlzaW9uLnJldmlkO1xuICAgICAgICBjb25zdCBwYWdlQ29udGVudCA9IHBhZ2VSZXZpc2lvbi5zbG90cy5tYWluLmNvbnRlbnQ7XG5cbiAgICAgICAgY29uc3Qgc2VjdGlvbnMgPSBbXG4gICAgICAgICAgICAnVW5jb250cm92ZXJzaWFsIHRlY2huaWNhbCByZXF1ZXN0cycsXG4gICAgICAgICAgICAnUmVxdWVzdHMgdG8gcmV2ZXJ0IHVuZGlzY3Vzc2VkIG1vdmVzJyxcbiAgICAgICAgICAgICdDb250ZXN0ZWQgdGVjaG5pY2FsIHJlcXVlc3RzJyxcbiAgICAgICAgICAgICdBZG1pbmlzdHJhdG9yIG5lZWRlZCcsXG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdFNlY3Rpb24gPSBzZWN0aW9uc1syXTtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tEZWZhdWx0U2VjdGlvbiA9IHNlY3Rpb25zWzNdO1xuXG4gICAgICAgIGludGVyZmFjZSBSZXF1ZXN0IHtcbiAgICAgICAgICAgIHNpZzogc3RyaW5nO1xuICAgICAgICAgICAgcmVxdWVzdGVyPzogc3RyaW5nO1xuICAgICAgICAgICAgcmVhc29uOiBzdHJpbmc7XG4gICAgICAgICAgICBmdWxsOiBzdHJpbmc7XG4gICAgICAgICAgICBvcmlnaW5hbDogc3RyaW5nO1xuICAgICAgICAgICAgZGVzdGluYXRpb246IHN0cmluZztcbiAgICAgICAgICAgIGVsZW1lbnQ6IEhUTUxMSUVsZW1lbnQ7XG4gICAgICAgICAgICByZXN1bHQ/OiBSZXF1ZXN0UmVzdWx0TW92ZSB8IFJlcXVlc3RSZXN1bHRSZW1vdmU7XG4gICAgICAgIH1cblxuICAgICAgICBpbnRlcmZhY2UgUmVxdWVzdFJlc3VsdE1vdmUge1xuICAgICAgICAgICAgbW92ZTogYm9vbGVhbjtcbiAgICAgICAgICAgIHNlY3Rpb246IHN0cmluZztcbiAgICAgICAgICAgIHJlYXNvbj86IHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGludGVyZmFjZSBSZXF1ZXN0UmVzdWx0UmVtb3ZlIHtcbiAgICAgICAgICAgIHJlbW92ZTogYm9vbGVhbjtcbiAgICAgICAgICAgIHJlYXNvbjogc3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYWxsUmVxdWVzdHM6IFJlY29yZDxzdHJpbmcsIFJlcXVlc3RbXT4gPSB7fTtcblxuICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygc2VjdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25Db250ZW50ID0gcGFnZUNvbnRlbnRcbiAgICAgICAgICAgICAgICAuc3BsaXQobmV3IFJlZ0V4cChgPXszLH0gPyR7c2VjdGlvbn0gPz17Myx9YCkpWzFdXG4gICAgICAgICAgICAgICAgLnNwbGl0KC89ezMsfS9tKVswXVxuICAgICAgICAgICAgICAgIC50cmltKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRSZXF1ZXN0cyA9IHNlY3Rpb25Db250ZW50Lm1hdGNoKC8oPzpcXCogP1xcbik/WyAqOl0qe3tybWFzc2lzdFxcL2NvcmUuKz8oPz1bICo6XSp7e3JtYXNzaXN0XFwvY29yZXwkKS9naXMpO1xuXG4gICAgICAgICAgICBpZiAobWF0Y2hlZFJlcXVlc3RzKVxuICAgICAgICAgICAgICAgIGFsbFJlcXVlc3RzW3NlY3Rpb25dID0gbWF0Y2hlZFJlcXVlc3RzLm1hcCgocmVxdWVzdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ID0gcmVxdWVzdC50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGwgPSByZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gcmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2VBbGwoLyg/OlxcKiA/XFxuKT9bICo6XSp7e3JtYXNzaXN0XFwvY29yZSBcXHx8fX0uKi9naXMsICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KC9cXHMqXFx8XFxzKi8pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChwYXJhbWV0ZXIpID0+IHBhcmFtZXRlci50cmltKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsUGFyYW1ldGVycyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMubWFwKChwYXJhbWV0ZXIpID0+IHBhcmFtZXRlci5zcGxpdCgnID0gJykubWFwKCh2YWx1ZSkgPT4gdmFsdWUudHJpbSgpKSksXG4gICAgICAgICAgICAgICAgICAgICkgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPjtcblxuICAgICAgICAgICAgICAgICAgICBmaW5hbFBhcmFtZXRlcnMuZnVsbCA9IGZ1bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgZmluYWxQYXJhbWV0ZXJzLm9yaWdpbmFsID0gZmluYWxQYXJhbWV0ZXJzWzFdPy5yZXBsYWNlKC9eXFxbKy8sICcnKS5yZXBsYWNlKC9dKyQvLCAnJykgPz8gJ1VOS05PV04nO1xuICAgICAgICAgICAgICAgICAgICBmaW5hbFBhcmFtZXRlcnMuZGVzdGluYXRpb24gPSBmaW5hbFBhcmFtZXRlcnNbMl0/LnJlcGxhY2UoL15cXFsrLywgJycpLnJlcGxhY2UoL10rJC8sICcnKSA/PyAnVU5LTk9XTic7XG5cbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsUGFyYW1ldGVyc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGZpbmFsUGFyYW1ldGVyc1syXTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmluYWxQYXJhbWV0ZXJzIGFzIHVua25vd24gYXMgUmVxdWVzdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFsbFJlcXVlc3RzW3NlY3Rpb25dID0gW107XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGFsbFJlcXVlc3RzKS5tYXAoYXN5bmMgKFssIHJlcXVlc3RzXSkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0cy5tYXAoYXN5bmMgKHJlcXVlc3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG13T2xkVGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dChyZXF1ZXN0Lm9yaWdpbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG13TmV3VGl0bGUgPSBtdy5UaXRsZS5uZXdGcm9tVGV4dChyZXF1ZXN0LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtd09sZFRpdGxlKSByZXR1cm4gbXcubm90aWZ5KGBJbnZhbGlkIHRpdGxlIFwiJHtyZXF1ZXN0Lm9yaWdpbmFsfVwiIWAsIHsgdHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbXdOZXdUaXRsZSkgcmV0dXJuIG13Lm5vdGlmeShgSW52YWxpZCB0aXRsZSBcIiR7cmVxdWVzdC5kZXN0aW5hdGlvbn1cIiFgLCB7IHR5cGU6ICdlcnJvcicgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbGlkVGl0bGUgPSAhL1sjPD5bXFxde3x9XS8udGVzdChyZXF1ZXN0LmRlc3RpbmF0aW9uKSAmJiBtd05ld1RpdGxlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkVGl0bGVXYXJuaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW52YWxpZFRpdGxlV2FybmluZy5jbGFzc0xpc3QuYWRkKCdybXRyLXJldmlldy1pbnZhbGlkLXdhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRUaXRsZVdhcm5pbmcudGV4dENvbnRlbnQgPSBgSW52YWxpZCB0aXRsZSBcIiR7cmVxdWVzdC5kZXN0aW5hdGlvbn1cIiFgO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxpZE5hbWVzcGFjZSA9ICFbbmFtZXNwYWNlcy5maWxlLCBuYW1lc3BhY2VzLmNhdGVnb3J5XS5zb21lKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuYW1lc3BhY2UpID0+IG13T2xkVGl0bGUuZ2V0TmFtZXNwYWNlSWQoKSA9PT0gbmFtZXNwYWNlIHx8IG13TmV3VGl0bGUuZ2V0TmFtZXNwYWNlSWQoKSA9PT0gbmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZE5hbWVzcGFjZVdhcm5pbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkTmFtZXNwYWNlV2FybmluZy5jbGFzc0xpc3QuYWRkKCdybXRyLXJldmlldy1pbnZhbGlkLXdhcm5pbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWROYW1lc3BhY2VXYXJuaW5nLnRleHRDb250ZW50ID0gYFdhcm5pbmc6IG9yaWdpbmFsIG9yIGRlc3RpbmF0aW9uIHBhZ2UgaXMgaW4gbmFtZXNwYWNlIFwiJHttd05ld1RpdGxlLmdldE5hbWVzcGFjZUlkKCkgPT09IG5hbWVzcGFjZXMuZmlsZSA/ICdmaWxlJyA6ICdjYXRlZ29yeSd9XCIhYDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkV2lraXRleHQgPSBhd2FpdCBuZXcgbXcuQXBpKCkucGFyc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFtbOiR7cmVxdWVzdC5vcmlnaW5hbH1dXSBcdTIxOTIgJHt2YWxpZFRpdGxlID8gYFtbOiR7cmVxdWVzdC5kZXN0aW5hdGlvbn1dXWAgOiBpbnZhbGlkVGl0bGVXYXJuaW5nLm91dGVySFRNTH0gcmVxdWVzdGVkIGJ5ICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3QucmVxdWVzdGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG13LnV0aWwuaXNJUEFkZHJlc3MocmVxdWVzdC5yZXF1ZXN0ZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgW1tTcGVjaWFsOkNvbnRyaWJ1dGlvbnMvJHtyZXF1ZXN0LnJlcXVlc3Rlcn18JHtyZXF1ZXN0LnJlcXVlc3Rlcn1dXWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGBbW1VzZXI6JHtyZXF1ZXN0LnJlcXVlc3Rlcn18JHtyZXF1ZXN0LnJlcXVlc3Rlcn1dXWBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKC8oXFxbezJ9U3BlY2lhbDpDb250cmlidXRpb25zXFwvKC4qPylcXHxcXDJdezJ9KS8uZXhlYyhyZXF1ZXN0LnNpZyk/LlsxXSA/PyAnKHVua25vd24pJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IHdpdGggcmVhc29uaW5nIFwiJHtyZXF1ZXN0LnJlYXNvbn1cImAsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkSHRtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocGFyc2VkV2lraXRleHQsICd0ZXh0L2h0bWwnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVsZW1lbnQuaW5uZXJIVE1MID0gcGFyc2VkSHRtbC5xdWVyeVNlbGVjdG9yKCdkaXYubXctcGFyc2VyLW91dHB1dCcpIS5maXJzdEVsZW1lbnRDaGlsZCEuaW5uZXJIVE1MITtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWxpZE5hbWVzcGFjZSkgcmVxdWVzdEVsZW1lbnQuYXBwZW5kKGludmFsaWROYW1lc3BhY2VXYXJuaW5nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5lbGVtZW50ID0gcmVxdWVzdEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBvdXRwdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG91dHB1dEVsZW1lbnQuaWQgPSAncm10ci1yZXZpZXctcmVzdWx0JztcblxuICAgICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaGVhZGVyLmlkID0gJ3JtdHItcmV2aWV3LWhlYWRlcic7XG4gICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9ICdUZWNobmljYWwgbW92ZSByZXF1ZXN0cyByZXZpZXcnO1xuXG4gICAgICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kKGhlYWRlcik7XG5cbiAgICAgICAgZm9yIChjb25zdCBbc2VjdGlvbkluZGV4LCBbc2VjdGlvbiwgcmVxdWVzdHNdXSBvZiBPYmplY3QuZW50cmllcyhhbGxSZXF1ZXN0cykuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBzZWN0aW9uSGVhZGVyLmNsYXNzTGlzdC5hZGQoJ3JtdHItcmV2aWV3LWhlYWRlcicpO1xuICAgICAgICAgICAgc2VjdGlvbkhlYWRlci50ZXh0Q29udGVudCA9IHNlY3Rpb247XG5cbiAgICAgICAgICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kKHNlY3Rpb25IZWFkZXIpO1xuXG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgc2VjdGlvbkNvbnRlbnQuY2xhc3NMaXN0LmFkZCgncm10ci1yZXZpZXctc2VjdGlvbi1jb250ZW50Jyk7XG5cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub1JlcXVlc3RzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgbm9SZXF1ZXN0cy50ZXh0Q29udGVudCA9ICdObyByZXF1ZXN0cyBpbiB0aGlzIHNlY3Rpb24nO1xuXG4gICAgICAgICAgICAgICAgc2VjdGlvbkNvbnRlbnQuYXBwZW5kKG5vUmVxdWVzdHMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0c0xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbcmVxdWVzdEluZGV4LCByZXF1ZXN0XSBvZiByZXF1ZXN0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdEVsZW1lbnQgPSByZXF1ZXN0LmVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlUmVxdWVzdENoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdENoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0Q2hlY2tib3guY2xhc3NMaXN0LmFkZCgncm10ci1yZXZpZXctcmVxdWVzdC1jaGVja2JveCcpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0Q2hlY2tib3guaWQgPSBgcm10ci1yZXZpZXctcmVtb3ZlLXJlcXVlc3QtJHtzZWN0aW9uSW5kZXh9LSR7cmVxdWVzdEluZGV4fWA7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVJlcXVlc3RDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlUmVxdWVzdENoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxSZXF1ZXN0c1tzZWN0aW9uXVtyZXF1ZXN0SW5kZXhdLnJlc3VsdCA9IHsgcmVtb3ZlOiB0cnVlLCByZWFzb246IHJlbW92ZVJlcXVlc3REcm9wZG93bi52YWx1ZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVJlcXVlc3RFeHRyYUlucHV0cy5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFsbFJlcXVlc3RzW3NlY3Rpb25dW3JlcXVlc3RJbmRleF0ucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVJlcXVlc3RFeHRyYUlucHV0cy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25DaGVja2JveC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVSZXF1ZXN0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0TGFiZWwuaHRtbEZvciA9IGBybXRyLXJldmlldy1yZW1vdmUtcmVxdWVzdC0ke3NlY3Rpb25JbmRleH0tJHtyZXF1ZXN0SW5kZXh9YDtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdExhYmVsLnRleHRDb250ZW50ID0gJ1JlbW92ZSByZXF1ZXN0JztcblxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0RWxlbWVudC5hcHBlbmQocmVtb3ZlUmVxdWVzdENoZWNrYm94KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVsZW1lbnQuYXBwZW5kKHJlbW92ZVJlcXVlc3RMYWJlbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlUmVxdWVzdEV4dHJhSW5wdXRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0RXh0cmFJbnB1dHMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0RXh0cmFJbnB1dHMuYXBwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgYXMgJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZVJlcXVlc3REcm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbiA9PT0gJ0NvbnRlc3RlZCB0ZWNobmljYWwgcmVxdWVzdHMnKSByZW1vdmVSZXF1ZXN0RHJvcGRvd24udmFsdWUgPSAnQ29udGVzdGVkJztcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdERyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIChhbGxSZXF1ZXN0c1tzZWN0aW9uXVtyZXF1ZXN0SW5kZXhdLnJlc3VsdCBhcyBSZXF1ZXN0UmVzdWx0UmVtb3ZlKS5yZWFzb24gPSByZW1vdmVSZXF1ZXN0RHJvcGRvd24udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZVJlcXVlc3REcm9wZG93bk9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZXN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0FscmVhZHkgZG9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnSW52YWxpZCBwYWdlIG5hbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0luY29ycmVjdCB2ZW51ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnV2l0aGRyYXduJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdOb3QgZG9uZScsXG4gICAgICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2YgcmVtb3ZlUmVxdWVzdERyb3Bkb3duT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudC52YWx1ZSA9IG9wdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBvcHRpb247XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVJlcXVlc3REcm9wZG93bi5hcHBlbmQob3B0aW9uRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0RXh0cmFJbnB1dHMuYXBwZW5kKHJlbW92ZVJlcXVlc3REcm9wZG93bik7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVsZW1lbnQuYXBwZW5kKHJlbW92ZVJlcXVlc3RFeHRyYUlucHV0cyk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3dpdGNoU2VjdGlvbkNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uQ2hlY2tib3guY2xhc3NMaXN0LmFkZCgncm10ci1yZXZpZXctcmVxdWVzdC1jaGVja2JveCcpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uQ2hlY2tib3guaWQgPSBgcm10ci1yZXZpZXctbW92ZS1yZXF1ZXN0LSR7c2VjdGlvbkluZGV4fS0ke3JlcXVlc3RJbmRleH1gO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN3aXRjaFNlY3Rpb25DaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFsbFJlcXVlc3RzW3NlY3Rpb25dW3JlcXVlc3RJbmRleF0ucmVzdWx0IGFzIFJlcXVlc3RSZXN1bHRNb3ZlKSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbjogc3dpdGNoU2VjdGlvbkRyb3Bkb3duLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkV4dHJhSW5wdXRzLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXF1ZXN0Q2hlY2tib3guZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgYWxsUmVxdWVzdHNbc2VjdGlvbl1bcmVxdWVzdEluZGV4XS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkV4dHJhSW5wdXRzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVxdWVzdENoZWNrYm94LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN3aXRjaFNlY3Rpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25MYWJlbC5odG1sRm9yID0gYHJtdHItcmV2aWV3LW1vdmUtcmVxdWVzdC0ke3NlY3Rpb25JbmRleH0tJHtyZXF1ZXN0SW5kZXh9YDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkxhYmVsLnRleHRDb250ZW50ID0gJ1N3aXRjaCBzZWN0aW9uJztcblxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0RWxlbWVudC5hcHBlbmQoc3dpdGNoU2VjdGlvbkNoZWNrYm94KTtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEVsZW1lbnQuYXBwZW5kKHN3aXRjaFNlY3Rpb25MYWJlbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3dpdGNoU2VjdGlvbkV4dHJhSW5wdXRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMuYXBwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgdG8gJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN3aXRjaFNlY3Rpb25Ecm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgKGFsbFJlcXVlc3RzW3NlY3Rpb25dW3JlcXVlc3RJbmRleF0ucmVzdWx0IGFzIFJlcXVlc3RSZXN1bHRNb3ZlKS5zZWN0aW9uID0gc3dpdGNoU2VjdGlvbkRyb3Bkb3duLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBzZWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbiA9PT0gc2VjdGlvbikgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuc2VsZWN0ZWQgPSBvcHRpb24gPT09IChzZWN0aW9uID09PSBkZWZhdWx0U2VjdGlvbiA/IGZhbGxiYWNrRGVmYXVsdFNlY3Rpb24gOiBkZWZhdWx0U2VjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LnZhbHVlID0gb3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkRyb3Bkb3duLmFwcGVuZChvcHRpb25FbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25FeHRyYUlucHV0cy5hcHBlbmQoc3dpdGNoU2VjdGlvbkRyb3Bkb3duKTtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMuYXBwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgd2l0aCByZWFzb25pbmcgJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN3aXRjaFNlY3Rpb25SZWFzb25pbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uUmVhc29uaW5nLnR5cGUgPSAndGV4dCc7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaFNlY3Rpb25SZWFzb25pbmcuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoYWxsUmVxdWVzdHNbc2VjdGlvbl1bcmVxdWVzdEluZGV4XS5yZXN1bHQgYXMgUmVxdWVzdFJlc3VsdFJlbW92ZSkucmVhc29uID0gc3dpdGNoU2VjdGlvblJlYXNvbmluZy52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoU2VjdGlvbkV4dHJhSW5wdXRzLmFwcGVuZChzd2l0Y2hTZWN0aW9uUmVhc29uaW5nKTtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMuYXBwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgKG9wdGlvbmFsLCBhdXRvbWF0aWNhbGx5IHBpbmdzIHJlcXVlc3RvciBhbmQgc2lnbnMpJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RFbGVtZW50LmFwcGVuZChzd2l0Y2hTZWN0aW9uRXh0cmFJbnB1dHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RzTGlzdC5hcHBlbmQocmVxdWVzdEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNlY3Rpb25Db250ZW50LmFwcGVuZChyZXF1ZXN0c0xpc3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvdXRwdXRFbGVtZW50LmFwcGVuZChzZWN0aW9uQ29udGVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgc3VibWl0QnV0dG9uLmlkID0gJ3JtdHItcmV2aWV3LXN1Ym1pdCc7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTdWJtaXQnO1xuICAgICAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdQYWdlUmV2aXNpb24gPSBhd2FpdCBnZXRQYWdlUmV2aXNpb24oKTtcblxuICAgICAgICAgICAgaWYgKG5ld1BhZ2VSZXZpc2lvbi5yZXZpZCAhPT0gcmV2SWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG13Lm5vdGlmeSgncm10ci1oZWxwZXI6IEFuIGVkaXQgY29uZmxpY3Qgb2NjdXJyZWQsIHBsZWFzZSBzdGFydCBvdmVyIScsIHsgdHlwZTogJ2Vycm9yJyB9KTtcblxuICAgICAgICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGxvYWRpbmdTcGlubmVyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcblxuICAgICAgICAgICAgbGV0IGVuZFJlc3VsdCA9IHBhZ2VDb250ZW50O1xuXG4gICAgICAgICAgICBpbnRlcmZhY2UgQWxsQ2hhbmdlcyB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlOiBSZWNvcmQ8c3RyaW5nLCBSZXF1ZXN0W10+O1xuICAgICAgICAgICAgICAgIG1vdmU6IFJlY29yZDxzdHJpbmcsIFJlcXVlc3RbXT47XG4gICAgICAgICAgICAgICAgdG90YWw6IG51bWJlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY2hhbmdlczogQWxsQ2hhbmdlcyA9IHsgcmVtb3ZlOiB7fSwgbW92ZToge30sIHRvdGFsOiAwIH07XG5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBPYmplY3QudmFsdWVzKGFsbFJlcXVlc3RzKSlcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2Ygc2VjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3QucmVzdWx0KSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoJ3JlbW92ZScgaW4gcmVxdWVzdC5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFJlc3VsdCA9IGVuZFJlc3VsdC5yZXBsYWNlKHJlcXVlc3QuZnVsbCArICdcXG4nLCAnJykucmVwbGFjZShyZXF1ZXN0LmZ1bGwsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcXVlc3QucmVzdWx0LnJlYXNvbiBpbiBjaGFuZ2VzLnJlbW92ZSkpIGNoYW5nZXMucmVtb3ZlW3JlcXVlc3QucmVzdWx0LnJlYXNvbl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMucmVtb3ZlW3JlcXVlc3QucmVzdWx0LnJlYXNvbl0ucHVzaChyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMudG90YWwrKztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgnbW92ZScgaW4gcmVxdWVzdC5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25UaXRsZUFmdGVyID0gc2VjdGlvbnNbc2VjdGlvbnMuaW5kZXhPZihyZXF1ZXN0LnJlc3VsdC5zZWN0aW9uKSArIDFdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRSZXN1bHQgPSBlbmRSZXN1bHQucmVwbGFjZShyZXF1ZXN0LmZ1bGwgKyAnXFxuJywgJycpLnJlcGxhY2UocmVxdWVzdC5mdWxsLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRSZXN1bHQgPSBlbmRSZXN1bHQucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKGAoXFxuP1xcbj8oPzo9ezMsfSA/JHtzZWN0aW9uVGl0bGVBZnRlcn0gPz17Myx9fCQpKWApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcXG4ke3JlcXVlc3QuZnVsbH0ke3JlcXVlc3QucmVzdWx0LnJlYXNvbiA/IGBcXG46OiAke3JlcXVlc3QucmVxdWVzdGVyICYmIHJlcXVlc3QucmVxdWVzdGVyLmxlbmd0aCA+IDAgPyAobXcudXRpbC5pc0lQQWRkcmVzcyhyZXF1ZXN0LnJlcXVlc3RlcikgPyAnJyA6IGBAW1tVc2VyOiR7cmVxdWVzdC5yZXF1ZXN0ZXJ9fCR7cmVxdWVzdC5yZXF1ZXN0ZXJ9XV0gYCkgOiAnJ30gJHtyZXF1ZXN0LnJlc3VsdC5yZWFzb259IH5+fn5gIDogJyd9JDFgLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcXVlc3QucmVzdWx0LnNlY3Rpb24gaW4gY2hhbmdlcy5tb3ZlKSkgY2hhbmdlcy5tb3ZlW3JlcXVlc3QucmVzdWx0LnNlY3Rpb25dID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMubW92ZVtyZXF1ZXN0LnJlc3VsdC5zZWN0aW9uXS5wdXNoKHJlcXVlc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy50b3RhbCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hhbmdlcy50b3RhbCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGxvYWRpbmdTcGlubmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG13Lm5vdGlmeSgnTm8gY2hhbmdlcyB0byBtYWtlIScsIHsgdHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgbm9SZW1haW5pbmcgPSBPYmplY3QudmFsdWVzKGFsbFJlcXVlc3RzKS5ldmVyeSgoc2VjdGlvbikgPT5cbiAgICAgICAgICAgICAgICBzZWN0aW9uLmV2ZXJ5KChyZXF1ZXN0KSA9PiByZXF1ZXN0LnJlc3VsdCAmJiAncmVtb3ZlJyBpbiByZXF1ZXN0LnJlc3VsdCksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBlZGl0U3VtbWFyeSA9IGBIYW5kbGVkICR7Y2hhbmdlcy50b3RhbH0gcmVxdWVzdCR7Y2hhbmdlcy50b3RhbCA+IDEgPyAncycgOiAnJ306ICR7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoY2hhbmdlcy5yZW1vdmUpLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBgUmVtb3ZlZCAke09iamVjdC5lbnRyaWVzKGNoYW5nZXMucmVtb3ZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbcmVhc29uLCBwYWdlc10pID0+IGAke3BhZ2VzLm1hcCgocGFnZSkgPT4gYFtbJHtwYWdlLm9yaWdpbmFsfV1dYCkuam9pbignLCAnKX0gYXMgJHtyZWFzb24udG9Mb3dlckNhc2UoKX1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignLCAnKX1gXG4gICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgIH0ke1xuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGNoYW5nZXMubW92ZSkubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICA/IGAke09iamVjdC5lbnRyaWVzKGNoYW5nZXMucmVtb3ZlKS5sZW5ndGggPiAwID8gJywgJyA6ICcnfU1vdmVkICR7T2JqZWN0LmVudHJpZXMoY2hhbmdlcy5tb3ZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbZGVzdGluYXRpb24sIHBhZ2VzXSkgPT4gYCR7cGFnZXMubWFwKChwYWdlKSA9PiBgW1ske3BhZ2Uub3JpZ2luYWx9XV1gKS5qb2luKCcsICcpfSB0byBcIiR7ZGVzdGluYXRpb259XCJgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignLCAnKX1gXG4gICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgIH0ke25vUmVtYWluaW5nID8gJyAobm8gcmVxdWVzdHMgcmVtYWluKScgOiAnJ30gKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL3JtdHItaGVscGVyfHNjcmlwdF1dKWA7XG5cbiAgICAgICAgICAgIGF3YWl0IG5ldyBtdy5BcGkoKS5lZGl0KG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSwgKCkgPT4gKHsgdGV4dDogZW5kUmVzdWx0LCBzdW1tYXJ5OiBlZGl0U3VtbWFyeSB9KSk7XG5cbiAgICAgICAgICAgIG13Lm5vdGlmeShgU3VjY2Vzc2Z1bGx5IGhhbmRsZWQgJHtjaGFuZ2VzLnRvdGFsfSByZXF1ZXN0cywgcmVsb2FkaW5nLi4uYCwgeyB0eXBlOiAnc3VjY2VzcycgfSk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbG9hZGluZ1NwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGxvYWRpbmdTcGlubmVyLmlkID0gJ3JtdHItcmV2aWV3LWxvYWRpbmcnO1xuICAgICAgICBsb2FkaW5nU3Bpbm5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5hcHBlbmQobG9hZGluZ1NwaW5uZXIpO1xuXG4gICAgICAgIG91dHB1dEVsZW1lbnQuYXBwZW5kKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICAgICAgbXcudXRpbC4kY29udGVudFswXS5wcmVwZW5kKG91dHB1dEVsZW1lbnQpO1xuXG4gICAgICAgIG91dHB1dEVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICB9KTtcbn0pO1xuXG4vKipcbiAqIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgYSB3aWtpIHBhZ2UncyBsYXRlc3QgcmV2aXNpb24uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFBhZ2VSZXZpc2lvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAoYXdhaXQgbmV3IG13LkFwaSgpLmdldCh7XG4gICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICBmb3JtYXR2ZXJzaW9uOiAnMicsXG4gICAgICAgICAgICBwcm9wOiAncmV2aXNpb25zJyxcbiAgICAgICAgICAgIHJ2cHJvcDogWydjb250ZW50JywgJ2lkcyddLFxuICAgICAgICAgICAgcnZzbG90czogJ21haW4nLFxuICAgICAgICAgICAgdGl0bGVzOiBtdy5jb25maWcuZ2V0KCd3Z1BhZ2VOYW1lJyksXG4gICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKSkgYXMgUGFnZVJldmlzaW9uc1Jlc3VsdFxuICAgICkucXVlcnkhLnBhZ2VzWzBdLnJldmlzaW9uc1swXTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7OzttQkFHQSxHQUFHLE9BQU8sTUFBTSxDQUFDLGdCQUFn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SUFBS0MsR0FBUyxLQUFLQSxFQUFLLFFBQVEsSUFBSSxFQUFFLEtBQUssSUFBSSxDQUFDLFFBQVFDLENBQVcsR0FBRyxFQUM3RyxLQUFLLElBQUksQ0FBQyxHQUNmLEVBQ1YsR0FBR0wsRUFBYyx3QkFBMEIsRUFBRSxxREFFN0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUFFLEtBQUssR0FBRyxPQUFPLElBQUksWUFBWSxFQUFHLEtBQU8sQ0FBRSxLQUFNSCxFQUFXLFFBQVNJLENBQVksRUFBRSxFQUV0RyxHQUFHLE9BQU8sd0JBQXdCSCxFQUFRLEtBQUssMEJBQTJCLENBQUUsS0FBTSxTQUFVLENBQUMsRUFFN0YsT0FBTyxTQUFTLE9BQU8sQ0FDM0IsQ0FBQyxFQUVELElBQU1GLEVBQWlCLFNBQVMsY0FBYyxNQUFNLEVBQ3BEQSxFQUFlLEdBQUssc0JBQ3BCQSxFQUFlLE1BQU0sUUFBVSxPQUUvQkQsRUFBYSxPQUFPQyxDQUFjLEVBRWxDckIsRUFBYyxPQUFPb0IsQ0FBWSxFQUVqQyxHQUFHLEtBQUssU0FBUyxDQUFDLEVBQUUsUUFBUXBCLENBQWEsRUFFekNBLEVBQWMsZUFBZSxDQUNqQyxDQUFDLENBQ0wsQ0FBQyxFQUtELGVBQWUxQixHQUFrQixDQUM3QixPQUNLLE1BQU0sSUFBSSxHQUFHLElBQUksRUFBRSxJQUFJLENBQ3BCLE9BQVEsUUFDUixjQUFlLElBQ2YsS0FBTSxZQUNOLE9BQVEsQ0FBQyxVQUFXLEtBQUssRUFDekIsUUFBUyxPQUNULE9BQVEsR0FBRyxPQUFPLElBQUksWUFBWSxDQUN0QyxDQUFtQyxHQUNyQyxNQUFPLE1BQU0sQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUNqQyIsCiAgIm5hbWVzIjogWyJuYW1lc3BhY2VzIiwgImRpc3BsYXllZCIsICJldmVudCIsICJwYWdlUmV2aXNpb24iLCAiZ2V0UGFnZVJldmlzaW9uIiwgInJldklkIiwgInBhZ2VDb250ZW50IiwgInNlY3Rpb25zIiwgImRlZmF1bHRTZWN0aW9uIiwgImZhbGxiYWNrRGVmYXVsdFNlY3Rpb24iLCAiYWxsUmVxdWVzdHMiLCAic2VjdGlvbiIsICJtYXRjaGVkUmVxdWVzdHMiLCAicmVxdWVzdCIsICJmdWxsIiwgInBhcmFtZXRlcnMiLCAicGFyYW1ldGVyIiwgImZpbmFsUGFyYW1ldGVycyIsICJ2YWx1ZSIsICJyZXF1ZXN0cyIsICJtd09sZFRpdGxlIiwgIm13TmV3VGl0bGUiLCAidmFsaWRUaXRsZSIsICJpbnZhbGlkVGl0bGVXYXJuaW5nIiwgInZhbGlkTmFtZXNwYWNlIiwgIm5hbWVzcGFjZSIsICJpbnZhbGlkTmFtZXNwYWNlV2FybmluZyIsICJwYXJzZWRXaWtpdGV4dCIsICJwYXJzZWRIdG1sIiwgInJlcXVlc3RFbGVtZW50IiwgIm91dHB1dEVsZW1lbnQiLCAiaGVhZGVyIiwgInNlY3Rpb25JbmRleCIsICJzZWN0aW9uSGVhZGVyIiwgInNlY3Rpb25Db250ZW50IiwgIm5vUmVxdWVzdHMiLCAicmVxdWVzdHNMaXN0IiwgInJlcXVlc3RJbmRleCIsICJyZW1vdmVSZXF1ZXN0Q2hlY2tib3giLCAicmVtb3ZlUmVxdWVzdERyb3Bkb3duIiwgInJlbW92ZVJlcXVlc3RFeHRyYUlucHV0cyIsICJzd2l0Y2hTZWN0aW9uQ2hlY2tib3giLCAicmVtb3ZlUmVxdWVzdExhYmVsIiwgInJlbW92ZVJlcXVlc3REcm9wZG93bk9wdGlvbnMiLCAib3B0aW9uIiwgIm9wdGlvbkVsZW1lbnQiLCAic3dpdGNoU2VjdGlvbkRyb3Bkb3duIiwgInN3aXRjaFNlY3Rpb25FeHRyYUlucHV0cyIsICJzd2l0Y2hTZWN0aW9uTGFiZWwiLCAic3dpdGNoU2VjdGlvblJlYXNvbmluZyIsICJzdWJtaXRCdXR0b24iLCAibG9hZGluZ1NwaW5uZXIiLCAiZW5kUmVzdWx0IiwgImNoYW5nZXMiLCAic2VjdGlvblRpdGxlQWZ0ZXIiLCAibm9SZW1haW5pbmciLCAiZWRpdFN1bW1hcnkiLCAicmVhc29uIiwgInBhZ2VzIiwgInBhZ2UiLCAiZGVzdGluYXRpb24iXQp9Cg==
