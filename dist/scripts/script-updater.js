// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/script-updater.ts

"use strict";(()=>{mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui-widgets","oojs-ui-windows"],()=>{if(mw.config.get("wgUserName")!=="Eejit43"||mw.config.get("wgPageName")!=="User:Eejit43")return;let m=document.querySelector(".mw-editsection").cloneNode(!0),o=document.createElement("a");o.href="#",o.style.fontWeight="bold",o.textContent="Sync from GitHub",o.addEventListener("click",h=>{h.preventDefault();let e=new OO.ui.WindowManager;document.body.append(e.$element[0]);let t=new i;e.addWindows([t]),t.open()}),m.querySelector("a").replaceWith(o),document.querySelector("h2#My_user_scripts + .mw-editsection").after(m);class i extends OO.ui.ProcessDialog{repoOwner="Eejit43";repoName="wikipedia-scripts";content;checkboxElements=[];latestCommitHash;scripts;constructor(){super({size:"medium"}),i.static.name="ScriptUpdaterDialog",i.static.title="What scripts do you want to update?",i.static.actions=[{action:"cancel",label:"Close",flags:["safe","close"]},{action:"save",label:"Run",flags:["primary","progressive"]}]}getSetupProcess=()=>i.super.prototype.getSetupProcess.call(this).next(()=>this.wrapAsyncMethod(this.loadScriptData).then(e=>{if(e){let t=new OO.ui.MessageWidget({type:"error",label:e});this.content=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.content.$element.append(t.$element),this.$body.append(this.content.$element),this.getActions().setAbilities({save:!1});return}this.content=new OO.ui.PanelLayout({padded:!0,expanded:!1});for(let t of this.scripts){let s=new OO.ui.CheckboxInputWidget;this.checkboxElements.push([t.name,s]);let a=new OO.ui.FieldLayout(s,{align:"inline",label:t.name});this.content.$element.append(a.$element)}this.$body.append(this.content.$element)}));getActionProcess=e=>e==="cancel"?new OO.ui.Process(()=>{this.getManager().closeWindow(this)}):e==="save"?new OO.ui.Process(()=>{let t=[];for(let[s,a]of this.checkboxElements)a.isSelected()&&t.push(this.scripts.find(r=>r.name===s));this.getManager().closeWindow(this),(async()=>(mw.notify("Syncing scripts...",{tag:"sync-scripts-notification"}),await Promise.all(t.map(s=>this.handleScript(s))),await this.editOrCreate("User:Eejit43/scripts-info",[this.mapScripts(this.scripts.filter(s=>!s.personal&&!s.fork)),"","=== Forks ===",this.mapScripts(this.scripts.filter(s=>s.fork)),"","=== Personal scripts ===",this.mapScripts(this.scripts.filter(s=>s.personal))].join(`
`),"Syncing script list from GitHub"),mw.notify(`Synced ${t.length} script${t.length===1?"":"s"} from GitHub!`,{type:"success",tag:"sync-scripts-notification"})))()}):i.super.prototype.getActionProcess.call(this,e);getTeardownProcess=()=>i.super.prototype.getTeardownProcess.call(this).next(()=>{this.$body.empty()});wrapAsyncMethod(e){let t=$.Deferred();return e().then(s=>t.resolve(s)),t.promise()}loadScriptData=async()=>{let e=await fetch(`https://api.github.com/repos/${this.repoOwner}/${this.repoName}/commits`);if(!e.ok)return`Failed to fetch latest commit hash from GitHub: ${e.statusText} (${e.status})`;this.latestCommitHash=(await e.json())[0].sha;let t=await fetch(`https://raw.githubusercontent.com/${this.repoOwner}/${this.repoName}/${this.latestCommitHash}/scripts.json`);if(!t.ok)return`Failed to fetch script data from GitHub: ${t.statusText} (${t.status})`;this.scripts=await t.json()};async handleScript(e){let t=`User:Eejit43/scripts/${e.name}`,s=`User talk:Eejit43/scripts/${e.name}`,a=`${t}.js`,r=`${t}.css`,u=["{{User:Eejit43/script-documentation",e.image===!1?`| image             = ${e.image}`:null,e["in-development"]?`| in-development    = ${e["in-development"]}`:null,e["use-instead"]?`| use-instead       = ${e["use-instead"].includes("User:")?e["use-instead"]:`[[User:Eejit43/scripts/${e["use-instead"]}|${e["use-instead"]}]]`}`:null,e["image-caption"]?`| image-caption     = ${e["image-caption"]}`:null,e["other-authors"]?`| other-authors     = ${e["other-authors"].map(n=>`[[User:${n}|${n}]]`).join(", ")}`:null,`| description-short = ${e["short-description"]}`,`| description       = ${e.description}`,e.usage?`| usage             = ${e.usage}`:null,e.configuration?`| configuration     = ${e.configuration}`:null,e.changelog?`| changelog         = 
${Object.entries(e.changelog).map(([n,l])=>`* '''{{start date and age|${n}}}:'''${Array.isArray(l)?`
${l.map(g=>`** ${g}`).join(`
`)}`:` ${l}`}`).join(`
`)}`:null,`| skin-support      = {{User:Eejit43/script-documentation/skin-support|${Object.entries(e["skin-support"]).map(([n,l])=>`${n}=${l}`).join("|")}}}`,`| released          = {{start date and age|${e.released}}}`,`| updated           = {{start date and age|${e.updated}}}`,"}}"].filter(Boolean),c=null,p=await fetch(`https://raw.githubusercontent.com/${this.repoOwner}/${this.repoName}/${this.latestCommitHash}/dist/scripts/${e.name}.js`);if(p.ok)c=await p.text();else return mw.notify(`Failed to fetch "${e.name}.js" from GitHub: ${p.statusText} (${p.status})`,{type:"error",tag:"sync-scripts-notification"});let d=null;if(e.css){let n=await fetch(`https://raw.githubusercontent.com/${this.repoOwner}/${this.repoName}/${this.latestCommitHash}/dist/styles/${e.name}.css`);n.ok?d=await n.text():mw.notify(`Failed to fetch "${e.name}.css" from GitHub: ${n.statusText} (${n.status})`,{type:"error",tag:"sync-scripts-notification"})}e.personal||(await this.editOrCreate(t,u.join(`
`),"Syncing script documentation from GitHub"),await this.editOrCreate(s,"#REDIRECT [[User talk:Eejit43]]","Redirecting script documentation talk page to main user talk page")),c&&await this.editOrCreate(a,c,"Syncing script from GitHub"),e.css&&d&&await this.editOrCreate(r,d,"Syncing styles from GitHub")}mapScripts(e){return e.map(t=>`* [[User:Eejit43/scripts/${t.name}${t.personal?".js":""}|${t.name}]] - ${t["short-description"]||t.description}${t["in-development"]?' (<span style="color: #bd2828">in development</span>)':""}${t["use-instead"]?' (<span style="color: #bd2828">deprecated</span>)':""}`).join(`
`)}async editOrCreate(e,t,s){s+=" (via [[User:Eejit43/scripts/script-updater.js|script]])",await new mw.Api().edit(e,()=>({text:t,summary:s,watchlist:"watch"})).catch(async(a,r)=>{if(a==="nocreate-missing")await new mw.Api().create(e,{summary:s,watchlist:"watch"},t).catch((u,c)=>{mw.notify(`Error creating ${e}: ${c?.error.info??"Unknown error"} (${u})`,{type:"error"})});else{mw.notify(`Error editing or creating ${e}: ${r?.error.info??"Unknown error"} (${a})`,{type:"error"});return}})}}Object.assign(i.prototype,OO.ui.ProcessDialog.prototype)});})();

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy9zY3JpcHQtdXBkYXRlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHR5cGUgeyBNZWRpYVdpa2lEYXRhRXJyb3IgfSBmcm9tICcuLi9nbG9iYWwtdHlwZXMnO1xuXG5pbnRlcmZhY2UgU2NyaXB0IHtcbiAgICAnbmFtZSc6IHN0cmluZztcbiAgICAnaW4tZGV2ZWxvcG1lbnQnPzogYm9vbGVhbjtcbiAgICAndXNlLWluc3RlYWQnPzogc3RyaW5nO1xuICAgICdpbWFnZSc/OiBmYWxzZTtcbiAgICAnaW1hZ2UtY2FwdGlvbic/OiBzdHJpbmc7XG4gICAgJ3Nob3J0LWRlc2NyaXB0aW9uJzogc3RyaW5nO1xuICAgICdkZXNjcmlwdGlvbic6IHN0cmluZztcbiAgICAndXNhZ2UnPzogc3RyaW5nO1xuICAgICdjb25maWd1cmF0aW9uJz86IHN0cmluZztcbiAgICAnY2hhbmdlbG9nJz86IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPjtcbiAgICAnb3RoZXItYXV0aG9ycyc/OiBzdHJpbmdbXTtcbiAgICAnZm9yayc/OiB0cnVlO1xuICAgICdwZXJzb25hbCc/OiB0cnVlO1xuICAgICdza2luLXN1cHBvcnQnOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcbiAgICAncmVsZWFzZWQnOiBzdHJpbmc7XG4gICAgJ3VwZGF0ZWQnOiBzdHJpbmc7XG4gICAgJ2Nzcyc/OiB0cnVlO1xufVxuXG5tdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCcsICdvb2pzLXVpLWNvcmUnLCAnb29qcy11aS13aWRnZXRzJywgJ29vanMtdWktd2luZG93cyddLCAoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnVXNlck5hbWUnKSAhPT0gJ0Vlaml0NDMnIHx8IG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSAhPT0gJ1VzZXI6RWVqaXQ0MycpIHJldHVybjtcblxuICAgIGNvbnN0IGZ1bGxMaW5rRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tdy1lZGl0c2VjdGlvbicpIS5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFNwYW5FbGVtZW50O1xuXG4gICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBsaW5rLmhyZWYgPSAnIyc7XG4gICAgbGluay5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgIGxpbmsudGV4dENvbnRlbnQgPSAnU3luYyBmcm9tIEdpdEh1Yic7XG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHdpbmRvd01hbmFnZXIgPSBuZXcgT08udWkuV2luZG93TWFuYWdlcigpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh3aW5kb3dNYW5hZ2VyLiRlbGVtZW50WzBdKTtcblxuICAgICAgICBjb25zdCBzY3JpcHRVcGRhdGVyRGlhbG9nID0gbmV3IFNjcmlwdFVwZGF0ZXJEaWFsb2coKTtcbiAgICAgICAgd2luZG93TWFuYWdlci5hZGRXaW5kb3dzKFtzY3JpcHRVcGRhdGVyRGlhbG9nXSk7XG5cbiAgICAgICAgc2NyaXB0VXBkYXRlckRpYWxvZy5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBmdWxsTGlua0VsZW1lbnQucXVlcnlTZWxlY3RvcignYScpIS5yZXBsYWNlV2l0aChsaW5rKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyI015X3VzZXJfc2NyaXB0cyArIC5tdy1lZGl0c2VjdGlvbicpIS5hZnRlcihmdWxsTGlua0VsZW1lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcyBpcyBhIGRpYWxvZyB0aGF0IG1hbmFnZXMgdXBkYXRpbmcgc2NyaXB0cy5cbiAgICAgKi9cbiAgICBjbGFzcyBTY3JpcHRVcGRhdGVyRGlhbG9nIGV4dGVuZHMgT08udWkuUHJvY2Vzc0RpYWxvZyB7XG4gICAgICAgIHByaXZhdGUgcmVwb093bmVyID0gJ0Vlaml0NDMnO1xuICAgICAgICBwcml2YXRlIHJlcG9OYW1lID0gJ3dpa2lwZWRpYS1zY3JpcHRzJztcblxuICAgICAgICBwcml2YXRlIGNvbnRlbnQhOiBPTy51aS5QYW5lbExheW91dDtcbiAgICAgICAgcHJpdmF0ZSBjaGVja2JveEVsZW1lbnRzOiBbc3RyaW5nLCBPTy51aS5DaGVja2JveElucHV0V2lkZ2V0XVtdID0gW107XG5cbiAgICAgICAgcHJpdmF0ZSBsYXRlc3RDb21taXRIYXNoITogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIHNjcmlwdHMhOiBTY3JpcHRbXTtcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKHsgc2l6ZTogJ21lZGl1bScgfSk7XG5cbiAgICAgICAgICAgIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3RhdGljLm5hbWUgPSAnU2NyaXB0VXBkYXRlckRpYWxvZyc7XG4gICAgICAgICAgICBTY3JpcHRVcGRhdGVyRGlhbG9nLnN0YXRpYy50aXRsZSA9ICdXaGF0IHNjcmlwdHMgZG8geW91IHdhbnQgdG8gdXBkYXRlPyc7XG4gICAgICAgICAgICBTY3JpcHRVcGRhdGVyRGlhbG9nLnN0YXRpYy5hY3Rpb25zID0gW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY2FuY2VsJywgbGFiZWw6ICdDbG9zZScsIGZsYWdzOiBbJ3NhZmUnLCAnY2xvc2UnXSB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2F2ZScsIGxhYmVsOiAnUnVuJywgZmxhZ3M6IFsncHJpbWFyeScsICdwcm9ncmVzc2l2ZSddIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2V0U2V0dXBQcm9jZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3VwZXIucHJvdG90eXBlLmdldFNldHVwUHJvY2Vzcy5jYWxsKHRoaXMpLm5leHQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLndyYXBBc3luY01ldGhvZCh0aGlzLmxvYWRTY3JpcHREYXRhKS50aGVuKChlcnJvcj86IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50ID0gbmV3IE9PLnVpLk1lc3NhZ2VXaWRnZXQoeyB0eXBlOiAnZXJyb3InLCBsYWJlbDogZXJyb3IgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudCA9IG5ldyBPTy51aS5QYW5lbExheW91dCh7IHBhZGRlZDogdHJ1ZSwgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LiRlbGVtZW50LmFwcGVuZChtZXNzYWdlRWxlbWVudC4kZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmFwcGVuZCh0aGlzLmNvbnRlbnQuJGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEFjdGlvbnMoKS5zZXRBYmlsaXRpZXMoeyBzYXZlOiBmYWxzZSB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gbmV3IE9PLnVpLlBhbmVsTGF5b3V0KHsgcGFkZGVkOiB0cnVlLCBleHBhbmRlZDogZmFsc2UgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzY3JpcHQgb2YgdGhpcy5zY3JpcHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IG5ldyBPTy51aS5DaGVja2JveElucHV0V2lkZ2V0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tib3hFbGVtZW50cy5wdXNoKFtzY3JpcHQubmFtZSwgY2hlY2tib3hdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gbmV3IE9PLnVpLkZpZWxkTGF5b3V0KGNoZWNrYm94LCB7IGFsaWduOiAnaW5saW5lJywgbGFiZWw6IHNjcmlwdC5uYW1lIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuJGVsZW1lbnQuYXBwZW5kKGxheW91dC4kZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIHsgJGJvZHk6IEpRdWVyeSB9KS4kYm9keS5hcHBlbmQodGhpcy5jb250ZW50LiRlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGdldEFjdGlvblByb2Nlc3MgPSAoYWN0aW9uOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09ICdjYW5jZWwnKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgT08udWkuUHJvY2VzcygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TWFuYWdlcigpLmNsb3NlV2luZG93KHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAnc2F2ZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPTy51aS5Qcm9jZXNzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRTY3JpcHRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW3NjcmlwdE5hbWUsIGNoZWNrYm94XSBvZiB0aGlzLmNoZWNrYm94RWxlbWVudHMpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tib3guaXNTZWxlY3RlZCgpKSBzZWxlY3RlZFNjcmlwdHMucHVzaCh0aGlzLnNjcmlwdHMuZmluZCgoc2NyaXB0KSA9PiBzY3JpcHQubmFtZSA9PT0gc2NyaXB0TmFtZSkhKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE1hbmFnZXIoKS5jbG9zZVdpbmRvdyh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KCdTeW5jaW5nIHNjcmlwdHMuLi4nLCB7IHRhZzogJ3N5bmMtc2NyaXB0cy1ub3RpZmljYXRpb24nIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChzZWxlY3RlZFNjcmlwdHMubWFwKChzY3JpcHQpID0+IHRoaXMuaGFuZGxlU2NyaXB0KHNjcmlwdCkpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5lZGl0T3JDcmVhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1VzZXI6RWVqaXQ0My9zY3JpcHRzLWluZm8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBTY3JpcHRzKHRoaXMuc2NyaXB0cy5maWx0ZXIoKHNjcmlwdCkgPT4gIXNjcmlwdC5wZXJzb25hbCAmJiAhc2NyaXB0LmZvcmspKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc9PT0gRm9ya3MgPT09JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXBTY3JpcHRzKHRoaXMuc2NyaXB0cy5maWx0ZXIoKHNjcmlwdCkgPT4gc2NyaXB0LmZvcmspKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc9PT0gUGVyc29uYWwgc2NyaXB0cyA9PT0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcFNjcmlwdHModGhpcy5zY3JpcHRzLmZpbHRlcigoc2NyaXB0KSA9PiBzY3JpcHQucGVyc29uYWwpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJ1xcbicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTeW5jaW5nIHNjcmlwdCBsaXN0IGZyb20gR2l0SHViJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG13Lm5vdGlmeShgU3luY2VkICR7c2VsZWN0ZWRTY3JpcHRzLmxlbmd0aH0gc2NyaXB0JHtzZWxlY3RlZFNjcmlwdHMubGVuZ3RoID09PSAxID8gJycgOiAncyd9IGZyb20gR2l0SHViIWAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3VwZXIucHJvdG90eXBlLmdldEFjdGlvblByb2Nlc3MuY2FsbCh0aGlzLCBhY3Rpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGdldFRlYXJkb3duUHJvY2VzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBTY3JpcHRVcGRhdGVyRGlhbG9nLnN1cGVyLnByb3RvdHlwZS5nZXRUZWFyZG93blByb2Nlc3MuY2FsbCh0aGlzKS5uZXh0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIHsgJGJvZHk6IEpRdWVyeSB9KS4kYm9keS5lbXB0eSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdyYXBzIGFuIGFzeW5jIG1ldGhvZCBpbnRvIGEgalF1ZXJ5IERlZmVycmVkIG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIG1ldGhvZCBUaGUgbWV0aG9kIHRvIHdyYXAuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHdyYXBBc3luY01ldGhvZChtZXRob2Q6ICgpID0+IFByb21pc2U8dW5rbm93bj4pIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICBtZXRob2QoKS50aGVuKChyZXN1bHQpID0+IGRlZmVycmVkLnJlc29sdmUocmVzdWx0KSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTG9hZHMgZGF0YSBmb3IgYWxsIHNjcmlwdHMuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGxvYWRTY3JpcHREYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHt0aGlzLnJlcG9Pd25lcn0vJHt0aGlzLnJlcG9OYW1lfS9jb21taXRzYCk7XG4gICAgICAgICAgICBpZiAoIWxhdGVzdENvbW1pdEhhc2hSZXNwb25zZS5vaylcbiAgICAgICAgICAgICAgICByZXR1cm4gYEZhaWxlZCB0byBmZXRjaCBsYXRlc3QgY29tbWl0IGhhc2ggZnJvbSBHaXRIdWI6ICR7bGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLnN0YXR1c1RleHR9ICgke2xhdGVzdENvbW1pdEhhc2hSZXNwb25zZS5zdGF0dXN9KWA7XG5cbiAgICAgICAgICAgIHRoaXMubGF0ZXN0Q29tbWl0SGFzaCA9ICgoYXdhaXQgbGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLmpzb24oKSkgYXMgeyBzaGE6IHN0cmluZyB9W10pWzBdLnNoYTtcblxuICAgICAgICAgICAgY29uc3Qgc2NyaXB0RGF0YVJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS8ke3RoaXMucmVwb093bmVyfS8ke3RoaXMucmVwb05hbWV9LyR7dGhpcy5sYXRlc3RDb21taXRIYXNofS9zY3JpcHRzLmpzb25gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICghc2NyaXB0RGF0YVJlc3BvbnNlLm9rKVxuICAgICAgICAgICAgICAgIHJldHVybiBgRmFpbGVkIHRvIGZldGNoIHNjcmlwdCBkYXRhIGZyb20gR2l0SHViOiAke3NjcmlwdERhdGFSZXNwb25zZS5zdGF0dXNUZXh0fSAoJHtzY3JpcHREYXRhUmVzcG9uc2Uuc3RhdHVzfSlgO1xuXG4gICAgICAgICAgICB0aGlzLnNjcmlwdHMgPSAoYXdhaXQgc2NyaXB0RGF0YVJlc3BvbnNlLmpzb24oKSkgYXMgU2NyaXB0W107XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZXMgYW5kIGVkaXRzL2NyZWF0ZXMgcGFnZXMgZm9yIGEgZ2l2ZW4gc2NyaXB0LlxuICAgICAgICAgKiBAcGFyYW0gc2NyaXB0IFRoZSBzY3JpcHQgdG8gaGFuZGxlLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTY3JpcHQoc2NyaXB0OiBTY3JpcHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YnBhZ2VOYW1lID0gYFVzZXI6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9YDtcbiAgICAgICAgICAgIGNvbnN0IHN1YnBhZ2VUYWxrTmFtZSA9IGBVc2VyIHRhbGs6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9YDtcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdE5hbWUgPSBgJHtzdWJwYWdlTmFtZX0uanNgO1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVOYW1lID0gYCR7c3VicGFnZU5hbWV9LmNzc2A7XG5cbiAgICAgICAgICAgIGNvbnN0IGZ1bGxTdWJwYWdlSW5mbyA9IFtcbiAgICAgICAgICAgICAgICAne3tVc2VyOkVlaml0NDMvc2NyaXB0LWRvY3VtZW50YXRpb24nLFxuICAgICAgICAgICAgICAgIHNjcmlwdC5pbWFnZSA9PT0gZmFsc2UgPyBgfCBpbWFnZSAgICAgICAgICAgICA9ICR7c2NyaXB0LmltYWdlfWAgOiBudWxsLFxuICAgICAgICAgICAgICAgIHNjcmlwdFsnaW4tZGV2ZWxvcG1lbnQnXSA/IGB8IGluLWRldmVsb3BtZW50ICAgID0gJHtzY3JpcHRbJ2luLWRldmVsb3BtZW50J119YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgc2NyaXB0Wyd1c2UtaW5zdGVhZCddXG4gICAgICAgICAgICAgICAgICAgID8gYHwgdXNlLWluc3RlYWQgICAgICAgPSAke3NjcmlwdFsndXNlLWluc3RlYWQnXS5pbmNsdWRlcygnVXNlcjonKSA/IHNjcmlwdFsndXNlLWluc3RlYWQnXSA6IGBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Wyd1c2UtaW5zdGVhZCddfXwke3NjcmlwdFsndXNlLWluc3RlYWQnXX1dXWB9YFxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgc2NyaXB0WydpbWFnZS1jYXB0aW9uJ10gPyBgfCBpbWFnZS1jYXB0aW9uICAgICA9ICR7c2NyaXB0WydpbWFnZS1jYXB0aW9uJ119YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgc2NyaXB0WydvdGhlci1hdXRob3JzJ11cbiAgICAgICAgICAgICAgICAgICAgPyBgfCBvdGhlci1hdXRob3JzICAgICA9ICR7c2NyaXB0WydvdGhlci1hdXRob3JzJ10ubWFwKChhdXRob3IpID0+IGBbW1VzZXI6JHthdXRob3J9fCR7YXV0aG9yfV1dYCkuam9pbignLCAnKX1gXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgICBgfCBkZXNjcmlwdGlvbi1zaG9ydCA9ICR7c2NyaXB0WydzaG9ydC1kZXNjcmlwdGlvbiddfWAsXG4gICAgICAgICAgICAgICAgYHwgZGVzY3JpcHRpb24gICAgICAgPSAke3NjcmlwdC5kZXNjcmlwdGlvbn1gLFxuICAgICAgICAgICAgICAgIHNjcmlwdC51c2FnZSA/IGB8IHVzYWdlICAgICAgICAgICAgID0gJHtzY3JpcHQudXNhZ2V9YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgc2NyaXB0LmNvbmZpZ3VyYXRpb24gPyBgfCBjb25maWd1cmF0aW9uICAgICA9ICR7c2NyaXB0LmNvbmZpZ3VyYXRpb259YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgc2NyaXB0LmNoYW5nZWxvZ1xuICAgICAgICAgICAgICAgICAgICA/IGB8IGNoYW5nZWxvZyAgICAgICAgID0gXFxuJHtPYmplY3QuZW50cmllcyhzY3JpcHQuY2hhbmdlbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFtkYXRlLCBkZXNjcmlwdGlvbl0pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCogJycne3tzdGFydCBkYXRlIGFuZCBhZ2V8JHtkYXRlfX19OicnJyR7QXJyYXkuaXNBcnJheShkZXNjcmlwdGlvbikgPyBgXFxuJHtkZXNjcmlwdGlvbi5tYXAoKGxpbmUpID0+IGAqKiAke2xpbmV9YCkuam9pbignXFxuJyl9YCA6IGAgJHtkZXNjcmlwdGlvbn1gfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpfWBcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgIGB8IHNraW4tc3VwcG9ydCAgICAgID0ge3tVc2VyOkVlaml0NDMvc2NyaXB0LWRvY3VtZW50YXRpb24vc2tpbi1zdXBwb3J0fCR7T2JqZWN0LmVudHJpZXMoc2NyaXB0Wydza2luLXN1cHBvcnQnXSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoW3NraW4sIHN0YXR1c10pID0+IGAke3NraW59PSR7c3RhdHVzfWApXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCd8Jyl9fX1gLFxuICAgICAgICAgICAgICAgIGB8IHJlbGVhc2VkICAgICAgICAgID0ge3tzdGFydCBkYXRlIGFuZCBhZ2V8JHtzY3JpcHQucmVsZWFzZWR9fX1gLFxuICAgICAgICAgICAgICAgIGB8IHVwZGF0ZWQgICAgICAgICAgID0ge3tzdGFydCBkYXRlIGFuZCBhZ2V8JHtzY3JpcHQudXBkYXRlZH19fWAsXG4gICAgICAgICAgICAgICAgJ319JyxcbiAgICAgICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgICAgICAgICBsZXQgc2NyaXB0Q29udGVudCA9IG51bGw7XG5cbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdENvbnRlbnRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgICAgICAgIGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJHt0aGlzLnJlcG9Pd25lcn0vJHt0aGlzLnJlcG9OYW1lfS8ke3RoaXMubGF0ZXN0Q29tbWl0SGFzaH0vZGlzdC9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9LmpzYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoc2NyaXB0Q29udGVudFJlc3BvbnNlLm9rKSBzY3JpcHRDb250ZW50ID0gYXdhaXQgc2NyaXB0Q29udGVudFJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gbXcubm90aWZ5KFxuICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGZldGNoIFwiJHtzY3JpcHQubmFtZX0uanNcIiBmcm9tIEdpdEh1YjogJHtzY3JpcHRDb250ZW50UmVzcG9uc2Uuc3RhdHVzVGV4dH0gKCR7c2NyaXB0Q29udGVudFJlc3BvbnNlLnN0YXR1c30pYCxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogJ3N5bmMtc2NyaXB0cy1ub3RpZmljYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxldCBzdHlsZUNvbnRlbnQgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHNjcmlwdC5jc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZUNvbnRlbnRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgICAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyR7dGhpcy5yZXBvT3duZXJ9LyR7dGhpcy5yZXBvTmFtZX0vJHt0aGlzLmxhdGVzdENvbW1pdEhhc2h9L2Rpc3Qvc3R5bGVzLyR7c2NyaXB0Lm5hbWV9LmNzc2AsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChzdHlsZUNvbnRlbnRSZXNwb25zZS5vaykgc3R5bGVDb250ZW50ID0gYXdhaXQgc3R5bGVDb250ZW50UmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KFxuICAgICAgICAgICAgICAgICAgICAgICAgYEZhaWxlZCB0byBmZXRjaCBcIiR7c2NyaXB0Lm5hbWV9LmNzc1wiIGZyb20gR2l0SHViOiAke3N0eWxlQ29udGVudFJlc3BvbnNlLnN0YXR1c1RleHR9ICgke3N0eWxlQ29udGVudFJlc3BvbnNlLnN0YXR1c30pYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogJ3N5bmMtc2NyaXB0cy1ub3RpZmljYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFzY3JpcHQucGVyc29uYWwpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVkaXRPckNyZWF0ZShzdWJwYWdlTmFtZSwgZnVsbFN1YnBhZ2VJbmZvLmpvaW4oJ1xcbicpLCAnU3luY2luZyBzY3JpcHQgZG9jdW1lbnRhdGlvbiBmcm9tIEdpdEh1YicpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZWRpdE9yQ3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICBzdWJwYWdlVGFsa05hbWUsXG4gICAgICAgICAgICAgICAgICAgICcjUkVESVJFQ1QgW1tVc2VyIHRhbGs6RWVqaXQ0M11dJyxcbiAgICAgICAgICAgICAgICAgICAgJ1JlZGlyZWN0aW5nIHNjcmlwdCBkb2N1bWVudGF0aW9uIHRhbGsgcGFnZSB0byBtYWluIHVzZXIgdGFsayBwYWdlJyxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2NyaXB0Q29udGVudCkgYXdhaXQgdGhpcy5lZGl0T3JDcmVhdGUoc2NyaXB0TmFtZSwgc2NyaXB0Q29udGVudCwgJ1N5bmNpbmcgc2NyaXB0IGZyb20gR2l0SHViJyk7XG5cbiAgICAgICAgICAgIGlmIChzY3JpcHQuY3NzICYmIHN0eWxlQ29udGVudCkgYXdhaXQgdGhpcy5lZGl0T3JDcmVhdGUoc3R5bGVOYW1lLCBzdHlsZUNvbnRlbnQsICdTeW5jaW5nIHN0eWxlcyBmcm9tIEdpdEh1YicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgc2NyaXB0cyB0byBhIGJ1bGxldGVkIGxpc3QuXG4gICAgICAgICAqIEBwYXJhbSBzY3JpcHRzIFRoZSBzY3JpcHRzIHRvIG1hcC5cbiAgICAgICAgICogQHJldHVybnMgVGhlIG1hcHBlZCBzY3JpcHRzLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBtYXBTY3JpcHRzKHNjcmlwdHM6IFNjcmlwdFtdKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NyaXB0c1xuICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgIChzY3JpcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBgKiBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9JHtzY3JpcHQucGVyc29uYWwgPyAnLmpzJyA6ICcnfXwke3NjcmlwdC5uYW1lfV1dIC0gJHtzY3JpcHRbJ3Nob3J0LWRlc2NyaXB0aW9uJ10gfHwgc2NyaXB0LmRlc2NyaXB0aW9ufSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0Wydpbi1kZXZlbG9wbWVudCddID8gJyAoPHNwYW4gc3R5bGU9XCJjb2xvcjogI2JkMjgyOFwiPmluIGRldmVsb3BtZW50PC9zcGFuPiknIDogJydcbiAgICAgICAgICAgICAgICAgICAgICAgIH0ke3NjcmlwdFsndXNlLWluc3RlYWQnXSA/ICcgKDxzcGFuIHN0eWxlPVwiY29sb3I6ICNiZDI4MjhcIj5kZXByZWNhdGVkPC9zcGFuPiknIDogJyd9YCxcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVkaXRzIGEgcGFnZSwgb3IgY3JlYXRlcyBpdCBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgKiBAcGFyYW0gdGl0bGUgVGhlIHRpdGxlIG9mIHRoZSBwYWdlIHRvIGVkaXQuXG4gICAgICAgICAqIEBwYXJhbSB0ZXh0IFRoZSBwYWdlIGNvbnRlbnQgdG8gc2V0LlxuICAgICAgICAgKiBAcGFyYW0gc3VtbWFyeSBUaGUgZWRpdCBzdW1tYXJ5ICh3aWxsIGFwcGVuZCBzY3JpcHQgbm90aWNlKS5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgYXN5bmMgZWRpdE9yQ3JlYXRlKHRpdGxlOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgc3VtbWFyeTogc3RyaW5nKSB7XG4gICAgICAgICAgICBzdW1tYXJ5ICs9ICcgKHZpYSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzL3NjcmlwdC11cGRhdGVyLmpzfHNjcmlwdF1dKSc7XG4gICAgICAgICAgICBhd2FpdCBuZXcgbXcuQXBpKClcbiAgICAgICAgICAgICAgICAuZWRpdCh0aXRsZSwgKCkgPT4gKHsgdGV4dCwgc3VtbWFyeSwgd2F0Y2hsaXN0OiAnd2F0Y2gnIH0pKVxuICAgICAgICAgICAgICAgIC5jYXRjaChhc3luYyAoZXJyb3JDb2RlOiBzdHJpbmcsIGVycm9ySW5mbzogTWVkaWFXaWtpRGF0YUVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckNvZGUgPT09ICdub2NyZWF0ZS1taXNzaW5nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jcmVhdGUodGl0bGUsIHsgc3VtbWFyeSwgd2F0Y2hsaXN0OiAnd2F0Y2gnIH0sIHRleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvckNvZGU6IHN0cmluZywgZXJyb3JJbmZvOiBNZWRpYVdpa2lEYXRhRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBFcnJvciBjcmVhdGluZyAke3RpdGxlfTogJHtlcnJvckluZm8/LmVycm9yLmluZm8gPz8gJ1Vua25vd24gZXJyb3InfSAoJHtlcnJvckNvZGV9KWAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBFcnJvciBlZGl0aW5nIG9yIGNyZWF0aW5nICR7dGl0bGV9OiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbihTY3JpcHRVcGRhdGVyRGlhbG9nLnByb3RvdHlwZSwgT08udWkuUHJvY2Vzc0RpYWxvZy5wcm90b3R5cGUpO1xufSk7XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7bUJBc0JBLEdBQUcsT0FBTyxNQUFNLENBQUMsaUJBQWtCLGVBQWdCLGtCQUFtQixpQkFBaUIsRUFBRyxJQUFNLENBQzVGLEdBQUksR0FBRyxPQUFPLElBQUksWUFBWSxJQUFNLFdBQWEsR0FBRyxPQUFPLElBQUksWUFBWSxJQUFNLGVBQWdCLE9BRWpHLElBQU1BLEVBQWtCLFNBQVMsY0FBYyxpQkFBaUIsRUFBRyxVQUFVLEVBQUksRUFFM0VDLEVBQU8sU0FBUyxjQUFjLEdBQUcsRUFDdkNBLEVBQUssS0FBTyxJQUNaQSxFQUFLLE1BQU0sV0FBYSxPQUN4QkEsRUFBSyxZQUFjLG1CQUNuQkEsRUFBSyxpQkFBaUIsUUFBVUMsR0FBVSxDQUN0Q0EsRUFBTSxlQUFlLEVBRXJCLElBQU1DLEVBQWdCLElBQUksR0FBRyxHQUFHLGNB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QUNULENBQ0osQ0FFQSxPQUFPLE9BQU9oQyxFQUFvQixVQUFXLEdBQUcsR0FBRyxjQUFjLFNBQVMsQ0FDOUUsQ0FBQyIsCiAgIm5hbWVzIjogWyJmdWxsTGlua0VsZW1lbnQiLCAibGluayIsICJldmVudCIsICJ3aW5kb3dNYW5hZ2VyIiwgInNjcmlwdFVwZGF0ZXJEaWFsb2ciLCAiU2NyaXB0VXBkYXRlckRpYWxvZyIsICJlcnJvciIsICJtZXNzYWdlRWxlbWVudCIsICJzY3JpcHQiLCAiY2hlY2tib3giLCAibGF5b3V0IiwgImFjdGlvbiIsICJzZWxlY3RlZFNjcmlwdHMiLCAic2NyaXB0TmFtZSIsICJtZXRob2QiLCAiZGVmZXJyZWQiLCAicmVzdWx0IiwgImxhdGVzdENvbW1pdEhhc2hSZXNwb25zZSIsICJzY3JpcHREYXRhUmVzcG9uc2UiLCAic3VicGFnZU5hbWUiLCAic3VicGFnZVRhbGtOYW1lIiwgInN0eWxlTmFtZSIsICJmdWxsU3VicGFnZUluZm8iLCAiYXV0aG9yIiwgImRhdGUiLCAiZGVzY3JpcHRpb24iLCAibGluZSIsICJza2luIiwgInN0YXR1cyIsICJzY3JpcHRDb250ZW50IiwgInNjcmlwdENvbnRlbnRSZXNwb25zZSIsICJzdHlsZUNvbnRlbnQiLCAic3R5bGVDb250ZW50UmVzcG9uc2UiLCAic2NyaXB0cyIsICJ0aXRsZSIsICJ0ZXh0IiwgInN1bW1hcnkiLCAiZXJyb3JDb2RlIiwgImVycm9ySW5mbyJdCn0K
