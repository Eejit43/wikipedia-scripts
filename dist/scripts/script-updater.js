// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/script-updater.ts

"use strict";mw.loader.using(["mediawiki.util","oojs-ui-core","oojs-ui-widgets","oojs-ui-windows"],()=>{if(mw.config.get("wgUserName")!=="Eejit43"||mw.config.get("wgPageName")!=="User:Eejit43")return;const m=document.querySelector(".mw-editsection").cloneNode(!0),r=document.createElement("a");r.href="#",r.style.fontWeight="bold",r.textContent="Sync from GitHub",r.addEventListener("click",h=>{h.preventDefault();const e=new OO.ui.WindowManager;document.body.append(e.$element[0]);const t=new i;e.addWindows([t]),t.open()}),m.querySelector("a").replaceWith(r),document.querySelector("h2#My_user_scripts + .mw-editsection").after(m);class i extends OO.ui.ProcessDialog{repoOwner="Eejit43";repoName="wikipedia-scripts";content;checkboxElements=[];latestCommitHash;scripts;constructor(){super({size:"medium"}),i.static.name="ScriptUpdaterDialog",i.static.title="What scripts do you want to update?",i.static.actions=[{action:"cancel",label:"Close",flags:["safe","close"]},{action:"save",label:"Run",flags:["primary","progressive"]}]}getSetupProcess=()=>i.super.prototype.getSetupProcess.call(this).next(()=>this.wrapAsyncMethod(this.loadScriptData).then(e=>{if(e){const t=new OO.ui.MessageWidget({type:"error",label:e});this.content=new OO.ui.PanelLayout({padded:!0,expanded:!1}),this.content.$element.append(t.$element),this.$body.append(this.content.$element),this.getActions().setAbilities({save:!1});return}this.content=new OO.ui.PanelLayout({padded:!0,expanded:!1});for(const t of this.scripts){const s=new OO.ui.CheckboxInputWidget;this.checkboxElements.push([t.name,s]);const a=new OO.ui.FieldLayout(s,{align:"inline",label:t.name});this.content.$element.append(a.$element)}this.$body.append(this.content.$element)}));getActionProcess=e=>e==="cancel"?new OO.ui.Process(()=>{this.getManager().closeWindow(this)}):e==="save"?new OO.ui.Process(()=>{const t=[];for(const[s,a]of this.checkboxElements)a.isSelected()&&t.push(this.scripts.find(o=>o.name===s));this.getManager().closeWindow(this),(async()=>(mw.notify("Syncing scripts...",{tag:"sync-scripts-notification"}),await Promise.all(t.map(s=>this.handleScript(s))),await this.editOrCreate("User:Eejit43/scripts-info",[this.mapScripts(this.scripts.filter(s=>!s.personal&&!s.fork)),"","=== Forks ===",this.mapScripts(this.scripts.filter(s=>s.fork)),"","=== Personal scripts ===",this.mapScripts(this.scripts.filter(s=>s.personal))].join(`
`),"Syncing script list from GitHub"),mw.notify(`Synced ${t.length} script${t.length===1?"":"s"} from GitHub!`,{type:"success",tag:"sync-scripts-notification"})))()}):i.super.prototype.getActionProcess.call(this,e);getTeardownProcess=()=>i.super.prototype.getTeardownProcess.call(this).next(()=>{this.$body.empty()});wrapAsyncMethod(e){const t=$.Deferred();return e().then(s=>t.resolve(s)),t.promise()}loadScriptData=async()=>{const e=await fetch(`https://api.github.com/repos/${this.repoOwner}/${this.repoName}/commits`);if(!e.ok)return`Failed to fetch latest commit hash from GitHub: ${e.statusText} (${e.status})`;this.latestCommitHash=(await e.json())[0].sha;const t=await fetch(`https://raw.githubusercontent.com/${this.repoOwner}/${this.repoName}/${this.latestCommitHash}/scripts.json`);if(!t.ok)return`Failed to fetch script data from GitHub: ${t.statusText} (${t.status})`;this.scripts=await t.json()};async handleScript(e){const t=`User:Eejit43/scripts/${e.name}`,s=`User talk:Eejit43/scripts/${e.name}`,a=`${t}.js`,o=`${t}.css`,u=["{{User:Eejit43/script-documentation",e.image===!1?`| image             = ${e.image}`:null,e["in-development"]?`| in-development    = ${e["in-development"]}`:null,e["use-instead"]?`| use-instead       = ${e["use-instead"].includes("User:")?e["use-instead"]:`[[User:Eejit43/scripts/${e["use-instead"]}|${e["use-instead"]}]]`}`:null,e["image-caption"]?`| image-caption     = ${e["image-caption"]}`:null,e["other-authors"]?`| other-authors     = ${e["other-authors"].map(n=>`[[User:${n}|${n}]]`).join(", ")}`:null,`| description-short = ${e["short-description"]}`,`| description       = ${e.description}`,e.usage?`| usage             = ${e.usage}`:null,e.changelog?`| changelog         = 
${Object.entries(e.changelog).map(([n,l])=>`* '''{{start date and age|${n}}}:'''${Array.isArray(l)?`
${l.map(g=>`** ${g}`).join(`
`)}`:` ${l}`}`).join(`
`)}`:null,`| skin-support      = {{User:Eejit43/script-documentation/skin-support|${Object.entries(e["skin-support"]).map(([n,l])=>`${n}=${l}`).join("|")}}}`,`| released          = {{start date and age|${e.released}}}`,`| updated           = {{start date and age|${e.updated}}}`,"}}"].filter(Boolean);let c=null;const p=await fetch(`https://raw.githubusercontent.com/${this.repoOwner}/${this.repoName}/${this.latestCommitHash}/dist/scripts/${e.name}.js`);if(p.ok)c=await p.text();else return mw.notify(`Failed to fetch "${e.name}.js" from GitHub: ${p.statusText} (${p.status})`,{type:"error",tag:"sync-scripts-notification"});let d=null;if(e.css){const n=await fetch(`https://raw.githubusercontent.com/${this.repoOwner}/${this.repoName}/${this.latestCommitHash}/dist/styles/${e.name}.css`);n.ok?d=await n.text():mw.notify(`Failed to fetch "${e.name}.css" from GitHub: ${n.statusText} (${n.status})`,{type:"error",tag:"sync-scripts-notification"})}e.personal||(await this.editOrCreate(t,u.join(`
`),"Syncing script documentation from GitHub"),await this.editOrCreate(s,"#REDIRECT [[User talk:Eejit43]]","Redirecting script documentation talk page to main user talk page")),c&&await this.editOrCreate(a,c,"Syncing script from GitHub"),e.css&&d&&await this.editOrCreate(o,d,"Syncing styles from GitHub")}mapScripts(e){return e.map(t=>`* [[User:Eejit43/scripts/${t.name}${t.personal?".js":""}|${t.name}]] - ${t["short-description"]||t.description}${t["in-development"]?' (<span style="color: #bd2828">in development</span>)':""}${t["use-instead"]?' (<span style="color: #bd2828">deprecated</span>)':""}`).join(`
`)}async editOrCreate(e,t,s){s+=" (via [[User:Eejit43/scripts/script-updater.js|script]])",await new mw.Api().edit(e,()=>({text:t,summary:s,watchlist:"watch"})).catch(async(a,o)=>{if(a==="nocreate-missing")await new mw.Api().create(e,{summary:s,watchlist:"watch"},t).catch((u,c)=>{mw.notify(`Error creating ${e}: ${c?.error.info??"Unknown error"} (${u})`,{type:"error"})});else{mw.notify(`Error editing or creating ${e}: ${o?.error.info??"Unknown error"} (${a})`,{type:"error"});return}})}}Object.assign(i.prototype,OO.ui.ProcessDialog.prototype)});

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy9zY3JpcHQtdXBkYXRlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHR5cGUgeyBNZWRpYVdpa2lEYXRhRXJyb3IgfSBmcm9tICcuLi9nbG9iYWwtdHlwZXMnO1xuXG5pbnRlcmZhY2UgU2NyaXB0IHtcbiAgICAnbmFtZSc6IHN0cmluZztcbiAgICAnaW4tZGV2ZWxvcG1lbnQnPzogYm9vbGVhbjtcbiAgICAndXNlLWluc3RlYWQnPzogc3RyaW5nO1xuICAgICdpbWFnZSc/OiBmYWxzZTtcbiAgICAnaW1hZ2UtY2FwdGlvbic/OiBzdHJpbmc7XG4gICAgJ3Nob3J0LWRlc2NyaXB0aW9uJzogc3RyaW5nO1xuICAgICdkZXNjcmlwdGlvbic6IHN0cmluZztcbiAgICAndXNhZ2UnPzogc3RyaW5nO1xuICAgICdjaGFuZ2Vsb2cnPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+O1xuICAgICdvdGhlci1hdXRob3JzJz86IHN0cmluZ1tdO1xuICAgICdmb3JrJz86IHRydWU7XG4gICAgJ3BlcnNvbmFsJz86IHRydWU7XG4gICAgJ3NraW4tc3VwcG9ydCc6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+O1xuICAgICdyZWxlYXNlZCc6IHN0cmluZztcbiAgICAndXBkYXRlZCc6IHN0cmluZztcbiAgICAnY3NzJz86IHRydWU7XG59XG5cbm13LmxvYWRlci51c2luZyhbJ21lZGlhd2lraS51dGlsJywgJ29vanMtdWktY29yZScsICdvb2pzLXVpLXdpZGdldHMnLCAnb29qcy11aS13aW5kb3dzJ10sICgpID0+IHtcbiAgICBpZiAobXcuY29uZmlnLmdldCgnd2dVc2VyTmFtZScpICE9PSAnRWVqaXQ0MycgfHwgbXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpICE9PSAnVXNlcjpFZWppdDQzJykgcmV0dXJuO1xuXG4gICAgY29uc3QgZnVsbExpbmtFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm13LWVkaXRzZWN0aW9uJykhLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MU3BhbkVsZW1lbnQ7XG5cbiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGxpbmsuaHJlZiA9ICcjJztcbiAgICBsaW5rLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gICAgbGluay50ZXh0Q29udGVudCA9ICdTeW5jIGZyb20gR2l0SHViJztcbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgY29uc3Qgd2luZG93TWFuYWdlciA9IG5ldyBPTy51aS5XaW5kb3dNYW5hZ2VyKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHdpbmRvd01hbmFnZXIuJGVsZW1lbnRbMF0pO1xuXG4gICAgICAgIGNvbnN0IHNjcmlwdFVwZGF0ZXJEaWFsb2cgPSBuZXcgU2NyaXB0VXBkYXRlckRpYWxvZygpO1xuICAgICAgICB3aW5kb3dNYW5hZ2VyLmFkZFdpbmRvd3MoW3NjcmlwdFVwZGF0ZXJEaWFsb2ddKTtcblxuICAgICAgICBzY3JpcHRVcGRhdGVyRGlhbG9nLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIGZ1bGxMaW5rRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhJykhLnJlcGxhY2VXaXRoKGxpbmspO1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaDIjTXlfdXNlcl9zY3JpcHRzICsgLm13LWVkaXRzZWN0aW9uJykhLmFmdGVyKGZ1bGxMaW5rRWxlbWVudCk7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGlzIGEgZGlhbG9nIHRoYXQgbWFuYWdlcyB1cGRhdGluZyBzY3JpcHRzLlxuICAgICAqL1xuICAgIGNsYXNzIFNjcmlwdFVwZGF0ZXJEaWFsb2cgZXh0ZW5kcyBPTy51aS5Qcm9jZXNzRGlhbG9nIHtcbiAgICAgICAgcHJpdmF0ZSByZXBvT3duZXIgPSAnRWVqaXQ0Myc7XG4gICAgICAgIHByaXZhdGUgcmVwb05hbWUgPSAnd2lraXBlZGlhLXNjcmlwdHMnO1xuXG4gICAgICAgIHByaXZhdGUgY29udGVudCE6IE9PLnVpLlBhbmVsTGF5b3V0O1xuICAgICAgICBwcml2YXRlIGNoZWNrYm94RWxlbWVudHM6IFtzdHJpbmcsIE9PLnVpLkNoZWNrYm94SW5wdXRXaWRnZXRdW10gPSBbXTtcblxuICAgICAgICBwcml2YXRlIGxhdGVzdENvbW1pdEhhc2ghOiBzdHJpbmc7XG4gICAgICAgIHByaXZhdGUgc2NyaXB0cyE6IFNjcmlwdFtdO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoeyBzaXplOiAnbWVkaXVtJyB9KTtcblxuICAgICAgICAgICAgU2NyaXB0VXBkYXRlckRpYWxvZy5zdGF0aWMubmFtZSA9ICdTY3JpcHRVcGRhdGVyRGlhbG9nJztcbiAgICAgICAgICAgIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3RhdGljLnRpdGxlID0gJ1doYXQgc2NyaXB0cyBkbyB5b3Ugd2FudCB0byB1cGRhdGU/JztcbiAgICAgICAgICAgIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3RhdGljLmFjdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjYW5jZWwnLCBsYWJlbDogJ0Nsb3NlJywgZmxhZ3M6IFsnc2FmZScsICdjbG9zZSddIH0sXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzYXZlJywgbGFiZWw6ICdSdW4nLCBmbGFnczogWydwcmltYXJ5JywgJ3Byb2dyZXNzaXZlJ10gfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICBnZXRTZXR1cFByb2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gU2NyaXB0VXBkYXRlckRpYWxvZy5zdXBlci5wcm90b3R5cGUuZ2V0U2V0dXBQcm9jZXNzLmNhbGwodGhpcykubmV4dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JhcEFzeW5jTWV0aG9kKHRoaXMubG9hZFNjcmlwdERhdGEpLnRoZW4oKGVycm9yPzogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUVsZW1lbnQgPSBuZXcgT08udWkuTWVzc2FnZVdpZGdldCh7IHR5cGU6ICdlcnJvcicsIGxhYmVsOiBlcnJvciB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gbmV3IE9PLnVpLlBhbmVsTGF5b3V0KHsgcGFkZGVkOiB0cnVlLCBleHBhbmRlZDogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuJGVsZW1lbnQuYXBwZW5kKG1lc3NhZ2VFbGVtZW50LiRlbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgYXMgdW5rbm93biBhcyB7ICRib2R5OiBKUXVlcnkgfSkuJGJvZHkuYXBwZW5kKHRoaXMuY29udGVudC4kZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QWN0aW9ucygpLnNldEFiaWxpdGllcyh7IHNhdmU6IGZhbHNlIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSBuZXcgT08udWkuUGFuZWxMYXlvdXQoeyBwYWRkZWQ6IHRydWUsIGV4cGFuZGVkOiBmYWxzZSB9KTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNjcmlwdCBvZiB0aGlzLnNjcmlwdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gbmV3IE9PLnVpLkNoZWNrYm94SW5wdXRXaWRnZXQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja2JveEVsZW1lbnRzLnB1c2goW3NjcmlwdC5uYW1lLCBjaGVja2JveF0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXlvdXQgPSBuZXcgT08udWkuRmllbGRMYXlvdXQoY2hlY2tib3gsIHsgYWxpZ246ICdpbmxpbmUnLCBsYWJlbDogc2NyaXB0Lm5hbWUgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC4kZWxlbWVudC5hcHBlbmQobGF5b3V0LiRlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmFwcGVuZCh0aGlzLmNvbnRlbnQuJGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0QWN0aW9uUHJvY2VzcyA9IChhY3Rpb246IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NhbmNlbCcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBPTy51aS5Qcm9jZXNzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRNYW5hZ2VyKCkuY2xvc2VXaW5kb3codGhpcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09ICdzYXZlJylcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9PLnVpLlByb2Nlc3MoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFNjcmlwdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbc2NyaXB0TmFtZSwgY2hlY2tib3hdIG9mIHRoaXMuY2hlY2tib3hFbGVtZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGVja2JveC5pc1NlbGVjdGVkKCkpIHNlbGVjdGVkU2NyaXB0cy5wdXNoKHRoaXMuc2NyaXB0cy5maW5kKChzY3JpcHQpID0+IHNjcmlwdC5uYW1lID09PSBzY3JpcHROYW1lKSEpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TWFuYWdlcigpLmNsb3NlV2luZG93KHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoJ1N5bmNpbmcgc2NyaXB0cy4uLicsIHsgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHNlbGVjdGVkU2NyaXB0cy5tYXAoKHNjcmlwdCkgPT4gdGhpcy5oYW5kbGVTY3JpcHQoc2NyaXB0KSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVkaXRPckNyZWF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlcjpFZWppdDQzL3NjcmlwdHMtaW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcFNjcmlwdHModGhpcy5zY3JpcHRzLmZpbHRlcigoc2NyaXB0KSA9PiAhc2NyaXB0LnBlcnNvbmFsICYmICFzY3JpcHQuZm9yaykpLCAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJz09PSBGb3JrcyA9PT0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcFNjcmlwdHModGhpcy5zY3JpcHRzLmZpbHRlcigoc2NyaXB0KSA9PiBzY3JpcHQuZm9yaykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJz09PSBQZXJzb25hbCBzY3JpcHRzID09PScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwU2NyaXB0cyh0aGlzLnNjcmlwdHMuZmlsdGVyKChzY3JpcHQpID0+IHNjcmlwdC5wZXJzb25hbCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXFxuJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1N5bmNpbmcgc2NyaXB0IGxpc3QgZnJvbSBHaXRIdWInLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBTeW5jZWQgJHtzZWxlY3RlZFNjcmlwdHMubGVuZ3RofSBzY3JpcHQke3NlbGVjdGVkU2NyaXB0cy5sZW5ndGggPT09IDEgPyAnJyA6ICdzJ30gZnJvbSBHaXRIdWIhYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICdzeW5jLXNjcmlwdHMtbm90aWZpY2F0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZWxzZSByZXR1cm4gU2NyaXB0VXBkYXRlckRpYWxvZy5zdXBlci5wcm90b3R5cGUuZ2V0QWN0aW9uUHJvY2Vzcy5jYWxsKHRoaXMsIGFjdGlvbik7XG4gICAgICAgIH07XG5cbiAgICAgICAgZ2V0VGVhcmRvd25Qcm9jZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFNjcmlwdFVwZGF0ZXJEaWFsb2cuc3VwZXIucHJvdG90eXBlLmdldFRlYXJkb3duUHJvY2Vzcy5jYWxsKHRoaXMpLm5leHQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICh0aGlzIGFzIHVua25vd24gYXMgeyAkYm9keTogSlF1ZXJ5IH0pLiRib2R5LmVtcHR5KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV3JhcHMgYW4gYXN5bmMgbWV0aG9kIGludG8gYSBqUXVlcnkgRGVmZXJyZWQgb2JqZWN0LlxuICAgICAgICAgKiBAcGFyYW0gbWV0aG9kIFRoZSBtZXRob2QgdG8gd3JhcC5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgd3JhcEFzeW5jTWV0aG9kKG1ldGhvZDogKCkgPT4gUHJvbWlzZTx1bmtub3duPikge1xuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG5cbiAgICAgICAgICAgIG1ldGhvZCgpLnRoZW4oKHJlc3VsdCkgPT4gZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb2FkcyBkYXRhIGZvciBhbGwgc2NyaXB0cy5cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgbG9hZFNjcmlwdERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYXRlc3RDb21taXRIYXNoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3RoaXMucmVwb093bmVyfS8ke3RoaXMucmVwb05hbWV9L2NvbW1pdHNgKTtcbiAgICAgICAgICAgIGlmICghbGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLm9rKVxuICAgICAgICAgICAgICAgIHJldHVybiBgRmFpbGVkIHRvIGZldGNoIGxhdGVzdCBjb21taXQgaGFzaCBmcm9tIEdpdEh1YjogJHtsYXRlc3RDb21taXRIYXNoUmVzcG9uc2Uuc3RhdHVzVGV4dH0gKCR7bGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLnN0YXR1c30pYDtcblxuICAgICAgICAgICAgdGhpcy5sYXRlc3RDb21taXRIYXNoID0gKChhd2FpdCBsYXRlc3RDb21taXRIYXNoUmVzcG9uc2UuanNvbigpKSBhcyB7IHNoYTogc3RyaW5nIH1bXSlbMF0uc2hhO1xuXG4gICAgICAgICAgICBjb25zdCBzY3JpcHREYXRhUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyR7dGhpcy5yZXBvT3duZXJ9LyR7dGhpcy5yZXBvTmFtZX0vJHt0aGlzLmxhdGVzdENvbW1pdEhhc2h9L3NjcmlwdHMuanNvbmAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKCFzY3JpcHREYXRhUmVzcG9uc2Uub2spXG4gICAgICAgICAgICAgICAgcmV0dXJuIGBGYWlsZWQgdG8gZmV0Y2ggc2NyaXB0IGRhdGEgZnJvbSBHaXRIdWI6ICR7c2NyaXB0RGF0YVJlc3BvbnNlLnN0YXR1c1RleHR9ICgke3NjcmlwdERhdGFSZXNwb25zZS5zdGF0dXN9KWA7XG5cbiAgICAgICAgICAgIHRoaXMuc2NyaXB0cyA9IChhd2FpdCBzY3JpcHREYXRhUmVzcG9uc2UuanNvbigpKSBhcyBTY3JpcHRbXTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSGFuZGxlcyBhbmQgZWRpdHMvY3JlYXRlcyBwYWdlcyBmb3IgYSBnaXZlbiBzY3JpcHQuXG4gICAgICAgICAqIEBwYXJhbSBzY3JpcHQgVGhlIHNjcmlwdCB0byBoYW5kbGUuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVNjcmlwdChzY3JpcHQ6IFNjcmlwdCkge1xuICAgICAgICAgICAgY29uc3Qgc3VicGFnZU5hbWUgPSBgVXNlcjpFZWppdDQzL3NjcmlwdHMvJHtzY3JpcHQubmFtZX1gO1xuICAgICAgICAgICAgY29uc3Qgc3VicGFnZVRhbGtOYW1lID0gYFVzZXIgdGFsazpFZWppdDQzL3NjcmlwdHMvJHtzY3JpcHQubmFtZX1gO1xuICAgICAgICAgICAgY29uc3Qgc2NyaXB0TmFtZSA9IGAke3N1YnBhZ2VOYW1lfS5qc2A7XG4gICAgICAgICAgICBjb25zdCBzdHlsZU5hbWUgPSBgJHtzdWJwYWdlTmFtZX0uY3NzYDtcblxuICAgICAgICAgICAgY29uc3QgZnVsbFN1YnBhZ2VJbmZvID0gW1xuICAgICAgICAgICAgICAgICd7e1VzZXI6RWVqaXQ0My9zY3JpcHQtZG9jdW1lbnRhdGlvbicsIC8vXG4gICAgICAgICAgICAgICAgc2NyaXB0LmltYWdlID09PSBmYWxzZSA/IGB8IGltYWdlICAgICAgICAgICAgID0gJHtzY3JpcHQuaW1hZ2V9YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgc2NyaXB0Wydpbi1kZXZlbG9wbWVudCddID8gYHwgaW4tZGV2ZWxvcG1lbnQgICAgPSAke3NjcmlwdFsnaW4tZGV2ZWxvcG1lbnQnXX1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHRbJ3VzZS1pbnN0ZWFkJ11cbiAgICAgICAgICAgICAgICAgICAgPyBgfCB1c2UtaW5zdGVhZCAgICAgICA9ICR7c2NyaXB0Wyd1c2UtaW5zdGVhZCddLmluY2x1ZGVzKCdVc2VyOicpID8gc2NyaXB0Wyd1c2UtaW5zdGVhZCddIDogYFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvJHtzY3JpcHRbJ3VzZS1pbnN0ZWFkJ119fCR7c2NyaXB0Wyd1c2UtaW5zdGVhZCddfV1dYH1gXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHRbJ2ltYWdlLWNhcHRpb24nXSA/IGB8IGltYWdlLWNhcHRpb24gICAgID0gJHtzY3JpcHRbJ2ltYWdlLWNhcHRpb24nXX1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHRbJ290aGVyLWF1dGhvcnMnXVxuICAgICAgICAgICAgICAgICAgICA/IGB8IG90aGVyLWF1dGhvcnMgICAgID0gJHtzY3JpcHRbJ290aGVyLWF1dGhvcnMnXS5tYXAoKGF1dGhvcikgPT4gYFtbVXNlcjoke2F1dGhvcn18JHthdXRob3J9XV1gKS5qb2luKCcsICcpfWBcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgIGB8IGRlc2NyaXB0aW9uLXNob3J0ID0gJHtzY3JpcHRbJ3Nob3J0LWRlc2NyaXB0aW9uJ119YCxcbiAgICAgICAgICAgICAgICBgfCBkZXNjcmlwdGlvbiAgICAgICA9ICR7c2NyaXB0LmRlc2NyaXB0aW9ufWAsXG4gICAgICAgICAgICAgICAgc2NyaXB0LnVzYWdlID8gYHwgdXNhZ2UgICAgICAgICAgICAgPSAke3NjcmlwdC51c2FnZX1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICBzY3JpcHQuY2hhbmdlbG9nXG4gICAgICAgICAgICAgICAgICAgID8gYHwgY2hhbmdlbG9nICAgICAgICAgPSBcXG4ke09iamVjdC5lbnRyaWVzKHNjcmlwdC5jaGFuZ2Vsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoW2RhdGUsIGRlc2NyaXB0aW9uXSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKiAnJyd7e3N0YXJ0IGRhdGUgYW5kIGFnZXwke2RhdGV9fX06JycnJHtBcnJheS5pc0FycmF5KGRlc2NyaXB0aW9uKSA/IGBcXG4ke2Rlc2NyaXB0aW9uLm1hcCgobGluZSkgPT4gYCoqICR7bGluZX1gKS5qb2luKCdcXG4nKX1gIDogYCAke2Rlc2NyaXB0aW9ufWB9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignXFxuJyl9YFxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgYHwgc2tpbi1zdXBwb3J0ICAgICAgPSB7e1VzZXI6RWVqaXQ0My9zY3JpcHQtZG9jdW1lbnRhdGlvbi9za2luLXN1cHBvcnR8JHtPYmplY3QuZW50cmllcyhzY3JpcHRbJ3NraW4tc3VwcG9ydCddKVxuICAgICAgICAgICAgICAgICAgICAubWFwKChbc2tpbiwgc3RhdHVzXSkgPT4gYCR7c2tpbn09JHtzdGF0dXN9YClcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJ3wnKX19fWAsXG4gICAgICAgICAgICAgICAgYHwgcmVsZWFzZWQgICAgICAgICAgPSB7e3N0YXJ0IGRhdGUgYW5kIGFnZXwke3NjcmlwdC5yZWxlYXNlZH19fWAsXG4gICAgICAgICAgICAgICAgYHwgdXBkYXRlZCAgICAgICAgICAgPSB7e3N0YXJ0IGRhdGUgYW5kIGFnZXwke3NjcmlwdC51cGRhdGVkfX19YCxcbiAgICAgICAgICAgICAgICAnfX0nLFxuICAgICAgICAgICAgXS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAgICAgICAgIGxldCBzY3JpcHRDb250ZW50ID0gbnVsbDtcblxuICAgICAgICAgICAgY29uc3Qgc2NyaXB0Q29udGVudFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS8ke3RoaXMucmVwb093bmVyfS8ke3RoaXMucmVwb05hbWV9LyR7dGhpcy5sYXRlc3RDb21taXRIYXNofS9kaXN0L3NjcmlwdHMvJHtzY3JpcHQubmFtZX0uanNgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChzY3JpcHRDb250ZW50UmVzcG9uc2Uub2spIHNjcmlwdENvbnRlbnQgPSBhd2FpdCBzY3JpcHRDb250ZW50UmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBtdy5ub3RpZnkoXG4gICAgICAgICAgICAgICAgICAgIGBGYWlsZWQgdG8gZmV0Y2ggXCIke3NjcmlwdC5uYW1lfS5qc1wiIGZyb20gR2l0SHViOiAke3NjcmlwdENvbnRlbnRSZXNwb25zZS5zdGF0dXNUZXh0fSAoJHtzY3JpcHRDb250ZW50UmVzcG9uc2Uuc3RhdHVzfSlgLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbGV0IHN0eWxlQ29udGVudCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoc2NyaXB0LmNzcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlQ29udGVudFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgICAgICAgICAgIGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJHt0aGlzLnJlcG9Pd25lcn0vJHt0aGlzLnJlcG9OYW1lfS8ke3RoaXMubGF0ZXN0Q29tbWl0SGFzaH0vZGlzdC9zdHlsZXMvJHtzY3JpcHQubmFtZX0uY3NzYCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlQ29udGVudFJlc3BvbnNlLm9rKSBzdHlsZUNvbnRlbnQgPSBhd2FpdCBzdHlsZUNvbnRlbnRSZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoXG4gICAgICAgICAgICAgICAgICAgICAgICBgRmFpbGVkIHRvIGZldGNoIFwiJHtzY3JpcHQubmFtZX0uY3NzXCIgZnJvbSBHaXRIdWI6ICR7c3R5bGVDb250ZW50UmVzcG9uc2Uuc3RhdHVzVGV4dH0gKCR7c3R5bGVDb250ZW50UmVzcG9uc2Uuc3RhdHVzfSlgLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXNjcmlwdC5wZXJzb25hbCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZWRpdE9yQ3JlYXRlKHN1YnBhZ2VOYW1lLCBmdWxsU3VicGFnZUluZm8uam9pbignXFxuJyksICdTeW5jaW5nIHNjcmlwdCBkb2N1bWVudGF0aW9uIGZyb20gR2l0SHViJyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5lZGl0T3JDcmVhdGUoXG4gICAgICAgICAgICAgICAgICAgIHN1YnBhZ2VUYWxrTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgJyNSRURJUkVDVCBbW1VzZXIgdGFsazpFZWppdDQzXV0nLFxuICAgICAgICAgICAgICAgICAgICAnUmVkaXJlY3Rpbmcgc2NyaXB0IGRvY3VtZW50YXRpb24gdGFsayBwYWdlIHRvIG1haW4gdXNlciB0YWxrIHBhZ2UnLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzY3JpcHRDb250ZW50KSBhd2FpdCB0aGlzLmVkaXRPckNyZWF0ZShzY3JpcHROYW1lLCBzY3JpcHRDb250ZW50LCAnU3luY2luZyBzY3JpcHQgZnJvbSBHaXRIdWInKTtcblxuICAgICAgICAgICAgaWYgKHNjcmlwdC5jc3MgJiYgc3R5bGVDb250ZW50KSBhd2FpdCB0aGlzLmVkaXRPckNyZWF0ZShzdHlsZU5hbWUsIHN0eWxlQ29udGVudCwgJ1N5bmNpbmcgc3R5bGVzIGZyb20gR2l0SHViJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBzY3JpcHRzIHRvIGEgYnVsbGV0ZWQgbGlzdC5cbiAgICAgICAgICogQHBhcmFtIHNjcmlwdHMgVGhlIHNjcmlwdHMgdG8gbWFwLlxuICAgICAgICAgKiBAcmV0dXJucyBUaGUgbWFwcGVkIHNjcmlwdHMuXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIG1hcFNjcmlwdHMoc2NyaXB0czogU2NyaXB0W10pIHtcbiAgICAgICAgICAgIHJldHVybiBzY3JpcHRzXG4gICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICAgKHNjcmlwdCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIGAqIFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvJHtzY3JpcHQubmFtZX0ke3NjcmlwdC5wZXJzb25hbCA/ICcuanMnIDogJyd9fCR7c2NyaXB0Lm5hbWV9XV0gLSAke3NjcmlwdFsnc2hvcnQtZGVzY3JpcHRpb24nXSB8fCBzY3JpcHQuZGVzY3JpcHRpb259JHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRbJ2luLWRldmVsb3BtZW50J10gPyAnICg8c3BhbiBzdHlsZT1cImNvbG9yOiAjYmQyODI4XCI+aW4gZGV2ZWxvcG1lbnQ8L3NwYW4+KScgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSR7c2NyaXB0Wyd1c2UtaW5zdGVhZCddID8gJyAoPHNwYW4gc3R5bGU9XCJjb2xvcjogI2JkMjgyOFwiPmRlcHJlY2F0ZWQ8L3NwYW4+KScgOiAnJ31gLFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAuam9pbignXFxuJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogRWRpdHMgYSBwYWdlLCBvciBjcmVhdGVzIGl0IGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgICAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgb2YgdGhlIHBhZ2UgdG8gZWRpdC5cbiAgICAgICAgICogQHBhcmFtIHRleHQgVGhlIHBhZ2UgY29udGVudCB0byBzZXQuXG4gICAgICAgICAqIEBwYXJhbSBzdW1tYXJ5IFRoZSBlZGl0IHN1bW1hcnkgKHdpbGwgYXBwZW5kIHNjcmlwdCBub3RpY2UpLlxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBhc3luYyBlZGl0T3JDcmVhdGUodGl0bGU6IHN0cmluZywgdGV4dDogc3RyaW5nLCBzdW1tYXJ5OiBzdHJpbmcpIHtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gJyAodmlhIFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvc2NyaXB0LXVwZGF0ZXIuanN8c2NyaXB0XV0pJztcbiAgICAgICAgICAgIGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5lZGl0KHRpdGxlLCAoKSA9PiAoeyB0ZXh0LCBzdW1tYXJ5LCB3YXRjaGxpc3Q6ICd3YXRjaCcgfSkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKGFzeW5jIChlcnJvckNvZGU6IHN0cmluZywgZXJyb3JJbmZvOiBNZWRpYVdpa2lEYXRhRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ25vY3JlYXRlLW1pc3NpbmcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IG13LkFwaSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZSh0aXRsZSwgeyBzdW1tYXJ5LCB3YXRjaGxpc3Q6ICd3YXRjaCcgfSwgdGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yQ29kZTogc3RyaW5nLCBlcnJvckluZm86IE1lZGlhV2lraURhdGFFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYEVycm9yIGNyZWF0aW5nICR7dGl0bGV9OiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYEVycm9yIGVkaXRpbmcgb3IgY3JlYXRpbmcgJHt0aXRsZX06ICR7ZXJyb3JJbmZvPy5lcnJvci5pbmZvID8/ICdVbmtub3duIGVycm9yJ30gKCR7ZXJyb3JDb2RlfSlgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKFNjcmlwdFVwZGF0ZXJEaWFsb2cucHJvdG90eXBlLCBPTy51aS5Qcm9jZXNzRGlhbG9nLnByb3RvdHlwZSk7XG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7OzthQXFCQSxHQUFHLE9BQU8sTUFBTSxDQUFDLGlCQUFrQixlQUFnQixrQkFBbUIsaUJBQWlCLEVBQUcsSUFBTSxDQUM1RixHQUFJLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSxXQUFhLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSxlQUFnQixPQUVqRyxNQUFNQSxFQUFrQixTQUFTLGNBQWMsaUJBQWlCLEVBQUcsVUFBVSxFQUFJLEVBRTNFQyxFQUFPLFNBQVMsY0FBYyxHQUFHLEVBQ3ZDQSxFQUFLLEtBQU8sSUFDWkEsRUFBSyxNQUFNLFdBQWEsT0FDeEJBLEVBQUssWUFBYyxtQkFDbkJBLEVBQUssaUJBQWlCLFFBQVVDLEdBQVUsQ0FDdENBLEVBQU0sZUFBZSxFQUVyQixNQUFNQyxFQUFnQixJQUFJLEdBQUcsR0FBRyxjQUNoQyxTQUFTLEtBQUssT0FBT0EsRUFBYyxTQUFTLENBQUMsQ0FBQyxFQUU5QyxNQUFNQyxFQUFzQixJQUFJQyxFQUNoQ0YsRUFBYyxXQUFXLENBQUNDLENBQW1CLENBQUMsRUFFOUNBLEVBQW9CLEtBQUssQ0FDN0Is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LFdBQVdFLEVBQW1CLENBQ2xDLE9BQU9BLEVBQ0YsSUFDSXpCLEdBQ0csNEJBQTRCQSxFQUFPLElBQUksR0FBR0EsRUFBTyxTQUFXLE1BQVEsRUFBRSxJQUFJQSxFQUFPLElBQUksUUFBUUEsRUFBTyxtQkFBbUIsR0FBS0EsRUFBTyxXQUFXLEdBQzFJQSxFQUFPLGdCQUFnQixFQUFJLHdEQUEwRCxFQUN6RixHQUFHQSxFQUFPLGFBQWEsRUFBSSxvREFBc0QsRUFBRSxFQUMzRixFQUNDLEtBQUs7QUFBQSxDQUFJLENBQ2xCLENBUUEsTUFBYyxhQUFhMEIsRUFBZUMsRUFBY0MsRUFBaUIsQ0FDckVBLEdBQVcsMkRBQ1gsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUNaLEtBQUtGLEVBQU8sS0FBTyxDQUFFLEtBQUFDLEVBQU0sUUFBQUMsRUFBUyxVQUFXLE9BQVEsRUFBRSxFQUN6RCxNQUFNLE1BQU9DLEVBQW1CQyxJQUFrQyxDQUMvRCxHQUFJRCxJQUFjLG1CQUNkLE1BQU0sSUFBSSxHQUFHLElBQUksRUFDWixPQUFPSCxFQUFPLENBQUUsUUFBQUUsRUFBUyxVQUFXLE9BQVEsRUFBR0QsQ0FBSSxFQUNuRCxNQUFNLENBQUNFLEVBQW1CQyxJQUFrQyxDQUN6RCxHQUFHLE9BQU8sa0JBQWtCSixDQUFLLEtBQUtJLEdBQVcsTUFBTSxNQUFRLGVBQWUsS0FBS0QsQ0FBUyxJQUFLLENBQzdGLEtBQU0sT0FDVixDQUFDLENBRUwsQ0FBQyxNQUNKLENBQ0QsR0FBRyxPQUFPLDZCQUE2QkgsQ0FBSyxLQUFLSSxHQUFXLE1BQU0sTUFBUSxlQUFlLEtBQUtELENBQVMsSUFBSyxDQUN4RyxLQUFNLE9BQ1YsQ0FBQyxFQUNELE1BQ0osQ0FDSixDQUFDLENBQ1QsQ0FDSixDQUVBLE9BQU8sT0FBT2hDLEVBQW9CLFVBQVcsR0FBRyxHQUFHLGNBQWMsU0FBUyxDQUM5RSxDQUFDIiwKICAibmFtZXMiOiBbImZ1bGxMaW5rRWxlbWVudCIsICJsaW5rIiwgImV2ZW50IiwgIndpbmRvd01hbmFnZXIiLCAic2NyaXB0VXBkYXRlckRpYWxvZyIsICJTY3JpcHRVcGRhdGVyRGlhbG9nIiwgImVycm9yIiwgIm1lc3NhZ2VFbGVtZW50IiwgInNjcmlwdCIsICJjaGVja2JveCIsICJsYXlvdXQiLCAiYWN0aW9uIiwgInNlbGVjdGVkU2NyaXB0cyIsICJzY3JpcHROYW1lIiwgIm1ldGhvZCIsICJkZWZlcnJlZCIsICJyZXN1bHQiLCAibGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlIiwgInNjcmlwdERhdGFSZXNwb25zZSIsICJzdWJwYWdlTmFtZSIsICJzdWJwYWdlVGFsa05hbWUiLCAic3R5bGVOYW1lIiwgImZ1bGxTdWJwYWdlSW5mbyIsICJhdXRob3IiLCAiZGF0ZSIsICJkZXNjcmlwdGlvbiIsICJsaW5lIiwgInNraW4iLCAic3RhdHVzIiwgInNjcmlwdENvbnRlbnQiLCAic2NyaXB0Q29udGVudFJlc3BvbnNlIiwgInN0eWxlQ29udGVudCIsICJzdHlsZUNvbnRlbnRSZXNwb25zZSIsICJzY3JpcHRzIiwgInRpdGxlIiwgInRleHQiLCAic3VtbWFyeSIsICJlcnJvckNvZGUiLCAiZXJyb3JJbmZvIl0KfQo=
