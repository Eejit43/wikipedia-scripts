"use strict";mw.loader.using(["mediawiki.util"],()=>{if(mw.config.get("wgUserName")!=="Eejit43"||mw.config.get("wgPageName")!=="User:Eejit43")return;const i="Eejit43",n="wikipedia-scripts";mw.util.addPortletLink(mw.config.get("skin")==="minerva"?"p-tb":"p-cactions","#","Sync user scripts from GitHub","sync-scripts").addEventListener("click",async y=>{y.preventDefault();const g=await fetch(`https://api.github.com/repos/${i}/${n}/commits`);if(!g.ok)return mw.notify(`Failed to fetch latest commit hash from GitHub: ${g.statusText} (${g.status})`,{type:"error",tag:"sync-scripts-notification"});const $=(await g.json())[0].sha,u=await fetch(`https://raw.githubusercontent.com/${i}/${n}/${$}/scripts.json`);if(!u.ok)return mw.notify(`Failed to fetch script data from GitHub: ${u.statusText} (${u.status})`,{type:"error",tag:"sync-scripts-notification"});const a=await u.json();mw.notify("Syncing scripts...",{autoHide:!1,tag:"sync-scripts-notification"}),await Promise.all(a.map(async t=>{const e=`User:Eejit43/scripts/${t.name}`,o=`User talk:Eejit43/scripts/${t.name}`,l=`${e}.js`,d=`${e}.css`,w=["{{User:Eejit43/script-documentation",t["use-instead"]?`| use-instead       = [[User:Eejit43/scripts/${t["use-instead"]}|${t["use-instead"]}]]`:null,t["image-size"]?`| image-size        = ${t["image-size"]}`:null,t["image-caption"]?`| image-caption     = ${t["image-caption"]}`:null,t["other-authors"]?`| other-authors     = ${t["other-authors"].map(s=>`[[User:${s}|${s}]]`).join(", ")}`:null,`| description-short = ${t["short-description"]}`,`| description       = ${t.description}`,t.usage?`| usage             = ${t.usage}`:null,t.changelog?`| changelog         = 
${Object.entries(t.changelog).map(([s,m])=>`* '''{{start date and age|${s}}}:'''${Array.isArray(m)?`
${m.map(k=>`** ${k}`).join(`
`)}`:` ${m}`}`).join(`
`)}`:null,`| skin-support      = {{User:Eejit43/skin-support|${Object.entries(t["skin-support"]).map(([s,m])=>`${s}=${m}`).join("|")}}}`,`| released          = {{start date and age|${t.released}}}`,`| updated           = {{start date and age|${t.updated}}}`,"}}"].filter(Boolean);let c=null;const p=await fetch(`https://raw.githubusercontent.com/${i}/${n}/${$}/dist/scripts/${t.name}.js`);if(p.ok)c=await p.text();else return mw.notify(`Failed to fetch "${t.name}.js" from GitHub: ${p.statusText} (${p.status})`,{type:"error",tag:"sync-scripts-notification"});let h=null;if(t.css){const s=await fetch(`https://raw.githubusercontent.com/${i}/${n}/${$}/dist/styles/${t.name}.css`);s.ok?h=await s.text():mw.notify(`Failed to fetch "${t.name}.css" from GitHub: ${s.statusText} (${s.status})`,{type:"error",tag:"sync-scripts-notification"})}t.personal||(await r(e,w.join(`
`),"Syncing script documentation from GitHub"),await r(o,"#REDIRECT [[User talk:Eejit43]]","Redirecting script documentation talk page to main user talk page")),c&&await r(l,`// <nowiki>
// Note: This script was compiled from TypeScript. For a more readable version, see https://github.com/${i}/${n}/blob/main/scripts/${t.name}.ts

${c}
// </nowiki>`,"Syncing script from GitHub"),t.css&&h&&await r(d,`/* <nowiki> */
/* Note: This script was compiled from modern CSS. For a more readable version, see https://github.com/${i}/${n}/blob/main/styles/${t.name}.css */

${h}
/* </nowiki> */`,"Syncing styles from GitHub")})),await r("User:Eejit43/scripts-info",[f(a.filter(t=>!t.personal&&!t.fork)),"","=== Forks ===",f(a.filter(t=>t.fork)),"","=== Personal scripts ===",f(a.filter(t=>t.personal))].join(`
`),"Syncing script list from GitHub"),mw.notify(`Synced ${a.length} scripts from GitHub!`,{type:"success",tag:"sync-scripts-notification"});function f(t){return t.map(e=>`* [[User:Eejit43/scripts/${e.name}${e.personal?".js":""}|${e.name}]] - ${e["short-description"]||e.description}${e["use-instead"]?' (<span style="color: #bd2828">deprecated</span>)':""}`).join(`
`)}async function r(t,e,o){o+=" (via [[User:Eejit43/scripts/script-updater.js|script]])",await new mw.Api().edit(t,()=>({text:e,summary:o,watchlist:"watch"})).catch(async(l,d)=>{if(l==="nocreate-missing")await new mw.Api().create(t,{summary:o,watchlist:"watch"},e).catch((w,c)=>{mw.notify(`Error creating ${t}: ${c?.error.info??"Unknown error"} (${w})`,{type:"error"})});else{mw.notify(`Error editing or creating ${t}: ${d?.error.info??"Unknown error"} (${l})`,{type:"error"});return}})}})});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy9zY3JpcHQtdXBkYXRlci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgTWVkaWFXaWtpRGF0YUVycm9yIH0gZnJvbSAnLi4vZ2xvYmFsLXR5cGVzJztcblxuaW50ZXJmYWNlIFNjcmlwdCB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgICd1c2UtaW5zdGVhZCc/OiBzdHJpbmc7XG4gICAgJ2ltYWdlLXNpemUnPzogc3RyaW5nO1xuICAgICdpbWFnZS1jYXB0aW9uJz86IHN0cmluZztcbiAgICAnc2hvcnQtZGVzY3JpcHRpb24nOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICB1c2FnZT86IHN0cmluZztcbiAgICBjaGFuZ2Vsb2c/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT47XG4gICAgJ290aGVyLWF1dGhvcnMnPzogc3RyaW5nW107XG4gICAgZm9yaz86IHRydWU7XG4gICAgcGVyc29uYWw/OiB0cnVlO1xuICAgICdza2luLXN1cHBvcnQnOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcbiAgICByZWxlYXNlZDogc3RyaW5nO1xuICAgIHVwZGF0ZWQ6IHN0cmluZztcbiAgICBjc3M/OiB0cnVlO1xufVxuXG5tdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCddLCAoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnVXNlck5hbWUnKSAhPT0gJ0Vlaml0NDMnIHx8IG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSAhPT0gJ1VzZXI6RWVqaXQ0MycpIHJldHVybjtcblxuICAgIGNvbnN0IHJlcG9Pd25lciA9ICdFZWppdDQzJztcbiAgICBjb25zdCByZXBvTmFtZSA9ICd3aWtpcGVkaWEtc2NyaXB0cyc7XG5cbiAgICBjb25zdCBsaW5rID0gbXcudXRpbC5hZGRQb3J0bGV0TGluayhtdy5jb25maWcuZ2V0KCdza2luJykgPT09ICdtaW5lcnZhJyA/ICdwLXRiJyA6ICdwLWNhY3Rpb25zJywgJyMnLCAnU3luYyB1c2VyIHNjcmlwdHMgZnJvbSBHaXRIdWInLCAnc3luYy1zY3JpcHRzJykhO1xuXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IGxhdGVzdENvbW1pdEhhc2hSZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb093bmVyfS8ke3JlcG9OYW1lfS9jb21taXRzYCk7XG4gICAgICAgIGlmICghbGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLm9rKVxuICAgICAgICAgICAgcmV0dXJuIG13Lm5vdGlmeShgRmFpbGVkIHRvIGZldGNoIGxhdGVzdCBjb21taXQgaGFzaCBmcm9tIEdpdEh1YjogJHtsYXRlc3RDb21taXRIYXNoUmVzcG9uc2Uuc3RhdHVzVGV4dH0gKCR7bGF0ZXN0Q29tbWl0SGFzaFJlc3BvbnNlLnN0YXR1c30pYCwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBsYXRlc3RDb21taXRIYXNoID0gKChhd2FpdCBsYXRlc3RDb21taXRIYXNoUmVzcG9uc2UuanNvbigpKSBhcyB7IHNoYTogc3RyaW5nIH1bXSlbMF0uc2hhO1xuXG4gICAgICAgIGNvbnN0IHNjcmlwdERhdGFSZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJHtyZXBvT3duZXJ9LyR7cmVwb05hbWV9LyR7bGF0ZXN0Q29tbWl0SGFzaH0vc2NyaXB0cy5qc29uYCk7XG4gICAgICAgIGlmICghc2NyaXB0RGF0YVJlc3BvbnNlLm9rKVxuICAgICAgICAgICAgcmV0dXJuIG13Lm5vdGlmeShgRmFpbGVkIHRvIGZldGNoIHNjcmlwdCBkYXRhIGZyb20gR2l0SHViOiAke3NjcmlwdERhdGFSZXNwb25zZS5zdGF0dXNUZXh0fSAoJHtzY3JpcHREYXRhUmVzcG9uc2Uuc3RhdHVzfSlgLCB7IHR5cGU6ICdlcnJvcicsIHRhZzogJ3N5bmMtc2NyaXB0cy1ub3RpZmljYXRpb24nIH0pO1xuXG4gICAgICAgIGNvbnN0IHNjcmlwdERhdGEgPSAoYXdhaXQgc2NyaXB0RGF0YVJlc3BvbnNlLmpzb24oKSkgYXMgU2NyaXB0W107XG5cbiAgICAgICAgbXcubm90aWZ5KCdTeW5jaW5nIHNjcmlwdHMuLi4nLCB7IGF1dG9IaWRlOiBmYWxzZSwgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicgfSk7XG5cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICBzY3JpcHREYXRhLm1hcChhc3luYyAoc2NyaXB0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VicGFnZU5hbWUgPSBgVXNlcjpFZWppdDQzL3NjcmlwdHMvJHtzY3JpcHQubmFtZX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1YnBhZ2VUYWxrTmFtZSA9IGBVc2VyIHRhbGs6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9YDtcbiAgICAgICAgICAgICAgICBjb25zdCBzY3JpcHROYW1lID0gYCR7c3VicGFnZU5hbWV9LmpzYDtcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZU5hbWUgPSBgJHtzdWJwYWdlTmFtZX0uY3NzYDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGZ1bGxTdWJwYWdlSW5mbyA9IFtcbiAgICAgICAgICAgICAgICAgICAgJ3t7VXNlcjpFZWppdDQzL3NjcmlwdC1kb2N1bWVudGF0aW9uJywgLy9cbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Wyd1c2UtaW5zdGVhZCddID8gYHwgdXNlLWluc3RlYWQgICAgICAgPSBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Wyd1c2UtaW5zdGVhZCddfXwke3NjcmlwdFsndXNlLWluc3RlYWQnXX1dXWAgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzY3JpcHRbJ2ltYWdlLXNpemUnXSA/IGB8IGltYWdlLXNpemUgICAgICAgID0gJHtzY3JpcHRbJ2ltYWdlLXNpemUnXX1gIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0WydpbWFnZS1jYXB0aW9uJ10gPyBgfCBpbWFnZS1jYXB0aW9uICAgICA9ICR7c2NyaXB0WydpbWFnZS1jYXB0aW9uJ119YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdFsnb3RoZXItYXV0aG9ycyddID8gYHwgb3RoZXItYXV0aG9ycyAgICAgPSAke3NjcmlwdFsnb3RoZXItYXV0aG9ycyddLm1hcCgoYXV0aG9yKSA9PiBgW1tVc2VyOiR7YXV0aG9yfXwke2F1dGhvcn1dXWApLmpvaW4oJywgJyl9YCA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGB8IGRlc2NyaXB0aW9uLXNob3J0ID0gJHtzY3JpcHRbJ3Nob3J0LWRlc2NyaXB0aW9uJ119YCxcbiAgICAgICAgICAgICAgICAgICAgYHwgZGVzY3JpcHRpb24gICAgICAgPSAke3NjcmlwdC5kZXNjcmlwdGlvbn1gLFxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQudXNhZ2UgPyBgfCB1c2FnZSAgICAgICAgICAgICA9ICR7c2NyaXB0LnVzYWdlfWAgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuY2hhbmdlbG9nXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGB8IGNoYW5nZWxvZyAgICAgICAgID0gXFxuJHtPYmplY3QuZW50cmllcyhzY3JpcHQuY2hhbmdlbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoW2RhdGUsIGRlc2NyaXB0aW9uXSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCogJycne3tzdGFydCBkYXRlIGFuZCBhZ2V8JHtkYXRlfX19OicnJyR7QXJyYXkuaXNBcnJheShkZXNjcmlwdGlvbikgPyBgXFxuJHtkZXNjcmlwdGlvbi5tYXAoKGxpbmUpID0+IGAqKiAke2xpbmV9YCkuam9pbignXFxuJyl9YCA6IGAgJHtkZXNjcmlwdGlvbn1gfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignXFxuJyl9YFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBgfCBza2luLXN1cHBvcnQgICAgICA9IHt7VXNlcjpFZWppdDQzL3NraW4tc3VwcG9ydHwke09iamVjdC5lbnRyaWVzKHNjcmlwdFsnc2tpbi1zdXBwb3J0J10pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChbc2tpbiwgc3RhdHVzXSkgPT4gYCR7c2tpbn09JHtzdGF0dXN9YClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCd8Jyl9fX1gLFxuICAgICAgICAgICAgICAgICAgICBgfCByZWxlYXNlZCAgICAgICAgICA9IHt7c3RhcnQgZGF0ZSBhbmQgYWdlfCR7c2NyaXB0LnJlbGVhc2VkfX19YCxcbiAgICAgICAgICAgICAgICAgICAgYHwgdXBkYXRlZCAgICAgICAgICAgPSB7e3N0YXJ0IGRhdGUgYW5kIGFnZXwke3NjcmlwdC51cGRhdGVkfX19YCxcbiAgICAgICAgICAgICAgICAgICAgJ319JyxcbiAgICAgICAgICAgICAgICBdLmZpbHRlcihCb29sZWFuKTtcblxuICAgICAgICAgICAgICAgIGxldCBzY3JpcHRDb250ZW50ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNjcmlwdENvbnRlbnRSZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vJHtyZXBvT3duZXJ9LyR7cmVwb05hbWV9LyR7bGF0ZXN0Q29tbWl0SGFzaH0vZGlzdC9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9LmpzYCk7XG4gICAgICAgICAgICAgICAgaWYgKHNjcmlwdENvbnRlbnRSZXNwb25zZS5vaykgc2NyaXB0Q29udGVudCA9IGF3YWl0IHNjcmlwdENvbnRlbnRSZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXcubm90aWZ5KGBGYWlsZWQgdG8gZmV0Y2ggXCIke3NjcmlwdC5uYW1lfS5qc1wiIGZyb20gR2l0SHViOiAke3NjcmlwdENvbnRlbnRSZXNwb25zZS5zdGF0dXNUZXh0fSAoJHtzY3JpcHRDb250ZW50UmVzcG9uc2Uuc3RhdHVzfSlgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbGV0IHN0eWxlQ29udGVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHNjcmlwdC5jc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVDb250ZW50UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLyR7cmVwb093bmVyfS8ke3JlcG9OYW1lfS8ke2xhdGVzdENvbW1pdEhhc2h9L2Rpc3Qvc3R5bGVzLyR7c2NyaXB0Lm5hbWV9LmNzc2ApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZUNvbnRlbnRSZXNwb25zZS5vaykgc3R5bGVDb250ZW50ID0gYXdhaXQgc3R5bGVDb250ZW50UmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYEZhaWxlZCB0byBmZXRjaCBcIiR7c2NyaXB0Lm5hbWV9LmNzc1wiIGZyb20gR2l0SHViOiAke3N0eWxlQ29udGVudFJlc3BvbnNlLnN0YXR1c1RleHR9ICgke3N0eWxlQ29udGVudFJlc3BvbnNlLnN0YXR1c30pYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAnc3luYy1zY3JpcHRzLW5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIXNjcmlwdC5wZXJzb25hbCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBlZGl0T3JDcmVhdGUoc3VicGFnZU5hbWUsIGZ1bGxTdWJwYWdlSW5mby5qb2luKCdcXG4nKSwgJ1N5bmNpbmcgc2NyaXB0IGRvY3VtZW50YXRpb24gZnJvbSBHaXRIdWInKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZWRpdE9yQ3JlYXRlKHN1YnBhZ2VUYWxrTmFtZSwgJyNSRURJUkVDVCBbW1VzZXIgdGFsazpFZWppdDQzXV0nLCAnUmVkaXJlY3Rpbmcgc2NyaXB0IGRvY3VtZW50YXRpb24gdGFsayBwYWdlIHRvIG1haW4gdXNlciB0YWxrIHBhZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc2NyaXB0Q29udGVudClcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZWRpdE9yQ3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGAvLyA8bm93aWtpPlxcbi8vIE5vdGU6IFRoaXMgc2NyaXB0IHdhcyBjb21waWxlZCBmcm9tIFR5cGVTY3JpcHQuIEZvciBhIG1vcmUgcmVhZGFibGUgdmVyc2lvbiwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS8ke3JlcG9Pd25lcn0vJHtyZXBvTmFtZX0vYmxvYi9tYWluL3NjcmlwdHMvJHtzY3JpcHQubmFtZX0udHNcXG5cXG4ke3NjcmlwdENvbnRlbnR9XFxuLy8gPC9ub3dpa2k+YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdTeW5jaW5nIHNjcmlwdCBmcm9tIEdpdEh1YicsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2NyaXB0LmNzcyAmJiBzdHlsZUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGVkaXRPckNyZWF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGAvKiA8bm93aWtpPiAqL1xcbi8qIE5vdGU6IFRoaXMgc2NyaXB0IHdhcyBjb21waWxlZCBmcm9tIG1vZGVybiBDU1MuIEZvciBhIG1vcmUgcmVhZGFibGUgdmVyc2lvbiwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS8ke3JlcG9Pd25lcn0vJHtyZXBvTmFtZX0vYmxvYi9tYWluL3N0eWxlcy8ke3NjcmlwdC5uYW1lfS5jc3MgKi9cXG5cXG4ke3N0eWxlQ29udGVudH1cXG4vKiA8L25vd2lraT4gKi9gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1N5bmNpbmcgc3R5bGVzIGZyb20gR2l0SHViJyxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IGVkaXRPckNyZWF0ZShcbiAgICAgICAgICAgICdVc2VyOkVlaml0NDMvc2NyaXB0cy1pbmZvJyxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBtYXBTY3JpcHRzKHNjcmlwdERhdGEuZmlsdGVyKChzY3JpcHQpID0+ICFzY3JpcHQucGVyc29uYWwgJiYgIXNjcmlwdC5mb3JrKSksIC8vXG4gICAgICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAgICAgJz09PSBGb3JrcyA9PT0nLFxuICAgICAgICAgICAgICAgIG1hcFNjcmlwdHMoc2NyaXB0RGF0YS5maWx0ZXIoKHNjcmlwdCkgPT4gc2NyaXB0LmZvcmspKSxcbiAgICAgICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICAgICAnPT09IFBlcnNvbmFsIHNjcmlwdHMgPT09JyxcbiAgICAgICAgICAgICAgICBtYXBTY3JpcHRzKHNjcmlwdERhdGEuZmlsdGVyKChzY3JpcHQpID0+IHNjcmlwdC5wZXJzb25hbCkpLFxuICAgICAgICAgICAgXS5qb2luKCdcXG4nKSxcbiAgICAgICAgICAgICdTeW5jaW5nIHNjcmlwdCBsaXN0IGZyb20gR2l0SHViJyxcbiAgICAgICAgKTtcblxuICAgICAgICBtdy5ub3RpZnkoYFN5bmNlZCAke3NjcmlwdERhdGEubGVuZ3RofSBzY3JpcHRzIGZyb20gR2l0SHViIWAsIHsgdHlwZTogJ3N1Y2Nlc3MnLCB0YWc6ICdzeW5jLXNjcmlwdHMtbm90aWZpY2F0aW9uJyB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBzY3JpcHRzIHRvIGEgYnVsbGV0ZWQgbGlzdC5cbiAgICAgICAgICogQHBhcmFtIHNjcmlwdHMgVGhlIHNjcmlwdHMgdG8gbWFwLlxuICAgICAgICAgKiBAcmV0dXJucyBUaGUgbWFwcGVkIHNjcmlwdHMuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBtYXBTY3JpcHRzKHNjcmlwdHM6IFNjcmlwdFtdKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NyaXB0c1xuICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgIChzY3JpcHQpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBgKiBbW1VzZXI6RWVqaXQ0My9zY3JpcHRzLyR7c2NyaXB0Lm5hbWV9JHtzY3JpcHQucGVyc29uYWwgPyAnLmpzJyA6ICcnfXwke3NjcmlwdC5uYW1lfV1dIC0gJHtzY3JpcHRbJ3Nob3J0LWRlc2NyaXB0aW9uJ10gfHwgc2NyaXB0LmRlc2NyaXB0aW9ufSR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0Wyd1c2UtaW5zdGVhZCddID8gJyAoPHNwYW4gc3R5bGU9XCJjb2xvcjogI2JkMjgyOFwiPmRlcHJlY2F0ZWQ8L3NwYW4+KScgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfWAsXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFZGl0cyBhIHBhZ2UsIG9yIGNyZWF0ZXMgaXQgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICAgICAgICogQHBhcmFtIHRpdGxlIFRoZSB0aXRsZSBvZiB0aGUgcGFnZSB0byBlZGl0LlxuICAgICAgICAgKiBAcGFyYW0gdGV4dCBUaGUgcGFnZSBjb250ZW50IHRvIHNldC5cbiAgICAgICAgICogQHBhcmFtIHN1bW1hcnkgVGhlIGVkaXQgc3VtbWFyeSAod2lsbCBhcHBlbmQgc2NyaXB0IG5vdGljZSkuXG4gICAgICAgICAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbiBlZGl0T3JDcmVhdGUodGl0bGU6IHN0cmluZywgdGV4dDogc3RyaW5nLCBzdW1tYXJ5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgICAgIHN1bW1hcnkgKz0gJyAodmlhIFtbVXNlcjpFZWppdDQzL3NjcmlwdHMvc2NyaXB0LXVwZGF0ZXIuanN8c2NyaXB0XV0pJztcbiAgICAgICAgICAgIGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5lZGl0KHRpdGxlLCAoKSA9PiAoeyB0ZXh0LCBzdW1tYXJ5LCB3YXRjaGxpc3Q6ICd3YXRjaCcgfSkpXG4gICAgICAgICAgICAgICAgLmNhdGNoKGFzeW5jIChlcnJvckNvZGU6IHN0cmluZywgZXJyb3JJbmZvOiBNZWRpYVdpa2lEYXRhRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ25vY3JlYXRlLW1pc3NpbmcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IG13LkFwaSgpLmNyZWF0ZSh0aXRsZSwgeyBzdW1tYXJ5LCB3YXRjaGxpc3Q6ICd3YXRjaCcgfSwgdGV4dCkuY2F0Y2goKGVycm9yQ29kZTogc3RyaW5nLCBlcnJvckluZm86IE1lZGlhV2lraURhdGFFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG13Lm5vdGlmeShgRXJyb3IgY3JlYXRpbmcgJHt0aXRsZX06ICR7ZXJyb3JJbmZvPy5lcnJvci5pbmZvID8/ICdVbmtub3duIGVycm9yJ30gKCR7ZXJyb3JDb2RlfSlgLCB7IHR5cGU6ICdlcnJvcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBFcnJvciBlZGl0aW5nIG9yIGNyZWF0aW5nICR7dGl0bGV9OiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCwgeyB0eXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuIl0sCiAgIm1hcHBpbmdzIjogImFBb0JBLEdBQUcsT0FBTyxNQUFNLENBQUMsZ0JBQWdCLEVBQUcsSUFBTSxDQUN0QyxHQUFJLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSxXQUFhLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSxlQUFnQixPQUVqRyxNQUFNQSxFQUFZLFVBQ1pDLEVBQVcsb0JBRUosR0FBRyxLQUFLLGVBQWUsR0FBRyxPQUFPLElBQUksTUFBTSxJQUFNLFVBQVksT0FBUyxhQUFjLElBQUssZ0NBQWlD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LFVBQVVELEVBQVcsTUFBTSx3QkFBeUIsQ0FBRSxLQUFNLFVBQVcsSUFBSywyQkFBNEIsQ0FBQyxFQU9uSCxTQUFTa0IsRUFBV0MsRUFBbUIsQ0FDbkMsT0FBT0EsRUFDRixJQUNJbEIsR0FDRyw0QkFBNEJBLEVBQU8sSUFBSSxHQUFHQSxFQUFPLFNBQVcsTUFBUSxFQUFFLElBQUlBLEVBQU8sSUFBSSxRQUFRQSxFQUFPLG1CQUFtQixHQUFLQSxFQUFPLFdBQVcsR0FDMUlBLEVBQU8sYUFBYSxFQUFJLG9EQUFzRCxFQUNsRixFQUNSLEVBQ0MsS0FBSztBQUFBLENBQUksQ0FDbEIsQ0FRQSxlQUFlZ0IsRUFBYUcsRUFBZUMsRUFBY0MsRUFBZ0MsQ0FDckZBLEdBQVcsMkRBQ1gsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUNaLEtBQUtGLEVBQU8sS0FBTyxDQUFFLEtBQUFDLEVBQU0sUUFBQUMsRUFBUyxVQUFXLE9BQVEsRUFBRSxFQUN6RCxNQUFNLE1BQU9DLEVBQW1CQyxJQUFrQyxDQUMvRCxHQUFJRCxJQUFjLG1CQUNkLE1BQU0sSUFBSSxHQUFHLElBQUksRUFBRSxPQUFPSCxFQUFPLENBQUUsUUFBQUUsRUFBUyxVQUFXLE9BQVEsRUFBR0QsQ0FBSSxFQUFFLE1BQU0sQ0FBQ0UsRUFBbUJDLElBQWtDLENBQ2hJLEdBQUcsT0FBTyxrQkFBa0JKLENBQUssS0FBS0ksR0FBVyxNQUFNLE1BQVEsZUFBZSxLQUFLRCxDQUFTLElBQUssQ0FBRSxLQUFNLE9BQVEsQ0FBQyxDQUV0SCxDQUFDLE1BQ0EsQ0FDRCxHQUFHLE9BQU8sNkJBQTZCSCxDQUFLLEtBQUtJLEdBQVcsTUFBTSxNQUFRLGVBQWUsS0FBS0QsQ0FBUyxJQUFLLENBQUUsS0FBTSxPQUFRLENBQUMsRUFDN0gsTUFDSixDQUNKLENBQUMsQ0FDVCxDQUNKLENBQUMsQ0FDTCxDQUFDIiwKICAibmFtZXMiOiBbInJlcG9Pd25lciIsICJyZXBvTmFtZSIsICJldmVudCIsICJsYXRlc3RDb21taXRIYXNoUmVzcG9uc2UiLCAibGF0ZXN0Q29tbWl0SGFzaCIsICJzY3JpcHREYXRhUmVzcG9uc2UiLCAic2NyaXB0RGF0YSIsICJzY3JpcHQiLCAic3VicGFnZU5hbWUiLCAic3VicGFnZVRhbGtOYW1lIiwgInNjcmlwdE5hbWUiLCAic3R5bGVOYW1lIiwgImZ1bGxTdWJwYWdlSW5mbyIsICJhdXRob3IiLCAiZGF0ZSIsICJkZXNjcmlwdGlvbiIsICJsaW5lIiwgInNraW4iLCAic3RhdHVzIiwgInNjcmlwdENvbnRlbnQiLCAic2NyaXB0Q29udGVudFJlc3BvbnNlIiwgInN0eWxlQ29udGVudCIsICJzdHlsZUNvbnRlbnRSZXNwb25zZSIsICJlZGl0T3JDcmVhdGUiLCAibWFwU2NyaXB0cyIsICJzY3JpcHRzIiwgInRpdGxlIiwgInRleHQiLCAic3VtbWFyeSIsICJlcnJvckNvZGUiLCAiZXJyb3JJbmZvIl0KfQo=
