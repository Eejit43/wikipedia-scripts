"use strict";
mw.loader.using(["mediawiki.util"], () => {
  if (mw.config.get("wgPageName") !== "User:Eejit43")
    return;
  const link = mw.util.addPortletLink(mw.config.get("skin") === "minerva" ? "p-tb" : "p-cactions", "#", "Add counts to monitoring list", "add-monitoring-counts");
  link.addEventListener("click", async (event) => {
    event.preventDefault();
    const toCheck = JSON.parse(
      (await new mw.Api().get({
        action: "query",
        formatversion: 2,
        prop: "revisions",
        rvprop: "content",
        rvslots: "*",
        titles: "User:Eejit43/scripts/to-monitor-list.json"
      })).query.pages[0].revisions[0].slots.main.content
    );
    toCheck.categories.forEach(async (check) => {
      const data = await new mw.Api().get({
        action: "query",
        list: "search",
        srinfo: "totalhits",
        srnamespace: getCategory(check),
        srsearch: `incategory:"${check.category}"`
      }).catch((errorCode, errorInfo) => {
        mw.notify(`An error occurred while trying to get category members: ${errorInfo?.error.info ?? "Unknown error"} (${errorCode})`, { type: "error" });
        return null;
      });
      if (!data)
        return;
      const count = data.query.searchinfo.totalhits;
      const element = document.querySelector(`#to-monitor-list-${check.id}`);
      if (!element)
        return mw.notify(`Failed to find element for ID "${check.id}"`);
      element.innerHTML = count === 0 ? '<span style="color: #00733f">None</span>' : `<b><span style="color: #bd2828">${count === 500 ? "500+" : count}</span></b>`;
    });
    toCheck.searches.forEach(async (check) => {
      const data = await new mw.Api().get({
        action: "query",
        list: "search",
        srinfo: "totalhits",
        srnamespace: getCategory(check),
        srsearch: check.search
      }).catch((errorCode, errorInfo) => {
        mw.notify(`An error occurred while trying to get search results: ${errorInfo?.error.info ?? "Unknown error"} (${errorCode})`, { type: "error" });
        return null;
      });
      if (!data)
        return;
      const count = data.query.searchinfo.totalhits;
      const element = document.querySelector(`#to-monitor-list-${check.id}`);
      if (!element)
        return mw.notify(`Failed to find element for ID "${check.id}"`);
      element.innerHTML = count === 0 ? '<span style="color: #00733f">None</span>' : `<b><span style="color: #bd2828">${count.toLocaleString()}</span></b>`;
    });
    toCheck.whatLinksHere.forEach(async (check) => {
      const data = await new mw.Api().get({
        action: "query",
        bllimit: 500,
        blnamespace: getCategory(check),
        bltitle: check.title,
        list: "backlinks"
      }).catch((errorCode, errorInfo) => {
        mw.notify(`An error occurred while trying to get backlinks: ${errorInfo?.error.info ?? "Unknown error"} (${errorCode})`, { type: "error" });
        return null;
      });
      if (!data)
        return;
      const count = data.query.backlinks.length;
      const element = document.querySelector(`#to-monitor-list-${check.id}`);
      if (!element)
        return mw.notify(`Failed to find element for ID "${check.id}"`);
      element.innerHTML = count === 0 ? '<span style="color: #00733f">None</span>' : `<b><span style="color: #bd2828">${count === 500 ? "500+" : count}</span></b>`;
    });
    toCheck.transclusions.forEach(async (check) => {
      const data = await new mw.Api().get({
        action: "query",
        eilimit: 500,
        einamespace: getCategory(check),
        eititle: check.title,
        list: "embeddedin"
      }).catch((errorCode, errorInfo) => {
        mw.notify(`An error occurred while trying to get transclusions: ${errorInfo?.error.info ?? "Unknown error"} (${errorCode})`, { type: "error" });
        return null;
      });
      if (!data)
        return;
      const count = data.query.embeddedin.length;
      const element = document.querySelector(`#to-monitor-list-${check.id}`);
      if (!element)
        return mw.notify(`Failed to find element for ID "${check.id}"`);
      element.innerHTML = count === 0 ? '<span style="color: #00733f">None</span>' : `<b><span style="color: #bd2828">${count === 500 ? "500+" : count}</span></b>`;
    });
    mw.notify('Successfully added missing counts to "Stuff to monitor"', { type: "success" });
  });
});
function getCategory({ namespace, notNamespace }) {
  if (!namespace && !notNamespace)
    return 0;
  else if (namespace)
    return Object.entries(mw.config.get("wgFormattedNamespaces")).find(([, value]) => value === namespace)?.[0] ?? 0;
  else
    return Object.entries(mw.config.get("wgFormattedNamespaces")).filter(([, value]) => notNamespace !== (value || "Article")).map(([key]) => key).join("|");
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy90by1tb25pdG9yLWxpc3QudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IE1lZGlhV2lraURhdGFFcnJvciwgUGFnZVJldmlzaW9uc1Jlc3VsdCB9IGZyb20gJy4uL2dsb2JhbC10eXBlcyc7XG5cbmludGVyZmFjZSBTZWFyY2hEYXRhIHtcbiAgICBjYXRlZ29yaWVzOiB7IGlkOiBzdHJpbmc7IGNhdGVnb3J5OiBzdHJpbmc7IG5hbWVzcGFjZT86IHN0cmluZzsgbm90TmFtZXNwYWNlPzogc3RyaW5nIH1bXTtcbiAgICBzZWFyY2hlczogeyBpZDogc3RyaW5nOyBzZWFyY2g6IHN0cmluZzsgbmFtZXNwYWNlPzogc3RyaW5nOyBub3ROYW1lc3BhY2U/OiBzdHJpbmcgfVtdO1xuICAgIHdoYXRMaW5rc0hlcmU6IHsgaWQ6IHN0cmluZzsgdGl0bGU6IHN0cmluZzsgbmFtZXNwYWNlPzogc3RyaW5nOyBub3ROYW1lc3BhY2U/OiBzdHJpbmcgfVtdO1xuICAgIHRyYW5zY2x1c2lvbnM6IHsgaWQ6IHN0cmluZzsgdGl0bGU6IHN0cmluZzsgbmFtZXNwYWNlPzogc3RyaW5nOyBub3ROYW1lc3BhY2U/OiBzdHJpbmcgfVtdO1xufVxuXG5pbnRlcmZhY2UgU2VhcmNoUmVzdWx0IHtcbiAgICBxdWVyeTogeyBzZWFyY2hpbmZvOiB7IHRvdGFsaGl0czogbnVtYmVyIH0gfTtcbn1cbmludGVyZmFjZSBCYWNrbGlua3NSZXN1bHQge1xuICAgIHF1ZXJ5OiB7IGJhY2tsaW5rczogb2JqZWN0W10gfTtcbn1cbmludGVyZmFjZSBFbWJlZGRlZGluUmVzdWx0IHtcbiAgICBxdWVyeTogeyBlbWJlZGRlZGluOiBvYmplY3RbXSB9O1xufVxuXG5tdy5sb2FkZXIudXNpbmcoWydtZWRpYXdpa2kudXRpbCddLCAoKSA9PiB7XG4gICAgaWYgKG13LmNvbmZpZy5nZXQoJ3dnUGFnZU5hbWUnKSAhPT0gJ1VzZXI6RWVqaXQ0MycpIHJldHVybjtcblxuICAgIGNvbnN0IGxpbmsgPSBtdy51dGlsLmFkZFBvcnRsZXRMaW5rKG13LmNvbmZpZy5nZXQoJ3NraW4nKSA9PT0gJ21pbmVydmEnID8gJ3AtdGInIDogJ3AtY2FjdGlvbnMnLCAnIycsICdBZGQgY291bnRzIHRvIG1vbml0b3JpbmcgbGlzdCcsICdhZGQtbW9uaXRvcmluZy1jb3VudHMnKSE7XG5cbiAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgY29uc3QgdG9DaGVjayA9IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgKGF3YWl0IG5ldyBtdy5BcGkoKS5nZXQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHZlcnNpb246IDIsXG4gICAgICAgICAgICAgICAgICAgIHByb3A6ICdyZXZpc2lvbnMnLFxuICAgICAgICAgICAgICAgICAgICBydnByb3A6ICdjb250ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgcnZzbG90czogJyonLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZXM6ICdVc2VyOkVlaml0NDMvc2NyaXB0cy90by1tb25pdG9yLWxpc3QuanNvbicsXG4gICAgICAgICAgICAgICAgfSkpIGFzIFBhZ2VSZXZpc2lvbnNSZXN1bHRcbiAgICAgICAgICAgICkucXVlcnkucGFnZXNbMF0ucmV2aXNpb25zWzBdLnNsb3RzLm1haW4uY29udGVudCxcbiAgICAgICAgKSBhcyBTZWFyY2hEYXRhO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL25vLWFycmF5LWZvci1lYWNoXG4gICAgICAgIHRvQ2hlY2suY2F0ZWdvcmllcy5mb3JFYWNoKGFzeW5jIChjaGVjaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YTogU2VhcmNoUmVzdWx0IHwgbnVsbCA9IGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6ICdzZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICBzcmluZm86ICd0b3RhbGhpdHMnLFxuICAgICAgICAgICAgICAgICAgICBzcm5hbWVzcGFjZTogZ2V0Q2F0ZWdvcnkoY2hlY2spLFxuICAgICAgICAgICAgICAgICAgICBzcnNlYXJjaDogYGluY2F0ZWdvcnk6XCIke2NoZWNrLmNhdGVnb3J5fVwiYCxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3JDb2RlOiBzdHJpbmcsIGVycm9ySW5mbzogTWVkaWFXaWtpRGF0YUVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG13Lm5vdGlmeShgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldCBjYXRlZ29yeSBtZW1iZXJzOiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCwgeyB0eXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gKGRhdGEgYXMgU2VhcmNoUmVzdWx0KS5xdWVyeS5zZWFyY2hpbmZvLnRvdGFsaGl0cztcblxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0by1tb25pdG9yLWxpc3QtJHtjaGVjay5pZH1gKTtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuIG13Lm5vdGlmeShgRmFpbGVkIHRvIGZpbmQgZWxlbWVudCBmb3IgSUQgXCIke2NoZWNrLmlkfVwiYCk7XG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGNvdW50ID09PSAwID8gJzxzcGFuIHN0eWxlPVwiY29sb3I6ICMwMDczM2ZcIj5Ob25lPC9zcGFuPicgOiBgPGI+PHNwYW4gc3R5bGU9XCJjb2xvcjogI2JkMjgyOFwiPiR7Y291bnQgPT09IDUwMCA/ICc1MDArJyA6IGNvdW50fTwvc3Bhbj48L2I+YDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vbm8tYXJyYXktZm9yLWVhY2hcbiAgICAgICAgdG9DaGVjay5zZWFyY2hlcy5mb3JFYWNoKGFzeW5jIChjaGVjaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YTogU2VhcmNoUmVzdWx0IHwgbnVsbCA9IGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6ICdzZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICBzcmluZm86ICd0b3RhbGhpdHMnLFxuICAgICAgICAgICAgICAgICAgICBzcm5hbWVzcGFjZTogZ2V0Q2F0ZWdvcnkoY2hlY2spLFxuICAgICAgICAgICAgICAgICAgICBzcnNlYXJjaDogY2hlY2suc2VhcmNoLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvckNvZGU6IHN0cmluZywgZXJyb3JJbmZvOiBNZWRpYVdpa2lEYXRhRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZ2V0IHNlYXJjaCByZXN1bHRzOiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCwgeyB0eXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gKGRhdGEgYXMgU2VhcmNoUmVzdWx0KS5xdWVyeS5zZWFyY2hpbmZvLnRvdGFsaGl0cztcblxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0by1tb25pdG9yLWxpc3QtJHtjaGVjay5pZH1gKTtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuIG13Lm5vdGlmeShgRmFpbGVkIHRvIGZpbmQgZWxlbWVudCBmb3IgSUQgXCIke2NoZWNrLmlkfVwiYCk7XG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGNvdW50ID09PSAwID8gJzxzcGFuIHN0eWxlPVwiY29sb3I6ICMwMDczM2ZcIj5Ob25lPC9zcGFuPicgOiBgPGI+PHNwYW4gc3R5bGU9XCJjb2xvcjogI2JkMjgyOFwiPiR7Y291bnQudG9Mb2NhbGVTdHJpbmcoKX08L3NwYW4+PC9iPmA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL25vLWFycmF5LWZvci1lYWNoXG4gICAgICAgIHRvQ2hlY2sud2hhdExpbmtzSGVyZS5mb3JFYWNoKGFzeW5jIChjaGVjaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YTogQmFja2xpbmtzUmVzdWx0IHwgbnVsbCA9IGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgIGJsbGltaXQ6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgYmxuYW1lc3BhY2U6IGdldENhdGVnb3J5KGNoZWNrKSxcbiAgICAgICAgICAgICAgICAgICAgYmx0aXRsZTogY2hlY2sudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6ICdiYWNrbGlua3MnLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvckNvZGU6IHN0cmluZywgZXJyb3JJbmZvOiBNZWRpYVdpa2lEYXRhRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZ2V0IGJhY2tsaW5rczogJHtlcnJvckluZm8/LmVycm9yLmluZm8gPz8gJ1Vua25vd24gZXJyb3InfSAoJHtlcnJvckNvZGV9KWAsIHsgdHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IChkYXRhIGFzIEJhY2tsaW5rc1Jlc3VsdCkucXVlcnkuYmFja2xpbmtzLmxlbmd0aDtcblxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0by1tb25pdG9yLWxpc3QtJHtjaGVjay5pZH1gKTtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuIG13Lm5vdGlmeShgRmFpbGVkIHRvIGZpbmQgZWxlbWVudCBmb3IgSUQgXCIke2NoZWNrLmlkfVwiYCk7XG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGNvdW50ID09PSAwID8gJzxzcGFuIHN0eWxlPVwiY29sb3I6ICMwMDczM2ZcIj5Ob25lPC9zcGFuPicgOiBgPGI+PHNwYW4gc3R5bGU9XCJjb2xvcjogI2JkMjgyOFwiPiR7Y291bnQgPT09IDUwMCA/ICc1MDArJyA6IGNvdW50fTwvc3Bhbj48L2I+YDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vbm8tYXJyYXktZm9yLWVhY2hcbiAgICAgICAgdG9DaGVjay50cmFuc2NsdXNpb25zLmZvckVhY2goYXN5bmMgKGNoZWNrKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhOiBFbWJlZGRlZGluUmVzdWx0IHwgbnVsbCA9IGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgIGVpbGltaXQ6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgZWluYW1lc3BhY2U6IGdldENhdGVnb3J5KGNoZWNrKSxcbiAgICAgICAgICAgICAgICAgICAgZWl0aXRsZTogY2hlY2sudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6ICdlbWJlZGRlZGluJyxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3JDb2RlOiBzdHJpbmcsIGVycm9ySW5mbzogTWVkaWFXaWtpRGF0YUVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG13Lm5vdGlmeShgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGdldCB0cmFuc2NsdXNpb25zOiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCwgeyB0eXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gKGRhdGEgYXMgRW1iZWRkZWRpblJlc3VsdCkucXVlcnkuZW1iZWRkZWRpbi5sZW5ndGg7XG5cbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjdG8tbW9uaXRvci1saXN0LSR7Y2hlY2suaWR9YCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVybiBtdy5ub3RpZnkoYEZhaWxlZCB0byBmaW5kIGVsZW1lbnQgZm9yIElEIFwiJHtjaGVjay5pZH1cImApO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBjb3VudCA9PT0gMCA/ICc8c3BhbiBzdHlsZT1cImNvbG9yOiAjMDA3MzNmXCI+Tm9uZTwvc3Bhbj4nIDogYDxiPjxzcGFuIHN0eWxlPVwiY29sb3I6ICNiZDI4MjhcIj4ke2NvdW50ID09PSA1MDAgPyAnNTAwKycgOiBjb3VudH08L3NwYW4+PC9iPmA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG13Lm5vdGlmeSgnU3VjY2Vzc2Z1bGx5IGFkZGVkIG1pc3NpbmcgY291bnRzIHRvIFwiU3R1ZmYgdG8gbW9uaXRvclwiJywgeyB0eXBlOiAnc3VjY2VzcycgfSk7XG4gICAgfSk7XG59KTtcblxuLyoqXG4gKiBQYXJzZXMgdGhlIHNlYXJjaGVkIGNhdGVnb3JpZXMgZnJvbSB0aGUgY2hlY2sgb2JqZWN0LlxuICogQHBhcmFtIGNoZWNrIFRoZSBjaGVjayBvYmplY3QuXG4gKiBAcGFyYW0gY2hlY2submFtZXNwYWNlIFRoZSBuYW1lc3BhY2UgdG8gc2VhcmNoIGluLlxuICogQHBhcmFtIGNoZWNrLm5vdE5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHRvIGV4Y2x1ZGUgZnJvbSB0aGUgc2VhcmNoLlxuICogQHJldHVybnMgVGhlIGNhdGVnb3J5IElEIG9yIGxpc3Qgb2YgY2F0ZWdvcnkgSURzIChzZXBhcmF0ZWQgYnkgJ3wnKS5cbiAqL1xuZnVuY3Rpb24gZ2V0Q2F0ZWdvcnkoeyBuYW1lc3BhY2UsIG5vdE5hbWVzcGFjZSB9OiB7IG5hbWVzcGFjZT86IHN0cmluZzsgbm90TmFtZXNwYWNlPzogc3RyaW5nIH0pOiBudW1iZXIgfCBzdHJpbmcge1xuICAgIGlmICghbmFtZXNwYWNlICYmICFub3ROYW1lc3BhY2UpIHJldHVybiAwO1xuICAgIGVsc2UgaWYgKG5hbWVzcGFjZSkgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG13LmNvbmZpZy5nZXQoJ3dnRm9ybWF0dGVkTmFtZXNwYWNlcycpKS5maW5kKChbLCB2YWx1ZV0pID0+IHZhbHVlID09PSBuYW1lc3BhY2UpPy5bMF0gPz8gMDtcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhtdy5jb25maWcuZ2V0KCd3Z0Zvcm1hdHRlZE5hbWVzcGFjZXMnKSlcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZhbHVlXSkgPT4gbm90TmFtZXNwYWNlICE9PSAodmFsdWUgfHwgJ0FydGljbGUnKSlcbiAgICAgICAgICAgIC5tYXAoKFtrZXldKSA9PiBrZXkpXG4gICAgICAgICAgICAuam9pbignfCcpO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjtBQW1CQSxHQUFHLE9BQU8sTUFBTSxDQUFDLGdCQUFnQixHQUFHLE1BQU07QUFDdEMsTUFBSSxHQUFHLE9BQU8sSUFBSSxZQUFZLE1BQU07QUFBZ0I7QUFFcEQsUUFBTSxPQUFPLEdBQUcsS0FBSyxlQUFlLEdBQUcsT0FBTyxJQUFJLE1BQU0sTUFBTSxZQUFZLFNBQVMsY0FBYyxLQUFLLGlDQUFpQyx1QkFBdUI7QUFFOUosT0FBSyxpQkFBaUIsU0FBUyxPQUFPLFVBQVU7QUFDNUMsVUFBTSxlQUFlO0FBRXJCLFVBQU0sVUFBVSxLQUFLO0FBQUEsT0FFWixNQUFNLElBQUksR0FBRyxJQUFJLEVBQUUsSUFBSTtBQUFBLFFBQ3BCLFFBQVE7QUFBQSxRQUNSLGVBQWU7QUFBQSxRQUNmLE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxNQUNaLENBQUMsR0FDSCxNQUFNLE1BQU0sQ0FBQyxFQUFFLFVBQVUsQ0FBQyxFQUFFLE1BQU0sS0FBSztBQUFBLElBQzdDO0FBR0EsWUFBUSxXQUFXLFFBQVEsT0FBTyxVQUFVO0FBQ3hDLFlBQU0sT0FBNEIsTUFBTSxJQUFJLEdBQUcsSUFBSSxFQUM5QyxJQUFJO0FB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
