// <nowiki>
// Note: This script was compiled and minified from TypeScript. For a more readable version, see https://github.com/Eejit43/wikipedia-scripts/blob/main/scripts/to-monitor-list.ts

"use strict";mw.loader.using(["mediawiki.util"],()=>{if(mw.config.get("wgPageName")!=="User:Eejit43")return;const u=document.querySelector(".mw-editsection").cloneNode(!0),r=document.createElement("a");r.href="#",r.style.fontWeight="bold",r.textContent="Add missing counts",r.addEventListener("click",async s=>{s.preventDefault();const o=JSON.parse((await new mw.Api().get({action:"query",formatversion:"2",prop:"revisions",rvprop:"content",rvslots:"main",titles:"User:Eejit43/scripts/to-monitor-list.json"})).query.pages[0].revisions[0].slots.main.content),m=Object.entries(o).reduce((e,[,n])=>e+n.length,0);let a=0;o.categories.forEach(async e=>{const n=await new mw.Api().get({action:"query",list:"search",srinfo:"totalhits",srnamespace:getCategory(e),srsearch:`incategory:"${e.category}"`}).catch((l,c)=>(mw.notify(`An error occurred while trying to get category members: ${c?.error.info??"Unknown error"} (${l})`,{type:"error"}),null));if(!n)return;const t=n.query.searchinfo.totalhits,i=document.querySelector(`#to-monitor-list-${e.id}`);if(!i)return mw.notify(`Failed to find element for ID "${e.id}"`);i.innerHTML=t===0?'<span style="color: #00733f">None</span>':`<b><span style="color: #bd2828">${t===500?"500+":t}</span></b>`,a++,r.textContent=`Add missing counts (${a}/${m} loaded)`}),o.searches.forEach(async e=>{const n=await new mw.Api().get({action:"query",list:"search",srinfo:"totalhits",srnamespace:getCategory(e),srsearch:e.search}).catch((l,c)=>(mw.notify(`An error occurred while trying to get search results: ${c?.error.info??"Unknown error"} (${l})`,{type:"error"}),null));if(!n)return;const t=n.query.searchinfo.totalhits,i=document.querySelector(`#to-monitor-list-${e.id}`);if(!i)return mw.notify(`Failed to find element for ID "${e.id}"`);i.innerHTML=t===0?'<span style="color: #00733f">None</span>':`<b><span style="color: #bd2828">${t.toLocaleString()}</span></b>`,a++,r.textContent=`Add missing counts (${a}/${m} loaded)`}),o.whatLinksHere.forEach(async e=>{const n=await new mw.Api().get({action:"query",list:"backlinks",bllimit:500,blnamespace:getCategory(e),bltitle:e.title}).catch((l,c)=>(mw.notify(`An error occurred while trying to get backlinks: ${c?.error.info??"Unknown error"} (${l})`,{type:"error"}),null));if(!n)return;const t=n.query.backlinks.length,i=document.querySelector(`#to-monitor-list-${e.id}`);if(!i)return mw.notify(`Failed to find element for ID "${e.id}"`);i.innerHTML=t===0?'<span style="color: #00733f">None</span>':`<b><span style="color: #bd2828">${t===500?"500+":t}</span></b>`,a++,r.textContent=`Add missing counts (${a}/${m} loaded)`}),o.transclusions.forEach(async e=>{const n=await new mw.Api().get({action:"query",list:"embeddedin",eilimit:500,einamespace:getCategory(e),eititle:e.title}).catch((l,c)=>(mw.notify(`An error occurred while trying to get transclusions: ${c?.error.info??"Unknown error"} (${l})`,{type:"error"}),null));if(!n)return;const t=n.query.embeddedin.length,i=document.querySelector(`#to-monitor-list-${e.id}`);if(!i)return mw.notify(`Failed to find element for ID "${e.id}"`);i.innerHTML=t===0?'<span style="color: #00733f">None</span>':`<b><span style="color: #bd2828">${t===500?"500+":t}</span></b>`,a++,r.textContent=`Add missing counts (${a}/${m} loaded)`})}),u.querySelector("a").replaceWith(r),document.querySelector("#Stuff_to_monitor.mw-headline").after(u)});function getCategory({namespace:u,notNamespace:r}){if(!u&&!r)return 0;if(u){const s=Object.entries(mw.config.get("wgFormattedNamespaces")).find(([,o])=>o===u);return s?Number.parseInt(s[0]):0}else return Object.entries(mw.config.get("wgFormattedNamespaces")).filter(([,s])=>r!==(s||"Article")).map(([s])=>Number.parseInt(s))}

// </nowiki>
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc2NyaXB0cy90by1tb25pdG9yLWxpc3QudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwaVF1ZXJ5QmFja2xpbmtzUGFyYW1zLCBBcGlRdWVyeVJldmlzaW9uc1BhcmFtcywgQXBpUXVlcnlTZWFyY2hQYXJhbXMgfSBmcm9tICd0eXBlcy1tZWRpYXdpa2kvYXBpX3BhcmFtcyc7XG5pbXBvcnQgeyBCYWNrbGlua3NSZXN1bHQsIEVtYmVkZGVkaW5SZXN1bHQsIE1lZGlhV2lraURhdGFFcnJvciwgUGFnZVJldmlzaW9uc1Jlc3VsdCwgU2VhcmNoUmVzdWx0IH0gZnJvbSAnLi4vZ2xvYmFsLXR5cGVzJztcblxuaW50ZXJmYWNlIFNlYXJjaERhdGEge1xuICAgIGNhdGVnb3JpZXM6IHsgaWQ6IHN0cmluZzsgY2F0ZWdvcnk6IHN0cmluZzsgbmFtZXNwYWNlPzogc3RyaW5nOyBub3ROYW1lc3BhY2U/OiBzdHJpbmcgfVtdO1xuICAgIHNlYXJjaGVzOiB7IGlkOiBzdHJpbmc7IHNlYXJjaDogc3RyaW5nOyBuYW1lc3BhY2U/OiBzdHJpbmc7IG5vdE5hbWVzcGFjZT86IHN0cmluZyB9W107XG4gICAgd2hhdExpbmtzSGVyZTogeyBpZDogc3RyaW5nOyB0aXRsZTogc3RyaW5nOyBuYW1lc3BhY2U/OiBzdHJpbmc7IG5vdE5hbWVzcGFjZT86IHN0cmluZyB9W107XG4gICAgdHJhbnNjbHVzaW9uczogeyBpZDogc3RyaW5nOyB0aXRsZTogc3RyaW5nOyBuYW1lc3BhY2U/OiBzdHJpbmc7IG5vdE5hbWVzcGFjZT86IHN0cmluZyB9W107XG59XG5cbm13LmxvYWRlci51c2luZyhbJ21lZGlhd2lraS51dGlsJ10sICgpID0+IHtcbiAgICBpZiAobXcuY29uZmlnLmdldCgnd2dQYWdlTmFtZScpICE9PSAnVXNlcjpFZWppdDQzJykgcmV0dXJuO1xuXG4gICAgY29uc3QgZnVsbExpbmtFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm13LWVkaXRzZWN0aW9uJykhLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MU3BhbkVsZW1lbnQ7XG5cbiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGxpbmsuaHJlZiA9ICcjJztcbiAgICBsaW5rLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gICAgbGluay50ZXh0Q29udGVudCA9ICdBZGQgbWlzc2luZyBjb3VudHMnO1xuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB0b0NoZWNrID0gSlNPTi5wYXJzZShcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAoYXdhaXQgbmV3IG13LkFwaSgpLmdldCh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dmVyc2lvbjogJzInLFxuICAgICAgICAgICAgICAgICAgICBwcm9wOiAncmV2aXNpb25zJyxcbiAgICAgICAgICAgICAgICAgICAgcnZwcm9wOiAnY29udGVudCcsXG4gICAgICAgICAgICAgICAgICAgIHJ2c2xvdHM6ICdtYWluJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVzOiAnVXNlcjpFZWppdDQzL3NjcmlwdHMvdG8tbW9uaXRvci1saXN0Lmpzb24nLFxuICAgICAgICAgICAgICAgIH0gc2F0aXNmaWVzIEFwaVF1ZXJ5UmV2aXNpb25zUGFyYW1zKSkgYXMgUGFnZVJldmlzaW9uc1Jlc3VsdFxuICAgICAgICAgICAgKS5xdWVyeS5wYWdlc1swXS5yZXZpc2lvbnNbMF0uc2xvdHMubWFpbi5jb250ZW50LFxuICAgICAgICApIGFzIFNlYXJjaERhdGE7XG5cbiAgICAgICAgY29uc3QgdG90YWxSZXF1ZXN0cyA9IE9iamVjdC5lbnRyaWVzKHRvQ2hlY2spLnJlZHVjZSgoYWNjdW11bGF0b3IsIFssIHZhbHVlXTogW3N0cmluZywgdW5rbm93bltdXSkgPT4gYWNjdW11bGF0b3IgKyB2YWx1ZS5sZW5ndGgsIDApO1xuXG4gICAgICAgIGxldCBoYW5kbGVkUmVxdWVzdHMgPSAwO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL25vLWFycmF5LWZvci1lYWNoXG4gICAgICAgIHRvQ2hlY2suY2F0ZWdvcmllcy5mb3JFYWNoKGFzeW5jIChjaGVjaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YTogU2VhcmNoUmVzdWx0IHwgbnVsbCA9IGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6ICdzZWFyY2gnLFxuICAgICAgICAgICAgICAgICAgICBzcmluZm86ICd0b3RhbGhpdHMnLFxuICAgICAgICAgICAgICAgICAgICBzcm5hbWVzcGFjZTogZ2V0Q2F0ZWdvcnkoY2hlY2spLFxuICAgICAgICAgICAgICAgICAgICBzcnNlYXJjaDogYGluY2F0ZWdvcnk6XCIke2NoZWNrLmNhdGVnb3J5fVwiYCxcbiAgICAgICAgICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeVNlYXJjaFBhcmFtcylcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yQ29kZTogc3RyaW5nLCBlcnJvckluZm86IE1lZGlhV2lraURhdGFFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBnZXQgY2F0ZWdvcnkgbWVtYmVyczogJHtlcnJvckluZm8/LmVycm9yLmluZm8gPz8gJ1Vua25vd24gZXJyb3InfSAoJHtlcnJvckNvZGV9KWAsIHsgdHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IChkYXRhIGFzIFNlYXJjaFJlc3VsdCkucXVlcnkuc2VhcmNoaW5mby50b3RhbGhpdHM7XG5cbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjdG8tbW9uaXRvci1saXN0LSR7Y2hlY2suaWR9YCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVybiBtdy5ub3RpZnkoYEZhaWxlZCB0byBmaW5kIGVsZW1lbnQgZm9yIElEIFwiJHtjaGVjay5pZH1cImApO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBjb3VudCA9PT0gMCA/ICc8c3BhbiBzdHlsZT1cImNvbG9yOiAjMDA3MzNmXCI+Tm9uZTwvc3Bhbj4nIDogYDxiPjxzcGFuIHN0eWxlPVwiY29sb3I6ICNiZDI4MjhcIj4ke2NvdW50ID09PSA1MDAgPyAnNTAwKycgOiBjb3VudH08L3NwYW4+PC9iPmA7XG5cbiAgICAgICAgICAgIGhhbmRsZWRSZXF1ZXN0cysrO1xuICAgICAgICAgICAgbGluay50ZXh0Q29udGVudCA9IGBBZGQgbWlzc2luZyBjb3VudHMgKCR7aGFuZGxlZFJlcXVlc3RzfS8ke3RvdGFsUmVxdWVzdHN9IGxvYWRlZClgO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9uby1hcnJheS1mb3ItZWFjaFxuICAgICAgICB0b0NoZWNrLnNlYXJjaGVzLmZvckVhY2goYXN5bmMgKGNoZWNrKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhOiBTZWFyY2hSZXN1bHQgfCBudWxsID0gYXdhaXQgbmV3IG13LkFwaSgpXG4gICAgICAgICAgICAgICAgLmdldCh7XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgbGlzdDogJ3NlYXJjaCcsXG4gICAgICAgICAgICAgICAgICAgIHNyaW5mbzogJ3RvdGFsaGl0cycsXG4gICAgICAgICAgICAgICAgICAgIHNybmFtZXNwYWNlOiBnZXRDYXRlZ29yeShjaGVjayksXG4gICAgICAgICAgICAgICAgICAgIHNyc2VhcmNoOiBjaGVjay5zZWFyY2gsXG4gICAgICAgICAgICAgICAgfSBzYXRpc2ZpZXMgQXBpUXVlcnlTZWFyY2hQYXJhbXMpXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvckNvZGU6IHN0cmluZywgZXJyb3JJbmZvOiBNZWRpYVdpa2lEYXRhRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbXcubm90aWZ5KGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZ2V0IHNlYXJjaCByZXN1bHRzOiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCwgeyB0eXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gKGRhdGEgYXMgU2VhcmNoUmVzdWx0KS5xdWVyeS5zZWFyY2hpbmZvLnRvdGFsaGl0cztcblxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0by1tb25pdG9yLWxpc3QtJHtjaGVjay5pZH1gKTtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkgcmV0dXJuIG13Lm5vdGlmeShgRmFpbGVkIHRvIGZpbmQgZWxlbWVudCBmb3IgSUQgXCIke2NoZWNrLmlkfVwiYCk7XG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGNvdW50ID09PSAwID8gJzxzcGFuIHN0eWxlPVwiY29sb3I6ICMwMDczM2ZcIj5Ob25lPC9zcGFuPicgOiBgPGI+PHNwYW4gc3R5bGU9XCJjb2xvcjogI2JkMjgyOFwiPiR7Y291bnQudG9Mb2NhbGVTdHJpbmcoKX08L3NwYW4+PC9iPmA7XG5cbiAgICAgICAgICAgIGhhbmRsZWRSZXF1ZXN0cysrO1xuICAgICAgICAgICAgbGluay50ZXh0Q29udGVudCA9IGBBZGQgbWlzc2luZyBjb3VudHMgKCR7aGFuZGxlZFJlcXVlc3RzfS8ke3RvdGFsUmVxdWVzdHN9IGxvYWRlZClgO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9uby1hcnJheS1mb3ItZWFjaFxuICAgICAgICB0b0NoZWNrLndoYXRMaW5rc0hlcmUuZm9yRWFjaChhc3luYyAoY2hlY2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGE6IEJhY2tsaW5rc1Jlc3VsdCB8IG51bGwgPSBhd2FpdCBuZXcgbXcuQXBpKClcbiAgICAgICAgICAgICAgICAuZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncXVlcnknLFxuICAgICAgICAgICAgICAgICAgICBsaXN0OiAnYmFja2xpbmtzJyxcbiAgICAgICAgICAgICAgICAgICAgYmxsaW1pdDogNTAwLFxuICAgICAgICAgICAgICAgICAgICBibG5hbWVzcGFjZTogZ2V0Q2F0ZWdvcnkoY2hlY2spLFxuICAgICAgICAgICAgICAgICAgICBibHRpdGxlOiBjaGVjay50aXRsZSxcbiAgICAgICAgICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeUJhY2tsaW5rc1BhcmFtcylcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yQ29kZTogc3RyaW5nLCBlcnJvckluZm86IE1lZGlhV2lraURhdGFFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBnZXQgYmFja2xpbmtzOiAke2Vycm9ySW5mbz8uZXJyb3IuaW5mbyA/PyAnVW5rbm93biBlcnJvcid9ICgke2Vycm9yQ29kZX0pYCwgeyB0eXBlOiAnZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gKGRhdGEgYXMgQmFja2xpbmtzUmVzdWx0KS5xdWVyeS5iYWNrbGlua3MubGVuZ3RoO1xuXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3RvLW1vbml0b3ItbGlzdC0ke2NoZWNrLmlkfWApO1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm4gbXcubm90aWZ5KGBGYWlsZWQgdG8gZmluZCBlbGVtZW50IGZvciBJRCBcIiR7Y2hlY2suaWR9XCJgKTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gY291bnQgPT09IDAgPyAnPHNwYW4gc3R5bGU9XCJjb2xvcjogIzAwNzMzZlwiPk5vbmU8L3NwYW4+JyA6IGA8Yj48c3BhbiBzdHlsZT1cImNvbG9yOiAjYmQyODI4XCI+JHtjb3VudCA9PT0gNTAwID8gJzUwMCsnIDogY291bnR9PC9zcGFuPjwvYj5gO1xuXG4gICAgICAgICAgICBoYW5kbGVkUmVxdWVzdHMrKztcbiAgICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBgQWRkIG1pc3NpbmcgY291bnRzICgke2hhbmRsZWRSZXF1ZXN0c30vJHt0b3RhbFJlcXVlc3RzfSBsb2FkZWQpYDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHVuaWNvcm4vbm8tYXJyYXktZm9yLWVhY2hcbiAgICAgICAgdG9DaGVjay50cmFuc2NsdXNpb25zLmZvckVhY2goYXN5bmMgKGNoZWNrKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhOiBFbWJlZGRlZGluUmVzdWx0IHwgbnVsbCA9IGF3YWl0IG5ldyBtdy5BcGkoKVxuICAgICAgICAgICAgICAgIC5nZXQoe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdxdWVyeScsXG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6ICdlbWJlZGRlZGluJyxcbiAgICAgICAgICAgICAgICAgICAgZWlsaW1pdDogNTAwLFxuICAgICAgICAgICAgICAgICAgICBlaW5hbWVzcGFjZTogZ2V0Q2F0ZWdvcnkoY2hlY2spLFxuICAgICAgICAgICAgICAgICAgICBlaXRpdGxlOiBjaGVjay50aXRsZSxcbiAgICAgICAgICAgICAgICB9IHNhdGlzZmllcyBBcGlRdWVyeUJhY2tsaW5rc1BhcmFtcylcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yQ29kZTogc3RyaW5nLCBlcnJvckluZm86IE1lZGlhV2lraURhdGFFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtdy5ub3RpZnkoYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBnZXQgdHJhbnNjbHVzaW9uczogJHtlcnJvckluZm8/LmVycm9yLmluZm8gPz8gJ1Vua25vd24gZXJyb3InfSAoJHtlcnJvckNvZGV9KWAsIHsgdHlwZTogJ2Vycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IChkYXRhIGFzIEVtYmVkZGVkaW5SZXN1bHQpLnF1ZXJ5LmVtYmVkZGVkaW4ubGVuZ3RoO1xuXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3RvLW1vbml0b3ItbGlzdC0ke2NoZWNrLmlkfWApO1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm4gbXcubm90aWZ5KGBGYWlsZWQgdG8gZmluZCBlbGVtZW50IGZvciBJRCBcIiR7Y2hlY2suaWR9XCJgKTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gY291bnQgPT09IDAgPyAnPHNwYW4gc3R5bGU9XCJjb2xvcjogIzAwNzMzZlwiPk5vbmU8L3NwYW4+JyA6IGA8Yj48c3BhbiBzdHlsZT1cImNvbG9yOiAjYmQyODI4XCI+JHtjb3VudCA9PT0gNTAwID8gJzUwMCsnIDogY291bnR9PC9zcGFuPjwvYj5gO1xuXG4gICAgICAgICAgICBoYW5kbGVkUmVxdWVzdHMrKztcbiAgICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBgQWRkIG1pc3NpbmcgY291bnRzICgke2hhbmRsZWRSZXF1ZXN0c30vJHt0b3RhbFJlcXVlc3RzfSBsb2FkZWQpYDtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBmdWxsTGlua0VsZW1lbnQucXVlcnlTZWxlY3RvcignYScpIS5yZXBsYWNlV2l0aChsaW5rKTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNTdHVmZl90b19tb25pdG9yLm13LWhlYWRsaW5lJykhLmFmdGVyKGZ1bGxMaW5rRWxlbWVudCk7XG59KTtcblxuLyoqXG4gKiBQYXJzZXMgdGhlIHNlYXJjaGVkIGNhdGVnb3JpZXMgZnJvbSB0aGUgY2hlY2sgb2JqZWN0LlxuICogQHBhcmFtIGNoZWNrIFRoZSBjaGVjayBvYmplY3QuXG4gKiBAcGFyYW0gY2hlY2submFtZXNwYWNlIFRoZSBuYW1lc3BhY2UgdG8gc2VhcmNoIGluLlxuICogQHBhcmFtIGNoZWNrLm5vdE5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHRvIGV4Y2x1ZGUgZnJvbSB0aGUgc2VhcmNoLlxuICogQHJldHVybnMgVGhlIGNhdGVnb3J5IElEIG9yIGxpc3Qgb2YgY2F0ZWdvcnkgSURzIChzZXBhcmF0ZWQgYnkgJ3wnKS5cbiAqL1xuZnVuY3Rpb24gZ2V0Q2F0ZWdvcnkoeyBuYW1lc3BhY2UsIG5vdE5hbWVzcGFjZSB9OiB7IG5hbWVzcGFjZT86IHN0cmluZzsgbm90TmFtZXNwYWNlPzogc3RyaW5nIH0pIHtcbiAgICBpZiAoIW5hbWVzcGFjZSAmJiAhbm90TmFtZXNwYWNlKSByZXR1cm4gMDtcbiAgICBlbHNlIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgY29uc3QgZm91bmROYW1lc3BhY2UgPSBPYmplY3QuZW50cmllcyhtdy5jb25maWcuZ2V0KCd3Z0Zvcm1hdHRlZE5hbWVzcGFjZXMnKSkuZmluZCgoWywgbmFtZXNwYWNlTmFtZV0pID0+IG5hbWVzcGFjZU5hbWUgPT09IG5hbWVzcGFjZSk7XG5cbiAgICAgICAgcmV0dXJuIGZvdW5kTmFtZXNwYWNlID8gTnVtYmVyLnBhcnNlSW50KGZvdW5kTmFtZXNwYWNlWzBdKSA6IDA7XG4gICAgfSBlbHNlXG4gICAgICAgIHJldHVybiBPYmplY3QuZW50cmllcyhtdy5jb25maWcuZ2V0KCd3Z0Zvcm1hdHRlZE5hbWVzcGFjZXMnKSlcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIG5hbWVzcGFjZU5hbWVdKSA9PiBub3ROYW1lc3BhY2UgIT09IChuYW1lc3BhY2VOYW1lIHx8ICdBcnRpY2xlJykpXG4gICAgICAgICAgICAubWFwKChbbmFtZXNwYWNlSWRdKSA9PiBOdW1iZXIucGFyc2VJbnQobmFtZXNwYWNlSWQpKTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7OzthQVVBLEdBQUcsT0FBTyxNQUFNLENBQUMsZ0JBQWdCLEVBQUcsSUFBTSxDQUN0QyxHQUFJLEdBQUcsT0FBTyxJQUFJLFlBQVksSUFBTSxlQUFnQixPQUVwRCxNQUFNQSxFQUFrQixTQUFTLGNBQWMsaUJBQWlCLEVBQUcsVUFBVSxFQUFJLEVBRTNFQyxFQUFPLFNBQVMsY0FBYyxHQUFHLEVBQ3ZDQSxFQUFLLEtBQU8sSUFDWkEsRUFBSyxNQUFNLFdBQWEsT0FDeEJBLEVBQUssWUFBYyxxQkFDbkJBLEVBQUssaUJBQWlCLFFBQVMsTUFBT0MsR0FBVSxDQUM1Q0EsRUFBTSxlQUFlLEVBRXJCLE1BQU1DLEVBQVUsS0FBSyxPQUVaLE1BQU0sSUFBSSxHQUFHLElBQUksRUFBRSxJQUFJLENBQ3BCLE9BQVEsUUFDUixjQUFl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QUF1QixDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBRUMsQ0FBYSxJQUFNQSxJQUFrQkgsQ0FBUyxFQUVySSxPQUFPRSxFQUFpQixPQUFPLFNBQVNBLEVBQWUsQ0FBQyxDQUFDLEVBQUksQ0FDakUsS0FDSSxRQUFPLE9BQU8sUUFBUSxHQUFHLE9BQU8sSUFBSSx1QkFBdUIsQ0FBQyxFQUN2RCxPQUFPLENBQUMsQ0FBQyxDQUFFQyxDQUFhLElBQU1GLEtBQWtCRSxHQUFpQixVQUFVLEVBQzNFLElBQUksQ0FBQyxDQUFDQyxDQUFXLElBQU0sT0FBTyxTQUFTQSxDQUFXLENBQUMsQ0FDaEUiLAogICJuYW1lcyI6IFsiZnVsbExpbmtFbGVtZW50IiwgImxpbmsiLCAiZXZlbnQiLCAidG9DaGVjayIsICJ0b3RhbFJlcXVlc3RzIiwgImFjY3VtdWxhdG9yIiwgInZhbHVlIiwgImhhbmRsZWRSZXF1ZXN0cyIsICJjaGVjayIsICJkYXRhIiwgImVycm9yQ29kZSIsICJlcnJvckluZm8iLCAiY291bnQiLCAiZWxlbWVudCIsICJuYW1lc3BhY2UiLCAibm90TmFtZXNwYWNlIiwgImZvdW5kTmFtZXNwYWNlIiwgIm5hbWVzcGFjZU5hbWUiLCAibmFtZXNwYWNlSWQiXQp9Cg==
